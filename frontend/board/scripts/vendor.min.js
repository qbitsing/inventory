function stripHtmlToText(html){var tmp=document.createElement("DIV");tmp.innerHTML=html;var res=tmp.textContent||tmp.innerText||"";return res.replace("​",""),res=res.trim()}function getDomFromHtml(html){var tmp=document.createElement("DIV");return tmp.innerHTML=html,tmp}function validElementString(string){try{return 0!==angular.element(string).length}catch(any){return!1}}function registerTextAngularTool(name,toolDefinition){if(!name||""===name||taTools.hasOwnProperty(name))throw"textAngular Error: A unique name is required for a Tool Definition";if(toolDefinition.display&&(""===toolDefinition.display||!validElementString(toolDefinition.display))||!toolDefinition.display&&!toolDefinition.buttontext&&!toolDefinition.iconclass)throw'textAngular Error: Tool Definition for "'+name+'" does not have a valid display/iconclass/buttontext value';taTools[name]=toolDefinition}function ChartAxes(){return{require:"^c3chart",restrict:"E",scope:{},replace:!0,link:function(a,b,c,d){var e=c.valuesX;e&&d.addXAxisValues(e);var f=c.valuesXs,g={};if(f){xsItems=f.split(",");for(var h in xsItems)xsItem=xsItems[h].split(":"),g[xsItem[0]]=xsItem[1];d.addXSValues(g)}var i=c.y,j=c.y2,k={};if(j){var l=j.split(",");for(var m in l)k[l[m]]="y2";if(i){var n=i.split(",");for(var o in n)k[n[o]]="y"}d.addYAxis(k)}}}}function ChartAxis(){return{require:"^c3chart",restrict:"E",scope:{},transclude:!0,template:"<div ng-transclude></div>",replace:!0,link:function(a,b,c,d){c.axisRotate&&d.rotateAxis()}}}function ChartAxisX(){return{require:"^c3chart",restrict:"E",scope:{},transclude:!0,template:"<div ng-transclude></div>",replace:!0,link:function(a,b,c,d){var e=c.axisPosition,f=c.axisLabel,g={label:{text:f,position:e}},h=c.paddingLeft,i=c.paddingRight;(h||i)&&(h=h||0,i=i||0,g.padding={left:parseInt(h),right:parseInt(i)});var j=c.axisHeight;j&&(g.height=parseInt(j)),"false"===c.show&&(g.show=!1),"true"===c.axisLocaltime&&(g.localtime=!0);var k=c.axisMax;k&&(g.max=k);var l=c.axisMin;l&&(g.min=l);var m=c.axisType;m&&(g.type=m),d.addAxisProperties("x",g);var n=c.axisXFormat;n&&d.setXFormat(n)}}}function ChartAxisXTick(){return{require:"^c3chart",restrict:"E",scope:{tickFormatFunction:"&"},replace:!0,link:function(a,b,c,d){var e={},f=c.tickCount;f&&(e.count=f);var g=c.tickCulling;g&&(g=angular.lowercase(g),"true"===g?e.culling=!0:"false"===g&&(e.culling=!1));var h=c.tickCullingMax;h&&(e.culling={max:parseInt(h)});var i=c.tickMultiline;i&&(i=angular.lowercase(i),"true"===i?e.multiline=!0:"false"===i&&(e.multiline=!1));var j=c.tickCentered;j&&(j=angular.lowercase(j),"true"===j?e.centered=!0:"false"===j&&(e.centered=!1));var k=c.tickRotate;k&&(e.rotate=k);var l=c.tickFit;l&&(l=angular.lowercase(l),"true"===l?e.fit=!0:"false"===l&&(e.fit=!1));var m=c.tickValues;m&&m&&(e.values=m.indexOf(",")>-1?m.split(","):m);var n=c.tickOuter;n&&(n=angular.lowercase(n),"true"===n?e.outer=!0:"false"===n&&(e.outer=!1));var o=c.format;o&&(e.format=d3.format(o));var p=c.formatTime;p&&(e.format=d3.time.format(p)),d.addXTick(e),c.tickFormatFunction&&d.addXTickFormatFunction(a.tickFormatFunction())}}}function ChartAxisY(){return{require:"^c3chart",restrict:"E",scope:{},replace:!0,link:function(a,b,c,d){var e=c.axisId,f=c.axisPosition,g=c.axisLabel;e=void 0==e?"y":e;var h={label:{text:g,position:f}};"false"===c.show?h.show=!1:"y2"===e&&(h.show=!0);var i=c.paddingTop,j=c.paddingBottom;(i||j)&&(i=i||0,j=j||0,h.padding={top:parseInt(i),bottom:parseInt(j)});var k=c.axisMax,l=c.axisMin;k&&(h.max=parseInt(k)),l&&(h.min=parseInt(l)),"true"===c.axisInverted&&(h.inverted=!0),"true"===c.axisInner&&(h.inner=!0);var m=c.axisCenter;m&&(h.center=parseInt(m)),d.addAxisProperties(e,h)}}}function ChartAxisYTick(){return{require:"^c3chart",restrict:"E",scope:{tickFormatFunction:"&"},replace:!0,link:function(a,b,c,d){var e={},f=c.tickCount;f&&(e.count=f);var g=c.tickOuter;g&&(g=angular.lowercase(g),"true"===g?e.outer=!0:"false"===g&&(e.outer=!1));var h=c.tickValues;h&&(e.values=h.indexOf(",")>-1?h.split(","):h);var i=c.tickFormat;i&&(e.format=d3.format(i)),d.addYTick(e),c.tickFormatFunction&&d.addYTickFormatFunction(a.tickFormatFunction())}}}function ChartBar(){return{require:"^c3chart",restrict:"E",scope:{},replace:!0,link:function(a,b,c,d){var e={};c.width&&(e.width=parseInt(c.width)),c.ratio&&(e.width||(e.width={}),e.width.ratio=parseFloat(c.ratio)),c.zerobased&&(e.zerobased="true"===c.zerobased),d.addBar(e)}}}function C3Chart(a){return{restrict:"E",controller:"ChartController",scope:{bindto:"@bindtoId",showLabels:"@showLabels",labelsFormatFunction:"&",onZoomEndFunction:"&",showSubchart:"@showSubchart",subchartOnBrushFunction:"&",enableZoom:"@enableZoom",chartData:"=chartData",chartColumns:"=chartColumns",chartX:"=chartX",callbackFunction:"&",emptyLabel:"@emptyLabel"},template:"<div><div id='{{bindto}}'></div><div ng-transclude></div></div>",replace:!0,transclude:!0,link:function(b,c,d,e){var f=d.paddingTop,g=d.paddingRight,h=d.paddingBottom,i=d.paddingLeft,j=d.sortData,k=d.transitionDuration,l=d.initialConfig;f&&e.addPadding("top",f),g&&e.addPadding("right",g),h&&e.addPadding("bottom",h),i&&e.addPadding("left",i),j&&e.addSorting(j),d.labelsFormatFunction&&e.addDataLabelsFormatFunction(b.labelsFormatFunction()),d.onZoomEndFunction&&e.addOnZoomEndFunction(b.onZoomEndFunction()),d.subchartOnBrushFunction&&e.addSubchartOnBrushFunction(b.subchartOnBrushFunction()),d.callbackFunction&&e.addChartCallbackFunction(b.callbackFunction()),k&&e.addTransitionDuration(k),l&&e.addInitialConfig(l),a(function(){e.showGraph()})}}}function ChartColors(){return{require:"^c3chart",restrict:"E",scope:{colorFunction:"&"},replace:!0,link:function(a,b,c,d){var e=c.colorPattern;e&&d.addColorPatterns(e.split(","));var f=c.thresholds;f&&d.addColorThresholds(f.split(",")),c.colorFunction&&d.addColorFunction(a.colorFunction())}}}function ChartColumn(){return{require:"^c3chart",restrict:"E",scope:{},replace:!0,link:function(a,b,c,d){var e=c.columnValues.split(",");e.unshift(c.columnId),d.addColumn(e,c.columnType,c.columnName,c.columnColor)}}}function ChartController(a,b){function c(){a.chart=null,a.columns=[],a.types={},a.regions={},a.axis={},a.axes={},a.padding=null,a.emptyLabel=null,a.xValues=null,a.xFormat=null,a.xsValues=null,a.xTick=null,a.yTick=null,a.names=null,a.grid=null,a.legend=null,a.tooltip=null,a.chartSize=null,a.colors=null,a.colorThresholds=null,a.gauge=null,a.jsonKeys=null,a.groups=null,a.sorting=null,a.transitionDuration=null,a.initialConfig=null,a.selection=null}function d(){var d={};a.initialConfig&&(d=a.initialConfig),d.bindto="#"+a.bindto,d.data=d.data||{},a.xValues&&(d.data.x=a.xValues),a.xsValues&&(d.data.xs=a.xsValues),a.columns&&(d.data.columns=a.columns),a.xFormat&&(d.data.xFormat=a.xFormat),d.data.types=d.data.types||a.types,d.data.axes=d.data.axes||a.axes,a.names&&(d.data.names=a.names),null!=a.emptyLabel&&(d.data.empty={label:{text:a.emptyLabel}}),null!=a.padding&&(d.padding=a.padding),null!=a.sorting&&(d.data.order="null"==a.sorting?null:a.sorting),null!=a.transitionDuration&&(d.transition=d.transition||{},d.transition.duration=a.transitionDuration),a.showLabels&&"true"===a.showLabels&&(d.data.labels=!0),a.dataLabelsFormatFunction&&(d.data.labels=d.data.labels||{},d.data.labels.format=a.dataLabelsFormatFunction),null!=a.groups&&(d.data.groups=a.groups),a.showSubchart&&"true"===a.showSubchart&&(d.subchart={show:!0}),a.subchartOnBrushFunction&&(d.subchart=d.subchart||{},d.subchart.onbrush=a.subchartOnBrushFunction),a.enableZoom&&"true"===a.enableZoom&&(d.zoom={enabled:!0}),a.onZoomEndFunction&&(d.zoom=d.zoom||{},d.zoom.onzoomend=a.onZoomEndFunction),d.axis=d.axis||a.axis,a.xTick&&(d.axis.x.tick=a.xTick),a.xTickFormatFunction&&(d.axis.x.tick=d.axis.x.tick||{},d.axis.x.tick.format=a.xTickFormatFunction),a.xType&&(d.axis.x.type=a.xType),a.yTick&&(d.axis.y.tick=a.yTick),a.yTickFormatFunction&&(d.axis.y.tick=d.axis.y.tick||{},d.axis.y.tick.format=a.yTickFormatFunction),null!=a.grid&&(d.grid=a.grid),null!=a.legend&&(d.legend=a.legend),d.tooltip=null!=a.tooltip?a.tooltip:{},a.tooltipTitleFormatFunction&&(d.tooltip.format=d.tooltip.format||{},d.tooltip.format.title=a.tooltipTitleFormatFunction),a.tooltipNameFormatFunction&&(d.tooltip.format=d.tooltip.format||{},d.tooltip.format.name=a.tooltipNameFormatFunction),a.tooltipValueFormatFunction&&(d.tooltip.format=d.tooltip.format||{},d.tooltip.format.value=a.tooltipValueFormatFunction),a.tooltipContentFormatFunction&&(d.tooltip.contents=a.tooltipContentFormatFunction),null!=a.chartSize&&(d.size=a.chartSize),null!=a.colors&&(d.data.colors=a.colors),a.colorFunction&&(d.data.color=a.colorFunction),null!=a.colorPatterns&&(void 0===d.color&&(d.color={}),d.color.pattern=a.colorPatterns),null!=a.colorThresholds&&(void 0===d.color&&(d.color={}),d.color.threshold={values:a.colorThresholds}),d.gauge=null!=a.gauge?a.gauge:{},a.gaugeLabelFormatFunction&&(d.gauge.label=d.gauge.label||{},d.gauge.label.format=a.gaugeLabelFormatFunction),null!=a.point&&(d.point=a.point),null!=a.bar&&(d.bar=a.bar),null!=a.line&&(d.line=a.line),null!=a.regions&&(d.data.regions=a.regions),null!=a.pie&&(d.pie=a.pie),a.pieLabelFormatFunction&&(d.pie.label=d.pie.label||{},d.pie.label.format=a.pieLabelFormatFunction),d.donut=null!=a.donut?a.donut:{},a.donutLabelFormatFunction&&(d.donut.label=d.donut.label||{},d.donut.label.format=a.donutLabelFormatFunction),null!=a.onInit&&(d.oninit=a.onInit),null!=a.onMouseover&&(d.onmouseover=a.onMouseover),null!=a.onMouseout&&(d.onmouseout=a.onMouseout),null!=a.onRendered&&(d.onrendered=a.onRendered),null!=a.onResize&&(d.onresize=a.onResize),null!=a.onResized&&(d.onresized=a.onResized),null!=a.dataOnClick&&(d.data.onclick=function(b){a.$apply(function(){a.dataOnClick({data:b})})}),null!=a.dataOnMouseover&&(d.data.onmouseover=function(b){a.$apply(function(){a.dataOnMouseover({data:b})})}),null!=a.dataOnMouseout&&(d.data.onmouseout=function(b){a.$apply(function(){a.dataOnMouseout({data:b})})}),null!=a.selection&&(d.data.selection=a.selection),a.config=d,a.chartData&&a.chartColumns?a.$watch("chartData",function(){gb()},!0):(a.chart=c3.generate(a.config),a.chartCallbackFunction&&a.chartCallbackFunction(a.chart)),a.$on("$destroy",function(){b(function(){angular.isDefined(a.chart)&&(a.chart=a.chart.destroy(),c())},1e4)})}function e(b,c,d,e){a.columns.push(b),eb(b[0],c,d,e)}function f(b){a.axes=b,a.axis.y2||(a.axis.y2={show:!0})}function g(b){a.dataLabelsFormatFunction=b}function h(b){a.subchartOnBrushFunction=b}function i(b){a.onZoomEndFunction=b}function j(b){a.chartCallbackFunction=b}function k(b){a.transitionDuration=b}function l(b){a.xValues=b}function m(b){a.xsValues=b}function n(b,c){a.axis[b]=c}function o(b){a.xTick=b}function p(b){a.xTickFormatFunction=b}function q(b){a.xType=b}function r(b){a.yTick=b}function s(b){a.yTickFormatFunction=b}function t(){a.axis.rotated=!0}function u(b){a.emptyLabel=b}function v(b,c){null==a.padding&&(a.padding={}),a.padding[b]=parseInt(c)}function w(b){a.sorting=b}function x(b){null==a.grid&&(a.grid={}),null==a.grid[b]&&(a.grid[b]={}),a.grid[b].show=!0}function y(b,c,d,e,f){null==a.grid&&(a.grid={}),"x"===b?(void 0===a.grid.x&&(a.grid.x={}),void 0===a.grid.x.lines&&(a.grid.x.lines=[])):(void 0===a.grid.y&&(a.grid.y={}),void 0===a.grid.y.lines&&(a.grid.y.lines=[]));var g={};g.value=isNaN(+c)?c:+c,g.text=d,e&&(g.class=e),f&&(g.position=f),"y2"===b?(g.axis="y2",a.grid.y.lines.push(g)):a.grid[b].lines.push(g)}function z(b){a.legend=b}function A(b){a.tooltip=b}function B(b){a.tooltipTitleFormatFunction=b}function C(b){a.tooltipNameFormatFunction=b}function D(b){a.tooltipValueFormatFunction=b}function E(b){a.tooltipContentFormatFunction=b}function F(b){a.chartSize=b}function G(b){a.colorPatterns=b}function H(b){a.colorThresholds=b,a.colors&&(a.colors.threshold={values:a.colorThresholds})}function I(b){a.colorFunction=b}function J(b){a.onInit=b}function K(b){a.onMouseover=b}function L(b){a.onMouseout=b}function M(b){a.onRendered=b}function N(b){a.onResize=b}function O(b){a.onResized=b}function P(b){a.dataOnClick=b}function Q(b){a.dataOnMouseover=b}function R(b){a.dataOnMouseout=b}function S(b){a.gauge=b}function T(b){a.gaugeLabelFormatFunction=b}function U(b){a.bar=b}function V(b){a.line=b}function W(b,c){a.regions[b]=c}function X(b){a.pie=b}function Y(b){a.pieLabelFormatFunction=b}function Z(b){a.donut=b}function $(b){a.donutLabelFormatFunction=b}function _(b){null==a.groups&&(a.groups=[]),a.groups.push(b)}function ab(b){a.point=b}function bb(){null==a.grid&&(a.grid={}),a.grid.focus={show:!1}}function cb(b){a.xFormat=b}function db(b){a.initialConfig=b}function eb(b,c,d,e){void 0!==c&&(a.types[b]=c),void 0!==d&&(null===a.names&&(a.names={}),a.names[b]=d),void 0!==e&&(null===a.colors&&(a.colors={}),a.colors[b]=e)}function fb(b){a.selection=b}function gb(){a.jsonKeys={},a.jsonKeys.value=[],angular.forEach(a.chartColumns,function(b){a.jsonKeys.value.push(b.id),eb(b.id,b.type,b.name,b.color)}),a.chartX&&(a.jsonKeys.x=a.chartX.id),a.names&&(a.config.data.names=a.names),a.colors&&(a.config.data.colors=a.colors),a.groups&&(a.config.data.groups=a.groups),a.config.data.keys=a.jsonKeys,a.config.data.json=a.chartData,a.chartIsGenerated?(a.config.data.unload=!0,a.chart.load(a.config.data)):(a.chart=c3.generate(a.config),a.chartIsGenerated=!0,a.chartCallbackFunction&&a.chartCallbackFunction(a.chart))}this.showGraph=d,this.addColumn=e,this.addAxisProperties=n,this.rotateAxis=t,this.addPadding=v,this.addSorting=w,this.addSize=F,this.addEmptyLabel=u,this.addColorPatterns=G,this.addColorThresholds=H,this.addColorFunction=I,this.addGrid=x,this.addGridLine=y,this.hideGridFocus=bb,this.addLegend=z,this.addTooltip=A,this.addTooltipTitleFormatFunction=B,this.addTooltipNameFormatFunction=C,this.addTooltipValueFormatFunction=D,this.addTooltipContentFormatFunction=E,this.addYAxis=f,this.addYTick=r,this.addYTickFormatFunction=s,this.addXAxisValues=l,this.addXTick=o,this.addXTickFormatFunction=p,this.addXType=q,this.addXSValues=m,this.addChartCallbackFunction=j,this.addInitialConfig=db,this.addDataLabelsFormatFunction=g,this.addTransitionDuration=k,this.addSubchartOnBrushFunction=h,this.addOnZoomEndFunction=i,this.addGauge=S,this.addGaugeLabelFormatFunction=T,this.addBar=U,this.addLine=V,this.addRegion=W,this.addPie=X,this.addPieLabelFormatFunction=Y,this.addDonut=Z,this.addDonutLabelFormatFunction=$,this.addGroup=_,this.addPoint=ab,this.addOnInitFunction=J,this.addOnMouseoverFunction=K,this.addOnMouseoutFunction=L,this.addOnRenderedFunction=M,this.addOnResizeFunction=N,this.addOnResizedFunction=O,this.addDataOnClickFunction=P,this.addDataOnMouseoverFunction=Q,this.addDataOnMouseoutFunction=R,this.setXFormat=cb,this.addSelection=fb,c()}function ChartDonut(){return{require:"^c3chart",restrict:"E",scope:{labelFormatFunction:"&"},replace:!0,link:function(a,b,c,d){var e={};c.showLabel&&(e.label={show:"true"===c.showLabel}),c.thresholdLabel&&(e.label||(e.label={}),e.label.threshold=parseFloat(c.thresholdLabel)),c.expand&&(e.expand="true"===c.expand),c.width&&(e.width=parseInt(c.width)),c.title&&(e.title=c.title),d.addDonut(e),c.labelFormatFunction&&d.addDonutLabelFormatFunction(a.labelFormatFunction())}}}function ChartEvents(){return{require:"^c3chart",restrict:"E",scope:{onInit:"&",onMouseover:"&",onMouseout:"&",onResize:"&",onResized:"&",onRendered:"&",onClickData:"&",onMouseoverData:"&",onMouseoutData:"&"},replace:!0,link:function(a,b,c,d){c.onInit&&d.addOnInitFunction(a.onInit),c.onMouseover&&d.addOnMouseoverFunction(a.onMouseover),c.onMouseout&&d.addOnMouseoutFunction(a.onMouseout),c.onResize&&d.addOnResizeFunction(a.onResize),c.onResized&&d.addOnResizedFunction(a.onResized),c.onRendered&&d.addOnRenderedFunction(a.onRendered),c.onClickData&&d.addDataOnClickFunction(a.onClickData),c.onMouseoverData&&d.addDataOnMouseoverFunction(a.onMouseoverData),c.onMouseoutData&&d.addDataOnMouseoutFunction(a.onMouseoutData)}}}function ChartGauge(){return{require:"^c3chart",restrict:"E",scope:{labelFormatFunction:"&"},replace:!0,link:function(a,b,c,d){var e={};c.min&&(e.min=parseInt(c.min)),c.max&&(e.max=parseInt(c.max)),c.width&&(e.width=parseInt(c.width)),c.units&&(e.units=c.units),c.showLabel&&(e.label={show:"true"===c.showLabel}),c.expand&&(e.expand="true"===c.expand),d.addGauge(e),c.labelFormatFunction&&d.addGaugeLabelFormatFunction(a.labelFormatFunction())}}}function ChartGrid(){return{require:"^c3chart",restrict:"E",scope:{},replace:!0,link:function(a,b,c,d){var e=c.showX;e&&"true"===e&&d.addGrid("x");var f=c.showY;f&&"true"===f&&d.addGrid("y");var g=c.showY2;g&&"true"===g&&d.addGrid("y2");var h=c.showFocus;h&&"false"===h&&d.hideGridFocus()},transclude:!0,template:"<div ng-transclude></div>"}}function ChartGridOptional(){return{require:"^c3chart",restrict:"E",scope:{},replace:!0,link:function(a,b,c,d){var e=c.axisId,f=c.gridValue,g=c.gridText,h=c.gridClass,i=c.position;d.addGridLine(e,f,g,h,i)}}}function ChartGroup(){return{require:"^c3chart",restrict:"E",scope:{},replace:!0,link:function(a,b,c,d){var e=c.groupValues.split(",");d.addGroup(e)}}}function ChartLegend(){return{require:"^c3chart",restrict:"E",scope:{onMouseover:"&",onMouseout:"&",onClick:"&"},replace:!0,link:function(a,b,c,d){var e=null,f=c.showLegend;if(f&&"false"===f)e={show:!1};else{var g=c.legendPosition;g&&(e={position:g});var h=c.legendInset;if(h){e={position:"inset",inset:{anchor:h}};var i=c.legendInsetX;i&&(e.inset.x=parseInt(i));var j=c.legendInsetY;j&&(e.inset.y=parseInt(j));var k=c.legendInsetStep;k&&(e.inset.step=parseInt(k))}}c.onMouseover&&(e=e||{},e.item=e.item||{},e.item.onmouseover=function(b){a.$apply(function(){a.onMouseover({data:b})})}),c.onMouseout&&(e=e||{},e.item=e.item||{},e.item.onmouseout=function(b){a.$apply(function(){a.onMouseout({data:b})})}),c.onClick&&(e=e||{},e.item=e.item||{},e.item.onclick=function(b){a.$apply(function(){a.onClick({data:b})})}),null!=e&&d.addLegend(e)}}}function ChartLine(){return{require:"^c3chart",restrict:"E",scope:{},replace:!0,link:function(a,b,c,d){var e={};c.stepType&&(e.step=e.step||{},e.step.type=c.stepType),c.connectNull&&(e.connectNull="true"===c.connectNull),d.addLine(e)}}}function ChartPie(){return{require:"^c3chart",restrict:"E",scope:{labelFormatFunction:"&"},replace:!0,link:function(a,b,c,d){var e={};c.showLabel&&(e.label={show:"true"===c.showLabel}),c.thresholdLabel&&(e.label||(e.label={}),e.label.threshold=parseFloat(c.thresholdLabel)),c.expand&&(e.expand="true"===c.expand),d.addPie(e),c.labelFormatFunction&&d.addPieLabelFormatFunction(a.labelFormatFunction())}}}function ChartPoints(){return{require:"^c3chart",restrict:"E",scope:{},replace:!0,link:function(a,b,c,d){var e={};c.showPoint&&(e.show="true"===c.showPoint),c.pointExpandEnabled&&(e.focus||(e.focus={expand:{}}),e.focus.expand.enabled="false"!==c.pointsFocusEnabled),c.pointExpandRadius&&(e.focus||(pie.focus={expand:{}}),e.focus.expand.r=parseInt(c.pointFocusRadius)),c.pointRadius&&(e.r=parseInt(c.pointRadius)),c.pointSelectRadius&&(e.select={r:parseInt(c.pointSelectRadius)}),d.addPoint(e)}}}function ChartRegion(){return{require:"^c3chart",restrict:"E",scope:{},replace:!0,link:function(a,b,c,d){var e="dashed",f=[],g=[],h=[];c.regionStyle&&(e=c.regionStyle),c.regionStarts&&(f=c.regionStarts.split(",")),c.regionEnds&&(g=c.regionEnds.split(",")),f.length>g.length&&h.push({start:f.pop(),style:e}),f.length<g.length&&h.push({end:g.shift(),style:e}),f.forEach(function(a,b){h.push({start:f[b],end:g[b],style:e})}),d.addRegion(c.regionId,h)}}}function Selection(){return{require:"^c3chart",restrict:"E",scope:{},replace:!0,link:function(a,b,c,d){var e=c.enabled,f=c.grouped,g=c.multiple;if(e&&"true"===e){var h={enabled:!0};f&&"true"===f&&(h.grouped=!0),g&&"true"===g&&(h.multiple=!0),d.addSelection(h)}}}}function ChartSize(){return{require:"^c3chart",restrict:"E",scope:{},replace:!0,link:function(a,b,c,d){var e=null,f=c.chartWidth,g=c.chartHeight;(f||g)&&(e={},f&&(e.width=parseInt(f)),g&&(e.height=parseInt(g)),d.addSize(e))}}}function ChartTooltip(){return{require:"^c3chart",restrict:"E",scope:{valueFormatFunction:"&",nameFormatFunction:"&",titleFormatFunction:"&",contentFormatFunction:"&"},replace:!0,link:function(a,b,c,d){var e=null,f=c.showTooltip,g=(c.hideTooltipTitle,c.joinedTooltip);if(f&&"false"===f)e={show:!1};else{var h=c.groupTooltip;h&&"false"===h&&(e={grouped:!1})}g&&"true"===g&&(e=e||{},e.contents=function(a,b,c,d){var e,f,g,h,i,j,k,l=this,m=l.config,n=m.tooltip_format_title||b,o=m.tooltip_format_name||function(a){return a},p=m.tooltip_format_value||c;for(k={tooltipContainer:"c3-tooltip-container",tooltip:"c3-tooltip",tooltipName:"c3-tooltip-name"},f=a[0].x;f<a[0].x+1;f++)a[f]&&(a[f].value||0===a[f].value)&&(e||(g=n?n(a[f].x):a[f].x,e="<table class='"+k.tooltip+"'>"+(g||0===g?"<tr><th colspan='2'>"+g+"</th></tr>":"")),void 0!==(h=p(a[f].value,a[f].ratio,a[f].id,a[f].index))&&(i=o(a[f].name,a[f].ratio,a[f].id,a[f].index),j=l.levelColor?l.levelColor(a[f].value):d(a[f].id),e+="<tr class='"+k.tooltipName+"-"+a[f].id+"'>",e+="<td class='name'><span style='background-color:"+j+"'></span>"+i+"</td>",e+="<td class='value'>"+h+"</td>",e+="</tr>"));return e+"</table>"}),null!=e&&d.addTooltip(e),c.titleFormatFunction&&d.addTooltipTitleFormatFunction(a.titleFormatFunction()),c.nameFormatFunction&&d.addTooltipNameFormatFunction(a.nameFormatFunction()),c.valueFormatFunction&&d.addTooltipValueFormatFunction(a.valueFormatFunction()),c.contentFormatFunction&&d.addTooltipContentFormatFunction(a.contentFormatFunction())}}}if(ChartController.$inject=["a","b"],function(global,factory){"object"==typeof module&&"object"==typeof module.exports?module.exports=global.document?factory(global,!0):function(w){if(!w.document)throw new Error("jQuery requires a window with a document");return factory(w)}:factory(global)}("undefined"!=typeof window?window:this,function(window,noGlobal){function isArraylike(obj){var length="length"in obj&&obj.length,type=jQuery.type(obj);return"function"!==type&&!jQuery.isWindow(obj)&&(!(1!==obj.nodeType||!length)||("array"===type||0===length||"number"==typeof length&&length>0&&length-1 in obj))}function winnow(elements,qualifier,not){if(jQuery.isFunction(qualifier))return jQuery.grep(elements,function(elem,i){return!!qualifier.call(elem,i,elem)!==not});if(qualifier.nodeType)return jQuery.grep(elements,function(elem){return elem===qualifier!==not});if("string"==typeof qualifier){if(risSimple.test(qualifier))return jQuery.filter(qualifier,elements,not);qualifier=jQuery.filter(qualifier,elements)}return jQuery.grep(elements,function(elem){return indexOf.call(qualifier,elem)>=0!==not})}function sibling(cur,dir){for(;(cur=cur[dir])&&1!==cur.nodeType;);return cur}function createOptions(options){var object=optionsCache[options]={};return jQuery.each(options.match(rnotwhite)||[],function(_,flag){object[flag]=!0}),object}function completed(){document.removeEventListener("DOMContentLoaded",completed,!1),window.removeEventListener("load",completed,!1),jQuery.ready()}function Data(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=jQuery.expando+Data.uid++}function dataAttr(elem,key,data){var name;if(void 0===data&&1===elem.nodeType)if(name="data-"+key.replace(rmultiDash,"-$1").toLowerCase(),"string"==typeof(data=elem.getAttribute(name))){try{data="true"===data||"false"!==data&&("null"===data?null:+data+""===data?+data:rbrace.test(data)?jQuery.parseJSON(data):data)}catch(e){}data_user.set(elem,key,data)}else data=void 0;return data}function returnTrue(){return!0}function returnFalse(){return!1}function safeActiveElement(){try{return document.activeElement}catch(err){}}function manipulationTarget(elem,content){return jQuery.nodeName(elem,"table")&&jQuery.nodeName(11!==content.nodeType?content:content.firstChild,"tr")?elem.getElementsByTagName("tbody")[0]||elem.appendChild(elem.ownerDocument.createElement("tbody")):elem}function disableScript(elem){return elem.type=(null!==elem.getAttribute("type"))+"/"+elem.type,elem}function restoreScript(elem){var match=rscriptTypeMasked.exec(elem.type);return match?elem.type=match[1]:elem.removeAttribute("type"),elem}function setGlobalEval(elems,refElements){for(var i=0,l=elems.length;i<l;i++)data_priv.set(elems[i],"globalEval",!refElements||data_priv.get(refElements[i],"globalEval"))}function cloneCopyEvent(src,dest){var i,l,type,pdataOld,pdataCur,udataOld,udataCur,events;if(1===dest.nodeType){if(data_priv.hasData(src)&&(pdataOld=data_priv.access(src),pdataCur=data_priv.set(dest,pdataOld),events=pdataOld.events)){delete pdataCur.handle,pdataCur.events={};for(type in events)for(i=0,l=events[type].length;i<l;i++)jQuery.event.add(dest,type,events[type][i])}data_user.hasData(src)&&(udataOld=data_user.access(src),udataCur=jQuery.extend({},udataOld),data_user.set(dest,udataCur))}}function getAll(context,tag){var ret=context.getElementsByTagName?context.getElementsByTagName(tag||"*"):context.querySelectorAll?context.querySelectorAll(tag||"*"):[];return void 0===tag||tag&&jQuery.nodeName(context,tag)?jQuery.merge([context],ret):ret}function fixInput(src,dest){var nodeName=dest.nodeName.toLowerCase();"input"===nodeName&&rcheckableType.test(src.type)?dest.checked=src.checked:"input"!==nodeName&&"textarea"!==nodeName||(dest.defaultValue=src.defaultValue)}function actualDisplay(name,doc){var style,elem=jQuery(doc.createElement(name)).appendTo(doc.body),display=window.getDefaultComputedStyle&&(style=window.getDefaultComputedStyle(elem[0]))?style.display:jQuery.css(elem[0],"display");return elem.detach(),display}function defaultDisplay(nodeName){var doc=document,display=elemdisplay[nodeName];return display||(display=actualDisplay(nodeName,doc),"none"!==display&&display||(iframe=(iframe||jQuery("<iframe frameborder='0' width='0' height='0'/>")).appendTo(doc.documentElement),doc=iframe[0].contentDocument,doc.write(),doc.close(),display=actualDisplay(nodeName,doc),iframe.detach()),elemdisplay[nodeName]=display),display}function curCSS(elem,name,computed){var width,minWidth,maxWidth,ret,style=elem.style;return computed=computed||getStyles(elem),computed&&(ret=computed.getPropertyValue(name)||computed[name]),computed&&(""!==ret||jQuery.contains(elem.ownerDocument,elem)||(ret=jQuery.style(elem,name)),rnumnonpx.test(ret)&&rmargin.test(name)&&(width=style.width,minWidth=style.minWidth,maxWidth=style.maxWidth,style.minWidth=style.maxWidth=style.width=ret,ret=computed.width,style.width=width,style.minWidth=minWidth,style.maxWidth=maxWidth)),void 0!==ret?ret+"":ret}function addGetHookIf(conditionFn,hookFn){return{get:function(){return conditionFn()?void delete this.get:(this.get=hookFn).apply(this,arguments)}}}function vendorPropName(style,name){if(name in style)return name;for(var capName=name[0].toUpperCase()+name.slice(1),origName=name,i=cssPrefixes.length;i--;)if((name=cssPrefixes[i]+capName)in style)return name;return origName}function setPositiveNumber(elem,value,subtract){var matches=rnumsplit.exec(value);return matches?Math.max(0,matches[1]-(subtract||0))+(matches[2]||"px"):value}function augmentWidthOrHeight(elem,name,extra,isBorderBox,styles){for(var i=extra===(isBorderBox?"border":"content")?4:"width"===name?1:0,val=0;i<4;i+=2)"margin"===extra&&(val+=jQuery.css(elem,extra+cssExpand[i],!0,styles)),isBorderBox?("content"===extra&&(val-=jQuery.css(elem,"padding"+cssExpand[i],!0,styles)),"margin"!==extra&&(val-=jQuery.css(elem,"border"+cssExpand[i]+"Width",!0,styles))):(val+=jQuery.css(elem,"padding"+cssExpand[i],!0,styles),"padding"!==extra&&(val+=jQuery.css(elem,"border"+cssExpand[i]+"Width",!0,styles)));return val}function getWidthOrHeight(elem,name,extra){var valueIsBorderBox=!0,val="width"===name?elem.offsetWidth:elem.offsetHeight,styles=getStyles(elem),isBorderBox="border-box"===jQuery.css(elem,"boxSizing",!1,styles);if(val<=0||null==val){if(val=curCSS(elem,name,styles),(val<0||null==val)&&(val=elem.style[name]),rnumnonpx.test(val))return val;valueIsBorderBox=isBorderBox&&(support.boxSizingReliable()||val===elem.style[name]),val=parseFloat(val)||0}return val+augmentWidthOrHeight(elem,name,extra||(isBorderBox?"border":"content"),valueIsBorderBox,styles)+"px"}function showHide(elements,show){for(var display,elem,hidden,values=[],index=0,length=elements.length;index<length;index++)elem=elements[index],elem.style&&(values[index]=data_priv.get(elem,"olddisplay"),display=elem.style.display,show?(values[index]||"none"!==display||(elem.style.display=""),""===elem.style.display&&isHidden(elem)&&(values[index]=data_priv.access(elem,"olddisplay",defaultDisplay(elem.nodeName)))):(hidden=isHidden(elem),"none"===display&&hidden||data_priv.set(elem,"olddisplay",hidden?display:jQuery.css(elem,"display"))));for(index=0;index<length;index++)elem=elements[index],elem.style&&(show&&"none"!==elem.style.display&&""!==elem.style.display||(elem.style.display=show?values[index]||"":"none"));return elements}function Tween(elem,options,prop,end,easing){return new Tween.prototype.init(elem,options,prop,end,easing)}function createFxNow(){return setTimeout(function(){fxNow=void 0}),fxNow=jQuery.now()}function genFx(type,includeWidth){var which,i=0,attrs={height:type};for(includeWidth=includeWidth?1:0;i<4;i+=2-includeWidth)which=cssExpand[i],attrs["margin"+which]=attrs["padding"+which]=type;return includeWidth&&(attrs.opacity=attrs.width=type),attrs}function createTween(value,prop,animation){for(var tween,collection=(tweeners[prop]||[]).concat(tweeners["*"]),index=0,length=collection.length;index<length;index++)if(tween=collection[index].call(animation,prop,value))return tween}function defaultPrefilter(elem,props,opts){var prop,value,toggle,tween,hooks,oldfire,display,anim=this,orig={},style=elem.style,hidden=elem.nodeType&&isHidden(elem),dataShow=data_priv.get(elem,"fxshow");opts.queue||(hooks=jQuery._queueHooks(elem,"fx"),null==hooks.unqueued&&(hooks.unqueued=0,oldfire=hooks.empty.fire,hooks.empty.fire=function(){hooks.unqueued||oldfire()}),hooks.unqueued++,anim.always(function(){anim.always(function(){hooks.unqueued--,jQuery.queue(elem,"fx").length||hooks.empty.fire()})})),1===elem.nodeType&&("height"in props||"width"in props)&&(opts.overflow=[style.overflow,style.overflowX,style.overflowY],display=jQuery.css(elem,"display"),"inline"===("none"===display?data_priv.get(elem,"olddisplay")||defaultDisplay(elem.nodeName):display)&&"none"===jQuery.css(elem,"float")&&(style.display="inline-block")),opts.overflow&&(style.overflow="hidden",anim.always(function(){style.overflow=opts.overflow[0],style.overflowX=opts.overflow[1],style.overflowY=opts.overflow[2]}));for(prop in props)if(value=props[prop],rfxtypes.exec(value)){if(delete props[prop],toggle=toggle||"toggle"===value,value===(hidden?"hide":"show")){if("show"!==value||!dataShow||void 0===dataShow[prop])continue;hidden=!0}orig[prop]=dataShow&&dataShow[prop]||jQuery.style(elem,prop)}else display=void 0;if(jQuery.isEmptyObject(orig))"inline"===("none"===display?defaultDisplay(elem.nodeName):display)&&(style.display=display);else{dataShow?"hidden"in dataShow&&(hidden=dataShow.hidden):dataShow=data_priv.access(elem,"fxshow",{}),toggle&&(dataShow.hidden=!hidden),hidden?jQuery(elem).show():anim.done(function(){jQuery(elem).hide()}),anim.done(function(){var prop;data_priv.remove(elem,"fxshow");for(prop in orig)jQuery.style(elem,prop,orig[prop])});for(prop in orig)tween=createTween(hidden?dataShow[prop]:0,prop,anim),prop in dataShow||(dataShow[prop]=tween.start,hidden&&(tween.end=tween.start,tween.start="width"===prop||"height"===prop?1:0))}}function propFilter(props,specialEasing){var index,name,easing,value,hooks;for(index in props)if(name=jQuery.camelCase(index),easing=specialEasing[name],value=props[index],jQuery.isArray(value)&&(easing=value[1],value=props[index]=value[0]),index!==name&&(props[name]=value,delete props[index]),(hooks=jQuery.cssHooks[name])&&"expand"in hooks){value=hooks.expand(value),delete props[name];for(index in value)index in props||(props[index]=value[index],specialEasing[index]=easing)}else specialEasing[name]=easing}function Animation(elem,properties,options){
var result,stopped,index=0,length=animationPrefilters.length,deferred=jQuery.Deferred().always(function(){delete tick.elem}),tick=function(){if(stopped)return!1;for(var currentTime=fxNow||createFxNow(),remaining=Math.max(0,animation.startTime+animation.duration-currentTime),temp=remaining/animation.duration||0,percent=1-temp,index=0,length=animation.tweens.length;index<length;index++)animation.tweens[index].run(percent);return deferred.notifyWith(elem,[animation,percent,remaining]),percent<1&&length?remaining:(deferred.resolveWith(elem,[animation]),!1)},animation=deferred.promise({elem:elem,props:jQuery.extend({},properties),opts:jQuery.extend(!0,{specialEasing:{}},options),originalProperties:properties,originalOptions:options,startTime:fxNow||createFxNow(),duration:options.duration,tweens:[],createTween:function(prop,end){var tween=jQuery.Tween(elem,animation.opts,prop,end,animation.opts.specialEasing[prop]||animation.opts.easing);return animation.tweens.push(tween),tween},stop:function(gotoEnd){var index=0,length=gotoEnd?animation.tweens.length:0;if(stopped)return this;for(stopped=!0;index<length;index++)animation.tweens[index].run(1);return gotoEnd?deferred.resolveWith(elem,[animation,gotoEnd]):deferred.rejectWith(elem,[animation,gotoEnd]),this}}),props=animation.props;for(propFilter(props,animation.opts.specialEasing);index<length;index++)if(result=animationPrefilters[index].call(animation,elem,props,animation.opts))return result;return jQuery.map(props,createTween,animation),jQuery.isFunction(animation.opts.start)&&animation.opts.start.call(elem,animation),jQuery.fx.timer(jQuery.extend(tick,{elem:elem,anim:animation,queue:animation.opts.queue})),animation.progress(animation.opts.progress).done(animation.opts.done,animation.opts.complete).fail(animation.opts.fail).always(animation.opts.always)}function addToPrefiltersOrTransports(structure){return function(dataTypeExpression,func){"string"!=typeof dataTypeExpression&&(func=dataTypeExpression,dataTypeExpression="*");var dataType,i=0,dataTypes=dataTypeExpression.toLowerCase().match(rnotwhite)||[];if(jQuery.isFunction(func))for(;dataType=dataTypes[i++];)"+"===dataType[0]?(dataType=dataType.slice(1)||"*",(structure[dataType]=structure[dataType]||[]).unshift(func)):(structure[dataType]=structure[dataType]||[]).push(func)}}function inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR){function inspect(dataType){var selected;return inspected[dataType]=!0,jQuery.each(structure[dataType]||[],function(_,prefilterOrFactory){var dataTypeOrTransport=prefilterOrFactory(options,originalOptions,jqXHR);return"string"!=typeof dataTypeOrTransport||seekingTransport||inspected[dataTypeOrTransport]?seekingTransport?!(selected=dataTypeOrTransport):void 0:(options.dataTypes.unshift(dataTypeOrTransport),inspect(dataTypeOrTransport),!1)}),selected}var inspected={},seekingTransport=structure===transports;return inspect(options.dataTypes[0])||!inspected["*"]&&inspect("*")}function ajaxExtend(target,src){var key,deep,flatOptions=jQuery.ajaxSettings.flatOptions||{};for(key in src)void 0!==src[key]&&((flatOptions[key]?target:deep||(deep={}))[key]=src[key]);return deep&&jQuery.extend(!0,target,deep),target}function ajaxHandleResponses(s,jqXHR,responses){for(var ct,type,finalDataType,firstDataType,contents=s.contents,dataTypes=s.dataTypes;"*"===dataTypes[0];)dataTypes.shift(),void 0===ct&&(ct=s.mimeType||jqXHR.getResponseHeader("Content-Type"));if(ct)for(type in contents)if(contents[type]&&contents[type].test(ct)){dataTypes.unshift(type);break}if(dataTypes[0]in responses)finalDataType=dataTypes[0];else{for(type in responses){if(!dataTypes[0]||s.converters[type+" "+dataTypes[0]]){finalDataType=type;break}firstDataType||(firstDataType=type)}finalDataType=finalDataType||firstDataType}if(finalDataType)return finalDataType!==dataTypes[0]&&dataTypes.unshift(finalDataType),responses[finalDataType]}function ajaxConvert(s,response,jqXHR,isSuccess){var conv2,current,conv,tmp,prev,converters={},dataTypes=s.dataTypes.slice();if(dataTypes[1])for(conv in s.converters)converters[conv.toLowerCase()]=s.converters[conv];for(current=dataTypes.shift();current;)if(s.responseFields[current]&&(jqXHR[s.responseFields[current]]=response),!prev&&isSuccess&&s.dataFilter&&(response=s.dataFilter(response,s.dataType)),prev=current,current=dataTypes.shift())if("*"===current)current=prev;else if("*"!==prev&&prev!==current){if(!(conv=converters[prev+" "+current]||converters["* "+current]))for(conv2 in converters)if(tmp=conv2.split(" "),tmp[1]===current&&(conv=converters[prev+" "+tmp[0]]||converters["* "+tmp[0]])){!0===conv?conv=converters[conv2]:!0!==converters[conv2]&&(current=tmp[0],dataTypes.unshift(tmp[1]));break}if(!0!==conv)if(conv&&s.throws)response=conv(response);else try{response=conv(response)}catch(e){return{state:"parsererror",error:conv?e:"No conversion from "+prev+" to "+current}}}return{state:"success",data:response}}function buildParams(prefix,obj,traditional,add){var name;if(jQuery.isArray(obj))jQuery.each(obj,function(i,v){traditional||rbracket.test(prefix)?add(prefix,v):buildParams(prefix+"["+("object"==typeof v?i:"")+"]",v,traditional,add)});else if(traditional||"object"!==jQuery.type(obj))add(prefix,obj);else for(name in obj)buildParams(prefix+"["+name+"]",obj[name],traditional,add)}function getWindow(elem){return jQuery.isWindow(elem)?elem:9===elem.nodeType&&elem.defaultView}var arr=[],slice=arr.slice,concat=arr.concat,push=arr.push,indexOf=arr.indexOf,class2type={},toString=class2type.toString,hasOwn=class2type.hasOwnProperty,support={},document=window.document,jQuery=function(selector,context){return new jQuery.fn.init(selector,context)},fcamelCase=function(all,letter){return letter.toUpperCase()};jQuery.fn=jQuery.prototype={jquery:"2.1.4",constructor:jQuery,selector:"",length:0,toArray:function(){return slice.call(this)},get:function(num){return null!=num?num<0?this[num+this.length]:this[num]:slice.call(this)},pushStack:function(elems){var ret=jQuery.merge(this.constructor(),elems);return ret.prevObject=this,ret.context=this.context,ret},each:function(callback,args){return jQuery.each(this,callback,args)},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem)}))},slice:function(){return this.pushStack(slice.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(i){var len=this.length,j=+i+(i<0?len:0);return this.pushStack(j>=0&&j<len?[this[j]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:push,sort:arr.sort,splice:arr.splice},jQuery.extend=jQuery.fn.extend=function(){var options,name,src,copy,copyIsArray,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=!1;for("boolean"==typeof target&&(deep=target,target=arguments[i]||{},i++),"object"==typeof target||jQuery.isFunction(target)||(target={}),i===length&&(target=this,i--);i<length;i++)if(null!=(options=arguments[i]))for(name in options)src=target[name],copy=options[name],target!==copy&&(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=jQuery.isArray(copy)))?(copyIsArray?(copyIsArray=!1,clone=src&&jQuery.isArray(src)?src:[]):clone=src&&jQuery.isPlainObject(src)?src:{},target[name]=jQuery.extend(deep,clone,copy)):void 0!==copy&&(target[name]=copy));return target},jQuery.extend({expando:"jQuery"+("2.1.4"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(msg){throw new Error(msg)},noop:function(){},isFunction:function(obj){return"function"===jQuery.type(obj)},isArray:Array.isArray,isWindow:function(obj){return null!=obj&&obj===obj.window},isNumeric:function(obj){return!jQuery.isArray(obj)&&obj-parseFloat(obj)+1>=0},isPlainObject:function(obj){return"object"===jQuery.type(obj)&&!obj.nodeType&&!jQuery.isWindow(obj)&&!(obj.constructor&&!hasOwn.call(obj.constructor.prototype,"isPrototypeOf"))},isEmptyObject:function(obj){var name;for(name in obj)return!1;return!0},type:function(obj){return null==obj?obj+"":"object"==typeof obj||"function"==typeof obj?class2type[toString.call(obj)]||"object":typeof obj},globalEval:function(code){var script,indirect=eval;(code=jQuery.trim(code))&&(1===code.indexOf("use strict")?(script=document.createElement("script"),script.text=code,document.head.appendChild(script).parentNode.removeChild(script)):indirect(code))},camelCase:function(string){return string.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,fcamelCase)},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toLowerCase()===name.toLowerCase()},each:function(obj,callback,args){var i=0,length=obj.length,isArray=isArraylike(obj);if(args){if(isArray)for(;i<length&&!1!==callback.apply(obj[i],args);i++);else for(i in obj)if(!1===callback.apply(obj[i],args))break}else if(isArray)for(;i<length&&!1!==callback.call(obj[i],i,obj[i]);i++);else for(i in obj)if(!1===callback.call(obj[i],i,obj[i]))break;return obj},trim:function(text){return null==text?"":(text+"").replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},makeArray:function(arr,results){var ret=results||[];return null!=arr&&(isArraylike(Object(arr))?jQuery.merge(ret,"string"==typeof arr?[arr]:arr):push.call(ret,arr)),ret},inArray:function(elem,arr,i){return null==arr?-1:indexOf.call(arr,elem,i)},merge:function(first,second){for(var len=+second.length,j=0,i=first.length;j<len;j++)first[i++]=second[j];return first.length=i,first},grep:function(elems,callback,invert){for(var matches=[],i=0,length=elems.length,callbackExpect=!invert;i<length;i++)!callback(elems[i],i)!==callbackExpect&&matches.push(elems[i]);return matches},map:function(elems,callback,arg){var value,i=0,length=elems.length,isArray=isArraylike(elems),ret=[];if(isArray)for(;i<length;i++)null!=(value=callback(elems[i],i,arg))&&ret.push(value);else for(i in elems)null!=(value=callback(elems[i],i,arg))&&ret.push(value);return concat.apply([],ret)},guid:1,proxy:function(fn,context){var tmp,args,proxy;if("string"==typeof context&&(tmp=fn[context],context=fn,fn=tmp),jQuery.isFunction(fn))return args=slice.call(arguments,2),proxy=function(){return fn.apply(context||this,args.concat(slice.call(arguments)))},proxy.guid=fn.guid=fn.guid||jQuery.guid++,proxy},now:Date.now,support:support}),jQuery.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(i,name){class2type["[object "+name+"]"]=name.toLowerCase()});var Sizzle=function(window){function Sizzle(selector,context,results,seed){var match,elem,m,nodeType,i,groups,old,nid,newContext,newSelector;if((context?context.ownerDocument||context:preferredDoc)!==document&&setDocument(context),context=context||document,results=results||[],nodeType=context.nodeType,"string"!=typeof selector||!selector||1!==nodeType&&9!==nodeType&&11!==nodeType)return results;if(!seed&&documentIsHTML){if(11!==nodeType&&(match=rquickExpr.exec(selector)))if(m=match[1]){if(9===nodeType){if(!(elem=context.getElementById(m))||!elem.parentNode)return results;if(elem.id===m)return results.push(elem),results}else if(context.ownerDocument&&(elem=context.ownerDocument.getElementById(m))&&contains(context,elem)&&elem.id===m)return results.push(elem),results}else{if(match[2])return push.apply(results,context.getElementsByTagName(selector)),results;if((m=match[3])&&support.getElementsByClassName)return push.apply(results,context.getElementsByClassName(m)),results}if(support.qsa&&(!rbuggyQSA||!rbuggyQSA.test(selector))){if(nid=old=expando,newContext=context,newSelector=1!==nodeType&&selector,1===nodeType&&"object"!==context.nodeName.toLowerCase()){for(groups=tokenize(selector),(old=context.getAttribute("id"))?nid=old.replace(rescape,"\\$&"):context.setAttribute("id",nid),nid="[id='"+nid+"'] ",i=groups.length;i--;)groups[i]=nid+toSelector(groups[i]);newContext=rsibling.test(selector)&&testContext(context.parentNode)||context,newSelector=groups.join(",")}if(newSelector)try{return push.apply(results,newContext.querySelectorAll(newSelector)),results}catch(qsaError){}finally{old||context.removeAttribute("id")}}}return select(selector.replace(rtrim,"$1"),context,results,seed)}function createCache(){function cache(key,value){return keys.push(key+" ")>Expr.cacheLength&&delete cache[keys.shift()],cache[key+" "]=value}var keys=[];return cache}function markFunction(fn){return fn[expando]=!0,fn}function assert(fn){var div=document.createElement("div");try{return!!fn(div)}catch(e){return!1}finally{div.parentNode&&div.parentNode.removeChild(div),div=null}}function addHandle(attrs,handler){for(var arr=attrs.split("|"),i=attrs.length;i--;)Expr.attrHandle[arr[i]]=handler}function siblingCheck(a,b){var cur=b&&a,diff=cur&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||MAX_NEGATIVE)-(~a.sourceIndex||MAX_NEGATIVE);if(diff)return diff;if(cur)for(;cur=cur.nextSibling;)if(cur===b)return-1;return a?1:-1}function createPositionalPseudo(fn){return markFunction(function(argument){return argument=+argument,markFunction(function(seed,matches){for(var j,matchIndexes=fn([],seed.length,argument),i=matchIndexes.length;i--;)seed[j=matchIndexes[i]]&&(seed[j]=!(matches[j]=seed[j]))})})}function testContext(context){return context&&void 0!==context.getElementsByTagName&&context}function setFilters(){}function toSelector(tokens){for(var i=0,len=tokens.length,selector="";i<len;i++)selector+=tokens[i].value;return selector}function addCombinator(matcher,combinator,base){var dir=combinator.dir,checkNonElements=base&&"parentNode"===dir,doneName=done++;return combinator.first?function(elem,context,xml){for(;elem=elem[dir];)if(1===elem.nodeType||checkNonElements)return matcher(elem,context,xml)}:function(elem,context,xml){var oldCache,outerCache,newCache=[dirruns,doneName];if(xml){for(;elem=elem[dir];)if((1===elem.nodeType||checkNonElements)&&matcher(elem,context,xml))return!0}else for(;elem=elem[dir];)if(1===elem.nodeType||checkNonElements){if(outerCache=elem[expando]||(elem[expando]={}),(oldCache=outerCache[dir])&&oldCache[0]===dirruns&&oldCache[1]===doneName)return newCache[2]=oldCache[2];if(outerCache[dir]=newCache,newCache[2]=matcher(elem,context,xml))return!0}}}function elementMatcher(matchers){return matchers.length>1?function(elem,context,xml){for(var i=matchers.length;i--;)if(!matchers[i](elem,context,xml))return!1;return!0}:matchers[0]}function multipleContexts(selector,contexts,results){for(var i=0,len=contexts.length;i<len;i++)Sizzle(selector,contexts[i],results);return results}function condense(unmatched,map,filter,context,xml){for(var elem,newUnmatched=[],i=0,len=unmatched.length,mapped=null!=map;i<len;i++)(elem=unmatched[i])&&(filter&&!filter(elem,context,xml)||(newUnmatched.push(elem),mapped&&map.push(i)));return newUnmatched}function setMatcher(preFilter,selector,matcher,postFilter,postFinder,postSelector){return postFilter&&!postFilter[expando]&&(postFilter=setMatcher(postFilter)),postFinder&&!postFinder[expando]&&(postFinder=setMatcher(postFinder,postSelector)),markFunction(function(seed,results,context,xml){var temp,i,elem,preMap=[],postMap=[],preexisting=results.length,elems=seed||multipleContexts(selector||"*",context.nodeType?[context]:context,[]),matcherIn=!preFilter||!seed&&selector?elems:condense(elems,preMap,preFilter,context,xml),matcherOut=matcher?postFinder||(seed?preFilter:preexisting||postFilter)?[]:results:matcherIn;if(matcher&&matcher(matcherIn,matcherOut,context,xml),postFilter)for(temp=condense(matcherOut,postMap),postFilter(temp,[],context,xml),i=temp.length;i--;)(elem=temp[i])&&(matcherOut[postMap[i]]=!(matcherIn[postMap[i]]=elem));if(seed){if(postFinder||preFilter){if(postFinder){for(temp=[],i=matcherOut.length;i--;)(elem=matcherOut[i])&&temp.push(matcherIn[i]=elem);postFinder(null,matcherOut=[],temp,xml)}for(i=matcherOut.length;i--;)(elem=matcherOut[i])&&(temp=postFinder?indexOf(seed,elem):preMap[i])>-1&&(seed[temp]=!(results[temp]=elem))}}else matcherOut=condense(matcherOut===results?matcherOut.splice(preexisting,matcherOut.length):matcherOut),postFinder?postFinder(null,results,matcherOut,xml):push.apply(results,matcherOut)})}function matcherFromTokens(tokens){for(var checkContext,matcher,j,len=tokens.length,leadingRelative=Expr.relative[tokens[0].type],implicitRelative=leadingRelative||Expr.relative[" "],i=leadingRelative?1:0,matchContext=addCombinator(function(elem){return elem===checkContext},implicitRelative,!0),matchAnyContext=addCombinator(function(elem){return indexOf(checkContext,elem)>-1},implicitRelative,!0),matchers=[function(elem,context,xml){var ret=!leadingRelative&&(xml||context!==outermostContext)||((checkContext=context).nodeType?matchContext(elem,context,xml):matchAnyContext(elem,context,xml));return checkContext=null,ret}];i<len;i++)if(matcher=Expr.relative[tokens[i].type])matchers=[addCombinator(elementMatcher(matchers),matcher)];else{if(matcher=Expr.filter[tokens[i].type].apply(null,tokens[i].matches),matcher[expando]){for(j=++i;j<len&&!Expr.relative[tokens[j].type];j++);return setMatcher(i>1&&elementMatcher(matchers),i>1&&toSelector(tokens.slice(0,i-1).concat({value:" "===tokens[i-2].type?"*":""})).replace(rtrim,"$1"),matcher,i<j&&matcherFromTokens(tokens.slice(i,j)),j<len&&matcherFromTokens(tokens=tokens.slice(j)),j<len&&toSelector(tokens))}matchers.push(matcher)}return elementMatcher(matchers)}function matcherFromGroupMatchers(elementMatchers,setMatchers){var bySet=setMatchers.length>0,byElement=elementMatchers.length>0,superMatcher=function(seed,context,xml,results,outermost){var elem,j,matcher,matchedCount=0,i="0",unmatched=seed&&[],setMatched=[],contextBackup=outermostContext,elems=seed||byElement&&Expr.find.TAG("*",outermost),dirrunsUnique=dirruns+=null==contextBackup?1:Math.random()||.1,len=elems.length;for(outermost&&(outermostContext=context!==document&&context);i!==len&&null!=(elem=elems[i]);i++){if(byElement&&elem){for(j=0;matcher=elementMatchers[j++];)if(matcher(elem,context,xml)){results.push(elem);break}outermost&&(dirruns=dirrunsUnique)}bySet&&((elem=!matcher&&elem)&&matchedCount--,seed&&unmatched.push(elem))}if(matchedCount+=i,bySet&&i!==matchedCount){for(j=0;matcher=setMatchers[j++];)matcher(unmatched,setMatched,context,xml);if(seed){if(matchedCount>0)for(;i--;)unmatched[i]||setMatched[i]||(setMatched[i]=pop.call(results));setMatched=condense(setMatched)}push.apply(results,setMatched),outermost&&!seed&&setMatched.length>0&&matchedCount+setMatchers.length>1&&Sizzle.uniqueSort(results)}return outermost&&(dirruns=dirrunsUnique,outermostContext=contextBackup),unmatched};return bySet?markFunction(superMatcher):superMatcher}var i,support,Expr,getText,isXML,tokenize,compile,select,outermostContext,sortInput,hasDuplicate,setDocument,document,docElem,documentIsHTML,rbuggyQSA,rbuggyMatches,matches,contains,expando="sizzle"+1*new Date,preferredDoc=window.document,dirruns=0,done=0,classCache=createCache(),tokenCache=createCache(),compilerCache=createCache(),sortOrder=function(a,b){return a===b&&(hasDuplicate=!0),0},MAX_NEGATIVE=1<<31,hasOwn={}.hasOwnProperty,arr=[],pop=arr.pop,push_native=arr.push,push=arr.push,slice=arr.slice,indexOf=function(list,elem){for(var i=0,len=list.length;i<len;i++)if(list[i]===elem)return i;return-1},booleans="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",whitespace="[\\x20\\t\\r\\n\\f]",characterEncoding="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",identifier=characterEncoding.replace("w","w#"),attributes="\\["+whitespace+"*("+characterEncoding+")(?:"+whitespace+"*([*^$|!~]?=)"+whitespace+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+identifier+"))|)"+whitespace+"*\\]",pseudos=":("+characterEncoding+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+attributes+")*)|.*)\\)|)",rwhitespace=new RegExp(whitespace+"+","g"),rtrim=new RegExp("^"+whitespace+"+|((?:^|[^\\\\])(?:\\\\.)*)"+whitespace+"+$","g"),rcomma=new RegExp("^"+whitespace+"*,"+whitespace+"*"),rcombinators=new RegExp("^"+whitespace+"*([>+~]|"+whitespace+")"+whitespace+"*"),rattributeQuotes=new RegExp("="+whitespace+"*([^\\]'\"]*?)"+whitespace+"*\\]","g"),rpseudo=new RegExp(pseudos),ridentifier=new RegExp("^"+identifier+"$"),matchExpr={ID:new RegExp("^#("+characterEncoding+")"),CLASS:new RegExp("^\\.("+characterEncoding+")"),TAG:new RegExp("^("+characterEncoding.replace("w","w*")+")"),ATTR:new RegExp("^"+attributes),PSEUDO:new RegExp("^"+pseudos),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+whitespace+"*(even|odd|(([+-]|)(\\d*)n|)"+whitespace+"*(?:([+-]|)"+whitespace+"*(\\d+)|))"+whitespace+"*\\)|)","i"),bool:new RegExp("^(?:"+booleans+")$","i"),needsContext:new RegExp("^"+whitespace+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+whitespace+"*((?:-\\d)?\\d*)"+whitespace+"*\\)|)(?=[^-]|$)","i")},rinputs=/^(?:input|select|textarea|button)$/i,rheader=/^h\d$/i,rnative=/^[^{]+\{\s*\[native \w/,rquickExpr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,rsibling=/[+~]/,rescape=/'|\\/g,runescape=new RegExp("\\\\([\\da-f]{1,6}"+whitespace+"?|("+whitespace+")|.)","ig"),funescape=function(_,escaped,escapedWhitespace){var high="0x"+escaped-65536;return high!==high||escapedWhitespace?escaped:high<0?String.fromCharCode(high+65536):String.fromCharCode(high>>10|55296,1023&high|56320)},unloadHandler=function(){setDocument()};try{push.apply(arr=slice.call(preferredDoc.childNodes),preferredDoc.childNodes),arr[preferredDoc.childNodes.length].nodeType}catch(e){push={apply:arr.length?function(target,els){push_native.apply(target,slice.call(els))}:function(target,els){for(var j=target.length,i=0;target[j++]=els[i++];);target.length=j-1}}}support=Sizzle.support={},isXML=Sizzle.isXML=function(elem){var documentElement=elem&&(elem.ownerDocument||elem).documentElement;return!!documentElement&&"HTML"!==documentElement.nodeName},setDocument=Sizzle.setDocument=function(node){var hasCompare,parent,doc=node?node.ownerDocument||node:preferredDoc;return doc!==document&&9===doc.nodeType&&doc.documentElement?(document=doc,docElem=doc.documentElement,parent=doc.defaultView,parent&&parent!==parent.top&&(parent.addEventListener?parent.addEventListener("unload",unloadHandler,!1):parent.attachEvent&&parent.attachEvent("onunload",unloadHandler)),documentIsHTML=!isXML(doc),support.attributes=assert(function(div){return div.className="i",!div.getAttribute("className")}),support.getElementsByTagName=assert(function(div){return div.appendChild(doc.createComment("")),!div.getElementsByTagName("*").length}),support.getElementsByClassName=rnative.test(doc.getElementsByClassName),support.getById=assert(function(div){return docElem.appendChild(div).id=expando,!doc.getElementsByName||!doc.getElementsByName(expando).length}),support.getById?(Expr.find.ID=function(id,context){if(void 0!==context.getElementById&&documentIsHTML){var m=context.getElementById(id);return m&&m.parentNode?[m]:[]}},Expr.filter.ID=function(id){var attrId=id.replace(runescape,funescape);return function(elem){return elem.getAttribute("id")===attrId}}):(delete Expr.find.ID,Expr.filter.ID=function(id){var attrId=id.replace(runescape,funescape);return function(elem){var node=void 0!==elem.getAttributeNode&&elem.getAttributeNode("id");return node&&node.value===attrId}}),Expr.find.TAG=support.getElementsByTagName?function(tag,context){return void 0!==context.getElementsByTagName?context.getElementsByTagName(tag):support.qsa?context.querySelectorAll(tag):void 0}:function(tag,context){var elem,tmp=[],i=0,results=context.getElementsByTagName(tag);if("*"===tag){for(;elem=results[i++];)1===elem.nodeType&&tmp.push(elem);return tmp}return results},Expr.find.CLASS=support.getElementsByClassName&&function(className,context){if(documentIsHTML)return context.getElementsByClassName(className)},rbuggyMatches=[],rbuggyQSA=[],(support.qsa=rnative.test(doc.querySelectorAll))&&(assert(function(div){docElem.appendChild(div).innerHTML="<a id='"+expando+"'></a><select id='"+expando+"-\f]' msallowcapture=''><option selected=''></option></select>",div.querySelectorAll("[msallowcapture^='']").length&&rbuggyQSA.push("[*^$]="+whitespace+"*(?:''|\"\")"),div.querySelectorAll("[selected]").length||rbuggyQSA.push("\\["+whitespace+"*(?:value|"+booleans+")"),div.querySelectorAll("[id~="+expando+"-]").length||rbuggyQSA.push("~="),div.querySelectorAll(":checked").length||rbuggyQSA.push(":checked"),div.querySelectorAll("a#"+expando+"+*").length||rbuggyQSA.push(".#.+[+~]")}),assert(function(div){var input=doc.createElement("input");input.setAttribute("type","hidden"),div.appendChild(input).setAttribute("name","D"),div.querySelectorAll("[name=d]").length&&rbuggyQSA.push("name"+whitespace+"*[*^$|!~]?="),div.querySelectorAll(":enabled").length||rbuggyQSA.push(":enabled",":disabled"),div.querySelectorAll("*,:x"),rbuggyQSA.push(",.*:")})),(support.matchesSelector=rnative.test(matches=docElem.matches||docElem.webkitMatchesSelector||docElem.mozMatchesSelector||docElem.oMatchesSelector||docElem.msMatchesSelector))&&assert(function(div){support.disconnectedMatch=matches.call(div,"div"),matches.call(div,"[s!='']:x"),rbuggyMatches.push("!=",pseudos)}),rbuggyQSA=rbuggyQSA.length&&new RegExp(rbuggyQSA.join("|")),rbuggyMatches=rbuggyMatches.length&&new RegExp(rbuggyMatches.join("|")),hasCompare=rnative.test(docElem.compareDocumentPosition),contains=hasCompare||rnative.test(docElem.contains)?function(a,b){var adown=9===a.nodeType?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!(!bup||1!==bup.nodeType||!(adown.contains?adown.contains(bup):a.compareDocumentPosition&&16&a.compareDocumentPosition(bup)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},sortOrder=hasCompare?function(a,b){if(a===b)return hasDuplicate=!0,0;var compare=!a.compareDocumentPosition-!b.compareDocumentPosition;return compare||(compare=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&compare||!support.sortDetached&&b.compareDocumentPosition(a)===compare?a===doc||a.ownerDocument===preferredDoc&&contains(preferredDoc,a)?-1:b===doc||b.ownerDocument===preferredDoc&&contains(preferredDoc,b)?1:sortInput?indexOf(sortInput,a)-indexOf(sortInput,b):0:4&compare?-1:1)}:function(a,b){if(a===b)return hasDuplicate=!0,0;var cur,i=0,aup=a.parentNode,bup=b.parentNode,ap=[a],bp=[b];if(!aup||!bup)return a===doc?-1:b===doc?1:aup?-1:bup?1:sortInput?indexOf(sortInput,a)-indexOf(sortInput,b):0;if(aup===bup)return siblingCheck(a,b);for(cur=a;cur=cur.parentNode;)ap.unshift(cur);for(cur=b;cur=cur.parentNode;)bp.unshift(cur);for(;ap[i]===bp[i];)i++;return i?siblingCheck(ap[i],bp[i]):ap[i]===preferredDoc?-1:bp[i]===preferredDoc?1:0},doc):document},Sizzle.matches=function(expr,elements){return Sizzle(expr,null,null,elements)},Sizzle.matchesSelector=function(elem,expr){if((elem.ownerDocument||elem)!==document&&setDocument(elem),expr=expr.replace(rattributeQuotes,"='$1']"),support.matchesSelector&&documentIsHTML&&(!rbuggyMatches||!rbuggyMatches.test(expr))&&(!rbuggyQSA||!rbuggyQSA.test(expr)))try{var ret=matches.call(elem,expr);if(ret||support.disconnectedMatch||elem.document&&11!==elem.document.nodeType)return ret}catch(e){}return Sizzle(expr,document,null,[elem]).length>0},Sizzle.contains=function(context,elem){return(context.ownerDocument||context)!==document&&setDocument(context),contains(context,elem)},Sizzle.attr=function(elem,name){(elem.ownerDocument||elem)!==document&&setDocument(elem);var fn=Expr.attrHandle[name.toLowerCase()],val=fn&&hasOwn.call(Expr.attrHandle,name.toLowerCase())?fn(elem,name,!documentIsHTML):void 0;return void 0!==val?val:support.attributes||!documentIsHTML?elem.getAttribute(name):(val=elem.getAttributeNode(name))&&val.specified?val.value:null},Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg)},Sizzle.uniqueSort=function(results){var elem,duplicates=[],j=0,i=0;if(hasDuplicate=!support.detectDuplicates,sortInput=!support.sortStable&&results.slice(0),results.sort(sortOrder),hasDuplicate){for(;elem=results[i++];)elem===results[i]&&(j=duplicates.push(i));for(;j--;)results.splice(duplicates[j],1)}return sortInput=null,results},getText=Sizzle.getText=function(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(nodeType){if(1===nodeType||9===nodeType||11===nodeType){if("string"==typeof elem.textContent)return elem.textContent;for(elem=elem.firstChild;elem;elem=elem.nextSibling)ret+=getText(elem)}else if(3===nodeType||4===nodeType)return elem.nodeValue}else for(;node=elem[i++];)ret+=getText(node);return ret},Expr=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:matchExpr,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(match){return match[1]=match[1].replace(runescape,funescape),match[3]=(match[3]||match[4]||match[5]||"").replace(runescape,funescape),"~="===match[2]&&(match[3]=" "+match[3]+" "),match.slice(0,4)},CHILD:function(match){return match[1]=match[1].toLowerCase(),"nth"===match[1].slice(0,3)?(match[3]||Sizzle.error(match[0]),match[4]=+(match[4]?match[5]+(match[6]||1):2*("even"===match[3]||"odd"===match[3])),match[5]=+(match[7]+match[8]||"odd"===match[3])):match[3]&&Sizzle.error(match[0]),match},PSEUDO:function(match){var excess,unquoted=!match[6]&&match[2];return matchExpr.CHILD.test(match[0])?null:(match[3]?match[2]=match[4]||match[5]||"":unquoted&&rpseudo.test(unquoted)&&(excess=tokenize(unquoted,!0))&&(excess=unquoted.indexOf(")",unquoted.length-excess)-unquoted.length)&&(match[0]=match[0].slice(0,excess),match[2]=unquoted.slice(0,excess)),match.slice(0,3))}},filter:{TAG:function(nodeNameSelector){var nodeName=nodeNameSelector.replace(runescape,funescape).toLowerCase();return"*"===nodeNameSelector?function(){return!0}:function(elem){return elem.nodeName&&elem.nodeName.toLowerCase()===nodeName}},CLASS:function(className){var pattern=classCache[className+" "];return pattern||(pattern=new RegExp("(^|"+whitespace+")"+className+"("+whitespace+"|$)"))&&classCache(className,function(elem){return pattern.test("string"==typeof elem.className&&elem.className||void 0!==elem.getAttribute&&elem.getAttribute("class")||"")})},ATTR:function(name,operator,check){return function(elem){var result=Sizzle.attr(elem,name);return null==result?"!="===operator:!operator||(result+="","="===operator?result===check:"!="===operator?result!==check:"^="===operator?check&&0===result.indexOf(check):"*="===operator?check&&result.indexOf(check)>-1:"$="===operator?check&&result.slice(-check.length)===check:"~="===operator?(" "+result.replace(rwhitespace," ")+" ").indexOf(check)>-1:"|="===operator&&(result===check||result.slice(0,check.length+1)===check+"-"))}},CHILD:function(type,what,argument,first,last){var simple="nth"!==type.slice(0,3),forward="last"!==type.slice(-4),ofType="of-type"===what;return 1===first&&0===last?function(elem){return!!elem.parentNode}:function(elem,context,xml){var cache,outerCache,node,diff,nodeIndex,start,dir=simple!==forward?"nextSibling":"previousSibling",parent=elem.parentNode,name=ofType&&elem.nodeName.toLowerCase(),useCache=!xml&&!ofType;if(parent){if(simple){for(;dir;){for(node=elem;node=node[dir];)if(ofType?node.nodeName.toLowerCase()===name:1===node.nodeType)return!1;start=dir="only"===type&&!start&&"nextSibling"}return!0}if(start=[forward?parent.firstChild:parent.lastChild],forward&&useCache){for(outerCache=parent[expando]||(parent[expando]={}),cache=outerCache[type]||[],nodeIndex=cache[0]===dirruns&&cache[1],diff=cache[0]===dirruns&&cache[2],node=nodeIndex&&parent.childNodes[nodeIndex];node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop();)if(1===node.nodeType&&++diff&&node===elem){outerCache[type]=[dirruns,nodeIndex,diff];break}}else if(useCache&&(cache=(elem[expando]||(elem[expando]={}))[type])&&cache[0]===dirruns)diff=cache[1];else for(;(node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop())&&((ofType?node.nodeName.toLowerCase()!==name:1!==node.nodeType)||!++diff||(useCache&&((node[expando]||(node[expando]={}))[type]=[dirruns,diff]),node!==elem)););
return(diff-=last)===first||diff%first==0&&diff/first>=0}}},PSEUDO:function(pseudo,argument){var args,fn=Expr.pseudos[pseudo]||Expr.setFilters[pseudo.toLowerCase()]||Sizzle.error("unsupported pseudo: "+pseudo);return fn[expando]?fn(argument):fn.length>1?(args=[pseudo,pseudo,"",argument],Expr.setFilters.hasOwnProperty(pseudo.toLowerCase())?markFunction(function(seed,matches){for(var idx,matched=fn(seed,argument),i=matched.length;i--;)idx=indexOf(seed,matched[i]),seed[idx]=!(matches[idx]=matched[i])}):function(elem){return fn(elem,0,args)}):fn}},pseudos:{not:markFunction(function(selector){var input=[],results=[],matcher=compile(selector.replace(rtrim,"$1"));return matcher[expando]?markFunction(function(seed,matches,context,xml){for(var elem,unmatched=matcher(seed,null,xml,[]),i=seed.length;i--;)(elem=unmatched[i])&&(seed[i]=!(matches[i]=elem))}):function(elem,context,xml){return input[0]=elem,matcher(input,null,xml,results),input[0]=null,!results.pop()}}),has:markFunction(function(selector){return function(elem){return Sizzle(selector,elem).length>0}}),contains:markFunction(function(text){return text=text.replace(runescape,funescape),function(elem){return(elem.textContent||elem.innerText||getText(elem)).indexOf(text)>-1}}),lang:markFunction(function(lang){return ridentifier.test(lang||"")||Sizzle.error("unsupported lang: "+lang),lang=lang.replace(runescape,funescape).toLowerCase(),function(elem){var elemLang;do{if(elemLang=documentIsHTML?elem.lang:elem.getAttribute("xml:lang")||elem.getAttribute("lang"))return(elemLang=elemLang.toLowerCase())===lang||0===elemLang.indexOf(lang+"-")}while((elem=elem.parentNode)&&1===elem.nodeType);return!1}}),target:function(elem){var hash=window.location&&window.location.hash;return hash&&hash.slice(1)===elem.id},root:function(elem){return elem===docElem},focus:function(elem){return elem===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(elem.type||elem.href||~elem.tabIndex)},enabled:function(elem){return!1===elem.disabled},disabled:function(elem){return!0===elem.disabled},checked:function(elem){var nodeName=elem.nodeName.toLowerCase();return"input"===nodeName&&!!elem.checked||"option"===nodeName&&!!elem.selected},selected:function(elem){return elem.parentNode&&elem.parentNode.selectedIndex,!0===elem.selected},empty:function(elem){for(elem=elem.firstChild;elem;elem=elem.nextSibling)if(elem.nodeType<6)return!1;return!0},parent:function(elem){return!Expr.pseudos.empty(elem)},header:function(elem){return rheader.test(elem.nodeName)},input:function(elem){return rinputs.test(elem.nodeName)},button:function(elem){var name=elem.nodeName.toLowerCase();return"input"===name&&"button"===elem.type||"button"===name},text:function(elem){var attr;return"input"===elem.nodeName.toLowerCase()&&"text"===elem.type&&(null==(attr=elem.getAttribute("type"))||"text"===attr.toLowerCase())},first:createPositionalPseudo(function(){return[0]}),last:createPositionalPseudo(function(matchIndexes,length){return[length-1]}),eq:createPositionalPseudo(function(matchIndexes,length,argument){return[argument<0?argument+length:argument]}),even:createPositionalPseudo(function(matchIndexes,length){for(var i=0;i<length;i+=2)matchIndexes.push(i);return matchIndexes}),odd:createPositionalPseudo(function(matchIndexes,length){for(var i=1;i<length;i+=2)matchIndexes.push(i);return matchIndexes}),lt:createPositionalPseudo(function(matchIndexes,length,argument){for(var i=argument<0?argument+length:argument;--i>=0;)matchIndexes.push(i);return matchIndexes}),gt:createPositionalPseudo(function(matchIndexes,length,argument){for(var i=argument<0?argument+length:argument;++i<length;)matchIndexes.push(i);return matchIndexes})}},Expr.pseudos.nth=Expr.pseudos.eq;for(i in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})Expr.pseudos[i]=function(type){return function(elem){return"input"===elem.nodeName.toLowerCase()&&elem.type===type}}(i);for(i in{submit:!0,reset:!0})Expr.pseudos[i]=function(type){return function(elem){var name=elem.nodeName.toLowerCase();return("input"===name||"button"===name)&&elem.type===type}}(i);return setFilters.prototype=Expr.filters=Expr.pseudos,Expr.setFilters=new setFilters,tokenize=Sizzle.tokenize=function(selector,parseOnly){var matched,match,tokens,type,soFar,groups,preFilters,cached=tokenCache[selector+" "];if(cached)return parseOnly?0:cached.slice(0);for(soFar=selector,groups=[],preFilters=Expr.preFilter;soFar;){matched&&!(match=rcomma.exec(soFar))||(match&&(soFar=soFar.slice(match[0].length)||soFar),groups.push(tokens=[])),matched=!1,(match=rcombinators.exec(soFar))&&(matched=match.shift(),tokens.push({value:matched,type:match[0].replace(rtrim," ")}),soFar=soFar.slice(matched.length));for(type in Expr.filter)!(match=matchExpr[type].exec(soFar))||preFilters[type]&&!(match=preFilters[type](match))||(matched=match.shift(),tokens.push({value:matched,type:type,matches:match}),soFar=soFar.slice(matched.length));if(!matched)break}return parseOnly?soFar.length:soFar?Sizzle.error(selector):tokenCache(selector,groups).slice(0)},compile=Sizzle.compile=function(selector,match){var i,setMatchers=[],elementMatchers=[],cached=compilerCache[selector+" "];if(!cached){for(match||(match=tokenize(selector)),i=match.length;i--;)cached=matcherFromTokens(match[i]),cached[expando]?setMatchers.push(cached):elementMatchers.push(cached);cached=compilerCache(selector,matcherFromGroupMatchers(elementMatchers,setMatchers)),cached.selector=selector}return cached},select=Sizzle.select=function(selector,context,results,seed){var i,tokens,token,type,find,compiled="function"==typeof selector&&selector,match=!seed&&tokenize(selector=compiled.selector||selector);if(results=results||[],1===match.length){if(tokens=match[0]=match[0].slice(0),tokens.length>2&&"ID"===(token=tokens[0]).type&&support.getById&&9===context.nodeType&&documentIsHTML&&Expr.relative[tokens[1].type]){if(!(context=(Expr.find.ID(token.matches[0].replace(runescape,funescape),context)||[])[0]))return results;compiled&&(context=context.parentNode),selector=selector.slice(tokens.shift().value.length)}for(i=matchExpr.needsContext.test(selector)?0:tokens.length;i--&&(token=tokens[i],!Expr.relative[type=token.type]);)if((find=Expr.find[type])&&(seed=find(token.matches[0].replace(runescape,funescape),rsibling.test(tokens[0].type)&&testContext(context.parentNode)||context))){if(tokens.splice(i,1),!(selector=seed.length&&toSelector(tokens)))return push.apply(results,seed),results;break}}return(compiled||compile(selector,match))(seed,context,!documentIsHTML,results,rsibling.test(selector)&&testContext(context.parentNode)||context),results},support.sortStable=expando.split("").sort(sortOrder).join("")===expando,support.detectDuplicates=!!hasDuplicate,setDocument(),support.sortDetached=assert(function(div1){return 1&div1.compareDocumentPosition(document.createElement("div"))}),assert(function(div){return div.innerHTML="<a href='#'></a>","#"===div.firstChild.getAttribute("href")})||addHandle("type|href|height|width",function(elem,name,isXML){if(!isXML)return elem.getAttribute(name,"type"===name.toLowerCase()?1:2)}),support.attributes&&assert(function(div){return div.innerHTML="<input/>",div.firstChild.setAttribute("value",""),""===div.firstChild.getAttribute("value")})||addHandle("value",function(elem,name,isXML){if(!isXML&&"input"===elem.nodeName.toLowerCase())return elem.defaultValue}),assert(function(div){return null==div.getAttribute("disabled")})||addHandle(booleans,function(elem,name,isXML){var val;if(!isXML)return!0===elem[name]?name.toLowerCase():(val=elem.getAttributeNode(name))&&val.specified?val.value:null}),Sizzle}(window);jQuery.find=Sizzle,jQuery.expr=Sizzle.selectors,jQuery.expr[":"]=jQuery.expr.pseudos,jQuery.unique=Sizzle.uniqueSort,jQuery.text=Sizzle.getText,jQuery.isXMLDoc=Sizzle.isXML,jQuery.contains=Sizzle.contains;var rneedsContext=jQuery.expr.match.needsContext,rsingleTag=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,risSimple=/^.[^:#\[\.,]*$/;jQuery.filter=function(expr,elems,not){var elem=elems[0];return not&&(expr=":not("+expr+")"),1===elems.length&&1===elem.nodeType?jQuery.find.matchesSelector(elem,expr)?[elem]:[]:jQuery.find.matches(expr,jQuery.grep(elems,function(elem){return 1===elem.nodeType}))},jQuery.fn.extend({find:function(selector){var i,len=this.length,ret=[],self=this;if("string"!=typeof selector)return this.pushStack(jQuery(selector).filter(function(){for(i=0;i<len;i++)if(jQuery.contains(self[i],this))return!0}));for(i=0;i<len;i++)jQuery.find(selector,self[i],ret);return ret=this.pushStack(len>1?jQuery.unique(ret):ret),ret.selector=this.selector?this.selector+" "+selector:selector,ret},filter:function(selector){return this.pushStack(winnow(this,selector||[],!1))},not:function(selector){return this.pushStack(winnow(this,selector||[],!0))},is:function(selector){return!!winnow(this,"string"==typeof selector&&rneedsContext.test(selector)?jQuery(selector):selector||[],!1).length}});var rootjQuery,rquickExpr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(jQuery.fn.init=function(selector,context){var match,elem;if(!selector)return this;if("string"==typeof selector){if(!(match="<"===selector[0]&&">"===selector[selector.length-1]&&selector.length>=3?[null,selector,null]:rquickExpr.exec(selector))||!match[1]&&context)return!context||context.jquery?(context||rootjQuery).find(selector):this.constructor(context).find(selector);if(match[1]){if(context=context instanceof jQuery?context[0]:context,jQuery.merge(this,jQuery.parseHTML(match[1],context&&context.nodeType?context.ownerDocument||context:document,!0)),rsingleTag.test(match[1])&&jQuery.isPlainObject(context))for(match in context)jQuery.isFunction(this[match])?this[match](context[match]):this.attr(match,context[match]);return this}return elem=document.getElementById(match[2]),elem&&elem.parentNode&&(this.length=1,this[0]=elem),this.context=document,this.selector=selector,this}return selector.nodeType?(this.context=this[0]=selector,this.length=1,this):jQuery.isFunction(selector)?void 0!==rootjQuery.ready?rootjQuery.ready(selector):selector(jQuery):(void 0!==selector.selector&&(this.selector=selector.selector,this.context=selector.context),jQuery.makeArray(selector,this))}).prototype=jQuery.fn,rootjQuery=jQuery(document);var rparentsprev=/^(?:parents|prev(?:Until|All))/,guaranteedUnique={children:!0,contents:!0,next:!0,prev:!0};jQuery.extend({dir:function(elem,dir,until){for(var matched=[],truncate=void 0!==until;(elem=elem[dir])&&9!==elem.nodeType;)if(1===elem.nodeType){if(truncate&&jQuery(elem).is(until))break;matched.push(elem)}return matched},sibling:function(n,elem){for(var matched=[];n;n=n.nextSibling)1===n.nodeType&&n!==elem&&matched.push(n);return matched}}),jQuery.fn.extend({has:function(target){var targets=jQuery(target,this),l=targets.length;return this.filter(function(){for(var i=0;i<l;i++)if(jQuery.contains(this,targets[i]))return!0})},closest:function(selectors,context){for(var cur,i=0,l=this.length,matched=[],pos=rneedsContext.test(selectors)||"string"!=typeof selectors?jQuery(selectors,context||this.context):0;i<l;i++)for(cur=this[i];cur&&cur!==context;cur=cur.parentNode)if(cur.nodeType<11&&(pos?pos.index(cur)>-1:1===cur.nodeType&&jQuery.find.matchesSelector(cur,selectors))){matched.push(cur);break}return this.pushStack(matched.length>1?jQuery.unique(matched):matched)},index:function(elem){return elem?"string"==typeof elem?indexOf.call(jQuery(elem),this[0]):indexOf.call(this,elem.jquery?elem[0]:elem):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(selector,context){return this.pushStack(jQuery.unique(jQuery.merge(this.get(),jQuery(selector,context))))},addBack:function(selector){return this.add(null==selector?this.prevObject:this.prevObject.filter(selector))}}),jQuery.each({parent:function(elem){var parent=elem.parentNode;return parent&&11!==parent.nodeType?parent:null},parents:function(elem){return jQuery.dir(elem,"parentNode")},parentsUntil:function(elem,i,until){return jQuery.dir(elem,"parentNode",until)},next:function(elem){return sibling(elem,"nextSibling")},prev:function(elem){return sibling(elem,"previousSibling")},nextAll:function(elem){return jQuery.dir(elem,"nextSibling")},prevAll:function(elem){return jQuery.dir(elem,"previousSibling")},nextUntil:function(elem,i,until){return jQuery.dir(elem,"nextSibling",until)},prevUntil:function(elem,i,until){return jQuery.dir(elem,"previousSibling",until)},siblings:function(elem){return jQuery.sibling((elem.parentNode||{}).firstChild,elem)},children:function(elem){return jQuery.sibling(elem.firstChild)},contents:function(elem){return elem.contentDocument||jQuery.merge([],elem.childNodes)}},function(name,fn){jQuery.fn[name]=function(until,selector){var matched=jQuery.map(this,fn,until);return"Until"!==name.slice(-5)&&(selector=until),selector&&"string"==typeof selector&&(matched=jQuery.filter(selector,matched)),this.length>1&&(guaranteedUnique[name]||jQuery.unique(matched),rparentsprev.test(name)&&matched.reverse()),this.pushStack(matched)}});var rnotwhite=/\S+/g,optionsCache={};jQuery.Callbacks=function(options){options="string"==typeof options?optionsCache[options]||createOptions(options):jQuery.extend({},options);var memory,fired,firing,firingStart,firingLength,firingIndex,list=[],stack=!options.once&&[],fire=function(data){for(memory=options.memory&&data,fired=!0,firingIndex=firingStart||0,firingStart=0,firingLength=list.length,firing=!0;list&&firingIndex<firingLength;firingIndex++)if(!1===list[firingIndex].apply(data[0],data[1])&&options.stopOnFalse){memory=!1;break}firing=!1,list&&(stack?stack.length&&fire(stack.shift()):memory?list=[]:self.disable())},self={add:function(){if(list){var start=list.length;!function add(args){jQuery.each(args,function(_,arg){var type=jQuery.type(arg);"function"===type?options.unique&&self.has(arg)||list.push(arg):arg&&arg.length&&"string"!==type&&add(arg)})}(arguments),firing?firingLength=list.length:memory&&(firingStart=start,fire(memory))}return this},remove:function(){return list&&jQuery.each(arguments,function(_,arg){for(var index;(index=jQuery.inArray(arg,list,index))>-1;)list.splice(index,1),firing&&(index<=firingLength&&firingLength--,index<=firingIndex&&firingIndex--)}),this},has:function(fn){return fn?jQuery.inArray(fn,list)>-1:!(!list||!list.length)},empty:function(){return list=[],firingLength=0,this},disable:function(){return list=stack=memory=void 0,this},disabled:function(){return!list},lock:function(){return stack=void 0,memory||self.disable(),this},locked:function(){return!stack},fireWith:function(context,args){return!list||fired&&!stack||(args=args||[],args=[context,args.slice?args.slice():args],firing?stack.push(args):fire(args)),this},fire:function(){return self.fireWith(this,arguments),this},fired:function(){return!!fired}};return self},jQuery.extend({Deferred:function(func){var tuples=[["resolve","done",jQuery.Callbacks("once memory"),"resolved"],["reject","fail",jQuery.Callbacks("once memory"),"rejected"],["notify","progress",jQuery.Callbacks("memory")]],state="pending",promise={state:function(){return state},always:function(){return deferred.done(arguments).fail(arguments),this},then:function(){var fns=arguments;return jQuery.Deferred(function(newDefer){jQuery.each(tuples,function(i,tuple){var fn=jQuery.isFunction(fns[i])&&fns[i];deferred[tuple[1]](function(){var returned=fn&&fn.apply(this,arguments);returned&&jQuery.isFunction(returned.promise)?returned.promise().done(newDefer.resolve).fail(newDefer.reject).progress(newDefer.notify):newDefer[tuple[0]+"With"](this===promise?newDefer.promise():this,fn?[returned]:arguments)})}),fns=null}).promise()},promise:function(obj){return null!=obj?jQuery.extend(obj,promise):promise}},deferred={};return promise.pipe=promise.then,jQuery.each(tuples,function(i,tuple){var list=tuple[2],stateString=tuple[3];promise[tuple[1]]=list.add,stateString&&list.add(function(){state=stateString},tuples[1^i][2].disable,tuples[2][2].lock),deferred[tuple[0]]=function(){return deferred[tuple[0]+"With"](this===deferred?promise:this,arguments),this},deferred[tuple[0]+"With"]=list.fireWith}),promise.promise(deferred),func&&func.call(deferred,deferred),deferred},when:function(subordinate){var progressValues,progressContexts,resolveContexts,i=0,resolveValues=slice.call(arguments),length=resolveValues.length,remaining=1!==length||subordinate&&jQuery.isFunction(subordinate.promise)?length:0,deferred=1===remaining?subordinate:jQuery.Deferred(),updateFunc=function(i,contexts,values){return function(value){contexts[i]=this,values[i]=arguments.length>1?slice.call(arguments):value,values===progressValues?deferred.notifyWith(contexts,values):--remaining||deferred.resolveWith(contexts,values)}};if(length>1)for(progressValues=new Array(length),progressContexts=new Array(length),resolveContexts=new Array(length);i<length;i++)resolveValues[i]&&jQuery.isFunction(resolveValues[i].promise)?resolveValues[i].promise().done(updateFunc(i,resolveContexts,resolveValues)).fail(deferred.reject).progress(updateFunc(i,progressContexts,progressValues)):--remaining;return remaining||deferred.resolveWith(resolveContexts,resolveValues),deferred.promise()}});var readyList;jQuery.fn.ready=function(fn){return jQuery.ready.promise().done(fn),this},jQuery.extend({isReady:!1,readyWait:1,holdReady:function(hold){hold?jQuery.readyWait++:jQuery.ready(!0)},ready:function(wait){(!0===wait?--jQuery.readyWait:jQuery.isReady)||(jQuery.isReady=!0,!0!==wait&&--jQuery.readyWait>0||(readyList.resolveWith(document,[jQuery]),jQuery.fn.triggerHandler&&(jQuery(document).triggerHandler("ready"),jQuery(document).off("ready"))))}}),jQuery.ready.promise=function(obj){return readyList||(readyList=jQuery.Deferred(),"complete"===document.readyState?setTimeout(jQuery.ready):(document.addEventListener("DOMContentLoaded",completed,!1),window.addEventListener("load",completed,!1))),readyList.promise(obj)},jQuery.ready.promise();var access=jQuery.access=function(elems,fn,key,value,chainable,emptyGet,raw){var i=0,len=elems.length,bulk=null==key;if("object"===jQuery.type(key)){chainable=!0;for(i in key)jQuery.access(elems,fn,i,key[i],!0,emptyGet,raw)}else if(void 0!==value&&(chainable=!0,jQuery.isFunction(value)||(raw=!0),bulk&&(raw?(fn.call(elems,value),fn=null):(bulk=fn,fn=function(elem,key,value){return bulk.call(jQuery(elem),value)})),fn))for(;i<len;i++)fn(elems[i],key,raw?value:value.call(elems[i],i,fn(elems[i],key)));return chainable?elems:bulk?fn.call(elems):len?fn(elems[0],key):emptyGet};jQuery.acceptData=function(owner){return 1===owner.nodeType||9===owner.nodeType||!+owner.nodeType},Data.uid=1,Data.accepts=jQuery.acceptData,Data.prototype={key:function(owner){if(!Data.accepts(owner))return 0;var descriptor={},unlock=owner[this.expando];if(!unlock){unlock=Data.uid++;try{descriptor[this.expando]={value:unlock},Object.defineProperties(owner,descriptor)}catch(e){descriptor[this.expando]=unlock,jQuery.extend(owner,descriptor)}}return this.cache[unlock]||(this.cache[unlock]={}),unlock},set:function(owner,data,value){var prop,unlock=this.key(owner),cache=this.cache[unlock];if("string"==typeof data)cache[data]=value;else if(jQuery.isEmptyObject(cache))jQuery.extend(this.cache[unlock],data);else for(prop in data)cache[prop]=data[prop];return cache},get:function(owner,key){var cache=this.cache[this.key(owner)];return void 0===key?cache:cache[key]},access:function(owner,key,value){var stored;return void 0===key||key&&"string"==typeof key&&void 0===value?(stored=this.get(owner,key),void 0!==stored?stored:this.get(owner,jQuery.camelCase(key))):(this.set(owner,key,value),void 0!==value?value:key)},remove:function(owner,key){var i,name,camel,unlock=this.key(owner),cache=this.cache[unlock];if(void 0===key)this.cache[unlock]={};else{jQuery.isArray(key)?name=key.concat(key.map(jQuery.camelCase)):(camel=jQuery.camelCase(key),key in cache?name=[key,camel]:(name=camel,name=name in cache?[name]:name.match(rnotwhite)||[])),i=name.length;for(;i--;)delete cache[name[i]]}},hasData:function(owner){return!jQuery.isEmptyObject(this.cache[owner[this.expando]]||{})},discard:function(owner){owner[this.expando]&&delete this.cache[owner[this.expando]]}};var data_priv=new Data,data_user=new Data,rbrace=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,rmultiDash=/([A-Z])/g;jQuery.extend({hasData:function(elem){return data_user.hasData(elem)||data_priv.hasData(elem)},data:function(elem,name,data){return data_user.access(elem,name,data)},removeData:function(elem,name){data_user.remove(elem,name)},_data:function(elem,name,data){return data_priv.access(elem,name,data)},_removeData:function(elem,name){data_priv.remove(elem,name)}}),jQuery.fn.extend({data:function(key,value){var i,name,data,elem=this[0],attrs=elem&&elem.attributes;if(void 0===key){if(this.length&&(data=data_user.get(elem),1===elem.nodeType&&!data_priv.get(elem,"hasDataAttrs"))){for(i=attrs.length;i--;)attrs[i]&&(name=attrs[i].name,0===name.indexOf("data-")&&(name=jQuery.camelCase(name.slice(5)),dataAttr(elem,name,data[name])));data_priv.set(elem,"hasDataAttrs",!0)}return data}return"object"==typeof key?this.each(function(){data_user.set(this,key)}):access(this,function(value){var data,camelKey=jQuery.camelCase(key);if(elem&&void 0===value){if(void 0!==(data=data_user.get(elem,key)))return data;if(void 0!==(data=data_user.get(elem,camelKey)))return data;if(void 0!==(data=dataAttr(elem,camelKey,void 0)))return data}else this.each(function(){var data=data_user.get(this,camelKey);data_user.set(this,camelKey,value),-1!==key.indexOf("-")&&void 0!==data&&data_user.set(this,key,value)})},null,value,arguments.length>1,null,!0)},removeData:function(key){return this.each(function(){data_user.remove(this,key)})}}),jQuery.extend({queue:function(elem,type,data){var queue;if(elem)return type=(type||"fx")+"queue",queue=data_priv.get(elem,type),data&&(!queue||jQuery.isArray(data)?queue=data_priv.access(elem,type,jQuery.makeArray(data)):queue.push(data)),queue||[]},dequeue:function(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),startLength=queue.length,fn=queue.shift(),hooks=jQuery._queueHooks(elem,type),next=function(){jQuery.dequeue(elem,type)};"inprogress"===fn&&(fn=queue.shift(),startLength--),fn&&("fx"===type&&queue.unshift("inprogress"),delete hooks.stop,fn.call(elem,next,hooks)),!startLength&&hooks&&hooks.empty.fire()},_queueHooks:function(elem,type){var key=type+"queueHooks";return data_priv.get(elem,key)||data_priv.access(elem,key,{empty:jQuery.Callbacks("once memory").add(function(){data_priv.remove(elem,[type+"queue",key])})})}}),jQuery.fn.extend({queue:function(type,data){var setter=2;return"string"!=typeof type&&(data=type,type="fx",setter--),arguments.length<setter?jQuery.queue(this[0],type):void 0===data?this:this.each(function(){var queue=jQuery.queue(this,type,data);jQuery._queueHooks(this,type),"fx"===type&&"inprogress"!==queue[0]&&jQuery.dequeue(this,type)})},dequeue:function(type){return this.each(function(){jQuery.dequeue(this,type)})},clearQueue:function(type){return this.queue(type||"fx",[])},promise:function(type,obj){var tmp,count=1,defer=jQuery.Deferred(),elements=this,i=this.length,resolve=function(){--count||defer.resolveWith(elements,[elements])};for("string"!=typeof type&&(obj=type,type=void 0),type=type||"fx";i--;)(tmp=data_priv.get(elements[i],type+"queueHooks"))&&tmp.empty&&(count++,tmp.empty.add(resolve));return resolve(),defer.promise(obj)}});var pnum=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,cssExpand=["Top","Right","Bottom","Left"],isHidden=function(elem,el){return elem=el||elem,"none"===jQuery.css(elem,"display")||!jQuery.contains(elem.ownerDocument,elem)},rcheckableType=/^(?:checkbox|radio)$/i;!function(){var fragment=document.createDocumentFragment(),div=fragment.appendChild(document.createElement("div")),input=document.createElement("input");input.setAttribute("type","radio"),input.setAttribute("checked","checked"),input.setAttribute("name","t"),div.appendChild(input),support.checkClone=div.cloneNode(!0).cloneNode(!0).lastChild.checked,div.innerHTML="<textarea>x</textarea>",support.noCloneChecked=!!div.cloneNode(!0).lastChild.defaultValue}();support.focusinBubbles="onfocusin"in window;var rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|pointer|contextmenu)|click/,rfocusMorph=/^(?:focusinfocus|focusoutblur)$/,rtypenamespace=/^([^.]*)(?:\.(.+)|)$/;jQuery.event={global:{},add:function(elem,types,handler,data,selector){var handleObjIn,eventHandle,tmp,events,t,handleObj,special,handlers,type,namespaces,origType,elemData=data_priv.get(elem);if(elemData)for(handler.handler&&(handleObjIn=handler,handler=handleObjIn.handler,selector=handleObjIn.selector),handler.guid||(handler.guid=jQuery.guid++),(events=elemData.events)||(events=elemData.events={}),(eventHandle=elemData.handle)||(eventHandle=elemData.handle=function(e){return void 0!==jQuery&&jQuery.event.triggered!==e.type?jQuery.event.dispatch.apply(elem,arguments):void 0}),types=(types||"").match(rnotwhite)||[""],t=types.length;t--;)tmp=rtypenamespace.exec(types[t])||[],type=origType=tmp[1],namespaces=(tmp[2]||"").split(".").sort(),type&&(special=jQuery.event.special[type]||{},type=(selector?special.delegateType:special.bindType)||type,special=jQuery.event.special[type]||{},handleObj=jQuery.extend({type:type,origType:origType,data:data,handler:handler,guid:handler.guid,selector:selector,needsContext:selector&&jQuery.expr.match.needsContext.test(selector),namespace:namespaces.join(".")},handleObjIn),(handlers=events[type])||(handlers=events[type]=[],handlers.delegateCount=0,special.setup&&!1!==special.setup.call(elem,data,namespaces,eventHandle)||elem.addEventListener&&elem.addEventListener(type,eventHandle,!1)),special.add&&(special.add.call(elem,handleObj),handleObj.handler.guid||(handleObj.handler.guid=handler.guid)),selector?handlers.splice(handlers.delegateCount++,0,handleObj):handlers.push(handleObj),jQuery.event.global[type]=!0)},remove:function(elem,types,handler,selector,mappedTypes){var j,origCount,tmp,events,t,handleObj,special,handlers,type,namespaces,origType,elemData=data_priv.hasData(elem)&&data_priv.get(elem);if(elemData&&(events=elemData.events)){for(types=(types||"").match(rnotwhite)||[""],t=types.length;t--;)if(tmp=rtypenamespace.exec(types[t])||[],type=origType=tmp[1],namespaces=(tmp[2]||"").split(".").sort(),type){for(special=jQuery.event.special[type]||{},type=(selector?special.delegateType:special.bindType)||type,handlers=events[type]||[],tmp=tmp[2]&&new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"),origCount=j=handlers.length;j--;)handleObj=handlers[j],!mappedTypes&&origType!==handleObj.origType||handler&&handler.guid!==handleObj.guid||tmp&&!tmp.test(handleObj.namespace)||selector&&selector!==handleObj.selector&&("**"!==selector||!handleObj.selector)||(handlers.splice(j,1),handleObj.selector&&handlers.delegateCount--,special.remove&&special.remove.call(elem,handleObj));origCount&&!handlers.length&&(special.teardown&&!1!==special.teardown.call(elem,namespaces,elemData.handle)||jQuery.removeEvent(elem,type,elemData.handle),delete events[type])}else for(type in events)jQuery.event.remove(elem,type+types[t],handler,selector,!0);jQuery.isEmptyObject(events)&&(delete elemData.handle,data_priv.remove(elem,"events"))}},trigger:function(event,data,elem,onlyHandlers){var i,cur,tmp,bubbleType,ontype,handle,special,eventPath=[elem||document],type=hasOwn.call(event,"type")?event.type:event,namespaces=hasOwn.call(event,"namespace")?event.namespace.split("."):[];if(cur=tmp=elem=elem||document,3!==elem.nodeType&&8!==elem.nodeType&&!rfocusMorph.test(type+jQuery.event.triggered)&&(type.indexOf(".")>=0&&(namespaces=type.split("."),type=namespaces.shift(),namespaces.sort()),ontype=type.indexOf(":")<0&&"on"+type,event=event[jQuery.expando]?event:new jQuery.Event(type,"object"==typeof event&&event),event.isTrigger=onlyHandlers?2:3,event.namespace=namespaces.join("."),event.namespace_re=event.namespace?new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,event.result=void 0,event.target||(event.target=elem),data=null==data?[event]:jQuery.makeArray(data,[event]),special=jQuery.event.special[type]||{},onlyHandlers||!special.trigger||!1!==special.trigger.apply(elem,data))){if(!onlyHandlers&&!special.noBubble&&!jQuery.isWindow(elem)){for(bubbleType=special.delegateType||type,rfocusMorph.test(bubbleType+type)||(cur=cur.parentNode);cur;cur=cur.parentNode)eventPath.push(cur),tmp=cur;tmp===(elem.ownerDocument||document)&&eventPath.push(tmp.defaultView||tmp.parentWindow||window)}for(i=0;(cur=eventPath[i++])&&!event.isPropagationStopped();)event.type=i>1?bubbleType:special.bindType||type,handle=(data_priv.get(cur,"events")||{})[event.type]&&data_priv.get(cur,"handle"),handle&&handle.apply(cur,data),(handle=ontype&&cur[ontype])&&handle.apply&&jQuery.acceptData(cur)&&(event.result=handle.apply(cur,data),!1===event.result&&event.preventDefault());return event.type=type,onlyHandlers||event.isDefaultPrevented()||special._default&&!1!==special._default.apply(eventPath.pop(),data)||!jQuery.acceptData(elem)||ontype&&jQuery.isFunction(elem[type])&&!jQuery.isWindow(elem)&&(tmp=elem[ontype],tmp&&(elem[ontype]=null),jQuery.event.triggered=type,elem[type](),jQuery.event.triggered=void 0,tmp&&(elem[ontype]=tmp)),event.result}},dispatch:function(event){event=jQuery.event.fix(event);var i,j,ret,matched,handleObj,handlerQueue=[],args=slice.call(arguments),handlers=(data_priv.get(this,"events")||{})[event.type]||[],special=jQuery.event.special[event.type]||{};if(args[0]=event,event.delegateTarget=this,!special.preDispatch||!1!==special.preDispatch.call(this,event)){for(handlerQueue=jQuery.event.handlers.call(this,event,handlers),i=0;(matched=handlerQueue[i++])&&!event.isPropagationStopped();)for(event.currentTarget=matched.elem,j=0;(handleObj=matched.handlers[j++])&&!event.isImmediatePropagationStopped();)event.namespace_re&&!event.namespace_re.test(handleObj.namespace)||(event.handleObj=handleObj,event.data=handleObj.data,void 0!==(ret=((jQuery.event.special[handleObj.origType]||{}).handle||handleObj.handler).apply(matched.elem,args))&&!1===(event.result=ret)&&(event.preventDefault(),event.stopPropagation()));return special.postDispatch&&special.postDispatch.call(this,event),event.result}},handlers:function(event,handlers){var i,matches,sel,handleObj,handlerQueue=[],delegateCount=handlers.delegateCount,cur=event.target;if(delegateCount&&cur.nodeType&&(!event.button||"click"!==event.type))for(;cur!==this;cur=cur.parentNode||this)if(!0!==cur.disabled||"click"!==event.type){for(matches=[],i=0;i<delegateCount;i++)handleObj=handlers[i],sel=handleObj.selector+" ",void 0===matches[sel]&&(matches[sel]=handleObj.needsContext?jQuery(sel,this).index(cur)>=0:jQuery.find(sel,this,null,[cur]).length),matches[sel]&&matches.push(handleObj);matches.length&&handlerQueue.push({elem:cur,handlers:matches})}return delegateCount<handlers.length&&handlerQueue.push({elem:this,handlers:handlers.slice(delegateCount)}),handlerQueue},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(event,original){return null==event.which&&(event.which=null!=original.charCode?original.charCode:original.keyCode),event}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(event,original){var eventDoc,doc,body,button=original.button;return null==event.pageX&&null!=original.clientX&&(eventDoc=event.target.ownerDocument||document,doc=eventDoc.documentElement,body=eventDoc.body,event.pageX=original.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0),event.pageY=original.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0)),event.which||void 0===button||(event.which=1&button?1:2&button?3:4&button?2:0),event}},fix:function(event){if(event[jQuery.expando])return event
;var i,prop,copy,type=event.type,originalEvent=event,fixHook=this.fixHooks[type];for(fixHook||(this.fixHooks[type]=fixHook=rmouseEvent.test(type)?this.mouseHooks:rkeyEvent.test(type)?this.keyHooks:{}),copy=fixHook.props?this.props.concat(fixHook.props):this.props,event=new jQuery.Event(originalEvent),i=copy.length;i--;)prop=copy[i],event[prop]=originalEvent[prop];return event.target||(event.target=document),3===event.target.nodeType&&(event.target=event.target.parentNode),fixHook.filter?fixHook.filter(event,originalEvent):event},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==safeActiveElement()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===safeActiveElement()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&jQuery.nodeName(this,"input"))return this.click(),!1},_default:function(event){return jQuery.nodeName(event.target,"a")}},beforeunload:{postDispatch:function(event){void 0!==event.result&&event.originalEvent&&(event.originalEvent.returnValue=event.result)}}},simulate:function(type,elem,event,bubble){var e=jQuery.extend(new jQuery.Event,event,{type:type,isSimulated:!0,originalEvent:{}});bubble?jQuery.event.trigger(e,null,elem):jQuery.event.dispatch.call(elem,e),e.isDefaultPrevented()&&event.preventDefault()}},jQuery.removeEvent=function(elem,type,handle){elem.removeEventListener&&elem.removeEventListener(type,handle,!1)},jQuery.Event=function(src,props){if(!(this instanceof jQuery.Event))return new jQuery.Event(src,props);src&&src.type?(this.originalEvent=src,this.type=src.type,this.isDefaultPrevented=src.defaultPrevented||void 0===src.defaultPrevented&&!1===src.returnValue?returnTrue:returnFalse):this.type=src,props&&jQuery.extend(this,props),this.timeStamp=src&&src.timeStamp||jQuery.now(),this[jQuery.expando]=!0},jQuery.Event.prototype={isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=returnTrue,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=returnTrue,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=returnTrue,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(orig,fix){jQuery.event.special[orig]={delegateType:fix,bindType:fix,handle:function(event){var ret,target=this,related=event.relatedTarget,handleObj=event.handleObj;return related&&(related===target||jQuery.contains(target,related))||(event.type=handleObj.origType,ret=handleObj.handler.apply(this,arguments),event.type=fix),ret}}}),support.focusinBubbles||jQuery.each({focus:"focusin",blur:"focusout"},function(orig,fix){var handler=function(event){jQuery.event.simulate(fix,event.target,jQuery.event.fix(event),!0)};jQuery.event.special[fix]={setup:function(){var doc=this.ownerDocument||this,attaches=data_priv.access(doc,fix);attaches||doc.addEventListener(orig,handler,!0),data_priv.access(doc,fix,(attaches||0)+1)},teardown:function(){var doc=this.ownerDocument||this,attaches=data_priv.access(doc,fix)-1;attaches?data_priv.access(doc,fix,attaches):(doc.removeEventListener(orig,handler,!0),data_priv.remove(doc,fix))}}}),jQuery.fn.extend({on:function(types,selector,data,fn,one){var origFn,type;if("object"==typeof types){"string"!=typeof selector&&(data=data||selector,selector=void 0);for(type in types)this.on(type,selector,data,types[type],one);return this}if(null==data&&null==fn?(fn=selector,data=selector=void 0):null==fn&&("string"==typeof selector?(fn=data,data=void 0):(fn=data,data=selector,selector=void 0)),!1===fn)fn=returnFalse;else if(!fn)return this;return 1===one&&(origFn=fn,fn=function(event){return jQuery().off(event),origFn.apply(this,arguments)},fn.guid=origFn.guid||(origFn.guid=jQuery.guid++)),this.each(function(){jQuery.event.add(this,types,fn,data,selector)})},one:function(types,selector,data,fn){return this.on(types,selector,data,fn,1)},off:function(types,selector,fn){var handleObj,type;if(types&&types.preventDefault&&types.handleObj)return handleObj=types.handleObj,jQuery(types.delegateTarget).off(handleObj.namespace?handleObj.origType+"."+handleObj.namespace:handleObj.origType,handleObj.selector,handleObj.handler),this;if("object"==typeof types){for(type in types)this.off(type,selector,types[type]);return this}return!1!==selector&&"function"!=typeof selector||(fn=selector,selector=void 0),!1===fn&&(fn=returnFalse),this.each(function(){jQuery.event.remove(this,types,fn,selector)})},trigger:function(type,data){return this.each(function(){jQuery.event.trigger(type,data,this)})},triggerHandler:function(type,data){var elem=this[0];if(elem)return jQuery.event.trigger(type,data,elem,!0)}});var rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,rtagName=/<([\w:]+)/,rhtml=/<|&#?\w+;/,rnoInnerhtml=/<(?:script|style|link)/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptType=/^$|\/(?:java|ecma)script/i,rscriptTypeMasked=/^true\/(.*)/,wrapMap={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};wrapMap.optgroup=wrapMap.option,wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead,wrapMap.th=wrapMap.td,jQuery.extend({clone:function(elem,dataAndEvents,deepDataAndEvents){var i,l,srcElements,destElements,clone=elem.cloneNode(!0),inPage=jQuery.contains(elem.ownerDocument,elem);if(!(support.noCloneChecked||1!==elem.nodeType&&11!==elem.nodeType||jQuery.isXMLDoc(elem)))for(destElements=getAll(clone),srcElements=getAll(elem),i=0,l=srcElements.length;i<l;i++)fixInput(srcElements[i],destElements[i]);if(dataAndEvents)if(deepDataAndEvents)for(srcElements=srcElements||getAll(elem),destElements=destElements||getAll(clone),i=0,l=srcElements.length;i<l;i++)cloneCopyEvent(srcElements[i],destElements[i]);else cloneCopyEvent(elem,clone);return destElements=getAll(clone,"script"),destElements.length>0&&setGlobalEval(destElements,!inPage&&getAll(elem,"script")),clone},buildFragment:function(elems,context,scripts,selection){for(var elem,tmp,tag,wrap,contains,j,fragment=context.createDocumentFragment(),nodes=[],i=0,l=elems.length;i<l;i++)if((elem=elems[i])||0===elem)if("object"===jQuery.type(elem))jQuery.merge(nodes,elem.nodeType?[elem]:elem);else if(rhtml.test(elem)){for(tmp=tmp||fragment.appendChild(context.createElement("div")),tag=(rtagName.exec(elem)||["",""])[1].toLowerCase(),wrap=wrapMap[tag]||wrapMap._default,tmp.innerHTML=wrap[1]+elem.replace(rxhtmlTag,"<$1></$2>")+wrap[2],j=wrap[0];j--;)tmp=tmp.lastChild;jQuery.merge(nodes,tmp.childNodes),tmp=fragment.firstChild,tmp.textContent=""}else nodes.push(context.createTextNode(elem));for(fragment.textContent="",i=0;elem=nodes[i++];)if((!selection||-1===jQuery.inArray(elem,selection))&&(contains=jQuery.contains(elem.ownerDocument,elem),tmp=getAll(fragment.appendChild(elem),"script"),contains&&setGlobalEval(tmp),scripts))for(j=0;elem=tmp[j++];)rscriptType.test(elem.type||"")&&scripts.push(elem);return fragment},cleanData:function(elems){for(var data,elem,type,key,special=jQuery.event.special,i=0;void 0!==(elem=elems[i]);i++){if(jQuery.acceptData(elem)&&(key=elem[data_priv.expando])&&(data=data_priv.cache[key])){if(data.events)for(type in data.events)special[type]?jQuery.event.remove(elem,type):jQuery.removeEvent(elem,type,data.handle);data_priv.cache[key]&&delete data_priv.cache[key]}delete data_user.cache[elem[data_user.expando]]}}}),jQuery.fn.extend({text:function(value){return access(this,function(value){return void 0===value?jQuery.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=value)})},null,value,arguments.length)},append:function(){return this.domManip(arguments,function(elem){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){manipulationTarget(this,elem).appendChild(elem)}})},prepend:function(){return this.domManip(arguments,function(elem){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var target=manipulationTarget(this,elem);target.insertBefore(elem,target.firstChild)}})},before:function(){return this.domManip(arguments,function(elem){this.parentNode&&this.parentNode.insertBefore(elem,this)})},after:function(){return this.domManip(arguments,function(elem){this.parentNode&&this.parentNode.insertBefore(elem,this.nextSibling)})},remove:function(selector,keepData){for(var elem,elems=selector?jQuery.filter(selector,this):this,i=0;null!=(elem=elems[i]);i++)keepData||1!==elem.nodeType||jQuery.cleanData(getAll(elem)),elem.parentNode&&(keepData&&jQuery.contains(elem.ownerDocument,elem)&&setGlobalEval(getAll(elem,"script")),elem.parentNode.removeChild(elem));return this},empty:function(){for(var elem,i=0;null!=(elem=this[i]);i++)1===elem.nodeType&&(jQuery.cleanData(getAll(elem,!1)),elem.textContent="");return this},clone:function(dataAndEvents,deepDataAndEvents){return dataAndEvents=null!=dataAndEvents&&dataAndEvents,deepDataAndEvents=null==deepDataAndEvents?dataAndEvents:deepDataAndEvents,this.map(function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents)})},html:function(value){return access(this,function(value){var elem=this[0]||{},i=0,l=this.length;if(void 0===value&&1===elem.nodeType)return elem.innerHTML;if("string"==typeof value&&!rnoInnerhtml.test(value)&&!wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()]){value=value.replace(rxhtmlTag,"<$1></$2>");try{for(;i<l;i++)elem=this[i]||{},1===elem.nodeType&&(jQuery.cleanData(getAll(elem,!1)),elem.innerHTML=value);elem=0}catch(e){}}elem&&this.empty().append(value)},null,value,arguments.length)},replaceWith:function(){var arg=arguments[0];return this.domManip(arguments,function(elem){arg=this.parentNode,jQuery.cleanData(getAll(this)),arg&&arg.replaceChild(elem,this)}),arg&&(arg.length||arg.nodeType)?this:this.remove()},detach:function(selector){return this.remove(selector,!0)},domManip:function(args,callback){args=concat.apply([],args);var fragment,first,scripts,hasScripts,node,doc,i=0,l=this.length,set=this,iNoClone=l-1,value=args[0],isFunction=jQuery.isFunction(value);if(isFunction||l>1&&"string"==typeof value&&!support.checkClone&&rchecked.test(value))return this.each(function(index){var self=set.eq(index);isFunction&&(args[0]=value.call(this,index,self.html())),self.domManip(args,callback)});if(l&&(fragment=jQuery.buildFragment(args,this[0].ownerDocument,!1,this),first=fragment.firstChild,1===fragment.childNodes.length&&(fragment=first),first)){for(scripts=jQuery.map(getAll(fragment,"script"),disableScript),hasScripts=scripts.length;i<l;i++)node=fragment,i!==iNoClone&&(node=jQuery.clone(node,!0,!0),hasScripts&&jQuery.merge(scripts,getAll(node,"script"))),callback.call(this[i],node,i);if(hasScripts)for(doc=scripts[scripts.length-1].ownerDocument,jQuery.map(scripts,restoreScript),i=0;i<hasScripts;i++)node=scripts[i],rscriptType.test(node.type||"")&&!data_priv.access(node,"globalEval")&&jQuery.contains(doc,node)&&(node.src?jQuery._evalUrl&&jQuery._evalUrl(node.src):jQuery.globalEval(node.textContent.replace(/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,"")))}return this}}),jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){for(var elems,ret=[],insert=jQuery(selector),last=insert.length-1,i=0;i<=last;i++)elems=i===last?this:this.clone(!0),jQuery(insert[i])[original](elems),push.apply(ret,elems.get());return this.pushStack(ret)}});var iframe,elemdisplay={},rmargin=/^margin/,rnumnonpx=new RegExp("^("+pnum+")(?!px)[a-z%]+$","i"),getStyles=function(elem){return elem.ownerDocument.defaultView.opener?elem.ownerDocument.defaultView.getComputedStyle(elem,null):window.getComputedStyle(elem,null)};!function(){function computePixelPositionAndBoxSizingReliable(){div.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",div.innerHTML="",docElem.appendChild(container);var divStyle=window.getComputedStyle(div,null);pixelPositionVal="1%"!==divStyle.top,boxSizingReliableVal="4px"===divStyle.width,docElem.removeChild(container)}var pixelPositionVal,boxSizingReliableVal,docElem=document.documentElement,container=document.createElement("div"),div=document.createElement("div");div.style&&(div.style.backgroundClip="content-box",div.cloneNode(!0).style.backgroundClip="",support.clearCloneStyle="content-box"===div.style.backgroundClip,container.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",container.appendChild(div),window.getComputedStyle&&jQuery.extend(support,{pixelPosition:function(){return computePixelPositionAndBoxSizingReliable(),pixelPositionVal},boxSizingReliable:function(){return null==boxSizingReliableVal&&computePixelPositionAndBoxSizingReliable(),boxSizingReliableVal},reliableMarginRight:function(){var ret,marginDiv=div.appendChild(document.createElement("div"));return marginDiv.style.cssText=div.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",marginDiv.style.marginRight=marginDiv.style.width="0",div.style.width="1px",docElem.appendChild(container),ret=!parseFloat(window.getComputedStyle(marginDiv,null).marginRight),docElem.removeChild(container),div.removeChild(marginDiv),ret}}))}(),jQuery.swap=function(elem,options,callback,args){var ret,name,old={};for(name in options)old[name]=elem.style[name],elem.style[name]=options[name];ret=callback.apply(elem,args||[]);for(name in options)elem.style[name]=old[name];return ret};var rdisplayswap=/^(none|table(?!-c[ea]).+)/,rnumsplit=new RegExp("^("+pnum+")(.*)$","i"),rrelNum=new RegExp("^([+-])=("+pnum+")","i"),cssShow={position:"absolute",visibility:"hidden",display:"block"},cssNormalTransform={letterSpacing:"0",fontWeight:"400"},cssPrefixes=["Webkit","O","Moz","ms"];jQuery.extend({cssHooks:{opacity:{get:function(elem,computed){if(computed){var ret=curCSS(elem,"opacity");return""===ret?"1":ret}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(elem,name,value,extra){if(elem&&3!==elem.nodeType&&8!==elem.nodeType&&elem.style){var ret,type,hooks,origName=jQuery.camelCase(name),style=elem.style;if(name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(style,origName)),hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName],void 0===value)return hooks&&"get"in hooks&&void 0!==(ret=hooks.get(elem,!1,extra))?ret:style[name];type=typeof value,"string"===type&&(ret=rrelNum.exec(value))&&(value=(ret[1]+1)*ret[2]+parseFloat(jQuery.css(elem,name)),type="number"),null!=value&&value===value&&("number"!==type||jQuery.cssNumber[origName]||(value+="px"),support.clearCloneStyle||""!==value||0!==name.indexOf("background")||(style[name]="inherit"),hooks&&"set"in hooks&&void 0===(value=hooks.set(elem,value,extra))||(style[name]=value))}},css:function(elem,name,extra,styles){var val,num,hooks,origName=jQuery.camelCase(name);return name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(elem.style,origName)),hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName],hooks&&"get"in hooks&&(val=hooks.get(elem,!0,extra)),void 0===val&&(val=curCSS(elem,name,styles)),"normal"===val&&name in cssNormalTransform&&(val=cssNormalTransform[name]),""===extra||extra?(num=parseFloat(val),!0===extra||jQuery.isNumeric(num)?num||0:val):val}}),jQuery.each(["height","width"],function(i,name){jQuery.cssHooks[name]={get:function(elem,computed,extra){if(computed)return rdisplayswap.test(jQuery.css(elem,"display"))&&0===elem.offsetWidth?jQuery.swap(elem,cssShow,function(){return getWidthOrHeight(elem,name,extra)}):getWidthOrHeight(elem,name,extra)},set:function(elem,value,extra){var styles=extra&&getStyles(elem);return setPositiveNumber(elem,value,extra?augmentWidthOrHeight(elem,name,extra,"border-box"===jQuery.css(elem,"boxSizing",!1,styles),styles):0)}}}),jQuery.cssHooks.marginRight=addGetHookIf(support.reliableMarginRight,function(elem,computed){if(computed)return jQuery.swap(elem,{display:"inline-block"},curCSS,[elem,"marginRight"])}),jQuery.each({margin:"",padding:"",border:"Width"},function(prefix,suffix){jQuery.cssHooks[prefix+suffix]={expand:function(value){for(var i=0,expanded={},parts="string"==typeof value?value.split(" "):[value];i<4;i++)expanded[prefix+cssExpand[i]+suffix]=parts[i]||parts[i-2]||parts[0];return expanded}},rmargin.test(prefix)||(jQuery.cssHooks[prefix+suffix].set=setPositiveNumber)}),jQuery.fn.extend({css:function(name,value){return access(this,function(elem,name,value){var styles,len,map={},i=0;if(jQuery.isArray(name)){for(styles=getStyles(elem),len=name.length;i<len;i++)map[name[i]]=jQuery.css(elem,name[i],!1,styles);return map}return void 0!==value?jQuery.style(elem,name,value):jQuery.css(elem,name)},name,value,arguments.length>1)},show:function(){return showHide(this,!0)},hide:function(){return showHide(this)},toggle:function(state){return"boolean"==typeof state?state?this.show():this.hide():this.each(function(){isHidden(this)?jQuery(this).show():jQuery(this).hide()})}}),jQuery.Tween=Tween,Tween.prototype={constructor:Tween,init:function(elem,options,prop,end,easing,unit){this.elem=elem,this.prop=prop,this.easing=easing||"swing",this.options=options,this.start=this.now=this.cur(),this.end=end,this.unit=unit||(jQuery.cssNumber[prop]?"":"px")},cur:function(){var hooks=Tween.propHooks[this.prop];return hooks&&hooks.get?hooks.get(this):Tween.propHooks._default.get(this)},run:function(percent){var eased,hooks=Tween.propHooks[this.prop];return this.options.duration?this.pos=eased=jQuery.easing[this.easing](percent,this.options.duration*percent,0,1,this.options.duration):this.pos=eased=percent,this.now=(this.end-this.start)*eased+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),hooks&&hooks.set?hooks.set(this):Tween.propHooks._default.set(this),this}},Tween.prototype.init.prototype=Tween.prototype,Tween.propHooks={_default:{get:function(tween){var result;return null==tween.elem[tween.prop]||tween.elem.style&&null!=tween.elem.style[tween.prop]?(result=jQuery.css(tween.elem,tween.prop,""),result&&"auto"!==result?result:0):tween.elem[tween.prop]},set:function(tween){jQuery.fx.step[tween.prop]?jQuery.fx.step[tween.prop](tween):tween.elem.style&&(null!=tween.elem.style[jQuery.cssProps[tween.prop]]||jQuery.cssHooks[tween.prop])?jQuery.style(tween.elem,tween.prop,tween.now+tween.unit):tween.elem[tween.prop]=tween.now}}},Tween.propHooks.scrollTop=Tween.propHooks.scrollLeft={set:function(tween){tween.elem.nodeType&&tween.elem.parentNode&&(tween.elem[tween.prop]=tween.now)}},jQuery.easing={linear:function(p){return p},swing:function(p){return.5-Math.cos(p*Math.PI)/2}},jQuery.fx=Tween.prototype.init,jQuery.fx.step={};var fxNow,timerId,rfxtypes=/^(?:toggle|show|hide)$/,rfxnum=new RegExp("^(?:([+-])=|)("+pnum+")([a-z%]*)$","i"),rrun=/queueHooks$/,animationPrefilters=[defaultPrefilter],tweeners={"*":[function(prop,value){var tween=this.createTween(prop,value),target=tween.cur(),parts=rfxnum.exec(value),unit=parts&&parts[3]||(jQuery.cssNumber[prop]?"":"px"),start=(jQuery.cssNumber[prop]||"px"!==unit&&+target)&&rfxnum.exec(jQuery.css(tween.elem,prop)),scale=1,maxIterations=20;if(start&&start[3]!==unit){unit=unit||start[3],parts=parts||[],start=+target||1;do{scale=scale||".5",start/=scale,jQuery.style(tween.elem,prop,start+unit)}while(scale!==(scale=tween.cur()/target)&&1!==scale&&--maxIterations)}return parts&&(start=tween.start=+start||+target||0,tween.unit=unit,tween.end=parts[1]?start+(parts[1]+1)*parts[2]:+parts[2]),tween}]};jQuery.Animation=jQuery.extend(Animation,{tweener:function(props,callback){jQuery.isFunction(props)?(callback=props,props=["*"]):props=props.split(" ");for(var prop,index=0,length=props.length;index<length;index++)prop=props[index],tweeners[prop]=tweeners[prop]||[],tweeners[prop].unshift(callback)},prefilter:function(callback,prepend){prepend?animationPrefilters.unshift(callback):animationPrefilters.push(callback)}}),jQuery.speed=function(speed,easing,fn){var opt=speed&&"object"==typeof speed?jQuery.extend({},speed):{complete:fn||!fn&&easing||jQuery.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&!jQuery.isFunction(easing)&&easing};return opt.duration=jQuery.fx.off?0:"number"==typeof opt.duration?opt.duration:opt.duration in jQuery.fx.speeds?jQuery.fx.speeds[opt.duration]:jQuery.fx.speeds._default,null!=opt.queue&&!0!==opt.queue||(opt.queue="fx"),opt.old=opt.complete,opt.complete=function(){jQuery.isFunction(opt.old)&&opt.old.call(this),opt.queue&&jQuery.dequeue(this,opt.queue)},opt},jQuery.fn.extend({fadeTo:function(speed,to,easing,callback){return this.filter(isHidden).css("opacity",0).show().end().animate({opacity:to},speed,easing,callback)},animate:function(prop,speed,easing,callback){var empty=jQuery.isEmptyObject(prop),optall=jQuery.speed(speed,easing,callback),doAnimation=function(){var anim=Animation(this,jQuery.extend({},prop),optall);(empty||data_priv.get(this,"finish"))&&anim.stop(!0)};return doAnimation.finish=doAnimation,empty||!1===optall.queue?this.each(doAnimation):this.queue(optall.queue,doAnimation)},stop:function(type,clearQueue,gotoEnd){var stopQueue=function(hooks){var stop=hooks.stop;delete hooks.stop,stop(gotoEnd)};return"string"!=typeof type&&(gotoEnd=clearQueue,clearQueue=type,type=void 0),clearQueue&&!1!==type&&this.queue(type||"fx",[]),this.each(function(){var dequeue=!0,index=null!=type&&type+"queueHooks",timers=jQuery.timers,data=data_priv.get(this);if(index)data[index]&&data[index].stop&&stopQueue(data[index]);else for(index in data)data[index]&&data[index].stop&&rrun.test(index)&&stopQueue(data[index]);for(index=timers.length;index--;)timers[index].elem!==this||null!=type&&timers[index].queue!==type||(timers[index].anim.stop(gotoEnd),dequeue=!1,timers.splice(index,1));!dequeue&&gotoEnd||jQuery.dequeue(this,type)})},finish:function(type){return!1!==type&&(type=type||"fx"),this.each(function(){var index,data=data_priv.get(this),queue=data[type+"queue"],hooks=data[type+"queueHooks"],timers=jQuery.timers,length=queue?queue.length:0;for(data.finish=!0,jQuery.queue(this,type,[]),hooks&&hooks.stop&&hooks.stop.call(this,!0),index=timers.length;index--;)timers[index].elem===this&&timers[index].queue===type&&(timers[index].anim.stop(!0),timers.splice(index,1));for(index=0;index<length;index++)queue[index]&&queue[index].finish&&queue[index].finish.call(this);delete data.finish})}}),jQuery.each(["toggle","show","hide"],function(i,name){var cssFn=jQuery.fn[name];jQuery.fn[name]=function(speed,easing,callback){return null==speed||"boolean"==typeof speed?cssFn.apply(this,arguments):this.animate(genFx(name,!0),speed,easing,callback)}}),jQuery.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(name,props){jQuery.fn[name]=function(speed,easing,callback){return this.animate(props,speed,easing,callback)}}),jQuery.timers=[],jQuery.fx.tick=function(){var timer,i=0,timers=jQuery.timers;for(fxNow=jQuery.now();i<timers.length;i++)(timer=timers[i])()||timers[i]!==timer||timers.splice(i--,1);timers.length||jQuery.fx.stop(),fxNow=void 0},jQuery.fx.timer=function(timer){jQuery.timers.push(timer),timer()?jQuery.fx.start():jQuery.timers.pop()},jQuery.fx.interval=13,jQuery.fx.start=function(){timerId||(timerId=setInterval(jQuery.fx.tick,jQuery.fx.interval))},jQuery.fx.stop=function(){clearInterval(timerId),timerId=null},jQuery.fx.speeds={slow:600,fast:200,_default:400},jQuery.fn.delay=function(time,type){return time=jQuery.fx?jQuery.fx.speeds[time]||time:time,type=type||"fx",this.queue(type,function(next,hooks){var timeout=setTimeout(next,time);hooks.stop=function(){clearTimeout(timeout)}})},function(){var input=document.createElement("input"),select=document.createElement("select"),opt=select.appendChild(document.createElement("option"));input.type="checkbox",support.checkOn=""!==input.value,support.optSelected=opt.selected,select.disabled=!0,support.optDisabled=!opt.disabled,input=document.createElement("input"),input.value="t",input.type="radio",support.radioValue="t"===input.value}();var boolHook,attrHandle=jQuery.expr.attrHandle;jQuery.fn.extend({attr:function(name,value){return access(this,jQuery.attr,name,value,arguments.length>1)},removeAttr:function(name){return this.each(function(){jQuery.removeAttr(this,name)})}}),jQuery.extend({attr:function(elem,name,value){var hooks,ret,nType=elem.nodeType;if(elem&&3!==nType&&8!==nType&&2!==nType)return void 0===elem.getAttribute?jQuery.prop(elem,name,value):(1===nType&&jQuery.isXMLDoc(elem)||(name=name.toLowerCase(),hooks=jQuery.attrHooks[name]||(jQuery.expr.match.bool.test(name)?boolHook:void 0)),void 0===value?hooks&&"get"in hooks&&null!==(ret=hooks.get(elem,name))?ret:(ret=jQuery.find.attr(elem,name),null==ret?void 0:ret):null!==value?hooks&&"set"in hooks&&void 0!==(ret=hooks.set(elem,value,name))?ret:(elem.setAttribute(name,value+""),value):void jQuery.removeAttr(elem,name))},removeAttr:function(elem,value){var name,propName,i=0,attrNames=value&&value.match(rnotwhite);if(attrNames&&1===elem.nodeType)for(;name=attrNames[i++];)propName=jQuery.propFix[name]||name,jQuery.expr.match.bool.test(name)&&(elem[propName]=!1),elem.removeAttribute(name)},attrHooks:{type:{set:function(elem,value){if(!support.radioValue&&"radio"===value&&jQuery.nodeName(elem,"input")){var val=elem.value;return elem.setAttribute("type",value),val&&(elem.value=val),value}}}}}),boolHook={set:function(elem,value,name){return!1===value?jQuery.removeAttr(elem,name):elem.setAttribute(name,name),name}},jQuery.each(jQuery.expr.match.bool.source.match(/\w+/g),function(i,name){var getter=attrHandle[name]||jQuery.find.attr;attrHandle[name]=function(elem,name,isXML){var ret,handle;return isXML||(handle=attrHandle[name],attrHandle[name]=ret,ret=null!=getter(elem,name,isXML)?name.toLowerCase():null,attrHandle[name]=handle),ret}});var rfocusable=/^(?:input|select|textarea|button)$/i;jQuery.fn.extend({prop:function(name,value){return access(this,jQuery.prop,name,value,arguments.length>1)},removeProp:function(name){return this.each(function(){delete this[jQuery.propFix[name]||name]})}}),jQuery.extend({propFix:{for:"htmlFor",class:"className"},prop:function(elem,name,value){var ret,hooks,notxml,nType=elem.nodeType;if(elem&&3!==nType&&8!==nType&&2!==nType)return notxml=1!==nType||!jQuery.isXMLDoc(elem),notxml&&(name=jQuery.propFix[name]||name,hooks=jQuery.propHooks[name]),void 0!==value?hooks&&"set"in hooks&&void 0!==(ret=hooks.set(elem,value,name))?ret:elem[name]=value:hooks&&"get"in hooks&&null!==(ret=hooks.get(elem,name))?ret:elem[name]},propHooks:{tabIndex:{get:function(elem){return elem.hasAttribute("tabindex")||rfocusable.test(elem.nodeName)||elem.href?elem.tabIndex:-1}}}}),support.optSelected||(jQuery.propHooks.selected={get:function(elem){var parent=elem.parentNode;return parent&&parent.parentNode&&parent.parentNode.selectedIndex,null}}),jQuery.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){jQuery.propFix[this.toLowerCase()]=this});jQuery.fn.extend({addClass:function(value){var classes,elem,cur,clazz,j,finalValue,proceed="string"==typeof value&&value,i=0,len=this.length;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).addClass(value.call(this,j,this.className))});if(proceed)for(classes=(value||"").match(rnotwhite)||[];i<len;i++)if(elem=this[i],cur=1===elem.nodeType&&(elem.className?(" "+elem.className+" ").replace(/[\t\r\n\f]/g," "):" ")){for(j=0;clazz=classes[j++];)cur.indexOf(" "+clazz+" ")<0&&(cur+=clazz+" ");finalValue=jQuery.trim(cur),elem.className!==finalValue&&(elem.className=finalValue)}return this},removeClass:function(value){var classes,elem,cur,clazz,j,finalValue,proceed=0===arguments.length||"string"==typeof value&&value,i=0,len=this.length;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).removeClass(value.call(this,j,this.className))});if(proceed)for(classes=(value||"").match(rnotwhite)||[];i<len;i++)if(elem=this[i],cur=1===elem.nodeType&&(elem.className?(" "+elem.className+" ").replace(/[\t\r\n\f]/g," "):"")){for(j=0;clazz=classes[j++];)for(;cur.indexOf(" "+clazz+" ")>=0;)cur=cur.replace(" "+clazz+" "," ");finalValue=value?jQuery.trim(cur):"",elem.className!==finalValue&&(elem.className=finalValue)}return this},toggleClass:function(value,stateVal){var type=typeof value;return"boolean"==typeof stateVal&&"string"===type?stateVal?this.addClass(value):this.removeClass(value):jQuery.isFunction(value)?this.each(function(i){jQuery(this).toggleClass(value.call(this,i,this.className,stateVal),stateVal)}):this.each(function(){if("string"===type)for(var className,i=0,self=jQuery(this),classNames=value.match(rnotwhite)||[];className=classNames[i++];)self.hasClass(className)?self.removeClass(className):self.addClass(className);else"undefined"!==type&&"boolean"!==type||(this.className&&data_priv.set(this,"__className__",this.className),this.className=this.className||!1===value?"":data_priv.get(this,"__className__")||"")})},hasClass:function(selector){for(var className=" "+selector+" ",i=0,l=this.length;i<l;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(/[\t\r\n\f]/g," ").indexOf(className)>=0)return!0;return!1}});jQuery.fn.extend({val:function(value){var hooks,ret,isFunction,elem=this[0];{if(arguments.length)return isFunction=jQuery.isFunction(value),this.each(function(i){var val;1===this.nodeType&&(val=isFunction?value.call(this,i,jQuery(this).val()):value,null==val?val="":"number"==typeof val?val+="":jQuery.isArray(val)&&(val=jQuery.map(val,function(value){return null==value?"":value+""})),(hooks=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()])&&"set"in hooks&&void 0!==hooks.set(this,val,"value")||(this.value=val))});if(elem)return(hooks=jQuery.valHooks[elem.type]||jQuery.valHooks[elem.nodeName.toLowerCase()])&&"get"in hooks&&void 0!==(ret=hooks.get(elem,"value"))?ret:(ret=elem.value,"string"==typeof ret?ret.replace(/\r/g,""):null==ret?"":ret)}}}),jQuery.extend({valHooks:{option:{get:function(elem){var val=jQuery.find.attr(elem,"value");return null!=val?val:jQuery.trim(jQuery.text(elem))}},select:{get:function(elem){for(var value,option,options=elem.options,index=elem.selectedIndex,one="select-one"===elem.type||index<0,values=one?null:[],max=one?index+1:options.length,i=index<0?max:one?index:0;i<max;i++)if(option=options[i],(option.selected||i===index)&&(support.optDisabled?!option.disabled:null===option.getAttribute("disabled"))&&(!option.parentNode.disabled||!jQuery.nodeName(option.parentNode,"optgroup"))){if(value=jQuery(option).val(),one)return value;values.push(value)}return values},set:function(elem,value){for(var optionSet,option,options=elem.options,values=jQuery.makeArray(value),i=options.length;i--;)option=options[i],(option.selected=jQuery.inArray(option.value,values)>=0)&&(optionSet=!0);return optionSet||(elem.selectedIndex=-1),values}}}}),jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={set:function(elem,value){if(jQuery.isArray(value))return elem.checked=jQuery.inArray(jQuery(elem).val(),value)>=0}},
support.checkOn||(jQuery.valHooks[this].get=function(elem){return null===elem.getAttribute("value")?"on":elem.value})}),jQuery.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(i,name){jQuery.fn[name]=function(data,fn){return arguments.length>0?this.on(name,null,data,fn):this.trigger(name)}}),jQuery.fn.extend({hover:function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver)},bind:function(types,data,fn){return this.on(types,null,data,fn)},unbind:function(types,fn){return this.off(types,null,fn)},delegate:function(selector,types,data,fn){return this.on(types,selector,data,fn)},undelegate:function(selector,types,fn){return 1===arguments.length?this.off(selector,"**"):this.off(types,selector||"**",fn)}});var nonce=jQuery.now(),rquery=/\?/;jQuery.parseJSON=function(data){return JSON.parse(data+"")},jQuery.parseXML=function(data){var xml,tmp;if(!data||"string"!=typeof data)return null;try{tmp=new DOMParser,xml=tmp.parseFromString(data,"text/xml")}catch(e){xml=void 0}return xml&&!xml.getElementsByTagName("parsererror").length||jQuery.error("Invalid XML: "+data),xml};var rts=/([?&])_=[^&]*/,rheaders=/^(.*?):[ \t]*([^\r\n]*)$/gm,rlocalProtocol=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,rnoContent=/^(?:GET|HEAD)$/,rurl=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,prefilters={},transports={},allTypes="*/".concat("*"),ajaxLocation=window.location.href,ajaxLocParts=rurl.exec(ajaxLocation.toLowerCase())||[];jQuery.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ajaxLocation,type:"GET",isLocal:rlocalProtocol.test(ajaxLocParts[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":allTypes,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":jQuery.parseJSON,"text xml":jQuery.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(target,settings){return settings?ajaxExtend(ajaxExtend(target,jQuery.ajaxSettings),settings):ajaxExtend(jQuery.ajaxSettings,target)},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(url,options){function done(status,nativeStatusText,responses,headers){var isSuccess,success,error,response,modified,statusText=nativeStatusText;2!==state&&(state=2,timeoutTimer&&clearTimeout(timeoutTimer),transport=void 0,responseHeadersString=headers||"",jqXHR.readyState=status>0?4:0,isSuccess=status>=200&&status<300||304===status,responses&&(response=ajaxHandleResponses(s,jqXHR,responses)),response=ajaxConvert(s,response,jqXHR,isSuccess),isSuccess?(s.ifModified&&(modified=jqXHR.getResponseHeader("Last-Modified"),modified&&(jQuery.lastModified[cacheURL]=modified),(modified=jqXHR.getResponseHeader("etag"))&&(jQuery.etag[cacheURL]=modified)),204===status||"HEAD"===s.type?statusText="nocontent":304===status?statusText="notmodified":(statusText=response.state,success=response.data,error=response.error,isSuccess=!error)):(error=statusText,!status&&statusText||(statusText="error",status<0&&(status=0))),jqXHR.status=status,jqXHR.statusText=(nativeStatusText||statusText)+"",isSuccess?deferred.resolveWith(callbackContext,[success,statusText,jqXHR]):deferred.rejectWith(callbackContext,[jqXHR,statusText,error]),jqXHR.statusCode(statusCode),statusCode=void 0,fireGlobals&&globalEventContext.trigger(isSuccess?"ajaxSuccess":"ajaxError",[jqXHR,s,isSuccess?success:error]),completeDeferred.fireWith(callbackContext,[jqXHR,statusText]),fireGlobals&&(globalEventContext.trigger("ajaxComplete",[jqXHR,s]),--jQuery.active||jQuery.event.trigger("ajaxStop")))}"object"==typeof url&&(options=url,url=void 0),options=options||{};var transport,cacheURL,responseHeadersString,responseHeaders,timeoutTimer,parts,fireGlobals,i,s=jQuery.ajaxSetup({},options),callbackContext=s.context||s,globalEventContext=s.context&&(callbackContext.nodeType||callbackContext.jquery)?jQuery(callbackContext):jQuery.event,deferred=jQuery.Deferred(),completeDeferred=jQuery.Callbacks("once memory"),statusCode=s.statusCode||{},requestHeaders={},requestHeadersNames={},state=0,strAbort="canceled",jqXHR={readyState:0,getResponseHeader:function(key){var match;if(2===state){if(!responseHeaders)for(responseHeaders={};match=rheaders.exec(responseHeadersString);)responseHeaders[match[1].toLowerCase()]=match[2];match=responseHeaders[key.toLowerCase()]}return null==match?null:match},getAllResponseHeaders:function(){return 2===state?responseHeadersString:null},setRequestHeader:function(name,value){var lname=name.toLowerCase();return state||(name=requestHeadersNames[lname]=requestHeadersNames[lname]||name,requestHeaders[name]=value),this},overrideMimeType:function(type){return state||(s.mimeType=type),this},statusCode:function(map){var code;if(map)if(state<2)for(code in map)statusCode[code]=[statusCode[code],map[code]];else jqXHR.always(map[jqXHR.status]);return this},abort:function(statusText){var finalText=statusText||strAbort;return transport&&transport.abort(finalText),done(0,finalText),this}};if(deferred.promise(jqXHR).complete=completeDeferred.add,jqXHR.success=jqXHR.done,jqXHR.error=jqXHR.fail,s.url=((url||s.url||ajaxLocation)+"").replace(/#.*$/,"").replace(/^\/\//,ajaxLocParts[1]+"//"),s.type=options.method||options.type||s.method||s.type,s.dataTypes=jQuery.trim(s.dataType||"*").toLowerCase().match(rnotwhite)||[""],null==s.crossDomain&&(parts=rurl.exec(s.url.toLowerCase()),s.crossDomain=!(!parts||parts[1]===ajaxLocParts[1]&&parts[2]===ajaxLocParts[2]&&(parts[3]||("http:"===parts[1]?"80":"443"))===(ajaxLocParts[3]||("http:"===ajaxLocParts[1]?"80":"443")))),s.data&&s.processData&&"string"!=typeof s.data&&(s.data=jQuery.param(s.data,s.traditional)),inspectPrefiltersOrTransports(prefilters,s,options,jqXHR),2===state)return jqXHR;fireGlobals=jQuery.event&&s.global,fireGlobals&&0==jQuery.active++&&jQuery.event.trigger("ajaxStart"),s.type=s.type.toUpperCase(),s.hasContent=!rnoContent.test(s.type),cacheURL=s.url,s.hasContent||(s.data&&(cacheURL=s.url+=(rquery.test(cacheURL)?"&":"?")+s.data,delete s.data),!1===s.cache&&(s.url=rts.test(cacheURL)?cacheURL.replace(rts,"$1_="+nonce++):cacheURL+(rquery.test(cacheURL)?"&":"?")+"_="+nonce++)),s.ifModified&&(jQuery.lastModified[cacheURL]&&jqXHR.setRequestHeader("If-Modified-Since",jQuery.lastModified[cacheURL]),jQuery.etag[cacheURL]&&jqXHR.setRequestHeader("If-None-Match",jQuery.etag[cacheURL])),(s.data&&s.hasContent&&!1!==s.contentType||options.contentType)&&jqXHR.setRequestHeader("Content-Type",s.contentType),jqXHR.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+("*"!==s.dataTypes[0]?", "+allTypes+"; q=0.01":""):s.accepts["*"]);for(i in s.headers)jqXHR.setRequestHeader(i,s.headers[i]);if(s.beforeSend&&(!1===s.beforeSend.call(callbackContext,jqXHR,s)||2===state))return jqXHR.abort();strAbort="abort";for(i in{success:1,error:1,complete:1})jqXHR[i](s[i]);if(transport=inspectPrefiltersOrTransports(transports,s,options,jqXHR)){jqXHR.readyState=1,fireGlobals&&globalEventContext.trigger("ajaxSend",[jqXHR,s]),s.async&&s.timeout>0&&(timeoutTimer=setTimeout(function(){jqXHR.abort("timeout")},s.timeout));try{state=1,transport.send(requestHeaders,done)}catch(e){if(!(state<2))throw e;done(-1,e)}}else done(-1,"No Transport");return jqXHR},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json")},getScript:function(url,callback){return jQuery.get(url,void 0,callback,"script")}}),jQuery.each(["get","post"],function(i,method){jQuery[method]=function(url,data,callback,type){return jQuery.isFunction(data)&&(type=type||callback,callback=data,data=void 0),jQuery.ajax({url:url,type:method,dataType:type,data:data,success:callback})}}),jQuery._evalUrl=function(url){return jQuery.ajax({url:url,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},jQuery.fn.extend({wrapAll:function(html){var wrap;return jQuery.isFunction(html)?this.each(function(i){jQuery(this).wrapAll(html.call(this,i))}):(this[0]&&(wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&wrap.insertBefore(this[0]),wrap.map(function(){for(var elem=this;elem.firstElementChild;)elem=elem.firstElementChild;return elem}).append(this)),this)},wrapInner:function(html){return jQuery.isFunction(html)?this.each(function(i){jQuery(this).wrapInner(html.call(this,i))}):this.each(function(){var self=jQuery(this),contents=self.contents();contents.length?contents.wrapAll(html):self.append(html)})},wrap:function(html){var isFunction=jQuery.isFunction(html);return this.each(function(i){jQuery(this).wrapAll(isFunction?html.call(this,i):html)})},unwrap:function(){return this.parent().each(function(){jQuery.nodeName(this,"body")||jQuery(this).replaceWith(this.childNodes)}).end()}}),jQuery.expr.filters.hidden=function(elem){return elem.offsetWidth<=0&&elem.offsetHeight<=0},jQuery.expr.filters.visible=function(elem){return!jQuery.expr.filters.hidden(elem)};var rbracket=/\[\]$/,rsubmitterTypes=/^(?:submit|button|image|reset|file)$/i,rsubmittable=/^(?:input|select|textarea|keygen)/i;jQuery.param=function(a,traditional){var prefix,s=[],add=function(key,value){value=jQuery.isFunction(value)?value():null==value?"":value,s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(value)};if(void 0===traditional&&(traditional=jQuery.ajaxSettings&&jQuery.ajaxSettings.traditional),jQuery.isArray(a)||a.jquery&&!jQuery.isPlainObject(a))jQuery.each(a,function(){add(this.name,this.value)});else for(prefix in a)buildParams(prefix,a[prefix],traditional,add);return s.join("&").replace(/%20/g,"+")},jQuery.fn.extend({serialize:function(){return jQuery.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var elements=jQuery.prop(this,"elements");return elements?jQuery.makeArray(elements):this}).filter(function(){var type=this.type;return this.name&&!jQuery(this).is(":disabled")&&rsubmittable.test(this.nodeName)&&!rsubmitterTypes.test(type)&&(this.checked||!rcheckableType.test(type))}).map(function(i,elem){var val=jQuery(this).val();return null==val?null:jQuery.isArray(val)?jQuery.map(val,function(val){return{name:elem.name,value:val.replace(/\r?\n/g,"\r\n")}}):{name:elem.name,value:val.replace(/\r?\n/g,"\r\n")}}).get()}}),jQuery.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var xhrId=0,xhrCallbacks={},xhrSuccessStatus={0:200,1223:204},xhrSupported=jQuery.ajaxSettings.xhr();window.attachEvent&&window.attachEvent("onunload",function(){for(var key in xhrCallbacks)xhrCallbacks[key]()}),support.cors=!!xhrSupported&&"withCredentials"in xhrSupported,support.ajax=xhrSupported=!!xhrSupported,jQuery.ajaxTransport(function(options){var callback;if(support.cors||xhrSupported&&!options.crossDomain)return{send:function(headers,complete){var i,xhr=options.xhr(),id=++xhrId;if(xhr.open(options.type,options.url,options.async,options.username,options.password),options.xhrFields)for(i in options.xhrFields)xhr[i]=options.xhrFields[i];options.mimeType&&xhr.overrideMimeType&&xhr.overrideMimeType(options.mimeType),options.crossDomain||headers["X-Requested-With"]||(headers["X-Requested-With"]="XMLHttpRequest");for(i in headers)xhr.setRequestHeader(i,headers[i]);callback=function(type){return function(){callback&&(delete xhrCallbacks[id],callback=xhr.onload=xhr.onerror=null,"abort"===type?xhr.abort():"error"===type?complete(xhr.status,xhr.statusText):complete(xhrSuccessStatus[xhr.status]||xhr.status,xhr.statusText,"string"==typeof xhr.responseText?{text:xhr.responseText}:void 0,xhr.getAllResponseHeaders()))}},xhr.onload=callback(),xhr.onerror=callback("error"),callback=xhrCallbacks[id]=callback("abort");try{xhr.send(options.hasContent&&options.data||null)}catch(e){if(callback)throw e}},abort:function(){callback&&callback()}}}),jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(text){return jQuery.globalEval(text),text}}}),jQuery.ajaxPrefilter("script",function(s){void 0===s.cache&&(s.cache=!1),s.crossDomain&&(s.type="GET")}),jQuery.ajaxTransport("script",function(s){if(s.crossDomain){var script,callback;return{send:function(_,complete){script=jQuery("<script>").prop({async:!0,charset:s.scriptCharset,src:s.url}).on("load error",callback=function(evt){script.remove(),callback=null,evt&&complete("error"===evt.type?404:200,evt.type)}),document.head.appendChild(script[0])},abort:function(){callback&&callback()}}}});var oldCallbacks=[],rjsonp=/(=)\?(?=&|$)|\?\?/;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var callback=oldCallbacks.pop()||jQuery.expando+"_"+nonce++;return this[callback]=!0,callback}}),jQuery.ajaxPrefilter("json jsonp",function(s,originalSettings,jqXHR){var callbackName,overwritten,responseContainer,jsonProp=!1!==s.jsonp&&(rjsonp.test(s.url)?"url":"string"==typeof s.data&&!(s.contentType||"").indexOf("application/x-www-form-urlencoded")&&rjsonp.test(s.data)&&"data");if(jsonProp||"jsonp"===s.dataTypes[0])return callbackName=s.jsonpCallback=jQuery.isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback,jsonProp?s[jsonProp]=s[jsonProp].replace(rjsonp,"$1"+callbackName):!1!==s.jsonp&&(s.url+=(rquery.test(s.url)?"&":"?")+s.jsonp+"="+callbackName),s.converters["script json"]=function(){return responseContainer||jQuery.error(callbackName+" was not called"),responseContainer[0]},s.dataTypes[0]="json",overwritten=window[callbackName],window[callbackName]=function(){responseContainer=arguments},jqXHR.always(function(){window[callbackName]=overwritten,s[callbackName]&&(s.jsonpCallback=originalSettings.jsonpCallback,oldCallbacks.push(callbackName)),responseContainer&&jQuery.isFunction(overwritten)&&overwritten(responseContainer[0]),responseContainer=overwritten=void 0}),"script"}),jQuery.parseHTML=function(data,context,keepScripts){if(!data||"string"!=typeof data)return null;"boolean"==typeof context&&(keepScripts=context,context=!1),context=context||document;var parsed=rsingleTag.exec(data),scripts=!keepScripts&&[];return parsed?[context.createElement(parsed[1])]:(parsed=jQuery.buildFragment([data],context,scripts),scripts&&scripts.length&&jQuery(scripts).remove(),jQuery.merge([],parsed.childNodes))};var _load=jQuery.fn.load;jQuery.fn.load=function(url,params,callback){if("string"!=typeof url&&_load)return _load.apply(this,arguments);var selector,type,response,self=this,off=url.indexOf(" ");return off>=0&&(selector=jQuery.trim(url.slice(off)),url=url.slice(0,off)),jQuery.isFunction(params)?(callback=params,params=void 0):params&&"object"==typeof params&&(type="POST"),self.length>0&&jQuery.ajax({url:url,type:type,dataType:"html",data:params}).done(function(responseText){response=arguments,self.html(selector?jQuery("<div>").append(jQuery.parseHTML(responseText)).find(selector):responseText)}).complete(callback&&function(jqXHR,status){self.each(callback,response||[jqXHR.responseText,status,jqXHR])}),this},jQuery.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(i,type){jQuery.fn[type]=function(fn){return this.on(type,fn)}}),jQuery.expr.filters.animated=function(elem){return jQuery.grep(jQuery.timers,function(fn){return elem===fn.elem}).length};var docElem=window.document.documentElement;jQuery.offset={setOffset:function(elem,options,i){var curPosition,curLeft,curCSSTop,curTop,curOffset,curCSSLeft,calculatePosition,position=jQuery.css(elem,"position"),curElem=jQuery(elem),props={};"static"===position&&(elem.style.position="relative"),curOffset=curElem.offset(),curCSSTop=jQuery.css(elem,"top"),curCSSLeft=jQuery.css(elem,"left"),calculatePosition=("absolute"===position||"fixed"===position)&&(curCSSTop+curCSSLeft).indexOf("auto")>-1,calculatePosition?(curPosition=curElem.position(),curTop=curPosition.top,curLeft=curPosition.left):(curTop=parseFloat(curCSSTop)||0,curLeft=parseFloat(curCSSLeft)||0),jQuery.isFunction(options)&&(options=options.call(elem,i,curOffset)),null!=options.top&&(props.top=options.top-curOffset.top+curTop),null!=options.left&&(props.left=options.left-curOffset.left+curLeft),"using"in options?options.using.call(elem,props):curElem.css(props)}},jQuery.fn.extend({offset:function(options){if(arguments.length)return void 0===options?this:this.each(function(i){jQuery.offset.setOffset(this,options,i)});var docElem,win,elem=this[0],box={top:0,left:0},doc=elem&&elem.ownerDocument;if(doc)return docElem=doc.documentElement,jQuery.contains(docElem,elem)?(void 0!==elem.getBoundingClientRect&&(box=elem.getBoundingClientRect()),win=getWindow(doc),{top:box.top+win.pageYOffset-docElem.clientTop,left:box.left+win.pageXOffset-docElem.clientLeft}):box},position:function(){if(this[0]){var offsetParent,offset,elem=this[0],parentOffset={top:0,left:0};return"fixed"===jQuery.css(elem,"position")?offset=elem.getBoundingClientRect():(offsetParent=this.offsetParent(),offset=this.offset(),jQuery.nodeName(offsetParent[0],"html")||(parentOffset=offsetParent.offset()),parentOffset.top+=jQuery.css(offsetParent[0],"borderTopWidth",!0),parentOffset.left+=jQuery.css(offsetParent[0],"borderLeftWidth",!0)),{top:offset.top-parentOffset.top-jQuery.css(elem,"marginTop",!0),left:offset.left-parentOffset.left-jQuery.css(elem,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var offsetParent=this.offsetParent||docElem;offsetParent&&!jQuery.nodeName(offsetParent,"html")&&"static"===jQuery.css(offsetParent,"position");)offsetParent=offsetParent.offsetParent;return offsetParent||docElem})}}),jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(method,prop){var top="pageYOffset"===prop;jQuery.fn[method]=function(val){return access(this,function(elem,method,val){var win=getWindow(elem);if(void 0===val)return win?win[prop]:elem[method];win?win.scrollTo(top?window.pageXOffset:val,top?val:window.pageYOffset):elem[method]=val},method,val,arguments.length,null)}}),jQuery.each(["top","left"],function(i,prop){jQuery.cssHooks[prop]=addGetHookIf(support.pixelPosition,function(elem,computed){if(computed)return computed=curCSS(elem,prop),rnumnonpx.test(computed)?jQuery(elem).position()[prop]+"px":computed})}),jQuery.each({Height:"height",Width:"width"},function(name,type){jQuery.each({padding:"inner"+name,content:type,"":"outer"+name},function(defaultExtra,funcName){jQuery.fn[funcName]=function(margin,value){var chainable=arguments.length&&(defaultExtra||"boolean"!=typeof margin),extra=defaultExtra||(!0===margin||!0===value?"margin":"border");return access(this,function(elem,type,value){var doc;return jQuery.isWindow(elem)?elem.document.documentElement["client"+name]:9===elem.nodeType?(doc=elem.documentElement,Math.max(elem.body["scroll"+name],doc["scroll"+name],elem.body["offset"+name],doc["offset"+name],doc["client"+name])):void 0===value?jQuery.css(elem,type,extra):jQuery.style(elem,type,value,extra)},type,chainable?margin:void 0,chainable,null)}})}),jQuery.fn.size=function(){return this.length},jQuery.fn.andSelf=jQuery.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return jQuery});var _jQuery=window.jQuery,_$=window.$;return jQuery.noConflict=function(deep){return window.$===jQuery&&(window.$=_$),deep&&window.jQuery===jQuery&&(window.jQuery=_jQuery),jQuery},void 0===noGlobal&&(window.jQuery=window.$=jQuery),jQuery}),void 0===jQuery){var jQuery;jQuery="function"==typeof require?$=require("jquery"):$}jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(a,b,c,d,e){return jQuery.easing[jQuery.easing.def](a,b,c,d,e)},easeInQuad:function(a,b,c,d,e){return d*(b/=e)*b+c},easeOutQuad:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c},easeInOutQuad:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b+c:-d/2*(--b*(b-2)-1)+c},easeInCubic:function(a,b,c,d,e){return d*(b/=e)*b*b+c},easeOutCubic:function(a,b,c,d,e){return d*((b=b/e-1)*b*b+1)+c},easeInOutCubic:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b+c:d/2*((b-=2)*b*b+2)+c},easeInQuart:function(a,b,c,d,e){return d*(b/=e)*b*b*b+c},easeOutQuart:function(a,b,c,d,e){return-d*((b=b/e-1)*b*b*b-1)+c},easeInOutQuart:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b+c:-d/2*((b-=2)*b*b*b-2)+c},easeInQuint:function(a,b,c,d,e){return d*(b/=e)*b*b*b*b+c},easeOutQuint:function(a,b,c,d,e){return d*((b=b/e-1)*b*b*b*b+1)+c},easeInOutQuint:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b*b+c:d/2*((b-=2)*b*b*b*b+2)+c},easeInSine:function(a,b,c,d,e){return-d*Math.cos(b/e*(Math.PI/2))+d+c},easeOutSine:function(a,b,c,d,e){return d*Math.sin(b/e*(Math.PI/2))+c},easeInOutSine:function(a,b,c,d,e){return-d/2*(Math.cos(Math.PI*b/e)-1)+c},easeInExpo:function(a,b,c,d,e){return 0==b?c:d*Math.pow(2,10*(b/e-1))+c},easeOutExpo:function(a,b,c,d,e){return b==e?c+d:d*(1-Math.pow(2,-10*b/e))+c},easeInOutExpo:function(a,b,c,d,e){return 0==b?c:b==e?c+d:(b/=e/2)<1?d/2*Math.pow(2,10*(b-1))+c:d/2*(2-Math.pow(2,-10*--b))+c},easeInCirc:function(a,b,c,d,e){return-d*(Math.sqrt(1-(b/=e)*b)-1)+c},easeOutCirc:function(a,b,c,d,e){return d*Math.sqrt(1-(b=b/e-1)*b)+c},easeInOutCirc:function(a,b,c,d,e){return(b/=e/2)<1?-d/2*(Math.sqrt(1-b*b)-1)+c:d/2*(Math.sqrt(1-(b-=2)*b)+1)+c},easeInElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(0==b)return c;if(1==(b/=e))return c+d;if(g||(g=.3*e),h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return-h*Math.pow(2,10*(b-=1))*Math.sin((b*e-f)*(2*Math.PI)/g)+c},easeOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(0==b)return c;if(1==(b/=e))return c+d;if(g||(g=.3*e),h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return h*Math.pow(2,-10*b)*Math.sin((b*e-f)*(2*Math.PI)/g)+d+c},easeInOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(0==b)return c;if(2==(b/=e/2))return c+d;if(g||(g=e*(.3*1.5)),h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return b<1?h*Math.pow(2,10*(b-=1))*Math.sin((b*e-f)*(2*Math.PI)/g)*-.5+c:h*Math.pow(2,-10*(b-=1))*Math.sin((b*e-f)*(2*Math.PI)/g)*.5+d+c},easeInBack:function(a,b,c,d,e,f){return void 0==f&&(f=1.70158),d*(b/=e)*b*((f+1)*b-f)+c},easeOutBack:function(a,b,c,d,e,f){return void 0==f&&(f=1.70158),d*((b=b/e-1)*b*((f+1)*b+f)+1)+c},easeInOutBack:function(a,b,c,d,e,f){return void 0==f&&(f=1.70158),(b/=e/2)<1?d/2*(b*b*((1+(f*=1.525))*b-f))+c:d/2*((b-=2)*b*((1+(f*=1.525))*b+f)+2)+c},easeInBounce:function(a,b,c,d,e){return d-jQuery.easing.easeOutBounce(a,e-b,0,d,e)+c},easeOutBounce:function(a,b,c,d,e){return(b/=e)<1/2.75?d*(7.5625*b*b)+c:b<2/2.75?d*(7.5625*(b-=1.5/2.75)*b+.75)+c:b<2.5/2.75?d*(7.5625*(b-=2.25/2.75)*b+.9375)+c:d*(7.5625*(b-=2.625/2.75)*b+.984375)+c},easeInOutBounce:function(a,b,c,d,e){return b<e/2?.5*jQuery.easing.easeInBounce(a,2*b,0,d,e)+c:.5*jQuery.easing.easeOutBounce(a,2*b-e,0,d,e)+.5*d+c}}),jQuery.extend(jQuery.easing,{easeInOutMaterial:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b+c:d/4*((b-=2)*b*b+2)+c}}),jQuery.Velocity?console.log("Velocity is already loaded. You may be needlessly importing Velocity again; note that Materialize includes Velocity."):(function(a){function b(a){var b=a.length,d=c.type(a);return"function"!==d&&!c.isWindow(a)&&(!(1!==a.nodeType||!b)||"array"===d||0===b||"number"==typeof b&&b>0&&b-1 in a)}if(!a.jQuery){var c=function(a,b){return new c.fn.init(a,b)};c.isWindow=function(a){return null!=a&&a==a.window},c.type=function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?e[g.call(a)]||"object":typeof a},c.isArray=Array.isArray||function(a){return"array"===c.type(a)},c.isPlainObject=function(a){var b;if(!a||"object"!==c.type(a)||a.nodeType||c.isWindow(a))return!1;try{if(a.constructor&&!f.call(a,"constructor")&&!f.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(d){return!1}for(b in a);return void 0===b||f.call(a,b)},c.each=function(a,c,d){var f=0,g=a.length,h=b(a);if(d){if(h)for(;g>f&&!1!==c.apply(a[f],d);f++);else for(f in a)if(!1===c.apply(a[f],d))break}else if(h)for(;g>f&&!1!==c.call(a[f],f,a[f]);f++);else for(f in a)if(!1===c.call(a[f],f,a[f]))break;return a},c.data=function(a,b,e){if(void 0===e){var f=a[c.expando],g=f&&d[f];if(void 0===b)return g;if(g&&b in g)return g[b]}else if(void 0!==b){var f=a[c.expando]||(a[c.expando]=++c.uuid);return d[f]=d[f]||{},d[f][b]=e,e}},c.removeData=function(a,b){var e=a[c.expando],f=e&&d[e];f&&c.each(b,function(a,b){delete f[b]})},c.extend=function(){var a,b,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=!1;for("boolean"==typeof h&&(k=h,h=arguments[i]||{},i++),"object"!=typeof h&&"function"!==c.type(h)&&(h={}),i===j&&(h=this,i--);j>i;i++)if(null!=(f=arguments[i]))for(e in f)a=h[e],d=f[e],h!==d&&(k&&d&&(c.isPlainObject(d)||(b=c.isArray(d)))?(b?(b=!1,g=a&&c.isArray(a)?a:[]):g=a&&c.isPlainObject(a)?a:{},h[e]=c.extend(k,g,d)):void 0!==d&&(h[e]=d));return h},c.queue=function(a,d,e){if(a){d=(d||"fx")+"queue";var g=c.data(a,d);return e?(!g||c.isArray(e)?g=c.data(a,d,function(a,c){var d=c||[];return null!=a&&(b(Object(a))?function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;)a[e++]=b[d++];if(c!==c)for(;void 0!==b[d];)a[e++]=b[d++];a.length=e}(d,"string"==typeof a?[a]:a):[].push.call(d,a)),d}(e)):g.push(e),g):g||[]}},c.dequeue=function(a,b){c.each(a.nodeType?[a]:a,function(a,d){b=b||"fx";var e=c.queue(d,b),f=e.shift();"inprogress"===f&&(f=e.shift()),f&&("fx"===b&&e.unshift("inprogress"),f.call(d,function(){c.dequeue(d,b)}))})},c.fn=c.prototype={init:function(a){if(a.nodeType)return this[0]=a,this;throw new Error("Not a DOM node.")},offset:function(){var b=this[0].getBoundingClientRect?this[0].getBoundingClientRect():{top:0,left:0};return{top:b.top+(a.pageYOffset||document.scrollTop||0)-(document.clientTop||0),left:b.left+(a.pageXOffset||document.scrollLeft||0)-(document.clientLeft||0)}},position:function(){function a(){for(var a=this.offsetParent||document;a&&"html"===!a.nodeType.toLowerCase&&"static"===a.style.position;)a=a.offsetParent;return a||document}var b=this[0],a=a.apply(b),d=this.offset(),e=/^(?:body|html)$/i.test(a.nodeName)?{top:0,left:0}:c(a).offset();return d.top-=parseFloat(b.style.marginTop)||0,d.left-=parseFloat(b.style.marginLeft)||0,a.style&&(e.top+=parseFloat(a.style.borderTopWidth)||0,e.left+=parseFloat(a.style.borderLeftWidth)||0),{top:d.top-e.top,left:d.left-e.left}}};var d={};c.expando="velocity"+(new Date).getTime(),c.uuid=0;for(var e={},f=e.hasOwnProperty,g=e.toString,h="Boolean Number String Function Array Date RegExp Object Error".split(" "),i=0;i<h.length;i++)e["[object "+h[i]+"]"]=h[i].toLowerCase();c.fn.init.prototype=c.fn,a.Velocity={Utilities:c}}}(window),function(a){"object"==typeof module&&"object"==typeof module.exports?module.exports=a():"function"==typeof define&&define.amd?define(a):a()}(function(){return function(a,b,c,d){function e(a){for(var b=-1,c=a?a.length:0,d=[];++b<c;){var e=a[b];e&&d.push(e)}return d}function f(a){return p.isWrapped(a)?a=[].slice.call(a):p.isNode(a)&&(a=[a]),a}function g(a){var b=m.data(a,"velocity");return null===b?d:b}function h(a){return function(b){return Math.round(b*a)*(1/a)}}function i(a,c,d,e){function f(a,b){return 1-3*b+3*a}function g(a,b){return 3*b-6*a}function h(a){return 3*a}function i(a,b,c){return((f(b,c)*a+g(b,c))*a+h(b))*a}function j(a,b,c){return 3*f(b,c)*a*a+2*g(b,c)*a+h(b)}function k(b,c){for(var e=0;p>e;++e){var f=j(c,a,d);if(0===f)return c;c-=(i(c,a,d)-b)/f}return c}function l(){for(var b=0;t>b;++b)x[b]=i(b*u,a,d)}function m(b,c,e){var f,g,h=0;do{g=c+(e-c)/2,f=i(g,a,d)-b,f>0?e=g:c=g}while(Math.abs(f)>r&&++h<s);return g}function n(b){for(var c=0,e=1,f=t-1;e!=f&&x[e]<=b;++e)c+=u;--e;var g=(b-x[e])/(x[e+1]-x[e]),h=c+g*u,i=j(h,a,d);return i>=q?k(b,h):0==i?h:m(b,c,c+u)}function o(){y=!0,(a!=c||d!=e)&&l()}var p=4,q=.001,r=1e-7,s=10,t=11,u=1/(t-1),v="Float32Array"in b;if(4!==arguments.length)return!1;for(var w=0;4>w;++w)if("number"!=typeof arguments[w]||isNaN(arguments[w])||!isFinite(arguments[w]))return!1;a=Math.min(a,1),d=Math.min(d,1),a=Math.max(a,0),d=Math.max(d,0);var x=v?new Float32Array(t):new Array(t),y=!1,z=function(b){return y||o(),a===c&&d===e?b:0===b?0:1===b?1:i(n(b),c,e)};z.getControlPoints=function(){return[{x:a,y:c},{x:d,y:e}]};var A="generateBezier("+[a,c,d,e]+")";return z.toString=function(){return A},z}function j(a,b){var c=a;return p.isString(a)?t.Easings[a]||(c=!1):c=p.isArray(a)&&1===a.length?h.apply(null,a):p.isArray(a)&&2===a.length?u.apply(null,a.concat([b])):!(!p.isArray(a)||4!==a.length)&&i.apply(null,a),!1===c&&(c=t.Easings[t.defaults.easing]?t.defaults.easing:s),c}function k(a){if(a){var b=(new Date).getTime(),c=t.State.calls.length;c>1e4&&(t.State.calls=e(t.State.calls));for(var f=0;c>f;f++)if(t.State.calls[f]){var h=t.State.calls[f],i=h[0],j=h[2],n=h[3],o=!!n,q=null;n||(n=t.State.calls[f][3]=b-16);for(var r=Math.min((b-n)/j.duration,1),s=0,u=i.length;u>s;s++){var w=i[s],y=w.element;if(g(y)){var z=!1;if(j.display!==d&&null!==j.display&&"none"!==j.display){if("flex"===j.display){var A=["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex"];m.each(A,function(a,b){v.setPropertyValue(y,"display",b)})}v.setPropertyValue(y,"display",j.display)}j.visibility!==d&&"hidden"!==j.visibility&&v.setPropertyValue(y,"visibility",j.visibility);for(var B in w)if("element"!==B){var C,D=w[B],E=p.isString(D.easing)?t.Easings[D.easing]:D.easing;if(1===r)C=D.endValue;else{var F=D.endValue-D.startValue;if(C=D.startValue+F*E(r,j,F),!o&&C===D.currentValue)continue}if(D.currentValue=C,"tween"===B)q=C;else{if(v.Hooks.registered[B]){var G=v.Hooks.getRoot(B),H=g(y).rootPropertyValueCache[G];H&&(D.rootPropertyValue=H)}var I=v.setPropertyValue(y,B,D.currentValue+(0===parseFloat(C)?"":D.unitType),D.rootPropertyValue,D.scrollData);v.Hooks.registered[B]&&(g(y).rootPropertyValueCache[G]=v.Normalizations.registered[G]?v.Normalizations.registered[G]("extract",null,I[1]):I[1]),"transform"===I[0]&&(z=!0)}}j.mobileHA&&g(y).transformCache.translate3d===d&&(g(y).transformCache.translate3d="(0px, 0px, 0px)",z=!0),z&&v.flushTransformCache(y)}}j.display!==d&&"none"!==j.display&&(t.State.calls[f][2].display=!1),j.visibility!==d&&"hidden"!==j.visibility&&(t.State.calls[f][2].visibility=!1),j.progress&&j.progress.call(h[1],h[1],r,Math.max(0,n+j.duration-b),n,q),1===r&&l(f)}}t.State.isTicking&&x(k)}function l(a,b){if(!t.State.calls[a])return!1;for(var c=t.State.calls[a][0],e=t.State.calls[a][1],f=t.State.calls[a][2],h=t.State.calls[a][4],i=!1,j=0,k=c.length;k>j;j++){var l=c[j].element;if(b||f.loop||("none"===f.display&&v.setPropertyValue(l,"display",f.display),"hidden"===f.visibility&&v.setPropertyValue(l,"visibility",f.visibility)),!0!==f.loop&&(m.queue(l)[1]===d||!/\.velocityQueueEntryFlag/i.test(m.queue(l)[1]))&&g(l)){g(l).isAnimating=!1,g(l).rootPropertyValueCache={};var n=!1;m.each(v.Lists.transforms3D,function(a,b){var c=/^scale/.test(b)?1:0,e=g(l).transformCache[b];g(l).transformCache[b]!==d&&new RegExp("^\\("+c+"[^.]").test(e)&&(n=!0,delete g(l).transformCache[b])}),f.mobileHA&&(n=!0,delete g(l).transformCache.translate3d),n&&v.flushTransformCache(l),v.Values.removeClass(l,"velocity-animating")}if(!b&&f.complete&&!f.loop&&j===k-1)try{f.complete.call(e,e)}catch(o){setTimeout(function(){throw o},1)}h&&!0!==f.loop&&h(e),g(l)&&!0===f.loop&&!b&&(m.each(g(l).tweensContainer,function(a,b){/^rotate/.test(a)&&360===parseFloat(b.endValue)&&(b.endValue=0,b.startValue=360),/^backgroundPosition/.test(a)&&100===parseFloat(b.endValue)&&"%"===b.unitType&&(b.endValue=0,b.startValue=100)}),t(l,"reverse",{loop:!0,delay:f.delay})),!1!==f.queue&&m.dequeue(l,f.queue)}t.State.calls[a]=!1;for(var p=0,q=t.State.calls.length;q>p;p++)if(!1!==t.State.calls[p]){i=!0;break}!1===i&&(t.State.isTicking=!1,delete t.State.calls,t.State.calls=[])}var m,n=function(){
if(c.documentMode)return c.documentMode;for(var a=7;a>4;a--){var b=c.createElement("div");if(b.innerHTML="\x3c!--[if IE "+a+"]><span></span><![endif]--\x3e",b.getElementsByTagName("span").length)return b=null,a}return d}(),o=function(){var a=0;return b.webkitRequestAnimationFrame||b.mozRequestAnimationFrame||function(b){var c,d=(new Date).getTime();return c=Math.max(0,16-(d-a)),a=d+c,setTimeout(function(){b(d+c)},c)}}(),p={isString:function(a){return"string"==typeof a},isArray:Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},isFunction:function(a){return"[object Function]"===Object.prototype.toString.call(a)},isNode:function(a){return a&&a.nodeType},isNodeList:function(a){return"object"==typeof a&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(Object.prototype.toString.call(a))&&a.length!==d&&(0===a.length||"object"==typeof a[0]&&a[0].nodeType>0)},isWrapped:function(a){return a&&(a.jquery||b.Zepto&&b.Zepto.zepto.isZ(a))},isSVG:function(a){return b.SVGElement&&a instanceof b.SVGElement},isEmptyObject:function(a){for(var b in a)return!1;return!0}},q=!1;if(a.fn&&a.fn.jquery?(m=a,q=!0):m=b.Velocity.Utilities,8>=n&&!q)throw new Error("Velocity: IE8 and below require jQuery to be loaded before Velocity.");if(7>=n)return void(jQuery.fn.velocity=jQuery.fn.animate);var r=400,s="swing",t={State:{isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),isAndroid:/Android/i.test(navigator.userAgent),isGingerbread:/Android 2\.3\.[3-7]/i.test(navigator.userAgent),isChrome:b.chrome,isFirefox:/Firefox/i.test(navigator.userAgent),prefixElement:c.createElement("div"),prefixMatches:{},scrollAnchor:null,scrollPropertyLeft:null,scrollPropertyTop:null,isTicking:!1,calls:[]},CSS:{},Utilities:m,Redirects:{},Easings:{},Promise:b.Promise,defaults:{queue:"",duration:r,easing:s,begin:d,complete:d,progress:d,display:d,visibility:d,loop:!1,delay:!1,mobileHA:!0,_cacheValues:!0},init:function(a){m.data(a,"velocity",{isSVG:p.isSVG(a),isAnimating:!1,computedStyle:null,tweensContainer:null,rootPropertyValueCache:{},transformCache:{}})},hook:null,mock:!1,version:{major:1,minor:2,patch:2},debug:!1};b.pageYOffset!==d?(t.State.scrollAnchor=b,t.State.scrollPropertyLeft="pageXOffset",t.State.scrollPropertyTop="pageYOffset"):(t.State.scrollAnchor=c.documentElement||c.body.parentNode||c.body,t.State.scrollPropertyLeft="scrollLeft",t.State.scrollPropertyTop="scrollTop");var u=function(){function a(a){return-a.tension*a.x-a.friction*a.v}function b(b,c,d){var e={x:b.x+d.dx*c,v:b.v+d.dv*c,tension:b.tension,friction:b.friction};return{dx:e.v,dv:a(e)}}function c(c,d){var e={dx:c.v,dv:a(c)},f=b(c,.5*d,e),g=b(c,.5*d,f),h=b(c,d,g),i=1/6*(e.dx+2*(f.dx+g.dx)+h.dx),j=1/6*(e.dv+2*(f.dv+g.dv)+h.dv);return c.x=c.x+i*d,c.v=c.v+j*d,c}return function d(a,b,e){var f,g,h,i={x:-1,v:0,tension:null,friction:null},j=[0],k=0;for(a=parseFloat(a)||500,b=parseFloat(b)||20,e=e||null,i.tension=a,i.friction=b,f=null!==e,f?(k=d(a,b),g=k/e*.016):g=.016;h=c(h||i,g),j.push(1+h.x),k+=16,Math.abs(h.x)>1e-4&&Math.abs(h.v)>1e-4;);return f?function(a){return j[a*(j.length-1)|0]}:k}}();t.Easings={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},spring:function(a){return 1-Math.cos(4.5*a*Math.PI)*Math.exp(6*-a)}},m.each([["ease",[.25,.1,.25,1]],["ease-in",[.42,0,1,1]],["ease-out",[0,0,.58,1]],["ease-in-out",[.42,0,.58,1]],["easeInSine",[.47,0,.745,.715]],["easeOutSine",[.39,.575,.565,1]],["easeInOutSine",[.445,.05,.55,.95]],["easeInQuad",[.55,.085,.68,.53]],["easeOutQuad",[.25,.46,.45,.94]],["easeInOutQuad",[.455,.03,.515,.955]],["easeInCubic",[.55,.055,.675,.19]],["easeOutCubic",[.215,.61,.355,1]],["easeInOutCubic",[.645,.045,.355,1]],["easeInQuart",[.895,.03,.685,.22]],["easeOutQuart",[.165,.84,.44,1]],["easeInOutQuart",[.77,0,.175,1]],["easeInQuint",[.755,.05,.855,.06]],["easeOutQuint",[.23,1,.32,1]],["easeInOutQuint",[.86,0,.07,1]],["easeInExpo",[.95,.05,.795,.035]],["easeOutExpo",[.19,1,.22,1]],["easeInOutExpo",[1,0,0,1]],["easeInCirc",[.6,.04,.98,.335]],["easeOutCirc",[.075,.82,.165,1]],["easeInOutCirc",[.785,.135,.15,.86]]],function(a,b){t.Easings[b[0]]=i.apply(null,b[1])});var v=t.CSS={RegEx:{isHex:/^#([A-f\d]{3}){1,2}$/i,valueUnwrap:/^[A-z]+\((.*)\)$/i,wrappedValueAlreadyExtracted:/[0-9.]+ [0-9.]+ [0-9.]+( [0-9.]+)?/,valueSplit:/([A-z]+\(.+\))|(([A-z0-9#-.]+?)(?=\s|$))/gi},Lists:{colors:["fill","stroke","stopColor","color","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","outlineColor"],transformsBase:["translateX","translateY","scale","scaleX","scaleY","skewX","skewY","rotateZ"],transforms3D:["transformPerspective","translateZ","scaleZ","rotateX","rotateY"]},Hooks:{templates:{textShadow:["Color X Y Blur","black 0px 0px 0px"],boxShadow:["Color X Y Blur Spread","black 0px 0px 0px 0px"],clip:["Top Right Bottom Left","0px 0px 0px 0px"],backgroundPosition:["X Y","0% 0%"],transformOrigin:["X Y Z","50% 50% 0px"],perspectiveOrigin:["X Y","50% 50%"]},registered:{},register:function(){for(var a=0;a<v.Lists.colors.length;a++){var b="color"===v.Lists.colors[a]?"0 0 0 1":"255 255 255 1";v.Hooks.templates[v.Lists.colors[a]]=["Red Green Blue Alpha",b]}var c,d,e;if(n)for(c in v.Hooks.templates){d=v.Hooks.templates[c],e=d[0].split(" ");var f=d[1].match(v.RegEx.valueSplit);"Color"===e[0]&&(e.push(e.shift()),f.push(f.shift()),v.Hooks.templates[c]=[e.join(" "),f.join(" ")])}for(c in v.Hooks.templates){d=v.Hooks.templates[c],e=d[0].split(" ");for(var a in e){var g=c+e[a],h=a;v.Hooks.registered[g]=[c,h]}}},getRoot:function(a){var b=v.Hooks.registered[a];return b?b[0]:a},cleanRootPropertyValue:function(a,b){return v.RegEx.valueUnwrap.test(b)&&(b=b.match(v.RegEx.valueUnwrap)[1]),v.Values.isCSSNullValue(b)&&(b=v.Hooks.templates[a][1]),b},extractValue:function(a,b){var c=v.Hooks.registered[a];if(c){var d=c[0],e=c[1];return b=v.Hooks.cleanRootPropertyValue(d,b),b.toString().match(v.RegEx.valueSplit)[e]}return b},injectValue:function(a,b,c){var d=v.Hooks.registered[a];if(d){var e,g=d[0],h=d[1];return c=v.Hooks.cleanRootPropertyValue(g,c),e=c.toString().match(v.RegEx.valueSplit),e[h]=b,e.join(" ")}return c}},Normalizations:{registered:{clip:function(a,b,c){switch(a){case"name":return"clip";case"extract":var d;return v.RegEx.wrappedValueAlreadyExtracted.test(c)?d=c:(d=c.toString().match(v.RegEx.valueUnwrap),d=d?d[1].replace(/,(\s+)?/g," "):c),d;case"inject":return"rect("+c+")"}},blur:function(a,b,c){switch(a){case"name":return t.State.isFirefox?"filter":"-webkit-filter";case"extract":var d=parseFloat(c);if(!d&&0!==d){var e=c.toString().match(/blur\(([0-9]+[A-z]+)\)/i);d=e?e[1]:0}return d;case"inject":return parseFloat(c)?"blur("+c+")":"none"}},opacity:function(a,b,c){if(8>=n)switch(a){case"name":return"filter";case"extract":var d=c.toString().match(/alpha\(opacity=(.*)\)/i);return c=d?d[1]/100:1;case"inject":return b.style.zoom=1,parseFloat(c)>=1?"":"alpha(opacity="+parseInt(100*parseFloat(c),10)+")"}else switch(a){case"name":return"opacity";case"extract":case"inject":return c}}},register:function(){9>=n||t.State.isGingerbread||(v.Lists.transformsBase=v.Lists.transformsBase.concat(v.Lists.transforms3D));for(var a=0;a<v.Lists.transformsBase.length;a++)!function(){var b=v.Lists.transformsBase[a];v.Normalizations.registered[b]=function(a,c,e){switch(a){case"name":return"transform";case"extract":return g(c)===d||g(c).transformCache[b]===d?/^scale/i.test(b)?1:0:g(c).transformCache[b].replace(/[()]/g,"");case"inject":var f=!1;switch(b.substr(0,b.length-1)){case"translate":f=!/(%|px|em|rem|vw|vh|\d)$/i.test(e);break;case"scal":case"scale":t.State.isAndroid&&g(c).transformCache[b]===d&&1>e&&(e=1),f=!/(\d)$/i.test(e);break;case"skew":f=!/(deg|\d)$/i.test(e);break;case"rotate":f=!/(deg|\d)$/i.test(e)}return f||(g(c).transformCache[b]="("+e+")"),g(c).transformCache[b]}}}();for(var a=0;a<v.Lists.colors.length;a++)!function(){var b=v.Lists.colors[a];v.Normalizations.registered[b]=function(a,c,e){switch(a){case"name":return b;case"extract":var f;if(v.RegEx.wrappedValueAlreadyExtracted.test(e))f=e;else{var g,h={black:"rgb(0, 0, 0)",blue:"rgb(0, 0, 255)",gray:"rgb(128, 128, 128)",green:"rgb(0, 128, 0)",red:"rgb(255, 0, 0)",white:"rgb(255, 255, 255)"};/^[A-z]+$/i.test(e)?g=h[e]!==d?h[e]:h.black:v.RegEx.isHex.test(e)?g="rgb("+v.Values.hexToRgb(e).join(" ")+")":/^rgba?\(/i.test(e)||(g=h.black),f=(g||e).toString().match(v.RegEx.valueUnwrap)[1].replace(/,(\s+)?/g," ")}return 8>=n||3!==f.split(" ").length||(f+=" 1"),f;case"inject":return 8>=n?4===e.split(" ").length&&(e=e.split(/\s+/).slice(0,3).join(" ")):3===e.split(" ").length&&(e+=" 1"),(8>=n?"rgb":"rgba")+"("+e.replace(/\s+/g,",").replace(/\.(\d)+(?=,)/g,"")+")"}}}()}},Names:{camelCase:function(a){return a.replace(/-(\w)/g,function(a,b){return b.toUpperCase()})},SVGAttribute:function(a){var b="width|height|x|y|cx|cy|r|rx|ry|x1|x2|y1|y2";return(n||t.State.isAndroid&&!t.State.isChrome)&&(b+="|transform"),new RegExp("^("+b+")$","i").test(a)},prefixCheck:function(a){if(t.State.prefixMatches[a])return[t.State.prefixMatches[a],!0];for(var b=["","Webkit","Moz","ms","O"],c=0,d=b.length;d>c;c++){var e;if(e=0===c?a:b[c]+a.replace(/^\w/,function(a){return a.toUpperCase()}),p.isString(t.State.prefixElement.style[e]))return t.State.prefixMatches[a]=e,[e,!0]}return[a,!1]}},Values:{hexToRgb:function(a){var b,d=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i;return a=a.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(a,b,c,d){return b+b+c+c+d+d}),b=d.exec(a),b?[parseInt(b[1],16),parseInt(b[2],16),parseInt(b[3],16)]:[0,0,0]},isCSSNullValue:function(a){return 0==a||/^(none|auto|transparent|(rgba\(0, ?0, ?0, ?0\)))$/i.test(a)},getUnitType:function(a){return/^(rotate|skew)/i.test(a)?"deg":/(^(scale|scaleX|scaleY|scaleZ|alpha|flexGrow|flexHeight|zIndex|fontWeight)$)|((opacity|red|green|blue|alpha)$)/i.test(a)?"":"px"},getDisplayType:function(a){var b=a&&a.tagName.toString().toLowerCase();return/^(b|big|i|small|tt|abbr|acronym|cite|code|dfn|em|kbd|strong|samp|var|a|bdo|br|img|map|object|q|script|span|sub|sup|button|input|label|select|textarea)$/i.test(b)?"inline":/^(li)$/i.test(b)?"list-item":/^(tr)$/i.test(b)?"table-row":/^(table)$/i.test(b)?"table":/^(tbody)$/i.test(b)?"table-row-group":"block"},addClass:function(a,b){a.classList?a.classList.add(b):a.className+=(a.className.length?" ":"")+b},removeClass:function(a,b){a.classList?a.classList.remove(b):a.className=a.className.toString().replace(new RegExp("(^|\\s)"+b.split(" ").join("|")+"(\\s|$)","gi")," ")}},getPropertyValue:function(a,c,e,f){function h(a,c){function e(){j&&v.setPropertyValue(a,"display","none")}var i=0;if(8>=n)i=m.css(a,c);else{var j=!1;if(/^(width|height)$/.test(c)&&0===v.getPropertyValue(a,"display")&&(j=!0,v.setPropertyValue(a,"display",v.Values.getDisplayType(a))),!f){if("height"===c&&"border-box"!==v.getPropertyValue(a,"boxSizing").toString().toLowerCase()){var k=a.offsetHeight-(parseFloat(v.getPropertyValue(a,"borderTopWidth"))||0)-(parseFloat(v.getPropertyValue(a,"borderBottomWidth"))||0)-(parseFloat(v.getPropertyValue(a,"paddingTop"))||0)-(parseFloat(v.getPropertyValue(a,"paddingBottom"))||0);return e(),k}if("width"===c&&"border-box"!==v.getPropertyValue(a,"boxSizing").toString().toLowerCase()){var l=a.offsetWidth-(parseFloat(v.getPropertyValue(a,"borderLeftWidth"))||0)-(parseFloat(v.getPropertyValue(a,"borderRightWidth"))||0)-(parseFloat(v.getPropertyValue(a,"paddingLeft"))||0)-(parseFloat(v.getPropertyValue(a,"paddingRight"))||0);return e(),l}}var o;o=g(a)===d?b.getComputedStyle(a,null):g(a).computedStyle?g(a).computedStyle:g(a).computedStyle=b.getComputedStyle(a,null),"borderColor"===c&&(c="borderTopColor"),i=9===n&&"filter"===c?o.getPropertyValue(c):o[c],(""===i||null===i)&&(i=a.style[c]),e()}if("auto"===i&&/^(top|right|bottom|left)$/i.test(c)){var p=h(a,"position");("fixed"===p||"absolute"===p&&/top|left/i.test(c))&&(i=m(a).position()[c]+"px")}return i}var i;if(v.Hooks.registered[c]){var j=c,k=v.Hooks.getRoot(j);e===d&&(e=v.getPropertyValue(a,v.Names.prefixCheck(k)[0])),v.Normalizations.registered[k]&&(e=v.Normalizations.registered[k]("extract",a,e)),i=v.Hooks.extractValue(j,e)}else if(v.Normalizations.registered[c]){var l,o;l=v.Normalizations.registered[c]("name",a),"transform"!==l&&(o=h(a,v.Names.prefixCheck(l)[0]),v.Values.isCSSNullValue(o)&&v.Hooks.templates[c]&&(o=v.Hooks.templates[c][1])),i=v.Normalizations.registered[c]("extract",a,o)}if(!/^[\d-]/.test(i))if(g(a)&&g(a).isSVG&&v.Names.SVGAttribute(c))if(/^(height|width)$/i.test(c))try{i=a.getBBox()[c]}catch(p){i=0}else i=a.getAttribute(c);else i=h(a,v.Names.prefixCheck(c)[0]);return v.Values.isCSSNullValue(i)&&(i=0),t.debug>=2&&console.log("Get "+c+": "+i),i},setPropertyValue:function(a,c,d,e,f){var h=c;if("scroll"===c)f.container?f.container["scroll"+f.direction]=d:"Left"===f.direction?b.scrollTo(d,f.alternateValue):b.scrollTo(f.alternateValue,d);else if(v.Normalizations.registered[c]&&"transform"===v.Normalizations.registered[c]("name",a))v.Normalizations.registered[c]("inject",a,d),h="transform",d=g(a).transformCache[c];else{if(v.Hooks.registered[c]){var i=c,j=v.Hooks.getRoot(c);e=e||v.getPropertyValue(a,j),d=v.Hooks.injectValue(i,d,e),c=j}if(v.Normalizations.registered[c]&&(d=v.Normalizations.registered[c]("inject",a,d),c=v.Normalizations.registered[c]("name",a)),h=v.Names.prefixCheck(c)[0],8>=n)try{a.style[h]=d}catch(k){t.debug&&console.log("Browser does not support ["+d+"] for ["+h+"]")}else g(a)&&g(a).isSVG&&v.Names.SVGAttribute(c)?a.setAttribute(c,d):a.style[h]=d;t.debug>=2&&console.log("Set "+c+" ("+h+"): "+d)}return[h,d]},flushTransformCache:function(a){function b(b){return parseFloat(v.getPropertyValue(a,b))}var c="";if((n||t.State.isAndroid&&!t.State.isChrome)&&g(a).isSVG){var d={translate:[b("translateX"),b("translateY")],skewX:[b("skewX")],skewY:[b("skewY")],scale:1!==b("scale")?[b("scale"),b("scale")]:[b("scaleX"),b("scaleY")],rotate:[b("rotateZ"),0,0]};m.each(g(a).transformCache,function(a){/^translate/i.test(a)?a="translate":/^scale/i.test(a)?a="scale":/^rotate/i.test(a)&&(a="rotate"),d[a]&&(c+=a+"("+d[a].join(" ")+") ",delete d[a])})}else{var e,f;m.each(g(a).transformCache,function(b){return e=g(a).transformCache[b],"transformPerspective"===b?(f=e,!0):(9===n&&"rotateZ"===b&&(b="rotate"),void(c+=b+e+" "))}),f&&(c="perspective"+f+" "+c)}v.setPropertyValue(a,"transform",c)}};v.Hooks.register(),v.Normalizations.register(),t.hook=function(a,b,c){var e=d;return a=f(a),m.each(a,function(a,f){if(g(f)===d&&t.init(f),c===d)e===d&&(e=t.CSS.getPropertyValue(f,b));else{var h=t.CSS.setPropertyValue(f,b,c);"transform"===h[0]&&t.CSS.flushTransformCache(f),e=h}}),e};var w=function(){function a(){return h?B.promise||null:i}function e(){function a(a){function l(a,b){var c=d,e=d,g=d;return p.isArray(a)?(c=a[0],!p.isArray(a[1])&&/^[\d-]/.test(a[1])||p.isFunction(a[1])||v.RegEx.isHex.test(a[1])?g=a[1]:(p.isString(a[1])&&!v.RegEx.isHex.test(a[1])||p.isArray(a[1]))&&(e=b?a[1]:j(a[1],h.duration),a[2]!==d&&(g=a[2]))):c=a,b||(e=e||h.easing),p.isFunction(c)&&(c=c.call(f,y,x)),p.isFunction(g)&&(g=g.call(f,y,x)),[c||0,e,g]}function n(a,b){var c,d;return d=(b||"0").toString().toLowerCase().replace(/[%A-z]+$/,function(a){return c=a,""}),c||(c=v.Values.getUnitType(a)),[d,c]}if(h.begin&&0===y)try{h.begin.call(o,o)}catch(u){setTimeout(function(){throw u},1)}if("scroll"===C){var w,z,A,D=/^x$/i.test(h.axis)?"Left":"Top",E=parseFloat(h.offset)||0;h.container?p.isWrapped(h.container)||p.isNode(h.container)?(h.container=h.container[0]||h.container,w=h.container["scroll"+D],A=w+m(f).position()[D.toLowerCase()]+E):h.container=null:(w=t.State.scrollAnchor[t.State["scrollProperty"+D]],z=t.State.scrollAnchor[t.State["scrollProperty"+("Left"===D?"Top":"Left")]],A=m(f).offset()[D.toLowerCase()]+E),i={scroll:{rootPropertyValue:!1,startValue:w,currentValue:w,endValue:A,unitType:"",easing:h.easing,scrollData:{container:h.container,direction:D,alternateValue:z}},element:f},t.debug&&console.log("tweensContainer (scroll): ",i.scroll,f)}else if("reverse"===C){if(!g(f).tweensContainer)return void m.dequeue(f,h.queue);"none"===g(f).opts.display&&(g(f).opts.display="auto"),"hidden"===g(f).opts.visibility&&(g(f).opts.visibility="visible"),g(f).opts.loop=!1,g(f).opts.begin=null,g(f).opts.complete=null,s.easing||delete h.easing,s.duration||delete h.duration,h=m.extend({},g(f).opts,h);var F=m.extend(!0,{},g(f).tweensContainer);for(var G in F)if("element"!==G){var H=F[G].startValue;F[G].startValue=F[G].currentValue=F[G].endValue,F[G].endValue=H,p.isEmptyObject(s)||(F[G].easing=h.easing),t.debug&&console.log("reverse tweensContainer ("+G+"): "+JSON.stringify(F[G]),f)}i=F}else if("start"===C){var F;g(f).tweensContainer&&!0===g(f).isAnimating&&(F=g(f).tweensContainer),m.each(q,function(a,b){if(RegExp("^"+v.Lists.colors.join("$|^")+"$").test(a)){var c=l(b,!0),e=c[0],f=c[1],g=c[2];if(v.RegEx.isHex.test(e)){for(var h=["Red","Green","Blue"],i=v.Values.hexToRgb(e),j=g?v.Values.hexToRgb(g):d,k=0;k<h.length;k++){var m=[i[k]];f&&m.push(f),j!==d&&m.push(j[k]),q[a+h[k]]=m}delete q[a]}}});for(var K in q){var L=l(q[K]),M=L[0],N=L[1],O=L[2];K=v.Names.camelCase(K);var P=v.Hooks.getRoot(K),Q=!1;if(g(f).isSVG||"tween"===P||!1!==v.Names.prefixCheck(P)[1]||v.Normalizations.registered[P]!==d){(h.display!==d&&null!==h.display&&"none"!==h.display||h.visibility!==d&&"hidden"!==h.visibility)&&/opacity|filter/.test(K)&&!O&&0!==M&&(O=0),h._cacheValues&&F&&F[K]?(O===d&&(O=F[K].endValue+F[K].unitType),Q=g(f).rootPropertyValueCache[P]):v.Hooks.registered[K]?O===d?(Q=v.getPropertyValue(f,P),O=v.getPropertyValue(f,K,Q)):Q=v.Hooks.templates[P][1]:O===d&&(O=v.getPropertyValue(f,K));var R,S,T,U=!1;if(R=n(K,O),O=R[0],T=R[1],R=n(K,M),M=R[0].replace(/^([+-\/*])=/,function(a,b){return U=b,""}),S=R[1],O=parseFloat(O)||0,M=parseFloat(M)||0,"%"===S&&(/^(fontSize|lineHeight)$/.test(K)?(M/=100,S="em"):/^scale/.test(K)?(M/=100,S=""):/(Red|Green|Blue)$/i.test(K)&&(M=M/100*255,S="")),/[\/*]/.test(U))S=T;else if(T!==S&&0!==O)if(0===M)S=T;else{e=e||function(){var a={myParent:f.parentNode||c.body,position:v.getPropertyValue(f,"position"),fontSize:v.getPropertyValue(f,"fontSize")},d=a.position===I.lastPosition&&a.myParent===I.lastParent,e=a.fontSize===I.lastFontSize;I.lastParent=a.myParent,I.lastPosition=a.position,I.lastFontSize=a.fontSize;var h=100,i={};if(e&&d)i.emToPx=I.lastEmToPx,i.percentToPxWidth=I.lastPercentToPxWidth,i.percentToPxHeight=I.lastPercentToPxHeight;else{var j=g(f).isSVG?c.createElementNS("http://www.w3.org/2000/svg","rect"):c.createElement("div");t.init(j),a.myParent.appendChild(j),m.each(["overflow","overflowX","overflowY"],function(a,b){t.CSS.setPropertyValue(j,b,"hidden")}),t.CSS.setPropertyValue(j,"position",a.position),t.CSS.setPropertyValue(j,"fontSize",a.fontSize),t.CSS.setPropertyValue(j,"boxSizing","content-box"),m.each(["minWidth","maxWidth","width","minHeight","maxHeight","height"],function(a,b){t.CSS.setPropertyValue(j,b,h+"%")}),t.CSS.setPropertyValue(j,"paddingLeft",h+"em"),i.percentToPxWidth=I.lastPercentToPxWidth=(parseFloat(v.getPropertyValue(j,"width",null,!0))||1)/h,i.percentToPxHeight=I.lastPercentToPxHeight=(parseFloat(v.getPropertyValue(j,"height",null,!0))||1)/h,i.emToPx=I.lastEmToPx=(parseFloat(v.getPropertyValue(j,"paddingLeft"))||1)/h,a.myParent.removeChild(j)}return null===I.remToPx&&(I.remToPx=parseFloat(v.getPropertyValue(c.body,"fontSize"))||16),null===I.vwToPx&&(I.vwToPx=parseFloat(b.innerWidth)/100,I.vhToPx=parseFloat(b.innerHeight)/100),i.remToPx=I.remToPx,i.vwToPx=I.vwToPx,i.vhToPx=I.vhToPx,t.debug>=1&&console.log("Unit ratios: "+JSON.stringify(i),f),i}();var V=/margin|padding|left|right|width|text|word|letter/i.test(K)||/X$/.test(K)||"x"===K?"x":"y";switch(T){case"%":O*="x"===V?e.percentToPxWidth:e.percentToPxHeight;break;case"px":break;default:O*=e[T+"ToPx"]}switch(S){case"%":O*=1/("x"===V?e.percentToPxWidth:e.percentToPxHeight);break;case"px":break;default:O*=1/e[S+"ToPx"]}}switch(U){case"+":M=O+M;break;case"-":M=O-M;break;case"*":M*=O;break;case"/":M=O/M}i[K]={rootPropertyValue:Q,startValue:O,currentValue:O,endValue:M,unitType:S,easing:N},t.debug&&console.log("tweensContainer ("+K+"): "+JSON.stringify(i[K]),f)}else t.debug&&console.log("Skipping ["+P+"] due to a lack of browser support.")}i.element=f}i.element&&(v.Values.addClass(f,"velocity-animating"),J.push(i),""===h.queue&&(g(f).tweensContainer=i,g(f).opts=h),g(f).isAnimating=!0,y===x-1?(t.State.calls.push([J,o,h,null,B.resolver]),!1===t.State.isTicking&&(t.State.isTicking=!0,k())):y++)}var e,f=this,h=m.extend({},t.defaults,s),i={};switch(g(f)===d&&t.init(f),parseFloat(h.delay)&&!1!==h.queue&&m.queue(f,h.queue,function(a){t.velocityQueueEntryFlag=!0,g(f).delayTimer={setTimeout:setTimeout(a,parseFloat(h.delay)),next:a}}),h.duration.toString().toLowerCase()){case"fast":h.duration=200;break;case"normal":h.duration=r;break;case"slow":h.duration=600;break;default:h.duration=parseFloat(h.duration)||1}!1!==t.mock&&(!0===t.mock?h.duration=h.delay=1:(h.duration*=parseFloat(t.mock)||1,h.delay*=parseFloat(t.mock)||1)),h.easing=j(h.easing,h.duration),h.begin&&!p.isFunction(h.begin)&&(h.begin=null),h.progress&&!p.isFunction(h.progress)&&(h.progress=null),h.complete&&!p.isFunction(h.complete)&&(h.complete=null),h.display!==d&&null!==h.display&&(h.display=h.display.toString().toLowerCase(),"auto"===h.display&&(h.display=t.CSS.Values.getDisplayType(f))),h.visibility!==d&&null!==h.visibility&&(h.visibility=h.visibility.toString().toLowerCase()),h.mobileHA=h.mobileHA&&t.State.isMobile&&!t.State.isGingerbread,!1===h.queue?h.delay?setTimeout(a,h.delay):a():m.queue(f,h.queue,function(b,c){return!0===c?(B.promise&&B.resolver(o),!0):(t.velocityQueueEntryFlag=!0,void a(b))}),""!==h.queue&&"fx"!==h.queue||"inprogress"===m.queue(f)[0]||m.dequeue(f)}var h,i,n,o,q,s,u=arguments[0]&&(arguments[0].p||m.isPlainObject(arguments[0].properties)&&!arguments[0].properties.names||p.isString(arguments[0].properties));if(p.isWrapped(this)?(h=!1,n=0,o=this,i=this):(h=!0,n=1,o=u?arguments[0].elements||arguments[0].e:arguments[0]),o=f(o)){u?(q=arguments[0].properties||arguments[0].p,s=arguments[0].options||arguments[0].o):(q=arguments[n],s=arguments[n+1]);var x=o.length,y=0;if(!/^(stop|finish)$/i.test(q)&&!m.isPlainObject(s)){var z=n+1;s={};for(var A=z;A<arguments.length;A++)p.isArray(arguments[A])||!/^(fast|normal|slow)$/i.test(arguments[A])&&!/^\d/.test(arguments[A])?p.isString(arguments[A])||p.isArray(arguments[A])?s.easing=arguments[A]:p.isFunction(arguments[A])&&(s.complete=arguments[A]):s.duration=arguments[A]}var B={promise:null,resolver:null,rejecter:null};h&&t.Promise&&(B.promise=new t.Promise(function(a,b){B.resolver=a,B.rejecter=b}));var C;switch(q){case"scroll":C="scroll";break;case"reverse":C="reverse";break;case"finish":case"stop":m.each(o,function(a,b){g(b)&&g(b).delayTimer&&(clearTimeout(g(b).delayTimer.setTimeout),g(b).delayTimer.next&&g(b).delayTimer.next(),delete g(b).delayTimer)});var D=[];return m.each(t.State.calls,function(a,b){b&&m.each(b[1],function(c,e){var f=s===d?"":s;return!0!==f&&b[2].queue!==f&&(s!==d||!1!==b[2].queue)||void m.each(o,function(c,d){d===e&&((!0===s||p.isString(s))&&(m.each(m.queue(d,p.isString(s)?s:""),function(a,b){p.isFunction(b)&&b(null,!0)}),m.queue(d,p.isString(s)?s:"",[])),"stop"===q?(g(d)&&g(d).tweensContainer&&!1!==f&&m.each(g(d).tweensContainer,function(a,b){b.endValue=b.currentValue}),D.push(a)):"finish"===q&&(b[2].duration=1))})})}),"stop"===q&&(m.each(D,function(a,b){l(b,!0)}),B.promise&&B.resolver(o)),a();default:if(!m.isPlainObject(q)||p.isEmptyObject(q)){if(p.isString(q)&&t.Redirects[q]){var E=m.extend({},s),F=E.duration,G=E.delay||0;return!0===E.backwards&&(o=m.extend(!0,[],o).reverse()),m.each(o,function(a,b){parseFloat(E.stagger)?E.delay=G+parseFloat(E.stagger)*a:p.isFunction(E.stagger)&&(E.delay=G+E.stagger.call(b,a,x)),E.drag&&(E.duration=parseFloat(F)||(/^(callout|transition)/.test(q)?1e3:r),E.duration=Math.max(E.duration*(E.backwards?1-a/x:(a+1)/x),.75*E.duration,200)),t.Redirects[q].call(b,b,E||{},a,x,o,B.promise?B:d)}),a()}var H="Velocity: First argument ("+q+") was not a property map, a known action, or a registered redirect. Aborting.";return B.promise?B.rejecter(new Error(H)):console.log(H),a()}C="start"}var I={lastParent:null,lastPosition:null,lastFontSize:null,lastPercentToPxWidth:null,lastPercentToPxHeight:null,lastEmToPx:null,remToPx:null,vwToPx:null,vhToPx:null},J=[];m.each(o,function(a,b){p.isNode(b)&&e.call(b)});var K,E=m.extend({},t.defaults,s);if(E.loop=parseInt(E.loop),K=2*E.loop-1,E.loop)for(var L=0;K>L;L++){var M={delay:E.delay,progress:E.progress};L===K-1&&(M.display=E.display,M.visibility=E.visibility,M.complete=E.complete),w(o,"reverse",M)}return a()}};t=m.extend(w,t),t.animate=w;var x=b.requestAnimationFrame||o;return t.State.isMobile||c.hidden===d||c.addEventListener("visibilitychange",function(){c.hidden?(x=function(a){return setTimeout(function(){a(!0)},16)},k()):x=b.requestAnimationFrame||o}),a.Velocity=t,a!==b&&(a.fn.velocity=w,a.fn.velocity.defaults=t.defaults),m.each(["Down","Up"],function(a,b){t.Redirects["slide"+b]=function(a,c,e,f,g,h){var i=m.extend({},c),j=i.begin,k=i.complete,l={height:"",marginTop:"",marginBottom:"",paddingTop:"",paddingBottom:""},n={};i.display===d&&(i.display="Down"===b?"inline"===t.CSS.Values.getDisplayType(a)?"inline-block":"block":"none"),i.begin=function(){j&&j.call(g,g);for(var c in l){n[c]=a.style[c];var d=t.CSS.getPropertyValue(a,c);l[c]="Down"===b?[d,0]:[0,d]}n.overflow=a.style.overflow,a.style.overflow="hidden"},i.complete=function(){for(var b in n)a.style[b]=n[b];k&&k.call(g,g),h&&h.resolver(g)},t(a,l,i)}}),m.each(["In","Out"],function(a,b){t.Redirects["fade"+b]=function(a,c,e,f,g,h){var i=m.extend({},c),j={opacity:"In"===b?1:0},k=i.complete;i.complete=e!==f-1?i.begin=null:function(){k&&k.call(g,g),h&&h.resolver(g)},i.display===d&&(i.display="In"===b?"auto":"none"),t(this,j,i)}}),t}(window.jQuery||window.Zepto||window,window,document)})),function(a,b,c,d){"use strict";function e(a,b,c){return setTimeout(k(a,c),b)}function f(a,b,c){return!!Array.isArray(a)&&(g(a,c[b],c),!0)}function g(a,b,c){var e;if(a)if(a.forEach)a.forEach(b,c);else if(a.length!==d)for(e=0;e<a.length;)b.call(c,a[e],e,a),e++;else for(e in a)a.hasOwnProperty(e)&&b.call(c,a[e],e,a)}function h(a,b,c){for(var e=Object.keys(b),f=0;f<e.length;)(!c||c&&a[e[f]]===d)&&(a[e[f]]=b[e[f]]),f++;return a}function i(a,b){return h(a,b,!0)}function j(a,b,c){var d,e=b.prototype;d=a.prototype=Object.create(e),d.constructor=a,d._super=e,c&&h(d,c)}function k(a,b){return function(){return a.apply(b,arguments)}}function l(a,b){return typeof a==ka?a.apply(b?b[0]||d:d,b):a}function m(a,b){return a===d?b:a}function n(a,b,c){g(r(b),function(b){a.addEventListener(b,c,!1)})}function o(a,b,c){g(r(b),function(b){a.removeEventListener(b,c,!1)})}function p(a,b){for(;a;){if(a==b)return!0;a=a.parentNode}return!1}function q(a,b){return a.indexOf(b)>-1}function r(a){return a.trim().split(/\s+/g)}function s(a,b,c){if(a.indexOf&&!c)return a.indexOf(b);for(var d=0;d<a.length;){if(c&&a[d][c]==b||!c&&a[d]===b)return d;d++}return-1}function t(a){return Array.prototype.slice.call(a,0)}function u(a,b,c){for(var d=[],e=[],f=0;f<a.length;){var g=b?a[f][b]:a[f];s(e,g)<0&&d.push(a[f]),e[f]=g,f++}return c&&(d=b?d.sort(function(a,c){return a[b]>c[b]}):d.sort()),d}function v(a,b){for(var c,e,f=b[0].toUpperCase()+b.slice(1),g=0;g<ia.length;){if(c=ia[g],(e=c?c+f:b)in a)return e;g++}return d}function w(){return oa++}function x(a){var b=a.ownerDocument;return b.defaultView||b.parentWindow}function y(a,b){var c=this;this.manager=a,this.callback=b,this.element=a.element,this.target=a.options.inputTarget,this.domHandler=function(b){l(a.options.enable,[a])&&c.handler(b)},this.init()}function z(a){var c=a.options.inputClass;return new(c||(ra?N:sa?Q:qa?S:M))(a,A)}function A(a,b,c){var d=c.pointers.length,e=c.changedPointers.length,f=b&ya&&0==d-e,g=b&(Aa|Ba)&&0==d-e;c.isFirst=!!f,c.isFinal=!!g,f&&(a.session={}),c.eventType=b,B(a,c),a.emit("hammer.input",c),a.recognize(c),a.session.prevInput=c}function B(a,b){var c=a.session,d=b.pointers,e=d.length;c.firstInput||(c.firstInput=E(b)),e>1&&!c.firstMultiple?c.firstMultiple=E(b):1===e&&(c.firstMultiple=!1);var f=c.firstInput,g=c.firstMultiple,h=g?g.center:f.center,i=b.center=F(d);b.timeStamp=na(),b.deltaTime=b.timeStamp-f.timeStamp,b.angle=J(h,i),b.distance=I(h,i),C(c,b),b.offsetDirection=H(b.deltaX,b.deltaY),b.scale=g?L(g.pointers,d):1,b.rotation=g?K(g.pointers,d):0,D(c,b);var j=a.element;p(b.srcEvent.target,j)&&(j=b.srcEvent.target),b.target=j}function C(a,b){var c=b.center,d=a.offsetDelta||{},e=a.prevDelta||{},f=a.prevInput||{};(b.eventType===ya||f.eventType===Aa)&&(e=a.prevDelta={x:f.deltaX||0,y:f.deltaY||0},d=a.offsetDelta={x:c.x,y:c.y}),b.deltaX=e.x+(c.x-d.x),b.deltaY=e.y+(c.y-d.y)}function D(a,b){var c,e,f,g,h=a.lastInterval||b,i=b.timeStamp-h.timeStamp;if(b.eventType!=Ba&&(i>xa||h.velocity===d)){var j=h.deltaX-b.deltaX,k=h.deltaY-b.deltaY,l=G(i,j,k);e=l.x,f=l.y,c=ma(l.x)>ma(l.y)?l.x:l.y,g=H(j,k),a.lastInterval=b}else c=h.velocity,e=h.velocityX,f=h.velocityY,g=h.direction;b.velocity=c,b.velocityX=e,b.velocityY=f,b.direction=g}function E(a){for(var b=[],c=0;c<a.pointers.length;)b[c]={clientX:la(a.pointers[c].clientX),clientY:la(a.pointers[c].clientY)},c++;return{timeStamp:na(),pointers:b,center:F(b),deltaX:a.deltaX,deltaY:a.deltaY}}function F(a){var b=a.length;if(1===b)return{x:la(a[0].clientX),y:la(a[0].clientY)};for(var c=0,d=0,e=0;b>e;)c+=a[e].clientX,d+=a[e].clientY,e++;return{x:la(c/b),y:la(d/b)}}function G(a,b,c){return{x:b/a||0,y:c/a||0}}function H(a,b){return a===b?Ca:ma(a)>=ma(b)?a>0?Da:Ea:b>0?Fa:Ga}function I(a,b,c){c||(c=Ka);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return Math.sqrt(d*d+e*e)}function J(a,b,c){c||(c=Ka);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return 180*Math.atan2(e,d)/Math.PI}function K(a,b){return J(b[1],b[0],La)-J(a[1],a[0],La)}function L(a,b){return I(b[0],b[1],La)/I(a[0],a[1],La)}function M(){this.evEl=Na,this.evWin=Oa,this.allow=!0,this.pressed=!1,y.apply(this,arguments)}function N(){this.evEl=Ra,this.evWin=Sa,y.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function O(){this.evTarget=Ua,this.evWin=Va,this.started=!1,y.apply(this,arguments)}function P(a,b){var c=t(a.touches),d=t(a.changedTouches);return b&(Aa|Ba)&&(c=u(c.concat(d),"identifier",!0)),[c,d]}function Q(){this.evTarget=Xa,this.targetIds={},y.apply(this,arguments)}function R(a,b){var c=t(a.touches),d=this.targetIds;if(b&(ya|za)&&1===c.length)return d[c[0].identifier]=!0,[c,c];var e,f,g=t(a.changedTouches),h=[],i=this.target;if(f=c.filter(function(a){return p(a.target,i)}),b===ya)for(e=0;e<f.length;)d[f[e].identifier]=!0,e++;for(e=0;e<g.length;)d[g[e].identifier]&&h.push(g[e]),b&(Aa|Ba)&&delete d[g[e].identifier],e++;return h.length?[u(f.concat(h),"identifier",!0),h]:void 0}function S(){y.apply(this,arguments);var a=k(this.handler,this);this.touch=new Q(this.manager,a),this.mouse=new M(this.manager,a)}function T(a,b){this.manager=a,this.set(b)}function U(a){if(q(a,bb))return bb;var b=q(a,cb),c=q(a,db);return b&&c?cb+" "+db:b||c?b?cb:db:q(a,ab)?ab:_a}function V(a){this.id=w(),this.manager=null,this.options=i(a||{},this.defaults),this.options.enable=m(this.options.enable,!0),this.state=eb,this.simultaneous={},this.requireFail=[]}function W(a){return a&jb?"cancel":a&hb?"end":a&gb?"move":a&fb?"start":""}function X(a){return a==Ga?"down":a==Fa?"up":a==Da?"left":a==Ea?"right":""}function Y(a,b){var c=b.manager;return c?c.get(a):a}function Z(){V.apply(this,arguments)}function $(){Z.apply(this,arguments),this.pX=null,this.pY=null}function _(){Z.apply(this,arguments)}function aa(){V.apply(this,arguments),this._timer=null,this._input=null}function ba(){Z.apply(this,arguments)}function ca(){Z.apply(this,arguments)}function da(){V.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ea(a,b){return b=b||{},
b.recognizers=m(b.recognizers,ea.defaults.preset),new fa(a,b)}function fa(a,b){b=b||{},this.options=i(b,ea.defaults),this.options.inputTarget=this.options.inputTarget||a,this.handlers={},this.session={},this.recognizers=[],this.element=a,this.input=z(this),this.touchAction=new T(this,this.options.touchAction),ga(this,!0),g(b.recognizers,function(a){var b=this.add(new a[0](a[1]));a[2]&&b.recognizeWith(a[2]),a[3]&&b.requireFailure(a[3])},this)}function ga(a,b){var c=a.element;g(a.options.cssProps,function(a,d){c.style[v(c.style,d)]=b?a:""})}function ha(a,c){var d=b.createEvent("Event");d.initEvent(a,!0,!0),d.gesture=c,c.target.dispatchEvent(d)}var ia=["","webkit","moz","MS","ms","o"],ja=b.createElement("div"),ka="function",la=Math.round,ma=Math.abs,na=Date.now,oa=1,pa=/mobile|tablet|ip(ad|hone|od)|android/i,qa="ontouchstart"in a,ra=v(a,"PointerEvent")!==d,sa=qa&&pa.test(navigator.userAgent),ta="touch",va="mouse",xa=25,ya=1,za=2,Aa=4,Ba=8,Ca=1,Da=2,Ea=4,Fa=8,Ga=16,Ha=Da|Ea,Ia=Fa|Ga,Ja=Ha|Ia,Ka=["x","y"],La=["clientX","clientY"];y.prototype={handler:function(){},init:function(){this.evEl&&n(this.element,this.evEl,this.domHandler),this.evTarget&&n(this.target,this.evTarget,this.domHandler),this.evWin&&n(x(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&o(this.element,this.evEl,this.domHandler),this.evTarget&&o(this.target,this.evTarget,this.domHandler),this.evWin&&o(x(this.element),this.evWin,this.domHandler)}};var Ma={mousedown:ya,mousemove:za,mouseup:Aa},Na="mousedown",Oa="mousemove mouseup";j(M,y,{handler:function(a){var b=Ma[a.type];b&ya&&0===a.button&&(this.pressed=!0),b&za&&1!==a.which&&(b=Aa),this.pressed&&this.allow&&(b&Aa&&(this.pressed=!1),this.callback(this.manager,b,{pointers:[a],changedPointers:[a],pointerType:va,srcEvent:a}))}});var Pa={pointerdown:ya,pointermove:za,pointerup:Aa,pointercancel:Ba,pointerout:Ba},Qa={2:ta,3:"pen",4:va,5:"kinect"},Ra="pointerdown",Sa="pointermove pointerup pointercancel";a.MSPointerEvent&&(Ra="MSPointerDown",Sa="MSPointerMove MSPointerUp MSPointerCancel"),j(N,y,{handler:function(a){var b=this.store,c=!1,d=a.type.toLowerCase().replace("ms",""),e=Pa[d],f=Qa[a.pointerType]||a.pointerType,g=f==ta,h=s(b,a.pointerId,"pointerId");e&ya&&(0===a.button||g)?0>h&&(b.push(a),h=b.length-1):e&(Aa|Ba)&&(c=!0),0>h||(b[h]=a,this.callback(this.manager,e,{pointers:b,changedPointers:[a],pointerType:f,srcEvent:a}),c&&b.splice(h,1))}});var Ta={touchstart:ya,touchmove:za,touchend:Aa,touchcancel:Ba},Ua="touchstart",Va="touchstart touchmove touchend touchcancel";j(O,y,{handler:function(a){var b=Ta[a.type];if(b===ya&&(this.started=!0),this.started){var c=P.call(this,a,b);b&(Aa|Ba)&&0==c[0].length-c[1].length&&(this.started=!1),this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:ta,srcEvent:a})}}});var Wa={touchstart:ya,touchmove:za,touchend:Aa,touchcancel:Ba},Xa="touchstart touchmove touchend touchcancel";j(Q,y,{handler:function(a){var b=Wa[a.type],c=R.call(this,a,b);c&&this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:ta,srcEvent:a})}}),j(S,y,{handler:function(a,b,c){var d=c.pointerType==ta,e=c.pointerType==va;if(d)this.mouse.allow=!1;else if(e&&!this.mouse.allow)return;b&(Aa|Ba)&&(this.mouse.allow=!0),this.callback(a,b,c)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Ya=v(ja.style,"touchAction"),Za=Ya!==d,$a="compute",_a="auto",ab="manipulation",bb="none",cb="pan-x",db="pan-y";T.prototype={set:function(a){a==$a&&(a=this.compute()),Za&&(this.manager.element.style[Ya]=a),this.actions=a.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var a=[];return g(this.manager.recognizers,function(b){l(b.options.enable,[b])&&(a=a.concat(b.getTouchAction()))}),U(a.join(" "))},preventDefaults:function(a){if(!Za){var b=a.srcEvent,c=a.offsetDirection;if(this.manager.session.prevented)return void b.preventDefault();var d=this.actions,e=q(d,bb),f=q(d,db),g=q(d,cb);return e||f&&c&Ha||g&&c&Ia?this.preventSrc(b):void 0}},preventSrc:function(a){this.manager.session.prevented=!0,a.preventDefault()}};var eb=1,fb=2,gb=4,hb=8,ib=hb,jb=16;V.prototype={defaults:{},set:function(a){return h(this.options,a),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(a){if(f(a,"recognizeWith",this))return this;var b=this.simultaneous;return a=Y(a,this),b[a.id]||(b[a.id]=a,a.recognizeWith(this)),this},dropRecognizeWith:function(a){return f(a,"dropRecognizeWith",this)?this:(a=Y(a,this),delete this.simultaneous[a.id],this)},requireFailure:function(a){if(f(a,"requireFailure",this))return this;var b=this.requireFail;return a=Y(a,this),-1===s(b,a)&&(b.push(a),a.requireFailure(this)),this},dropRequireFailure:function(a){if(f(a,"dropRequireFailure",this))return this;a=Y(a,this);var b=s(this.requireFail,a);return b>-1&&this.requireFail.splice(b,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(a){return!!this.simultaneous[a.id]},emit:function(a){function b(b){c.manager.emit(c.options.event+(b?W(d):""),a)}var c=this,d=this.state;hb>d&&b(!0),b(),d>=hb&&b(!0)},tryEmit:function(a){return this.canEmit()?this.emit(a):void(this.state=32)},canEmit:function(){for(var a=0;a<this.requireFail.length;){if(!(this.requireFail[a].state&(32|eb)))return!1;a++}return!0},recognize:function(a){var b=h({},a);return l(this.options.enable,[this,b])?(this.state&(ib|jb|32)&&(this.state=eb),this.state=this.process(b),void(this.state&(fb|gb|hb|jb)&&this.tryEmit(b))):(this.reset(),void(this.state=32))},process:function(){},getTouchAction:function(){},reset:function(){}},j(Z,V,{defaults:{pointers:1},attrTest:function(a){var b=this.options.pointers;return 0===b||a.pointers.length===b},process:function(a){var b=this.state,c=a.eventType,d=b&(fb|gb),e=this.attrTest(a);return d&&(c&Ba||!e)?b|jb:d||e?c&Aa?b|hb:b&fb?b|gb:fb:32}}),j($,Z,{defaults:{event:"pan",threshold:10,pointers:1,direction:Ja},getTouchAction:function(){var a=this.options.direction,b=[];return a&Ha&&b.push(db),a&Ia&&b.push(cb),b},directionTest:function(a){var b=this.options,c=!0,d=a.distance,e=a.direction,f=a.deltaX,g=a.deltaY;return e&b.direction||(b.direction&Ha?(e=0===f?Ca:0>f?Da:Ea,c=f!=this.pX,d=Math.abs(a.deltaX)):(e=0===g?Ca:0>g?Fa:Ga,c=g!=this.pY,d=Math.abs(a.deltaY))),a.direction=e,c&&d>b.threshold&&e&b.direction},attrTest:function(a){return Z.prototype.attrTest.call(this,a)&&(this.state&fb||!(this.state&fb)&&this.directionTest(a))},emit:function(a){this.pX=a.deltaX,this.pY=a.deltaY;var b=X(a.direction);b&&this.manager.emit(this.options.event+b,a),this._super.emit.call(this,a)}}),j(_,Z,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[bb]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.scale-1)>this.options.threshold||this.state&fb)},emit:function(a){if(this._super.emit.call(this,a),1!==a.scale){var b=a.scale<1?"in":"out";this.manager.emit(this.options.event+b,a)}}}),j(aa,V,{defaults:{event:"press",pointers:1,time:500,threshold:5},getTouchAction:function(){return[_a]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,f=a.deltaTime>b.time;if(this._input=a,!d||!c||a.eventType&(Aa|Ba)&&!f)this.reset();else if(a.eventType&ya)this.reset(),this._timer=e(function(){this.state=ib,this.tryEmit()},b.time,this);else if(a.eventType&Aa)return ib;return 32},reset:function(){clearTimeout(this._timer)},emit:function(a){this.state===ib&&(a&&a.eventType&Aa?this.manager.emit(this.options.event+"up",a):(this._input.timeStamp=na(),this.manager.emit(this.options.event,this._input)))}}),j(ba,Z,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[bb]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.rotation)>this.options.threshold||this.state&fb)}}),j(ca,Z,{defaults:{event:"swipe",threshold:10,velocity:.65,direction:Ha|Ia,pointers:1},getTouchAction:function(){return $.prototype.getTouchAction.call(this)},attrTest:function(a){var b,c=this.options.direction;return c&(Ha|Ia)?b=a.velocity:c&Ha?b=a.velocityX:c&Ia&&(b=a.velocityY),this._super.attrTest.call(this,a)&&c&a.direction&&a.distance>this.options.threshold&&ma(b)>this.options.velocity&&a.eventType&Aa},emit:function(a){var b=X(a.direction);b&&this.manager.emit(this.options.event+b,a),this.manager.emit(this.options.event,a)}}),j(da,V,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return[ab]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,f=a.deltaTime<b.time;if(this.reset(),a.eventType&ya&&0===this.count)return this.failTimeout();if(d&&f&&c){if(a.eventType!=Aa)return this.failTimeout();var g=!this.pTime||a.timeStamp-this.pTime<b.interval,h=!this.pCenter||I(this.pCenter,a.center)<b.posThreshold;this.pTime=a.timeStamp,this.pCenter=a.center,h&&g?this.count+=1:this.count=1,this._input=a;if(0===this.count%b.taps)return this.hasRequireFailures()?(this._timer=e(function(){this.state=ib,this.tryEmit()},b.interval,this),fb):ib}return 32},failTimeout:function(){return this._timer=e(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==ib&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ea.VERSION="2.0.4",ea.defaults={domEvents:!1,touchAction:$a,enable:!0,inputTarget:null,inputClass:null,preset:[[ba,{enable:!1}],[_,{enable:!1},["rotate"]],[ca,{direction:Ha}],[$,{direction:Ha},["swipe"]],[da],[da,{event:"doubletap",taps:2},["tap"]],[aa]],cssProps:{userSelect:"default",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};fa.prototype={set:function(a){return h(this.options,a),a.touchAction&&this.touchAction.update(),a.inputTarget&&(this.input.destroy(),this.input.target=a.inputTarget,this.input.init()),this},stop:function(a){this.session.stopped=a?2:1},recognize:function(a){var b=this.session;if(!b.stopped){this.touchAction.preventDefaults(a);var c,d=this.recognizers,e=b.curRecognizer;(!e||e&&e.state&ib)&&(e=b.curRecognizer=null);for(var f=0;f<d.length;)c=d[f],2===b.stopped||e&&c!=e&&!c.canRecognizeWith(e)?c.reset():c.recognize(a),!e&&c.state&(fb|gb|hb)&&(e=b.curRecognizer=c),f++}},get:function(a){if(a instanceof V)return a;for(var b=this.recognizers,c=0;c<b.length;c++)if(b[c].options.event==a)return b[c];return null},add:function(a){if(f(a,"add",this))return this;var b=this.get(a.options.event);return b&&this.remove(b),this.recognizers.push(a),a.manager=this,this.touchAction.update(),a},remove:function(a){if(f(a,"remove",this))return this;var b=this.recognizers;return a=this.get(a),b.splice(s(b,a),1),this.touchAction.update(),this},on:function(a,b){var c=this.handlers;return g(r(a),function(a){c[a]=c[a]||[],c[a].push(b)}),this},off:function(a,b){var c=this.handlers;return g(r(a),function(a){b?c[a].splice(s(c[a],b),1):delete c[a]}),this},emit:function(a,b){this.options.domEvents&&ha(a,b);var c=this.handlers[a]&&this.handlers[a].slice();if(c&&c.length){b.type=a,b.preventDefault=function(){b.srcEvent.preventDefault()};for(var d=0;d<c.length;)c[d](b),d++}},destroy:function(){this.element&&ga(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},h(ea,{INPUT_START:ya,INPUT_MOVE:za,INPUT_END:Aa,INPUT_CANCEL:Ba,STATE_POSSIBLE:eb,STATE_BEGAN:fb,STATE_CHANGED:gb,STATE_ENDED:hb,STATE_RECOGNIZED:ib,STATE_CANCELLED:jb,STATE_FAILED:32,DIRECTION_NONE:Ca,DIRECTION_LEFT:Da,DIRECTION_RIGHT:Ea,DIRECTION_UP:Fa,DIRECTION_DOWN:Ga,DIRECTION_HORIZONTAL:Ha,DIRECTION_VERTICAL:Ia,DIRECTION_ALL:Ja,Manager:fa,Input:y,TouchAction:T,TouchInput:Q,MouseInput:M,PointerEventInput:N,TouchMouseInput:S,SingleTouchInput:O,Recognizer:V,AttrRecognizer:Z,Tap:da,Pan:$,Swipe:ca,Pinch:_,Rotate:ba,Press:aa,on:n,off:o,each:g,merge:i,extend:h,inherit:j,bindFn:k,prefixed:v}),typeof define==ka&&define.amd?define(function(){return ea}):"undefined"!=typeof module&&module.exports?module.exports=ea:a.Hammer=ea}(window,document),function(a){"function"==typeof define&&define.amd?define(["jquery","hammerjs"],a):"object"==typeof exports?a(require("jquery"),require("hammerjs")):a(jQuery,Hammer)}(function(a,b){function c(c,d){var e=a(c);e.data("hammer")||e.data("hammer",new b(e[0],d))}a.fn.hammer=function(a){return this.each(function(){c(this,a)})},b.Manager.prototype.emit=function(b){return function(c,d){b.call(this,c,d),a(this.element).trigger({type:c,gesture:d})}}(b.Manager.prototype.emit)}),function(a){a.Package?Materialize={}:a.Materialize={}}(window),function(a){for(var b=0,c=["webkit","moz"],d=a.requestAnimationFrame,e=a.cancelAnimationFrame,f=c.length;--f>=0&&!d;)d=a[c[f]+"RequestAnimationFrame"],e=a[c[f]+"CancelRequestAnimationFrame"];d&&e||(d=function(a){var c=+Date.now(),d=Math.max(b+16,c);return setTimeout(function(){a(b=d)},d-c)},e=clearTimeout),a.requestAnimationFrame=d,a.cancelAnimationFrame=e}(window),Materialize.objectSelectorString=function(a){return((a.prop("tagName")||"")+(a.attr("id")||"")+(a.attr("class")||"")).replace(/\s/g,"")},Materialize.guid=function(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()}}(),Materialize.escapeHash=function(a){return a.replace(/(:|\.|\[|\]|,|=)/g,"\\$1")},Materialize.elementOrParentIsFixed=function(a){var b=$(a),c=b.add(b.parents()),d=!1;return c.each(function(){if("fixed"===$(this).css("position"))return d=!0,!1}),d};var getTime=Date.now||function(){return(new Date).getTime()};Materialize.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=!1===c.leading?0:getTime(),g=null,f=a.apply(d,e),d=e=null};return function(){var j=getTime();h||!1!==c.leading||(h=j);var k=b-(j-h);return d=this,e=arguments,k<=0?(clearTimeout(g),g=null,h=j,f=a.apply(d,e),d=e=null):g||!1===c.trailing||(g=setTimeout(i,k)),f}};var Vel;Vel=jQuery?jQuery.Velocity:$?$.Velocity:Velocity,function(a){a.fn.collapsible=function(b,c){var d={accordion:void 0,onOpen:void 0,onClose:void 0},e=b;return b=a.extend(d,b),this.each(function(){function d(b){m=l.find("> li > .collapsible-header"),b.hasClass("active")?b.parent().addClass("active"):b.parent().removeClass("active"),b.parent().hasClass("active")?b.siblings(".collapsible-body").stop(!0,!1).slideDown({duration:350,easing:"easeOutQuart",queue:!1,complete:function(){a(this).css("height","")}}):b.siblings(".collapsible-body").stop(!0,!1).slideUp({duration:350,easing:"easeOutQuart",queue:!1,complete:function(){a(this).css("height","")}}),m.not(b).removeClass("active").parent().removeClass("active"),m.not(b).parent().children(".collapsible-body").stop(!0,!1).each(function(){a(this).is(":visible")&&a(this).slideUp({duration:350,easing:"easeOutQuart",queue:!1,complete:function(){a(this).css("height",""),h(a(this).siblings(".collapsible-header"))}})})}function f(b){b.hasClass("active")?b.parent().addClass("active"):b.parent().removeClass("active"),b.parent().hasClass("active")?b.siblings(".collapsible-body").stop(!0,!1).slideDown({duration:350,easing:"easeOutQuart",queue:!1,complete:function(){a(this).css("height","")}}):b.siblings(".collapsible-body").stop(!0,!1).slideUp({duration:350,easing:"easeOutQuart",queue:!1,complete:function(){a(this).css("height","")}})}function g(a,c){c||a.toggleClass("active"),b.accordion||"accordion"===n||void 0===n?d(a):f(a),h(a)}function h(a){a.hasClass("active")?"function"==typeof b.onOpen&&b.onOpen.call(this,a.parent()):"function"==typeof b.onClose&&b.onClose.call(this,a.parent())}function i(a){return j(a).length>0}function j(a){return a.closest("li > .collapsible-header")}function k(){l.off("click.collapse","> li > .collapsible-header")}var l=a(this),m=a(this).find("> li > .collapsible-header"),n=l.data("collapsible");if("destroy"===e)return void k();if(c>=0&&c<m.length){var o=m.eq(c);return void(o.length&&("open"===e||"close"===e&&o.hasClass("active"))&&g(o))}k(),l.on("click.collapse","> li > .collapsible-header",function(b){var c=a(b.target);i(c)&&(c=j(c)),g(c)}),b.accordion||"accordion"===n||void 0===n?g(m.filter(".active").first(),!0):m.filter(".active").each(function(){g(a(this),!0)})})},a(document).ready(function(){a(".collapsible").collapsible()})}(jQuery),function(a){a.fn.scrollTo=function(b){return a(this).scrollTop(a(this).scrollTop()-a(this).offset().top+a(b).offset().top),this},a.fn.dropdown=function(b){var c={inDuration:300,outDuration:225,constrainWidth:!0,hover:!1,gutter:0,belowOrigin:!1,alignment:"left",stopPropagation:!1};return"open"===b?(this.each(function(){a(this).trigger("open")}),!1):"close"===b?(this.each(function(){a(this).trigger("close")}),!1):void this.each(function(){function d(){void 0!==g.data("induration")&&(h.inDuration=g.data("induration")),void 0!==g.data("outduration")&&(h.outDuration=g.data("outduration")),void 0!==g.data("constrainwidth")&&(h.constrainWidth=g.data("constrainwidth")),void 0!==g.data("hover")&&(h.hover=g.data("hover")),void 0!==g.data("gutter")&&(h.gutter=g.data("gutter")),void 0!==g.data("beloworigin")&&(h.belowOrigin=g.data("beloworigin")),void 0!==g.data("alignment")&&(h.alignment=g.data("alignment")),void 0!==g.data("stoppropagation")&&(h.stopPropagation=g.data("stoppropagation"))}function e(b){"focus"===b&&(i=!0),d(),j.addClass("active"),g.addClass("active"),!0===h.constrainWidth?j.css("width",g.outerWidth()):j.css("white-space","nowrap");var c=window.innerHeight,e=g.innerHeight(),k=g.offset().left,l=g.offset().top-a(window).scrollTop(),m=h.alignment,n=0,o=0,p=0;!0===h.belowOrigin&&(p=e);var q=0,r=0,s=g.parent();if(s.is("body")||(s[0].scrollHeight>s[0].clientHeight&&(q=s[0].scrollTop),s[0].scrollWidth>s[0].clientWidth&&(r=s[0].scrollLeft)),k+j.innerWidth()>a(window).width()?m="right":k-j.innerWidth()+g.innerWidth()<0&&(m="left"),l+j.innerHeight()>c)if(l+e-j.innerHeight()<0){var t=c-l-p;j.css("max-height",t)}else p||(p+=e),p-=j.innerHeight();if("left"===m)n=h.gutter,o=g.position().left+n;else if("right"===m){var u=g.position().left+g.outerWidth()-j.outerWidth();n=-h.gutter,o=u+n}j.css({position:"absolute",top:g.position().top+p+q,left:o+r}),j.stop(!0,!0).css("opacity",0).slideDown({queue:!1,duration:h.inDuration,easing:"easeOutCubic",complete:function(){a(this).css("height","")}}).animate({opacity:1},{queue:!1,duration:h.inDuration,easing:"easeOutSine"}),setTimeout(function(){a(document).bind("click."+j.attr("id"),function(b){f(),a(document).unbind("click."+j.attr("id"))})},0)}function f(){i=!1,j.fadeOut(h.outDuration),j.removeClass("active"),g.removeClass("active"),a(document).unbind("click."+j.attr("id")),setTimeout(function(){j.css("max-height","")},h.outDuration)}var g=a(this),h=a.extend({},c,b),i=!1,j=a("#"+g.attr("data-activates"));if(d(),g.after(j),h.hover){var k=!1;g.unbind("click."+g.attr("id")),g.on("mouseenter",function(a){!1===k&&(e(),k=!0)}),g.on("mouseleave",function(b){var c=b.toElement||b.relatedTarget;a(c).closest(".dropdown-content").is(j)||(j.stop(!0,!0),f(),k=!1)}),j.on("mouseleave",function(b){var c=b.toElement||b.relatedTarget;a(c).closest(".dropdown-button").is(g)||(j.stop(!0,!0),f(),k=!1)})}else g.unbind("click."+g.attr("id")),g.bind("click."+g.attr("id"),function(b){i||(g[0]!=b.currentTarget||g.hasClass("active")||0!==a(b.target).closest(".dropdown-content").length?g.hasClass("active")&&(f(),a(document).unbind("click."+j.attr("id"))):(b.preventDefault(),h.stopPropagation&&b.stopPropagation(),e("click")))});g.on("open",function(a,b){e(b)}),g.on("close",f)})},a(document).ready(function(){a(".dropdown-button").dropdown()})}(jQuery),function(a){var b=0,c=0,d=function(){return"materialize-modal-overlay-"+ ++c},e={init:function(c){var e={opacity:.5,inDuration:350,outDuration:250,ready:void 0,complete:void 0,dismissible:!0,startingTop:"4%",endingTop:"10%"};return c=a.extend(e,c),this.each(function(){var e=a(this),f=a(this).attr("id")||"#"+a(this).data("target"),g=function(){var d=e.data("overlay-id"),f=a("#"+d);e.removeClass("open"),a("body").css({overflow:"",width:""}),e.find(".modal-close").off("click.close"),a(document).off("keyup.modal"+d),f.velocity({opacity:0},{duration:c.outDuration,queue:!1,ease:"easeOutQuart"});var g={duration:c.outDuration,queue:!1,ease:"easeOutCubic",complete:function(){a(this).css({display:"none"}),"function"==typeof c.complete&&c.complete.call(this,e),f.remove(),b--}};e.hasClass("bottom-sheet")?e.velocity({bottom:"-100%",opacity:0},g):e.velocity({top:c.startingTop,opacity:0,scaleX:.7},g)},h=function(f){var h=a("body"),i=h.innerWidth();if(h.css("overflow","hidden"),h.width(i),!e.hasClass("open")){var j=d(),k=a('<div class="modal-overlay"></div>');lStack=++b,k.attr("id",j).css("z-index",1e3+2*lStack),e.data("overlay-id",j).css("z-index",1e3+2*lStack+1),e.addClass("open"),a("body").append(k),c.dismissible&&(k.click(function(){g()}),a(document).on("keyup.modal"+j,function(a){27===a.keyCode&&g()})),e.find(".modal-close").on("click.close",function(a){g()}),k.css({display:"block",opacity:0}),e.css({display:"block",opacity:0}),k.velocity({opacity:c.opacity},{duration:c.inDuration,queue:!1,ease:"easeOutCubic"}),e.data("associated-overlay",k[0]);var l={duration:c.inDuration,queue:!1,ease:"easeOutCubic",complete:function(){"function"==typeof c.ready&&c.ready.call(this,e,f)}};e.hasClass("bottom-sheet")?e.velocity({bottom:"0",opacity:1},l):(a.Velocity.hook(e,"scaleX",.7),e.css({top:c.startingTop}),e.velocity({top:c.endingTop,opacity:1,scaleX:"1"},l))}};a(document).off("click.modalTrigger",'a[href="#'+f+'"], [data-target="'+f+'"]'),a(this).off("openModal"),a(this).off("closeModal"),a(document).on("click.modalTrigger",'a[href="#'+f+'"], [data-target="'+f+'"]',function(b){c.startingTop=(a(this).offset().top-a(window).scrollTop())/1.15,h(a(this)),b.preventDefault()}),a(this).on("openModal",function(){a(this).attr("href")||a(this).data("target"),h()}),a(this).on("closeModal",function(){g()})})},open:function(){a(this).trigger("openModal")},close:function(){a(this).trigger("closeModal")}};a.fn.modal=function(b){return e[b]?e[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?void a.error("Method "+b+" does not exist on jQuery.modal"):e.init.apply(this,arguments)}}(jQuery),function(a){a.fn.materialbox=function(){return this.each(function(){function b(){f=!1;var b=i.parent(".material-placeholder"),d=(window.innerWidth,window.innerHeight,i.data("width")),g=i.data("height");i.velocity("stop",!0),a("#materialbox-overlay").velocity("stop",!0),a(".materialbox-caption").velocity("stop",!0),a("#materialbox-overlay").velocity({opacity:0},{duration:h,queue:!1,easing:"easeOutQuad",complete:function(){e=!1,a(this).remove()}}),i.velocity({width:d,height:g,left:0,top:0},{duration:h,queue:!1,easing:"easeOutQuad",complete:function(){b.css({height:"",width:"",position:"",top:"",left:""}),i.removeAttr("style"),i.attr("style",k),i.removeClass("active"),f=!0,c&&c.css("overflow","")}}),a(".materialbox-caption").velocity({opacity:0},{duration:h,queue:!1,easing:"easeOutQuad",complete:function(){a(this).remove()}})}if(!a(this).hasClass("initialized")){a(this).addClass("initialized");var c,d,e=!1,f=!0,g=275,h=200,i=a(this),j=a("<div></div>").addClass("material-placeholder"),k=i.attr("style");i.wrap(j),i.on("click",function(){var h=i.parent(".material-placeholder"),j=window.innerWidth,k=window.innerHeight,l=i.width(),m=i.height();if(!1===f)return b(),!1;if(e&&!0===f)return b(),!1;for(f=!1,i.addClass("active"),e=!0,h.css({width:h[0].getBoundingClientRect().width,height:h[0].getBoundingClientRect().height,position:"relative",top:0,left:0}),c=void 0,d=h[0].parentNode;null!==d&&!a(d).is(document);){var n=a(d);"visible"!==n.css("overflow")&&(n.css("overflow","visible"),c=void 0===c?n:c.add(n)),d=d.parentNode}i.css({position:"absolute","z-index":1e3,"will-change":"left, top, width, height"}).data("width",l).data("height",m);var o=a('<div id="materialbox-overlay"></div>').css({opacity:0}).click(function(){!0===f&&b()});i.before(o);var p=o[0].getBoundingClientRect();if(o.css({width:j,height:k,left:-1*p.left,top:-1*p.top}),o.velocity({opacity:1},{duration:g,queue:!1,easing:"easeOutQuad"}),""!==i.data("caption")){var q=a('<div class="materialbox-caption"></div>');q.text(i.data("caption")),a("body").append(q),q.css({display:"inline"}),q.velocity({opacity:1},{duration:g,queue:!1,easing:"easeOutQuad"})}var r=0,s=l/j,t=m/k,u=0,v=0;s>t?(r=m/l,u=.9*j,v=.9*j*r):(r=l/m,u=.9*k*r,v=.9*k),i.hasClass("responsive-img")?i.velocity({"max-width":u,width:l},{duration:0,queue:!1,complete:function(){i.css({left:0,top:0}).velocity({height:v,width:u,left:a(document).scrollLeft()+j/2-i.parent(".material-placeholder").offset().left-u/2,top:a(document).scrollTop()+k/2-i.parent(".material-placeholder").offset().top-v/2},{duration:g,queue:!1,easing:"easeOutQuad",complete:function(){f=!0}})}}):i.css("left",0).css("top",0).velocity({height:v,width:u,left:a(document).scrollLeft()+j/2-i.parent(".material-placeholder").offset().left-u/2,top:a(document).scrollTop()+k/2-i.parent(".material-placeholder").offset().top-v/2},{duration:g,queue:!1,easing:"easeOutQuad",complete:function(){f=!0}})}),a(window).scroll(function(){e&&b()}),a(document).keyup(function(a){27===a.keyCode&&!0===f&&e&&b()})}})},a(document).ready(function(){a(".materialboxed").materialbox()})}(jQuery),function(a){a.fn.parallax=function(){var b=a(window).width();return this.each(function(c){function d(c){var d;d=b<601?e.height()>0?e.height():e.children("img").height():e.height()>0?e.height():500;var f=e.children("img").first(),g=f.height(),h=g-d,i=e.offset().top+d,j=e.offset().top,k=a(window).scrollTop(),l=window.innerHeight,m=k+l,n=(m-j)/(d+l),o=Math.round(h*n);c&&f.css("display","block"),i>k&&j<k+l&&f.css("transform","translate3D(-50%,"+o+"px, 0)")}var e=a(this);e.addClass("parallax"),e.children("img").one("load",function(){d(!0)}).each(function(){this.complete&&a(this).trigger("load")}),a(window).scroll(function(){b=a(window).width(),d(!1)}),a(window).resize(function(){b=a(window).width(),d(!1)})})}}(jQuery),function(a){var b={init:function(b){var c={onShow:null,swipeable:!1,responsiveThreshold:1/0};b=a.extend(c,b);var d=Materialize.objectSelectorString(a(this));return this.each(function(c){var e,f,g,h,i,j=d+c,k=a(this),l=a(window).width(),m=k.find("li.tab a"),n=k.width(),o=a(),p=Math.max(n,k[0].scrollWidth)/m.length,q=prev_index=0,r=!1,s=300,t=function(a){return Math.ceil(n-a.position().left-a.outerWidth()-k.scrollLeft())},u=function(a){return Math.floor(a.position().left+k.scrollLeft())},v=function(a){q-a>=0?(h.velocity({right:t(e)},{duration:s,queue:!1,easing:"easeOutQuad"}),h.velocity({left:u(e)},{duration:s,queue:!1,easing:"easeOutQuad",delay:90})):(h.velocity({left:u(e)},{duration:s,queue:!1,easing:"easeOutQuad"}),h.velocity({right:t(e)},{duration:s,queue:!1,easing:"easeOutQuad",delay:90}))};b.swipeable&&l>b.responsiveThreshold&&(b.swipeable=!1),e=a(m.filter('[href="'+location.hash+'"]')),0===e.length&&(e=a(this).find("li.tab a.active").first()),0===e.length&&(e=a(this).find("li.tab a").first()),e.addClass("active"),q=m.index(e),q<0&&(q=0),void 0!==e[0]&&(f=a(e[0].hash),f.addClass("active")),k.find(".indicator").length||k.append('<div class="indicator"></div>'),h=k.find(".indicator"),k.append(h),k.is(":visible")&&setTimeout(function(){h.css({right:t(e)}),h.css({left:u(e)})},0),a(window).off("resize.tabs-"+j).on("resize.tabs-"+j,function(){n=k.width(),p=Math.max(n,k[0].scrollWidth)/m.length,q<0&&(q=0),0!==p&&0!==n&&(h.css({right:t(e)}),h.css({left:u(e)}))}),b.swipeable?(m.each(function(){var b=a(Materialize.escapeHash(this.hash));b.addClass("carousel-item"),o=o.add(b)}),g=o.wrapAll('<div class="tabs-content carousel"></div>'),o.css("display",""),a(".tabs-content.carousel").carousel({fullWidth:!0,noWrap:!0,onCycleTo:function(a){if(!r){var b=q;q=g.index(a),e=m.eq(q),v(b)}}})):m.not(e).each(function(){a(Materialize.escapeHash(this.hash)).hide()}),k.off("click.tabs").on("click.tabs","a",function(c){if(a(this).parent().hasClass("disabled"))return void c.preventDefault();if(!a(this).attr("target")){r=!0,n=k.width(),p=Math.max(n,k[0].scrollWidth)/m.length,e.removeClass("active");var d=f;e=a(this),f=a(Materialize.escapeHash(this.hash)),m=k.find("li.tab a"),e.position(),e.addClass("active"),prev_index=q,q=m.index(a(this)),q<0&&(q=0),b.swipeable?o.length&&o.carousel("set",q):(void 0!==f&&(f.show(),f.addClass("active"),"function"==typeof b.onShow&&b.onShow.call(this,f)),void 0===d||d.is(f)||(d.hide(),d.removeClass("active"))),i=setTimeout(function(){r=!1},s),v(prev_index),c.preventDefault()}})})},select_tab:function(a){this.find('a[href="#'+a+'"]').trigger("click")}};a.fn.tabs=function(c){return b[c]?b[c].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof c&&c?void a.error("Method "+c+" does not exist on jQuery.tabs"):b.init.apply(this,arguments)},a(document).ready(function(){a("ul.tabs").tabs()})}(jQuery),function(a){a.fn.tooltip=function(c){var e={delay:350,tooltip:"",position:"bottom",html:!1};return"remove"===c?(this.each(function(){a("#"+a(this).attr("data-tooltip-id")).remove(),a(this).off("mouseenter.tooltip mouseleave.tooltip")}),!1):(c=a.extend(e,c),this.each(function(){var e=Materialize.guid(),f=a(this);f.attr("data-tooltip-id")&&a("#"+f.attr("data-tooltip-id")).remove(),f.attr("data-tooltip-id",e);var g,h,i,j,k,l,m=function(){g=f.attr("data-html")?"true"===f.attr("data-html"):c.html,h=f.attr("data-delay"),h=void 0===h||""===h?c.delay:h,i=f.attr("data-position"),i=void 0===i||""===i?c.position:i,j=f.attr("data-tooltip"),j=void 0===j||""===j?c.tooltip:j};m();k=function(){var b=a('<div class="material-tooltip"></div>');return j=g?a("<span></span>").html(j):a("<span></span>").text(j),b.append(j).appendTo(a("body")).attr("id",e),l=a('<div class="backdrop"></div>'),l.appendTo(b),b}(),f.off("mouseenter.tooltip mouseleave.tooltip");var o,p=!1;f.on({"mouseenter.tooltip":function(a){var c=function(){m(),p=!0,k.velocity("stop"),l.velocity("stop"),k.css({visibility:"visible",left:"0px",top:"0px"});var a,c,e,g=f.outerWidth(),h=f.outerHeight(),j=k.outerHeight(),n=k.outerWidth(),o="0px",q="0px",r=l[0].offsetWidth,s=l[0].offsetHeight,t=8,u=8,v=0;"top"===i?(a=f.offset().top-j-5,c=f.offset().left+g/2-n/2,e=b(c,a,n,j),o="-10px",l.css({bottom:0,left:0,borderRadius:"14px 14px 0 0",transformOrigin:"50% 100%",marginTop:j,marginLeft:n/2-r/2})):"left"===i?(a=f.offset().top+h/2-j/2,c=f.offset().left-n-5,e=b(c,a,n,j),q="-10px",l.css({top:"-7px",right:0,width:"14px",height:"14px",borderRadius:"14px 0 0 14px",transformOrigin:"95% 50%",marginTop:j/2,marginLeft:n})):"right"===i?(a=f.offset().top+h/2-j/2,c=f.offset().left+g+5,e=b(c,a,n,j),q="+10px",l.css({top:"-7px",left:0,width:"14px",height:"14px",borderRadius:"0 14px 14px 0",transformOrigin:"5% 50%",marginTop:j/2,marginLeft:"0px"})):(a=f.offset().top+f.outerHeight()+5,c=f.offset().left+g/2-n/2,e=b(c,a,n,j),o="+10px",l.css({top:0,left:0,marginLeft:n/2-r/2})),k.css({top:e.y,left:e.x}),t=Math.SQRT2*n/parseInt(r),u=Math.SQRT2*j/parseInt(s),v=Math.max(t,u),k.velocity({translateY:o,translateX:q},{duration:350,queue:!1}).velocity({opacity:1},{duration:300,delay:50,queue:!1}),l.css({visibility:"visible"}).velocity({opacity:1},{duration:55,delay:0,queue:!1}).velocity({scaleX:v,scaleY:v},{duration:300,delay:0,queue:!1,easing:"easeInOutQuad"})};o=setTimeout(c,h)},"mouseleave.tooltip":function(){p=!1,clearTimeout(o),setTimeout(function(){!0!==p&&(k.velocity({opacity:0,translateY:0,translateX:0},{duration:225,queue:!1}),l.velocity({opacity:0,scaleX:1,scaleY:1},{duration:225,queue:!1,complete:function(){l.css({visibility:"hidden"}),k.css({visibility:"hidden"}),p=!1}}))},225)}})}))};var b=function(b,c,d,e){var f=b,g=c;return f<0?f=4:f+d>window.innerWidth&&(f-=f+d-window.innerWidth),g<0?g=4:g+e>window.innerHeight+a(window).scrollTop&&(g-=g+e-window.innerHeight),{x:f,y:g}};a(document).ready(function(){a(".tooltipped").tooltip()})}(jQuery),function(a){"use strict"
;function b(a){return null!==a&&a===a.window}function c(a){return b(a)?a:9===a.nodeType&&a.defaultView}function d(a){var b,d,e={top:0,left:0},f=a&&a.ownerDocument;return b=f.documentElement,void 0!==a.getBoundingClientRect&&(e=a.getBoundingClientRect()),d=c(f),{top:e.top+d.pageYOffset-b.clientTop,left:e.left+d.pageXOffset-b.clientLeft}}function e(a){var b="";for(var c in a)a.hasOwnProperty(c)&&(b+=c+":"+a[c]+";");return b}function f(a){if(!1===k.allowEvent(a))return null;for(var b=null,c=a.target||a.srcElement;null!==c.parentElement;){if(!(c instanceof SVGElement||-1===c.className.indexOf("waves-effect"))){b=c;break}if(c.classList.contains("waves-effect")){b=c;break}c=c.parentElement}return b}function g(b){var c=f(b);null!==c&&(j.show(b,c),"ontouchstart"in a&&(c.addEventListener("touchend",j.hide,!1),c.addEventListener("touchcancel",j.hide,!1)),c.addEventListener("mouseup",j.hide,!1),c.addEventListener("mouseleave",j.hide,!1))}var h=h||{},i=document.querySelectorAll.bind(document),j={duration:750,show:function(a,b){if(2===a.button)return!1;var c=b||this,f=document.createElement("div");f.className="waves-ripple",c.appendChild(f);var g=d(c),h=a.pageY-g.top,i=a.pageX-g.left,k="scale("+c.clientWidth/100*10+")";"touches"in a&&(h=a.touches[0].pageY-g.top,i=a.touches[0].pageX-g.left),f.setAttribute("data-hold",Date.now()),f.setAttribute("data-scale",k),f.setAttribute("data-x",i),f.setAttribute("data-y",h);var l={top:h+"px",left:i+"px"};f.className=f.className+" waves-notransition",f.setAttribute("style",e(l)),f.className=f.className.replace("waves-notransition",""),l["-webkit-transform"]=k,l["-moz-transform"]=k,l["-ms-transform"]=k,l["-o-transform"]=k,l.transform=k,l.opacity="1",l["-webkit-transition-duration"]=j.duration+"ms",l["-moz-transition-duration"]=j.duration+"ms",l["-o-transition-duration"]=j.duration+"ms",l["transition-duration"]=j.duration+"ms",l["-webkit-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",l["-moz-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",l["-o-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",l["transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",f.setAttribute("style",e(l))},hide:function(a){k.touchup(a);var b=this,c=(b.clientWidth,null),d=b.getElementsByClassName("waves-ripple");if(!(d.length>0))return!1;c=d[d.length-1];var f=c.getAttribute("data-x"),g=c.getAttribute("data-y"),h=c.getAttribute("data-scale"),i=Date.now()-Number(c.getAttribute("data-hold")),l=350-i;l<0&&(l=0),setTimeout(function(){var a={top:g+"px",left:f+"px",opacity:"0","-webkit-transition-duration":j.duration+"ms","-moz-transition-duration":j.duration+"ms","-o-transition-duration":j.duration+"ms","transition-duration":j.duration+"ms","-webkit-transform":h,"-moz-transform":h,"-ms-transform":h,"-o-transform":h,transform:h};c.setAttribute("style",e(a)),setTimeout(function(){try{b.removeChild(c)}catch(a){return!1}},j.duration)},l)},wrapInput:function(a){for(var b=0;b<a.length;b++){var c=a[b];if("input"===c.tagName.toLowerCase()){var d=c.parentNode;if("i"===d.tagName.toLowerCase()&&-1!==d.className.indexOf("waves-effect"))continue;var e=document.createElement("i");e.className=c.className+" waves-input-wrapper";var f=c.getAttribute("style");f||(f=""),e.setAttribute("style",f),c.className="waves-button-input",c.removeAttribute("style"),d.replaceChild(e,c),e.appendChild(c)}}}},k={touches:0,allowEvent:function(a){var b=!0;return"touchstart"===a.type?k.touches+=1:"touchend"===a.type||"touchcancel"===a.type?setTimeout(function(){k.touches>0&&(k.touches-=1)},500):"mousedown"===a.type&&k.touches>0&&(b=!1),b},touchup:function(a){k.allowEvent(a)}};h.displayEffect=function(b){b=b||{},"duration"in b&&(j.duration=b.duration),j.wrapInput(i(".waves-effect")),"ontouchstart"in a&&document.body.addEventListener("touchstart",g,!1),document.body.addEventListener("mousedown",g,!1)},h.attach=function(b){"input"===b.tagName.toLowerCase()&&(j.wrapInput([b]),b=b.parentElement),"ontouchstart"in a&&b.addEventListener("touchstart",g,!1),b.addEventListener("mousedown",g,!1)},a.Waves=h,document.addEventListener("DOMContentLoaded",function(){h.displayEffect()},!1)}(window),Materialize.toast=function(a,b,c,d){c=c||"";var f=document.getElementById("toast-container");null===f&&(f=document.createElement("div"),f.id="toast-container",document.body.appendChild(f));var g=function(a){var b=document.createElement("div");if(b.classList.add("toast"),c)for(var e=c.split(" "),f=0,g=e.length;f<g;f++)b.classList.add(e[f]);("object"==typeof HTMLElement?a instanceof HTMLElement:a&&"object"==typeof a&&null!==a&&1===a.nodeType&&"string"==typeof a.nodeName)?b.appendChild(a):a instanceof jQuery?b.appendChild(a[0]):b.innerHTML=a;var h=new Hammer(b,{prevent_default:!1});return h.on("pan",function(a){var c=a.deltaX;b.classList.contains("panning")||b.classList.add("panning");var e=1-Math.abs(c/80);e<0&&(e=0),Vel(b,{left:c,opacity:e},{duration:50,queue:!1,easing:"easeOutQuad"})}),h.on("panend",function(a){var c=a.deltaX;Math.abs(c)>80?Vel(b,{marginTop:"-40px"},{duration:375,easing:"easeOutExpo",queue:!1,complete:function(){"function"==typeof d&&d(),b.parentNode.removeChild(b)}}):(b.classList.remove("panning"),Vel(b,{left:0,opacity:1},{duration:300,easing:"easeOutExpo",queue:!1}))}),b}(a);a&&f.appendChild(g),g.style.opacity=0,Vel(g,{translateY:"-35px",opacity:1},{duration:300,easing:"easeOutCubic",queue:!1});var h,i=b;null!=i&&(h=setInterval(function(){null===g.parentNode&&window.clearInterval(h),g.classList.contains("panning")||(i-=20),i<=0&&(Vel(g,{opacity:0,marginTop:"-40px"},{duration:375,easing:"easeOutExpo",queue:!1,complete:function(){"function"==typeof d&&d(),this[0].parentNode.removeChild(this[0])}}),window.clearInterval(h))},20))},function(a){var b={init:function(b){var c={menuWidth:300,edge:"left",closeOnClick:!1,draggable:!0};b=a.extend(c,b),a(this).each(function(){var c=a(this),d=c.attr("data-activates"),e=a("#"+d);300!=b.menuWidth&&e.css("width",b.menuWidth);var f=a('.drag-target[data-sidenav="'+d+'"]');b.draggable?(f.length&&f.remove(),f=a('<div class="drag-target"></div>').attr("data-sidenav",d),a("body").append(f)):f=a(),"left"==b.edge?(e.css("transform","translateX(-100%)"),f.css({left:0})):(e.addClass("right-aligned").css("transform","translateX(100%)"),f.css({right:0})),e.hasClass("fixed")&&window.innerWidth>992&&e.css("transform","translateX(0)"),e.hasClass("fixed")&&a(window).resize(function(){window.innerWidth>992?0!==a("#sidenav-overlay").length&&i?g(!0):e.css("transform","translateX(0%)"):!1===i&&("left"===b.edge?e.css("transform","translateX(-100%)"):e.css("transform","translateX(100%)"))}),!0===b.closeOnClick&&e.on("click.itemclick","a:not(.collapsible-header)",function(){g()});var g=function(c){h=!1,i=!1,a("body").css({overflow:"",width:""}),a("#sidenav-overlay").velocity({opacity:0},{duration:200,queue:!1,easing:"easeOutQuad",complete:function(){a(this).remove()}}),"left"===b.edge?(f.css({width:"",right:"",left:"0"}),e.velocity({translateX:"-100%"},{duration:200,queue:!1,easing:"easeOutCubic",complete:function(){!0===c&&(e.removeAttr("style"),e.css("width",b.menuWidth))}})):(f.css({width:"",right:"0",left:""}),e.velocity({translateX:"100%"},{duration:200,queue:!1,easing:"easeOutCubic",complete:function(){!0===c&&(e.removeAttr("style"),e.css("width",b.menuWidth))}}))},h=!1,i=!1;b.draggable&&(f.on("click",function(){i&&g()}),f.hammer({prevent_default:!1}).bind("pan",function(c){if("touch"==c.gesture.pointerType){var d=(c.gesture.direction,c.gesture.center.x),f=(c.gesture.center.y,c.gesture.velocityX,a("body")),h=a("#sidenav-overlay"),j=f.innerWidth();if(f.css("overflow","hidden"),f.width(j),0===h.length&&(h=a('<div id="sidenav-overlay"></div>'),h.css("opacity",0).click(function(){g()}),a("body").append(h)),"left"===b.edge&&(d>b.menuWidth?d=b.menuWidth:d<0&&(d=0)),"left"===b.edge)d<b.menuWidth/2?i=!1:d>=b.menuWidth/2&&(i=!0),e.css("transform","translateX("+(d-b.menuWidth)+"px)");else{d<window.innerWidth-b.menuWidth/2?i=!0:d>=window.innerWidth-b.menuWidth/2&&(i=!1);var k=d-b.menuWidth/2;k<0&&(k=0),e.css("transform","translateX("+k+"px)")}var l;"left"===b.edge?(l=d/b.menuWidth,h.velocity({opacity:l},{duration:10,queue:!1,easing:"easeOutQuad"})):(l=Math.abs((d-window.innerWidth)/b.menuWidth),h.velocity({opacity:l},{duration:10,queue:!1,easing:"easeOutQuad"}))}}).bind("panend",function(c){if("touch"==c.gesture.pointerType){var d=a("#sidenav-overlay"),g=c.gesture.velocityX,j=c.gesture.center.x,k=j-b.menuWidth,l=j-b.menuWidth/2;k>0&&(k=0),l<0&&(l=0),h=!1,"left"===b.edge?i&&g<=.3||g<-.5?(0!==k&&e.velocity({translateX:[0,k]},{duration:300,queue:!1,easing:"easeOutQuad"}),d.velocity({opacity:1},{duration:50,queue:!1,easing:"easeOutQuad"}),f.css({width:"50%",right:0,left:""}),i=!0):(!i||g>.3)&&(a("body").css({overflow:"",width:""}),e.velocity({translateX:[-1*b.menuWidth-10,k]},{duration:200,queue:!1,easing:"easeOutQuad"}),d.velocity({opacity:0},{duration:200,queue:!1,easing:"easeOutQuad",complete:function(){a(this).remove()}}),f.css({width:"10px",right:"",left:0})):i&&g>=-.3||g>.5?(0!==l&&e.velocity({translateX:[0,l]},{duration:300,queue:!1,easing:"easeOutQuad"}),d.velocity({opacity:1},{duration:50,queue:!1,easing:"easeOutQuad"}),f.css({width:"50%",right:"",left:0}),i=!0):(!i||g<-.3)&&(a("body").css({overflow:"",width:""}),e.velocity({translateX:[b.menuWidth+10,l]},{duration:200,queue:!1,easing:"easeOutQuad"}),d.velocity({opacity:0},{duration:200,queue:!1,easing:"easeOutQuad",complete:function(){a(this).remove()}}),f.css({width:"10px",right:0,left:""}))}})),c.off("click.sidenav").on("click.sidenav",function(){if(!0===i)i=!1,h=!1,g();else{var c=a("body"),d=a('<div id="sidenav-overlay"></div>'),j=c.innerWidth();c.css("overflow","hidden"),c.width(j),a("body").append(f),"left"===b.edge?(f.css({width:"50%",right:0,left:""}),e.velocity({translateX:[0,-1*b.menuWidth]},{duration:300,queue:!1,easing:"easeOutQuad"})):(f.css({width:"50%",right:"",left:0}),e.velocity({translateX:[0,b.menuWidth]},{duration:300,queue:!1,easing:"easeOutQuad"})),d.css("opacity",0).click(function(){i=!1,h=!1,g(),d.velocity({opacity:0},{duration:300,queue:!1,easing:"easeOutQuad",complete:function(){a(this).remove()}})}),a("body").append(d),d.velocity({opacity:1},{duration:300,queue:!1,easing:"easeOutQuad",complete:function(){i=!0,h=!1}})}return!1})})},destroy:function(){var b=a("#sidenav-overlay"),c=a('.drag-target[data-sidenav="'+a(this).attr("data-activates")+'"]');b.trigger("click"),c.remove(),a(this).off("click"),b.remove()},show:function(){this.trigger("click")},hide:function(){a("#sidenav-overlay").trigger("click")}};a.fn.sideNav=function(c){return b[c]?b[c].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof c&&c?void a.error("Method "+c+" does not exist on jQuery.sideNav"):b.init.apply(this,arguments)}}(jQuery),function(a){function b(b,c,d,e){var g=a();return a.each(f,function(a,f){if(f.height()>0){var h=f.offset().top,i=f.offset().left,j=i+f.width(),k=h+f.height();!(i>c||j<e||h>d||k<b)&&g.push(f)}}),g}function c(c){++i;var d=e.scrollTop(),f=e.scrollLeft(),h=f+e.width(),k=d+e.height(),l=b(d+j.top+c||200,h+j.right,k+j.bottom,f+j.left);a.each(l,function(a,b){"number"!=typeof b.data("scrollSpy:ticks")&&b.triggerHandler("scrollSpy:enter"),b.data("scrollSpy:ticks",i)}),a.each(g,function(a,b){var c=b.data("scrollSpy:ticks");"number"==typeof c&&c!==i&&(b.triggerHandler("scrollSpy:exit"),b.data("scrollSpy:ticks",null))}),g=l}function d(){e.trigger("scrollSpy:winSize")}var e=a(window),f=[],g=[],h=!1,i=0,j={top:0,right:0,bottom:0,left:0};a.scrollSpy=function(b,d){var g={throttle:100,scrollOffset:200};d=a.extend(g,d);var i=[];b=a(b),b.each(function(b,c){f.push(a(c)),a(c).data("scrollSpy:id",b),a('a[href="#'+a(c).attr("id")+'"]').click(function(b){b.preventDefault();var c=a(Materialize.escapeHash(this.hash)).offset().top+1;a("html, body").animate({scrollTop:c-d.scrollOffset},{duration:400,queue:!1,easing:"easeOutCubic"})})}),j.top=d.offsetTop||0,j.right=d.offsetRight||0,j.bottom=d.offsetBottom||0,j.left=d.offsetLeft||0;var k=Materialize.throttle(function(){c(d.scrollOffset)},d.throttle||100),l=function(){a(document).ready(k)};return h||(e.on("scroll",l),e.on("resize",l),h=!0),setTimeout(l,0),b.on("scrollSpy:enter",function(){i=a.grep(i,function(a){return 0!=a.height()});var b=a(this);i[0]?(a('a[href="#'+i[0].attr("id")+'"]').removeClass("active"),b.data("scrollSpy:id")<i[0].data("scrollSpy:id")?i.unshift(a(this)):i.push(a(this))):i.push(a(this)),a('a[href="#'+i[0].attr("id")+'"]').addClass("active")}),b.on("scrollSpy:exit",function(){if(i=a.grep(i,function(a){return 0!=a.height()}),i[0]){a('a[href="#'+i[0].attr("id")+'"]').removeClass("active");var b=a(this);i=a.grep(i,function(a){return a.attr("id")!=b.attr("id")}),i[0]&&a('a[href="#'+i[0].attr("id")+'"]').addClass("active")}}),b},a.winSizeSpy=function(b){return a.winSizeSpy=function(){return e},b=b||{throttle:100},e.on("resize",Materialize.throttle(d,b.throttle||100))},a.fn.scrollSpy=function(b){return a.scrollSpy(a(this),b)}}(jQuery),function(a){a(document).ready(function(){function b(b){var c=b.css("font-family"),d=b.css("font-size"),f=b.css("line-height");d&&e.css("font-size",d),c&&e.css("font-family",c),f&&e.css("line-height",f),"off"===b.attr("wrap")&&e.css("overflow-wrap","normal").css("white-space","pre"),e.text(b.val()+"\n");var g=e.html().replace(/\n/g,"<br>");e.html(g),b.is(":visible")?e.css("width",b.width()):e.css("width",a(window).width()/2),b.data("original-height")<=e.height()?b.css("height",e.height()):b.val().length<b.data("previous-length")&&b.css("height",b.data("original-height")),b.data("previous-length",b.val().length)}Materialize.updateTextFields=function(){a("input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], textarea").each(function(b,c){var d=a(this);a(c).val().length>0||c.autofocus||void 0!==d.attr("placeholder")?d.siblings("label").addClass("active"):a(c)[0].validity?d.siblings("label").toggleClass("active",!0===a(c)[0].validity.badInput):d.siblings("label").removeClass("active")})};var c="input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], textarea";a(document).on("change",c,function(){0===a(this).val().length&&void 0===a(this).attr("placeholder")||a(this).siblings("label").addClass("active"),validate_field(a(this))}),a(document).ready(function(){Materialize.updateTextFields()}),a(document).on("reset",function(b){var d=a(b.target);d.is("form")&&(d.find(c).removeClass("valid").removeClass("invalid"),d.find(c).each(function(){""===a(this).attr("value")&&a(this).siblings("label").removeClass("active")}),d.find("select.initialized").each(function(){var a=d.find("option[selected]").text();d.siblings("input.select-dropdown").val(a)}))}),a(document).on("focus",c,function(){a(this).siblings("label, .prefix").addClass("active")}),a(document).on("blur",c,function(){var b=a(this),c=".prefix";0===b.val().length&&!0!==b[0].validity.badInput&&void 0===b.attr("placeholder")&&(c+=", label"),b.siblings(c).removeClass("active"),validate_field(b)}),window.validate_field=function(a){var b=void 0!==a.attr("data-length"),c=parseInt(a.attr("data-length")),d=a.val().length;0===a.val().length&&!1===a[0].validity.badInput?a.hasClass("validate")&&(a.removeClass("valid"),a.removeClass("invalid")):a.hasClass("validate")&&(a.is(":valid")&&b&&d<=c||a.is(":valid")&&!b?(a.removeClass("invalid"),a.addClass("valid")):(a.removeClass("valid"),a.addClass("invalid")))};a(document).on("keyup.radio","input[type=radio], input[type=checkbox]",function(b){if(9===b.which){a(this).addClass("tabbed");return void a(this).one("blur",function(b){a(this).removeClass("tabbed")})}});var e=a(".hiddendiv").first();e.length||(e=a('<div class="hiddendiv common"></div>'),a("body").append(e));var f=".materialize-textarea";a(f).each(function(){var b=a(this);b.data("original-height",b.height()),b.data("previous-length",b.val().length)}),a("body").on("keyup keydown autoresize",f,function(){b(a(this))}),a(document).on("change",'.file-field input[type="file"]',function(){for(var b=a(this).closest(".file-field"),c=b.find("input.file-path"),d=a(this)[0].files,e=[],f=0;f<d.length;f++)e.push(d[f].name);c.val(e.join(", ")),c.trigger("change")});var g="input[type=range]",h=!1;a(g).each(function(){var b=a('<span class="thumb"><span class="value"></span></span>');a(this).after(b)});var i=function(a){var b=parseInt(a.parent().css("padding-left")),c=-7+b+"px";a.velocity({height:"30px",width:"30px",top:"-30px",marginLeft:c},{duration:300,easing:"easeOutExpo"})},j=function(a){var b=a.width()-15,c=parseFloat(a.attr("max")),d=parseFloat(a.attr("min"));return(parseFloat(a.val())-d)/(c-d)*b},k=".range-field";a(document).on("change",g,function(b){var c=a(this).siblings(".thumb");c.find(".value").html(a(this).val()),c.hasClass("active")||i(c);var d=j(a(this));c.addClass("active").css("left",d)}),a(document).on("mousedown touchstart",g,function(b){var c=a(this).siblings(".thumb");if(c.length<=0&&(c=a('<span class="thumb"><span class="value"></span></span>'),a(this).after(c)),c.find(".value").html(a(this).val()),h=!0,a(this).addClass("active"),c.hasClass("active")||i(c),"input"!==b.type){var d=j(a(this));c.addClass("active").css("left",d)}}),a(document).on("mouseup touchend",k,function(){h=!1,a(this).removeClass("active")}),a(document).on("input mousemove touchmove",k,function(b){var c=a(this).children(".thumb"),d=a(this).find(g);if(h){c.hasClass("active")||i(c);var e=j(d);c.addClass("active").css("left",e),c.find(".value").html(c.siblings(g).val())}}),a(document).on("mouseout touchleave",k,function(){if(!h){var b=a(this).children(".thumb"),c=parseInt(a(this).css("padding-left")),d=7+c+"px";b.hasClass("active")&&b.velocity({height:"0",width:"0",top:"10px",marginLeft:d},{duration:100}),b.removeClass("active")}}),a.fn.autocomplete=function(b){var c={data:{},limit:1/0,onAutocomplete:null,minLength:1};return b=a.extend(c,b),this.each(function(){var c,d=a(this),e=b.data,f=0,g=-1,h=d.closest(".input-field");if(!a.isEmptyObject(e)){var i,j=a('<ul class="autocomplete-content dropdown-content"></ul>');h.length?(i=h.children(".autocomplete-content.dropdown-content").first(),i.length||h.append(j)):(i=d.next(".autocomplete-content.dropdown-content"),i.length||d.after(j)),i.length&&(j=i);var k=function(a,b){var c=b.find("img"),d=b.text().toLowerCase().indexOf(""+a.toLowerCase()),e=d+a.length-1,f=b.text().slice(0,d),g=b.text().slice(d,e+1),h=b.text().slice(e+1);b.html("<span>"+f+"<span class='highlight'>"+g+"</span>"+h+"</span>"),c.length&&b.prepend(c)},l=function(){g=-1,j.find(".active").removeClass("active")},m=function(){j.empty(),l(),c=void 0};d.off("blur.autocomplete").on("blur.autocomplete",function(){m()}),d.off("keyup.autocomplete focus.autocomplete").on("keyup.autocomplete focus.autocomplete",function(g){f=0;var h=d.val().toLowerCase();if(13!==g.which&&38!==g.which&&40!==g.which){if(c!==h&&(m(),h.length>=b.minLength))for(var i in e)if(e.hasOwnProperty(i)&&-1!==i.toLowerCase().indexOf(h)&&i.toLowerCase()!==h){if(f>=b.limit)break;var l=a("<li></li>");e[i]?l.append('<img src="'+e[i]+'" class="right circle"><span>'+i+"</span>"):l.append("<span>"+i+"</span>"),j.append(l),k(h,l),f++}c=h}}),d.off("keydown.autocomplete").on("keydown.autocomplete",function(a){var b,c=a.which,d=j.children("li").length,e=j.children(".active").first();return 13===c&&g>=0?(b=j.children("li").eq(g),void(b.length&&(b.trigger("mousedown.autocomplete"),a.preventDefault()))):void(38!==c&&40!==c||(a.preventDefault(),38===c&&g>0&&g--,40===c&&g<d-1&&g++,e.removeClass("active"),g>=0&&j.children("li").eq(g).addClass("active")))}),j.on("mousedown.autocomplete touchstart.autocomplete","li",function(){var c=a(this).text().trim();d.val(c),d.trigger("change"),m(),"function"==typeof b.onAutocomplete&&b.onAutocomplete.call(this,c)})}})}}),a.fn.material_select=function(b){function c(a,b,c){var e=a.indexOf(b),f=-1===e;return f?a.push(b):a.splice(e,1),c.siblings("ul.dropdown-content").find("li:not(.optgroup)").eq(b).toggleClass("active"),c.find("option").eq(b).prop("selected",f),d(a,c),f}function d(a,b){for(var c="",d=0,e=a.length;d<e;d++){var f=b.find("option").eq(a[d]).text();c+=0===d?f:", "+f}""===c&&(c=b.find("option:disabled").eq(0).text()),b.siblings("input.select-dropdown").val(c)}a(this).each(function(){var d=a(this);if(!d.hasClass("browser-default")){var e=!!d.attr("multiple"),f=d.data("select-id");if(f&&(d.parent().find("span.caret").remove(),d.parent().find("input").remove(),d.unwrap(),a("ul#select-options-"+f).remove()),"destroy"===b)return void d.data("select-id",null).removeClass("initialized");var g=Materialize.guid();d.data("select-id",g);var h=a('<div class="select-wrapper"></div>');h.addClass(d.attr("class"));var i=a('<ul id="select-options-'+g+'" class="dropdown-content select-dropdown '+(e?"multiple-select-dropdown":"")+'"></ul>'),j=d.children("option, optgroup"),k=[],l=!1,m=d.find("option:selected").html()||d.find("option:first").html()||"",n=function(b,c,d){var f=c.is(":disabled")?"disabled ":"",g="optgroup-option"===d?"optgroup-option ":"",h=e?'<input type="checkbox"'+f+"/><label></label>":"",j=c.data("icon"),k=c.attr("class");if(j){var l="";return k&&(l=' class="'+k+'"'),i.append(a('<li class="'+f+g+'"><img alt="" src="'+j+'"'+l+"><span>"+h+c.html()+"</span></li>")),!0}i.append(a('<li class="'+f+g+'"><span>'+h+c.html()+"</span></li>"))};j.length&&j.each(function(){if(a(this).is("option"))e?n(0,a(this),"multiple"):n(0,a(this));else if(a(this).is("optgroup")){var b=a(this).children("option");i.append(a('<li class="optgroup"><span>'+a(this).attr("label")+"</span></li>")),b.each(function(){n(0,a(this),"optgroup-option")})}}),i.find("li:not(.optgroup)").each(function(f){a(this).click(function(g){if(!a(this).hasClass("disabled")&&!a(this).hasClass("optgroup")){var h=!0;e?(a('input[type="checkbox"]',this).prop("checked",function(a,b){return!b}),h=c(k,f,d),q.trigger("focus")):(i.find("li").removeClass("active"),a(this).toggleClass("active"),q.val(a(this).text())),r(i,a(this)),d.find("option").eq(f).prop("selected",h),d.trigger("change"),void 0!==b&&b()}g.stopPropagation()})}),d.wrap(h);var o=a('<span class="caret">&#9660;</span>');d.is(":disabled")&&o.addClass("disabled");var p=m.replace(/"/g,"&quot;"),q=a('<input type="text" class="select-dropdown" readonly="true" '+(d.is(":disabled")?"disabled":"")+' data-activates="select-options-'+g+'" value="'+p+'"/>');d.before(q),q.before(o),q.after(i),d.is(":disabled")||q.dropdown({hover:!1}),d.attr("tabindex")&&a(q[0]).attr("tabindex",d.attr("tabindex")),d.addClass("initialized"),q.on({focus:function(){if(a("ul.select-dropdown").not(i[0]).is(":visible")&&a("input.select-dropdown").trigger("close"),!i.is(":visible")){a(this).trigger("open",["focus"]);var b=a(this).val();e&&b.indexOf(",")>=0&&(b=b.split(",")[0]);var c=i.find("li").filter(function(){return a(this).text().toLowerCase()===b.toLowerCase()})[0];r(i,c,!0)}},click:function(a){a.stopPropagation()}}),q.on("blur",function(){e||a(this).trigger("close"),i.find("li.selected").removeClass("selected")}),i.hover(function(){l=!0},function(){l=!1}),a(window).on({click:function(){e&&(l||q.trigger("close"))}}),e&&d.find("option:selected:not(:disabled)").each(function(){var b=a(this).index();c(k,b,d),i.find("li").eq(b).find(":checkbox").prop("checked",!0)});var r=function(b,c,d){if(c){b.find("li.selected").removeClass("selected");var f=a(c);f.addClass("selected"),e&&!d||i.scrollTo(f)}},s=[],t=function(b){if(9==b.which)return void q.trigger("close");if(40==b.which&&!i.is(":visible"))return void q.trigger("open");if(13!=b.which||i.is(":visible")){b.preventDefault();var c=String.fromCharCode(b.which).toLowerCase(),d=[9,13,27,38,40];if(c&&-1===d.indexOf(b.which)){s.push(c);var f=s.join(""),g=i.find("li").filter(function(){return 0===a(this).text().toLowerCase().indexOf(f)})[0];g&&r(i,g)}if(13==b.which){var h=i.find("li.selected:not(.disabled)")[0];h&&(a(h).trigger("click"),e||q.trigger("close"))}40==b.which&&(g=i.find("li.selected").length?i.find("li.selected").next("li:not(.disabled)")[0]:i.find("li:not(.disabled)")[0],r(i,g)),27==b.which&&q.trigger("close"),38==b.which&&(g=i.find("li.selected").prev("li:not(.disabled)")[0])&&r(i,g),setTimeout(function(){s=[]},1e3)}};q.on("keydown",t)}})}}(jQuery),function(a){var b={init:function(b){var c={indicators:!0,height:400,transition:500,interval:6e3};return b=a.extend(c,b),this.each(function(){function c(a,b){a.hasClass("center-align")?a.velocity({opacity:0,translateY:-100},{duration:b,queue:!1}):a.hasClass("right-align")?a.velocity({opacity:0,translateX:100},{duration:b,queue:!1}):a.hasClass("left-align")&&a.velocity({opacity:0,translateX:-100},{duration:b,queue:!1})}function d(a){a>=j.length?a=0:a<0&&(a=j.length-1),(k=i.find(".active").index())!=a&&(e=j.eq(k),$caption=e.find(".caption"),e.removeClass("active"),e.velocity({opacity:0},{duration:b.transition,queue:!1,easing:"easeOutQuad",complete:function(){j.not(".active").velocity({opacity:0,translateX:0,translateY:0},{duration:0,queue:!1})}}),c($caption,b.transition),b.indicators&&f.eq(k).removeClass("active"),j.eq(a).velocity({opacity:1},{duration:b.transition,queue:!1,easing:"easeOutQuad"}),j.eq(a).find(".caption").velocity({opacity:1,translateX:0,translateY:0},{duration:b.transition,delay:b.transition,queue:!1,easing:"easeOutQuad"}),j.eq(a).addClass("active"),b.indicators&&f.eq(a).addClass("active"))}var e,f,g,h=a(this),i=h.find("ul.slides").first(),j=i.find("> li"),k=i.find(".active").index();-1!=k&&(e=j.eq(k)),h.hasClass("fullscreen")||(b.indicators?h.height(b.height+40):h.height(b.height),i.height(b.height)),j.find(".caption").each(function(){c(a(this),0)}),j.find("img").each(function(){var b="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";a(this).attr("src")!==b&&(a(this).css("background-image","url("+a(this).attr("src")+")"),a(this).attr("src",b))}),b.indicators&&(f=a('<ul class="indicators"></ul>'),j.each(function(c){var e=a('<li class="indicator-item"></li>');e.click(function(){d(i.parent().find(a(this)).index()),clearInterval(g),g=setInterval(function(){k=i.find(".active").index(),j.length==k+1?k=0:k+=1,d(k)},b.transition+b.interval)}),f.append(e)}),h.append(f),f=h.find("ul.indicators").find("li.indicator-item")),e?e.show():(j.first().addClass("active").velocity({opacity:1},{duration:b.transition,queue:!1,easing:"easeOutQuad"}),k=0,e=j.eq(k),b.indicators&&f.eq(k).addClass("active")),e.find("img").each(function(){e.find(".caption").velocity({opacity:1,translateX:0,translateY:0},{duration:b.transition,queue:!1,easing:"easeOutQuad"})}),g=setInterval(function(){k=i.find(".active").index(),d(k+1)},b.transition+b.interval);var l=!1,m=!1,n=!1;h.hammer({prevent_default:!1}).bind("pan",function(a){if("touch"===a.gesture.pointerType){clearInterval(g);var b=a.gesture.direction,c=a.gesture.deltaX,d=a.gesture.velocityX,e=a.gesture.velocityY;$curr_slide=i.find(".active"),Math.abs(d)>Math.abs(e)&&$curr_slide.velocity({translateX:c},{duration:50,queue:!1,easing:"easeOutQuad"}),4===b&&(c>h.innerWidth()/2||d<-.65)?n=!0:2===b&&(c<-1*h.innerWidth()/2||d>.65)&&(m=!0);var f;m&&(f=$curr_slide.next(),0===f.length&&(f=j.first()),f.velocity({opacity:1},{duration:300,queue:!1,easing:"easeOutQuad"})),n&&(f=$curr_slide.prev(),0===f.length&&(f=j.last()),f.velocity({opacity:1},{duration:300,queue:!1,easing:"easeOutQuad"}))}}).bind("panend",function(a){"touch"===a.gesture.pointerType&&($curr_slide=i.find(".active"),l=!1,curr_index=i.find(".active").index(),!n&&!m||j.length<=1?$curr_slide.velocity({translateX:0},{duration:300,queue:!1,easing:"easeOutQuad"}):m?(d(curr_index+1),$curr_slide.velocity({translateX:-1*h.innerWidth()},{duration:300,queue:!1,easing:"easeOutQuad",complete:function(){$curr_slide.velocity({opacity:0,translateX:0},{duration:0,queue:!1})}})):n&&(d(curr_index-1),$curr_slide.velocity({translateX:h.innerWidth()},{duration:300,queue:!1,easing:"easeOutQuad",complete:function(){$curr_slide.velocity({opacity:0,translateX:0},{duration:0,queue:!1})}})),m=!1,n=!1,clearInterval(g),g=setInterval(function(){k=i.find(".active").index(),j.length==k+1?k=0:k+=1,d(k)},b.transition+b.interval))}),h.on("sliderPause",function(){clearInterval(g)}),h.on("sliderStart",function(){clearInterval(g),g=setInterval(function(){k=i.find(".active").index(),j.length==k+1?k=0:k+=1,d(k)},b.transition+b.interval)}),h.on("sliderNext",function(){k=i.find(".active").index(),d(k+1)}),h.on("sliderPrev",function(){k=i.find(".active").index(),d(k-1)})})},pause:function(){a(this).trigger("sliderPause")},start:function(){a(this).trigger("sliderStart")},next:function(){a(this).trigger("sliderNext")},prev:function(){a(this).trigger("sliderPrev")}};a.fn.slider=function(c){return b[c]?b[c].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof c&&c?void a.error("Method "+c+" does not exist on jQuery.tooltip"):b.init.apply(this,arguments)}}(jQuery),function(a){a(document).ready(function(){a(document).on("click.card",".card",function(b){a(this).find("> .card-reveal").length&&(a(b.target).is(a(".card-reveal .card-title"))||a(b.target).is(a(".card-reveal .card-title i"))?a(this).find(".card-reveal").velocity({translateY:0},{duration:225,queue:!1,easing:"easeInOutQuad",complete:function(){a(this).css({display:"none"})}}):(a(b.target).is(a(".card .activator"))||a(b.target).is(a(".card .activator i")))&&(a(b.target).closest(".card").css("overflow","hidden"),a(this).find(".card-reveal").css({display:"block"}).velocity("stop",!1).velocity({translateY:"-100%"},{duration:300,queue:!1,easing:"easeInOutQuad"})))})})}(jQuery),function(a){var b={data:[],placeholder:"",secondaryPlaceholder:"",autocompleteOptions:{}};a(document).ready(function(){a(document).on("click",".chip .close",function(b){a(this).closest(".chips").attr("data-initialized")||a(this).closest(".chip").remove()})}),a.fn.material_chip=function(c){var d=this;if(this.$el=a(this),this.$document=a(document),this.SELS={CHIPS:".chips",CHIP:".chip",INPUT:"input",DELETE:".material-icons",SELECTED_CHIP:".selected"},"data"===c)return this.$el.data("chips");var e=a.extend({},b,c);d.hasAutocomplete=!a.isEmptyObject(e.autocompleteOptions.data),this.init=function(){var b=0;d.$el.each(function(){var c=a(this),f=Materialize.guid();d.chipId=f,e.data&&e.data instanceof Array||(e.data=[]),c.data("chips",e.data),c.attr("data-index",b),c.attr("data-initialized",!0),c.hasClass(d.SELS.CHIPS)||c.addClass("chips"),d.chips(c,f),b++})},this.handleEvents=function(){var b=d.SELS;d.$document.off("click.chips-focus",b.CHIPS).on("click.chips-focus",b.CHIPS,function(c){a(c.target).find(b.INPUT).focus()}),d.$document.off("click.chips-select",b.CHIP).on("click.chips-select",b.CHIP,function(c){var e=a(c.target);if(e.length){var f=e.hasClass("selected"),g=e.closest(b.CHIPS);a(b.CHIP).removeClass("selected"),f||d.selectChip(e.index(),g)}}),d.$document.off("keydown.chips").on("keydown.chips",function(c){if(!a(c.target).is("input, textarea")){var e,f=d.$document.find(b.CHIP+b.SELECTED_CHIP),g=f.closest(b.CHIPS),h=f.siblings(b.CHIP).length;if(f.length)if(8===c.which||46===c.which){c.preventDefault(),e=f.index(),d.deleteChip(e,g);var i=null;e+1<h?i=e:e!==h&&e+1!==h||(i=h-1),i<0&&(i=null),null!==i&&d.selectChip(i,g),h||g.find("input").focus()}else if(37===c.which){if((e=f.index()-1)<0)return;a(b.CHIP).removeClass("selected"),d.selectChip(e,g)}else if(39===c.which){if(e=f.index()+1,a(b.CHIP).removeClass("selected"),e>h)return void g.find("input").focus();d.selectChip(e,g)}}}),d.$document.off("focusin.chips",b.CHIPS+" "+b.INPUT).on("focusin.chips",b.CHIPS+" "+b.INPUT,function(c){var d=a(c.target).closest(b.CHIPS);d.addClass("focus"),d.siblings("label, .prefix").addClass("active"),a(b.CHIP).removeClass("selected")}),d.$document.off("focusout.chips",b.CHIPS+" "+b.INPUT).on("focusout.chips",b.CHIPS+" "+b.INPUT,function(c){var d=a(c.target).closest(b.CHIPS)
;d.removeClass("focus"),d.data("chips").length||d.siblings("label").removeClass("active"),d.siblings(".prefix").removeClass("active")}),d.$document.off("keydown.chips-add",b.CHIPS+" "+b.INPUT).on("keydown.chips-add",b.CHIPS+" "+b.INPUT,function(c){var e=a(c.target),f=e.closest(b.CHIPS),g=f.children(b.CHIP).length;if(13===c.which){if(d.hasAutocomplete&&f.find(".autocomplete-content.dropdown-content").length&&f.find(".autocomplete-content.dropdown-content").children().length)return;return c.preventDefault(),d.addChip({tag:e.val()},f),void e.val("")}if((8===c.keyCode||37===c.keyCode)&&""===e.val()&&g)return c.preventDefault(),d.selectChip(g-1,f),void e.blur()}),d.$document.off("click.chips-delete",b.CHIPS+" "+b.DELETE).on("click.chips-delete",b.CHIPS+" "+b.DELETE,function(c){var e=a(c.target),f=e.closest(b.CHIPS),g=e.closest(b.CHIP);c.stopPropagation(),d.deleteChip(g.index(),f),f.find("input").focus()})},this.chips=function(b,c){b.empty(),b.data("chips").forEach(function(a){b.append(d.renderChip(a))}),b.append(a('<input id="'+c+'" class="input" placeholder="">')),d.setPlaceholder(b);var f=b.next("label");f.length&&(f.attr("for",c),b.data("chips").length&&f.addClass("active"));var g=a("#"+c);d.hasAutocomplete&&(e.autocompleteOptions.onAutocomplete=function(a){d.addChip({tag:a},b),g.val(""),g.focus()},g.autocomplete(e.autocompleteOptions))},this.renderChip=function(b){if(b.tag){var c=a('<div class="chip"></div>');return c.text(b.tag),c.append(a('<i class="material-icons close">close</i>')),c}},this.setPlaceholder=function(a){a.data("chips").length&&e.placeholder?a.find("input").prop("placeholder",e.placeholder):!a.data("chips").length&&e.secondaryPlaceholder&&a.find("input").prop("placeholder",e.secondaryPlaceholder)},this.isValid=function(a,b){for(var c=a.data("chips"),d=!1,e=0;e<c.length;e++)if(c[e].tag===b.tag)return void(d=!0);return""!==b.tag&&!d},this.addChip=function(a,b){if(d.isValid(b,a)){for(var c=d.renderChip(a),e=[],f=b.data("chips"),g=0;g<f.length;g++)e.push(f[g]);e.push(a),b.data("chips",e),c.insertBefore(b.find("input")),b.trigger("chip.add",a),d.setPlaceholder(b)}},this.deleteChip=function(a,b){var c=b.data("chips")[a];b.find(".chip").eq(a).remove();for(var e=[],f=b.data("chips"),g=0;g<f.length;g++)g!==a&&e.push(f[g]);b.data("chips",e),b.trigger("chip.delete",c),d.setPlaceholder(b)},this.selectChip=function(a,b){var c=b.find(".chip").eq(a);c&&!1===c.hasClass("selected")&&(c.addClass("selected"),b.trigger("chip.select",b.data("chips")[a]))},this.getChipsElement=function(a,b){return b.eq(a)},this.init(),this.handleEvents()}}(jQuery),function(a){a.fn.pushpin=function(b){var c={top:0,bottom:1/0,offset:0};return"remove"===b?(this.each(function(){(id=a(this).data("pushpin-id"))&&(a(window).off("scroll."+id),a(this).removeData("pushpin-id").removeClass("pin-top pinned pin-bottom").removeAttr("style"))}),!1):(b=a.extend(c,b),$index=0,this.each(function(){function c(a){a.removeClass("pin-top"),a.removeClass("pinned"),a.removeClass("pin-bottom")}function d(d,e){d.each(function(){b.top<=e&&b.bottom>=e&&!a(this).hasClass("pinned")&&(c(a(this)),a(this).css("top",b.offset),a(this).addClass("pinned")),e<b.top&&!a(this).hasClass("pin-top")&&(c(a(this)),a(this).css("top",0),a(this).addClass("pin-top")),e>b.bottom&&!a(this).hasClass("pin-bottom")&&(c(a(this)),a(this).addClass("pin-bottom"),a(this).css("top",b.bottom-g))})}var e=Materialize.guid(),f=a(this),g=a(this).offset().top;a(this).data("pushpin-id",e),d(f,a(window).scrollTop()),a(window).on("scroll."+e,function(){var c=a(window).scrollTop()+b.offset;d(f,c)})}))}}(jQuery),function(a){a(document).ready(function(){a.fn.reverse=[].reverse,a(document).on("mouseenter.fixedActionBtn",".fixed-action-btn:not(.click-to-toggle):not(.toolbar)",function(c){var d=a(this);b(d)}),a(document).on("mouseleave.fixedActionBtn",".fixed-action-btn:not(.click-to-toggle):not(.toolbar)",function(b){var d=a(this);c(d)}),a(document).on("click.fabClickToggle",".fixed-action-btn.click-to-toggle > a",function(d){var e=a(this),f=e.parent();f.hasClass("active")?c(f):b(f)}),a(document).on("click.fabToolbar",".fixed-action-btn.toolbar > a",function(b){var c=a(this),e=c.parent();d(e)})}),a.fn.extend({openFAB:function(){b(a(this))},closeFAB:function(){c(a(this))},openToolbar:function(){d(a(this))},closeToolbar:function(){e(a(this))}});var b=function(b){var c=b;if(!1===c.hasClass("active")){var d,e;!0===c.hasClass("horizontal")?e=40:d=40,c.addClass("active"),c.find("ul .btn-floating").velocity({scaleY:".4",scaleX:".4",translateY:d+"px",translateX:e+"px"},{duration:0});var g=0;c.find("ul .btn-floating").reverse().each(function(){a(this).velocity({opacity:"1",scaleX:"1",scaleY:"1",translateY:"0",translateX:"0"},{duration:80,delay:g}),g+=40})}},c=function(a){var b,c,d=a;!0===d.hasClass("horizontal")?c=40:b=40,d.removeClass("active"),d.find("ul .btn-floating").velocity("stop",!0),d.find("ul .btn-floating").velocity({opacity:"0",scaleX:".4",scaleY:".4",translateY:b+"px",translateX:c+"px"},{duration:80})},d=function(b){if("true"!==b.attr("data-open")){var c,d,f,g=window.innerWidth,h=window.innerHeight,i=b[0].getBoundingClientRect(),j=b.find("> a").first(),k=b.find("> ul").first(),l=a('<div class="fab-backdrop"></div>'),m=j.css("background-color");j.append(l),c=i.left-g/2+i.width/2,d=h-i.bottom,f=g/l.width(),b.attr("data-origin-bottom",i.bottom),b.attr("data-origin-left",i.left),b.attr("data-origin-width",i.width),b.addClass("active"),b.attr("data-open",!0),b.css({"text-align":"center",width:"100%",bottom:0,left:0,transform:"translateX("+c+"px)",transition:"none"}),j.css({transform:"translateY("+-d+"px)",transition:"none"}),l.css({"background-color":m}),setTimeout(function(){b.css({transform:"",transition:"transform .2s cubic-bezier(0.550, 0.085, 0.680, 0.530), background-color 0s linear .2s"}),j.css({overflow:"visible",transform:"",transition:"transform .2s"}),setTimeout(function(){b.css({overflow:"hidden","background-color":m}),l.css({transform:"scale("+f+")",transition:"transform .2s cubic-bezier(0.550, 0.055, 0.675, 0.190)"}),k.find("> li > a").css({opacity:1}),a(window).on("scroll.fabToolbarClose",function(){e(b),a(window).off("scroll.fabToolbarClose"),a(document).off("click.fabToolbarClose")}),a(document).on("click.fabToolbarClose",function(c){a(c.target).closest(k).length||(e(b),a(window).off("scroll.fabToolbarClose"),a(document).off("click.fabToolbarClose"))})},100)},0)}},e=function(a){if("true"===a.attr("data-open")){var b,c,e=window.innerWidth,f=window.innerHeight,g=a.attr("data-origin-width"),h=a.attr("data-origin-bottom"),i=a.attr("data-origin-left"),j=a.find("> .btn-floating").first(),k=a.find("> ul").first(),l=a.find(".fab-backdrop"),m=j.css("background-color");b=i-e/2+g/2,c=f-h,e/l.width(),a.removeClass("active"),a.attr("data-open",!1),a.css({"background-color":"transparent",transition:"none"}),j.css({transition:"none"}),l.css({transform:"scale(0)","background-color":m}),k.find("> li > a").css({opacity:""}),setTimeout(function(){l.remove(),a.css({"text-align":"",width:"",bottom:"",left:"",overflow:"","background-color":"",transform:"translate3d("+-b+"px,0,0)"}),j.css({overflow:"",transform:"translate3d(0,"+c+"px,0)"}),setTimeout(function(){a.css({transform:"translate3d(0,0,0)",transition:"transform .2s"}),j.css({transform:"translate3d(0,0,0)",transition:"transform .2s cubic-bezier(0.550, 0.055, 0.675, 0.190)"})},20)},200)}}}(jQuery),function(a){Materialize.fadeInImage=function(b){var c;if("string"==typeof b)c=a(b);else{if("object"!=typeof b)return;c=b}c.css({opacity:0}),a(c).velocity({opacity:1},{duration:650,queue:!1,easing:"easeOutSine"}),a(c).velocity({opacity:1},{duration:1300,queue:!1,easing:"swing",step:function(b,c){c.start=100;var d=b/100,e=150-(100-b)/1.75;e<100&&(e=100),b>=0&&a(this).css({"-webkit-filter":"grayscale("+d+")brightness("+e+"%)",filter:"grayscale("+d+")brightness("+e+"%)"})}})},Materialize.showStaggeredList=function(b){var c;if("string"==typeof b)c=a(b);else{if("object"!=typeof b)return;c=b}var d=0;c.find("li").velocity({translateX:"-100px"},{duration:0}),c.find("li").each(function(){a(this).velocity({opacity:"1",translateX:"0"},{duration:800,delay:d,easing:[60,10]}),d+=120})},a(document).ready(function(){var b=!1,c=!1;a(".dismissable").each(function(){a(this).hammer({prevent_default:!1}).bind("pan",function(d){if("touch"===d.gesture.pointerType){var e=a(this),f=d.gesture.direction,g=d.gesture.deltaX,h=d.gesture.velocityX;e.velocity({translateX:g},{duration:50,queue:!1,easing:"easeOutQuad"}),4===f&&(g>e.innerWidth()/2||h<-.75)&&(b=!0),2===f&&(g<-1*e.innerWidth()/2||h>.75)&&(c=!0)}}).bind("panend",function(d){if(Math.abs(d.gesture.deltaX)<a(this).innerWidth()/2&&(c=!1,b=!1),"touch"===d.gesture.pointerType){var e=a(this);if(b||c){var f;f=b?e.innerWidth():-1*e.innerWidth(),e.velocity({translateX:f},{duration:100,queue:!1,easing:"easeOutQuad",complete:function(){e.css("border","none"),e.velocity({height:0,padding:0},{duration:200,queue:!1,easing:"easeOutQuad",complete:function(){e.remove()}})}})}else e.velocity({translateX:0},{duration:100,queue:!1,easing:"easeOutQuad"});b=!1,c=!1}})})})}(jQuery),function(a){var b=!1;Materialize.scrollFire=function(a){var c=function(){for(var b=window.pageYOffset+window.innerHeight,c=0;c<a.length;c++){var d=a[c],e=d.selector,f=d.offset,g=d.callback,h=document.querySelector(e);if(null!==h){if(b>h.getBoundingClientRect().top+window.pageYOffset+f&&!0!==d.done){if("function"==typeof g)g.call(this,h);else if("string"==typeof g){var j=new Function(g);j(h)}d.done=!0}}}},d=Materialize.throttle(function(){c()},a.throttle||100);b||(window.addEventListener("scroll",d),window.addEventListener("resize",d),b=!0),setTimeout(d,0)}}(),function(a){"function"==typeof define&&define.amd?define("picker",["jquery"],a):"object"==typeof exports?module.exports=a(require("jquery")):this.Picker=a(jQuery)}(function(a){function b(f,g,i,l){function m(){return b._.node("div",b._.node("div",b._.node("div",b._.node("div",y.component.nodes(t.open),v.box),v.wrap),v.frame),v.holder)}function n(){w.data(g,y).addClass(v.input).attr("tabindex",-1).val(w.data("value")?y.get("select",u.format):f.value),u.editable||w.on("focus."+t.id+" click."+t.id,function(a){a.preventDefault(),y.$root.eq(0).focus()}).on("keydown."+t.id,q),e(f,{haspopup:!0,expanded:!1,readonly:!1,owns:f.id+"_root"})}function o(){y.$root.on({keydown:q,focusin:function(a){y.$root.removeClass(v.focused),a.stopPropagation()},"mousedown click":function(b){var c=b.target;c!=y.$root.children()[0]&&(b.stopPropagation(),"mousedown"!=b.type||a(c).is("input, select, textarea, button, option")||(b.preventDefault(),y.$root.eq(0).focus()))}}).on({focus:function(){w.addClass(v.target)},blur:function(){w.removeClass(v.target)}}).on("focus.toOpen",r).on("click","[data-pick], [data-nav], [data-clear], [data-close]",function(){var b=a(this),c=b.data(),d=b.hasClass(v.navDisabled)||b.hasClass(v.disabled),e=h();e=e&&(e.type||e.href),(d||e&&!a.contains(y.$root[0],e))&&y.$root.eq(0).focus(),!d&&c.nav?y.set("highlight",y.component.item.highlight,{nav:c.nav}):!d&&"pick"in c?y.set("select",c.pick):c.clear?y.clear().close(!0):c.close&&y.close(!0)}),e(y.$root[0],"hidden",!0)}function p(){var b;!0===u.hiddenName?(b=f.name,f.name=""):(b=["string"==typeof u.hiddenPrefix?u.hiddenPrefix:"","string"==typeof u.hiddenSuffix?u.hiddenSuffix:"_submit"],b=b[0]+f.name+b[1]),y._hidden=a('<input type=hidden name="'+b+'"'+(w.data("value")||f.value?' value="'+y.get("select",u.formatSubmit)+'"':"")+">")[0],w.on("change."+t.id,function(){y._hidden.value=f.value?y.get("select",u.formatSubmit):""}),u.container?a(u.container).append(y._hidden):w.after(y._hidden)}function q(a){var b=a.keyCode,c=/^(8|46)$/.test(b);return 27==b?(y.close(),!1):void((32==b||c||!t.open&&y.component.key[b])&&(a.preventDefault(),a.stopPropagation(),c?y.clear().close():y.open()))}function r(a){a.stopPropagation(),"focus"==a.type&&y.$root.addClass(v.focused),y.open()}if(!f)return b;var s=!1,t={id:f.id||"P"+Math.abs(~~(Math.random()*new Date))},u=i?a.extend(!0,{},i.defaults,l):l||{},v=a.extend({},b.klasses(),u.klass),w=a(f),x=function(){return this.start()},y=x.prototype={constructor:x,$node:w,start:function(){return t&&t.start?y:(t.methods={},t.start=!0,t.open=!1,t.type=f.type,f.autofocus=f==h(),f.readOnly=!u.editable,f.id=f.id||t.id,"text"!=f.type&&(f.type="text"),y.component=new i(y,u),y.$root=a(b._.node("div",m(),v.picker,'id="'+f.id+'_root" tabindex="0"')),o(),u.formatSubmit&&p(),n(),u.container?a(u.container).append(y.$root):w.after(y.$root),y.on({start:y.component.onStart,render:y.component.onRender,stop:y.component.onStop,open:y.component.onOpen,close:y.component.onClose,set:y.component.onSet}).on({start:u.onStart,render:u.onRender,stop:u.onStop,open:u.onOpen,close:u.onClose,set:u.onSet}),s=c(y.$root.children()[0]),f.autofocus&&y.open(),y.trigger("start").trigger("render"))},render:function(a){return a?y.$root.html(m()):y.$root.find("."+v.box).html(y.component.nodes(t.open)),y.trigger("render")},stop:function(){return t.start?(y.close(),y._hidden&&y._hidden.parentNode.removeChild(y._hidden),y.$root.remove(),w.removeClass(v.input).removeData(g),setTimeout(function(){w.off("."+t.id)},0),f.type=t.type,f.readOnly=!1,y.trigger("stop"),t.methods={},t.start=!1,y):y},open:function(c){return t.open?y:(w.addClass(v.active),e(f,"expanded",!0),setTimeout(function(){y.$root.addClass(v.opened),e(y.$root[0],"hidden",!1)},0),!1!==c&&(t.open=!0,s&&k.css("overflow","hidden").css("padding-right","+="+d()),y.$root.eq(0).focus(),j.on("click."+t.id+" focusin."+t.id,function(a){var b=a.target;b!=f&&b!=document&&3!=a.which&&y.close(b===y.$root.children()[0])}).on("keydown."+t.id,function(c){var d=c.keyCode,e=y.component.key[d],f=c.target;27==d?y.close(!0):f!=y.$root[0]||!e&&13!=d?a.contains(y.$root[0],f)&&13==d&&(c.preventDefault(),f.click()):(c.preventDefault(),e?b._.trigger(y.component.key.go,y,[b._.trigger(e)]):y.$root.find("."+v.highlighted).hasClass(v.disabled)||y.set("select",y.component.item.highlight).close())})),y.trigger("open"))},close:function(a){return a&&(y.$root.off("focus.toOpen").eq(0).focus(),setTimeout(function(){y.$root.on("focus.toOpen",r)},0)),w.removeClass(v.active),e(f,"expanded",!1),setTimeout(function(){y.$root.removeClass(v.opened+" "+v.focused),e(y.$root[0],"hidden",!0)},0),t.open?(t.open=!1,s&&k.css("overflow","").css("padding-right","-="+d()),j.off("."+t.id),y.trigger("close")):y},clear:function(a){return y.set("clear",null,a)},set:function(b,c,d){var e,f,g=a.isPlainObject(b),h=g?b:{};if(d=g&&a.isPlainObject(c)?c:d||{},b){g||(h[b]=c);for(e in h)f=h[e],e in y.component.item&&(void 0===f&&(f=null),y.component.set(e,f,d)),"select"!=e&&"clear"!=e||w.val("clear"==e?"":y.get(e,u.format)).trigger("change");y.render()}return d.muted?y:y.trigger("set",h)},get:function(a,c){if(a=a||"value",null!=t[a])return t[a];if("valueSubmit"==a){if(y._hidden)return y._hidden.value;a="value"}if("value"==a)return f.value;if(a in y.component.item){if("string"==typeof c){var d=y.component.get(a);return d?b._.trigger(y.component.formats.toString,y.component,[c,d]):""}return y.component.get(a)}},on:function(b,c,d){var e,f,g=a.isPlainObject(b),h=g?b:{};if(b){g||(h[b]=c);for(e in h)f=h[e],d&&(e="_"+e),t.methods[e]=t.methods[e]||[],t.methods[e].push(f)}return y},off:function(){var a,b,c=arguments;for(a=0,namesCount=c.length;a<namesCount;a+=1)(b=c[a])in t.methods&&delete t.methods[b];return y},trigger:function(a,c){var d=function(a){var d=t.methods[a];d&&d.map(function(a){b._.trigger(a,y,[c])})};return d("_"+a),d(a),y}};return new x}function c(a){var b,c="position";return a.currentStyle?b=a.currentStyle[c]:window.getComputedStyle&&(b=getComputedStyle(a)[c]),"fixed"==b}function d(){if(k.height()<=i.height())return 0;var b=a('<div style="visibility:hidden;width:100px" />').appendTo("body"),c=b[0].offsetWidth;b.css("overflow","scroll");var d=a('<div style="width:100%" />').appendTo(b),e=d[0].offsetWidth;return b.remove(),c-e}function e(b,c,d){if(a.isPlainObject(c))for(var e in c)f(b,e,c[e]);else f(b,c,d)}function f(a,b,c){a.setAttribute(("role"==b?"":"aria-")+b,c)}function g(b,c){a.isPlainObject(b)||(b={attribute:c}),c="";for(var d in b){var e=("role"==d?"":"aria-")+d;c+=null==b[d]?"":e+'="'+b[d]+'"'}return c}function h(){try{return document.activeElement}catch(a){}}var i=a(window),j=a(document),k=a(document.documentElement);return b.klasses=function(a){return a=a||"picker",{picker:a,opened:a+"--opened",focused:a+"--focused",input:a+"__input",active:a+"__input--active",target:a+"__input--target",holder:a+"__holder",frame:a+"__frame",wrap:a+"__wrap",box:a+"__box"}},b._={group:function(a){for(var c,d="",e=b._.trigger(a.min,a);e<=b._.trigger(a.max,a,[e]);e+=a.i)c=b._.trigger(a.item,a,[e]),d+=b._.node(a.node,c[0],c[1],c[2]);return d},node:function(b,c,d,e){return c?(c=a.isArray(c)?c.join(""):c,d=d?' class="'+d+'"':"",e=e?" "+e:"","<"+b+d+e+">"+c+"</"+b+">"):""},lead:function(a){return(a<10?"0":"")+a},trigger:function(a,b,c){return"function"==typeof a?a.apply(b,c||[]):a},digits:function(a){return/\d/.test(a[1])?2:1},isDate:function(a){return{}.toString.call(a).indexOf("Date")>-1&&this.isInteger(a.getDate())},isInteger:function(a){return{}.toString.call(a).indexOf("Number")>-1&&a%1==0},ariaAttr:g},b.extend=function(c,d){a.fn[c]=function(e,f){var g=this.data(c);return"picker"==e?g:g&&"string"==typeof e?b._.trigger(g[e],g,[f]):this.each(function(){a(this).data(c)||new b(this,c,d,e)})},a.fn[c].defaults=d.defaults},b}),function(a){"function"==typeof define&&define.amd?define(["picker","jquery"],a):"object"==typeof exports?module.exports=a(require("./picker.js"),require("jquery")):a(Picker,jQuery)}(function(a,b){function c(a,b){var c=this,d=a.$node[0],e=d.value,f=a.$node.data("value"),g=f||e,h=f?b.formatSubmit:b.format,i=function(){return d.currentStyle?"rtl"==d.currentStyle.direction:"rtl"==getComputedStyle(a.$root[0]).direction};c.settings=b,c.$node=a.$node,c.queue={min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"parse navigate create validate",view:"parse create validate viewset",disable:"deactivate",enable:"activate"},c.item={},c.item.clear=null,c.item.disable=(b.disable||[]).slice(0),c.item.enable=-function(a){return!0===a[0]?a.shift():-1}(c.item.disable),c.set("min",b.min).set("max",b.max).set("now"),g?c.set("select",g,{format:h}):c.set("select",null).set("highlight",c.item.now),c.key={40:7,38:-7,39:function(){return i()?-1:1},37:function(){return i()?1:-1},go:function(a){var b=c.item.highlight,d=new Date(b.year,b.month,b.date+a);c.set("highlight",d,{interval:a}),this.render()}},a.on("render",function(){a.$root.find("."+b.klass.selectMonth).on("change",function(){var c=this.value;c&&(a.set("highlight",[a.get("view").year,c,a.get("highlight").date]),a.$root.find("."+b.klass.selectMonth).trigger("focus"))}),a.$root.find("."+b.klass.selectYear).on("change",function(){var c=this.value;c&&(a.set("highlight",[c,a.get("view").month,a.get("highlight").date]),a.$root.find("."+b.klass.selectYear).trigger("focus"))})},1).on("open",function(){var d="";c.disabled(c.get("now"))&&(d=":not(."+b.klass.buttonToday+")"),a.$root.find("button"+d+", select").attr("disabled",!1)},1).on("close",function(){a.$root.find("button, select").attr("disabled",!0)},1)}var f=a._;c.prototype.set=function(a,b,c){var d=this,e=d.item;return null===b?("clear"==a&&(a="select"),e[a]=b,d):(e["enable"==a?"disable":"flip"==a?"enable":a]=d.queue[a].split(" ").map(function(e){return b=d[e](a,b,c)}).pop(),"select"==a?d.set("highlight",e.select,c):"highlight"==a?d.set("view",e.highlight,c):a.match(/^(flip|min|max|disable|enable)$/)&&(e.select&&d.disabled(e.select)&&d.set("select",e.select,c),e.highlight&&d.disabled(e.highlight)&&d.set("highlight",e.highlight,c)),d)},c.prototype.get=function(a){return this.item[a]},c.prototype.create=function(a,c,d){var e,g=this;return c=void 0===c?a:c,c==-1/0||c==1/0?e=c:b.isPlainObject(c)&&f.isInteger(c.pick)?c=c.obj:b.isArray(c)?(c=new Date(c[0],c[1],c[2]),c=f.isDate(c)?c:g.create().obj):c=f.isInteger(c)||f.isDate(c)?g.normalize(new Date(c),d):g.now(a,c,d),{year:e||c.getFullYear(),month:e||c.getMonth(),date:e||c.getDate(),day:e||c.getDay(),obj:e||c,pick:e||c.getTime()}},c.prototype.createRange=function(a,c){var d=this,e=function(a){return!0===a||b.isArray(a)||f.isDate(a)?d.create(a):a};return f.isInteger(a)||(a=e(a)),f.isInteger(c)||(c=e(c)),f.isInteger(a)&&b.isPlainObject(c)?a=[c.year,c.month,c.date+a]:f.isInteger(c)&&b.isPlainObject(a)&&(c=[a.year,a.month,a.date+c]),{from:e(a),to:e(c)}},c.prototype.withinRange=function(a,b){return a=this.createRange(a.from,a.to),b.pick>=a.from.pick&&b.pick<=a.to.pick},c.prototype.overlapRanges=function(a,b){var c=this;return a=c.createRange(a.from,a.to),b=c.createRange(b.from,b.to),c.withinRange(a,b.from)||c.withinRange(a,b.to)||c.withinRange(b,a.from)||c.withinRange(b,a.to)},c.prototype.now=function(a,b,c){return b=new Date,c&&c.rel&&b.setDate(b.getDate()+c.rel),this.normalize(b,c)},c.prototype.navigate=function(a,c,d){var e,f,g,h,i=b.isArray(c),j=b.isPlainObject(c),k=this.item.view;if(i||j){for(j?(f=c.year,g=c.month,h=c.date):(f=+c[0],g=+c[1],h=+c[2]),d&&d.nav&&k&&k.month!==g&&(f=k.year,g=k.month),e=new Date(f,g+(d&&d.nav?d.nav:0),1),f=e.getFullYear(),g=e.getMonth();new Date(f,g,h).getMonth()!==g;)h-=1;c=[f,g,h]}return c},c.prototype.normalize=function(a){return a.setHours(0,0,0,0),a},c.prototype.measure=function(a,b){var c=this;return b?"string"==typeof b?b=c.parse(a,b):f.isInteger(b)&&(b=c.now(a,b,{rel:b})):b="min"==a?-1/0:1/0,b},c.prototype.viewset=function(a,b){return this.create([b.year,b.month,1])},c.prototype.validate=function(a,c,d){var e,g,h,i,j=this,k=c,l=d&&d.interval?d.interval:1,m=-1===j.item.enable,n=j.item.min,o=j.item.max,p=m&&j.item.disable.filter(function(a){if(b.isArray(a)){var d=j.create(a).pick;d<c.pick?e=!0:d>c.pick&&(g=!0)}return f.isInteger(a)}).length;if((!d||!d.nav)&&(!m&&j.disabled(c)||m&&j.disabled(c)&&(p||e||g)||!m&&(c.pick<=n.pick||c.pick>=o.pick)))for(m&&!p&&(!g&&l>0||!e&&l<0)&&(l*=-1);j.disabled(c)&&(Math.abs(l)>1&&(c.month<k.month||c.month>k.month)&&(c=k,l=l>0?1:-1),c.pick<=n.pick?(h=!0,l=1,c=j.create([n.year,n.month,n.date+(c.pick===n.pick?0:-1)])):c.pick>=o.pick&&(i=!0,l=-1,c=j.create([o.year,o.month,o.date+(c.pick===o.pick?0:1)])),!h||!i);)c=j.create([c.year,c.month,c.date+l]);return c},c.prototype.disabled=function(a){var c=this,d=c.item.disable.filter(function(d){return f.isInteger(d)?a.day===(c.settings.firstDay?d:d-1)%7:b.isArray(d)||f.isDate(d)?a.pick===c.create(d).pick:b.isPlainObject(d)?c.withinRange(d,a):void 0});return d=d.length&&!d.filter(function(a){return b.isArray(a)&&"inverted"==a[3]||b.isPlainObject(a)&&a.inverted}).length,-1===c.item.enable?!d:d||a.pick<c.item.min.pick||a.pick>c.item.max.pick},c.prototype.parse=function(a,b,c){var d=this,e={};return b&&"string"==typeof b?(c&&c.format||(c=c||{},c.format=d.settings.format),d.formats.toArray(c.format).map(function(a){var c=d.formats[a],g=c?f.trigger(c,d,[b,e]):a.replace(/^!/,"").length;c&&(e[a]=b.substr(0,g)),b=b.substr(g)}),[e.yyyy||e.yy,+(e.mm||e.m)-1,e.dd||e.d]):b},c.prototype.formats=function(){function a(a,b,c){var d=a.match(/\w+/)[0];return c.mm||c.m||(c.m=b.indexOf(d)+1),d.length}function b(a){return a.match(/\w+/)[0].length}return{d:function(a,b){return a?f.digits(a):b.date},dd:function(a,b){return a?2:f.lead(b.date)},ddd:function(a,c){return a?b(a):this.settings.weekdaysShort[c.day]},dddd:function(a,c){return a?b(a):this.settings.weekdaysFull[c.day]},m:function(a,b){return a?f.digits(a):b.month+1},mm:function(a,b){return a?2:f.lead(b.month+1)},mmm:function(b,c){var d=this.settings.monthsShort;return b?a(b,d,c):d[c.month]},mmmm:function(b,c){var d=this.settings.monthsFull;return b?a(b,d,c):d[c.month]},yy:function(a,b){return a?2:(""+b.year).slice(2)},yyyy:function(a,b){return a?4:b.year},toArray:function(a){return a.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g)},toString:function(a,b){var c=this;return c.formats.toArray(a).map(function(a){return f.trigger(c.formats[a],c,[0,b])||a.replace(/^!/,"")}).join("")}}}(),c.prototype.isDateExact=function(a,c){var d=this;return f.isInteger(a)&&f.isInteger(c)||"boolean"==typeof a&&"boolean"==typeof c?a===c:(f.isDate(a)||b.isArray(a))&&(f.isDate(c)||b.isArray(c))?d.create(a).pick===d.create(c).pick:!(!b.isPlainObject(a)||!b.isPlainObject(c))&&d.isDateExact(a.from,c.from)&&d.isDateExact(a.to,c.to)},c.prototype.isDateOverlap=function(a,c){var d=this,e=d.settings.firstDay?1:0;return f.isInteger(a)&&(f.isDate(c)||b.isArray(c))?(a=a%7+e)===d.create(c).day+1:f.isInteger(c)&&(f.isDate(a)||b.isArray(a))?(c=c%7+e)===d.create(a).day+1:!(!b.isPlainObject(a)||!b.isPlainObject(c))&&d.overlapRanges(a,c)},c.prototype.flipEnable=function(a){var b=this.item;b.enable=a||(-1==b.enable?1:-1)},c.prototype.deactivate=function(a,c){var d=this,e=d.item.disable.slice(0);return"flip"==c?d.flipEnable():!1===c?(d.flipEnable(1),e=[]):!0===c?(d.flipEnable(-1),e=[]):c.map(function(a){for(var c,g=0;g<e.length;g+=1)if(d.isDateExact(a,e[g])){c=!0;break}c||(f.isInteger(a)||f.isDate(a)||b.isArray(a)||b.isPlainObject(a)&&a.from&&a.to)&&e.push(a)}),e},c.prototype.activate=function(a,c){var d=this,e=d.item.disable,g=e.length;return"flip"==c?d.flipEnable():!0===c?(d.flipEnable(1),e=[]):!1===c?(d.flipEnable(-1),e=[]):c.map(function(a){var c,h,i,j;for(i=0;i<g;i+=1){if(h=e[i],d.isDateExact(h,a)){c=e[i]=null,j=!0;break}if(d.isDateOverlap(h,a)){b.isPlainObject(a)?(a.inverted=!0,c=a):b.isArray(a)?(c=a,c[3]||c.push("inverted")):f.isDate(a)&&(c=[a.getFullYear(),a.getMonth(),a.getDate(),"inverted"]);break}}if(c)for(i=0;i<g;i+=1)if(d.isDateExact(e[i],a)){e[i]=null;break}if(j)for(i=0;i<g;i+=1)if(d.isDateOverlap(e[i],a)){e[i]=null;break}c&&e.push(c)}),e.filter(function(a){return null!=a})},c.prototype.nodes=function(a){var b=this,c=b.settings,g=b.item,h=g.now,i=g.select,j=g.highlight,k=g.view,l=g.disable,m=g.min,n=g.max,o=function(a,b){return c.firstDay&&(a.push(a.shift()),b.push(b.shift())),f.node("thead",f.node("tr",f.group({min:0,max:6,i:1,node:"th",item:function(d){return[a[d],c.klass.weekdays,'scope=col title="'+b[d]+'"']}})))}((c.showWeekdaysFull?c.weekdaysFull:c.weekdaysLetter).slice(0),c.weekdaysFull.slice(0)),p=function(a){return f.node("div"," ",c.klass["nav"+(a?"Next":"Prev")]+(a&&k.year>=n.year&&k.month>=n.month||!a&&k.year<=m.year&&k.month<=m.month?" "+c.klass.navDisabled:""),"data-nav="+(a||-1)+" "+f.ariaAttr({role:"button",controls:b.$node[0].id+"_table"})+' title="'+(a?c.labelMonthNext:c.labelMonthPrev)+'"')},q=function(d){var e=c.showMonthsShort?c.monthsShort:c.monthsFull;return"short_months"==d&&(e=c.monthsShort),c.selectMonths&&void 0==d?f.node("select",f.group({min:0,max:11,i:1,node:"option",item:function(a){return[e[a],0,"value="+a+(k.month==a?" selected":"")+(k.year==m.year&&a<m.month||k.year==n.year&&a>n.month?" disabled":"")]}}),c.klass.selectMonth+" browser-default",(a?"":"disabled")+" "+f.ariaAttr({controls:b.$node[0].id+"_table"})+' title="'+c.labelMonthSelect+'"'):"short_months"==d?null!=i?f.node("div",e[i.month]):f.node("div",e[k.month]):f.node("div",e[k.month],c.klass.month)},r=function(d){var e=k.year,g=!0===c.selectYears?5:~~(c.selectYears/2);if(g){var h=m.year,i=n.year,j=e-g,l=e+g;if(h>j&&(l+=h-j,j=h),i<l){var o=j-h,p=l-i;j-=o>p?p:o,l=i}if(c.selectYears&&void 0==d)return f.node("select",f.group({min:j,max:l,i:1,node:"option",item:function(a){return[a,0,"value="+a+(e==a?" selected":"")]}}),c.klass.selectYear+" browser-default",(a?"":"disabled")+" "+f.ariaAttr({controls:b.$node[0].id+"_table"})+' title="'+c.labelYearSelect+'"')}return"raw"==d?f.node("div",e):f.node("div",e,c.klass.year)};return createDayLabel=function(){return null!=i?f.node("div",i.date):f.node("div",h.date)},createWeekdayLabel=function(){var a;return a=null!=i?i.day:h.day,c.weekdaysFull[a]},f.node("div",f.node("div",createWeekdayLabel(),"picker__weekday-display")+f.node("div",q("short_months"),c.klass.month_display)+f.node("div",createDayLabel(),c.klass.day_display)+f.node("div",r("raw"),c.klass.year_display),c.klass.date_display)+f.node("div",f.node("div",(c.selectYears,q()+r()+p()+p(1)),c.klass.header)+f.node("table",o+f.node("tbody",f.group({min:0,max:5,i:1,node:"tr",item:function(a){var e=c.firstDay&&0===b.create([k.year,k.month,1]).day?-7:0;return[f.group({min:7*a-k.day+e+1,max:function(){return this.min+7-1},i:1,node:"td",item:function(a){a=b.create([k.year,k.month,a+(c.firstDay?1:0)]);var d=i&&i.pick==a.pick,e=j&&j.pick==a.pick,g=l&&b.disabled(a)||a.pick<m.pick||a.pick>n.pick,o=f.trigger(b.formats.toString,b,[c.format,a]);return[f.node("div",a.date,function(b){return b.push(k.month==a.month?c.klass.infocus:c.klass.outfocus),h.pick==a.pick&&b.push(c.klass.now),d&&b.push(c.klass.selected),e&&b.push(c.klass.highlighted),g&&b.push(c.klass.disabled),b.join(" ")}([c.klass.day]),"data-pick="+a.pick+" "+f.ariaAttr({role:"gridcell",label:o,selected:!(!d||b.$node.val()!==o)||null,activedescendant:!!e||null,disabled:!!g||null})),"",f.ariaAttr({role:"presentation"})]}})]}})),c.klass.table,'id="'+b.$node[0].id+'_table" '+f.ariaAttr({role:"grid",controls:b.$node[0].id,readonly:!0})),c.klass.calendar_container)+f.node("div",f.node("button",c.today,"btn-flat picker__today","type=button data-pick="+h.pick+(a&&!b.disabled(h)?"":" disabled")+" "+f.ariaAttr({controls:b.$node[0].id}))+f.node("button",c.clear,"btn-flat picker__clear","type=button data-clear=1"+(a?"":" disabled")+" "+f.ariaAttr({controls:b.$node[0].id}))+f.node("button",c.close,"btn-flat picker__close","type=button data-close=true "+(a?"":" disabled")+" "+f.ariaAttr({controls:b.$node[0].id})),c.klass.footer)},c.defaults=function(a){return{labelMonthNext:"Next month",labelMonthPrev:"Previous month",labelMonthSelect:"Select a month",labelYearSelect:"Select a year",monthsFull:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdaysFull:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysLetter:["S","M","T","W","T","F","S"],today:"Today",clear:"Clear",close:"Close",format:"d mmmm, yyyy",klass:{table:a+"table",header:a+"header",date_display:a+"date-display",day_display:a+"day-display",month_display:a+"month-display",year_display:a+"year-display",calendar_container:a+"calendar-container",navPrev:a+"nav--prev",navNext:a+"nav--next",navDisabled:a+"nav--disabled",month:a+"month",year:a+"year",selectMonth:a+"select--month",selectYear:a+"select--year",weekdays:a+"weekday",day:a+"day",disabled:a+"day--disabled",selected:a+"day--selected",highlighted:a+"day--highlighted",now:a+"day--today",infocus:a+"day--infocus",outfocus:a+"day--outfocus",footer:a+"footer",buttonClear:a+"button--clear",buttonToday:a+"button--today",buttonClose:a+"button--close"}}}(a.klasses().picker+"__"),a.extend("pickadate",c)}),function(a){function b(){var b=+a(this).attr("data-length"),c=+a(this).val().length,d=c<=b;a(this).parent().find('span[class="character-counter"]').html(c+"/"+b),e(d,a(this))}function c(b){var c=b.parent().find('span[class="character-counter"]');c.length||(c=a("<span/>").addClass("character-counter").css("float","right").css("font-size","12px").css("height",1),b.parent().append(c))}function d(){a(this).parent().find('span[class="character-counter"]').html("")}function e(a,b){var c=b.hasClass("invalid");a&&c?b.removeClass("invalid"):a||c||(b.removeClass("valid"),b.addClass("invalid"))}a.fn.characterCounter=function(){return this.each(function(){var e=a(this);e.parent().find('span[class="character-counter"]').length||void 0!==e.attr("data-length")&&(e.on("input",b),e.on("focus",b),e.on("blur",d),c(e))})},a(document).ready(function(){a("input, textarea").characterCounter()})}(jQuery),function(a){var b={init:function(b){var c={duration:200,dist:-100,shift:0,padding:0,fullWidth:!1,indicators:!1,noWrap:!1,onCycleTo:null};b=a.extend(c,b)
;var d=Materialize.objectSelectorString(a(this));return this.each(function(c){function f(a){return a.targetTouches&&a.targetTouches.length>=1?a.targetTouches[0].clientX:a.clientX}function g(a){return a.targetTouches&&a.targetTouches.length>=1?a.targetTouches[0].clientY:a.clientY}function h(a){return a>=x?a%x:a<0?h(x+a%x):a}function i(c){E=!0,O.hasClass("scrolling")||O.addClass("scrolling"),null!=N&&window.clearTimeout(N),N=window.setTimeout(function(){E=!1,O.removeClass("scrolling")},b.duration);var d,e,f,g,i,j,k,l=u;if(t="number"==typeof c?c:t,u=Math.floor((t+w/2)/w),f=t-u*w,g=f<0?1:-1,i=-g*f*2/w,e=x>>1,b.fullWidth?k="translateX(0)":(k="translateX("+(O[0].clientWidth-r)/2+"px) ",k+="translateY("+(O[0].clientHeight-s)/2+"px)"),P){var m=u%x,n=M.find(".indicator-item.active");n.index()!==m&&(n.removeClass("active"),M.find(".indicator-item").eq(m).addClass("active"))}for((!b.noWrap||u>=0&&u<x)&&(j=q[h(u)],a(j).hasClass("active")||(O.find(".carousel-item").removeClass("active"),a(j).addClass("active")),j.style[F]=k+" translateX("+-f/2+"px) translateX("+g*b.shift*i*d+"px) translateZ("+b.dist*i+"px)",j.style.zIndex=0,b.fullWidth?tweenedOpacity=1:tweenedOpacity=1-.2*i,j.style.opacity=tweenedOpacity,j.style.display="block"),d=1;d<=e;++d)b.fullWidth?(zTranslation=b.dist,tweenedOpacity=d===e&&f<0?1-i:1):(zTranslation=b.dist*(2*d+i*g),tweenedOpacity=1-.2*(2*d+i*g)),(!b.noWrap||u+d<x)&&(j=q[h(u+d)],j.style[F]=k+" translateX("+(b.shift+(w*d-f)/2)+"px) translateZ("+zTranslation+"px)",j.style.zIndex=-d,j.style.opacity=tweenedOpacity,j.style.display="block"),b.fullWidth?(zTranslation=b.dist,tweenedOpacity=d===e&&f>0?1-i:1):(zTranslation=b.dist*(2*d-i*g),tweenedOpacity=1-.2*(2*d-i*g)),(!b.noWrap||u-d>=0)&&(j=q[h(u-d)],j.style[F]=k+" translateX("+(-b.shift+(-w*d-f)/2)+"px) translateZ("+zTranslation+"px)",j.style.zIndex=-d,j.style.opacity=tweenedOpacity,j.style.display="block");if((!b.noWrap||u>=0&&u<x)&&(j=q[h(u)],j.style[F]=k+" translateX("+-f/2+"px) translateX("+g*b.shift*i+"px) translateZ("+b.dist*i+"px)",j.style.zIndex=0,b.fullWidth?tweenedOpacity=1:tweenedOpacity=1-.2*i,j.style.opacity=tweenedOpacity,j.style.display="block"),l!==u&&"function"==typeof b.onCycleTo){var o=O.find(".carousel-item").eq(h(u));b.onCycleTo.call(this,o,J)}}function j(){var a,b,c,d;a=Date.now(),b=a-H,H=a,c=t-G,G=t,d=1e3*c/(1+b),D=.8*d+.2*D}function k(){var a,c;B&&(a=Date.now()-H,c=B*Math.exp(-a/b.duration),c>2||c<-2?(i(C-c),requestAnimationFrame(k)):i(C))}function l(c){if(J)return c.preventDefault(),c.stopPropagation(),!1;if(!b.fullWidth){var d=a(c.target).closest(".carousel-item").index();0!==u%x-d&&(c.preventDefault(),c.stopPropagation()),m(d)}}function m(a){var c=u%x-a;b.noWrap||(c<0?Math.abs(c+x)<Math.abs(c)&&(c+=x):c>0&&Math.abs(c-x)<c&&(c-=x)),c<0?O.trigger("carouselNext",[Math.abs(c)]):c>0&&O.trigger("carouselPrev",[c])}function n(a){a.preventDefault(),v=!0,J=!1,K=!1,z=f(a),A=g(a),D=B=0,G=t,H=Date.now(),clearInterval(I),I=setInterval(j,100)}function o(a){var b,c;if(v)if(b=f(a),y=g(a),c=z-b,Math.abs(A-y)<30&&!K)(c>2||c<-2)&&(J=!0,z=b,i(t+c));else{if(J)return a.preventDefault(),a.stopPropagation(),!1;K=!0}if(J)return a.preventDefault(),a.stopPropagation(),!1}function p(a){if(v)return v=!1,clearInterval(I),C=t,(D>10||D<-10)&&(B=.9*D,C=t+B),C=Math.round(C/w)*w,b.noWrap&&(C>=w*(x-1)?C=w*(x-1):C<0&&(C=0)),B=C-t,H=Date.now(),requestAnimationFrame(k),J&&(a.preventDefault(),a.stopPropagation()),!1}var q,r,s,t,u,v,w,x,z,A,B,C,D,E,F,G,H,I,J,K,L=d+c,M=a('<ul class="indicators"></ul>'),N=null,O=a(this),P=O.attr("data-indicators")||b.indicators;return b.fullWidth&&(b.dist=0,function(){var b=O.find(".carousel-item img").first();if(b.length)b.prop("complete")?O.css("height",b.height()):b.on("load",function(){O.css("height",a(this).height())});else{var c=O.find(".carousel-item").first().height();O.css("height",c)}}(),P&&O.find(".carousel-fixed-item").addClass("with-indicators")),O.hasClass("initialized")?(a(window).trigger("resize"),a(this).trigger("carouselNext",[1e-6]),!0):(O.addClass("initialized"),v=!1,t=C=0,q=[],r=O.find(".carousel-item").first().innerWidth(),s=O.find(".carousel-item").first().innerHeight(),w=2*r+b.padding,O.find(".carousel-item").each(function(b){if(q.push(a(this)[0]),P){var c=a('<li class="indicator-item"></li>');0===b&&c.addClass("active"),c.click(function(b){b.stopPropagation(),m(a(this).index())}),M.append(c)}}),P&&O.append(M),x=q.length,F="transform",["webkit","Moz","O","ms"].every(function(a){var b=a+"Transform";return void 0===document.body.style[b]||(F=b,!1)}),a(window).off("resize.carousel-"+L).on("resize.carousel-"+L,function(){b.fullWidth?(r=O.find(".carousel-item").first().innerWidth(),s=O.find(".carousel-item").first().innerHeight(),w=2*r+b.padding,t=2*u*r,C=t):i()}),function(){void 0!==window.ontouchstart&&(O[0].addEventListener("touchstart",n),O[0].addEventListener("touchmove",o),O[0].addEventListener("touchend",p)),O[0].addEventListener("mousedown",n),O[0].addEventListener("mousemove",o),O[0].addEventListener("mouseup",p),O[0].addEventListener("mouseleave",p),O[0].addEventListener("click",l)}(),i(t),a(this).on("carouselNext",function(a,b){void 0===b&&(b=1),C=w*Math.round(t/w)+w*b,t!==C&&(B=C-t,H=Date.now(),requestAnimationFrame(k))}),a(this).on("carouselPrev",function(a,b){void 0===b&&(b=1),C=w*Math.round(t/w)-w*b,t!==C&&(B=C-t,H=Date.now(),requestAnimationFrame(k))}),void a(this).on("carouselSet",function(a,b){void 0===b&&(b=0),m(b)}))})},next:function(b){a(this).trigger("carouselNext",[b])},prev:function(b){a(this).trigger("carouselPrev",[b])},set:function(b){a(this).trigger("carouselSet",[b])}};a.fn.carousel=function(c){return b[c]?b[c].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof c&&c?void a.error("Method "+c+" does not exist on jQuery.carousel"):b.init.apply(this,arguments)}}(jQuery),function(a){var b={init:function(b){return this.each(function(){var c=a("#"+a(this).attr("data-activates")),d=(a("body"),a(this)),e=d.parent(".tap-target-wrapper"),f=e.find(".tap-target-wave"),g=e.find(".tap-target-origin"),h=d.find(".tap-target-content");e.length||(e=d.wrap(a('<div class="tap-target-wrapper"></div>')).parent()),h.length||(h=a('<div class="tap-target-content"></div>'),d.append(h)),f.length||(f=a('<div class="tap-target-wave"></div>'),g.length||(g=c.clone(!0,!0),g.addClass("tap-target-origin"),g.removeAttr("id"),g.removeAttr("style"),f.append(g)),e.append(f));var j=function(){e.is(".open")&&(e.removeClass("open"),g.off("click.tapTarget"),a(document).off("click.tapTarget"),a(window).off("resize.tapTarget"))},k=function(){var b="fixed"===c.css("position");if(!b)for(var g=c.parents(),i=0;i<g.length&&!(b="fixed"==a(g[i]).css("position"));i++);var j=c.outerWidth(),k=c.outerHeight(),l=b?c.offset().top-a(document).scrollTop():c.offset().top,m=b?c.offset().left-a(document).scrollLeft():c.offset().left,n=a(window).width(),o=a(window).height(),p=n/2,q=o/2,r=m<=p,s=m>p,t=l<=q,u=l>q,v=m>=.25*n&&m<=.75*n,w=d.outerWidth(),x=d.outerHeight(),y=l+k/2-x/2,z=m+j/2-w/2,A=b?"fixed":"absolute",B=v?w:w/2+j,C=x/2,D=t?x/2:0,F=r&&!v?w/2-j:0,H=j,I=u?"bottom":"top",J=2*j,K=J,L=x/2-K/2,M=w/2-J/2,N={};N.top=t?y:"",N.right=s?n-z-w:"",N.bottom=u?o-y-x:"",N.left=r?z:"",N.position=A,e.css(N),h.css({width:B,height:C,top:D,right:0,bottom:0,left:F,padding:H,verticalAlign:I}),f.css({top:L,left:M,width:J,height:K})};"open"==b&&(k(),function(){e.is(".open")||(e.addClass("open"),setTimeout(function(){g.off("click.tapTarget").on("click.tapTarget",function(a){j(),g.off("click.tapTarget")}),a(document).off("click.tapTarget").on("click.tapTarget",function(b){j(),a(document).off("click.tapTarget")});var b=Materialize.throttle(function(){k()},200);a(window).off("resize.tapTarget").on("resize.tapTarget",b)},0))}()),"close"==b&&j()})},open:function(){},close:function(){}};a.fn.tapTarget=function(c){return b[c]||"object"==typeof c?b.init.apply(this,arguments):void a.error("Method "+c+" does not exist on jQuery.tap-target")}}(jQuery),function(window){"use strict";function minErr(module,ErrorConstructor){return ErrorConstructor=ErrorConstructor||Error,function(){var paramPrefix,i,code=arguments[0],template=arguments[1],message="["+(module?module+":":"")+code+"] ",templateArgs=sliceArgs(arguments,2).map(function(arg){return toDebugString(arg,minErrConfig.objectMaxDepth)});for(message+=template.replace(/\{\d+\}/g,function(match){var index=+match.slice(1,-1);return index<templateArgs.length?templateArgs[index]:match}),message+="\nhttp://errors.angularjs.org/1.6.4/"+(module?module+"/":"")+code,i=0,paramPrefix="?";i<templateArgs.length;i++,paramPrefix="&")message+=paramPrefix+"p"+i+"="+encodeURIComponent(templateArgs[i]);return new ErrorConstructor(message)}}function errorHandlingConfig(config){if(!isObject(config))return minErrConfig;isDefined(config.objectMaxDepth)&&(minErrConfig.objectMaxDepth=isValidObjectMaxDepth(config.objectMaxDepth)?config.objectMaxDepth:NaN)}function isValidObjectMaxDepth(maxDepth){return isNumber(maxDepth)&&maxDepth>0}function isArrayLike(obj){if(null==obj||isWindow(obj))return!1;if(isArray(obj)||isString(obj)||jqLite&&obj instanceof jqLite)return!0;var length="length"in Object(obj)&&obj.length;return isNumber(length)&&(length>=0&&(length-1 in obj||obj instanceof Array)||"function"==typeof obj.item)}function forEach(obj,iterator,context){var key,length;if(obj)if(isFunction(obj))for(key in obj)"prototype"!==key&&"length"!==key&&"name"!==key&&obj.hasOwnProperty(key)&&iterator.call(context,obj[key],key,obj);else if(isArray(obj)||isArrayLike(obj)){var isPrimitive="object"!=typeof obj;for(key=0,length=obj.length;key<length;key++)(isPrimitive||key in obj)&&iterator.call(context,obj[key],key,obj)}else if(obj.forEach&&obj.forEach!==forEach)obj.forEach(iterator,context,obj);else if(isBlankObject(obj))for(key in obj)iterator.call(context,obj[key],key,obj);else if("function"==typeof obj.hasOwnProperty)for(key in obj)obj.hasOwnProperty(key)&&iterator.call(context,obj[key],key,obj);else for(key in obj)hasOwnProperty.call(obj,key)&&iterator.call(context,obj[key],key,obj);return obj}function forEachSorted(obj,iterator,context){for(var keys=Object.keys(obj).sort(),i=0;i<keys.length;i++)iterator.call(context,obj[keys[i]],keys[i]);return keys}function reverseParams(iteratorFn){return function(value,key){iteratorFn(key,value)}}function nextUid(){return++uid}function setHashKey(obj,h){h?obj.$$hashKey=h:delete obj.$$hashKey}function baseExtend(dst,objs,deep){for(var h=dst.$$hashKey,i=0,ii=objs.length;i<ii;++i){var obj=objs[i];if(isObject(obj)||isFunction(obj))for(var keys=Object.keys(obj),j=0,jj=keys.length;j<jj;j++){var key=keys[j],src=obj[key];deep&&isObject(src)?isDate(src)?dst[key]=new Date(src.valueOf()):isRegExp(src)?dst[key]=new RegExp(src):src.nodeName?dst[key]=src.cloneNode(!0):isElement(src)?dst[key]=src.clone():(isObject(dst[key])||(dst[key]=isArray(src)?[]:{}),baseExtend(dst[key],[src],!0)):dst[key]=src}}return setHashKey(dst,h),dst}function extend(dst){return baseExtend(dst,slice.call(arguments,1),!1)}function merge(dst){return baseExtend(dst,slice.call(arguments,1),!0)}function toInt(str){return parseInt(str,10)}function inherit(parent,extra){return extend(Object.create(parent),extra)}function noop(){}function identity($){return $}function valueFn(value){return function(){return value}}function hasCustomToString(obj){return isFunction(obj.toString)&&obj.toString!==toString}function isUndefined(value){return void 0===value}function isDefined(value){return void 0!==value}function isObject(value){return null!==value&&"object"==typeof value}function isBlankObject(value){return null!==value&&"object"==typeof value&&!getPrototypeOf(value)}function isString(value){return"string"==typeof value}function isNumber(value){return"number"==typeof value}function isDate(value){return"[object Date]"===toString.call(value)}function isFunction(value){return"function"==typeof value}function isRegExp(value){return"[object RegExp]"===toString.call(value)}function isWindow(obj){return obj&&obj.window===obj}function isScope(obj){return obj&&obj.$evalAsync&&obj.$watch}function isFile(obj){return"[object File]"===toString.call(obj)}function isFormData(obj){return"[object FormData]"===toString.call(obj)}function isBlob(obj){return"[object Blob]"===toString.call(obj)}function isBoolean(value){return"boolean"==typeof value}function isPromiseLike(obj){return obj&&isFunction(obj.then)}function isTypedArray(value){return value&&isNumber(value.length)&&TYPED_ARRAY_REGEXP.test(toString.call(value))}function isArrayBuffer(obj){return"[object ArrayBuffer]"===toString.call(obj)}function isElement(node){return!(!node||!(node.nodeName||node.prop&&node.attr&&node.find))}function makeMap(str){var i,obj={},items=str.split(",");for(i=0;i<items.length;i++)obj[items[i]]=!0;return obj}function nodeName_(element){return lowercase(element.nodeName||element[0]&&element[0].nodeName)}function includes(array,obj){return-1!==Array.prototype.indexOf.call(array,obj)}function arrayRemove(array,value){var index=array.indexOf(value);return index>=0&&array.splice(index,1),index}function copy(source,destination,maxDepth){function copyRecurse(source,destination,maxDepth){if(--maxDepth<0)return"...";var key,h=destination.$$hashKey;if(isArray(source))for(var i=0,ii=source.length;i<ii;i++)destination.push(copyElement(source[i],maxDepth));else if(isBlankObject(source))for(key in source)destination[key]=copyElement(source[key],maxDepth);else if(source&&"function"==typeof source.hasOwnProperty)for(key in source)source.hasOwnProperty(key)&&(destination[key]=copyElement(source[key],maxDepth));else for(key in source)hasOwnProperty.call(source,key)&&(destination[key]=copyElement(source[key],maxDepth));return setHashKey(destination,h),destination}function copyElement(source,maxDepth){if(!isObject(source))return source;var index=stackSource.indexOf(source);if(-1!==index)return stackDest[index];if(isWindow(source)||isScope(source))throw ngMinErr("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var needsRecurse=!1,destination=copyType(source);return void 0===destination&&(destination=isArray(source)?[]:Object.create(getPrototypeOf(source)),needsRecurse=!0),stackSource.push(source),stackDest.push(destination),needsRecurse?copyRecurse(source,destination,maxDepth):destination}function copyType(source){switch(toString.call(source)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new source.constructor(copyElement(source.buffer),source.byteOffset,source.length);case"[object ArrayBuffer]":if(!source.slice){var copied=new ArrayBuffer(source.byteLength);return new Uint8Array(copied).set(new Uint8Array(source)),copied}return source.slice(0);case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new source.constructor(source.valueOf());case"[object RegExp]":var re=new RegExp(source.source,source.toString().match(/[^\/]*$/)[0]);return re.lastIndex=source.lastIndex,re;case"[object Blob]":return new source.constructor([source],{type:source.type})}if(isFunction(source.cloneNode))return source.cloneNode(!0)}var stackSource=[],stackDest=[];if(maxDepth=isValidObjectMaxDepth(maxDepth)?maxDepth:NaN,destination){if(isTypedArray(destination)||isArrayBuffer(destination))throw ngMinErr("cpta","Can't copy! TypedArray destination cannot be mutated.");if(source===destination)throw ngMinErr("cpi","Can't copy! Source and destination are identical.");return isArray(destination)?destination.length=0:forEach(destination,function(value,key){"$$hashKey"!==key&&delete destination[key]}),stackSource.push(source),stackDest.push(destination),copyRecurse(source,destination,maxDepth)}return copyElement(source,maxDepth)}function simpleCompare(a,b){return a===b||a!==a&&b!==b}function equals(o1,o2){if(o1===o2)return!0;if(null===o1||null===o2)return!1;if(o1!==o1&&o2!==o2)return!0;var length,key,keySet,t1=typeof o1,t2=typeof o2;if(t1===t2&&"object"===t1){if(!isArray(o1)){if(isDate(o1))return!!isDate(o2)&&simpleCompare(o1.getTime(),o2.getTime());if(isRegExp(o1))return!!isRegExp(o2)&&o1.toString()===o2.toString();if(isScope(o1)||isScope(o2)||isWindow(o1)||isWindow(o2)||isArray(o2)||isDate(o2)||isRegExp(o2))return!1;keySet=createMap();for(key in o1)if("$"!==key.charAt(0)&&!isFunction(o1[key])){if(!equals(o1[key],o2[key]))return!1;keySet[key]=!0}for(key in o2)if(!(key in keySet)&&"$"!==key.charAt(0)&&isDefined(o2[key])&&!isFunction(o2[key]))return!1;return!0}if(!isArray(o2))return!1;if((length=o1.length)===o2.length){for(key=0;key<length;key++)if(!equals(o1[key],o2[key]))return!1;return!0}}return!1}function concat(array1,array2,index){return array1.concat(slice.call(array2,index))}function sliceArgs(args,startIndex){return slice.call(args,startIndex||0)}function bind(self,fn){var curryArgs=arguments.length>2?sliceArgs(arguments,2):[];return!isFunction(fn)||fn instanceof RegExp?fn:curryArgs.length?function(){return arguments.length?fn.apply(self,concat(curryArgs,arguments,0)):fn.apply(self,curryArgs)}:function(){return arguments.length?fn.apply(self,arguments):fn.call(self)}}function toJsonReplacer(key,value){var val=value;return"string"==typeof key&&"$"===key.charAt(0)&&"$"===key.charAt(1)?val=void 0:isWindow(value)?val="$WINDOW":value&&window.document===value?val="$DOCUMENT":isScope(value)&&(val="$SCOPE"),val}function toJson(obj,pretty){if(!isUndefined(obj))return isNumber(pretty)||(pretty=pretty?2:null),JSON.stringify(obj,toJsonReplacer,pretty)}function fromJson(json){return isString(json)?JSON.parse(json):json}function timezoneToOffset(timezone,fallback){timezone=timezone.replace(ALL_COLONS,"");var requestedTimezoneOffset=Date.parse("Jan 01, 1970 00:00:00 "+timezone)/6e4;return isNumberNaN(requestedTimezoneOffset)?fallback:requestedTimezoneOffset}function addDateMinutes(date,minutes){return date=new Date(date.getTime()),date.setMinutes(date.getMinutes()+minutes),date}function convertTimezoneToLocal(date,timezone,reverse){reverse=reverse?-1:1;var dateTimezoneOffset=date.getTimezoneOffset();return addDateMinutes(date,reverse*(timezoneToOffset(timezone,dateTimezoneOffset)-dateTimezoneOffset))}function startingTag(element){element=jqLite(element).clone();try{element.empty()}catch(e){}var elemHtml=jqLite("<div>").append(element).html();try{return element[0].nodeType===NODE_TYPE_TEXT?lowercase(elemHtml):elemHtml.match(/^(<[^>]+>)/)[1].replace(/^<([\w-]+)/,function(match,nodeName){return"<"+lowercase(nodeName)})}catch(e){return lowercase(elemHtml)}}function tryDecodeURIComponent(value){try{return decodeURIComponent(value)}catch(e){}}function parseKeyValue(keyValue){var obj={};return forEach((keyValue||"").split("&"),function(keyValue){var splitPoint,key,val;keyValue&&(key=keyValue=keyValue.replace(/\+/g,"%20"),splitPoint=keyValue.indexOf("="),-1!==splitPoint&&(key=keyValue.substring(0,splitPoint),val=keyValue.substring(splitPoint+1)),key=tryDecodeURIComponent(key),isDefined(key)&&(val=!isDefined(val)||tryDecodeURIComponent(val),hasOwnProperty.call(obj,key)?isArray(obj[key])?obj[key].push(val):obj[key]=[obj[key],val]:obj[key]=val))}),obj}function toKeyValue(obj){var parts=[];return forEach(obj,function(value,key){isArray(value)?forEach(value,function(arrayValue){parts.push(encodeUriQuery(key,!0)+(!0===arrayValue?"":"="+encodeUriQuery(arrayValue,!0)))}):parts.push(encodeUriQuery(key,!0)+(!0===value?"":"="+encodeUriQuery(value,!0)))}),parts.length?parts.join("&"):""}function encodeUriSegment(val){return encodeUriQuery(val,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function encodeUriQuery(val,pctEncodeSpaces){return encodeURIComponent(val).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,pctEncodeSpaces?"%20":"+")}function getNgAttribute(element,ngAttr){var attr,i,ii=ngAttrPrefixes.length;for(i=0;i<ii;++i)if(attr=ngAttrPrefixes[i]+ngAttr,isString(attr=element.getAttribute(attr)))return attr;return null}function angularInit(element,bootstrap){var appElement,module,config={};if(forEach(ngAttrPrefixes,function(prefix){var name=prefix+"app";!appElement&&element.hasAttribute&&element.hasAttribute(name)&&(appElement=element,module=element.getAttribute(name))}),forEach(ngAttrPrefixes,function(prefix){var candidate,name=prefix+"app";!appElement&&(candidate=element.querySelector("["+name.replace(":","\\:")+"]"))&&(appElement=candidate,module=candidate.getAttribute(name))}),appElement){if(!isAutoBootstrapAllowed)return void window.console.error("Angular: disabling automatic bootstrap. <script> protocol indicates an extension, document.location.href does not match.");config.strictDi=null!==getNgAttribute(appElement,"strict-di"),bootstrap(appElement,module?[module]:[],config)}}function bootstrap(element,modules,config){isObject(config)||(config={}),config=extend({strictDi:!1},config);var doBootstrap=function(){if(element=jqLite(element),element.injector()){var tag=element[0]===window.document?"document":startingTag(element);throw ngMinErr("btstrpd","App already bootstrapped with this element '{0}'",tag.replace(/</,"&lt;").replace(/>/,"&gt;"))}modules=modules||[],modules.unshift(["$provide",function($provide){$provide.value("$rootElement",element)}]),config.debugInfoEnabled&&modules.push(["$compileProvider",function($compileProvider){$compileProvider.debugInfoEnabled(!0)}]),modules.unshift("ng");var injector=createInjector(modules,config.strictDi);return injector.invoke(["$rootScope","$rootElement","$compile","$injector",function(scope,element,compile,injector){scope.$apply(function(){element.data("$injector",injector),compile(element)(scope)})}]),injector},NG_ENABLE_DEBUG_INFO=/^NG_ENABLE_DEBUG_INFO!/,NG_DEFER_BOOTSTRAP=/^NG_DEFER_BOOTSTRAP!/;if(window&&NG_ENABLE_DEBUG_INFO.test(window.name)&&(config.debugInfoEnabled=!0,window.name=window.name.replace(NG_ENABLE_DEBUG_INFO,"")),window&&!NG_DEFER_BOOTSTRAP.test(window.name))return doBootstrap();window.name=window.name.replace(NG_DEFER_BOOTSTRAP,""),angular.resumeBootstrap=function(extraModules){return forEach(extraModules,function(module){modules.push(module)}),doBootstrap()},isFunction(angular.resumeDeferredBootstrap)&&angular.resumeDeferredBootstrap()}function reloadWithDebugInfo(){window.name="NG_ENABLE_DEBUG_INFO!"+window.name,window.location.reload()}function getTestability(rootElement){var injector=angular.element(rootElement).injector();if(!injector)throw ngMinErr("test","no injector found for element argument to getTestability");return injector.get("$$testability")}function snake_case(name,separator){return separator=separator||"_",name.replace(SNAKE_CASE_REGEXP,function(letter,pos){return(pos?separator:"")+letter.toLowerCase()})}function assertArg(arg,name,reason){if(!arg)throw ngMinErr("areq","Argument '{0}' is {1}",name||"?",reason||"required");return arg}function assertArgFn(arg,name,acceptArrayAnnotation){return acceptArrayAnnotation&&isArray(arg)&&(arg=arg[arg.length-1]),assertArg(isFunction(arg),name,"not a function, got "+(arg&&"object"==typeof arg?arg.constructor.name||"Object":typeof arg)),arg}function assertNotHasOwnProperty(name,context){if("hasOwnProperty"===name)throw ngMinErr("badname","hasOwnProperty is not a valid {0} name",context)}function getter(obj,path,bindFnToScope){if(!path)return obj;for(var key,keys=path.split("."),lastInstance=obj,len=keys.length,i=0;i<len;i++)key=keys[i],obj&&(obj=(lastInstance=obj)[key]);return!bindFnToScope&&isFunction(obj)?bind(lastInstance,obj):obj}function getBlockNodes(nodes){for(var blockNodes,node=nodes[0],endNode=nodes[nodes.length-1],i=1;node!==endNode&&(node=node.nextSibling);i++)(blockNodes||nodes[i]!==node)&&(blockNodes||(blockNodes=jqLite(slice.call(nodes,0,i))),blockNodes.push(node));return blockNodes||nodes}function createMap(){return Object.create(null)}function stringify(value){if(null==value)return"";switch(typeof value){case"string":break;case"number":value=""+value;break;default:value=!hasCustomToString(value)||isArray(value)||isDate(value)?toJson(value):value.toString()}return value}function setupModuleLoader(window){function ensure(obj,name,factory){return obj[name]||(obj[name]=factory())}var $injectorMinErr=minErr("$injector"),ngMinErr=minErr("ng"),angular=ensure(window,"angular",Object);return angular.$$minErr=angular.$$minErr||minErr,ensure(angular,"module",function(){var modules={};return function(name,requires,configFn){var info={};return function(name,context){if("hasOwnProperty"===name)throw ngMinErr("badname","hasOwnProperty is not a valid {0} name",context)}(name,"module"),requires&&modules.hasOwnProperty(name)&&(modules[name]=null),ensure(modules,name,function(){function invokeLater(provider,method,insertMethod,queue){return queue||(queue=invokeQueue),function(){return queue[insertMethod||"push"]([provider,method,arguments]),moduleInstance}}function invokeLaterAndSetModuleName(provider,method,queue){return queue||(queue=invokeQueue),function(recipeName,factoryFunction){return factoryFunction&&isFunction(factoryFunction)&&(factoryFunction.$$moduleName=name),queue.push([provider,method,arguments]),moduleInstance}}if(!requires)throw $injectorMinErr("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",name);var invokeQueue=[],configBlocks=[],runBlocks=[],config=invokeLater("$injector","invoke","push",configBlocks),moduleInstance={_invokeQueue:invokeQueue,_configBlocks:configBlocks,_runBlocks:runBlocks,info:function(value){if(isDefined(value)){if(!isObject(value))throw ngMinErr("aobj","Argument '{0}' must be an object","value");return info=value,this}return info},requires:requires,name:name,provider:invokeLaterAndSetModuleName("$provide","provider"),factory:invokeLaterAndSetModuleName("$provide","factory"),service:invokeLaterAndSetModuleName("$provide","service"),value:invokeLater("$provide","value"),constant:invokeLater("$provide","constant","unshift"),decorator:invokeLaterAndSetModuleName("$provide","decorator",configBlocks),animation:invokeLaterAndSetModuleName("$animateProvider","register"),filter:invokeLaterAndSetModuleName("$filterProvider","register"),controller:invokeLaterAndSetModuleName("$controllerProvider","register"),directive:invokeLaterAndSetModuleName("$compileProvider","directive"),component:invokeLaterAndSetModuleName("$compileProvider","component"),config:config,run:function(block){return runBlocks.push(block),this}};return configFn&&config(configFn),moduleInstance})}})}function shallowCopy(src,dst){if(isArray(src)){dst=dst||[];for(var i=0,ii=src.length;i<ii;i++)dst[i]=src[i]}else if(isObject(src)){dst=dst||{};for(var key in src)"$"===key.charAt(0)&&"$"===key.charAt(1)||(dst[key]=src[key])}return dst||src}function serializeObject(obj,maxDepth){var seen=[];return isValidObjectMaxDepth(maxDepth)&&(obj=copy(obj,null,maxDepth)),JSON.stringify(obj,function(key,val){if(val=toJsonReplacer(key,val),isObject(val)){if(seen.indexOf(val)>=0)return"...";seen.push(val)}return val})}function toDebugString(obj,maxDepth){return"function"==typeof obj?obj.toString().replace(/ \{[\s\S]*$/,""):isUndefined(obj)?"undefined":"string"!=typeof obj?serializeObject(obj,maxDepth):obj}function jqNextId(){return++jqId}function cssKebabToCamel(name){return kebabToCamel(name.replace(MS_HACK_REGEXP,"ms-"))}function fnCamelCaseReplace(all,letter){return letter.toUpperCase()}function kebabToCamel(name){return name.replace(DASH_LOWERCASE_REGEXP,fnCamelCaseReplace)}function jqLiteIsTextNode(html){return!HTML_REGEXP.test(html)}function jqLiteAcceptsData(node){var nodeType=node.nodeType;return nodeType===NODE_TYPE_ELEMENT||!nodeType||nodeType===NODE_TYPE_DOCUMENT}function jqLiteHasData(node){for(var key in jqCache[node.ng339])return!0;return!1}function jqLiteBuildFragment(html,context){var tmp,tag,wrap,i,fragment=context.createDocumentFragment(),nodes=[];if(jqLiteIsTextNode(html))nodes.push(context.createTextNode(html));else{for(tmp=fragment.appendChild(context.createElement("div")),tag=(TAG_NAME_REGEXP.exec(html)||["",""])[1].toLowerCase(),wrap=wrapMap[tag]||wrapMap._default,tmp.innerHTML=wrap[1]+html.replace(XHTML_TAG_REGEXP,"<$1></$2>")+wrap[2],i=wrap[0];i--;)tmp=tmp.lastChild;nodes=concat(nodes,tmp.childNodes),tmp=fragment.firstChild,tmp.textContent=""}return fragment.textContent="",fragment.innerHTML="",forEach(nodes,function(node){fragment.appendChild(node)}),fragment}function jqLiteParseHTML(html,context){context=context||window.document;var parsed;return(parsed=SINGLE_TAG_REGEXP.exec(html))?[context.createElement(parsed[1])]:(parsed=jqLiteBuildFragment(html,context))?parsed.childNodes:[]}function jqLiteWrapNode(node,wrapper){var parent=node.parentNode;parent&&parent.replaceChild(wrapper,node),wrapper.appendChild(node)}function JQLite(element){if(element instanceof JQLite)return element;var argIsString;if(isString(element)&&(element=trim(element),argIsString=!0),!(this instanceof JQLite)){if(argIsString&&"<"!==element.charAt(0))throw jqLiteMinErr("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new JQLite(element)}argIsString?jqLiteAddNodes(this,jqLiteParseHTML(element)):isFunction(element)?jqLiteReady(element):jqLiteAddNodes(this,element)}function jqLiteClone(element){return element.cloneNode(!0)}function jqLiteDealoc(element,onlyDescendants){!onlyDescendants&&jqLiteAcceptsData(element)&&jqLite.cleanData([element]),element.querySelectorAll&&jqLite.cleanData(element.querySelectorAll("*"))}function jqLiteOff(element,type,fn,unsupported){if(isDefined(unsupported))throw jqLiteMinErr("offargs","jqLite#off() does not support the `selector` argument");var expandoStore=jqLiteExpandoStore(element),events=expandoStore&&expandoStore.events,handle=expandoStore&&expandoStore.handle;if(handle)if(type){var removeHandler=function(type){var listenerFns=events[type];isDefined(fn)&&arrayRemove(listenerFns||[],fn),isDefined(fn)&&listenerFns&&listenerFns.length>0||(element.removeEventListener(type,handle),delete events[type])};forEach(type.split(" "),function(type){removeHandler(type),MOUSE_EVENT_MAP[type]&&removeHandler(MOUSE_EVENT_MAP[type])})}else for(type in events)"$destroy"!==type&&element.removeEventListener(type,handle),delete events[type]}function jqLiteRemoveData(element,name){var expandoId=element.ng339,expandoStore=expandoId&&jqCache[expandoId];if(expandoStore){if(name)return void delete expandoStore.data[name];expandoStore.handle&&(expandoStore.events.$destroy&&expandoStore.handle({},"$destroy"),jqLiteOff(element)),delete jqCache[expandoId],element.ng339=void 0}}function jqLiteExpandoStore(element,createIfNecessary){var expandoId=element.ng339,expandoStore=expandoId&&jqCache[expandoId];return createIfNecessary&&!expandoStore&&(element.ng339=expandoId=jqNextId(),expandoStore=jqCache[expandoId]={events:{},data:{},handle:void 0}),expandoStore}function jqLiteData(element,key,value){if(jqLiteAcceptsData(element)){var prop,isSimpleSetter=isDefined(value),isSimpleGetter=!isSimpleSetter&&key&&!isObject(key),massGetter=!key,expandoStore=jqLiteExpandoStore(element,!isSimpleGetter),data=expandoStore&&expandoStore.data;if(isSimpleSetter)data[kebabToCamel(key)]=value;else{if(massGetter)return data;if(isSimpleGetter)return data&&data[kebabToCamel(key)];for(prop in key)data[kebabToCamel(prop)]=key[prop]}}}function jqLiteHasClass(element,selector){return!!element.getAttribute&&(" "+(element.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+selector+" ")>-1}function jqLiteRemoveClass(element,cssClasses){cssClasses&&element.setAttribute&&forEach(cssClasses.split(" "),function(cssClass){element.setAttribute("class",trim((" "+(element.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+trim(cssClass)+" "," ")))})}
function jqLiteAddClass(element,cssClasses){if(cssClasses&&element.setAttribute){var existingClasses=(" "+(element.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");forEach(cssClasses.split(" "),function(cssClass){cssClass=trim(cssClass),-1===existingClasses.indexOf(" "+cssClass+" ")&&(existingClasses+=cssClass+" ")}),element.setAttribute("class",trim(existingClasses))}}function jqLiteAddNodes(root,elements){if(elements)if(elements.nodeType)root[root.length++]=elements;else{var length=elements.length;if("number"==typeof length&&elements.window!==elements){if(length)for(var i=0;i<length;i++)root[root.length++]=elements[i]}else root[root.length++]=elements}}function jqLiteController(element,name){return jqLiteInheritedData(element,"$"+(name||"ngController")+"Controller")}function jqLiteInheritedData(element,name,value){element.nodeType===NODE_TYPE_DOCUMENT&&(element=element.documentElement);for(var names=isArray(name)?name:[name];element;){for(var i=0,ii=names.length;i<ii;i++)if(isDefined(value=jqLite.data(element,names[i])))return value;element=element.parentNode||element.nodeType===NODE_TYPE_DOCUMENT_FRAGMENT&&element.host}}function jqLiteEmpty(element){for(jqLiteDealoc(element,!0);element.firstChild;)element.removeChild(element.firstChild)}function jqLiteRemove(element,keepData){keepData||jqLiteDealoc(element);var parent=element.parentNode;parent&&parent.removeChild(element)}function jqLiteDocumentLoaded(action,win){win=win||window,"complete"===win.document.readyState?win.setTimeout(action):jqLite(win).on("load",action)}function jqLiteReady(fn){function trigger(){window.document.removeEventListener("DOMContentLoaded",trigger),window.removeEventListener("load",trigger),fn()}"complete"===window.document.readyState?window.setTimeout(fn):(window.document.addEventListener("DOMContentLoaded",trigger),window.addEventListener("load",trigger))}function getBooleanAttrName(element,name){var booleanAttr=BOOLEAN_ATTR[name.toLowerCase()];return booleanAttr&&BOOLEAN_ELEMENTS[nodeName_(element)]&&booleanAttr}function getAliasedAttrName(name){return ALIASED_ATTR[name]}function createEventHandler(element,events){var eventHandler=function(event,type){event.isDefaultPrevented=function(){return event.defaultPrevented};var eventFns=events[type||event.type],eventFnsLength=eventFns?eventFns.length:0;if(eventFnsLength){if(isUndefined(event.immediatePropagationStopped)){var originalStopImmediatePropagation=event.stopImmediatePropagation;event.stopImmediatePropagation=function(){event.immediatePropagationStopped=!0,event.stopPropagation&&event.stopPropagation(),originalStopImmediatePropagation&&originalStopImmediatePropagation.call(event)}}event.isImmediatePropagationStopped=function(){return!0===event.immediatePropagationStopped};var handlerWrapper=eventFns.specialHandlerWrapper||defaultHandlerWrapper;eventFnsLength>1&&(eventFns=shallowCopy(eventFns));for(var i=0;i<eventFnsLength;i++)event.isImmediatePropagationStopped()||handlerWrapper(element,event,eventFns[i])}};return eventHandler.elem=element,eventHandler}function defaultHandlerWrapper(element,event,handler){handler.call(element,event)}function specialMouseHandlerWrapper(target,event,handler){var related=event.relatedTarget;related&&(related===target||jqLiteContains.call(target,related))||handler.call(target,event)}function $$jqLiteProvider(){this.$get=function(){return extend(JQLite,{hasClass:function(node,classes){return node.attr&&(node=node[0]),jqLiteHasClass(node,classes)},addClass:function(node,classes){return node.attr&&(node=node[0]),jqLiteAddClass(node,classes)},removeClass:function(node,classes){return node.attr&&(node=node[0]),jqLiteRemoveClass(node,classes)}})}}function hashKey(obj,nextUidFn){var key=obj&&obj.$$hashKey;if(key)return"function"==typeof key&&(key=obj.$$hashKey()),key;var objType=typeof obj;return key="function"===objType||"object"===objType&&null!==obj?obj.$$hashKey=objType+":"+(nextUidFn||nextUid)():objType+":"+obj}function NgMapShim(){this._keys=[],this._values=[],this._lastKey=NaN,this._lastIndex=-1}function stringifyFn(fn){return Function.prototype.toString.call(fn)}function extractArgs(fn){var fnText=stringifyFn(fn).replace(STRIP_COMMENTS,"");return fnText.match(ARROW_ARG)||fnText.match(FN_ARGS)}function anonFn(fn){var args=extractArgs(fn);return args?"function("+(args[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function annotate(fn,strictDi,name){var $inject,argDecl,last;if("function"==typeof fn){if(!($inject=fn.$inject)){if($inject=[],fn.length){if(strictDi)throw isString(name)&&name||(name=fn.name||anonFn(fn)),$injectorMinErr("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",name);argDecl=extractArgs(fn),forEach(argDecl[1].split(FN_ARG_SPLIT),function(arg){arg.replace(FN_ARG,function(all,underscore,name){$inject.push(name)})})}fn.$inject=$inject}}else isArray(fn)?(last=fn.length-1,assertArgFn(fn[last],"fn"),$inject=fn.slice(0,last)):assertArgFn(fn,"fn",!0);return $inject}function createInjector(modulesToLoad,strictDi){function supportObject(delegate){return function(key,value){if(!isObject(key))return delegate(key,value);forEach(key,reverseParams(delegate))}}function provider(name,provider_){if(assertNotHasOwnProperty(name,"service"),(isFunction(provider_)||isArray(provider_))&&(provider_=providerInjector.instantiate(provider_)),!provider_.$get)throw $injectorMinErr("pget","Provider '{0}' must define $get factory method.",name);return providerCache[name+providerSuffix]=provider_}function enforceReturnValue(name,factory){return function(){var result=instanceInjector.invoke(factory,this);if(isUndefined(result))throw $injectorMinErr("undef","Provider '{0}' must return a value from $get factory method.",name);return result}}function factory(name,factoryFn,enforce){return provider(name,{$get:!1!==enforce?enforceReturnValue(name,factoryFn):factoryFn})}function service(name,constructor){return factory(name,["$injector",function($injector){return $injector.instantiate(constructor)}])}function value(name,val){return factory(name,valueFn(val),!1)}function constant(name,value){assertNotHasOwnProperty(name,"constant"),providerCache[name]=value,instanceCache[name]=value}function decorator(serviceName,decorFn){var origProvider=providerInjector.get(serviceName+providerSuffix),orig$get=origProvider.$get;origProvider.$get=function(){var origInstance=instanceInjector.invoke(orig$get,origProvider);return instanceInjector.invoke(decorFn,null,{$delegate:origInstance})}}function loadModules(modulesToLoad){assertArg(isUndefined(modulesToLoad)||isArray(modulesToLoad),"modulesToLoad","not an array");var moduleFn,runBlocks=[];return forEach(modulesToLoad,function(module){function runInvokeQueue(queue){var i,ii;for(i=0,ii=queue.length;i<ii;i++){var invokeArgs=queue[i],provider=providerInjector.get(invokeArgs[0]);provider[invokeArgs[1]].apply(provider,invokeArgs[2])}}if(!loadedModules.get(module)){loadedModules.set(module,!0);try{isString(module)?(moduleFn=angularModule(module),instanceInjector.modules[module]=moduleFn,runBlocks=runBlocks.concat(loadModules(moduleFn.requires)).concat(moduleFn._runBlocks),runInvokeQueue(moduleFn._invokeQueue),runInvokeQueue(moduleFn._configBlocks)):isFunction(module)?runBlocks.push(providerInjector.invoke(module)):isArray(module)?runBlocks.push(providerInjector.invoke(module)):assertArgFn(module,"module")}catch(e){throw isArray(module)&&(module=module[module.length-1]),e.message&&e.stack&&-1===e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),$injectorMinErr("modulerr","Failed to instantiate module {0} due to:\n{1}",module,e.stack||e.message||e)}}}),runBlocks}function createInternalInjector(cache,factory){function getService(serviceName,caller){if(cache.hasOwnProperty(serviceName)){if(cache[serviceName]===INSTANTIATING)throw $injectorMinErr("cdep","Circular dependency found: {0}",serviceName+" <- "+path.join(" <- "));return cache[serviceName]}try{return path.unshift(serviceName),cache[serviceName]=INSTANTIATING,cache[serviceName]=factory(serviceName,caller),cache[serviceName]}catch(err){throw cache[serviceName]===INSTANTIATING&&delete cache[serviceName],err}finally{path.shift()}}function injectionArgs(fn,locals,serviceName){for(var args=[],$inject=createInjector.$$annotate(fn,strictDi,serviceName),i=0,length=$inject.length;i<length;i++){var key=$inject[i];if("string"!=typeof key)throw $injectorMinErr("itkn","Incorrect injection token! Expected service name as string, got {0}",key);args.push(locals&&locals.hasOwnProperty(key)?locals[key]:getService(key,serviceName))}return args}function isClass(func){if(msie||"function"!=typeof func)return!1;var result=func.$$ngIsClass;return isBoolean(result)||(result=func.$$ngIsClass=/^(?:class\b|constructor\()/.test(stringifyFn(func))),result}function invoke(fn,self,locals,serviceName){"string"==typeof locals&&(serviceName=locals,locals=null);var args=injectionArgs(fn,locals,serviceName);return isArray(fn)&&(fn=fn[fn.length-1]),isClass(fn)?(args.unshift(null),new(Function.prototype.bind.apply(fn,args))):fn.apply(self,args)}function instantiate(Type,locals,serviceName){var ctor=isArray(Type)?Type[Type.length-1]:Type,args=injectionArgs(Type,locals,serviceName);return args.unshift(null),new(Function.prototype.bind.apply(ctor,args))}return{invoke:invoke,instantiate:instantiate,get:getService,annotate:createInjector.$$annotate,has:function(name){return providerCache.hasOwnProperty(name+providerSuffix)||cache.hasOwnProperty(name)}}}strictDi=!0===strictDi;var INSTANTIATING={},providerSuffix="Provider",path=[],loadedModules=new NgMap,providerCache={$provide:{provider:supportObject(provider),factory:supportObject(factory),service:supportObject(service),value:supportObject(value),constant:supportObject(constant),decorator:decorator}},providerInjector=providerCache.$injector=createInternalInjector(providerCache,function(serviceName,caller){throw angular.isString(caller)&&path.push(caller),$injectorMinErr("unpr","Unknown provider: {0}",path.join(" <- "))}),instanceCache={},protoInstanceInjector=createInternalInjector(instanceCache,function(serviceName,caller){var provider=providerInjector.get(serviceName+providerSuffix,caller);return instanceInjector.invoke(provider.$get,provider,void 0,serviceName)}),instanceInjector=protoInstanceInjector;providerCache["$injector"+providerSuffix]={$get:valueFn(protoInstanceInjector)},instanceInjector.modules=providerInjector.modules=createMap();var runBlocks=loadModules(modulesToLoad);return instanceInjector=protoInstanceInjector.get("$injector"),instanceInjector.strictDi=strictDi,forEach(runBlocks,function(fn){fn&&instanceInjector.invoke(fn)}),instanceInjector}function $AnchorScrollProvider(){var autoScrollingEnabled=!0;this.disableAutoScrolling=function(){autoScrollingEnabled=!1},this.$get=["$window","$location","$rootScope",function($window,$location,$rootScope){function getFirstAnchor(list){var result=null;return Array.prototype.some.call(list,function(element){if("a"===nodeName_(element))return result=element,!0}),result}function getYOffset(){var offset=scroll.yOffset;if(isFunction(offset))offset=offset();else if(isElement(offset)){var elem=offset[0],style=$window.getComputedStyle(elem);offset="fixed"!==style.position?0:elem.getBoundingClientRect().bottom}else isNumber(offset)||(offset=0);return offset}function scrollTo(elem){if(elem){elem.scrollIntoView();var offset=getYOffset();if(offset){var elemTop=elem.getBoundingClientRect().top;$window.scrollBy(0,elemTop-offset)}}else $window.scrollTo(0,0)}function scroll(hash){hash=isString(hash)?hash:isNumber(hash)?hash.toString():$location.hash();var elm;hash?(elm=document.getElementById(hash))?scrollTo(elm):(elm=getFirstAnchor(document.getElementsByName(hash)))?scrollTo(elm):"top"===hash&&scrollTo(null):scrollTo(null)}var document=$window.document;return autoScrollingEnabled&&$rootScope.$watch(function(){return $location.hash()},function(newVal,oldVal){newVal===oldVal&&""===newVal||jqLiteDocumentLoaded(function(){$rootScope.$evalAsync(scroll)})}),scroll}]}function mergeClasses(a,b){return a||b?a?b?(isArray(a)&&(a=a.join(" ")),isArray(b)&&(b=b.join(" ")),a+" "+b):a:b:""}function extractElementNode(element){for(var i=0;i<element.length;i++){var elm=element[i];if(elm.nodeType===ELEMENT_NODE)return elm}}function splitClasses(classes){isString(classes)&&(classes=classes.split(" "));var obj=createMap();return forEach(classes,function(klass){klass.length&&(obj[klass]=!0)}),obj}function prepareAnimateOptions(options){return isObject(options)?options:{}}function Browser(window,document,$log,$sniffer){function completeOutstandingRequest(fn){try{fn.apply(null,sliceArgs(arguments,1))}finally{if(0===--outstandingRequestCount)for(;outstandingRequestCallbacks.length;)try{outstandingRequestCallbacks.pop()()}catch(e){$log.error(e)}}}function getHash(url){var index=url.indexOf("#");return-1===index?"":url.substr(index)}function cacheStateAndFireUrlChange(){pendingLocation=null,fireStateOrUrlChange()}function cacheState(){cachedState=getCurrentState(),cachedState=isUndefined(cachedState)?null:cachedState,equals(cachedState,lastCachedState)&&(cachedState=lastCachedState),lastCachedState=cachedState,lastHistoryState=cachedState}function fireStateOrUrlChange(){var prevLastHistoryState=lastHistoryState;cacheState(),lastBrowserUrl===self.url()&&prevLastHistoryState===cachedState||(lastBrowserUrl=self.url(),lastHistoryState=cachedState,forEach(urlChangeListeners,function(listener){listener(self.url(),cachedState)}))}var self=this,location=window.location,history=window.history,setTimeout=window.setTimeout,clearTimeout=window.clearTimeout,pendingDeferIds={};self.isMock=!1;var outstandingRequestCount=0,outstandingRequestCallbacks=[];self.$$completeOutstandingRequest=completeOutstandingRequest,self.$$incOutstandingRequestCount=function(){outstandingRequestCount++},self.notifyWhenNoOutstandingRequests=function(callback){0===outstandingRequestCount?callback():outstandingRequestCallbacks.push(callback)};var cachedState,lastHistoryState,lastBrowserUrl=location.href,baseElement=document.find("base"),pendingLocation=null,getCurrentState=$sniffer.history?function(){try{return history.state}catch(e){}}:noop;cacheState(),self.url=function(url,replace,state){if(isUndefined(state)&&(state=null),location!==window.location&&(location=window.location),history!==window.history&&(history=window.history),url){var sameState=lastHistoryState===state;if(lastBrowserUrl===url&&(!$sniffer.history||sameState))return self;var sameBase=lastBrowserUrl&&stripHash(lastBrowserUrl)===stripHash(url);return lastBrowserUrl=url,lastHistoryState=state,!$sniffer.history||sameBase&&sameState?(sameBase||(pendingLocation=url),replace?location.replace(url):sameBase?location.hash=getHash(url):location.href=url,location.href!==url&&(pendingLocation=url)):(history[replace?"replaceState":"pushState"](state,"",url),cacheState()),pendingLocation&&(pendingLocation=url),self}return pendingLocation||location.href.replace(/%27/g,"'")},self.state=function(){return cachedState};var urlChangeListeners=[],urlChangeInit=!1,lastCachedState=null;self.onUrlChange=function(callback){return urlChangeInit||($sniffer.history&&jqLite(window).on("popstate",cacheStateAndFireUrlChange),jqLite(window).on("hashchange",cacheStateAndFireUrlChange),urlChangeInit=!0),urlChangeListeners.push(callback),callback},self.$$applicationDestroyed=function(){jqLite(window).off("hashchange popstate",cacheStateAndFireUrlChange)},self.$$checkUrlChange=fireStateOrUrlChange,self.baseHref=function(){var href=baseElement.attr("href");return href?href.replace(/^(https?:)?\/\/[^\/]*/,""):""},self.defer=function(fn,delay){var timeoutId;return outstandingRequestCount++,timeoutId=setTimeout(function(){delete pendingDeferIds[timeoutId],completeOutstandingRequest(fn)},delay||0),pendingDeferIds[timeoutId]=!0,timeoutId},self.defer.cancel=function(deferId){return!!pendingDeferIds[deferId]&&(delete pendingDeferIds[deferId],clearTimeout(deferId),completeOutstandingRequest(noop),!0)}}function $BrowserProvider(){this.$get=["$window","$log","$sniffer","$document",function($window,$log,$sniffer,$document){return new Browser($window,$document,$log,$sniffer)}]}function $CacheFactoryProvider(){this.$get=function(){function cacheFactory(cacheId,options){function refresh(entry){entry!==freshEnd&&(staleEnd?staleEnd===entry&&(staleEnd=entry.n):staleEnd=entry,link(entry.n,entry.p),link(entry,freshEnd),freshEnd=entry,freshEnd.n=null)}function link(nextEntry,prevEntry){nextEntry!==prevEntry&&(nextEntry&&(nextEntry.p=prevEntry),prevEntry&&(prevEntry.n=nextEntry))}if(cacheId in caches)throw minErr("$cacheFactory")("iid","CacheId '{0}' is already taken!",cacheId);var size=0,stats=extend({},options,{id:cacheId}),data=createMap(),capacity=options&&options.capacity||Number.MAX_VALUE,lruHash=createMap(),freshEnd=null,staleEnd=null;return caches[cacheId]={put:function(key,value){if(!isUndefined(value)){if(capacity<Number.MAX_VALUE){refresh(lruHash[key]||(lruHash[key]={key:key}))}return key in data||size++,data[key]=value,size>capacity&&this.remove(staleEnd.key),value}},get:function(key){if(capacity<Number.MAX_VALUE){var lruEntry=lruHash[key];if(!lruEntry)return;refresh(lruEntry)}return data[key]},remove:function(key){if(capacity<Number.MAX_VALUE){var lruEntry=lruHash[key];if(!lruEntry)return;lruEntry===freshEnd&&(freshEnd=lruEntry.p),lruEntry===staleEnd&&(staleEnd=lruEntry.n),link(lruEntry.n,lruEntry.p),delete lruHash[key]}key in data&&(delete data[key],size--)},removeAll:function(){data=createMap(),size=0,lruHash=createMap(),freshEnd=staleEnd=null},destroy:function(){data=null,stats=null,lruHash=null,delete caches[cacheId]},info:function(){return extend({},stats,{size:size})}}}var caches={};return cacheFactory.info=function(){var info={};return forEach(caches,function(cache,cacheId){info[cacheId]=cache.info()}),info},cacheFactory.get=function(cacheId){return caches[cacheId]},cacheFactory}}function $TemplateCacheProvider(){this.$get=["$cacheFactory",function($cacheFactory){return $cacheFactory("templates")}]}function UNINITIALIZED_VALUE(){}function $CompileProvider($provide,$$sanitizeUriProvider){function parseIsolateBindings(scope,directiveName,isController){var bindings=createMap();return forEach(scope,function(definition,scopeName){if(definition in bindingCache)return void(bindings[scopeName]=bindingCache[definition]);var match=definition.match(/^\s*([@&<]|=(\*?))(\??)\s*([\w$]*)\s*$/);if(!match)throw $compileMinErr("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",directiveName,scopeName,definition,isController?"controller bindings definition":"isolate scope definition");bindings[scopeName]={mode:match[1][0],collection:"*"===match[2],optional:"?"===match[3],attrName:match[4]||scopeName},match[4]&&(bindingCache[definition]=bindings[scopeName])}),bindings}function parseDirectiveBindings(directive,directiveName){var bindings={isolateScope:null,bindToController:null};if(isObject(directive.scope)&&(!0===directive.bindToController?(bindings.bindToController=parseIsolateBindings(directive.scope,directiveName,!0),bindings.isolateScope={}):bindings.isolateScope=parseIsolateBindings(directive.scope,directiveName,!1)),isObject(directive.bindToController)&&(bindings.bindToController=parseIsolateBindings(directive.bindToController,directiveName,!0)),bindings.bindToController&&!directive.controller)throw $compileMinErr("noctrl","Cannot bind to controller without directive '{0}'s controller.",directiveName);return bindings}function assertValidDirectiveName(name){var letter=name.charAt(0);if(!letter||letter!==lowercase(letter))throw $compileMinErr("baddir","Directive/Component name '{0}' is invalid. The first character must be a lowercase letter",name);if(name!==name.trim())throw $compileMinErr("baddir","Directive/Component name '{0}' is invalid. The name should not contain leading or trailing whitespaces",name)}function getDirectiveRequire(directive){var require=directive.require||directive.controller&&directive.name;return!isArray(require)&&isObject(require)&&forEach(require,function(value,key){var match=value.match(REQUIRE_PREFIX_REGEXP);value.substring(match[0].length)||(require[key]=match[0]+key)}),require}function getDirectiveRestrict(restrict,name){if(restrict&&(!isString(restrict)||!/[EACM]/.test(restrict)))throw $compileMinErr("badrestrict","Restrict property '{0}' of directive '{1}' is invalid",restrict,name);return restrict||"EA"}var hasDirectives={},Suffix="Directive",COMMENT_DIRECTIVE_REGEXP=/^\s*directive:\s*([\w-]+)\s+(.*)$/,CLASS_DIRECTIVE_REGEXP=/(([\w-]+)(?::([^;]+))?;?)/,ALL_OR_NOTHING_ATTRS=makeMap("ngSrc,ngSrcset,src,srcset"),REQUIRE_PREFIX_REGEXP=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,EVENT_HANDLER_ATTR_REGEXP=/^(on[a-z]+|formaction)$/,bindingCache=createMap();this.directive=function registerDirective(name,directiveFactory){return assertArg(name,"name"),assertNotHasOwnProperty(name,"directive"),isString(name)?(assertValidDirectiveName(name),assertArg(directiveFactory,"directiveFactory"),hasDirectives.hasOwnProperty(name)||(hasDirectives[name]=[],$provide.factory(name+Suffix,["$injector","$exceptionHandler",function($injector,$exceptionHandler){var directives=[];return forEach(hasDirectives[name],function(directiveFactory,index){try{var directive=$injector.invoke(directiveFactory);isFunction(directive)?directive={compile:valueFn(directive)}:!directive.compile&&directive.link&&(directive.compile=valueFn(directive.link)),directive.priority=directive.priority||0,directive.index=index,directive.name=directive.name||name,directive.require=getDirectiveRequire(directive),directive.restrict=getDirectiveRestrict(directive.restrict,name),directive.$$moduleName=directiveFactory.$$moduleName,directives.push(directive)}catch(e){$exceptionHandler(e)}}),directives}])),hasDirectives[name].push(directiveFactory)):forEach(name,reverseParams(registerDirective)),this},this.component=function(name,options){function factory($injector){function makeInjectable(fn){return isFunction(fn)||isArray(fn)?function(tElement,tAttrs){return $injector.invoke(fn,this,{$element:tElement,$attrs:tAttrs})}:fn}var template=options.template||options.templateUrl?options.template:"",ddo={controller:controller,controllerAs:identifierForController(options.controller)||options.controllerAs||"$ctrl",template:makeInjectable(template),templateUrl:makeInjectable(options.templateUrl),transclude:options.transclude,scope:{},bindToController:options.bindings||{},restrict:"E",require:options.require};return forEach(options,function(val,key){"$"===key.charAt(0)&&(ddo[key]=val)}),ddo}var controller=options.controller||function(){};return forEach(options,function(val,key){"$"===key.charAt(0)&&(factory[key]=val,isFunction(controller)&&(controller[key]=val))}),factory.$inject=["$injector"],this.directive(name,factory)},this.aHrefSanitizationWhitelist=function(regexp){return isDefined(regexp)?($$sanitizeUriProvider.aHrefSanitizationWhitelist(regexp),this):$$sanitizeUriProvider.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(regexp){return isDefined(regexp)?($$sanitizeUriProvider.imgSrcSanitizationWhitelist(regexp),this):$$sanitizeUriProvider.imgSrcSanitizationWhitelist()};var debugInfoEnabled=!0;this.debugInfoEnabled=function(enabled){return isDefined(enabled)?(debugInfoEnabled=enabled,this):debugInfoEnabled};var preAssignBindingsEnabled=!1;this.preAssignBindingsEnabled=function(enabled){return isDefined(enabled)?(preAssignBindingsEnabled=enabled,this):preAssignBindingsEnabled};var TTL=10;this.onChangesTtl=function(value){return arguments.length?(TTL=value,this):TTL};var commentDirectivesEnabledConfig=!0;this.commentDirectivesEnabled=function(value){return arguments.length?(commentDirectivesEnabledConfig=value,this):commentDirectivesEnabledConfig};var cssClassDirectivesEnabledConfig=!0;this.cssClassDirectivesEnabled=function(value){return arguments.length?(cssClassDirectivesEnabledConfig=value,this):cssClassDirectivesEnabledConfig},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate","$$sanitizeUri",function($injector,$interpolate,$exceptionHandler,$templateRequest,$parse,$controller,$rootScope,$sce,$animate,$$sanitizeUri){function flushOnChangesQueue(){try{if(!--onChangesTtl)throw onChangesQueue=void 0,$compileMinErr("infchng","{0} $onChanges() iterations reached. Aborting!\n",TTL);$rootScope.$apply(function(){for(var errors=[],i=0,ii=onChangesQueue.length;i<ii;++i)try{onChangesQueue[i]()}catch(e){errors.push(e)}if(onChangesQueue=void 0,errors.length)throw errors})}finally{onChangesTtl++}}function Attributes(element,attributesToCopy){if(attributesToCopy){var i,l,key,keys=Object.keys(attributesToCopy);for(i=0,l=keys.length;i<l;i++)key=keys[i],this[key]=attributesToCopy[key]}else this.$attr={};this.$$element=element}function setSpecialAttr(element,attrName,value){specialAttrHolder.innerHTML="<span "+attrName+">";var attributes=specialAttrHolder.firstChild.attributes,attribute=attributes[0];attributes.removeNamedItem(attribute.name),attribute.value=value,element.attributes.setNamedItem(attribute)}function safeAddClass($element,className){try{$element.addClass(className)}catch(e){}}function compile($compileNodes,transcludeFn,maxPriority,ignoreDirective,previousCompileContext){$compileNodes instanceof jqLite||($compileNodes=jqLite($compileNodes));var compositeLinkFn=compileNodes($compileNodes,transcludeFn,$compileNodes,maxPriority,ignoreDirective,previousCompileContext);compile.$$addScopeClass($compileNodes);var namespace=null;return function(scope,cloneConnectFn,options){if(!$compileNodes)throw $compileMinErr("multilink","This element has already been linked.");assertArg(scope,"scope"),previousCompileContext&&previousCompileContext.needsNewScope&&(scope=scope.$parent.$new()),options=options||{};var parentBoundTranscludeFn=options.parentBoundTranscludeFn,transcludeControllers=options.transcludeControllers,futureParentElement=options.futureParentElement;parentBoundTranscludeFn&&parentBoundTranscludeFn.$$boundTransclude&&(parentBoundTranscludeFn=parentBoundTranscludeFn.$$boundTransclude),namespace||(namespace=detectNamespaceForChildElements(futureParentElement));var $linkNode;if($linkNode="html"!==namespace?jqLite(wrapTemplate(namespace,jqLite("<div>").append($compileNodes).html())):cloneConnectFn?JQLitePrototype.clone.call($compileNodes):$compileNodes,transcludeControllers)for(var controllerName in transcludeControllers)$linkNode.data("$"+controllerName+"Controller",transcludeControllers[controllerName].instance);return compile.$$addScopeInfo($linkNode,scope),cloneConnectFn&&cloneConnectFn($linkNode,scope),compositeLinkFn&&compositeLinkFn(scope,$linkNode,$linkNode,parentBoundTranscludeFn),cloneConnectFn||($compileNodes=compositeLinkFn=null),$linkNode}}function detectNamespaceForChildElements(parentElement){var node=parentElement&&parentElement[0];return node&&"foreignobject"!==nodeName_(node)&&toString.call(node).match(/SVG/)?"svg":"html"}function compileNodes(nodeList,transcludeFn,$rootElement,maxPriority,ignoreDirective,previousCompileContext){function compositeLinkFn(scope,nodeList,$rootElement,parentBoundTranscludeFn){var nodeLinkFn,childLinkFn,node,childScope,i,ii,idx,childBoundTranscludeFn,stableNodeList;if(nodeLinkFnFound){var nodeListLength=nodeList.length;for(stableNodeList=new Array(nodeListLength),i=0;i<linkFns.length;i+=3)idx=linkFns[i],stableNodeList[idx]=nodeList[idx]}else stableNodeList=nodeList;for(i=0,ii=linkFns.length;i<ii;)node=stableNodeList[linkFns[i++]],nodeLinkFn=linkFns[i++],childLinkFn=linkFns[i++],nodeLinkFn?(nodeLinkFn.scope?(childScope=scope.$new(),compile.$$addScopeInfo(jqLite(node),childScope)):childScope=scope,childBoundTranscludeFn=nodeLinkFn.transcludeOnThisElement?createBoundTranscludeFn(scope,nodeLinkFn.transclude,parentBoundTranscludeFn):!nodeLinkFn.templateOnThisElement&&parentBoundTranscludeFn?parentBoundTranscludeFn:!parentBoundTranscludeFn&&transcludeFn?createBoundTranscludeFn(scope,transcludeFn):null,nodeLinkFn(childLinkFn,childScope,node,$rootElement,childBoundTranscludeFn)):childLinkFn&&childLinkFn(scope,node.childNodes,void 0,parentBoundTranscludeFn)}for(var attrs,directives,nodeLinkFn,childNodes,childLinkFn,linkFnFound,nodeLinkFnFound,linkFns=[],notLiveList=isArray(nodeList)||nodeList instanceof jqLite,i=0;i<nodeList.length;i++)attrs=new Attributes,11===msie&&mergeConsecutiveTextNodes(nodeList,i,notLiveList),directives=collectDirectives(nodeList[i],[],attrs,0===i?maxPriority:void 0,ignoreDirective),nodeLinkFn=directives.length?applyDirectivesToNode(directives,nodeList[i],attrs,transcludeFn,$rootElement,null,[],[],previousCompileContext):null,nodeLinkFn&&nodeLinkFn.scope&&compile.$$addScopeClass(attrs.$$element),childLinkFn=nodeLinkFn&&nodeLinkFn.terminal||!(childNodes=nodeList[i].childNodes)||!childNodes.length?null:compileNodes(childNodes,nodeLinkFn?(nodeLinkFn.transcludeOnThisElement||!nodeLinkFn.templateOnThisElement)&&nodeLinkFn.transclude:transcludeFn),(nodeLinkFn||childLinkFn)&&(linkFns.push(i,nodeLinkFn,childLinkFn),linkFnFound=!0,nodeLinkFnFound=nodeLinkFnFound||nodeLinkFn),previousCompileContext=null;return linkFnFound?compositeLinkFn:null}function mergeConsecutiveTextNodes(nodeList,idx,notLiveList){var sibling,node=nodeList[idx],parent=node.parentNode;if(node.nodeType===NODE_TYPE_TEXT)for(;;){if(!(sibling=parent?node.nextSibling:nodeList[idx+1])||sibling.nodeType!==NODE_TYPE_TEXT)break;node.nodeValue=node.nodeValue+sibling.nodeValue,sibling.parentNode&&sibling.parentNode.removeChild(sibling),notLiveList&&sibling===nodeList[idx+1]&&nodeList.splice(idx+1,1)}}function createBoundTranscludeFn(scope,transcludeFn,previousBoundTranscludeFn){function boundTranscludeFn(transcludedScope,cloneFn,controllers,futureParentElement,containingScope){return transcludedScope||(transcludedScope=scope.$new(!1,containingScope),transcludedScope.$$transcluded=!0),transcludeFn(transcludedScope,cloneFn,{parentBoundTranscludeFn:previousBoundTranscludeFn,transcludeControllers:controllers,futureParentElement:futureParentElement})}var boundSlots=boundTranscludeFn.$$slots=createMap();for(var slotName in transcludeFn.$$slots)transcludeFn.$$slots[slotName]?boundSlots[slotName]=createBoundTranscludeFn(scope,transcludeFn.$$slots[slotName],previousBoundTranscludeFn):boundSlots[slotName]=null;return boundTranscludeFn}function collectDirectives(node,directives,attrs,maxPriority,ignoreDirective){var match,nodeName,className,nodeType=node.nodeType,attrsMap=attrs.$attr;switch(nodeType){case NODE_TYPE_ELEMENT:nodeName=nodeName_(node),addDirective(directives,directiveNormalize(nodeName),"E",maxPriority,ignoreDirective);for(var attr,name,nName,ngAttrName,value,isNgAttr,nAttrs=node.attributes,j=0,jj=nAttrs&&nAttrs.length;j<jj;j++){var attrStartName=!1,attrEndName=!1;attr=nAttrs[j],name=attr.name,value=attr.value,ngAttrName=directiveNormalize(name),isNgAttr=NG_ATTR_BINDING.test(ngAttrName),isNgAttr&&(name=name.replace(PREFIX_REGEXP,"").substr(8).replace(/_(.)/g,function(match,letter){return letter.toUpperCase()}));var multiElementMatch=ngAttrName.match(MULTI_ELEMENT_DIR_RE);multiElementMatch&&directiveIsMultiElement(multiElementMatch[1])&&(attrStartName=name,attrEndName=name.substr(0,name.length-5)+"end",name=name.substr(0,name.length-6)),nName=directiveNormalize(name.toLowerCase()),attrsMap[nName]=name,!isNgAttr&&attrs.hasOwnProperty(nName)||(attrs[nName]=value,getBooleanAttrName(node,nName)&&(attrs[nName]=!0)),addAttrInterpolateDirective(node,directives,value,nName,isNgAttr),addDirective(directives,nName,"A",maxPriority,ignoreDirective,attrStartName,attrEndName)}if("input"===nodeName&&"hidden"===node.getAttribute("type")&&node.setAttribute("autocomplete","off"),!cssClassDirectivesEnabled)break;if(className=node.className,isObject(className)&&(className=className.animVal),isString(className)&&""!==className)for(;match=CLASS_DIRECTIVE_REGEXP.exec(className);)nName=directiveNormalize(match[2]),
addDirective(directives,nName,"C",maxPriority,ignoreDirective)&&(attrs[nName]=trim(match[3])),className=className.substr(match.index+match[0].length);break;case NODE_TYPE_TEXT:addTextInterpolateDirective(directives,node.nodeValue);break;case NODE_TYPE_COMMENT:if(!commentDirectivesEnabled)break;collectCommentDirectives(node,directives,attrs,maxPriority,ignoreDirective)}return directives.sort(byPriority),directives}function collectCommentDirectives(node,directives,attrs,maxPriority,ignoreDirective){try{var match=COMMENT_DIRECTIVE_REGEXP.exec(node.nodeValue);if(match){var nName=directiveNormalize(match[1]);addDirective(directives,nName,"M",maxPriority,ignoreDirective)&&(attrs[nName]=trim(match[2]))}}catch(e){}}function groupScan(node,attrStart,attrEnd){var nodes=[],depth=0;if(attrStart&&node.hasAttribute&&node.hasAttribute(attrStart))do{if(!node)throw $compileMinErr("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",attrStart,attrEnd);node.nodeType===NODE_TYPE_ELEMENT&&(node.hasAttribute(attrStart)&&depth++,node.hasAttribute(attrEnd)&&depth--),nodes.push(node),node=node.nextSibling}while(depth>0);else nodes.push(node);return jqLite(nodes)}function groupElementsLinkFnWrapper(linkFn,attrStart,attrEnd){return function(scope,element,attrs,controllers,transcludeFn){return element=groupScan(element[0],attrStart,attrEnd),linkFn(scope,element,attrs,controllers,transcludeFn)}}function compilationGenerator(eager,$compileNodes,transcludeFn,maxPriority,ignoreDirective,previousCompileContext){var compiled;return eager?compile($compileNodes,transcludeFn,maxPriority,ignoreDirective,previousCompileContext):function(){return compiled||(compiled=compile($compileNodes,transcludeFn,maxPriority,ignoreDirective,previousCompileContext),$compileNodes=transcludeFn=previousCompileContext=null),compiled.apply(this,arguments)}}function applyDirectivesToNode(directives,compileNode,templateAttrs,transcludeFn,jqCollection,originalReplaceDirective,preLinkFns,postLinkFns,previousCompileContext){function addLinkFns(pre,post,attrStart,attrEnd){pre&&(attrStart&&(pre=groupElementsLinkFnWrapper(pre,attrStart,attrEnd)),pre.require=directive.require,pre.directiveName=directiveName,(newIsolateScopeDirective===directive||directive.$$isolateScope)&&(pre=cloneAndAnnotateFn(pre,{isolateScope:!0})),preLinkFns.push(pre)),post&&(attrStart&&(post=groupElementsLinkFnWrapper(post,attrStart,attrEnd)),post.require=directive.require,post.directiveName=directiveName,(newIsolateScopeDirective===directive||directive.$$isolateScope)&&(post=cloneAndAnnotateFn(post,{isolateScope:!0})),postLinkFns.push(post))}function nodeLinkFn(childLinkFn,scope,linkNode,$rootElement,boundTranscludeFn){function controllersBoundTransclude(scope,cloneAttachFn,futureParentElement,slotName){var transcludeControllers;if(isScope(scope)||(slotName=futureParentElement,futureParentElement=cloneAttachFn,cloneAttachFn=scope,scope=void 0),hasElementTranscludeDirective&&(transcludeControllers=elementControllers),futureParentElement||(futureParentElement=hasElementTranscludeDirective?$element.parent():$element),!slotName)return boundTranscludeFn(scope,cloneAttachFn,transcludeControllers,futureParentElement,scopeToChild);var slotTranscludeFn=boundTranscludeFn.$$slots[slotName];if(slotTranscludeFn)return slotTranscludeFn(scope,cloneAttachFn,transcludeControllers,futureParentElement,scopeToChild);if(isUndefined(slotTranscludeFn))throw $compileMinErr("noslot",'No parent directive that requires a transclusion with slot name "{0}". Element: {1}',slotName,startingTag($element))}var i,ii,linkFn,isolateScope,controllerScope,elementControllers,transcludeFn,$element,attrs,scopeBindingInfo;compileNode===linkNode?(attrs=templateAttrs,$element=templateAttrs.$$element):($element=jqLite(linkNode),attrs=new Attributes($element,templateAttrs)),controllerScope=scope,newIsolateScopeDirective?isolateScope=scope.$new(!0):newScopeDirective&&(controllerScope=scope.$parent),boundTranscludeFn&&(transcludeFn=controllersBoundTransclude,transcludeFn.$$boundTransclude=boundTranscludeFn,transcludeFn.isSlotFilled=function(slotName){return!!boundTranscludeFn.$$slots[slotName]}),controllerDirectives&&(elementControllers=setupControllers($element,attrs,transcludeFn,controllerDirectives,isolateScope,scope,newIsolateScopeDirective)),newIsolateScopeDirective&&(compile.$$addScopeInfo($element,isolateScope,!0,!(templateDirective&&(templateDirective===newIsolateScopeDirective||templateDirective===newIsolateScopeDirective.$$originalDirective))),compile.$$addScopeClass($element,!0),isolateScope.$$isolateBindings=newIsolateScopeDirective.$$isolateBindings,scopeBindingInfo=initializeDirectiveBindings(scope,attrs,isolateScope,isolateScope.$$isolateBindings,newIsolateScopeDirective),scopeBindingInfo.removeWatches&&isolateScope.$on("$destroy",scopeBindingInfo.removeWatches));for(var name in elementControllers){var controllerDirective=controllerDirectives[name],controller=elementControllers[name],bindings=controllerDirective.$$bindings.bindToController;if(preAssignBindingsEnabled){controller.bindingInfo=bindings?initializeDirectiveBindings(controllerScope,attrs,controller.instance,bindings,controllerDirective):{};var controllerResult=controller();controllerResult!==controller.instance&&(controller.instance=controllerResult,$element.data("$"+controllerDirective.name+"Controller",controllerResult),controller.bindingInfo.removeWatches&&controller.bindingInfo.removeWatches(),controller.bindingInfo=initializeDirectiveBindings(controllerScope,attrs,controller.instance,bindings,controllerDirective))}else controller.instance=controller(),$element.data("$"+controllerDirective.name+"Controller",controller.instance),controller.bindingInfo=initializeDirectiveBindings(controllerScope,attrs,controller.instance,bindings,controllerDirective)}for(forEach(controllerDirectives,function(controllerDirective,name){var require=controllerDirective.require;controllerDirective.bindToController&&!isArray(require)&&isObject(require)&&extend(elementControllers[name].instance,getControllers(name,require,$element,elementControllers))}),forEach(elementControllers,function(controller){var controllerInstance=controller.instance;if(isFunction(controllerInstance.$onChanges))try{controllerInstance.$onChanges(controller.bindingInfo.initialChanges)}catch(e){$exceptionHandler(e)}if(isFunction(controllerInstance.$onInit))try{controllerInstance.$onInit()}catch(e){$exceptionHandler(e)}isFunction(controllerInstance.$doCheck)&&(controllerScope.$watch(function(){controllerInstance.$doCheck()}),controllerInstance.$doCheck()),isFunction(controllerInstance.$onDestroy)&&controllerScope.$on("$destroy",function(){controllerInstance.$onDestroy()})}),i=0,ii=preLinkFns.length;i<ii;i++)linkFn=preLinkFns[i],invokeLinkFn(linkFn,linkFn.isolateScope?isolateScope:scope,$element,attrs,linkFn.require&&getControllers(linkFn.directiveName,linkFn.require,$element,elementControllers),transcludeFn);var scopeToChild=scope;for(newIsolateScopeDirective&&(newIsolateScopeDirective.template||null===newIsolateScopeDirective.templateUrl)&&(scopeToChild=isolateScope),childLinkFn&&childLinkFn(scopeToChild,linkNode.childNodes,void 0,boundTranscludeFn),i=postLinkFns.length-1;i>=0;i--)linkFn=postLinkFns[i],invokeLinkFn(linkFn,linkFn.isolateScope?isolateScope:scope,$element,attrs,linkFn.require&&getControllers(linkFn.directiveName,linkFn.require,$element,elementControllers),transcludeFn);forEach(elementControllers,function(controller){var controllerInstance=controller.instance;isFunction(controllerInstance.$postLink)&&controllerInstance.$postLink()})}previousCompileContext=previousCompileContext||{};for(var directive,directiveName,$template,linkFn,directiveValue,terminalPriority=-Number.MAX_VALUE,newScopeDirective=previousCompileContext.newScopeDirective,controllerDirectives=previousCompileContext.controllerDirectives,newIsolateScopeDirective=previousCompileContext.newIsolateScopeDirective,templateDirective=previousCompileContext.templateDirective,nonTlbTranscludeDirective=previousCompileContext.nonTlbTranscludeDirective,hasTranscludeDirective=!1,hasTemplate=!1,hasElementTranscludeDirective=previousCompileContext.hasElementTranscludeDirective,$compileNode=templateAttrs.$$element=jqLite(compileNode),replaceDirective=originalReplaceDirective,childTranscludeFn=transcludeFn,didScanForMultipleTransclusion=!1,mightHaveMultipleTransclusionError=!1,i=0,ii=directives.length;i<ii;i++){directive=directives[i];var attrStart=directive.$$start,attrEnd=directive.$$end;if(attrStart&&($compileNode=groupScan(compileNode,attrStart,attrEnd)),$template=void 0,terminalPriority>directive.priority)break;if(directiveValue=directive.scope,directiveValue&&(directive.templateUrl||(isObject(directiveValue)?(assertNoDuplicate("new/isolated scope",newIsolateScopeDirective||newScopeDirective,directive,$compileNode),newIsolateScopeDirective=directive):assertNoDuplicate("new/isolated scope",newIsolateScopeDirective,directive,$compileNode)),newScopeDirective=newScopeDirective||directive),directiveName=directive.name,!didScanForMultipleTransclusion&&(directive.replace&&(directive.templateUrl||directive.template)||directive.transclude&&!directive.$$tlb)){for(var candidateDirective,scanningIndex=i+1;candidateDirective=directives[scanningIndex++];)if(candidateDirective.transclude&&!candidateDirective.$$tlb||candidateDirective.replace&&(candidateDirective.templateUrl||candidateDirective.template)){mightHaveMultipleTransclusionError=!0;break}didScanForMultipleTransclusion=!0}if(!directive.templateUrl&&directive.controller&&(controllerDirectives=controllerDirectives||createMap(),assertNoDuplicate("'"+directiveName+"' controller",controllerDirectives[directiveName],directive,$compileNode),controllerDirectives[directiveName]=directive),directiveValue=directive.transclude)if(hasTranscludeDirective=!0,directive.$$tlb||(assertNoDuplicate("transclusion",nonTlbTranscludeDirective,directive,$compileNode),nonTlbTranscludeDirective=directive),"element"===directiveValue)hasElementTranscludeDirective=!0,terminalPriority=directive.priority,$template=$compileNode,$compileNode=templateAttrs.$$element=jqLite(compile.$$createComment(directiveName,templateAttrs[directiveName])),compileNode=$compileNode[0],replaceWith(jqCollection,sliceArgs($template),compileNode),$template[0].$$parentNode=$template[0].parentNode,childTranscludeFn=compilationGenerator(mightHaveMultipleTransclusionError,$template,transcludeFn,terminalPriority,replaceDirective&&replaceDirective.name,{nonTlbTranscludeDirective:nonTlbTranscludeDirective});else{var slots=createMap();if(isObject(directiveValue)){$template=[];var slotMap=createMap(),filledSlots=createMap();forEach(directiveValue,function(elementSelector,slotName){var optional="?"===elementSelector.charAt(0);elementSelector=optional?elementSelector.substring(1):elementSelector,slotMap[elementSelector]=slotName,slots[slotName]=null,filledSlots[slotName]=optional}),forEach($compileNode.contents(),function(node){var slotName=slotMap[directiveNormalize(nodeName_(node))];slotName?(filledSlots[slotName]=!0,slots[slotName]=slots[slotName]||[],slots[slotName].push(node)):$template.push(node)}),forEach(filledSlots,function(filled,slotName){if(!filled)throw $compileMinErr("reqslot","Required transclusion slot `{0}` was not filled.",slotName)});for(var slotName in slots)slots[slotName]&&(slots[slotName]=compilationGenerator(mightHaveMultipleTransclusionError,slots[slotName],transcludeFn))}else $template=jqLite(jqLiteClone(compileNode)).contents();$compileNode.empty(),childTranscludeFn=compilationGenerator(mightHaveMultipleTransclusionError,$template,transcludeFn,void 0,void 0,{needsNewScope:directive.$$isolateScope||directive.$$newScope}),childTranscludeFn.$$slots=slots}if(directive.template)if(hasTemplate=!0,assertNoDuplicate("template",templateDirective,directive,$compileNode),templateDirective=directive,directiveValue=isFunction(directive.template)?directive.template($compileNode,templateAttrs):directive.template,directiveValue=denormalizeTemplate(directiveValue),directive.replace){if(replaceDirective=directive,$template=jqLiteIsTextNode(directiveValue)?[]:removeComments(wrapTemplate(directive.templateNamespace,trim(directiveValue))),compileNode=$template[0],1!==$template.length||compileNode.nodeType!==NODE_TYPE_ELEMENT)throw $compileMinErr("tplrt","Template for directive '{0}' must have exactly one root element. {1}",directiveName,"");replaceWith(jqCollection,$compileNode,compileNode);var newTemplateAttrs={$attr:{}},templateDirectives=collectDirectives(compileNode,[],newTemplateAttrs),unprocessedDirectives=directives.splice(i+1,directives.length-(i+1));(newIsolateScopeDirective||newScopeDirective)&&markDirectiveScope(templateDirectives,newIsolateScopeDirective,newScopeDirective),directives=directives.concat(templateDirectives).concat(unprocessedDirectives),mergeTemplateAttributes(templateAttrs,newTemplateAttrs),ii=directives.length}else $compileNode.html(directiveValue);if(directive.templateUrl)hasTemplate=!0,assertNoDuplicate("template",templateDirective,directive,$compileNode),templateDirective=directive,directive.replace&&(replaceDirective=directive),nodeLinkFn=compileTemplateUrl(directives.splice(i,directives.length-i),$compileNode,templateAttrs,jqCollection,hasTranscludeDirective&&childTranscludeFn,preLinkFns,postLinkFns,{controllerDirectives:controllerDirectives,newScopeDirective:newScopeDirective!==directive&&newScopeDirective,newIsolateScopeDirective:newIsolateScopeDirective,templateDirective:templateDirective,nonTlbTranscludeDirective:nonTlbTranscludeDirective}),ii=directives.length;else if(directive.compile)try{linkFn=directive.compile($compileNode,templateAttrs,childTranscludeFn);var context=directive.$$originalDirective||directive;isFunction(linkFn)?addLinkFns(null,bind(context,linkFn),attrStart,attrEnd):linkFn&&addLinkFns(bind(context,linkFn.pre),bind(context,linkFn.post),attrStart,attrEnd)}catch(e){$exceptionHandler(e,startingTag($compileNode))}directive.terminal&&(nodeLinkFn.terminal=!0,terminalPriority=Math.max(terminalPriority,directive.priority))}return nodeLinkFn.scope=newScopeDirective&&!0===newScopeDirective.scope,nodeLinkFn.transcludeOnThisElement=hasTranscludeDirective,nodeLinkFn.templateOnThisElement=hasTemplate,nodeLinkFn.transclude=childTranscludeFn,previousCompileContext.hasElementTranscludeDirective=hasElementTranscludeDirective,nodeLinkFn}function getControllers(directiveName,require,$element,elementControllers){var value;if(isString(require)){var match=require.match(REQUIRE_PREFIX_REGEXP),name=require.substring(match[0].length),inheritType=match[1]||match[3],optional="?"===match[2];if("^^"===inheritType?$element=$element.parent():(value=elementControllers&&elementControllers[name],value=value&&value.instance),!value){var dataName="$"+name+"Controller";value=inheritType?$element.inheritedData(dataName):$element.data(dataName)}if(!value&&!optional)throw $compileMinErr("ctreq","Controller '{0}', required by directive '{1}', can't be found!",name,directiveName)}else if(isArray(require)){value=[];for(var i=0,ii=require.length;i<ii;i++)value[i]=getControllers(directiveName,require[i],$element,elementControllers)}else isObject(require)&&(value={},forEach(require,function(controller,property){value[property]=getControllers(directiveName,controller,$element,elementControllers)}));return value||null}function setupControllers($element,attrs,transcludeFn,controllerDirectives,isolateScope,scope,newIsolateScopeDirective){var elementControllers=createMap();for(var controllerKey in controllerDirectives){var directive=controllerDirectives[controllerKey],locals={$scope:directive===newIsolateScopeDirective||directive.$$isolateScope?isolateScope:scope,$element:$element,$attrs:attrs,$transclude:transcludeFn},controller=directive.controller;"@"===controller&&(controller=attrs[directive.name]);var controllerInstance=$controller(controller,locals,!0,directive.controllerAs);elementControllers[directive.name]=controllerInstance,$element.data("$"+directive.name+"Controller",controllerInstance.instance)}return elementControllers}function markDirectiveScope(directives,isolateScope,newScope){for(var j=0,jj=directives.length;j<jj;j++)directives[j]=inherit(directives[j],{$$isolateScope:isolateScope,$$newScope:newScope})}function addDirective(tDirectives,name,location,maxPriority,ignoreDirective,startAttrName,endAttrName){if(name===ignoreDirective)return null;var match=null;if(hasDirectives.hasOwnProperty(name))for(var directive,directives=$injector.get(name+Suffix),i=0,ii=directives.length;i<ii;i++)if(directive=directives[i],(isUndefined(maxPriority)||maxPriority>directive.priority)&&-1!==directive.restrict.indexOf(location)){if(startAttrName&&(directive=inherit(directive,{$$start:startAttrName,$$end:endAttrName})),!directive.$$bindings){var bindings=directive.$$bindings=parseDirectiveBindings(directive,directive.name);isObject(bindings.isolateScope)&&(directive.$$isolateBindings=bindings.isolateScope)}tDirectives.push(directive),match=directive}return match}function directiveIsMultiElement(name){if(hasDirectives.hasOwnProperty(name))for(var directive,directives=$injector.get(name+Suffix),i=0,ii=directives.length;i<ii;i++)if(directive=directives[i],directive.multiElement)return!0;return!1}function mergeTemplateAttributes(dst,src){var srcAttr=src.$attr,dstAttr=dst.$attr;forEach(dst,function(value,key){"$"!==key.charAt(0)&&(src[key]&&src[key]!==value&&(value.length?value+=("style"===key?";":" ")+src[key]:value=src[key]),dst.$set(key,value,!0,srcAttr[key]))}),forEach(src,function(value,key){dst.hasOwnProperty(key)||"$"===key.charAt(0)||(dst[key]=value,"class"!==key&&"style"!==key&&(dstAttr[key]=srcAttr[key]))})}function compileTemplateUrl(directives,$compileNode,tAttrs,$rootElement,childTranscludeFn,preLinkFns,postLinkFns,previousCompileContext){var afterTemplateNodeLinkFn,afterTemplateChildLinkFn,linkQueue=[],beforeTemplateCompileNode=$compileNode[0],origAsyncDirective=directives.shift(),derivedSyncDirective=inherit(origAsyncDirective,{templateUrl:null,transclude:null,replace:null,$$originalDirective:origAsyncDirective}),templateUrl=isFunction(origAsyncDirective.templateUrl)?origAsyncDirective.templateUrl($compileNode,tAttrs):origAsyncDirective.templateUrl,templateNamespace=origAsyncDirective.templateNamespace;return $compileNode.empty(),$templateRequest(templateUrl).then(function(content){var compileNode,tempTemplateAttrs,$template,childBoundTranscludeFn;if(content=denormalizeTemplate(content),origAsyncDirective.replace){if($template=jqLiteIsTextNode(content)?[]:removeComments(wrapTemplate(templateNamespace,trim(content))),compileNode=$template[0],1!==$template.length||compileNode.nodeType!==NODE_TYPE_ELEMENT)throw $compileMinErr("tplrt","Template for directive '{0}' must have exactly one root element. {1}",origAsyncDirective.name,templateUrl);tempTemplateAttrs={$attr:{}},replaceWith($rootElement,$compileNode,compileNode);var templateDirectives=collectDirectives(compileNode,[],tempTemplateAttrs);isObject(origAsyncDirective.scope)&&markDirectiveScope(templateDirectives,!0),directives=templateDirectives.concat(directives),mergeTemplateAttributes(tAttrs,tempTemplateAttrs)}else compileNode=beforeTemplateCompileNode,$compileNode.html(content);for(directives.unshift(derivedSyncDirective),afterTemplateNodeLinkFn=applyDirectivesToNode(directives,compileNode,tAttrs,childTranscludeFn,$compileNode,origAsyncDirective,preLinkFns,postLinkFns,previousCompileContext),forEach($rootElement,function(node,i){node===compileNode&&($rootElement[i]=$compileNode[0])}),afterTemplateChildLinkFn=compileNodes($compileNode[0].childNodes,childTranscludeFn);linkQueue.length;){var scope=linkQueue.shift(),beforeTemplateLinkNode=linkQueue.shift(),linkRootElement=linkQueue.shift(),boundTranscludeFn=linkQueue.shift(),linkNode=$compileNode[0];if(!scope.$$destroyed){if(beforeTemplateLinkNode!==beforeTemplateCompileNode){var oldClasses=beforeTemplateLinkNode.className;previousCompileContext.hasElementTranscludeDirective&&origAsyncDirective.replace||(linkNode=jqLiteClone(compileNode)),replaceWith(linkRootElement,jqLite(beforeTemplateLinkNode),linkNode),safeAddClass(jqLite(linkNode),oldClasses)}childBoundTranscludeFn=afterTemplateNodeLinkFn.transcludeOnThisElement?createBoundTranscludeFn(scope,afterTemplateNodeLinkFn.transclude,boundTranscludeFn):boundTranscludeFn,afterTemplateNodeLinkFn(afterTemplateChildLinkFn,scope,linkNode,$rootElement,childBoundTranscludeFn)}}linkQueue=null}).catch(function(error){error instanceof Error&&$exceptionHandler(error)}),function(ignoreChildLinkFn,scope,node,rootElement,boundTranscludeFn){var childBoundTranscludeFn=boundTranscludeFn;scope.$$destroyed||(linkQueue?linkQueue.push(scope,node,rootElement,childBoundTranscludeFn):(afterTemplateNodeLinkFn.transcludeOnThisElement&&(childBoundTranscludeFn=createBoundTranscludeFn(scope,afterTemplateNodeLinkFn.transclude,boundTranscludeFn)),afterTemplateNodeLinkFn(afterTemplateChildLinkFn,scope,node,rootElement,childBoundTranscludeFn)))}}function byPriority(a,b){var diff=b.priority-a.priority;return 0!==diff?diff:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function assertNoDuplicate(what,previousDirective,directive,element){function wrapModuleNameIfDefined(moduleName){return moduleName?" (module: "+moduleName+")":""}if(previousDirective)throw $compileMinErr("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",previousDirective.name,wrapModuleNameIfDefined(previousDirective.$$moduleName),directive.name,wrapModuleNameIfDefined(directive.$$moduleName),what,startingTag(element))}function addTextInterpolateDirective(directives,text){var interpolateFn=$interpolate(text,!0);interpolateFn&&directives.push({priority:0,compile:function(templateNode){var templateNodeParent=templateNode.parent(),hasCompileParent=!!templateNodeParent.length;return hasCompileParent&&compile.$$addBindingClass(templateNodeParent),function(scope,node){var parent=node.parent();hasCompileParent||compile.$$addBindingClass(parent),compile.$$addBindingInfo(parent,interpolateFn.expressions),scope.$watch(interpolateFn,function(value){node[0].nodeValue=value})}}})}function wrapTemplate(type,template){switch(type=lowercase(type||"html")){case"svg":case"math":var wrapper=window.document.createElement("div");return wrapper.innerHTML="<"+type+">"+template+"</"+type+">",wrapper.childNodes[0].childNodes;default:return template}}function getTrustedContext(node,attrNormalizedName){if("srcdoc"===attrNormalizedName)return $sce.HTML;var tag=nodeName_(node);if("src"===attrNormalizedName||"ngSrc"===attrNormalizedName){if(-1===["img","video","audio","source","track"].indexOf(tag))return $sce.RESOURCE_URL}else if("xlinkHref"===attrNormalizedName||"form"===tag&&"action"===attrNormalizedName||"link"===tag&&"href"===attrNormalizedName)return $sce.RESOURCE_URL}function addAttrInterpolateDirective(node,directives,value,name,isNgAttr){var trustedContext=getTrustedContext(node,name),mustHaveExpression=!isNgAttr,allOrNothing=ALL_OR_NOTHING_ATTRS[name]||isNgAttr,interpolateFn=$interpolate(value,mustHaveExpression,trustedContext,allOrNothing);if(interpolateFn){if("multiple"===name&&"select"===nodeName_(node))throw $compileMinErr("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",startingTag(node));if(EVENT_HANDLER_ATTR_REGEXP.test(name))throw $compileMinErr("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");directives.push({priority:100,compile:function(){return{pre:function(scope,element,attr){var $$observers=attr.$$observers||(attr.$$observers=createMap()),newValue=attr[name];newValue!==value&&(interpolateFn=newValue&&$interpolate(newValue,!0,trustedContext,allOrNothing),value=newValue),interpolateFn&&(attr[name]=interpolateFn(scope),($$observers[name]||($$observers[name]=[])).$$inter=!0,(attr.$$observers&&attr.$$observers[name].$$scope||scope).$watch(interpolateFn,function(newValue,oldValue){"class"===name&&newValue!==oldValue?attr.$updateClass(newValue,oldValue):attr.$set(name,newValue)}))}}}})}}function replaceWith($rootElement,elementsToRemove,newNode){var i,ii,firstElementToRemove=elementsToRemove[0],removeCount=elementsToRemove.length,parent=firstElementToRemove.parentNode;if($rootElement)for(i=0,ii=$rootElement.length;i<ii;i++)if($rootElement[i]===firstElementToRemove){$rootElement[i++]=newNode;for(var j=i,j2=j+removeCount-1,jj=$rootElement.length;j<jj;j++,j2++)j2<jj?$rootElement[j]=$rootElement[j2]:delete $rootElement[j];$rootElement.length-=removeCount-1,$rootElement.context===firstElementToRemove&&($rootElement.context=newNode);break}parent&&parent.replaceChild(newNode,firstElementToRemove);var fragment=window.document.createDocumentFragment();for(i=0;i<removeCount;i++)fragment.appendChild(elementsToRemove[i]);for(jqLite.hasData(firstElementToRemove)&&(jqLite.data(newNode,jqLite.data(firstElementToRemove)),jqLite(firstElementToRemove).off("$destroy")),jqLite.cleanData(fragment.querySelectorAll("*")),i=1;i<removeCount;i++)delete elementsToRemove[i];elementsToRemove[0]=newNode,elementsToRemove.length=1}function cloneAndAnnotateFn(fn,annotation){return extend(function(){return fn.apply(null,arguments)},fn,annotation)}function invokeLinkFn(linkFn,scope,$element,attrs,controllers,transcludeFn){try{linkFn(scope,$element,attrs,controllers,transcludeFn)}catch(e){$exceptionHandler(e,startingTag($element))}}function initializeDirectiveBindings(scope,attrs,destination,bindings,directive){function recordChanges(key,currentValue,previousValue){isFunction(destination.$onChanges)&&!simpleCompare(currentValue,previousValue)&&(onChangesQueue||(scope.$$postDigest(flushOnChangesQueue),onChangesQueue=[]),changes||(changes={},onChangesQueue.push(triggerOnChangesHook)),changes[key]&&(previousValue=changes[key].previousValue),changes[key]=new SimpleChange(previousValue,currentValue))}function triggerOnChangesHook(){destination.$onChanges(changes),changes=void 0}var changes,removeWatchCollection=[],initialChanges={};return forEach(bindings,function(definition,scopeName){var lastValue,parentGet,parentSet,compare,removeWatch,attrName=definition.attrName,optional=definition.optional,mode=definition.mode;switch(mode){case"@":optional||hasOwnProperty.call(attrs,attrName)||(destination[scopeName]=attrs[attrName]=void 0),removeWatch=attrs.$observe(attrName,function(value){if(isString(value)||isBoolean(value)){var oldValue=destination[scopeName];recordChanges(scopeName,value,oldValue),destination[scopeName]=value}}),attrs.$$observers[attrName].$$scope=scope,lastValue=attrs[attrName],isString(lastValue)?destination[scopeName]=$interpolate(lastValue)(scope):isBoolean(lastValue)&&(destination[scopeName]=lastValue),initialChanges[scopeName]=new SimpleChange(_UNINITIALIZED_VALUE,destination[scopeName]),removeWatchCollection.push(removeWatch);break;case"=":if(!hasOwnProperty.call(attrs,attrName)){if(optional)break;attrs[attrName]=void 0}if(optional&&!attrs[attrName])break;parentGet=$parse(attrs[attrName]),compare=parentGet.literal?equals:simpleCompare,parentSet=parentGet.assign||function(){throw lastValue=destination[scopeName]=parentGet(scope),$compileMinErr("nonassign","Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!",attrs[attrName],attrName,directive.name)},lastValue=destination[scopeName]=parentGet(scope);var parentValueWatch=function(parentValue){return compare(parentValue,destination[scopeName])||(compare(parentValue,lastValue)?parentSet(scope,parentValue=destination[scopeName]):destination[scopeName]=parentValue),lastValue=parentValue};parentValueWatch.$stateful=!0,removeWatch=definition.collection?scope.$watchCollection(attrs[attrName],parentValueWatch):scope.$watch($parse(attrs[attrName],parentValueWatch),null,parentGet.literal),removeWatchCollection.push(removeWatch);break;case"<":if(!hasOwnProperty.call(attrs,attrName)){if(optional)break;attrs[attrName]=void 0}if(optional&&!attrs[attrName])break;parentGet=$parse(attrs[attrName]);var deepWatch=parentGet.literal,initialValue=destination[scopeName]=parentGet(scope);initialChanges[scopeName]=new SimpleChange(_UNINITIALIZED_VALUE,destination[scopeName]),removeWatch=scope.$watch(parentGet,function(newValue,oldValue){if(oldValue===newValue){if(oldValue===initialValue||deepWatch&&equals(oldValue,initialValue))return;oldValue=initialValue}recordChanges(scopeName,newValue,oldValue),destination[scopeName]=newValue},deepWatch),removeWatchCollection.push(removeWatch);break;case"&":if((parentGet=attrs.hasOwnProperty(attrName)?$parse(attrs[attrName]):noop)===noop&&optional)break;destination[scopeName]=function(locals){return parentGet(scope,locals)}}}),{initialChanges:initialChanges,removeWatches:removeWatchCollection.length&&function(){for(var i=0,ii=removeWatchCollection.length;i<ii;++i)removeWatchCollection[i]()}}}var onChangesQueue,SIMPLE_ATTR_NAME=/^\w/,specialAttrHolder=window.document.createElement("div"),commentDirectivesEnabled=commentDirectivesEnabledConfig,cssClassDirectivesEnabled=cssClassDirectivesEnabledConfig,onChangesTtl=TTL;Attributes.prototype={$normalize:directiveNormalize,$addClass:function(classVal){classVal&&classVal.length>0&&$animate.addClass(this.$$element,classVal)},$removeClass:function(classVal){classVal&&classVal.length>0&&$animate.removeClass(this.$$element,classVal)},$updateClass:function(newClasses,oldClasses){var toAdd=tokenDifference(newClasses,oldClasses);toAdd&&toAdd.length&&$animate.addClass(this.$$element,toAdd);var toRemove=tokenDifference(oldClasses,newClasses);toRemove&&toRemove.length&&$animate.removeClass(this.$$element,toRemove)},$set:function(key,value,writeAttr,attrName){var nodeName,node=this.$$element[0],booleanKey=getBooleanAttrName(node,key),aliasedKey=getAliasedAttrName(key),observer=key;if(booleanKey?(this.$$element.prop(key,value),attrName=booleanKey):aliasedKey&&(this[aliasedKey]=value,observer=aliasedKey),this[key]=value,attrName?this.$attr[key]=attrName:(attrName=this.$attr[key])||(this.$attr[key]=attrName=snake_case(key,"-")),"a"===(nodeName=nodeName_(this.$$element))&&("href"===key||"xlinkHref"===key)||"img"===nodeName&&"src"===key)this[key]=value=$$sanitizeUri(value,"src"===key);else if("img"===nodeName&&"srcset"===key&&isDefined(value)){for(var result="",trimmedSrcset=trim(value),pattern=/\s/.test(trimmedSrcset)?/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/:/(,)/,rawUris=trimmedSrcset.split(pattern),nbrUrisWith2parts=Math.floor(rawUris.length/2),i=0;i<nbrUrisWith2parts;i++){var innerIdx=2*i;result+=$$sanitizeUri(trim(rawUris[innerIdx]),!0),result+=" "+trim(rawUris[innerIdx+1])}var lastTuple=trim(rawUris[2*i]).split(/\s/);result+=$$sanitizeUri(trim(lastTuple[0]),!0),2===lastTuple.length&&(result+=" "+trim(lastTuple[1])),this[key]=value=result}!1!==writeAttr&&(null===value||isUndefined(value)?this.$$element.removeAttr(attrName):SIMPLE_ATTR_NAME.test(attrName)?this.$$element.attr(attrName,value):setSpecialAttr(this.$$element[0],attrName,value));var $$observers=this.$$observers;$$observers&&forEach($$observers[observer],function(fn){try{fn(value)}catch(e){$exceptionHandler(e)}})},$observe:function(key,fn){var attrs=this,$$observers=attrs.$$observers||(attrs.$$observers=createMap()),listeners=$$observers[key]||($$observers[key]=[]);return listeners.push(fn),$rootScope.$evalAsync(function(){listeners.$$inter||!attrs.hasOwnProperty(key)||isUndefined(attrs[key])||fn(attrs[key])}),function(){arrayRemove(listeners,fn)}}};var startSymbol=$interpolate.startSymbol(),endSymbol=$interpolate.endSymbol(),denormalizeTemplate="{{"===startSymbol&&"}}"===endSymbol?identity:function(template){return template.replace(/\{\{/g,startSymbol).replace(/}}/g,endSymbol)},NG_ATTR_BINDING=/^ngAttr[A-Z]/,MULTI_ELEMENT_DIR_RE=/^(.+)Start$/;return compile.$$addBindingInfo=debugInfoEnabled?function($element,binding){var bindings=$element.data("$binding")||[]
;isArray(binding)?bindings=bindings.concat(binding):bindings.push(binding),$element.data("$binding",bindings)}:noop,compile.$$addBindingClass=debugInfoEnabled?function($element){safeAddClass($element,"ng-binding")}:noop,compile.$$addScopeInfo=debugInfoEnabled?function($element,scope,isolated,noTemplate){var dataName=isolated?noTemplate?"$isolateScopeNoTemplate":"$isolateScope":"$scope";$element.data(dataName,scope)}:noop,compile.$$addScopeClass=debugInfoEnabled?function($element,isolated){safeAddClass($element,isolated?"ng-isolate-scope":"ng-scope")}:noop,compile.$$createComment=function(directiveName,comment){var content="";return debugInfoEnabled&&(content=" "+(directiveName||"")+": ",comment&&(content+=comment+" ")),window.document.createComment(content)},compile}]}function SimpleChange(previous,current){this.previousValue=previous,this.currentValue=current}function directiveNormalize(name){return name.replace(PREFIX_REGEXP,"").replace(SPECIAL_CHARS_REGEXP,fnCamelCaseReplace)}function tokenDifference(str1,str2){var values="",tokens1=str1.split(/\s+/),tokens2=str2.split(/\s+/);outer:for(var i=0;i<tokens1.length;i++){for(var token=tokens1[i],j=0;j<tokens2.length;j++)if(token===tokens2[j])continue outer;values+=(values.length>0?" ":"")+token}return values}function removeComments(jqNodes){jqNodes=jqLite(jqNodes);var i=jqNodes.length;if(i<=1)return jqNodes;for(;i--;){var node=jqNodes[i];(node.nodeType===NODE_TYPE_COMMENT||node.nodeType===NODE_TYPE_TEXT&&""===node.nodeValue.trim())&&splice.call(jqNodes,i,1)}return jqNodes}function identifierForController(controller,ident){if(ident&&isString(ident))return ident;if(isString(controller)){var match=CNTRL_REG.exec(controller);if(match)return match[3]}}function $ControllerProvider(){var controllers={},globals=!1;this.has=function(name){return controllers.hasOwnProperty(name)},this.register=function(name,constructor){assertNotHasOwnProperty(name,"controller"),isObject(name)?extend(controllers,name):controllers[name]=constructor},this.allowGlobals=function(){globals=!0},this.$get=["$injector","$window",function($injector,$window){function addIdentifier(locals,identifier,instance,name){if(!locals||!isObject(locals.$scope))throw minErr("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",name,identifier);locals.$scope[identifier]=instance}return function(expression,locals,later,ident){var instance,match,constructor,identifier;if(later=!0===later,ident&&isString(ident)&&(identifier=ident),isString(expression)){if(!(match=expression.match(CNTRL_REG)))throw $controllerMinErr("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",expression);if(constructor=match[1],identifier=identifier||match[3],!(expression=controllers.hasOwnProperty(constructor)?controllers[constructor]:getter(locals.$scope,constructor,!0)||(globals?getter($window,constructor,!0):void 0)))throw $controllerMinErr("ctrlreg","The controller with the name '{0}' is not registered.",constructor);assertArgFn(expression,constructor,!0)}if(later){var controllerPrototype=(isArray(expression)?expression[expression.length-1]:expression).prototype;return instance=Object.create(controllerPrototype||null),identifier&&addIdentifier(locals,identifier,instance,constructor||expression.name),extend(function(){var result=$injector.invoke(expression,instance,locals,constructor);return result!==instance&&(isObject(result)||isFunction(result))&&(instance=result,identifier&&addIdentifier(locals,identifier,instance,constructor||expression.name)),instance},{instance:instance,identifier:identifier})}return instance=$injector.instantiate(expression,locals,constructor),identifier&&addIdentifier(locals,identifier,instance,constructor||expression.name),instance}}]}function $DocumentProvider(){this.$get=["$window",function(window){return jqLite(window.document)}]}function $$IsDocumentHiddenProvider(){this.$get=["$document","$rootScope",function($document,$rootScope){function changeListener(){hidden=doc.hidden}var doc=$document[0],hidden=doc&&doc.hidden;return $document.on("visibilitychange",changeListener),$rootScope.$on("$destroy",function(){$document.off("visibilitychange",changeListener)}),function(){return hidden}}]}function $ExceptionHandlerProvider(){this.$get=["$log",function($log){return function(exception,cause){$log.error.apply($log,arguments)}}]}function serializeValue(v){return isObject(v)?isDate(v)?v.toISOString():toJson(v):v}function $HttpParamSerializerProvider(){this.$get=function(){return function(params){if(!params)return"";var parts=[];return forEachSorted(params,function(value,key){null===value||isUndefined(value)||(isArray(value)?forEach(value,function(v){parts.push(encodeUriQuery(key)+"="+encodeUriQuery(serializeValue(v)))}):parts.push(encodeUriQuery(key)+"="+encodeUriQuery(serializeValue(value))))}),parts.join("&")}}}function $HttpParamSerializerJQLikeProvider(){this.$get=function(){return function(params){function serialize(toSerialize,prefix,topLevel){null===toSerialize||isUndefined(toSerialize)||(isArray(toSerialize)?forEach(toSerialize,function(value,index){serialize(value,prefix+"["+(isObject(value)?index:"")+"]")}):isObject(toSerialize)&&!isDate(toSerialize)?forEachSorted(toSerialize,function(value,key){serialize(value,prefix+(topLevel?"":"[")+key+(topLevel?"":"]"))}):parts.push(encodeUriQuery(prefix)+"="+encodeUriQuery(serializeValue(toSerialize))))}if(!params)return"";var parts=[];return serialize(params,"",!0),parts.join("&")}}}function defaultHttpResponseTransform(data,headers){if(isString(data)){var tempData=data.replace(JSON_PROTECTION_PREFIX,"").trim();if(tempData){var contentType=headers("Content-Type");if(contentType&&0===contentType.indexOf(APPLICATION_JSON)||isJsonLike(tempData))try{data=fromJson(tempData)}catch(e){throw $httpMinErr("baddata",'Data must be a valid JSON object. Received: "{0}". Parse error: "{1}"',data,e)}}}return data}function isJsonLike(str){var jsonStart=str.match(JSON_START);return jsonStart&&JSON_ENDS[jsonStart[0]].test(str)}function parseHeaders(headers){function fillInParsed(key,val){key&&(parsed[key]=parsed[key]?parsed[key]+", "+val:val)}var i,parsed=createMap();return isString(headers)?forEach(headers.split("\n"),function(line){i=line.indexOf(":"),fillInParsed(lowercase(trim(line.substr(0,i))),trim(line.substr(i+1)))}):isObject(headers)&&forEach(headers,function(headerVal,headerKey){fillInParsed(lowercase(headerKey),trim(headerVal))}),parsed}function headersGetter(headers){var headersObj;return function(name){if(headersObj||(headersObj=parseHeaders(headers)),name){var value=headersObj[lowercase(name)];return void 0===value&&(value=null),value}return headersObj}}function transformData(data,headers,status,fns){return isFunction(fns)?fns(data,headers,status):(forEach(fns,function(fn){data=fn(data,headers,status)}),data)}function isSuccess(status){return 200<=status&&status<300}function $HttpProvider(){var defaults=this.defaults={transformResponse:[defaultHttpResponseTransform],transformRequest:[function(d){return!isObject(d)||isFile(d)||isBlob(d)||isFormData(d)?d:toJson(d)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:shallowCopy(CONTENT_TYPE_APPLICATION_JSON),put:shallowCopy(CONTENT_TYPE_APPLICATION_JSON),patch:shallowCopy(CONTENT_TYPE_APPLICATION_JSON)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer",jsonpCallbackParam:"callback"},useApplyAsync=!1;this.useApplyAsync=function(value){return isDefined(value)?(useApplyAsync=!!value,this):useApplyAsync};var interceptorFactories=this.interceptors=[];this.$get=["$browser","$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector","$sce",function($browser,$httpBackend,$$cookieReader,$cacheFactory,$rootScope,$q,$injector,$sce){function $http(requestConfig){function chainInterceptors(promise,interceptors){for(var i=0,ii=interceptors.length;i<ii;){var thenFn=interceptors[i++],rejectFn=interceptors[i++];promise=promise.then(thenFn,rejectFn)}return interceptors.length=0,promise}function completeOutstandingRequest(){$browser.$$completeOutstandingRequest(noop)}function executeHeaderFns(headers,config){var headerContent,processedHeaders={};return forEach(headers,function(headerFn,header){isFunction(headerFn)?null!=(headerContent=headerFn(config))&&(processedHeaders[header]=headerContent):processedHeaders[header]=headerFn}),processedHeaders}function serverRequest(config){var headers=config.headers,reqData=transformData(config.data,headersGetter(headers),void 0,config.transformRequest);return isUndefined(reqData)&&forEach(headers,function(value,header){"content-type"===lowercase(header)&&delete headers[header]}),isUndefined(config.withCredentials)&&!isUndefined(defaults.withCredentials)&&(config.withCredentials=defaults.withCredentials),sendReq(config,reqData).then(transformResponse,transformResponse)}function transformResponse(response){var resp=extend({},response);return resp.data=transformData(response.data,response.headers,response.status,config.transformResponse),isSuccess(response.status)?resp:$q.reject(resp)}if(!isObject(requestConfig))throw minErr("$http")("badreq","Http request configuration must be an object.  Received: {0}",requestConfig);if(!isString($sce.valueOf(requestConfig.url)))throw minErr("$http")("badreq","Http request configuration url must be a string or a $sce trusted object.  Received: {0}",requestConfig.url);var config=extend({method:"get",transformRequest:defaults.transformRequest,transformResponse:defaults.transformResponse,paramSerializer:defaults.paramSerializer,jsonpCallbackParam:defaults.jsonpCallbackParam},requestConfig);config.headers=function(config){var defHeaderName,lowercaseDefHeaderName,reqHeaderName,defHeaders=defaults.headers,reqHeaders=extend({},config.headers);defHeaders=extend({},defHeaders.common,defHeaders[lowercase(config.method)]);defaultHeadersIteration:for(defHeaderName in defHeaders){lowercaseDefHeaderName=lowercase(defHeaderName);for(reqHeaderName in reqHeaders)if(lowercase(reqHeaderName)===lowercaseDefHeaderName)continue defaultHeadersIteration;reqHeaders[defHeaderName]=defHeaders[defHeaderName]}return executeHeaderFns(reqHeaders,shallowCopy(config))}(requestConfig),config.method=uppercase(config.method),config.paramSerializer=isString(config.paramSerializer)?$injector.get(config.paramSerializer):config.paramSerializer,$browser.$$incOutstandingRequestCount();var requestInterceptors=[],responseInterceptors=[],promise=$q.resolve(config);return forEach(reversedInterceptors,function(interceptor){(interceptor.request||interceptor.requestError)&&requestInterceptors.unshift(interceptor.request,interceptor.requestError),(interceptor.response||interceptor.responseError)&&responseInterceptors.push(interceptor.response,interceptor.responseError)}),promise=chainInterceptors(promise,requestInterceptors),promise=promise.then(serverRequest),promise=chainInterceptors(promise,responseInterceptors),promise=promise.finally(completeOutstandingRequest)}function sendReq(config,reqData){function createApplyHandlers(eventHandlers){if(eventHandlers){var applyHandlers={};return forEach(eventHandlers,function(eventHandler,key){applyHandlers[key]=function(event){function callEventHandler(){eventHandler(event)}useApplyAsync?$rootScope.$applyAsync(callEventHandler):$rootScope.$$phase?callEventHandler():$rootScope.$apply(callEventHandler)}}),applyHandlers}}function done(status,response,headersString,statusText){function resolveHttpPromise(){resolvePromise(response,status,headersString,statusText)}cache&&(isSuccess(status)?cache.put(url,[status,response,parseHeaders(headersString),statusText]):cache.remove(url)),useApplyAsync?$rootScope.$applyAsync(resolveHttpPromise):(resolveHttpPromise(),$rootScope.$$phase||$rootScope.$apply())}function resolvePromise(response,status,headers,statusText){status=status>=-1?status:0,(isSuccess(status)?deferred.resolve:deferred.reject)({data:response,status:status,headers:headersGetter(headers),config:config,statusText:statusText})}function resolvePromiseWithResult(result){resolvePromise(result.data,result.status,shallowCopy(result.headers()),result.statusText)}function removePendingReq(){var idx=$http.pendingRequests.indexOf(config);-1!==idx&&$http.pendingRequests.splice(idx,1)}var cache,cachedResp,deferred=$q.defer(),promise=deferred.promise,reqHeaders=config.headers,isJsonp="jsonp"===lowercase(config.method),url=config.url;if(isJsonp?url=$sce.getTrustedResourceUrl(url):isString(url)||(url=$sce.valueOf(url)),url=buildUrl(url,config.paramSerializer(config.params)),isJsonp&&(url=sanitizeJsonpCallbackParam(url,config.jsonpCallbackParam)),$http.pendingRequests.push(config),promise.then(removePendingReq,removePendingReq),!config.cache&&!defaults.cache||!1===config.cache||"GET"!==config.method&&"JSONP"!==config.method||(cache=isObject(config.cache)?config.cache:isObject(defaults.cache)?defaults.cache:defaultCache),cache&&(cachedResp=cache.get(url),isDefined(cachedResp)?isPromiseLike(cachedResp)?cachedResp.then(resolvePromiseWithResult,resolvePromiseWithResult):isArray(cachedResp)?resolvePromise(cachedResp[1],cachedResp[0],shallowCopy(cachedResp[2]),cachedResp[3]):resolvePromise(cachedResp,200,{},"OK"):cache.put(url,promise)),isUndefined(cachedResp)){var xsrfValue=urlIsSameOrigin(config.url)?$$cookieReader()[config.xsrfCookieName||defaults.xsrfCookieName]:void 0;xsrfValue&&(reqHeaders[config.xsrfHeaderName||defaults.xsrfHeaderName]=xsrfValue),$httpBackend(config.method,url,reqData,done,reqHeaders,config.timeout,config.withCredentials,config.responseType,createApplyHandlers(config.eventHandlers),createApplyHandlers(config.uploadEventHandlers))}return promise}function buildUrl(url,serializedParams){return serializedParams.length>0&&(url+=(-1===url.indexOf("?")?"?":"&")+serializedParams),url}function sanitizeJsonpCallbackParam(url,key){if(/[&?][^=]+=JSON_CALLBACK/.test(url))throw $httpMinErr("badjsonp",'Illegal use of JSON_CALLBACK in url, "{0}"',url);if(new RegExp("[&?]"+key+"=").test(url))throw $httpMinErr("badjsonp",'Illegal use of callback param, "{0}", in url, "{1}"',key,url);return url+=(-1===url.indexOf("?")?"?":"&")+key+"=JSON_CALLBACK"}var defaultCache=$cacheFactory("$http");defaults.paramSerializer=isString(defaults.paramSerializer)?$injector.get(defaults.paramSerializer):defaults.paramSerializer;var reversedInterceptors=[];return forEach(interceptorFactories,function(interceptorFactory){reversedInterceptors.unshift(isString(interceptorFactory)?$injector.get(interceptorFactory):$injector.invoke(interceptorFactory))}),$http.pendingRequests=[],function(names){forEach(arguments,function(name){$http[name]=function(url,config){return $http(extend({},config||{},{method:name,url:url}))}})}("get","delete","head","jsonp"),function(name){forEach(arguments,function(name){$http[name]=function(url,data,config){return $http(extend({},config||{},{method:name,url:url,data:data}))}})}("post","put","patch"),$http.defaults=defaults,$http}]}function $xhrFactoryProvider(){this.$get=function(){return function(){return new window.XMLHttpRequest}}}function $HttpBackendProvider(){this.$get=["$browser","$jsonpCallbacks","$document","$xhrFactory",function($browser,$jsonpCallbacks,$document,$xhrFactory){return createHttpBackend($browser,$xhrFactory,$browser.defer,$jsonpCallbacks,$document[0])}]}function createHttpBackend($browser,createXhr,$browserDefer,callbacks,rawDocument){function jsonpReq(url,callbackPath,done){url=url.replace("JSON_CALLBACK",callbackPath);var script=rawDocument.createElement("script"),callback=null;return script.type="text/javascript",script.src=url,script.async=!0,callback=function(event){script.removeEventListener("load",callback),script.removeEventListener("error",callback),rawDocument.body.removeChild(script),script=null;var status=-1,text="unknown";event&&("load"!==event.type||callbacks.wasCalled(callbackPath)||(event={type:"error"}),text=event.type,status="error"===event.type?404:200),done&&done(status,text)},script.addEventListener("load",callback),script.addEventListener("error",callback),rawDocument.body.appendChild(script),callback}return function(method,url,post,callback,headers,timeout,withCredentials,responseType,eventHandlers,uploadEventHandlers){function timeoutRequest(){jsonpDone&&jsonpDone(),xhr&&xhr.abort()}function completeRequest(callback,status,response,headersString,statusText){isDefined(timeoutId)&&$browserDefer.cancel(timeoutId),jsonpDone=xhr=null,callback(status,response,headersString,statusText)}if(url=url||$browser.url(),"jsonp"===lowercase(method))var callbackPath=callbacks.createCallback(url),jsonpDone=jsonpReq(url,callbackPath,function(status,text){var response=200===status&&callbacks.getResponse(callbackPath);completeRequest(callback,status,response,"",text),callbacks.removeCallback(callbackPath)});else{var xhr=createXhr(method,url);xhr.open(method,url,!0),forEach(headers,function(value,key){isDefined(value)&&xhr.setRequestHeader(key,value)}),xhr.onload=function(){var statusText=xhr.statusText||"",response="response"in xhr?xhr.response:xhr.responseText,status=1223===xhr.status?204:xhr.status;0===status&&(status=response?200:"file"===urlResolve(url).protocol?404:0),completeRequest(callback,status,response,xhr.getAllResponseHeaders(),statusText)};var requestError=function(){completeRequest(callback,-1,null,null,"")};if(xhr.onerror=requestError,xhr.onabort=requestError,xhr.ontimeout=requestError,forEach(eventHandlers,function(value,key){xhr.addEventListener(key,value)}),forEach(uploadEventHandlers,function(value,key){xhr.upload.addEventListener(key,value)}),withCredentials&&(xhr.withCredentials=!0),responseType)try{xhr.responseType=responseType}catch(e){if("json"!==responseType)throw e}xhr.send(isUndefined(post)?null:post)}if(timeout>0)var timeoutId=$browserDefer(timeoutRequest,timeout);else isPromiseLike(timeout)&&timeout.then(timeoutRequest)}}function $InterpolateProvider(){var startSymbol="{{",endSymbol="}}";this.startSymbol=function(value){return value?(startSymbol=value,this):startSymbol},this.endSymbol=function(value){return value?(endSymbol=value,this):endSymbol},this.$get=["$parse","$exceptionHandler","$sce",function($parse,$exceptionHandler,$sce){function escape(ch){return"\\\\\\"+ch}function unescapeText(text){return text.replace(escapedStartRegexp,startSymbol).replace(escapedEndRegexp,endSymbol)}function constantWatchDelegate(scope,listener,objectEquality,constantInterp){var unwatch=scope.$watch(function(scope){return unwatch(),constantInterp(scope)},listener,objectEquality);return unwatch}function $interpolate(text,mustHaveExpression,trustedContext,allOrNothing){function parseStringifyInterceptor(value){try{return value=getValue(value),allOrNothing&&!isDefined(value)?value:stringify(value)}catch(err){$exceptionHandler($interpolateMinErr.interr(text,err))}}if(!text.length||-1===text.indexOf(startSymbol)){var constantInterp;if(!mustHaveExpression){constantInterp=valueFn(unescapeText(text)),constantInterp.exp=text,constantInterp.expressions=[],constantInterp.$$watchDelegate=constantWatchDelegate}return constantInterp}allOrNothing=!!allOrNothing;for(var startIndex,endIndex,exp,index=0,expressions=[],parseFns=[],textLength=text.length,concat=[],expressionPositions=[];index<textLength;){if(-1===(startIndex=text.indexOf(startSymbol,index))||-1===(endIndex=text.indexOf(endSymbol,startIndex+startSymbolLength))){index!==textLength&&concat.push(unescapeText(text.substring(index)));break}index!==startIndex&&concat.push(unescapeText(text.substring(index,startIndex))),exp=text.substring(startIndex+startSymbolLength,endIndex),expressions.push(exp),parseFns.push($parse(exp,parseStringifyInterceptor)),index=endIndex+endSymbolLength,expressionPositions.push(concat.length),concat.push("")}if(trustedContext&&concat.length>1&&$interpolateMinErr.throwNoconcat(text),!mustHaveExpression||expressions.length){var compute=function(values){for(var i=0,ii=expressions.length;i<ii;i++){if(allOrNothing&&isUndefined(values[i]))return;concat[expressionPositions[i]]=values[i]}return concat.join("")},getValue=function(value){return trustedContext?$sce.getTrusted(trustedContext,value):$sce.valueOf(value)};return extend(function(context){var i=0,ii=expressions.length,values=new Array(ii);try{for(;i<ii;i++)values[i]=parseFns[i](context);return compute(values)}catch(err){$exceptionHandler($interpolateMinErr.interr(text,err))}},{exp:text,expressions:expressions,$$watchDelegate:function(scope,listener){var lastValue;return scope.$watchGroup(parseFns,function(values,oldValues){var currValue=compute(values);isFunction(listener)&&listener.call(this,currValue,values!==oldValues?lastValue:currValue,scope),lastValue=currValue})}})}}var startSymbolLength=startSymbol.length,endSymbolLength=endSymbol.length,escapedStartRegexp=new RegExp(startSymbol.replace(/./g,escape),"g"),escapedEndRegexp=new RegExp(endSymbol.replace(/./g,escape),"g");return $interpolate.startSymbol=function(){return startSymbol},$interpolate.endSymbol=function(){return endSymbol},$interpolate}]}function $IntervalProvider(){this.$get=["$rootScope","$window","$q","$$q","$browser",function($rootScope,$window,$q,$$q,$browser){function interval(fn,delay,count,invokeApply){function callback(){hasParams?fn.apply(null,args):fn(iteration)}var hasParams=arguments.length>4,args=hasParams?sliceArgs(arguments,4):[],setInterval=$window.setInterval,clearInterval=$window.clearInterval,iteration=0,skipApply=isDefined(invokeApply)&&!invokeApply,deferred=(skipApply?$$q:$q).defer(),promise=deferred.promise;return count=isDefined(count)?count:0,promise.$$intervalId=setInterval(function(){skipApply?$browser.defer(callback):$rootScope.$evalAsync(callback),deferred.notify(iteration++),count>0&&iteration>=count&&(deferred.resolve(iteration),clearInterval(promise.$$intervalId),delete intervals[promise.$$intervalId]),skipApply||$rootScope.$apply()},delay),intervals[promise.$$intervalId]=deferred,promise}var intervals={};return interval.cancel=function(promise){return!!(promise&&promise.$$intervalId in intervals)&&(intervals[promise.$$intervalId].promise.catch(noop),intervals[promise.$$intervalId].reject("canceled"),$window.clearInterval(promise.$$intervalId),delete intervals[promise.$$intervalId],!0)},interval}]}function encodePath(path){for(var segments=path.split("/"),i=segments.length;i--;)segments[i]=encodeUriSegment(segments[i]);return segments.join("/")}function parseAbsoluteUrl(absoluteUrl,locationObj){var parsedUrl=urlResolve(absoluteUrl);locationObj.$$protocol=parsedUrl.protocol,locationObj.$$host=parsedUrl.hostname,locationObj.$$port=toInt(parsedUrl.port)||DEFAULT_PORTS[parsedUrl.protocol]||null}function parseAppUrl(url,locationObj){if(DOUBLE_SLASH_REGEX.test(url))throw $locationMinErr("badpath",'Invalid url "{0}".',url);var prefixed="/"!==url.charAt(0);prefixed&&(url="/"+url);var match=urlResolve(url);locationObj.$$path=decodeURIComponent(prefixed&&"/"===match.pathname.charAt(0)?match.pathname.substring(1):match.pathname),locationObj.$$search=parseKeyValue(match.search),locationObj.$$hash=decodeURIComponent(match.hash),locationObj.$$path&&"/"!==locationObj.$$path.charAt(0)&&(locationObj.$$path="/"+locationObj.$$path)}function startsWith(str,search){return str.slice(0,search.length)===search}function stripBaseUrl(base,url){if(startsWith(url,base))return url.substr(base.length)}function stripHash(url){var index=url.indexOf("#");return-1===index?url:url.substr(0,index)}function trimEmptyHash(url){return url.replace(/(#.+)|#$/,"$1")}function stripFile(url){return url.substr(0,stripHash(url).lastIndexOf("/")+1)}function serverBase(url){return url.substring(0,url.indexOf("/",url.indexOf("//")+2))}function LocationHtml5Url(appBase,appBaseNoFile,basePrefix){this.$$html5=!0,basePrefix=basePrefix||"",parseAbsoluteUrl(appBase,this),this.$$parse=function(url){var pathUrl=stripBaseUrl(appBaseNoFile,url);if(!isString(pathUrl))throw $locationMinErr("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',url,appBaseNoFile);parseAppUrl(pathUrl,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var search=toKeyValue(this.$$search),hash=this.$$hash?"#"+encodeUriSegment(this.$$hash):"";this.$$url=encodePath(this.$$path)+(search?"?"+search:"")+hash,this.$$absUrl=appBaseNoFile+this.$$url.substr(1),this.$$urlUpdatedByLocation=!0},this.$$parseLinkUrl=function(url,relHref){if(relHref&&"#"===relHref[0])return this.hash(relHref.slice(1)),!0;var appUrl,prevAppUrl,rewrittenUrl;return isDefined(appUrl=stripBaseUrl(appBase,url))?(prevAppUrl=appUrl,rewrittenUrl=basePrefix&&isDefined(appUrl=stripBaseUrl(basePrefix,appUrl))?appBaseNoFile+(stripBaseUrl("/",appUrl)||appUrl):appBase+prevAppUrl):isDefined(appUrl=stripBaseUrl(appBaseNoFile,url))?rewrittenUrl=appBaseNoFile+appUrl:appBaseNoFile===url+"/"&&(rewrittenUrl=appBaseNoFile),rewrittenUrl&&this.$$parse(rewrittenUrl),!!rewrittenUrl}}function LocationHashbangUrl(appBase,appBaseNoFile,hashPrefix){parseAbsoluteUrl(appBase,this),this.$$parse=function(url){var withoutHashUrl,withoutBaseUrl=stripBaseUrl(appBase,url)||stripBaseUrl(appBaseNoFile,url);isUndefined(withoutBaseUrl)||"#"!==withoutBaseUrl.charAt(0)?this.$$html5?withoutHashUrl=withoutBaseUrl:(withoutHashUrl="",isUndefined(withoutBaseUrl)&&(appBase=url,this.replace())):(withoutHashUrl=stripBaseUrl(hashPrefix,withoutBaseUrl),isUndefined(withoutHashUrl)&&(withoutHashUrl=withoutBaseUrl)),parseAppUrl(withoutHashUrl,this),this.$$path=function(path,url,base){var firstPathSegmentMatch,windowsFilePathExp=/^\/[A-Z]:(\/.*)/;return startsWith(url,base)&&(url=url.replace(base,"")),windowsFilePathExp.exec(url)?path:(firstPathSegmentMatch=windowsFilePathExp.exec(path),firstPathSegmentMatch?firstPathSegmentMatch[1]:path)}(this.$$path,withoutHashUrl,appBase),this.$$compose()},this.$$compose=function(){var search=toKeyValue(this.$$search),hash=this.$$hash?"#"+encodeUriSegment(this.$$hash):"";this.$$url=encodePath(this.$$path)+(search?"?"+search:"")+hash,this.$$absUrl=appBase+(this.$$url?hashPrefix+this.$$url:""),this.$$urlUpdatedByLocation=!0},this.$$parseLinkUrl=function(url,relHref){return stripHash(appBase)===stripHash(url)&&(this.$$parse(url),!0)}}function LocationHashbangInHtml5Url(appBase,appBaseNoFile,hashPrefix){this.$$html5=!0,LocationHashbangUrl.apply(this,arguments),this.$$parseLinkUrl=function(url,relHref){if(relHref&&"#"===relHref[0])return this.hash(relHref.slice(1)),!0;var rewrittenUrl,appUrl;return appBase===stripHash(url)?rewrittenUrl=url:(appUrl=stripBaseUrl(appBaseNoFile,url))?rewrittenUrl=appBase+hashPrefix+appUrl:appBaseNoFile===url+"/"&&(rewrittenUrl=appBaseNoFile),rewrittenUrl&&this.$$parse(rewrittenUrl),!!rewrittenUrl},this.$$compose=function(){var search=toKeyValue(this.$$search),hash=this.$$hash?"#"+encodeUriSegment(this.$$hash):"";this.$$url=encodePath(this.$$path)+(search?"?"+search:"")+hash,this.$$absUrl=appBase+hashPrefix+this.$$url,this.$$urlUpdatedByLocation=!0}}function locationGetter(property){return function(){return this[property]}}function locationGetterSetter(property,preprocess){return function(value){return isUndefined(value)?this[property]:(this[property]=preprocess(value),this.$$compose(),this)}}function $LocationProvider(){var hashPrefix="!",html5Mode={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(prefix){return isDefined(prefix)?(hashPrefix=prefix,this):hashPrefix},this.html5Mode=function(mode){return isBoolean(mode)?(html5Mode.enabled=mode,this):isObject(mode)?(isBoolean(mode.enabled)&&(html5Mode.enabled=mode.enabled),isBoolean(mode.requireBase)&&(html5Mode.requireBase=mode.requireBase),(isBoolean(mode.rewriteLinks)||isString(mode.rewriteLinks))&&(html5Mode.rewriteLinks=mode.rewriteLinks),this):html5Mode},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function($rootScope,$browser,$sniffer,$rootElement,$window){function setBrowserUrlWithFallback(url,replace,state){var oldUrl=$location.url(),oldState=$location.$$state;try{$browser.url(url,replace,state),$location.$$state=$browser.state()}catch(e){throw $location.url(oldUrl),$location.$$state=oldState,e}}function afterLocationChange(oldUrl,oldState){$rootScope.$broadcast("$locationChangeSuccess",$location.absUrl(),oldUrl,$location.$$state,oldState)}var $location,LocationMode,appBase,baseHref=$browser.baseHref(),initialUrl=$browser.url();if(html5Mode.enabled){if(!baseHref&&html5Mode.requireBase)throw $locationMinErr("nobase","$location in HTML5 mode requires a <base> tag to be present!");appBase=serverBase(initialUrl)+(baseHref||"/"),LocationMode=$sniffer.history?LocationHtml5Url:LocationHashbangInHtml5Url}else appBase=stripHash(initialUrl),LocationMode=LocationHashbangUrl;var appBaseNoFile=stripFile(appBase);$location=new LocationMode(appBase,appBaseNoFile,"#"+hashPrefix),$location.$$parseLinkUrl(initialUrl,initialUrl),$location.$$state=$browser.state();var IGNORE_URI_REGEXP=/^\s*(javascript|mailto):/i;$rootElement.on("click",function(event){var rewriteLinks=html5Mode.rewriteLinks;if(rewriteLinks&&!event.ctrlKey&&!event.metaKey&&!event.shiftKey&&2!==event.which&&2!==event.button){for(var elm=jqLite(event.target);"a"!==nodeName_(elm[0]);)if(elm[0]===$rootElement[0]||!(elm=elm.parent())[0])return;if(!isString(rewriteLinks)||!isUndefined(elm.attr(rewriteLinks))){var absHref=elm.prop("href"),relHref=elm.attr("href")||elm.attr("xlink:href");isObject(absHref)&&"[object SVGAnimatedString]"===absHref.toString()&&(absHref=urlResolve(absHref.animVal).href),IGNORE_URI_REGEXP.test(absHref)||!absHref||elm.attr("target")||event.isDefaultPrevented()||$location.$$parseLinkUrl(absHref,relHref)&&(event.preventDefault(),$location.absUrl()!==$browser.url()&&($rootScope.$apply(),$window.angular["ff-684208-preventDefault"]=!0))}}}),trimEmptyHash($location.absUrl())!==trimEmptyHash(initialUrl)&&$browser.url($location.absUrl(),!0);var initializing=!0;return $browser.onUrlChange(function(newUrl,newState){if(!startsWith(newUrl,appBaseNoFile))return void($window.location.href=newUrl);$rootScope.$evalAsync(function(){var defaultPrevented,oldUrl=$location.absUrl(),oldState=$location.$$state;newUrl=trimEmptyHash(newUrl),$location.$$parse(newUrl),$location.$$state=newState,defaultPrevented=$rootScope.$broadcast("$locationChangeStart",newUrl,oldUrl,newState,oldState).defaultPrevented,$location.absUrl()===newUrl&&(defaultPrevented?($location.$$parse(oldUrl),$location.$$state=oldState,setBrowserUrlWithFallback(oldUrl,!1,oldState)):(initializing=!1,afterLocationChange(oldUrl,oldState)))}),$rootScope.$$phase||$rootScope.$digest()}),$rootScope.$watch(function(){if(initializing||$location.$$urlUpdatedByLocation){$location.$$urlUpdatedByLocation=!1;var oldUrl=trimEmptyHash($browser.url()),newUrl=trimEmptyHash($location.absUrl()),oldState=$browser.state(),currentReplace=$location.$$replace,urlOrStateChanged=oldUrl!==newUrl||$location.$$html5&&$sniffer.history&&oldState!==$location.$$state;(initializing||urlOrStateChanged)&&(initializing=!1,$rootScope.$evalAsync(function(){var newUrl=$location.absUrl(),defaultPrevented=$rootScope.$broadcast("$locationChangeStart",newUrl,oldUrl,$location.$$state,oldState).defaultPrevented;$location.absUrl()===newUrl&&(defaultPrevented?($location.$$parse(oldUrl),$location.$$state=oldState):(urlOrStateChanged&&setBrowserUrlWithFallback(newUrl,currentReplace,oldState===$location.$$state?null:$location.$$state),afterLocationChange(oldUrl,oldState)))}))}$location.$$replace=!1}),$location}]}function $LogProvider(){var debug=!0,self=this;this.debugEnabled=function(flag){return isDefined(flag)?(debug=flag,this):debug},this.$get=["$window",function($window){function formatError(arg){return arg instanceof Error&&(arg.stack&&formatStackTrace?arg=arg.message&&-1===arg.stack.indexOf(arg.message)?"Error: "+arg.message+"\n"+arg.stack:arg.stack:arg.sourceURL&&(arg=arg.message+"\n"+arg.sourceURL+":"+arg.line)),arg}function consoleLog(type){var console=$window.console||{},logFn=console[type]||console.log||noop,hasApply=!1;try{
hasApply=!!logFn.apply}catch(e){}return hasApply?function(){var args=[];return forEach(arguments,function(arg){args.push(formatError(arg))}),logFn.apply(console,args)}:function(arg1,arg2){logFn(arg1,null==arg2?"":arg2)}}var formatStackTrace=msie||/\bEdge\//.test($window.navigator&&$window.navigator.userAgent);return{log:consoleLog("log"),info:consoleLog("info"),warn:consoleLog("warn"),error:consoleLog("error"),debug:function(){var fn=consoleLog("debug");return function(){debug&&fn.apply(self,arguments)}}()}}]}function getStringValue(name){return name+""}function ifDefined(v,d){return void 0!==v?v:d}function plusFn(l,r){return void 0===l?r:void 0===r?l:l+r}function isStateless($filter,filterName){return!$filter(filterName).$stateful}function findConstantAndWatchExpressions(ast,$filter){var allConstants,argsToWatch,isStatelessFilter;switch(ast.type){case AST.Program:allConstants=!0,forEach(ast.body,function(expr){findConstantAndWatchExpressions(expr.expression,$filter),allConstants=allConstants&&expr.expression.constant}),ast.constant=allConstants;break;case AST.Literal:ast.constant=!0,ast.toWatch=[];break;case AST.UnaryExpression:findConstantAndWatchExpressions(ast.argument,$filter),ast.constant=ast.argument.constant,ast.toWatch=ast.argument.toWatch;break;case AST.BinaryExpression:findConstantAndWatchExpressions(ast.left,$filter),findConstantAndWatchExpressions(ast.right,$filter),ast.constant=ast.left.constant&&ast.right.constant,ast.toWatch=ast.left.toWatch.concat(ast.right.toWatch);break;case AST.LogicalExpression:findConstantAndWatchExpressions(ast.left,$filter),findConstantAndWatchExpressions(ast.right,$filter),ast.constant=ast.left.constant&&ast.right.constant,ast.toWatch=ast.constant?[]:[ast];break;case AST.ConditionalExpression:findConstantAndWatchExpressions(ast.test,$filter),findConstantAndWatchExpressions(ast.alternate,$filter),findConstantAndWatchExpressions(ast.consequent,$filter),ast.constant=ast.test.constant&&ast.alternate.constant&&ast.consequent.constant,ast.toWatch=ast.constant?[]:[ast];break;case AST.Identifier:ast.constant=!1,ast.toWatch=[ast];break;case AST.MemberExpression:findConstantAndWatchExpressions(ast.object,$filter),ast.computed&&findConstantAndWatchExpressions(ast.property,$filter),ast.constant=ast.object.constant&&(!ast.computed||ast.property.constant),ast.toWatch=[ast];break;case AST.CallExpression:isStatelessFilter=!!ast.filter&&isStateless($filter,ast.callee.name),allConstants=isStatelessFilter,argsToWatch=[],forEach(ast.arguments,function(expr){findConstantAndWatchExpressions(expr,$filter),allConstants=allConstants&&expr.constant,expr.constant||argsToWatch.push.apply(argsToWatch,expr.toWatch)}),ast.constant=allConstants,ast.toWatch=isStatelessFilter?argsToWatch:[ast];break;case AST.AssignmentExpression:findConstantAndWatchExpressions(ast.left,$filter),findConstantAndWatchExpressions(ast.right,$filter),ast.constant=ast.left.constant&&ast.right.constant,ast.toWatch=[ast];break;case AST.ArrayExpression:allConstants=!0,argsToWatch=[],forEach(ast.elements,function(expr){findConstantAndWatchExpressions(expr,$filter),allConstants=allConstants&&expr.constant,expr.constant||argsToWatch.push.apply(argsToWatch,expr.toWatch)}),ast.constant=allConstants,ast.toWatch=argsToWatch;break;case AST.ObjectExpression:allConstants=!0,argsToWatch=[],forEach(ast.properties,function(property){findConstantAndWatchExpressions(property.value,$filter),allConstants=allConstants&&property.value.constant&&!property.computed,property.value.constant||argsToWatch.push.apply(argsToWatch,property.value.toWatch),property.computed&&(findConstantAndWatchExpressions(property.key,$filter),property.key.constant||argsToWatch.push.apply(argsToWatch,property.key.toWatch))}),ast.constant=allConstants,ast.toWatch=argsToWatch;break;case AST.ThisExpression:case AST.LocalsExpression:ast.constant=!1,ast.toWatch=[]}}function getInputs(body){if(1===body.length){var lastExpression=body[0].expression,candidate=lastExpression.toWatch;return 1!==candidate.length?candidate:candidate[0]!==lastExpression?candidate:void 0}}function isAssignable(ast){return ast.type===AST.Identifier||ast.type===AST.MemberExpression}function assignableAST(ast){if(1===ast.body.length&&isAssignable(ast.body[0].expression))return{type:AST.AssignmentExpression,left:ast.body[0].expression,right:{type:AST.NGValueParameter},operator:"="}}function isLiteral(ast){return 0===ast.body.length||1===ast.body.length&&(ast.body[0].expression.type===AST.Literal||ast.body[0].expression.type===AST.ArrayExpression||ast.body[0].expression.type===AST.ObjectExpression)}function isConstant(ast){return ast.constant}function ASTCompiler($filter){this.$filter=$filter}function ASTInterpreter($filter){this.$filter=$filter}function Parser(lexer,$filter,options){this.ast=new AST(lexer,options),this.astCompiler=options.csp?new ASTInterpreter($filter):new ASTCompiler($filter)}function getValueOf(value){return isFunction(value.valueOf)?value.valueOf():objectValueOf.call(value)}function $ParseProvider(){var identStart,identContinue,cache=createMap(),literals={true:!0,false:!1,null:null,undefined:void 0};this.addLiteral=function(literalName,literalValue){literals[literalName]=literalValue},this.setIdentifierFns=function(identifierStart,identifierContinue){return identStart=identifierStart,identContinue=identifierContinue,this},this.$get=["$filter",function($filter){function $parse(exp,interceptorFn){var parsedExpression,oneTime,cacheKey;switch(typeof exp){case"string":if(exp=exp.trim(),cacheKey=exp,!(parsedExpression=cache[cacheKey])){":"===exp.charAt(0)&&":"===exp.charAt(1)&&(oneTime=!0,exp=exp.substring(2));parsedExpression=new Parser(new Lexer($parseOptions),$filter,$parseOptions).parse(exp),parsedExpression.constant?parsedExpression.$$watchDelegate=constantWatchDelegate:oneTime?(parsedExpression.oneTime=!0,parsedExpression.$$watchDelegate=oneTimeWatchDelegate):parsedExpression.inputs&&(parsedExpression.$$watchDelegate=inputsWatchDelegate),cache[cacheKey]=parsedExpression}return addInterceptor(parsedExpression,interceptorFn);case"function":return addInterceptor(exp,interceptorFn);default:return addInterceptor(noop,interceptorFn)}}function expressionInputDirtyCheck(newValue,oldValueOfValue,compareObjectIdentity){return null==newValue||null==oldValueOfValue?newValue===oldValueOfValue:!("object"==typeof newValue&&"object"==typeof(newValue=getValueOf(newValue))&&!compareObjectIdentity)&&(newValue===oldValueOfValue||newValue!==newValue&&oldValueOfValue!==oldValueOfValue)}function inputsWatchDelegate(scope,listener,objectEquality,parsedExpression,prettyPrintExpression){var lastResult,inputExpressions=parsedExpression.inputs;if(1===inputExpressions.length){var oldInputValueOf=expressionInputDirtyCheck;return inputExpressions=inputExpressions[0],scope.$watch(function(scope){var newInputValue=inputExpressions(scope);return expressionInputDirtyCheck(newInputValue,oldInputValueOf,parsedExpression.literal)||(lastResult=parsedExpression(scope,void 0,void 0,[newInputValue]),oldInputValueOf=newInputValue&&getValueOf(newInputValue)),lastResult},listener,objectEquality,prettyPrintExpression)}for(var oldInputValueOfValues=[],oldInputValues=[],i=0,ii=inputExpressions.length;i<ii;i++)oldInputValueOfValues[i]=expressionInputDirtyCheck,oldInputValues[i]=null;return scope.$watch(function(scope){for(var changed=!1,i=0,ii=inputExpressions.length;i<ii;i++){var newInputValue=inputExpressions[i](scope);(changed||(changed=!expressionInputDirtyCheck(newInputValue,oldInputValueOfValues[i],parsedExpression.literal)))&&(oldInputValues[i]=newInputValue,oldInputValueOfValues[i]=newInputValue&&getValueOf(newInputValue))}return changed&&(lastResult=parsedExpression(scope,void 0,void 0,oldInputValues)),lastResult},listener,objectEquality,prettyPrintExpression)}function oneTimeWatchDelegate(scope,listener,objectEquality,parsedExpression,prettyPrintExpression){function oneTimeWatch(scope){return parsedExpression(scope)}function oneTimeListener(value,old,scope){lastValue=value,isFunction(listener)&&listener(value,old,scope),isDone(value)&&scope.$$postDigest(function(){isDone(lastValue)&&unwatch()})}var unwatch,lastValue,isDone=parsedExpression.literal?isAllDefined:isDefined;return unwatch=parsedExpression.inputs?inputsWatchDelegate(scope,oneTimeListener,objectEquality,parsedExpression,prettyPrintExpression):scope.$watch(oneTimeWatch,oneTimeListener,objectEquality)}function isAllDefined(value){var allDefined=!0;return forEach(value,function(val){isDefined(val)||(allDefined=!1)}),allDefined}function constantWatchDelegate(scope,listener,objectEquality,parsedExpression){var unwatch=scope.$watch(function(scope){return unwatch(),parsedExpression(scope)},listener,objectEquality);return unwatch}function addInterceptor(parsedExpression,interceptorFn){function regularInterceptedExpression(scope,locals,assign,inputs){var value=useInputs&&inputs?inputs[0]:parsedExpression(scope,locals,assign,inputs);return interceptorFn(value,scope,locals)}function oneTimeInterceptedExpression(scope,locals,assign,inputs){var value=useInputs&&inputs?inputs[0]:parsedExpression(scope,locals,assign,inputs),result=interceptorFn(value,scope,locals);return isDone(value)?result:value}if(!interceptorFn)return parsedExpression;var watchDelegate=parsedExpression.$$watchDelegate,useInputs=!1,isDone=parsedExpression.literal?isAllDefined:isDefined,fn=parsedExpression.oneTime?oneTimeInterceptedExpression:regularInterceptedExpression;return fn.literal=parsedExpression.literal,fn.oneTime=parsedExpression.oneTime,useInputs=!parsedExpression.inputs,watchDelegate&&watchDelegate!==inputsWatchDelegate?(fn.$$watchDelegate=watchDelegate,fn.inputs=parsedExpression.inputs):interceptorFn.$stateful||(fn.$$watchDelegate=inputsWatchDelegate,fn.inputs=parsedExpression.inputs?parsedExpression.inputs:[parsedExpression]),fn}var noUnsafeEval=csp().noUnsafeEval,$parseOptions={csp:noUnsafeEval,literals:copy(literals),isIdentifierStart:isFunction(identStart)&&identStart,isIdentifierContinue:isFunction(identContinue)&&identContinue};return $parse}]}function $QProvider(){var errorOnUnhandledRejections=!0;this.$get=["$rootScope","$exceptionHandler",function($rootScope,$exceptionHandler){return qFactory(function(callback){$rootScope.$evalAsync(callback)},$exceptionHandler,errorOnUnhandledRejections)}],this.errorOnUnhandledRejections=function(value){return isDefined(value)?(errorOnUnhandledRejections=value,this):errorOnUnhandledRejections}}function $$QProvider(){var errorOnUnhandledRejections=!0;this.$get=["$browser","$exceptionHandler",function($browser,$exceptionHandler){return qFactory(function(callback){$browser.defer(callback)},$exceptionHandler,errorOnUnhandledRejections)}],this.errorOnUnhandledRejections=function(value){return isDefined(value)?(errorOnUnhandledRejections=value,this):errorOnUnhandledRejections}}function qFactory(nextTick,exceptionHandler,errorOnUnhandledRejections){function defer(){return new Deferred}function Deferred(){var promise=this.promise=new Promise;this.resolve=function(val){resolvePromise(promise,val)},this.reject=function(reason){rejectPromise(promise,reason)},this.notify=function(progress){notifyPromise(promise,progress)}}function Promise(){this.$$state={status:0}}function processQueue(state){var fn,promise,pending;pending=state.pending,state.processScheduled=!1,state.pending=void 0;try{for(var i=0,ii=pending.length;i<ii;++i){state.pur=!0,promise=pending[i][0],fn=pending[i][state.status];try{isFunction(fn)?resolvePromise(promise,fn(state.value)):1===state.status?resolvePromise(promise,state.value):rejectPromise(promise,state.value)}catch(e){rejectPromise(promise,e)}}}finally{--queueSize,errorOnUnhandledRejections&&0===queueSize&&nextTick(processChecks)}}function processChecks(){for(;!queueSize&&checkQueue.length;){var toCheck=checkQueue.shift();if(!toCheck.pur){toCheck.pur=!0;var errorMessage="Possibly unhandled rejection: "+toDebugString(toCheck.value);toCheck.value instanceof Error?exceptionHandler(toCheck.value,errorMessage):exceptionHandler(errorMessage)}}}function scheduleProcessQueue(state){!errorOnUnhandledRejections||state.pending||2!==state.status||state.pur||(0===queueSize&&0===checkQueue.length&&nextTick(processChecks),checkQueue.push(state)),!state.processScheduled&&state.pending&&(state.processScheduled=!0,++queueSize,nextTick(function(){processQueue(state)}))}function resolvePromise(promise,val){promise.$$state.status||(val===promise?$$reject(promise,$qMinErr("qcycle","Expected promise to be resolved with value other than itself '{0}'",val)):$$resolve(promise,val))}function $$resolve(promise,val){function doResolve(val){done||(done=!0,$$resolve(promise,val))}function doReject(val){done||(done=!0,$$reject(promise,val))}function doNotify(progress){notifyPromise(promise,progress)}var then,done=!1;try{(isObject(val)||isFunction(val))&&(then=val.then),isFunction(then)?(promise.$$state.status=-1,then.call(val,doResolve,doReject,doNotify)):(promise.$$state.value=val,promise.$$state.status=1,scheduleProcessQueue(promise.$$state))}catch(e){doReject(e)}}function rejectPromise(promise,reason){promise.$$state.status||$$reject(promise,reason)}function $$reject(promise,reason){promise.$$state.value=reason,promise.$$state.status=2,scheduleProcessQueue(promise.$$state)}function notifyPromise(promise,progress){var callbacks=promise.$$state.pending;promise.$$state.status<=0&&callbacks&&callbacks.length&&nextTick(function(){for(var callback,result,i=0,ii=callbacks.length;i<ii;i++){result=callbacks[i][0],callback=callbacks[i][3];try{notifyPromise(result,isFunction(callback)?callback(progress):progress)}catch(e){exceptionHandler(e)}}})}function reject(reason){var result=new Promise;return rejectPromise(result,reason),result}function handleCallback(value,resolver,callback){var callbackOutput=null;try{isFunction(callback)&&(callbackOutput=callback())}catch(e){return reject(e)}return isPromiseLike(callbackOutput)?callbackOutput.then(function(){return resolver(value)},reject):resolver(value)}function when(value,callback,errback,progressBack){var result=new Promise;return resolvePromise(result,value),result.then(callback,errback,progressBack)}function all(promises){var result=new Promise,counter=0,results=isArray(promises)?[]:{};return forEach(promises,function(promise,key){counter++,when(promise).then(function(value){results[key]=value,--counter||resolvePromise(result,results)},function(reason){rejectPromise(result,reason)})}),0===counter&&resolvePromise(result,results),result}function race(promises){var deferred=defer();return forEach(promises,function(promise){when(promise).then(deferred.resolve,deferred.reject)}),deferred.promise}function $Q(resolver){function resolveFn(value){resolvePromise(promise,value)}function rejectFn(reason){rejectPromise(promise,reason)}if(!isFunction(resolver))throw $qMinErr("norslvr","Expected resolverFn, got '{0}'",resolver);var promise=new Promise;return resolver(resolveFn,rejectFn),promise}var $qMinErr=minErr("$q",TypeError),queueSize=0,checkQueue=[];extend(Promise.prototype,{then:function(onFulfilled,onRejected,progressBack){if(isUndefined(onFulfilled)&&isUndefined(onRejected)&&isUndefined(progressBack))return this;var result=new Promise;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([result,onFulfilled,onRejected,progressBack]),this.$$state.status>0&&scheduleProcessQueue(this.$$state),result},catch:function(callback){return this.then(null,callback)},finally:function(callback,progressBack){return this.then(function(value){return handleCallback(value,resolve,callback)},function(error){return handleCallback(error,reject,callback)},progressBack)}});var resolve=when;return $Q.prototype=Promise.prototype,$Q.defer=defer,$Q.reject=reject,$Q.when=when,$Q.resolve=resolve,$Q.all=all,$Q.race=race,$Q}function $$RAFProvider(){this.$get=["$window","$timeout",function($window,$timeout){var requestAnimationFrame=$window.requestAnimationFrame||$window.webkitRequestAnimationFrame,cancelAnimationFrame=$window.cancelAnimationFrame||$window.webkitCancelAnimationFrame||$window.webkitCancelRequestAnimationFrame,rafSupported=!!requestAnimationFrame,raf=rafSupported?function(fn){var id=requestAnimationFrame(fn);return function(){cancelAnimationFrame(id)}}:function(fn){var timer=$timeout(fn,16.66,!1);return function(){$timeout.cancel(timer)}};return raf.supported=rafSupported,raf}]}function $RootScopeProvider(){function createChildScopeClass(parent){function ChildScope(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=nextUid(),this.$$ChildScope=null}return ChildScope.prototype=parent,ChildScope}var TTL=10,$rootScopeMinErr=minErr("$rootScope"),lastDirtyWatch=null,applyAsyncId=null;this.digestTtl=function(value){return arguments.length&&(TTL=value),TTL},this.$get=["$exceptionHandler","$parse","$browser",function($exceptionHandler,$parse,$browser){function destroyChildScope($event){$event.currentScope.$$destroyed=!0}function cleanUpScope($scope){9===msie&&($scope.$$childHead&&cleanUpScope($scope.$$childHead),$scope.$$nextSibling&&cleanUpScope($scope.$$nextSibling)),$scope.$parent=$scope.$$nextSibling=$scope.$$prevSibling=$scope.$$childHead=$scope.$$childTail=$scope.$root=$scope.$$watchers=null}function Scope(){this.$id=nextUid(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}function beginPhase(phase){if($rootScope.$$phase)throw $rootScopeMinErr("inprog","{0} already in progress",$rootScope.$$phase);$rootScope.$$phase=phase}function clearPhase(){$rootScope.$$phase=null}function incrementWatchersCount(current,count){do{current.$$watchersCount+=count}while(current=current.$parent)}function decrementListenerCount(current,count,name){do{current.$$listenerCount[name]-=count,0===current.$$listenerCount[name]&&delete current.$$listenerCount[name]}while(current=current.$parent)}function initWatchVal(){}function flushApplyAsync(){for(;applyAsyncQueue.length;)try{applyAsyncQueue.shift()()}catch(e){$exceptionHandler(e)}applyAsyncId=null}function scheduleApplyAsync(){null===applyAsyncId&&(applyAsyncId=$browser.defer(function(){$rootScope.$apply(flushApplyAsync)}))}Scope.prototype={constructor:Scope,$new:function(isolate,parent){var child;return parent=parent||this,isolate?(child=new Scope,child.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=createChildScopeClass(this)),child=new this.$$ChildScope),child.$parent=parent,child.$$prevSibling=parent.$$childTail,parent.$$childHead?(parent.$$childTail.$$nextSibling=child,parent.$$childTail=child):parent.$$childHead=parent.$$childTail=child,(isolate||parent!==this)&&child.$on("$destroy",destroyChildScope),child},$watch:function(watchExp,listener,objectEquality,prettyPrintExpression){var get=$parse(watchExp);if(get.$$watchDelegate)return get.$$watchDelegate(this,listener,objectEquality,get,watchExp);var scope=this,array=scope.$$watchers,watcher={fn:listener,last:initWatchVal,get:get,exp:prettyPrintExpression||watchExp,eq:!!objectEquality};return lastDirtyWatch=null,isFunction(listener)||(watcher.fn=noop),array||(array=scope.$$watchers=[],array.$$digestWatchIndex=-1),array.unshift(watcher),array.$$digestWatchIndex++,incrementWatchersCount(this,1),function(){var index=arrayRemove(array,watcher);index>=0&&(incrementWatchersCount(scope,-1),index<array.$$digestWatchIndex&&array.$$digestWatchIndex--),lastDirtyWatch=null}},$watchGroup:function(watchExpressions,listener){function watchGroupAction(){changeReactionScheduled=!1,firstRun?(firstRun=!1,listener(newValues,newValues,self)):listener(newValues,oldValues,self)}var oldValues=new Array(watchExpressions.length),newValues=new Array(watchExpressions.length),deregisterFns=[],self=this,changeReactionScheduled=!1,firstRun=!0;if(!watchExpressions.length){var shouldCall=!0;return self.$evalAsync(function(){shouldCall&&listener(newValues,newValues,self)}),function(){shouldCall=!1}}return 1===watchExpressions.length?this.$watch(watchExpressions[0],function(value,oldValue,scope){newValues[0]=value,oldValues[0]=oldValue,listener(newValues,value===oldValue?newValues:oldValues,scope)}):(forEach(watchExpressions,function(expr,i){var unwatchFn=self.$watch(expr,function(value,oldValue){newValues[i]=value,oldValues[i]=oldValue,changeReactionScheduled||(changeReactionScheduled=!0,self.$evalAsync(watchGroupAction))});deregisterFns.push(unwatchFn)}),function(){for(;deregisterFns.length;)deregisterFns.shift()()})},$watchCollection:function(obj,listener){function $watchCollectionInterceptor(_value){newValue=_value;var newLength,key,newItem,oldItem;if(!isUndefined(newValue)){if(isObject(newValue))if(isArrayLike(newValue)){oldValue!==internalArray&&(oldValue=internalArray,oldLength=oldValue.length=0,changeDetected++),newLength=newValue.length,oldLength!==newLength&&(changeDetected++,oldValue.length=oldLength=newLength);for(var i=0;i<newLength;i++)oldItem=oldValue[i],newItem=newValue[i],oldItem!==oldItem&&newItem!==newItem||oldItem===newItem||(changeDetected++,oldValue[i]=newItem)}else{oldValue!==internalObject&&(oldValue=internalObject={},oldLength=0,changeDetected++),newLength=0;for(key in newValue)hasOwnProperty.call(newValue,key)&&(newLength++,newItem=newValue[key],oldItem=oldValue[key],key in oldValue?oldItem!==oldItem&&newItem!==newItem||oldItem===newItem||(changeDetected++,oldValue[key]=newItem):(oldLength++,oldValue[key]=newItem,changeDetected++));if(oldLength>newLength){changeDetected++;for(key in oldValue)hasOwnProperty.call(newValue,key)||(oldLength--,delete oldValue[key])}}else oldValue!==newValue&&(oldValue=newValue,changeDetected++);return changeDetected}}function $watchCollectionAction(){if(initRun?(initRun=!1,listener(newValue,newValue,self)):listener(newValue,veryOldValue,self),trackVeryOldValue)if(isObject(newValue))if(isArrayLike(newValue)){veryOldValue=new Array(newValue.length);for(var i=0;i<newValue.length;i++)veryOldValue[i]=newValue[i]}else{veryOldValue={};for(var key in newValue)hasOwnProperty.call(newValue,key)&&(veryOldValue[key]=newValue[key])}else veryOldValue=newValue}$watchCollectionInterceptor.$stateful=!0;var newValue,oldValue,veryOldValue,self=this,trackVeryOldValue=listener.length>1,changeDetected=0,changeDetector=$parse(obj,$watchCollectionInterceptor),internalArray=[],internalObject={},initRun=!0,oldLength=0;return this.$watch(changeDetector,$watchCollectionAction)},$digest:function(){var watch,value,last,fn,get,watchers,dirty,next,current,logIdx,asyncTask,ttl=TTL,target=this,watchLog=[];beginPhase("$digest"),$browser.$$checkUrlChange(),this===$rootScope&&null!==applyAsyncId&&($browser.defer.cancel(applyAsyncId),flushApplyAsync()),lastDirtyWatch=null;do{dirty=!1,current=target;for(var asyncQueuePosition=0;asyncQueuePosition<asyncQueue.length;asyncQueuePosition++){try{asyncTask=asyncQueue[asyncQueuePosition],fn=asyncTask.fn,fn(asyncTask.scope,asyncTask.locals)}catch(e){$exceptionHandler(e)}lastDirtyWatch=null}asyncQueue.length=0;traverseScopesLoop:do{if(watchers=current.$$watchers)for(watchers.$$digestWatchIndex=watchers.length;watchers.$$digestWatchIndex--;)try{if(watch=watchers[watchers.$$digestWatchIndex])if(get=watch.get,(value=get(current))===(last=watch.last)||(watch.eq?equals(value,last):isNumberNaN(value)&&isNumberNaN(last))){if(watch===lastDirtyWatch){dirty=!1;break traverseScopesLoop}}else dirty=!0,lastDirtyWatch=watch,watch.last=watch.eq?copy(value,null):value,fn=watch.fn,fn(value,last===initWatchVal?value:last,current),ttl<5&&(logIdx=4-ttl,watchLog[logIdx]||(watchLog[logIdx]=[]),watchLog[logIdx].push({msg:isFunction(watch.exp)?"fn: "+(watch.exp.name||watch.exp.toString()):watch.exp,newVal:value,oldVal:last}))}catch(e){$exceptionHandler(e)}if(!(next=current.$$watchersCount&&current.$$childHead||current!==target&&current.$$nextSibling))for(;current!==target&&!(next=current.$$nextSibling);)current=current.$parent}while(current=next);if((dirty||asyncQueue.length)&&!ttl--)throw clearPhase(),$rootScopeMinErr("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",TTL,watchLog)}while(dirty||asyncQueue.length);for(clearPhase();postDigestQueuePosition<postDigestQueue.length;)try{postDigestQueue[postDigestQueuePosition++]()}catch(e){$exceptionHandler(e)}postDigestQueue.length=postDigestQueuePosition=0,$browser.$$checkUrlChange()},$destroy:function(){if(!this.$$destroyed){var parent=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,this===$rootScope&&$browser.$$applicationDestroyed(),incrementWatchersCount(this,-this.$$watchersCount);for(var eventName in this.$$listenerCount)decrementListenerCount(this,this.$$listenerCount[eventName],eventName);parent&&parent.$$childHead===this&&(parent.$$childHead=this.$$nextSibling),parent&&parent.$$childTail===this&&(parent.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=noop,this.$on=this.$watch=this.$watchGroup=function(){return noop},this.$$listeners={},this.$$nextSibling=null,cleanUpScope(this)}},$eval:function(expr,locals){return $parse(expr)(this,locals)},$evalAsync:function(expr,locals){$rootScope.$$phase||asyncQueue.length||$browser.defer(function(){asyncQueue.length&&$rootScope.$digest()}),asyncQueue.push({scope:this,fn:$parse(expr),locals:locals})},$$postDigest:function(fn){postDigestQueue.push(fn)},$apply:function(expr){try{beginPhase("$apply");try{return this.$eval(expr)}finally{clearPhase()}}catch(e){$exceptionHandler(e)}finally{try{$rootScope.$digest()}catch(e){throw $exceptionHandler(e),e}}},$applyAsync:function(expr){function $applyAsyncExpression(){scope.$eval(expr)}var scope=this;expr&&applyAsyncQueue.push($applyAsyncExpression),expr=$parse(expr),scheduleApplyAsync()},$on:function(name,listener){var namedListeners=this.$$listeners[name];namedListeners||(this.$$listeners[name]=namedListeners=[]),namedListeners.push(listener);var current=this;do{current.$$listenerCount[name]||(current.$$listenerCount[name]=0),current.$$listenerCount[name]++}while(current=current.$parent);var self=this;return function(){var indexOfListener=namedListeners.indexOf(listener);-1!==indexOfListener&&(namedListeners[indexOfListener]=null,decrementListenerCount(self,1,name))}},$emit:function(name,args){var namedListeners,i,length,empty=[],scope=this,stopPropagation=!1,event={name:name,targetScope:scope,stopPropagation:function(){stopPropagation=!0},preventDefault:function(){event.defaultPrevented=!0},defaultPrevented:!1},listenerArgs=concat([event],arguments,1);do{for(namedListeners=scope.$$listeners[name]||empty,event.currentScope=scope,i=0,length=namedListeners.length;i<length;i++)if(namedListeners[i])try{namedListeners[i].apply(null,listenerArgs)}catch(e){$exceptionHandler(e)}else namedListeners.splice(i,1),i--,length--;if(stopPropagation)return event.currentScope=null,event;scope=scope.$parent}while(scope);return event.currentScope=null,event},$broadcast:function(name,args){var target=this,current=target,next=target,event={name:name,targetScope:target,preventDefault:function(){event.defaultPrevented=!0},defaultPrevented:!1};if(!target.$$listenerCount[name])return event;for(var listeners,i,length,listenerArgs=concat([event],arguments,1);current=next;){for(event.currentScope=current,listeners=current.$$listeners[name]||[],i=0,length=listeners.length;i<length;i++)if(listeners[i])try{listeners[i].apply(null,listenerArgs)}catch(e){$exceptionHandler(e)}else listeners.splice(i,1),i--,length--;if(!(next=current.$$listenerCount[name]&&current.$$childHead||current!==target&&current.$$nextSibling))for(;current!==target&&!(next=current.$$nextSibling);)current=current.$parent}return event.currentScope=null,event}};var $rootScope=new Scope,asyncQueue=$rootScope.$$asyncQueue=[],postDigestQueue=$rootScope.$$postDigestQueue=[],applyAsyncQueue=$rootScope.$$applyAsyncQueue=[],postDigestQueuePosition=0;return $rootScope}]}function $$SanitizeUriProvider(){var aHrefSanitizationWhitelist=/^\s*(https?|ftp|mailto|tel|file):/,imgSrcSanitizationWhitelist=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(regexp){return isDefined(regexp)?(aHrefSanitizationWhitelist=regexp,this):aHrefSanitizationWhitelist},this.imgSrcSanitizationWhitelist=function(regexp){return isDefined(regexp)?(imgSrcSanitizationWhitelist=regexp,this):imgSrcSanitizationWhitelist},this.$get=function(){return function(uri,isImage){var normalizedVal,regex=isImage?imgSrcSanitizationWhitelist:aHrefSanitizationWhitelist;return normalizedVal=urlResolve(uri).href,""===normalizedVal||normalizedVal.match(regex)?uri:"unsafe:"+normalizedVal}}}function snakeToCamel(name){return name.replace(UNDERSCORE_LOWERCASE_REGEXP,fnCamelCaseReplace)}function adjustMatcher(matcher){if("self"===matcher)return matcher;if(isString(matcher)){if(matcher.indexOf("***")>-1)throw $sceMinErr("iwcard","Illegal sequence *** in string matcher.  String: {0}",matcher);return matcher=escapeForRegexp(matcher).replace(/\\\*\\\*/g,".*").replace(/\\\*/g,"[^:/.?&;]*"),new RegExp("^"+matcher+"$")}if(isRegExp(matcher))return new RegExp("^"+matcher.source+"$");throw $sceMinErr("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function adjustMatchers(matchers){var adjustedMatchers=[];return isDefined(matchers)&&forEach(matchers,function(matcher){adjustedMatchers.push(adjustMatcher(matcher))}),adjustedMatchers}function $SceDelegateProvider(){this.SCE_CONTEXTS=SCE_CONTEXTS;var resourceUrlWhitelist=["self"],resourceUrlBlacklist=[];this.resourceUrlWhitelist=function(value){return arguments.length&&(resourceUrlWhitelist=adjustMatchers(value)),resourceUrlWhitelist},this.resourceUrlBlacklist=function(value){return arguments.length&&(resourceUrlBlacklist=adjustMatchers(value)),resourceUrlBlacklist},this.$get=["$injector",function($injector){function matchUrl(matcher,parsedUrl){return"self"===matcher?urlIsSameOrigin(parsedUrl):!!matcher.exec(parsedUrl.href)}function isResourceUrlAllowedByPolicy(url){var i,n,parsedUrl=urlResolve(url.toString()),allowed=!1;for(i=0,n=resourceUrlWhitelist.length;i<n;i++)if(matchUrl(resourceUrlWhitelist[i],parsedUrl)){allowed=!0;break}if(allowed)for(i=0,n=resourceUrlBlacklist.length;i<n;i++)if(matchUrl(resourceUrlBlacklist[i],parsedUrl)){allowed=!1;break}return allowed}function generateHolderType(Base){var holderType=function(trustedValue){this.$$unwrapTrustedValue=function(){return trustedValue}};return Base&&(holderType.prototype=new Base),holderType.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},holderType.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},holderType}function trustAs(type,trustedValue){var Constructor=byType.hasOwnProperty(type)?byType[type]:null;if(!Constructor)throw $sceMinErr("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",type,trustedValue);if(null===trustedValue||isUndefined(trustedValue)||""===trustedValue)return trustedValue;if("string"!=typeof trustedValue)throw $sceMinErr("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",type);return new Constructor(trustedValue)}function valueOf(maybeTrusted){return maybeTrusted instanceof trustedValueHolderBase?maybeTrusted.$$unwrapTrustedValue():maybeTrusted}function getTrusted(type,maybeTrusted){if(null===maybeTrusted||isUndefined(maybeTrusted)||""===maybeTrusted)return maybeTrusted;var constructor=byType.hasOwnProperty(type)?byType[type]:null;if(constructor&&maybeTrusted instanceof constructor)return maybeTrusted.$$unwrapTrustedValue();if(type===SCE_CONTEXTS.RESOURCE_URL){if(isResourceUrlAllowedByPolicy(maybeTrusted))return maybeTrusted
;throw $sceMinErr("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",maybeTrusted.toString())}if(type===SCE_CONTEXTS.HTML)return htmlSanitizer(maybeTrusted);throw $sceMinErr("unsafe","Attempting to use an unsafe value in a safe context.")}var htmlSanitizer=function(html){throw $sceMinErr("unsafe","Attempting to use an unsafe value in a safe context.")};$injector.has("$sanitize")&&(htmlSanitizer=$injector.get("$sanitize"));var trustedValueHolderBase=generateHolderType(),byType={};return byType[SCE_CONTEXTS.HTML]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.CSS]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.URL]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.JS]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.RESOURCE_URL]=generateHolderType(byType[SCE_CONTEXTS.URL]),{trustAs:trustAs,getTrusted:getTrusted,valueOf:valueOf}}]}function $SceProvider(){var enabled=!0;this.enabled=function(value){return arguments.length&&(enabled=!!value),enabled},this.$get=["$parse","$sceDelegate",function($parse,$sceDelegate){if(enabled&&msie<8)throw $sceMinErr("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var sce=shallowCopy(SCE_CONTEXTS);sce.isEnabled=function(){return enabled},sce.trustAs=$sceDelegate.trustAs,sce.getTrusted=$sceDelegate.getTrusted,sce.valueOf=$sceDelegate.valueOf,enabled||(sce.trustAs=sce.getTrusted=function(type,value){return value},sce.valueOf=identity),sce.parseAs=function(type,expr){var parsed=$parse(expr);return parsed.literal&&parsed.constant?parsed:$parse(expr,function(value){return sce.getTrusted(type,value)})};var parse=sce.parseAs,getTrusted=sce.getTrusted,trustAs=sce.trustAs;return forEach(SCE_CONTEXTS,function(enumValue,name){var lName=lowercase(name);sce[snakeToCamel("parse_as_"+lName)]=function(expr){return parse(enumValue,expr)},sce[snakeToCamel("get_trusted_"+lName)]=function(value){return getTrusted(enumValue,value)},sce[snakeToCamel("trust_as_"+lName)]=function(value){return trustAs(enumValue,value)}}),sce}]}function $SnifferProvider(){this.$get=["$window","$document",function($window,$document){var eventSupport={},isNw=$window.nw&&$window.nw.process,isChromePackagedApp=!isNw&&$window.chrome&&($window.chrome.app&&$window.chrome.app.runtime||!$window.chrome.app&&$window.chrome.runtime&&$window.chrome.runtime.id),hasHistoryPushState=!isChromePackagedApp&&$window.history&&$window.history.pushState,android=toInt((/android (\d+)/.exec(lowercase(($window.navigator||{}).userAgent))||[])[1]),boxee=/Boxee/i.test(($window.navigator||{}).userAgent),document=$document[0]||{},bodyStyle=document.body&&document.body.style,transitions=!1,animations=!1;return bodyStyle&&(transitions=!!("transition"in bodyStyle||"webkitTransition"in bodyStyle),animations=!!("animation"in bodyStyle||"webkitAnimation"in bodyStyle)),{history:!(!hasHistoryPushState||android<4||boxee),hasEvent:function(event){if("input"===event&&msie)return!1;if(isUndefined(eventSupport[event])){var divElm=document.createElement("div");eventSupport[event]="on"+event in divElm}return eventSupport[event]},csp:csp(),transitions:transitions,animations:animations,android:android}}]}function $TemplateRequestProvider(){var httpOptions;this.httpOptions=function(val){return val?(httpOptions=val,this):httpOptions},this.$get=["$exceptionHandler","$templateCache","$http","$q","$sce",function($exceptionHandler,$templateCache,$http,$q,$sce){function handleRequestFn(tpl,ignoreRequestError){function handleError(resp){return ignoreRequestError||(resp=$templateRequestMinErr("tpload","Failed to load template: {0} (HTTP status: {1} {2})",tpl,resp.status,resp.statusText),$exceptionHandler(resp)),$q.reject(resp)}handleRequestFn.totalPendingRequests++,isString(tpl)&&!isUndefined($templateCache.get(tpl))||(tpl=$sce.getTrustedResourceUrl(tpl));var transformResponse=$http.defaults&&$http.defaults.transformResponse;return isArray(transformResponse)?transformResponse=transformResponse.filter(function(transformer){return transformer!==defaultHttpResponseTransform}):transformResponse===defaultHttpResponseTransform&&(transformResponse=null),$http.get(tpl,extend({cache:$templateCache,transformResponse:transformResponse},httpOptions)).finally(function(){handleRequestFn.totalPendingRequests--}).then(function(response){return $templateCache.put(tpl,response.data),response.data},handleError)}return handleRequestFn.totalPendingRequests=0,handleRequestFn}]}function $$TestabilityProvider(){this.$get=["$rootScope","$browser","$location",function($rootScope,$browser,$location){var testability={};return testability.findBindings=function(element,expression,opt_exactMatch){var bindings=element.getElementsByClassName("ng-binding"),matches=[];return forEach(bindings,function(binding){var dataBinding=angular.element(binding).data("$binding");dataBinding&&forEach(dataBinding,function(bindingName){if(opt_exactMatch){new RegExp("(^|\\s)"+escapeForRegexp(expression)+"(\\s|\\||$)").test(bindingName)&&matches.push(binding)}else-1!==bindingName.indexOf(expression)&&matches.push(binding)})}),matches},testability.findModels=function(element,expression,opt_exactMatch){for(var prefixes=["ng-","data-ng-","ng\\:"],p=0;p<prefixes.length;++p){var attributeEquals=opt_exactMatch?"=":"*=",selector="["+prefixes[p]+"model"+attributeEquals+'"'+expression+'"]',elements=element.querySelectorAll(selector);if(elements.length)return elements}},testability.getLocation=function(){return $location.url()},testability.setLocation=function(url){url!==$location.url()&&($location.url(url),$rootScope.$digest())},testability.whenStable=function(callback){$browser.notifyWhenNoOutstandingRequests(callback)},testability}]}function $TimeoutProvider(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function($rootScope,$browser,$q,$$q,$exceptionHandler){function timeout(fn,delay,invokeApply){isFunction(fn)||(invokeApply=delay,delay=fn,fn=noop);var timeoutId,args=sliceArgs(arguments,3),skipApply=isDefined(invokeApply)&&!invokeApply,deferred=(skipApply?$$q:$q).defer(),promise=deferred.promise;return timeoutId=$browser.defer(function(){try{deferred.resolve(fn.apply(null,args))}catch(e){deferred.reject(e),$exceptionHandler(e)}finally{delete deferreds[promise.$$timeoutId]}skipApply||$rootScope.$apply()},delay),promise.$$timeoutId=timeoutId,deferreds[timeoutId]=deferred,promise}var deferreds={};return timeout.cancel=function(promise){return!!(promise&&promise.$$timeoutId in deferreds)&&(deferreds[promise.$$timeoutId].promise.catch(noop),deferreds[promise.$$timeoutId].reject("canceled"),delete deferreds[promise.$$timeoutId],$browser.defer.cancel(promise.$$timeoutId))},timeout}]}function urlResolve(url){var href=url;return msie&&(urlParsingNode.setAttribute("href",href),href=urlParsingNode.href),urlParsingNode.setAttribute("href",href),{href:urlParsingNode.href,protocol:urlParsingNode.protocol?urlParsingNode.protocol.replace(/:$/,""):"",host:urlParsingNode.host,search:urlParsingNode.search?urlParsingNode.search.replace(/^\?/,""):"",hash:urlParsingNode.hash?urlParsingNode.hash.replace(/^#/,""):"",hostname:urlParsingNode.hostname,port:urlParsingNode.port,pathname:"/"===urlParsingNode.pathname.charAt(0)?urlParsingNode.pathname:"/"+urlParsingNode.pathname}}function urlIsSameOrigin(requestUrl){var parsed=isString(requestUrl)?urlResolve(requestUrl):requestUrl;return parsed.protocol===originUrl.protocol&&parsed.host===originUrl.host}function $WindowProvider(){this.$get=valueFn(window)}function $$CookieReader($document){function safeGetCookie(rawDocument){try{return rawDocument.cookie||""}catch(e){return""}}function safeDecodeURIComponent(str){try{return decodeURIComponent(str)}catch(e){return str}}var rawDocument=$document[0]||{},lastCookies={},lastCookieString="";return function(){var cookieArray,cookie,i,index,name,currentCookieString=safeGetCookie(rawDocument);if(currentCookieString!==lastCookieString)for(lastCookieString=currentCookieString,cookieArray=lastCookieString.split("; "),lastCookies={},i=0;i<cookieArray.length;i++)cookie=cookieArray[i],(index=cookie.indexOf("="))>0&&(name=safeDecodeURIComponent(cookie.substring(0,index)),isUndefined(lastCookies[name])&&(lastCookies[name]=safeDecodeURIComponent(cookie.substring(index+1))));return lastCookies}}function $$CookieReaderProvider(){this.$get=$$CookieReader}function $FilterProvider($provide){function register(name,factory){if(isObject(name)){var filters={};return forEach(name,function(filter,key){filters[key]=register(key,filter)}),filters}return $provide.factory(name+suffix,factory)}var suffix="Filter";this.register=register,this.$get=["$injector",function($injector){return function(name){return $injector.get(name+suffix)}}],register("currency",currencyFilter),register("date",dateFilter),register("filter",filterFilter),register("json",jsonFilter),register("limitTo",limitToFilter),register("lowercase",lowercaseFilter),register("number",numberFilter),register("orderBy",orderByFilter),register("uppercase",uppercaseFilter)}function filterFilter(){return function(array,expression,comparator,anyPropertyKey){if(!isArrayLike(array)){if(null==array)return array;throw minErr("filter")("notarray","Expected array but received: {0}",array)}anyPropertyKey=anyPropertyKey||"$";var predicateFn,matchAgainstAnyProp,expressionType=getTypeForFilter(expression);switch(expressionType){case"function":predicateFn=expression;break;case"boolean":case"null":case"number":case"string":matchAgainstAnyProp=!0;case"object":predicateFn=createPredicateFn(expression,comparator,anyPropertyKey,matchAgainstAnyProp);break;default:return array}return Array.prototype.filter.call(array,predicateFn)}}function createPredicateFn(expression,comparator,anyPropertyKey,matchAgainstAnyProp){var shouldMatchPrimitives=isObject(expression)&&anyPropertyKey in expression;return!0===comparator?comparator=equals:isFunction(comparator)||(comparator=function(actual,expected){return!isUndefined(actual)&&(null===actual||null===expected?actual===expected:!(isObject(expected)||isObject(actual)&&!hasCustomToString(actual))&&(actual=lowercase(""+actual),expected=lowercase(""+expected),-1!==actual.indexOf(expected)))}),function(item){return shouldMatchPrimitives&&!isObject(item)?deepCompare(item,expression[anyPropertyKey],comparator,anyPropertyKey,!1):deepCompare(item,expression,comparator,anyPropertyKey,matchAgainstAnyProp)}}function deepCompare(actual,expected,comparator,anyPropertyKey,matchAgainstAnyProp,dontMatchWholeObject){var actualType=getTypeForFilter(actual),expectedType=getTypeForFilter(expected);if("string"===expectedType&&"!"===expected.charAt(0))return!deepCompare(actual,expected.substring(1),comparator,anyPropertyKey,matchAgainstAnyProp);if(isArray(actual))return actual.some(function(item){return deepCompare(item,expected,comparator,anyPropertyKey,matchAgainstAnyProp)});switch(actualType){case"object":var key;if(matchAgainstAnyProp){for(key in actual)if(key.charAt&&"$"!==key.charAt(0)&&deepCompare(actual[key],expected,comparator,anyPropertyKey,!0))return!0;return!dontMatchWholeObject&&deepCompare(actual,expected,comparator,anyPropertyKey,!1)}if("object"===expectedType){for(key in expected){var expectedVal=expected[key];if(!isFunction(expectedVal)&&!isUndefined(expectedVal)){var matchAnyProperty=key===anyPropertyKey;if(!deepCompare(matchAnyProperty?actual:actual[key],expectedVal,comparator,anyPropertyKey,matchAnyProperty,matchAnyProperty))return!1}}return!0}return comparator(actual,expected);case"function":return!1;default:return comparator(actual,expected)}}function getTypeForFilter(val){return null===val?"null":typeof val}function currencyFilter($locale){var formats=$locale.NUMBER_FORMATS;return function(amount,currencySymbol,fractionSize){return isUndefined(currencySymbol)&&(currencySymbol=formats.CURRENCY_SYM),isUndefined(fractionSize)&&(fractionSize=formats.PATTERNS[1].maxFrac),null==amount?amount:formatNumber(amount,formats.PATTERNS[1],formats.GROUP_SEP,formats.DECIMAL_SEP,fractionSize).replace(/\u00A4/g,currencySymbol)}}function numberFilter($locale){var formats=$locale.NUMBER_FORMATS;return function(number,fractionSize){return null==number?number:formatNumber(number,formats.PATTERNS[0],formats.GROUP_SEP,formats.DECIMAL_SEP,fractionSize)}}function parse(numStr){var digits,numberOfIntegerDigits,i,j,zeros,exponent=0;for((numberOfIntegerDigits=numStr.indexOf(DECIMAL_SEP))>-1&&(numStr=numStr.replace(DECIMAL_SEP,"")),(i=numStr.search(/e/i))>0?(numberOfIntegerDigits<0&&(numberOfIntegerDigits=i),numberOfIntegerDigits+=+numStr.slice(i+1),numStr=numStr.substring(0,i)):numberOfIntegerDigits<0&&(numberOfIntegerDigits=numStr.length),i=0;numStr.charAt(i)===ZERO_CHAR;i++);if(i===(zeros=numStr.length))digits=[0],numberOfIntegerDigits=1;else{for(zeros--;numStr.charAt(zeros)===ZERO_CHAR;)zeros--;for(numberOfIntegerDigits-=i,digits=[],j=0;i<=zeros;i++,j++)digits[j]=+numStr.charAt(i)}return numberOfIntegerDigits>MAX_DIGITS&&(digits=digits.splice(0,MAX_DIGITS-1),exponent=numberOfIntegerDigits-1,numberOfIntegerDigits=1),{d:digits,e:exponent,i:numberOfIntegerDigits}}function roundNumber(parsedNumber,fractionSize,minFrac,maxFrac){var digits=parsedNumber.d,fractionLen=digits.length-parsedNumber.i;fractionSize=isUndefined(fractionSize)?Math.min(Math.max(minFrac,fractionLen),maxFrac):+fractionSize;var roundAt=fractionSize+parsedNumber.i,digit=digits[roundAt];if(roundAt>0){digits.splice(Math.max(parsedNumber.i,roundAt));for(var j=roundAt;j<digits.length;j++)digits[j]=0}else{fractionLen=Math.max(0,fractionLen),parsedNumber.i=1,digits.length=Math.max(1,roundAt=fractionSize+1),digits[0]=0;for(var i=1;i<roundAt;i++)digits[i]=0}if(digit>=5)if(roundAt-1<0){for(var k=0;k>roundAt;k--)digits.unshift(0),parsedNumber.i++;digits.unshift(1),parsedNumber.i++}else digits[roundAt-1]++;for(;fractionLen<Math.max(0,fractionSize);fractionLen++)digits.push(0);var carry=digits.reduceRight(function(carry,d,i,digits){return d+=carry,digits[i]=d%10,Math.floor(d/10)},0);carry&&(digits.unshift(carry),parsedNumber.i++)}function formatNumber(number,pattern,groupSep,decimalSep,fractionSize){if(!isString(number)&&!isNumber(number)||isNaN(number))return"";var parsedNumber,isInfinity=!isFinite(number),isZero=!1,numStr=Math.abs(number)+"",formattedText="";if(isInfinity)formattedText="∞";else{parsedNumber=parse(numStr),roundNumber(parsedNumber,fractionSize,pattern.minFrac,pattern.maxFrac);var digits=parsedNumber.d,integerLen=parsedNumber.i,exponent=parsedNumber.e,decimals=[];for(isZero=digits.reduce(function(isZero,d){return isZero&&!d},!0);integerLen<0;)digits.unshift(0),integerLen++;integerLen>0?decimals=digits.splice(integerLen,digits.length):(decimals=digits,digits=[0]);var groups=[];for(digits.length>=pattern.lgSize&&groups.unshift(digits.splice(-pattern.lgSize,digits.length).join(""));digits.length>pattern.gSize;)groups.unshift(digits.splice(-pattern.gSize,digits.length).join(""));digits.length&&groups.unshift(digits.join("")),formattedText=groups.join(groupSep),decimals.length&&(formattedText+=decimalSep+decimals.join("")),exponent&&(formattedText+="e+"+exponent)}return number<0&&!isZero?pattern.negPre+formattedText+pattern.negSuf:pattern.posPre+formattedText+pattern.posSuf}function padNumber(num,digits,trim,negWrap){var neg="";for((num<0||negWrap&&num<=0)&&(negWrap?num=1-num:(num=-num,neg="-")),num=""+num;num.length<digits;)num=ZERO_CHAR+num;return trim&&(num=num.substr(num.length-digits)),neg+num}function dateGetter(name,size,offset,trim,negWrap){return offset=offset||0,function(date){var value=date["get"+name]();return(offset>0||value>-offset)&&(value+=offset),0===value&&-12===offset&&(value=12),padNumber(value,size,trim,negWrap)}}function dateStrGetter(name,shortForm,standAlone){return function(date,formats){var value=date["get"+name]();return formats[uppercase((standAlone?"STANDALONE":"")+(shortForm?"SHORT":"")+name)][value]}}function timeZoneGetter(date,formats,offset){var zone=-1*offset,paddedZone=zone>=0?"+":"";return paddedZone+=padNumber(Math[zone>0?"floor":"ceil"](zone/60),2)+padNumber(Math.abs(zone%60),2)}function getFirstThursdayOfYear(year){var dayOfWeekOnFirst=new Date(year,0,1).getDay();return new Date(year,0,(dayOfWeekOnFirst<=4?5:12)-dayOfWeekOnFirst)}function getThursdayThisWeek(datetime){return new Date(datetime.getFullYear(),datetime.getMonth(),datetime.getDate()+(4-datetime.getDay()))}function weekGetter(size){return function(date){var firstThurs=getFirstThursdayOfYear(date.getFullYear()),thisThurs=getThursdayThisWeek(date),diff=+thisThurs-+firstThurs;return padNumber(1+Math.round(diff/6048e5),size)}}function ampmGetter(date,formats){return date.getHours()<12?formats.AMPMS[0]:formats.AMPMS[1]}function eraGetter(date,formats){return date.getFullYear()<=0?formats.ERAS[0]:formats.ERAS[1]}function longEraGetter(date,formats){return date.getFullYear()<=0?formats.ERANAMES[0]:formats.ERANAMES[1]}function dateFilter($locale){function jsonStringToDate(string){var match;if(match=string.match(R_ISO8601_STR)){var date=new Date(0),tzHour=0,tzMin=0,dateSetter=match[8]?date.setUTCFullYear:date.setFullYear,timeSetter=match[8]?date.setUTCHours:date.setHours;match[9]&&(tzHour=toInt(match[9]+match[10]),tzMin=toInt(match[9]+match[11])),dateSetter.call(date,toInt(match[1]),toInt(match[2])-1,toInt(match[3]));var h=toInt(match[4]||0)-tzHour,m=toInt(match[5]||0)-tzMin,s=toInt(match[6]||0),ms=Math.round(1e3*parseFloat("0."+(match[7]||0)));return timeSetter.call(date,h,m,s,ms),date}return string}var R_ISO8601_STR=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(date,format,timezone){var fn,match,text="",parts=[];if(format=format||"mediumDate",format=$locale.DATETIME_FORMATS[format]||format,isString(date)&&(date=NUMBER_STRING.test(date)?toInt(date):jsonStringToDate(date)),isNumber(date)&&(date=new Date(date)),!isDate(date)||!isFinite(date.getTime()))return date;for(;format;)match=DATE_FORMATS_SPLIT.exec(format),match?(parts=concat(parts,match,1),format=parts.pop()):(parts.push(format),format=null);var dateTimezoneOffset=date.getTimezoneOffset();return timezone&&(dateTimezoneOffset=timezoneToOffset(timezone,dateTimezoneOffset),date=convertTimezoneToLocal(date,timezone,!0)),forEach(parts,function(value){fn=DATE_FORMATS[value],text+=fn?fn(date,$locale.DATETIME_FORMATS,dateTimezoneOffset):"''"===value?"'":value.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),text}}function jsonFilter(){return function(object,spacing){return isUndefined(spacing)&&(spacing=2),toJson(object,spacing)}}function limitToFilter(){return function(input,limit,begin){return limit=Math.abs(Number(limit))===1/0?Number(limit):toInt(limit),isNumberNaN(limit)?input:(isNumber(input)&&(input=input.toString()),isArrayLike(input)?(begin=!begin||isNaN(begin)?0:toInt(begin),begin=begin<0?Math.max(0,input.length+begin):begin,limit>=0?sliceFn(input,begin,begin+limit):0===begin?sliceFn(input,limit,input.length):sliceFn(input,Math.max(0,begin+limit),begin)):input)}}function sliceFn(input,begin,end){return isString(input)?input.slice(begin,end):slice.call(input,begin,end)}function orderByFilter($parse){function processPredicates(sortPredicates){return sortPredicates.map(function(predicate){var descending=1,get=identity;if(isFunction(predicate))get=predicate;else if(isString(predicate)&&("+"!==predicate.charAt(0)&&"-"!==predicate.charAt(0)||(descending="-"===predicate.charAt(0)?-1:1,predicate=predicate.substring(1)),""!==predicate&&(get=$parse(predicate),get.constant))){var key=get();get=function(value){return value[key]}}return{get:get,descending:descending}})}function isPrimitive(value){switch(typeof value){case"number":case"boolean":case"string":return!0;default:return!1}}function objectValue(value){return isFunction(value.valueOf)&&(value=value.valueOf(),isPrimitive(value))?value:(hasCustomToString(value)&&(value=value.toString(),isPrimitive(value)),value)}function getPredicateValue(value,index){var type=typeof value;return null===value?(type="string",value="null"):"object"===type&&(value=objectValue(value)),{value:value,type:type,index:index}}function defaultCompare(v1,v2){var result=0,type1=v1.type,type2=v2.type;if(type1===type2){var value1=v1.value,value2=v2.value;"string"===type1?(value1=value1.toLowerCase(),value2=value2.toLowerCase()):"object"===type1&&(isObject(value1)&&(value1=v1.index),isObject(value2)&&(value2=v2.index)),value1!==value2&&(result=value1<value2?-1:1)}else result=type1<type2?-1:1;return result}return function(array,sortPredicate,reverseOrder,compareFn){function getComparisonObject(value,index){return{value:value,tieBreaker:{value:index,type:"number",index:index},predicateValues:predicates.map(function(predicate){return getPredicateValue(predicate.get(value),index)})}}function doComparison(v1,v2){for(var i=0,ii=predicates.length;i<ii;i++){var result=compare(v1.predicateValues[i],v2.predicateValues[i]);if(result)return result*predicates[i].descending*descending}return compare(v1.tieBreaker,v2.tieBreaker)*descending}if(null==array)return array;if(!isArrayLike(array))throw minErr("orderBy")("notarray","Expected array but received: {0}",array);isArray(sortPredicate)||(sortPredicate=[sortPredicate]),0===sortPredicate.length&&(sortPredicate=["+"]);var predicates=processPredicates(sortPredicate),descending=reverseOrder?-1:1,compare=isFunction(compareFn)?compareFn:defaultCompare,compareValues=Array.prototype.map.call(array,getComparisonObject);return compareValues.sort(doComparison),array=compareValues.map(function(item){return item.value})}}function ngDirective(directive){return isFunction(directive)&&(directive={link:directive}),directive.restrict=directive.restrict||"AC",valueFn(directive)}function nullFormRenameControl(control,name){control.$name=name}function FormController($element,$attrs,$scope,$animate,$interpolate){this.$$controls=[],this.$error={},this.$$success={},this.$pending=void 0,this.$name=$interpolate($attrs.name||$attrs.ngForm||"")($scope),this.$dirty=!1,this.$pristine=!0,this.$valid=!0,this.$invalid=!1,this.$submitted=!1,this.$$parentForm=nullFormCtrl,this.$$element=$element,this.$$animate=$animate,setupValidity(this)}function setupValidity(instance){instance.$$classCache={},instance.$$classCache[INVALID_CLASS]=!(instance.$$classCache[VALID_CLASS]=instance.$$element.hasClass(VALID_CLASS))}function addSetValidityMethod(context){function createAndSet(ctrl,name,value,controller){ctrl[name]||(ctrl[name]={}),set(ctrl[name],value,controller)}function unsetAndCleanup(ctrl,name,value,controller){ctrl[name]&&unset(ctrl[name],value,controller),isObjectEmpty(ctrl[name])&&(ctrl[name]=void 0)}function cachedToggleClass(ctrl,className,switchValue){switchValue&&!ctrl.$$classCache[className]?(ctrl.$$animate.addClass(ctrl.$$element,className),ctrl.$$classCache[className]=!0):!switchValue&&ctrl.$$classCache[className]&&(ctrl.$$animate.removeClass(ctrl.$$element,className),ctrl.$$classCache[className]=!1)}function toggleValidationCss(ctrl,validationErrorKey,isValid){validationErrorKey=validationErrorKey?"-"+snake_case(validationErrorKey,"-"):"",cachedToggleClass(ctrl,VALID_CLASS+validationErrorKey,!0===isValid),cachedToggleClass(ctrl,INVALID_CLASS+validationErrorKey,!1===isValid)}var clazz=context.clazz,set=context.set,unset=context.unset;clazz.prototype.$setValidity=function(validationErrorKey,state,controller){isUndefined(state)?createAndSet(this,"$pending",validationErrorKey,controller):unsetAndCleanup(this,"$pending",validationErrorKey,controller),isBoolean(state)?state?(unset(this.$error,validationErrorKey,controller),set(this.$$success,validationErrorKey,controller)):(set(this.$error,validationErrorKey,controller),unset(this.$$success,validationErrorKey,controller)):(unset(this.$error,validationErrorKey,controller),unset(this.$$success,validationErrorKey,controller)),this.$pending?(cachedToggleClass(this,PENDING_CLASS,!0),this.$valid=this.$invalid=void 0,toggleValidationCss(this,"",null)):(cachedToggleClass(this,PENDING_CLASS,!1),this.$valid=isObjectEmpty(this.$error),this.$invalid=!this.$valid,toggleValidationCss(this,"",this.$valid));var combinedState;combinedState=this.$pending&&this.$pending[validationErrorKey]?void 0:!this.$error[validationErrorKey]&&(!!this.$$success[validationErrorKey]||null),toggleValidationCss(this,validationErrorKey,combinedState),this.$$parentForm.$setValidity(validationErrorKey,combinedState,this)}}function isObjectEmpty(obj){if(obj)for(var prop in obj)if(obj.hasOwnProperty(prop))return!1;return!0}function stringBasedInputType(ctrl){ctrl.$formatters.push(function(value){return ctrl.$isEmpty(value)?value:value.toString()})}function textInputType(scope,element,attr,ctrl,$sniffer,$browser){baseInputType(scope,element,attr,ctrl,$sniffer,$browser),stringBasedInputType(ctrl)}function baseInputType(scope,element,attr,ctrl,$sniffer,$browser){var type=lowercase(element[0].type);if(!$sniffer.android){var composing=!1;element.on("compositionstart",function(){composing=!0}),element.on("compositionend",function(){composing=!1,listener()})}var timeout,listener=function(ev){if(timeout&&($browser.defer.cancel(timeout),timeout=null),!composing){var value=element.val(),event=ev&&ev.type;"password"===type||attr.ngTrim&&"false"===attr.ngTrim||(value=trim(value)),(ctrl.$viewValue!==value||""===value&&ctrl.$$hasNativeValidators)&&ctrl.$setViewValue(value,event)}};if($sniffer.hasEvent("input"))element.on("input",listener);else{var deferListener=function(ev,input,origValue){timeout||(timeout=$browser.defer(function(){timeout=null,input&&input.value===origValue||listener(ev)}))};element.on("keydown",function(event){var key=event.keyCode;91===key||15<key&&key<19||37<=key&&key<=40||deferListener(event,this,this.value)}),$sniffer.hasEvent("paste")&&element.on("paste cut",deferListener)}element.on("change",listener),PARTIAL_VALIDATION_TYPES[type]&&ctrl.$$hasNativeValidators&&type===attr.type&&element.on(PARTIAL_VALIDATION_EVENTS,function(ev){if(!timeout){var validity=this[VALIDITY_STATE_PROPERTY],origBadInput=validity.badInput,origTypeMismatch=validity.typeMismatch;timeout=$browser.defer(function(){timeout=null,validity.badInput===origBadInput&&validity.typeMismatch===origTypeMismatch||listener(ev)})}}),ctrl.$render=function(){var value=ctrl.$isEmpty(ctrl.$viewValue)?"":ctrl.$viewValue;element.val()!==value&&element.val(value)}}function weekParser(isoWeek,existingDate){if(isDate(isoWeek))return isoWeek;if(isString(isoWeek)){WEEK_REGEXP.lastIndex=0;var parts=WEEK_REGEXP.exec(isoWeek);if(parts){var year=+parts[1],week=+parts[2],hours=0,minutes=0,seconds=0,milliseconds=0,firstThurs=getFirstThursdayOfYear(year),addDays=7*(week-1);return existingDate&&(hours=existingDate.getHours(),minutes=existingDate.getMinutes(),seconds=existingDate.getSeconds(),milliseconds=existingDate.getMilliseconds()),new Date(year,0,firstThurs.getDate()+addDays,hours,minutes,seconds,milliseconds)}}return NaN}function createDateParser(regexp,mapping){return function(iso,date){var parts,map;if(isDate(iso))return iso;if(isString(iso)){if('"'===iso.charAt(0)&&'"'===iso.charAt(iso.length-1)&&(iso=iso.substring(1,iso.length-1)),ISO_DATE_REGEXP.test(iso))return new Date(iso);if(regexp.lastIndex=0,parts=regexp.exec(iso))return parts.shift(),map=date?{yyyy:date.getFullYear(),MM:date.getMonth()+1,dd:date.getDate(),HH:date.getHours(),mm:date.getMinutes(),ss:date.getSeconds(),sss:date.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},forEach(parts,function(part,index){index<mapping.length&&(map[mapping[index]]=+part)}),new Date(map.yyyy,map.MM-1,map.dd,map.HH,map.mm,map.ss||0,1e3*map.sss||0)}return NaN}}function createDateInputType(type,regexp,parseDate,format){return function(scope,element,attr,ctrl,$sniffer,$browser,$filter){function isValidDate(value){return value&&!(value.getTime&&value.getTime()!==value.getTime())}function parseObservedDateValue(val){return isDefined(val)&&!isDate(val)?parseDate(val)||void 0:val}badInputChecker(scope,element,attr,ctrl),baseInputType(scope,element,attr,ctrl,$sniffer,$browser);var previousDate,timezone=ctrl&&ctrl.$options.getOption("timezone");if(ctrl.$$parserName=type,ctrl.$parsers.push(function(value){if(ctrl.$isEmpty(value))return null;if(regexp.test(value)){var parsedDate=parseDate(value,previousDate);return timezone&&(parsedDate=convertTimezoneToLocal(parsedDate,timezone)),parsedDate}}),ctrl.$formatters.push(function(value){if(value&&!isDate(value))throw ngModelMinErr("datefmt","Expected `{0}` to be a date",value);return isValidDate(value)?(previousDate=value,previousDate&&timezone&&(previousDate=convertTimezoneToLocal(previousDate,timezone,!0)),$filter("date")(value,format,timezone)):(previousDate=null,"")}),isDefined(attr.min)||attr.ngMin){var minVal;ctrl.$validators.min=function(value){return!isValidDate(value)||isUndefined(minVal)||parseDate(value)>=minVal},attr.$observe("min",function(val){minVal=parseObservedDateValue(val),ctrl.$validate()})}if(isDefined(attr.max)||attr.ngMax){var maxVal;ctrl.$validators.max=function(value){return!isValidDate(value)||isUndefined(maxVal)||parseDate(value)<=maxVal},attr.$observe("max",function(val){maxVal=parseObservedDateValue(val),ctrl.$validate()})}}}function badInputChecker(scope,element,attr,ctrl){var node=element[0];(ctrl.$$hasNativeValidators=isObject(node.validity))&&ctrl.$parsers.push(function(value){var validity=element.prop(VALIDITY_STATE_PROPERTY)||{};return validity.badInput||validity.typeMismatch?void 0:value})}function numberFormatterParser(ctrl){ctrl.$$parserName="number",ctrl.$parsers.push(function(value){return ctrl.$isEmpty(value)?null:NUMBER_REGEXP.test(value)?parseFloat(value):void 0}),ctrl.$formatters.push(function(value){if(!ctrl.$isEmpty(value)){if(!isNumber(value))throw ngModelMinErr("numfmt","Expected `{0}` to be a number",value);value=value.toString()}return value})}function parseNumberAttrVal(val){return isDefined(val)&&!isNumber(val)&&(val=parseFloat(val)),isNumberNaN(val)?void 0:val}function isNumberInteger(num){return(0|num)===num}function countDecimals(num){var numString=num.toString(),decimalSymbolIndex=numString.indexOf(".");if(-1===decimalSymbolIndex){if(-1<num&&num<1){var match=/e-(\d+)$/.exec(numString);if(match)return Number(match[1])}return 0}return numString.length-decimalSymbolIndex-1}function isValidForStep(viewValue,stepBase,step){var value=Number(viewValue),isNonIntegerValue=!isNumberInteger(value),isNonIntegerStepBase=!isNumberInteger(stepBase),isNonIntegerStep=!isNumberInteger(step);if(isNonIntegerValue||isNonIntegerStepBase||isNonIntegerStep){var valueDecimals=isNonIntegerValue?countDecimals(value):0,stepBaseDecimals=isNonIntegerStepBase?countDecimals(stepBase):0,stepDecimals=isNonIntegerStep?countDecimals(step):0,decimalCount=Math.max(valueDecimals,stepBaseDecimals,stepDecimals),multiplier=Math.pow(10,decimalCount);value*=multiplier,stepBase*=multiplier,step*=multiplier,isNonIntegerValue&&(value=Math.round(value)),isNonIntegerStepBase&&(stepBase=Math.round(stepBase)),isNonIntegerStep&&(step=Math.round(step))}return(value-stepBase)%step==0}function numberInputType(scope,element,attr,ctrl,$sniffer,$browser){badInputChecker(scope,element,attr,ctrl),numberFormatterParser(ctrl),baseInputType(scope,element,attr,ctrl,$sniffer,$browser);var minVal,maxVal;if((isDefined(attr.min)||attr.ngMin)&&(ctrl.$validators.min=function(value){return ctrl.$isEmpty(value)||isUndefined(minVal)||value>=minVal},attr.$observe("min",function(val){minVal=parseNumberAttrVal(val),ctrl.$validate()})),(isDefined(attr.max)||attr.ngMax)&&(ctrl.$validators.max=function(value){return ctrl.$isEmpty(value)||isUndefined(maxVal)||value<=maxVal},attr.$observe("max",function(val){maxVal=parseNumberAttrVal(val),ctrl.$validate()})),isDefined(attr.step)||attr.ngStep){var stepVal;ctrl.$validators.step=function(modelValue,viewValue){
return ctrl.$isEmpty(viewValue)||isUndefined(stepVal)||isValidForStep(viewValue,minVal||0,stepVal)},attr.$observe("step",function(val){stepVal=parseNumberAttrVal(val),ctrl.$validate()})}}function rangeInputType(scope,element,attr,ctrl,$sniffer,$browser){function setInitialValueAndObserver(htmlAttrName,changeFn){element.attr(htmlAttrName,attr[htmlAttrName]),attr.$observe(htmlAttrName,changeFn)}function minChange(val){if(minVal=parseNumberAttrVal(val),!isNumberNaN(ctrl.$modelValue))if(supportsRange){var elVal=element.val();minVal>elVal&&(elVal=minVal,element.val(elVal)),ctrl.$setViewValue(elVal)}else ctrl.$validate()}function maxChange(val){if(maxVal=parseNumberAttrVal(val),!isNumberNaN(ctrl.$modelValue))if(supportsRange){var elVal=element.val();maxVal<elVal&&(element.val(maxVal),elVal=maxVal<minVal?minVal:maxVal),ctrl.$setViewValue(elVal)}else ctrl.$validate()}function stepChange(val){stepVal=parseNumberAttrVal(val),isNumberNaN(ctrl.$modelValue)||(supportsRange&&ctrl.$viewValue!==element.val()?ctrl.$setViewValue(element.val()):ctrl.$validate())}badInputChecker(scope,element,attr,ctrl),numberFormatterParser(ctrl),baseInputType(scope,element,attr,ctrl,$sniffer,$browser);var supportsRange=ctrl.$$hasNativeValidators&&"range"===element[0].type,minVal=supportsRange?0:void 0,maxVal=supportsRange?100:void 0,stepVal=supportsRange?1:void 0,validity=element[0].validity,hasMinAttr=isDefined(attr.min),hasMaxAttr=isDefined(attr.max),hasStepAttr=isDefined(attr.step),originalRender=ctrl.$render;ctrl.$render=supportsRange&&isDefined(validity.rangeUnderflow)&&isDefined(validity.rangeOverflow)?function(){originalRender(),ctrl.$setViewValue(element.val())}:originalRender,hasMinAttr&&(ctrl.$validators.min=supportsRange?function(){return!0}:function(modelValue,viewValue){return ctrl.$isEmpty(viewValue)||isUndefined(minVal)||viewValue>=minVal},setInitialValueAndObserver("min",minChange)),hasMaxAttr&&(ctrl.$validators.max=supportsRange?function(){return!0}:function(modelValue,viewValue){return ctrl.$isEmpty(viewValue)||isUndefined(maxVal)||viewValue<=maxVal},setInitialValueAndObserver("max",maxChange)),hasStepAttr&&(ctrl.$validators.step=supportsRange?function(){return!validity.stepMismatch}:function(modelValue,viewValue){return ctrl.$isEmpty(viewValue)||isUndefined(stepVal)||isValidForStep(viewValue,minVal||0,stepVal)},setInitialValueAndObserver("step",stepChange))}function urlInputType(scope,element,attr,ctrl,$sniffer,$browser){baseInputType(scope,element,attr,ctrl,$sniffer,$browser),stringBasedInputType(ctrl),ctrl.$$parserName="url",ctrl.$validators.url=function(modelValue,viewValue){var value=modelValue||viewValue;return ctrl.$isEmpty(value)||URL_REGEXP.test(value)}}function emailInputType(scope,element,attr,ctrl,$sniffer,$browser){baseInputType(scope,element,attr,ctrl,$sniffer,$browser),stringBasedInputType(ctrl),ctrl.$$parserName="email",ctrl.$validators.email=function(modelValue,viewValue){var value=modelValue||viewValue;return ctrl.$isEmpty(value)||EMAIL_REGEXP.test(value)}}function radioInputType(scope,element,attr,ctrl){var doTrim=!attr.ngTrim||"false"!==trim(attr.ngTrim);isUndefined(attr.name)&&element.attr("name",nextUid());var listener=function(ev){var value;element[0].checked&&(value=attr.value,doTrim&&(value=trim(value)),ctrl.$setViewValue(value,ev&&ev.type))};element.on("click",listener),ctrl.$render=function(){var value=attr.value;doTrim&&(value=trim(value)),element[0].checked=value===ctrl.$viewValue},attr.$observe("value",ctrl.$render)}function parseConstantExpr($parse,context,name,expression,fallback){var parseFn;if(isDefined(expression)){if(parseFn=$parse(expression),!parseFn.constant)throw ngModelMinErr("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",name,expression);return parseFn(context)}return fallback}function checkboxInputType(scope,element,attr,ctrl,$sniffer,$browser,$filter,$parse){var trueValue=parseConstantExpr($parse,scope,"ngTrueValue",attr.ngTrueValue,!0),falseValue=parseConstantExpr($parse,scope,"ngFalseValue",attr.ngFalseValue,!1),listener=function(ev){ctrl.$setViewValue(element[0].checked,ev&&ev.type)};element.on("click",listener),ctrl.$render=function(){element[0].checked=ctrl.$viewValue},ctrl.$isEmpty=function(value){return!1===value},ctrl.$formatters.push(function(value){return equals(value,trueValue)}),ctrl.$parsers.push(function(value){return value?trueValue:falseValue})}function classDirective(name,selector){function arrayDifference(tokens1,tokens2){if(!tokens1||!tokens1.length)return[];if(!tokens2||!tokens2.length)return tokens1;var values=[];outer:for(var i=0;i<tokens1.length;i++){for(var token=tokens1[i],j=0;j<tokens2.length;j++)if(token===tokens2[j])continue outer;values.push(token)}return values}function split(classString){return classString&&classString.split(" ")}function toClassString(classValue){var classString=classValue;return isArray(classValue)?classString=classValue.map(toClassString).join(" "):isObject(classValue)&&(classString=Object.keys(classValue).filter(function(key){return classValue[key]}).join(" ")),classString}name="ngClass"+name;var indexWatchExpression;return["$parse",function($parse){return{restrict:"AC",link:function(scope,element,attr){function addClasses(classString){classString=digestClassCounts(split(classString),1),attr.$addClass(classString)}function removeClasses(classString){classString=digestClassCounts(split(classString),-1),attr.$removeClass(classString)}function updateClasses(oldClassString,newClassString){var oldClassArray=split(oldClassString),newClassArray=split(newClassString),toRemoveArray=arrayDifference(oldClassArray,newClassArray),toAddArray=arrayDifference(newClassArray,oldClassArray),toRemoveString=digestClassCounts(toRemoveArray,-1),toAddString=digestClassCounts(toAddArray,1);attr.$addClass(toAddString),attr.$removeClass(toRemoveString)}function digestClassCounts(classArray,count){var classesToUpdate=[];return forEach(classArray,function(className){(count>0||classCounts[className])&&(classCounts[className]=(classCounts[className]||0)+count,classCounts[className]===+(count>0)&&classesToUpdate.push(className))}),classesToUpdate.join(" ")}function ngClassIndexWatchAction(newModulo){newModulo===selector?addClasses(oldClassString):removeClasses(oldClassString),oldModulo=newModulo}function ngClassWatchAction(newClassString){isString(newClassString)||(newClassString=toClassString(newClassString)),oldModulo===selector&&updateClasses(oldClassString,newClassString),oldClassString=newClassString}var oldClassString,classCounts=element.data("$classCounts"),oldModulo=!0;classCounts||(classCounts=createMap(),element.data("$classCounts",classCounts)),"ngClass"!==name&&(indexWatchExpression||(indexWatchExpression=$parse("$index",function($index){return 1&$index})),scope.$watch(indexWatchExpression,ngClassIndexWatchAction)),scope.$watch($parse(attr[name],toClassString),ngClassWatchAction)}}}]}function NgModelController($scope,$exceptionHandler,$attr,$element,$parse,$animate,$timeout,$q,$interpolate){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=void 0,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=void 0,this.$name=$interpolate($attr.name||"",!1)($scope),this.$$parentForm=nullFormCtrl,this.$options=defaultModelOptions,this.$$parsedNgModel=$parse($attr.ngModel),this.$$parsedNgModelAssign=this.$$parsedNgModel.assign,this.$$ngModelGet=this.$$parsedNgModel,this.$$ngModelSet=this.$$parsedNgModelAssign,this.$$pendingDebounce=null,this.$$parserValid=void 0,this.$$currentValidationRunId=0,Object.defineProperty(this,"$$scope",{value:$scope}),this.$$attr=$attr,this.$$element=$element,this.$$animate=$animate,this.$$timeout=$timeout,this.$$parse=$parse,this.$$q=$q,this.$$exceptionHandler=$exceptionHandler,setupValidity(this),setupModelWatcher(this)}function setupModelWatcher(ctrl){ctrl.$$scope.$watch(function(scope){var modelValue=ctrl.$$ngModelGet(scope);if(modelValue!==ctrl.$modelValue&&(ctrl.$modelValue===ctrl.$modelValue||modelValue===modelValue)){ctrl.$modelValue=ctrl.$$rawModelValue=modelValue,ctrl.$$parserValid=void 0;for(var formatters=ctrl.$formatters,idx=formatters.length,viewValue=modelValue;idx--;)viewValue=formatters[idx](viewValue);ctrl.$viewValue!==viewValue&&(ctrl.$$updateEmptyClasses(viewValue),ctrl.$viewValue=ctrl.$$lastCommittedViewValue=viewValue,ctrl.$render(),ctrl.$$runValidators(ctrl.$modelValue,ctrl.$viewValue,noop))}return modelValue})}function ModelOptions(options){this.$$options=options}function defaults(dst,src){forEach(src,function(value,key){isDefined(dst[key])||(dst[key]=value)})}function setOptionSelectedStatus(optionEl,value){optionEl.prop("selected",value),optionEl.attr("selected",value)}var VALIDITY_STATE_PROPERTY="validity",hasOwnProperty=Object.prototype.hasOwnProperty,minErrConfig={objectMaxDepth:5},lowercase=function(string){return isString(string)?string.toLowerCase():string},uppercase=function(string){return isString(string)?string.toUpperCase():string},manualLowercase=function(s){return isString(s)?s.replace(/[A-Z]/g,function(ch){return String.fromCharCode(32|ch.charCodeAt(0))}):s},manualUppercase=function(s){return isString(s)?s.replace(/[a-z]/g,function(ch){return String.fromCharCode(-33&ch.charCodeAt(0))}):s};"i"!=="I".toLowerCase()&&(lowercase=manualLowercase,uppercase=manualUppercase);var msie,jqLite,jQuery,angularModule,slice=[].slice,splice=[].splice,push=[].push,toString=Object.prototype.toString,getPrototypeOf=Object.getPrototypeOf,ngMinErr=minErr("ng"),angular=window.angular||(window.angular={}),uid=0;msie=window.document.documentMode;var isNumberNaN=Number.isNaN||function(num){return num!==num};noop.$inject=[],identity.$inject=[];var isArray=Array.isArray,TYPED_ARRAY_REGEXP=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array]$/,trim=function(value){return isString(value)?value.trim():value},escapeForRegexp=function(s){return s.replace(/([-()[\]{}+?*.$^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},csp=function(){if(!isDefined(csp.rules)){var ngCspElement=window.document.querySelector("[ng-csp]")||window.document.querySelector("[data-ng-csp]");if(ngCspElement){var ngCspAttribute=ngCspElement.getAttribute("ng-csp")||ngCspElement.getAttribute("data-ng-csp");csp.rules={noUnsafeEval:!ngCspAttribute||-1!==ngCspAttribute.indexOf("no-unsafe-eval"),noInlineStyle:!ngCspAttribute||-1!==ngCspAttribute.indexOf("no-inline-style")}}else csp.rules={noUnsafeEval:function(){try{return new Function(""),!1}catch(e){return!0}}(),noInlineStyle:!1}}return csp.rules},jq=function(){if(isDefined(jq.name_))return jq.name_;var el,i,prefix,name,ii=ngAttrPrefixes.length;for(i=0;i<ii;++i)if(prefix=ngAttrPrefixes[i],el=window.document.querySelector("["+prefix.replace(":","\\:")+"jq]")){name=el.getAttribute(prefix+"jq");break}return jq.name_=name},ALL_COLONS=/:/g,ngAttrPrefixes=["ng-","data-ng-","ng:","x-ng-"],isAutoBootstrapAllowed=function(document){var script=document.currentScript;if(!script)return!0;if(!(script instanceof window.HTMLScriptElement||script instanceof window.SVGScriptElement))return!1;var attributes=script.attributes;return[attributes.getNamedItem("src"),attributes.getNamedItem("href"),attributes.getNamedItem("xlink:href")].every(function(src){if(!src)return!0;if(!src.value)return!1;var link=document.createElement("a");if(link.href=src.value,document.location.origin===link.origin)return!0;switch(link.protocol){case"http:":case"https:":case"ftp:":case"blob:":case"file:":case"data:":return!0;default:return!1}})}(window.document),SNAKE_CASE_REGEXP=/[A-Z]/g,bindJQueryFired=!1,NODE_TYPE_ELEMENT=1,NODE_TYPE_TEXT=3,NODE_TYPE_COMMENT=8,NODE_TYPE_DOCUMENT=9,NODE_TYPE_DOCUMENT_FRAGMENT=11,version={full:"1.6.4",major:1,minor:6,dot:4,codeName:"phenomenal-footnote"};JQLite.expando="ng339";var jqCache=JQLite.cache={},jqId=1;JQLite._data=function(node){return this.cache[node[this.expando]]||{}};var DASH_LOWERCASE_REGEXP=/-([a-z])/g,MS_HACK_REGEXP=/^-ms-/,MOUSE_EVENT_MAP={mouseleave:"mouseout",mouseenter:"mouseover"},jqLiteMinErr=minErr("jqLite"),SINGLE_TAG_REGEXP=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,HTML_REGEXP=/<|&#?\w+;/,TAG_NAME_REGEXP=/<([\w:-]+)/,XHTML_TAG_REGEXP=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,wrapMap={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};wrapMap.optgroup=wrapMap.option,wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead,wrapMap.th=wrapMap.td;var jqLiteContains=window.Node.prototype.contains||function(arg){return!!(16&this.compareDocumentPosition(arg))},JQLitePrototype=JQLite.prototype={ready:jqLiteReady,toString:function(){var value=[];return forEach(this,function(e){value.push(""+e)}),"["+value.join(", ")+"]"},eq:function(index){return jqLite(index>=0?this[index]:this[this.length+index])},length:0,push:push,sort:[].sort,splice:[].splice},BOOLEAN_ATTR={};forEach("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(value){BOOLEAN_ATTR[lowercase(value)]=value});var BOOLEAN_ELEMENTS={};forEach("input,select,option,textarea,button,form,details".split(","),function(value){BOOLEAN_ELEMENTS[value]=!0});var ALIASED_ATTR={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern",ngStep:"step"};forEach({data:jqLiteData,removeData:jqLiteRemoveData,hasData:jqLiteHasData,cleanData:function(nodes){for(var i=0,ii=nodes.length;i<ii;i++)jqLiteRemoveData(nodes[i])}},function(fn,name){JQLite[name]=fn}),forEach({data:jqLiteData,inheritedData:jqLiteInheritedData,scope:function(element){return jqLite.data(element,"$scope")||jqLiteInheritedData(element.parentNode||element,["$isolateScope","$scope"])},isolateScope:function(element){return jqLite.data(element,"$isolateScope")||jqLite.data(element,"$isolateScopeNoTemplate")},controller:jqLiteController,injector:function(element){return jqLiteInheritedData(element,"$injector")},removeAttr:function(element,name){element.removeAttribute(name)},hasClass:jqLiteHasClass,css:function(element,name,value){if(name=cssKebabToCamel(name),!isDefined(value))return element.style[name];element.style[name]=value},attr:function(element,name,value){var ret,nodeType=element.nodeType;if(nodeType!==NODE_TYPE_TEXT&&2!==nodeType&&nodeType!==NODE_TYPE_COMMENT&&element.getAttribute){var lowercasedName=lowercase(name),isBooleanAttr=BOOLEAN_ATTR[lowercasedName];if(!isDefined(value))return ret=element.getAttribute(name),isBooleanAttr&&null!==ret&&(ret=lowercasedName),null===ret?void 0:ret;null===value||!1===value&&isBooleanAttr?element.removeAttribute(name):element.setAttribute(name,isBooleanAttr?lowercasedName:value)}},prop:function(element,name,value){if(!isDefined(value))return element[name];element[name]=value},text:function(){function getText(element,value){if(isUndefined(value)){var nodeType=element.nodeType;return nodeType===NODE_TYPE_ELEMENT||nodeType===NODE_TYPE_TEXT?element.textContent:""}element.textContent=value}return getText.$dv="",getText}(),val:function(element,value){if(isUndefined(value)){if(element.multiple&&"select"===nodeName_(element)){var result=[];return forEach(element.options,function(option){option.selected&&result.push(option.value||option.text)}),result}return element.value}element.value=value},html:function(element,value){if(isUndefined(value))return element.innerHTML;jqLiteDealoc(element,!0),element.innerHTML=value},empty:jqLiteEmpty},function(fn,name){JQLite.prototype[name]=function(arg1,arg2){var i,key,nodeCount=this.length;if(fn!==jqLiteEmpty&&isUndefined(2===fn.length&&fn!==jqLiteHasClass&&fn!==jqLiteController?arg1:arg2)){if(isObject(arg1)){for(i=0;i<nodeCount;i++)if(fn===jqLiteData)fn(this[i],arg1);else for(key in arg1)fn(this[i],key,arg1[key]);return this}for(var value=fn.$dv,jj=isUndefined(value)?Math.min(nodeCount,1):nodeCount,j=0;j<jj;j++){var nodeValue=fn(this[j],arg1,arg2);value=value?value+nodeValue:nodeValue}return value}for(i=0;i<nodeCount;i++)fn(this[i],arg1,arg2);return this}}),forEach({removeData:jqLiteRemoveData,on:function(element,type,fn,unsupported){if(isDefined(unsupported))throw jqLiteMinErr("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(jqLiteAcceptsData(element)){var expandoStore=jqLiteExpandoStore(element,!0),events=expandoStore.events,handle=expandoStore.handle;handle||(handle=expandoStore.handle=createEventHandler(element,events));for(var types=type.indexOf(" ")>=0?type.split(" "):[type],i=types.length,addHandler=function(type,specialHandlerWrapper,noEventListener){var eventFns=events[type];eventFns||(eventFns=events[type]=[],eventFns.specialHandlerWrapper=specialHandlerWrapper,"$destroy"===type||noEventListener||element.addEventListener(type,handle)),eventFns.push(fn)};i--;)type=types[i],MOUSE_EVENT_MAP[type]?(addHandler(MOUSE_EVENT_MAP[type],specialMouseHandlerWrapper),addHandler(type,void 0,!0)):addHandler(type)}},off:jqLiteOff,one:function(element,type,fn){element=jqLite(element),element.on(type,function onFn(){element.off(type,fn),element.off(type,onFn)}),element.on(type,fn)},replaceWith:function(element,replaceNode){var index,parent=element.parentNode;jqLiteDealoc(element),forEach(new JQLite(replaceNode),function(node){index?parent.insertBefore(node,index.nextSibling):parent.replaceChild(node,element),index=node})},children:function(element){var children=[];return forEach(element.childNodes,function(element){element.nodeType===NODE_TYPE_ELEMENT&&children.push(element)}),children},contents:function(element){return element.contentDocument||element.childNodes||[]},append:function(element,node){var nodeType=element.nodeType;if(nodeType===NODE_TYPE_ELEMENT||nodeType===NODE_TYPE_DOCUMENT_FRAGMENT){node=new JQLite(node);for(var i=0,ii=node.length;i<ii;i++){var child=node[i];element.appendChild(child)}}},prepend:function(element,node){if(element.nodeType===NODE_TYPE_ELEMENT){var index=element.firstChild;forEach(new JQLite(node),function(child){element.insertBefore(child,index)})}},wrap:function(element,wrapNode){jqLiteWrapNode(element,jqLite(wrapNode).eq(0).clone()[0])},remove:jqLiteRemove,detach:function(element){jqLiteRemove(element,!0)},after:function(element,newElement){var index=element,parent=element.parentNode;if(parent){newElement=new JQLite(newElement);for(var i=0,ii=newElement.length;i<ii;i++){var node=newElement[i];parent.insertBefore(node,index.nextSibling),index=node}}},addClass:jqLiteAddClass,removeClass:jqLiteRemoveClass,toggleClass:function(element,selector,condition){selector&&forEach(selector.split(" "),function(className){var classCondition=condition;isUndefined(classCondition)&&(classCondition=!jqLiteHasClass(element,className)),(classCondition?jqLiteAddClass:jqLiteRemoveClass)(element,className)})},parent:function(element){var parent=element.parentNode;return parent&&parent.nodeType!==NODE_TYPE_DOCUMENT_FRAGMENT?parent:null},next:function(element){return element.nextElementSibling},find:function(element,selector){return element.getElementsByTagName?element.getElementsByTagName(selector):[]},clone:jqLiteClone,triggerHandler:function(element,event,extraParameters){var dummyEvent,eventFnsCopy,handlerArgs,eventName=event.type||event,expandoStore=jqLiteExpandoStore(element),events=expandoStore&&expandoStore.events,eventFns=events&&events[eventName];eventFns&&(dummyEvent={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:noop,type:eventName,target:element},event.type&&(dummyEvent=extend(dummyEvent,event)),eventFnsCopy=shallowCopy(eventFns),handlerArgs=extraParameters?[dummyEvent].concat(extraParameters):[dummyEvent],forEach(eventFnsCopy,function(fn){dummyEvent.isImmediatePropagationStopped()||fn.apply(element,handlerArgs)}))}},function(fn,name){JQLite.prototype[name]=function(arg1,arg2,arg3){for(var value,i=0,ii=this.length;i<ii;i++)isUndefined(value)?(value=fn(this[i],arg1,arg2,arg3),isDefined(value)&&(value=jqLite(value))):jqLiteAddNodes(value,fn(this[i],arg1,arg2,arg3));return isDefined(value)?value:this}}),JQLite.prototype.bind=JQLite.prototype.on,JQLite.prototype.unbind=JQLite.prototype.off;var nanKey=Object.create(null);NgMapShim.prototype={_idx:function(key){return key===this._lastKey?this._lastIndex:(this._lastKey=key,this._lastIndex=this._keys.indexOf(key),this._lastIndex)},_transformKey:function(key){return isNumberNaN(key)?nanKey:key},get:function(key){key=this._transformKey(key);var idx=this._idx(key);if(-1!==idx)return this._values[idx]},set:function(key,value){key=this._transformKey(key);var idx=this._idx(key);-1===idx&&(idx=this._lastIndex=this._keys.length),this._keys[idx]=key,this._values[idx]=value},delete:function(key){key=this._transformKey(key);var idx=this._idx(key);return-1!==idx&&(this._keys.splice(idx,1),this._values.splice(idx,1),this._lastKey=NaN,this._lastIndex=-1,!0)}};var NgMap=NgMapShim,$$MapProvider=[function(){this.$get=[function(){return NgMap}]}],ARROW_ARG=/^([^(]+?)=>/,FN_ARGS=/^[^(]*\(\s*([^)]*)\)/m,FN_ARG_SPLIT=/,/,FN_ARG=/^\s*(_?)(\S+?)\1\s*$/,STRIP_COMMENTS=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,$injectorMinErr=minErr("$injector");createInjector.$$annotate=annotate;var $animateMinErr=minErr("$animate"),ELEMENT_NODE=1,$$CoreAnimateJsProvider=function(){this.$get=noop},$$CoreAnimateQueueProvider=function(){var postDigestQueue=new NgMap,postDigestElements=[];this.$get=["$$AnimateRunner","$rootScope",function($$AnimateRunner,$rootScope){function updateData(data,classes,value){var changed=!1;return classes&&(classes=isString(classes)?classes.split(" "):isArray(classes)?classes:[],forEach(classes,function(className){className&&(changed=!0,data[className]=value)})),changed}function handleCSSClassChanges(){forEach(postDigestElements,function(element){var data=postDigestQueue.get(element);if(data){var existing=splitClasses(element.attr("class")),toAdd="",toRemove="";forEach(data,function(status,className){status!==!!existing[className]&&(status?toAdd+=(toAdd.length?" ":"")+className:toRemove+=(toRemove.length?" ":"")+className)}),forEach(element,function(elm){toAdd&&jqLiteAddClass(elm,toAdd),toRemove&&jqLiteRemoveClass(elm,toRemove)}),postDigestQueue.delete(element)}}),postDigestElements.length=0}function addRemoveClassesPostDigest(element,add,remove){var data=postDigestQueue.get(element)||{},classesAdded=updateData(data,add,!0),classesRemoved=updateData(data,remove,!1);(classesAdded||classesRemoved)&&(postDigestQueue.set(element,data),postDigestElements.push(element),1===postDigestElements.length&&$rootScope.$$postDigest(handleCSSClassChanges))}return{enabled:noop,on:noop,off:noop,pin:noop,push:function(element,event,options,domOperation){domOperation&&domOperation(),options=options||{},options.from&&element.css(options.from),options.to&&element.css(options.to),(options.addClass||options.removeClass)&&addRemoveClassesPostDigest(element,options.addClass,options.removeClass);var runner=new $$AnimateRunner;return runner.complete(),runner}}}]},$AnimateProvider=["$provide",function($provide){var provider=this,classNameFilter=null;this.$$registeredAnimations=Object.create(null),this.register=function(name,factory){if(name&&"."!==name.charAt(0))throw $animateMinErr("notcsel","Expecting class selector starting with '.' got '{0}'.",name);var key=name+"-animation";provider.$$registeredAnimations[name.substr(1)]=key,$provide.factory(key,factory)},this.classNameFilter=function(expression){if(1===arguments.length&&(classNameFilter=expression instanceof RegExp?expression:null)){if(new RegExp("[(\\s|\\/)]ng-animate[(\\s|\\/)]").test(classNameFilter.toString()))throw classNameFilter=null,$animateMinErr("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',"ng-animate")}return classNameFilter},this.$get=["$$animateQueue",function($$animateQueue){function domInsert(element,parentElement,afterElement){if(afterElement){var afterNode=extractElementNode(afterElement);!afterNode||afterNode.parentNode||afterNode.previousElementSibling||(afterElement=null)}afterElement?afterElement.after(element):parentElement.prepend(element)}return{on:$$animateQueue.on,off:$$animateQueue.off,pin:$$animateQueue.pin,enabled:$$animateQueue.enabled,cancel:function(runner){runner.end&&runner.end()},enter:function(element,parent,after,options){return parent=parent&&jqLite(parent),after=after&&jqLite(after),parent=parent||after.parent(),domInsert(element,parent,after),$$animateQueue.push(element,"enter",prepareAnimateOptions(options))},move:function(element,parent,after,options){return parent=parent&&jqLite(parent),after=after&&jqLite(after),parent=parent||after.parent(),domInsert(element,parent,after),$$animateQueue.push(element,"move",prepareAnimateOptions(options))},leave:function(element,options){return $$animateQueue.push(element,"leave",prepareAnimateOptions(options),function(){element.remove()})},addClass:function(element,className,options){return options=prepareAnimateOptions(options),options.addClass=mergeClasses(options.addclass,className),$$animateQueue.push(element,"addClass",options)},removeClass:function(element,className,options){return options=prepareAnimateOptions(options),options.removeClass=mergeClasses(options.removeClass,className),$$animateQueue.push(element,"removeClass",options)},setClass:function(element,add,remove,options){return options=prepareAnimateOptions(options),options.addClass=mergeClasses(options.addClass,add),options.removeClass=mergeClasses(options.removeClass,remove),$$animateQueue.push(element,"setClass",options)},animate:function(element,from,to,className,options){return options=prepareAnimateOptions(options),options.from=options.from?extend(options.from,from):from,options.to=options.to?extend(options.to,to):to,className=className||"ng-inline-animate",options.tempClasses=mergeClasses(options.tempClasses,className),$$animateQueue.push(element,"animate",options)}}}]}],$$AnimateAsyncRunFactoryProvider=function(){this.$get=["$$rAF",function($$rAF){function waitForTick(fn){waitQueue.push(fn),waitQueue.length>1||$$rAF(function(){for(var i=0;i<waitQueue.length;i++)waitQueue[i]();waitQueue=[]})}var waitQueue=[];return function(){var passed=!1;return waitForTick(function(){passed=!0}),function(callback){passed?callback():waitForTick(callback)}}}]},$$AnimateRunnerFactoryProvider=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$$isDocumentHidden","$timeout",function($q,$sniffer,$$animateAsyncRun,$$isDocumentHidden,$timeout){function AnimateRunner(host){this.setHost(host);var rafTick=$$animateAsyncRun(),timeoutTick=function(fn){$timeout(fn,0,!1)};this._doneCallbacks=[],this._tick=function(fn){$$isDocumentHidden()?timeoutTick(fn):rafTick(fn)},this._state=0}return AnimateRunner.chain=function(chain,callback){function next(){if(index===chain.length)return void callback(!0);chain[index](function(response){if(!1===response)return void callback(!1);index++,next()})}var index=0;next()},AnimateRunner.all=function(runners,callback){function onProgress(response){status=status&&response,++count===runners.length&&callback(status)}var count=0,status=!0;forEach(runners,function(runner){runner.done(onProgress)})},AnimateRunner.prototype={setHost:function(host){this.host=host||{}},done:function(fn){2===this._state?fn():this._doneCallbacks.push(fn)},progress:noop,getPromise:function(){if(!this.promise){var self=this;this.promise=$q(function(resolve,reject){self.done(function(status){!1===status?reject():resolve()})})}return this.promise},then:function(resolveHandler,rejectHandler){return this.getPromise().then(resolveHandler,rejectHandler)},catch:function(handler){return this.getPromise().catch(handler)},finally:function(handler){return this.getPromise().finally(handler)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(response){var self=this;0===self._state&&(self._state=1,self._tick(function(){self._resolve(response)}))},_resolve:function(response){2!==this._state&&(forEach(this._doneCallbacks,function(fn){fn(response)}),this._doneCallbacks.length=0,this._state=2)}},AnimateRunner}]},$CoreAnimateCssProvider=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function($$rAF,$q,$$AnimateRunner){return function(element,initialOptions){function run(){return $$rAF(function(){applyAnimationContents(),closed||runner.complete(),closed=!0}),runner}function applyAnimationContents(){options.addClass&&(element.addClass(options.addClass),options.addClass=null),options.removeClass&&(element.removeClass(options.removeClass),options.removeClass=null),options.to&&(element.css(options.to),options.to=null)}var options=initialOptions||{};options.$$prepared||(options=copy(options)),options.cleanupStyles&&(options.from=options.to=null),options.from&&(element.css(options.from),options.from=null);var closed,runner=new $$AnimateRunner;return{start:run,end:run}}}]},$compileMinErr=minErr("$compile"),_UNINITIALIZED_VALUE=new UNINITIALIZED_VALUE;$CompileProvider.$inject=["$provide","$$sanitizeUriProvider"],SimpleChange.prototype.isFirstChange=function(){return this.previousValue===_UNINITIALIZED_VALUE};var PREFIX_REGEXP=/^((?:x|data)[:\-_])/i,SPECIAL_CHARS_REGEXP=/[:\-_]+(.)/g,$controllerMinErr=minErr("$controller"),CNTRL_REG=/^(\S+)(\s+as\s+([\w$]+))?$/,$$ForceReflowProvider=function(){this.$get=["$document",function($document){return function(domNode){return domNode?!domNode.nodeType&&domNode instanceof jqLite&&(domNode=domNode[0]):domNode=$document[0].body,domNode.offsetWidth+1}}]},APPLICATION_JSON="application/json",CONTENT_TYPE_APPLICATION_JSON={"Content-Type":APPLICATION_JSON+";charset=utf-8"},JSON_START=/^\[|^\{(?!\{)/,JSON_ENDS={"[":/]$/,"{":/}$/},JSON_PROTECTION_PREFIX=/^\)]\}',?\n/,$httpMinErr=minErr("$http"),$interpolateMinErr=angular.$interpolateMinErr=minErr("$interpolate");$interpolateMinErr.throwNoconcat=function(text){throw $interpolateMinErr("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",text)},$interpolateMinErr.interr=function(text,err){return $interpolateMinErr("interr","Can't interpolate: {0}\n{1}",text,err.toString())};var $jsonpCallbacksProvider=function(){this.$get=function(){function createCallback(callbackId){var callback=function(data){callback.data=data,callback.called=!0};return callback.id=callbackId,callback}var callbacks=angular.callbacks,callbackMap={};return{createCallback:function(url){var callbackId="_"+(callbacks.$$counter++).toString(36),callbackPath="angular.callbacks."+callbackId,callback=createCallback(callbackId);return callbackMap[callbackPath]=callbacks[callbackId]=callback,callbackPath},wasCalled:function(callbackPath){return callbackMap[callbackPath].called},getResponse:function(callbackPath){return callbackMap[callbackPath].data},removeCallback:function(callbackPath){var callback=callbackMap[callbackPath];delete callbacks[callback.id],delete callbackMap[callbackPath]}}}},PATH_MATCH=/^([^?#]*)(\?([^#]*))?(#(.*))?$/,DEFAULT_PORTS={http:80,https:443,ftp:21},$locationMinErr=minErr("$location"),DOUBLE_SLASH_REGEX=/^\s*[\\/]{2,}/,locationPrototype={$$absUrl:"",$$html5:!1,$$replace:!1,absUrl:locationGetter("$$absUrl"),url:function(url){if(isUndefined(url))return this.$$url
;var match=PATH_MATCH.exec(url);return(match[1]||""===url)&&this.path(decodeURIComponent(match[1])),(match[2]||match[1]||""===url)&&this.search(match[3]||""),this.hash(match[5]||""),this},protocol:locationGetter("$$protocol"),host:locationGetter("$$host"),port:locationGetter("$$port"),path:locationGetterSetter("$$path",function(path){return path=null!==path?path.toString():"","/"===path.charAt(0)?path:"/"+path}),search:function(search,paramValue){switch(arguments.length){case 0:return this.$$search;case 1:if(isString(search)||isNumber(search))search=search.toString(),this.$$search=parseKeyValue(search);else{if(!isObject(search))throw $locationMinErr("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");search=copy(search,{}),forEach(search,function(value,key){null==value&&delete search[key]}),this.$$search=search}break;default:isUndefined(paramValue)||null===paramValue?delete this.$$search[search]:this.$$search[search]=paramValue}return this.$$compose(),this},hash:locationGetterSetter("$$hash",function(hash){return null!==hash?hash.toString():""}),replace:function(){return this.$$replace=!0,this}};forEach([LocationHashbangInHtml5Url,LocationHashbangUrl,LocationHtml5Url],function(Location){Location.prototype=Object.create(locationPrototype),Location.prototype.state=function(state){if(!arguments.length)return this.$$state;if(Location!==LocationHtml5Url||!this.$$html5)throw $locationMinErr("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=isUndefined(state)?null:state,this.$$urlUpdatedByLocation=!0,this}});var $parseMinErr=minErr("$parse"),objectValueOf={}.constructor.prototype.valueOf,OPERATORS=createMap();forEach("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(operator){OPERATORS[operator]=!0});var ESCAPE={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},Lexer=function(options){this.options=options};Lexer.prototype={constructor:Lexer,lex:function(text){for(this.text=text,this.index=0,this.tokens=[];this.index<this.text.length;){var ch=this.text.charAt(this.index);if('"'===ch||"'"===ch)this.readString(ch);else if(this.isNumber(ch)||"."===ch&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(ch,"(){}[].,;:?"))this.tokens.push({index:this.index,text:ch}),this.index++;else if(this.isWhitespace(ch))this.index++;else{var ch2=ch+this.peek(),ch3=ch2+this.peek(2),op1=OPERATORS[ch],op2=OPERATORS[ch2],op3=OPERATORS[ch3];if(op1||op2||op3){var token=op3?ch3:op2?ch2:ch;this.tokens.push({index:this.index,text:token,operator:!0}),this.index+=token.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(ch,chars){return-1!==chars.indexOf(ch)},peek:function(i){var num=i||1;return this.index+num<this.text.length&&this.text.charAt(this.index+num)},isNumber:function(ch){return"0"<=ch&&ch<="9"&&"string"==typeof ch},isWhitespace:function(ch){return" "===ch||"\r"===ch||"\t"===ch||"\n"===ch||"\v"===ch||" "===ch},isIdentifierStart:function(ch){return this.options.isIdentifierStart?this.options.isIdentifierStart(ch,this.codePointAt(ch)):this.isValidIdentifierStart(ch)},isValidIdentifierStart:function(ch){return"a"<=ch&&ch<="z"||"A"<=ch&&ch<="Z"||"_"===ch||"$"===ch},isIdentifierContinue:function(ch){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(ch,this.codePointAt(ch)):this.isValidIdentifierContinue(ch)},isValidIdentifierContinue:function(ch,cp){return this.isValidIdentifierStart(ch,cp)||this.isNumber(ch)},codePointAt:function(ch){return 1===ch.length?ch.charCodeAt(0):(ch.charCodeAt(0)<<10)+ch.charCodeAt(1)-56613888},peekMultichar:function(){var ch=this.text.charAt(this.index),peek=this.peek();if(!peek)return ch;var cp1=ch.charCodeAt(0),cp2=peek.charCodeAt(0);return cp1>=55296&&cp1<=56319&&cp2>=56320&&cp2<=57343?ch+peek:ch},isExpOperator:function(ch){return"-"===ch||"+"===ch||this.isNumber(ch)},throwError:function(error,start,end){end=end||this.index;var colStr=isDefined(start)?"s "+start+"-"+this.index+" ["+this.text.substring(start,end)+"]":" "+end;throw $parseMinErr("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",error,colStr,this.text)},readNumber:function(){for(var number="",start=this.index;this.index<this.text.length;){var ch=lowercase(this.text.charAt(this.index));if("."===ch||this.isNumber(ch))number+=ch;else{var peekCh=this.peek();if("e"===ch&&this.isExpOperator(peekCh))number+=ch;else if(this.isExpOperator(ch)&&peekCh&&this.isNumber(peekCh)&&"e"===number.charAt(number.length-1))number+=ch;else{if(!this.isExpOperator(ch)||peekCh&&this.isNumber(peekCh)||"e"!==number.charAt(number.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:start,text:number,constant:!0,value:Number(number)})},readIdent:function(){var start=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var ch=this.peekMultichar();if(!this.isIdentifierContinue(ch))break;this.index+=ch.length}this.tokens.push({index:start,text:this.text.slice(start,this.index),identifier:!0})},readString:function(quote){var start=this.index;this.index++;for(var string="",rawString=quote,escape=!1;this.index<this.text.length;){var ch=this.text.charAt(this.index);if(rawString+=ch,escape){if("u"===ch){var hex=this.text.substring(this.index+1,this.index+5);hex.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+hex+"]"),this.index+=4,string+=String.fromCharCode(parseInt(hex,16))}else{string+=ESCAPE[ch]||ch}escape=!1}else if("\\"===ch)escape=!0;else{if(ch===quote)return this.index++,void this.tokens.push({index:start,text:rawString,constant:!0,value:string});string+=ch}this.index++}this.throwError("Unterminated quote",start)}};var AST=function(lexer,options){this.lexer=lexer,this.options=options};AST.Program="Program",AST.ExpressionStatement="ExpressionStatement",AST.AssignmentExpression="AssignmentExpression",AST.ConditionalExpression="ConditionalExpression",AST.LogicalExpression="LogicalExpression",AST.BinaryExpression="BinaryExpression",AST.UnaryExpression="UnaryExpression",AST.CallExpression="CallExpression",AST.MemberExpression="MemberExpression",AST.Identifier="Identifier",AST.Literal="Literal",AST.ArrayExpression="ArrayExpression",AST.Property="Property",AST.ObjectExpression="ObjectExpression",AST.ThisExpression="ThisExpression",AST.LocalsExpression="LocalsExpression",AST.NGValueParameter="NGValueParameter",AST.prototype={ast:function(text){this.text=text,this.tokens=this.lexer.lex(text);var value=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),value},program:function(){for(var body=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&body.push(this.expressionStatement()),!this.expect(";"))return{type:AST.Program,body:body}},expressionStatement:function(){return{type:AST.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var left=this.expression();this.expect("|");)left=this.filter(left);return left},expression:function(){return this.assignment()},assignment:function(){var result=this.ternary();if(this.expect("=")){if(!isAssignable(result))throw $parseMinErr("lval","Trying to assign a value to a non l-value");result={type:AST.AssignmentExpression,left:result,right:this.assignment(),operator:"="}}return result},ternary:function(){var alternate,consequent,test=this.logicalOR();return this.expect("?")&&(alternate=this.expression(),this.consume(":"))?(consequent=this.expression(),{type:AST.ConditionalExpression,test:test,alternate:alternate,consequent:consequent}):test},logicalOR:function(){for(var left=this.logicalAND();this.expect("||");)left={type:AST.LogicalExpression,operator:"||",left:left,right:this.logicalAND()};return left},logicalAND:function(){for(var left=this.equality();this.expect("&&");)left={type:AST.LogicalExpression,operator:"&&",left:left,right:this.equality()};return left},equality:function(){for(var token,left=this.relational();token=this.expect("==","!=","===","!==");)left={type:AST.BinaryExpression,operator:token.text,left:left,right:this.relational()};return left},relational:function(){for(var token,left=this.additive();token=this.expect("<",">","<=",">=");)left={type:AST.BinaryExpression,operator:token.text,left:left,right:this.additive()};return left},additive:function(){for(var token,left=this.multiplicative();token=this.expect("+","-");)left={type:AST.BinaryExpression,operator:token.text,left:left,right:this.multiplicative()};return left},multiplicative:function(){for(var token,left=this.unary();token=this.expect("*","/","%");)left={type:AST.BinaryExpression,operator:token.text,left:left,right:this.unary()};return left},unary:function(){var token;return(token=this.expect("+","-","!"))?{type:AST.UnaryExpression,operator:token.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var primary;this.expect("(")?(primary=this.filterChain(),this.consume(")")):this.expect("[")?primary=this.arrayDeclaration():this.expect("{")?primary=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?primary=copy(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?primary={type:AST.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?primary=this.identifier():this.peek().constant?primary=this.constant():this.throwError("not a primary expression",this.peek());for(var next;next=this.expect("(","[",".");)"("===next.text?(primary={type:AST.CallExpression,callee:primary,arguments:this.parseArguments()},this.consume(")")):"["===next.text?(primary={type:AST.MemberExpression,object:primary,property:this.expression(),computed:!0},this.consume("]")):"."===next.text?primary={type:AST.MemberExpression,object:primary,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return primary},filter:function(baseExpression){for(var args=[baseExpression],result={type:AST.CallExpression,callee:this.identifier(),arguments:args,filter:!0};this.expect(":");)args.push(this.expression());return result},parseArguments:function(){var args=[];if(")"!==this.peekToken().text)do{args.push(this.filterChain())}while(this.expect(","));return args},identifier:function(){var token=this.consume();return token.identifier||this.throwError("is not a valid identifier",token),{type:AST.Identifier,name:token.text}},constant:function(){return{type:AST.Literal,value:this.consume().value}},arrayDeclaration:function(){var elements=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;elements.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:AST.ArrayExpression,elements:elements}},object:function(){var property,properties=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;property={type:AST.Property,kind:"init"},this.peek().constant?(property.key=this.constant(),property.computed=!1,this.consume(":"),property.value=this.expression()):this.peek().identifier?(property.key=this.identifier(),property.computed=!1,this.peek(":")?(this.consume(":"),property.value=this.expression()):property.value=property.key):this.peek("[")?(this.consume("["),property.key=this.expression(),this.consume("]"),property.computed=!0,this.consume(":"),property.value=this.expression()):this.throwError("invalid key",this.peek()),properties.push(property)}while(this.expect(","));return this.consume("}"),{type:AST.ObjectExpression,properties:properties}},throwError:function(msg,token){throw $parseMinErr("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",token.text,msg,token.index+1,this.text,this.text.substring(token.index))},consume:function(e1){if(0===this.tokens.length)throw $parseMinErr("ueoe","Unexpected end of expression: {0}",this.text);var token=this.expect(e1);return token||this.throwError("is unexpected, expecting ["+e1+"]",this.peek()),token},peekToken:function(){if(0===this.tokens.length)throw $parseMinErr("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(e1,e2,e3,e4){return this.peekAhead(0,e1,e2,e3,e4)},peekAhead:function(i,e1,e2,e3,e4){if(this.tokens.length>i){var token=this.tokens[i],t=token.text;if(t===e1||t===e2||t===e3||t===e4||!e1&&!e2&&!e3&&!e4)return token}return!1},expect:function(e1,e2,e3,e4){var token=this.peek(e1,e2,e3,e4);return!!token&&(this.tokens.shift(),token)},selfReferential:{this:{type:AST.ThisExpression},$locals:{type:AST.LocalsExpression}}},ASTCompiler.prototype={compile:function(ast){var self=this;this.state={nextId:0,filters:{},fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},findConstantAndWatchExpressions(ast,self.$filter);var assignable,extra="";if(this.stage="assign",assignable=assignableAST(ast)){this.state.computing="assign";var result=this.nextId();this.recurse(assignable,result),this.return_(result),extra="fn.assign="+this.generateFunction("assign","s,v,l")}var toWatch=getInputs(ast.body);self.stage="inputs",forEach(toWatch,function(watch,key){var fnKey="fn"+key;self.state[fnKey]={vars:[],body:[],own:{}},self.state.computing=fnKey;var intoId=self.nextId();self.recurse(watch,intoId),self.return_(intoId),self.state.inputs.push(fnKey),watch.watchId=key}),this.state.computing="fn",this.stage="main",this.recurse(ast);var fnString='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+extra+this.watchFns()+"return fn;",fn=new Function("$filter","getStringValue","ifDefined","plus",fnString)(this.$filter,getStringValue,ifDefined,plusFn);return this.state=this.stage=void 0,fn},USE:"use",STRICT:"strict",watchFns:function(){var result=[],fns=this.state.inputs,self=this;return forEach(fns,function(name){result.push("var "+name+"="+self.generateFunction(name,"s"))}),fns.length&&result.push("fn.inputs=["+fns.join(",")+"];"),result.join("")},generateFunction:function(name,params){return"function("+params+"){"+this.varsPrefix(name)+this.body(name)+"};"},filterPrefix:function(){var parts=[],self=this;return forEach(this.state.filters,function(id,filter){parts.push(id+"=$filter("+self.escape(filter)+")")}),parts.length?"var "+parts.join(",")+";":""},varsPrefix:function(section){return this.state[section].vars.length?"var "+this.state[section].vars.join(",")+";":""},body:function(section){return this.state[section].body.join("")},recurse:function(ast,intoId,nameId,recursionFn,create,skipWatchIdCheck){var left,right,args,expression,computed,self=this;if(recursionFn=recursionFn||noop,!skipWatchIdCheck&&isDefined(ast.watchId))return intoId=intoId||this.nextId(),void this.if_("i",this.lazyAssign(intoId,this.computedMember("i",ast.watchId)),this.lazyRecurse(ast,intoId,nameId,recursionFn,create,!0));switch(ast.type){case AST.Program:forEach(ast.body,function(expression,pos){self.recurse(expression.expression,void 0,void 0,function(expr){right=expr}),pos!==ast.body.length-1?self.current().body.push(right,";"):self.return_(right)});break;case AST.Literal:expression=this.escape(ast.value),this.assign(intoId,expression),recursionFn(intoId||expression);break;case AST.UnaryExpression:this.recurse(ast.argument,void 0,void 0,function(expr){right=expr}),expression=ast.operator+"("+this.ifDefined(right,0)+")",this.assign(intoId,expression),recursionFn(expression);break;case AST.BinaryExpression:this.recurse(ast.left,void 0,void 0,function(expr){left=expr}),this.recurse(ast.right,void 0,void 0,function(expr){right=expr}),expression="+"===ast.operator?this.plus(left,right):"-"===ast.operator?this.ifDefined(left,0)+ast.operator+this.ifDefined(right,0):"("+left+")"+ast.operator+"("+right+")",this.assign(intoId,expression),recursionFn(expression);break;case AST.LogicalExpression:intoId=intoId||this.nextId(),self.recurse(ast.left,intoId),self.if_("&&"===ast.operator?intoId:self.not(intoId),self.lazyRecurse(ast.right,intoId)),recursionFn(intoId);break;case AST.ConditionalExpression:intoId=intoId||this.nextId(),self.recurse(ast.test,intoId),self.if_(intoId,self.lazyRecurse(ast.alternate,intoId),self.lazyRecurse(ast.consequent,intoId)),recursionFn(intoId);break;case AST.Identifier:intoId=intoId||this.nextId(),nameId&&(nameId.context="inputs"===self.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",ast.name)+"?l:s"),nameId.computed=!1,nameId.name=ast.name),self.if_("inputs"===self.stage||self.not(self.getHasOwnProperty("l",ast.name)),function(){self.if_("inputs"===self.stage||"s",function(){create&&1!==create&&self.if_(self.isNull(self.nonComputedMember("s",ast.name)),self.lazyAssign(self.nonComputedMember("s",ast.name),"{}")),self.assign(intoId,self.nonComputedMember("s",ast.name))})},intoId&&self.lazyAssign(intoId,self.nonComputedMember("l",ast.name))),recursionFn(intoId);break;case AST.MemberExpression:left=nameId&&(nameId.context=this.nextId())||this.nextId(),intoId=intoId||this.nextId(),self.recurse(ast.object,left,void 0,function(){self.if_(self.notNull(left),function(){ast.computed?(right=self.nextId(),self.recurse(ast.property,right),self.getStringValue(right),create&&1!==create&&self.if_(self.not(self.computedMember(left,right)),self.lazyAssign(self.computedMember(left,right),"{}")),expression=self.computedMember(left,right),self.assign(intoId,expression),nameId&&(nameId.computed=!0,nameId.name=right)):(create&&1!==create&&self.if_(self.isNull(self.nonComputedMember(left,ast.property.name)),self.lazyAssign(self.nonComputedMember(left,ast.property.name),"{}")),expression=self.nonComputedMember(left,ast.property.name),self.assign(intoId,expression),nameId&&(nameId.computed=!1,nameId.name=ast.property.name))},function(){self.assign(intoId,"undefined")}),recursionFn(intoId)},!!create);break;case AST.CallExpression:intoId=intoId||this.nextId(),ast.filter?(right=self.filter(ast.callee.name),args=[],forEach(ast.arguments,function(expr){var argument=self.nextId();self.recurse(expr,argument),args.push(argument)}),expression=right+"("+args.join(",")+")",self.assign(intoId,expression),recursionFn(intoId)):(right=self.nextId(),left={},args=[],self.recurse(ast.callee,right,left,function(){self.if_(self.notNull(right),function(){forEach(ast.arguments,function(expr){self.recurse(expr,ast.constant?void 0:self.nextId(),void 0,function(argument){args.push(argument)})}),expression=left.name?self.member(left.context,left.name,left.computed)+"("+args.join(",")+")":right+"("+args.join(",")+")",self.assign(intoId,expression)},function(){self.assign(intoId,"undefined")}),recursionFn(intoId)}));break;case AST.AssignmentExpression:right=this.nextId(),left={},this.recurse(ast.left,void 0,left,function(){self.if_(self.notNull(left.context),function(){self.recurse(ast.right,right),expression=self.member(left.context,left.name,left.computed)+ast.operator+right,self.assign(intoId,expression),recursionFn(intoId||expression)})},1);break;case AST.ArrayExpression:args=[],forEach(ast.elements,function(expr){self.recurse(expr,ast.constant?void 0:self.nextId(),void 0,function(argument){args.push(argument)})}),expression="["+args.join(",")+"]",this.assign(intoId,expression),recursionFn(intoId||expression);break;case AST.ObjectExpression:args=[],computed=!1,forEach(ast.properties,function(property){property.computed&&(computed=!0)}),computed?(intoId=intoId||this.nextId(),this.assign(intoId,"{}"),forEach(ast.properties,function(property){property.computed?(left=self.nextId(),self.recurse(property.key,left)):left=property.key.type===AST.Identifier?property.key.name:""+property.key.value,right=self.nextId(),self.recurse(property.value,right),self.assign(self.member(intoId,left,property.computed),right)})):(forEach(ast.properties,function(property){self.recurse(property.value,ast.constant?void 0:self.nextId(),void 0,function(expr){args.push(self.escape(property.key.type===AST.Identifier?property.key.name:""+property.key.value)+":"+expr)})}),expression="{"+args.join(",")+"}",this.assign(intoId,expression)),recursionFn(intoId||expression);break;case AST.ThisExpression:this.assign(intoId,"s"),recursionFn(intoId||"s");break;case AST.LocalsExpression:this.assign(intoId,"l"),recursionFn(intoId||"l");break;case AST.NGValueParameter:this.assign(intoId,"v"),recursionFn(intoId||"v")}},getHasOwnProperty:function(element,property){var key=element+"."+property,own=this.current().own;return own.hasOwnProperty(key)||(own[key]=this.nextId(!1,element+"&&("+this.escape(property)+" in "+element+")")),own[key]},assign:function(id,value){if(id)return this.current().body.push(id,"=",value,";"),id},filter:function(filterName){return this.state.filters.hasOwnProperty(filterName)||(this.state.filters[filterName]=this.nextId(!0)),this.state.filters[filterName]},ifDefined:function(id,defaultValue){return"ifDefined("+id+","+this.escape(defaultValue)+")"},plus:function(left,right){return"plus("+left+","+right+")"},return_:function(id){this.current().body.push("return ",id,";")},if_:function(test,alternate,consequent){if(!0===test)alternate();else{var body=this.current().body;body.push("if(",test,"){"),alternate(),body.push("}"),consequent&&(body.push("else{"),consequent(),body.push("}"))}},not:function(expression){return"!("+expression+")"},isNull:function(expression){return expression+"==null"},notNull:function(expression){return expression+"!=null"},nonComputedMember:function(left,right){var SAFE_IDENTIFIER=/^[$_a-zA-Z][$_a-zA-Z0-9]*$/;return SAFE_IDENTIFIER.test(right)?left+"."+right:left+'["'+right.replace(/[^$_a-zA-Z0-9]/g,this.stringEscapeFn)+'"]'},computedMember:function(left,right){return left+"["+right+"]"},member:function(left,right,computed){return computed?this.computedMember(left,right):this.nonComputedMember(left,right)},getStringValue:function(item){this.assign(item,"getStringValue("+item+")")},lazyRecurse:function(ast,intoId,nameId,recursionFn,create,skipWatchIdCheck){var self=this;return function(){self.recurse(ast,intoId,nameId,recursionFn,create,skipWatchIdCheck)}},lazyAssign:function(id,value){var self=this;return function(){self.assign(id,value)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(c){return"\\u"+("0000"+c.charCodeAt(0).toString(16)).slice(-4)},escape:function(value){if(isString(value))return"'"+value.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(isNumber(value))return value.toString();if(!0===value)return"true";if(!1===value)return"false";if(null===value)return"null";if(void 0===value)return"undefined";throw $parseMinErr("esc","IMPOSSIBLE")},nextId:function(skip,init){var id="v"+this.state.nextId++;return skip||this.current().vars.push(id+(init?"="+init:"")),id},current:function(){return this.state[this.state.computing]}},ASTInterpreter.prototype={compile:function(ast){var self=this;findConstantAndWatchExpressions(ast,self.$filter);var assignable,assign;(assignable=assignableAST(ast))&&(assign=this.recurse(assignable));var inputs,toWatch=getInputs(ast.body);toWatch&&(inputs=[],forEach(toWatch,function(watch,key){var input=self.recurse(watch);watch.input=input,inputs.push(input),watch.watchId=key}));var expressions=[];forEach(ast.body,function(expression){expressions.push(self.recurse(expression.expression))});var fn=0===ast.body.length?noop:1===ast.body.length?expressions[0]:function(scope,locals){var lastValue;return forEach(expressions,function(exp){lastValue=exp(scope,locals)}),lastValue};return assign&&(fn.assign=function(scope,value,locals){return assign(scope,locals,value)}),inputs&&(fn.inputs=inputs),fn},recurse:function(ast,context,create){var left,right,args,self=this;if(ast.input)return this.inputs(ast.input,ast.watchId);switch(ast.type){case AST.Literal:return this.value(ast.value,context);case AST.UnaryExpression:return right=this.recurse(ast.argument),this["unary"+ast.operator](right,context);case AST.BinaryExpression:case AST.LogicalExpression:return left=this.recurse(ast.left),right=this.recurse(ast.right),this["binary"+ast.operator](left,right,context);case AST.ConditionalExpression:return this["ternary?:"](this.recurse(ast.test),this.recurse(ast.alternate),this.recurse(ast.consequent),context);case AST.Identifier:return self.identifier(ast.name,context,create);case AST.MemberExpression:return left=this.recurse(ast.object,!1,!!create),ast.computed||(right=ast.property.name),ast.computed&&(right=this.recurse(ast.property)),ast.computed?this.computedMember(left,right,context,create):this.nonComputedMember(left,right,context,create);case AST.CallExpression:return args=[],forEach(ast.arguments,function(expr){args.push(self.recurse(expr))}),ast.filter&&(right=this.$filter(ast.callee.name)),ast.filter||(right=this.recurse(ast.callee,!0)),ast.filter?function(scope,locals,assign,inputs){for(var values=[],i=0;i<args.length;++i)values.push(args[i](scope,locals,assign,inputs));var value=right.apply(void 0,values,inputs);return context?{context:void 0,name:void 0,value:value}:value}:function(scope,locals,assign,inputs){var value,rhs=right(scope,locals,assign,inputs);if(null!=rhs.value){for(var values=[],i=0;i<args.length;++i)values.push(args[i](scope,locals,assign,inputs));value=rhs.value.apply(rhs.context,values)}return context?{value:value}:value};case AST.AssignmentExpression:return left=this.recurse(ast.left,!0,1),right=this.recurse(ast.right),function(scope,locals,assign,inputs){var lhs=left(scope,locals,assign,inputs),rhs=right(scope,locals,assign,inputs);return lhs.context[lhs.name]=rhs,context?{value:rhs}:rhs};case AST.ArrayExpression:return args=[],forEach(ast.elements,function(expr){args.push(self.recurse(expr))}),function(scope,locals,assign,inputs){for(var value=[],i=0;i<args.length;++i)value.push(args[i](scope,locals,assign,inputs));return context?{value:value}:value};case AST.ObjectExpression:return args=[],forEach(ast.properties,function(property){property.computed?args.push({key:self.recurse(property.key),computed:!0,value:self.recurse(property.value)}):args.push({key:property.key.type===AST.Identifier?property.key.name:""+property.key.value,computed:!1,value:self.recurse(property.value)})}),function(scope,locals,assign,inputs){for(var value={},i=0;i<args.length;++i)args[i].computed?value[args[i].key(scope,locals,assign,inputs)]=args[i].value(scope,locals,assign,inputs):value[args[i].key]=args[i].value(scope,locals,assign,inputs);return context?{value:value}:value};case AST.ThisExpression:return function(scope){return context?{value:scope}:scope};case AST.LocalsExpression:return function(scope,locals){return context?{value:locals}:locals};case AST.NGValueParameter:return function(scope,locals,assign){return context?{value:assign}:assign}}},"unary+":function(argument,context){return function(scope,locals,assign,inputs){var arg=argument(scope,locals,assign,inputs);return arg=isDefined(arg)?+arg:0,context?{value:arg}:arg}},"unary-":function(argument,context){return function(scope,locals,assign,inputs){var arg=argument(scope,locals,assign,inputs);return arg=isDefined(arg)?-arg:-0,context?{value:arg}:arg}},"unary!":function(argument,context){return function(scope,locals,assign,inputs){var arg=!argument(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary+":function(left,right,context){return function(scope,locals,assign,inputs){var lhs=left(scope,locals,assign,inputs),rhs=right(scope,locals,assign,inputs),arg=plusFn(lhs,rhs);return context?{value:arg}:arg}},"binary-":function(left,right,context){return function(scope,locals,assign,inputs){var lhs=left(scope,locals,assign,inputs),rhs=right(scope,locals,assign,inputs),arg=(isDefined(lhs)?lhs:0)-(isDefined(rhs)?rhs:0);return context?{value:arg}:arg}},"binary*":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)*right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary/":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)/right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary%":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)%right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary===":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)===right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary!==":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)!==right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary==":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)==right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary!=":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)!=right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary<":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)<right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary>":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)>right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary<=":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)<=right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary>=":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)>=right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary&&":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)&&right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary||":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)||right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"ternary?:":function(test,alternate,consequent,context){return function(scope,locals,assign,inputs){var arg=test(scope,locals,assign,inputs)?alternate(scope,locals,assign,inputs):consequent(scope,locals,assign,inputs);return context?{value:arg}:arg}},value:function(value,context){return function(){return context?{context:void 0,name:void 0,value:value}:value}},identifier:function(name,context,create){return function(scope,locals,assign,inputs){var base=locals&&name in locals?locals:scope;create&&1!==create&&base&&null==base[name]&&(base[name]={});var value=base?base[name]:void 0;return context?{context:base,name:name,value:value}:value}},computedMember:function(left,right,context,create){return function(scope,locals,assign,inputs){var rhs,value,lhs=left(scope,locals,assign,inputs);return null!=lhs&&(rhs=right(scope,locals,assign,inputs),rhs=getStringValue(rhs),create&&1!==create&&lhs&&!lhs[rhs]&&(lhs[rhs]={}),value=lhs[rhs]),context?{context:lhs,name:rhs,value:value}:value}},nonComputedMember:function(left,right,context,create){return function(scope,locals,assign,inputs){var lhs=left(scope,locals,assign,inputs);create&&1!==create&&lhs&&null==lhs[right]&&(lhs[right]={});var value=null!=lhs?lhs[right]:void 0;return context?{context:lhs,name:right,value:value}:value}},inputs:function(input,watchId){return function(scope,value,locals,inputs){return inputs?inputs[watchId]:input(scope,value,locals)}}},Parser.prototype={constructor:Parser,parse:function(text){var ast=this.ast.ast(text),fn=this.astCompiler.compile(ast);return fn.literal=isLiteral(ast),fn.constant=isConstant(ast),fn}};var $sceMinErr=minErr("$sce"),SCE_CONTEXTS={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"
},UNDERSCORE_LOWERCASE_REGEXP=/_([a-z])/g,$templateRequestMinErr=minErr("$compile"),urlParsingNode=window.document.createElement("a"),originUrl=urlResolve(window.location.href);$$CookieReader.$inject=["$document"],$FilterProvider.$inject=["$provide"];var MAX_DIGITS=22,DECIMAL_SEP=".",ZERO_CHAR="0";currencyFilter.$inject=["$locale"],numberFilter.$inject=["$locale"];var DATE_FORMATS={yyyy:dateGetter("FullYear",4,0,!1,!0),yy:dateGetter("FullYear",2,0,!0,!0),y:dateGetter("FullYear",1,0,!1,!0),MMMM:dateStrGetter("Month"),MMM:dateStrGetter("Month",!0),MM:dateGetter("Month",2,1),M:dateGetter("Month",1,1),LLLL:dateStrGetter("Month",!1,!0),dd:dateGetter("Date",2),d:dateGetter("Date",1),HH:dateGetter("Hours",2),H:dateGetter("Hours",1),hh:dateGetter("Hours",2,-12),h:dateGetter("Hours",1,-12),mm:dateGetter("Minutes",2),m:dateGetter("Minutes",1),ss:dateGetter("Seconds",2),s:dateGetter("Seconds",1),sss:dateGetter("Milliseconds",3),EEEE:dateStrGetter("Day"),EEE:dateStrGetter("Day",!0),a:ampmGetter,Z:timeZoneGetter,ww:weekGetter(2),w:weekGetter(1),G:eraGetter,GG:eraGetter,GGG:eraGetter,GGGG:longEraGetter},DATE_FORMATS_SPLIT=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))([\s\S]*)/,NUMBER_STRING=/^-?\d+$/;dateFilter.$inject=["$locale"];var lowercaseFilter=valueFn(lowercase),uppercaseFilter=valueFn(uppercase);orderByFilter.$inject=["$parse"];var htmlAnchorDirective=valueFn({restrict:"E",compile:function(element,attr){if(!attr.href&&!attr.xlinkHref)return function(scope,element){if("a"===element[0].nodeName.toLowerCase()){var href="[object SVGAnimatedString]"===toString.call(element.prop("href"))?"xlink:href":"href";element.on("click",function(event){element.attr(href)||event.preventDefault()})}}}}),ngAttributeAliasDirectives={};forEach(BOOLEAN_ATTR,function(propName,attrName){function defaultLinkFn(scope,element,attr){scope.$watch(attr[normalized],function(value){attr.$set(attrName,!!value)})}if("multiple"!==propName){var normalized=directiveNormalize("ng-"+attrName),linkFn=defaultLinkFn;"checked"===propName&&(linkFn=function(scope,element,attr){attr.ngModel!==attr[normalized]&&defaultLinkFn(scope,element,attr)}),ngAttributeAliasDirectives[normalized]=function(){return{restrict:"A",priority:100,link:linkFn}}}}),forEach(ALIASED_ATTR,function(htmlAttr,ngAttr){ngAttributeAliasDirectives[ngAttr]=function(){return{priority:100,link:function(scope,element,attr){if("ngPattern"===ngAttr&&"/"===attr.ngPattern.charAt(0)){var match=attr.ngPattern.match(/^\/(.+)\/([a-z]*)$/);if(match)return void attr.$set("ngPattern",new RegExp(match[1],match[2]))}scope.$watch(attr[ngAttr],function(value){attr.$set(ngAttr,value)})}}}}),forEach(["src","srcset","href"],function(attrName){var normalized=directiveNormalize("ng-"+attrName);ngAttributeAliasDirectives[normalized]=function(){return{priority:99,link:function(scope,element,attr){var propName=attrName,name=attrName;"href"===attrName&&"[object SVGAnimatedString]"===toString.call(element.prop("href"))&&(name="xlinkHref",attr.$attr[name]="xlink:href",propName=null),attr.$observe(normalized,function(value){if(!value)return void("href"===attrName&&attr.$set(name,null));attr.$set(name,value),msie&&propName&&element.prop(propName,attr[name])})}}}});var nullFormCtrl={$addControl:noop,$$renameControl:nullFormRenameControl,$removeControl:noop,$setValidity:noop,$setDirty:noop,$setPristine:noop,$setSubmitted:noop},PENDING_CLASS="ng-pending";FormController.$inject=["$element","$attrs","$scope","$animate","$interpolate"],FormController.prototype={$rollbackViewValue:function(){forEach(this.$$controls,function(control){control.$rollbackViewValue()})},$commitViewValue:function(){forEach(this.$$controls,function(control){control.$commitViewValue()})},$addControl:function(control){assertNotHasOwnProperty(control.$name,"input"),this.$$controls.push(control),control.$name&&(this[control.$name]=control),control.$$parentForm=this},$$renameControl:function(control,newName){var oldName=control.$name;this[oldName]===control&&delete this[oldName],this[newName]=control,control.$name=newName},$removeControl:function(control){control.$name&&this[control.$name]===control&&delete this[control.$name],forEach(this.$pending,function(value,name){this.$setValidity(name,null,control)},this),forEach(this.$error,function(value,name){this.$setValidity(name,null,control)},this),forEach(this.$$success,function(value,name){this.$setValidity(name,null,control)},this),arrayRemove(this.$$controls,control),control.$$parentForm=nullFormCtrl},$setDirty:function(){this.$$animate.removeClass(this.$$element,PRISTINE_CLASS),this.$$animate.addClass(this.$$element,DIRTY_CLASS),this.$dirty=!0,this.$pristine=!1,this.$$parentForm.$setDirty()},$setPristine:function(){this.$$animate.setClass(this.$$element,PRISTINE_CLASS,DIRTY_CLASS+" ng-submitted"),this.$dirty=!1,this.$pristine=!0,this.$submitted=!1,forEach(this.$$controls,function(control){control.$setPristine()})},$setUntouched:function(){forEach(this.$$controls,function(control){control.$setUntouched()})},$setSubmitted:function(){this.$$animate.addClass(this.$$element,"ng-submitted"),this.$submitted=!0,this.$$parentForm.$setSubmitted()}},addSetValidityMethod({clazz:FormController,set:function(object,property,controller){var list=object[property];if(list){-1===list.indexOf(controller)&&list.push(controller)}else object[property]=[controller]},unset:function(object,property,controller){var list=object[property];list&&(arrayRemove(list,controller),0===list.length&&delete object[property])}});var formDirectiveFactory=function(isNgForm){return["$timeout","$parse",function($timeout,$parse){function getSetter(expression){return""===expression?$parse('this[""]').assign:$parse(expression).assign||noop}return{name:"form",restrict:isNgForm?"EAC":"E",require:["form","^^?form"],controller:FormController,compile:function(formElement,attr){formElement.addClass(PRISTINE_CLASS).addClass(VALID_CLASS);var nameAttr=attr.name?"name":!(!isNgForm||!attr.ngForm)&&"ngForm";return{pre:function(scope,formElement,attr,ctrls){var controller=ctrls[0];if(!("action"in attr)){var handleFormSubmission=function(event){scope.$apply(function(){controller.$commitViewValue(),controller.$setSubmitted()}),event.preventDefault()};formElement[0].addEventListener("submit",handleFormSubmission),formElement.on("$destroy",function(){$timeout(function(){formElement[0].removeEventListener("submit",handleFormSubmission)},0,!1)})}(ctrls[1]||controller.$$parentForm).$addControl(controller);var setter=nameAttr?getSetter(controller.$name):noop;nameAttr&&(setter(scope,controller),attr.$observe(nameAttr,function(newValue){controller.$name!==newValue&&(setter(scope,void 0),controller.$$parentForm.$$renameControl(controller,newValue),(setter=getSetter(controller.$name))(scope,controller))})),formElement.on("$destroy",function(){controller.$$parentForm.$removeControl(controller),setter(scope,void 0),extend(controller,nullFormCtrl)})}}}}}]},formDirective=formDirectiveFactory(),ngFormDirective=formDirectiveFactory(!0),ISO_DATE_REGEXP=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,URL_REGEXP=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:\/?#]+|\[[a-f\d:]+])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,EMAIL_REGEXP=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,NUMBER_REGEXP=/^\s*(-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,DATETIMELOCAL_REGEXP=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,WEEK_REGEXP=/^(\d{4,})-W(\d\d)$/,TIME_REGEXP=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,PARTIAL_VALIDATION_EVENTS="keydown wheel mousedown",PARTIAL_VALIDATION_TYPES=createMap();forEach("date,datetime-local,month,time,week".split(","),function(type){PARTIAL_VALIDATION_TYPES[type]=!0});var inputType={text:textInputType,date:createDateInputType("date",/^(\d{4,})-(\d{2})-(\d{2})$/,createDateParser(/^(\d{4,})-(\d{2})-(\d{2})$/,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":createDateInputType("datetimelocal",DATETIMELOCAL_REGEXP,createDateParser(DATETIMELOCAL_REGEXP,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:createDateInputType("time",TIME_REGEXP,createDateParser(TIME_REGEXP,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:createDateInputType("week",WEEK_REGEXP,weekParser,"yyyy-Www"),month:createDateInputType("month",/^(\d{4,})-(\d\d)$/,createDateParser(/^(\d{4,})-(\d\d)$/,["yyyy","MM"]),"yyyy-MM"),number:numberInputType,url:urlInputType,email:emailInputType,radio:radioInputType,range:rangeInputType,checkbox:checkboxInputType,hidden:noop,button:noop,submit:noop,reset:noop,file:noop},inputDirective=["$browser","$sniffer","$filter","$parse",function($browser,$sniffer,$filter,$parse){return{restrict:"E",require:["?ngModel"],link:{pre:function(scope,element,attr,ctrls){ctrls[0]&&(inputType[lowercase(attr.type)]||inputType.text)(scope,element,attr,ctrls[0],$sniffer,$browser,$filter,$parse)}}}}],CONSTANT_VALUE_REGEXP=/^(true|false|\d+)$/,ngValueDirective=function(){function updateElementValue(element,attr,value){var propValue=isDefined(value)?value:9===msie?"":null;element.prop("value",propValue),attr.$set("value",value)}return{restrict:"A",priority:100,compile:function(tpl,tplAttr){return CONSTANT_VALUE_REGEXP.test(tplAttr.ngValue)?function(scope,elm,attr){updateElementValue(elm,attr,scope.$eval(attr.ngValue))}:function(scope,elm,attr){scope.$watch(attr.ngValue,function(value){updateElementValue(elm,attr,value)})}}}},ngBindDirective=["$compile",function($compile){return{restrict:"AC",compile:function(templateElement){return $compile.$$addBindingClass(templateElement),function(scope,element,attr){$compile.$$addBindingInfo(element,attr.ngBind),element=element[0],scope.$watch(attr.ngBind,function(value){element.textContent=stringify(value)})}}}}],ngBindTemplateDirective=["$interpolate","$compile",function($interpolate,$compile){return{compile:function(templateElement){return $compile.$$addBindingClass(templateElement),function(scope,element,attr){var interpolateFn=$interpolate(element.attr(attr.$attr.ngBindTemplate));$compile.$$addBindingInfo(element,interpolateFn.expressions),element=element[0],attr.$observe("ngBindTemplate",function(value){element.textContent=isUndefined(value)?"":value})}}}}],ngBindHtmlDirective=["$sce","$parse","$compile",function($sce,$parse,$compile){return{restrict:"A",compile:function(tElement,tAttrs){var ngBindHtmlGetter=$parse(tAttrs.ngBindHtml),ngBindHtmlWatch=$parse(tAttrs.ngBindHtml,function(val){return $sce.valueOf(val)});return $compile.$$addBindingClass(tElement),function(scope,element,attr){$compile.$$addBindingInfo(element,attr.ngBindHtml),scope.$watch(ngBindHtmlWatch,function(){var value=ngBindHtmlGetter(scope);element.html($sce.getTrustedHtml(value)||"")})}}}}],ngChangeDirective=valueFn({restrict:"A",require:"ngModel",link:function(scope,element,attr,ctrl){ctrl.$viewChangeListeners.push(function(){scope.$eval(attr.ngChange)})}}),ngClassDirective=classDirective("",!0),ngClassOddDirective=classDirective("Odd",0),ngClassEvenDirective=classDirective("Even",1),ngCloakDirective=ngDirective({compile:function(element,attr){attr.$set("ngCloak",void 0),element.removeClass("ng-cloak")}}),ngControllerDirective=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],ngEventDirectives={},forceAsyncEvents={blur:!0,focus:!0};forEach("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(eventName){var directiveName=directiveNormalize("ng-"+eventName);ngEventDirectives[directiveName]=["$parse","$rootScope",function($parse,$rootScope){return{restrict:"A",compile:function($element,attr){var fn=$parse(attr[directiveName]);return function(scope,element){element.on(eventName,function(event){var callback=function(){fn(scope,{$event:event})};forceAsyncEvents[eventName]&&$rootScope.$$phase?scope.$evalAsync(callback):scope.$apply(callback)})}}}}]});var ngIfDirective=["$animate","$compile",function($animate,$compile){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function($scope,$element,$attr,ctrl,$transclude){var block,childScope,previousElements;$scope.$watch($attr.ngIf,function(value){value?childScope||$transclude(function(clone,newScope){childScope=newScope,clone[clone.length++]=$compile.$$createComment("end ngIf",$attr.ngIf),block={clone:clone},$animate.enter(clone,$element.parent(),$element)}):(previousElements&&(previousElements.remove(),previousElements=null),childScope&&(childScope.$destroy(),childScope=null),block&&(previousElements=getBlockNodes(block.clone),$animate.leave(previousElements).done(function(response){!1!==response&&(previousElements=null)}),block=null))})}}}],ngIncludeDirective=["$templateRequest","$anchorScroll","$animate",function($templateRequest,$anchorScroll,$animate){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:angular.noop,compile:function(element,attr){var srcExp=attr.ngInclude||attr.src,onloadExp=attr.onload||"",autoScrollExp=attr.autoscroll;return function(scope,$element,$attr,ctrl,$transclude){var currentScope,previousElement,currentElement,changeCounter=0,cleanupLastIncludeContent=function(){previousElement&&(previousElement.remove(),previousElement=null),currentScope&&(currentScope.$destroy(),currentScope=null),currentElement&&($animate.leave(currentElement).done(function(response){!1!==response&&(previousElement=null)}),previousElement=currentElement,currentElement=null)};scope.$watch(srcExp,function(src){var afterAnimation=function(response){!1===response||!isDefined(autoScrollExp)||autoScrollExp&&!scope.$eval(autoScrollExp)||$anchorScroll()},thisChangeId=++changeCounter;src?($templateRequest(src,!0).then(function(response){if(!scope.$$destroyed&&thisChangeId===changeCounter){var newScope=scope.$new();ctrl.template=response;var clone=$transclude(newScope,function(clone){cleanupLastIncludeContent(),$animate.enter(clone,null,$element).done(afterAnimation)});currentScope=newScope,currentElement=clone,currentScope.$emit("$includeContentLoaded",src),scope.$eval(onloadExp)}},function(){scope.$$destroyed||thisChangeId===changeCounter&&(cleanupLastIncludeContent(),scope.$emit("$includeContentError",src))}),scope.$emit("$includeContentRequested",src)):(cleanupLastIncludeContent(),ctrl.template=null)})}}}}],ngIncludeFillContentDirective=["$compile",function($compile){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(scope,$element,$attr,ctrl){if(toString.call($element[0]).match(/SVG/))return $element.empty(),void $compile(jqLiteBuildFragment(ctrl.template,window.document).childNodes)(scope,function(clone){$element.append(clone)},{futureParentElement:$element});$element.html(ctrl.template),$compile($element.contents())(scope)}}}],ngInitDirective=ngDirective({priority:450,compile:function(){return{pre:function(scope,element,attrs){scope.$eval(attrs.ngInit)}}}}),ngListDirective=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(scope,element,attr,ctrl){var ngList=attr.ngList||", ",trimValues="false"!==attr.ngTrim,separator=trimValues?trim(ngList):ngList,parse=function(viewValue){if(!isUndefined(viewValue)){var list=[];return viewValue&&forEach(viewValue.split(separator),function(value){value&&list.push(trimValues?trim(value):value)}),list}};ctrl.$parsers.push(parse),ctrl.$formatters.push(function(value){if(isArray(value))return value.join(ngList)}),ctrl.$isEmpty=function(value){return!value||!value.length}}}},VALID_CLASS="ng-valid",INVALID_CLASS="ng-invalid",PRISTINE_CLASS="ng-pristine",DIRTY_CLASS="ng-dirty",ngModelMinErr=minErr("ngModel");NgModelController.$inject=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$q","$interpolate"],NgModelController.prototype={$$initGetterSetters:function(){if(this.$options.getOption("getterSetter")){var invokeModelGetter=this.$$parse(this.$$attr.ngModel+"()"),invokeModelSetter=this.$$parse(this.$$attr.ngModel+"($$$p)");this.$$ngModelGet=function($scope){var modelValue=this.$$parsedNgModel($scope);return isFunction(modelValue)&&(modelValue=invokeModelGetter($scope)),modelValue},this.$$ngModelSet=function($scope,newValue){isFunction(this.$$parsedNgModel($scope))?invokeModelSetter($scope,{$$$p:newValue}):this.$$parsedNgModelAssign($scope,newValue)}}else if(!this.$$parsedNgModel.assign)throw ngModelMinErr("nonassign","Expression '{0}' is non-assignable. Element: {1}",this.$$attr.ngModel,startingTag(this.$$element))},$render:noop,$isEmpty:function(value){return isUndefined(value)||""===value||null===value||value!==value},$$updateEmptyClasses:function(value){this.$isEmpty(value)?(this.$$animate.removeClass(this.$$element,"ng-not-empty"),this.$$animate.addClass(this.$$element,"ng-empty")):(this.$$animate.removeClass(this.$$element,"ng-empty"),this.$$animate.addClass(this.$$element,"ng-not-empty"))},$setPristine:function(){this.$dirty=!1,this.$pristine=!0,this.$$animate.removeClass(this.$$element,DIRTY_CLASS),this.$$animate.addClass(this.$$element,PRISTINE_CLASS)},$setDirty:function(){this.$dirty=!0,this.$pristine=!1,this.$$animate.removeClass(this.$$element,PRISTINE_CLASS),this.$$animate.addClass(this.$$element,DIRTY_CLASS),this.$$parentForm.$setDirty()},$setUntouched:function(){this.$touched=!1,this.$untouched=!0,this.$$animate.setClass(this.$$element,"ng-untouched","ng-touched")},$setTouched:function(){this.$touched=!0,this.$untouched=!1,this.$$animate.setClass(this.$$element,"ng-touched","ng-untouched")},$rollbackViewValue:function(){this.$$timeout.cancel(this.$$pendingDebounce),this.$viewValue=this.$$lastCommittedViewValue,this.$render()},$validate:function(){if(!isNumberNaN(this.$modelValue)){var viewValue=this.$$lastCommittedViewValue,modelValue=this.$$rawModelValue,prevValid=this.$valid,prevModelValue=this.$modelValue,allowInvalid=this.$options.getOption("allowInvalid"),that=this;this.$$runValidators(modelValue,viewValue,function(allValid){allowInvalid||prevValid===allValid||(that.$modelValue=allValid?modelValue:void 0,that.$modelValue!==prevModelValue&&that.$$writeModelToScope())})}},$$runValidators:function(modelValue,viewValue,doneCallback){function setValidity(name,isValid){localValidationRunId===that.$$currentValidationRunId&&that.$setValidity(name,isValid)}function validationDone(allValid){localValidationRunId===that.$$currentValidationRunId&&doneCallback(allValid)}this.$$currentValidationRunId++;var localValidationRunId=this.$$currentValidationRunId,that=this;return function(){var errorKey=that.$$parserName||"parse";return isUndefined(that.$$parserValid)?(setValidity(errorKey,null),!0):(that.$$parserValid||(forEach(that.$validators,function(v,name){setValidity(name,null)}),forEach(that.$asyncValidators,function(v,name){setValidity(name,null)})),setValidity(errorKey,that.$$parserValid),that.$$parserValid)}()&&function(){var syncValidatorsValid=!0;return forEach(that.$validators,function(validator,name){var result=Boolean(validator(modelValue,viewValue));syncValidatorsValid=syncValidatorsValid&&result,setValidity(name,result)}),!!syncValidatorsValid||(forEach(that.$asyncValidators,function(v,name){setValidity(name,null)}),!1)}()?void function(){var validatorPromises=[],allValid=!0;forEach(that.$asyncValidators,function(validator,name){var promise=validator(modelValue,viewValue);if(!isPromiseLike(promise))throw ngModelMinErr("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",promise);setValidity(name,void 0),validatorPromises.push(promise.then(function(){setValidity(name,!0)},function(){allValid=!1,setValidity(name,!1)}))}),validatorPromises.length?that.$$q.all(validatorPromises).then(function(){validationDone(allValid)},noop):validationDone(!0)}():void validationDone(!1)},$commitViewValue:function(){var viewValue=this.$viewValue;this.$$timeout.cancel(this.$$pendingDebounce),(this.$$lastCommittedViewValue!==viewValue||""===viewValue&&this.$$hasNativeValidators)&&(this.$$updateEmptyClasses(viewValue),this.$$lastCommittedViewValue=viewValue,this.$pristine&&this.$setDirty(),this.$$parseAndValidate())},$$parseAndValidate:function(){function writeToModelIfNeeded(){that.$modelValue!==prevModelValue&&that.$$writeModelToScope()}var viewValue=this.$$lastCommittedViewValue,modelValue=viewValue,that=this;if(this.$$parserValid=!isUndefined(modelValue)||void 0,this.$$parserValid)for(var i=0;i<this.$parsers.length;i++)if(modelValue=this.$parsers[i](modelValue),isUndefined(modelValue)){this.$$parserValid=!1;break}isNumberNaN(this.$modelValue)&&(this.$modelValue=this.$$ngModelGet(this.$$scope));var prevModelValue=this.$modelValue,allowInvalid=this.$options.getOption("allowInvalid");this.$$rawModelValue=modelValue,allowInvalid&&(this.$modelValue=modelValue,writeToModelIfNeeded()),this.$$runValidators(modelValue,this.$$lastCommittedViewValue,function(allValid){allowInvalid||(that.$modelValue=allValid?modelValue:void 0,writeToModelIfNeeded())})},$$writeModelToScope:function(){this.$$ngModelSet(this.$$scope,this.$modelValue),forEach(this.$viewChangeListeners,function(listener){try{listener()}catch(e){this.$$exceptionHandler(e)}},this)},$setViewValue:function(value,trigger){this.$viewValue=value,this.$options.getOption("updateOnDefault")&&this.$$debounceViewValueCommit(trigger)},$$debounceViewValueCommit:function(trigger){var debounceDelay=this.$options.getOption("debounce");isNumber(debounceDelay[trigger])?debounceDelay=debounceDelay[trigger]:isNumber(debounceDelay.default)&&(debounceDelay=debounceDelay.default),this.$$timeout.cancel(this.$$pendingDebounce);var that=this;debounceDelay>0?this.$$pendingDebounce=this.$$timeout(function(){that.$commitViewValue()},debounceDelay):this.$$scope.$root.$$phase?this.$commitViewValue():this.$$scope.$apply(function(){that.$commitViewValue()})},$overrideModelOptions:function(options){this.$options=this.$options.createChild(options)}},addSetValidityMethod({clazz:NgModelController,set:function(object,property){object[property]=!0},unset:function(object,property){delete object[property]}});var defaultModelOptions,ngModelDirective=["$rootScope",function($rootScope){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:NgModelController,priority:1,compile:function(element){return element.addClass(PRISTINE_CLASS).addClass("ng-untouched").addClass(VALID_CLASS),{pre:function(scope,element,attr,ctrls){var modelCtrl=ctrls[0],formCtrl=ctrls[1]||modelCtrl.$$parentForm,optionsCtrl=ctrls[2];optionsCtrl&&(modelCtrl.$options=optionsCtrl.$options),modelCtrl.$$initGetterSetters(),formCtrl.$addControl(modelCtrl),attr.$observe("name",function(newValue){modelCtrl.$name!==newValue&&modelCtrl.$$parentForm.$$renameControl(modelCtrl,newValue)}),scope.$on("$destroy",function(){modelCtrl.$$parentForm.$removeControl(modelCtrl)})},post:function(scope,element,attr,ctrls){function setTouched(){modelCtrl.$setTouched()}var modelCtrl=ctrls[0];modelCtrl.$options.getOption("updateOn")&&element.on(modelCtrl.$options.getOption("updateOn"),function(ev){modelCtrl.$$debounceViewValueCommit(ev&&ev.type)}),element.on("blur",function(){modelCtrl.$touched||($rootScope.$$phase?scope.$evalAsync(setTouched):scope.$apply(setTouched))})}}}}}];ModelOptions.prototype={getOption:function(name){return this.$$options[name]},createChild:function(options){var inheritAll=!1;return options=extend({},options),forEach(options,function(option,key){"$inherit"===option?"*"===key?inheritAll=!0:(options[key]=this.$$options[key],"updateOn"===key&&(options.updateOnDefault=this.$$options.updateOnDefault)):"updateOn"===key&&(options.updateOnDefault=!1,options[key]=trim(option.replace(/(\s+|^)default(\s+|$)/,function(){return options.updateOnDefault=!0," "})))},this),inheritAll&&(delete options["*"],defaults(options,this.$$options)),defaults(options,defaultModelOptions.$$options),new ModelOptions(options)}},defaultModelOptions=new ModelOptions({updateOn:"",updateOnDefault:!0,debounce:0,getterSetter:!1,allowInvalid:!1,timezone:null});var ngModelOptionsDirective=function(){function NgModelOptionsController($attrs,$scope){this.$$attrs=$attrs,this.$$scope=$scope}return NgModelOptionsController.$inject=["$attrs","$scope"],NgModelOptionsController.prototype={$onInit:function(){var parentOptions=this.parentCtrl?this.parentCtrl.$options:defaultModelOptions,modelOptionsDefinition=this.$$scope.$eval(this.$$attrs.ngModelOptions);this.$options=parentOptions.createChild(modelOptionsDefinition)}},{restrict:"A",priority:10,require:{parentCtrl:"?^^ngModelOptions"},bindToController:!0,controller:NgModelOptionsController}},ngNonBindableDirective=ngDirective({terminal:!0,priority:1e3}),ngOptionsMinErr=minErr("ngOptions"),NG_OPTIONS_REGEXP=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([$\w][$\w]*)|(?:\(\s*([$\w][$\w]*)\s*,\s*([$\w][$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,ngOptionsDirective=["$compile","$document","$parse",function($compile,$document,$parse){function parseOptionsExpression(optionsExp,selectElement,scope){function Option(selectValue,viewValue,label,group,disabled){this.selectValue=selectValue,this.viewValue=viewValue,this.label=label,this.group=group,this.disabled=disabled}function getOptionValuesKeys(optionValues){var optionValuesKeys;if(!keyName&&isArrayLike(optionValues))optionValuesKeys=optionValues;else{optionValuesKeys=[];for(var itemKey in optionValues)optionValues.hasOwnProperty(itemKey)&&"$"!==itemKey.charAt(0)&&optionValuesKeys.push(itemKey)}return optionValuesKeys}var match=optionsExp.match(NG_OPTIONS_REGEXP);if(!match)throw ngOptionsMinErr("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",optionsExp,startingTag(selectElement));var valueName=match[5]||match[7],keyName=match[6],selectAs=/ as /.test(match[0])&&match[1],trackBy=match[9],valueFn=$parse(match[2]?match[1]:valueName),selectAsFn=selectAs&&$parse(selectAs),viewValueFn=selectAsFn||valueFn,trackByFn=trackBy&&$parse(trackBy),getTrackByValueFn=trackBy?function(value,locals){return trackByFn(scope,locals)}:function(value){return hashKey(value)},getTrackByValue=function(value,key){return getTrackByValueFn(value,getLocals(value,key))},displayFn=$parse(match[2]||match[1]),groupByFn=$parse(match[3]||""),disableWhenFn=$parse(match[4]||""),valuesFn=$parse(match[8]),locals={},getLocals=keyName?function(value,key){return locals[keyName]=key,locals[valueName]=value,locals}:function(value){return locals[valueName]=value,locals};return{trackBy:trackBy,getTrackByValue:getTrackByValue,getWatchables:$parse(valuesFn,function(optionValues){var watchedArray=[];optionValues=optionValues||[];for(var optionValuesKeys=getOptionValuesKeys(optionValues),optionValuesLength=optionValuesKeys.length,index=0;index<optionValuesLength;index++){var key=optionValues===optionValuesKeys?index:optionValuesKeys[index],value=optionValues[key],locals=getLocals(value,key),selectValue=getTrackByValueFn(value,locals);if(watchedArray.push(selectValue),match[2]||match[1]){var label=displayFn(scope,locals);watchedArray.push(label)}if(match[4]){var disableWhen=disableWhenFn(scope,locals);watchedArray.push(disableWhen)}}return watchedArray}),getOptions:function(){for(var optionItems=[],selectValueMap={},optionValues=valuesFn(scope)||[],optionValuesKeys=getOptionValuesKeys(optionValues),optionValuesLength=optionValuesKeys.length,index=0;index<optionValuesLength;index++){var key=optionValues===optionValuesKeys?index:optionValuesKeys[index],value=optionValues[key],locals=getLocals(value,key),viewValue=viewValueFn(scope,locals),selectValue=getTrackByValueFn(viewValue,locals),label=displayFn(scope,locals),group=groupByFn(scope,locals),disabled=disableWhenFn(scope,locals),optionItem=new Option(selectValue,viewValue,label,group,disabled);optionItems.push(optionItem),selectValueMap[selectValue]=optionItem}return{items:optionItems,selectValueMap:selectValueMap,getOptionFromViewValue:function(value){return selectValueMap[getTrackByValue(value)]},getViewValueFromOption:function(option){return trackBy?copy(option.viewValue):option.viewValue}}}}}function ngOptionsPostLink(scope,selectElement,attr,ctrls){function addOptionElement(option,parent){var optionElement=optionTemplate.cloneNode(!1);parent.appendChild(optionElement),updateOptionElement(option,optionElement)}function getAndUpdateSelectedOption(viewValue){var option=options.getOptionFromViewValue(viewValue),element=option&&option.element;return element&&!element.selected&&(element.selected=!0),option}function updateOptionElement(option,element){option.element=element,element.disabled=option.disabled,option.label!==element.label&&(element.label=option.label,element.textContent=option.label),element.value=option.selectValue}function updateOptions(){var previousValue=options&&selectCtrl.readValue();if(options)for(var i=options.items.length-1;i>=0;i--){var option=options.items[i];jqLiteRemove(isDefined(option.group)?option.element.parentNode:option.element)}options=ngOptions.getOptions();var groupElementMap={};if(providedEmptyOption&&selectElement.prepend(selectCtrl.emptyOption),options.items.forEach(function(option){var groupElement;isDefined(option.group)?(groupElement=groupElementMap[option.group],groupElement||(groupElement=optGroupTemplate.cloneNode(!1),listFragment.appendChild(groupElement),groupElement.label=null===option.group?"null":option.group,groupElementMap[option.group]=groupElement),addOptionElement(option,groupElement)):addOptionElement(option,listFragment)}),selectElement[0].appendChild(listFragment),ngModelCtrl.$render(),!ngModelCtrl.$isEmpty(previousValue)){var nextValue=selectCtrl.readValue();(ngOptions.trackBy||multiple?equals(previousValue,nextValue):previousValue===nextValue)||(ngModelCtrl.$setViewValue(nextValue),ngModelCtrl.$render())}}for(var selectCtrl=ctrls[0],ngModelCtrl=ctrls[1],multiple=attr.multiple,i=0,children=selectElement.children(),ii=children.length;i<ii;i++)if(""===children[i].value){selectCtrl.hasEmptyOption=!0,selectCtrl.emptyOption=children.eq(i);break}var providedEmptyOption=!!selectCtrl.emptyOption;jqLite(optionTemplate.cloneNode(!1)).val("?");var options,ngOptions=parseOptionsExpression(attr.ngOptions,selectElement,scope),listFragment=$document[0].createDocumentFragment();selectCtrl.generateUnknownOptionValue=function(val){return"?"},multiple?(selectCtrl.writeValue=function(values){var selectedOptions=values&&values.map(getAndUpdateSelectedOption)||[];options.items.forEach(function(option){option.element.selected&&!includes(selectedOptions,option)&&(option.element.selected=!1)})},selectCtrl.readValue=function(){var selectedValues=selectElement.val()||[],selections=[];return forEach(selectedValues,function(value){var option=options.selectValueMap[value];option&&!option.disabled&&selections.push(options.getViewValueFromOption(option))}),selections},ngOptions.trackBy&&scope.$watchCollection(function(){if(isArray(ngModelCtrl.$viewValue))return ngModelCtrl.$viewValue.map(function(value){return ngOptions.getTrackByValue(value)})},function(){ngModelCtrl.$render()})):(selectCtrl.writeValue=function(value){var selectedOption=options.selectValueMap[selectElement.val()],option=options.getOptionFromViewValue(value);selectedOption&&selectedOption.element.removeAttribute("selected"),option?(selectElement[0].value!==option.selectValue&&(selectCtrl.removeUnknownOption(),selectCtrl.unselectEmptyOption(),selectElement[0].value=option.selectValue,option.element.selected=!0),option.element.setAttribute("selected","selected")):providedEmptyOption?selectCtrl.selectEmptyOption():selectCtrl.unknownOption.parent().length?selectCtrl.updateUnknownOption(value):selectCtrl.renderUnknownOption(value)},selectCtrl.readValue=function(){
var selectedOption=options.selectValueMap[selectElement.val()];return selectedOption&&!selectedOption.disabled?(selectCtrl.unselectEmptyOption(),selectCtrl.removeUnknownOption(),options.getViewValueFromOption(selectedOption)):null},ngOptions.trackBy&&scope.$watch(function(){return ngOptions.getTrackByValue(ngModelCtrl.$viewValue)},function(){ngModelCtrl.$render()})),providedEmptyOption&&(selectCtrl.emptyOption.remove(),$compile(selectCtrl.emptyOption)(scope),selectCtrl.emptyOption[0].nodeType===NODE_TYPE_COMMENT?(selectCtrl.hasEmptyOption=!1,selectCtrl.registerOption=function(optionScope,optionEl){""===optionEl.val()&&(selectCtrl.hasEmptyOption=!0,selectCtrl.emptyOption=optionEl,selectCtrl.emptyOption.removeClass("ng-scope"),ngModelCtrl.$render(),optionEl.on("$destroy",function(){selectCtrl.hasEmptyOption=!1,selectCtrl.emptyOption=void 0}))}):selectCtrl.emptyOption.removeClass("ng-scope")),selectElement.empty(),updateOptions(),scope.$watchCollection(ngOptions.getWatchables,updateOptions)}var optionTemplate=window.document.createElement("option"),optGroupTemplate=window.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(scope,selectElement,attr,ctrls){ctrls[0].registerOption=noop},post:ngOptionsPostLink}}}],ngPluralizeDirective=["$locale","$interpolate","$log",function($locale,$interpolate,$log){var IS_WHEN=/^when(Minus)?(.+)$/;return{link:function(scope,element,attr){function updateElementText(newText){element.text(newText||"")}var lastCount,numberExp=attr.count,whenExp=attr.$attr.when&&element.attr(attr.$attr.when),offset=attr.offset||0,whens=scope.$eval(whenExp)||{},whensExpFns={},startSymbol=$interpolate.startSymbol(),endSymbol=$interpolate.endSymbol(),braceReplacement=startSymbol+numberExp+"-"+offset+endSymbol,watchRemover=angular.noop;forEach(attr,function(expression,attributeName){var tmpMatch=IS_WHEN.exec(attributeName);if(tmpMatch){var whenKey=(tmpMatch[1]?"-":"")+lowercase(tmpMatch[2]);whens[whenKey]=element.attr(attr.$attr[attributeName])}}),forEach(whens,function(expression,key){whensExpFns[key]=$interpolate(expression.replace(/{}/g,braceReplacement))}),scope.$watch(numberExp,function(newVal){var count=parseFloat(newVal),countIsNaN=isNumberNaN(count);if(countIsNaN||count in whens||(count=$locale.pluralCat(count-offset)),!(count===lastCount||countIsNaN&&isNumberNaN(lastCount))){watchRemover();var whenExpFn=whensExpFns[count];isUndefined(whenExpFn)?(null!=newVal&&$log.debug("ngPluralize: no rule defined for '"+count+"' in "+whenExp),watchRemover=noop,updateElementText()):watchRemover=scope.$watch(whenExpFn,updateElementText),lastCount=count}})}}}],ngRepeatDirective=["$parse","$animate","$compile",function($parse,$animate,$compile){var ngRepeatMinErr=minErr("ngRepeat"),updateScope=function(scope,index,valueIdentifier,value,keyIdentifier,key,arrayLength){scope[valueIdentifier]=value,keyIdentifier&&(scope[keyIdentifier]=key),scope.$index=index,scope.$first=0===index,scope.$last=index===arrayLength-1,scope.$middle=!(scope.$first||scope.$last),scope.$odd=!(scope.$even=0==(1&index))},getBlockStart=function(block){return block.clone[0]},getBlockEnd=function(block){return block.clone[block.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function($element,$attr){var expression=$attr.ngRepeat,ngRepeatEndComment=$compile.$$createComment("end ngRepeat",expression),match=expression.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!match)throw ngRepeatMinErr("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",expression);var lhs=match[1],rhs=match[2],aliasAs=match[3],trackByExp=match[4];if(!(match=lhs.match(/^(?:(\s*[$\w]+)|\(\s*([$\w]+)\s*,\s*([$\w]+)\s*\))$/)))throw ngRepeatMinErr("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",lhs);var valueIdentifier=match[3]||match[1],keyIdentifier=match[2];if(aliasAs&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(aliasAs)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(aliasAs)))throw ngRepeatMinErr("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",aliasAs);var trackByExpGetter,trackByIdExpFn,trackByIdArrayFn,trackByIdObjFn,hashFnLocals={$id:hashKey};return trackByExp?trackByExpGetter=$parse(trackByExp):(trackByIdArrayFn=function(key,value){return hashKey(value)},trackByIdObjFn=function(key){return key}),function($scope,$element,$attr,ctrl,$transclude){trackByExpGetter&&(trackByIdExpFn=function(key,value,index){return keyIdentifier&&(hashFnLocals[keyIdentifier]=key),hashFnLocals[valueIdentifier]=value,hashFnLocals.$index=index,trackByExpGetter($scope,hashFnLocals)});var lastBlockMap=createMap();$scope.$watchCollection(rhs,function(collection){var index,length,nextNode,collectionLength,key,value,trackById,trackByIdFn,collectionKeys,block,nextBlockOrder,elementsToRemove,previousNode=$element[0],nextBlockMap=createMap();if(aliasAs&&($scope[aliasAs]=collection),isArrayLike(collection))collectionKeys=collection,trackByIdFn=trackByIdExpFn||trackByIdArrayFn;else{trackByIdFn=trackByIdExpFn||trackByIdObjFn,collectionKeys=[];for(var itemKey in collection)hasOwnProperty.call(collection,itemKey)&&"$"!==itemKey.charAt(0)&&collectionKeys.push(itemKey)}for(collectionLength=collectionKeys.length,nextBlockOrder=new Array(collectionLength),index=0;index<collectionLength;index++)if(key=collection===collectionKeys?index:collectionKeys[index],value=collection[key],trackById=trackByIdFn(key,value,index),lastBlockMap[trackById])block=lastBlockMap[trackById],delete lastBlockMap[trackById],nextBlockMap[trackById]=block,nextBlockOrder[index]=block;else{if(nextBlockMap[trackById])throw forEach(nextBlockOrder,function(block){block&&block.scope&&(lastBlockMap[block.id]=block)}),ngRepeatMinErr("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",expression,trackById,value);nextBlockOrder[index]={id:trackById,scope:void 0,clone:void 0},nextBlockMap[trackById]=!0}for(var blockKey in lastBlockMap){if(block=lastBlockMap[blockKey],elementsToRemove=getBlockNodes(block.clone),$animate.leave(elementsToRemove),elementsToRemove[0].parentNode)for(index=0,length=elementsToRemove.length;index<length;index++)elementsToRemove[index].$$NG_REMOVED=!0;block.scope.$destroy()}for(index=0;index<collectionLength;index++)if(key=collection===collectionKeys?index:collectionKeys[index],value=collection[key],block=nextBlockOrder[index],block.scope){nextNode=previousNode;do{nextNode=nextNode.nextSibling}while(nextNode&&nextNode.$$NG_REMOVED);getBlockStart(block)!==nextNode&&$animate.move(getBlockNodes(block.clone),null,previousNode),previousNode=getBlockEnd(block),updateScope(block.scope,index,valueIdentifier,value,keyIdentifier,key,collectionLength)}else $transclude(function(clone,scope){block.scope=scope;var endNode=ngRepeatEndComment.cloneNode(!1);clone[clone.length++]=endNode,$animate.enter(clone,null,previousNode),previousNode=endNode,block.clone=clone,nextBlockMap[block.id]=block,updateScope(block.scope,index,valueIdentifier,value,keyIdentifier,key,collectionLength)});lastBlockMap=nextBlockMap})}}}}],ngShowDirective=["$animate",function($animate){return{restrict:"A",multiElement:!0,link:function(scope,element,attr){scope.$watch(attr.ngShow,function(value){$animate[value?"removeClass":"addClass"](element,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],ngHideDirective=["$animate",function($animate){return{restrict:"A",multiElement:!0,link:function(scope,element,attr){scope.$watch(attr.ngHide,function(value){$animate[value?"addClass":"removeClass"](element,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],ngStyleDirective=ngDirective(function(scope,element,attr){scope.$watch(attr.ngStyle,function(newStyles,oldStyles){oldStyles&&newStyles!==oldStyles&&forEach(oldStyles,function(val,style){element.css(style,"")}),newStyles&&element.css(newStyles)},!0)}),ngSwitchDirective=["$animate","$compile",function($animate,$compile){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(scope,element,attr,ngSwitchController){var watchExpr=attr.ngSwitch||attr.on,selectedTranscludes=[],selectedElements=[],previousLeaveAnimations=[],selectedScopes=[],spliceFactory=function(array,index){return function(response){!1!==response&&array.splice(index,1)}};scope.$watch(watchExpr,function(value){for(var i,ii;previousLeaveAnimations.length;)$animate.cancel(previousLeaveAnimations.pop());for(i=0,ii=selectedScopes.length;i<ii;++i){var selected=getBlockNodes(selectedElements[i].clone);selectedScopes[i].$destroy();(previousLeaveAnimations[i]=$animate.leave(selected)).done(spliceFactory(previousLeaveAnimations,i))}selectedElements.length=0,selectedScopes.length=0,(selectedTranscludes=ngSwitchController.cases["!"+value]||ngSwitchController.cases["?"])&&forEach(selectedTranscludes,function(selectedTransclude){selectedTransclude.transclude(function(caseElement,selectedScope){selectedScopes.push(selectedScope);var anchor=selectedTransclude.element;caseElement[caseElement.length++]=$compile.$$createComment("end ngSwitchWhen");var block={clone:caseElement};selectedElements.push(block),$animate.enter(caseElement,anchor.parent(),anchor)})})})}}}],ngSwitchWhenDirective=ngDirective({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(scope,element,attrs,ctrl,$transclude){forEach(attrs.ngSwitchWhen.split(attrs.ngSwitchWhenSeparator).sort().filter(function(element,index,array){return array[index-1]!==element}),function(whenCase){ctrl.cases["!"+whenCase]=ctrl.cases["!"+whenCase]||[],ctrl.cases["!"+whenCase].push({transclude:$transclude,element:element})})}}),ngSwitchDefaultDirective=ngDirective({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(scope,element,attr,ctrl,$transclude){ctrl.cases["?"]=ctrl.cases["?"]||[],ctrl.cases["?"].push({transclude:$transclude,element:element})}}),ngTranscludeMinErr=minErr("ngTransclude"),ngTranscludeDirective=["$compile",function($compile){return{restrict:"EAC",terminal:!0,compile:function(tElement){var fallbackLinkFn=$compile(tElement.contents());return tElement.empty(),function($scope,$element,$attrs,controller,$transclude){function ngTranscludeCloneAttachFn(clone,transcludedScope){clone.length&&notWhitespace(clone)?$element.append(clone):(useFallbackContent(),transcludedScope.$destroy())}function useFallbackContent(){fallbackLinkFn($scope,function(clone){$element.append(clone)})}function notWhitespace(nodes){for(var i=0,ii=nodes.length;i<ii;i++){var node=nodes[i];if(node.nodeType!==NODE_TYPE_TEXT||node.nodeValue.trim())return!0}}if(!$transclude)throw ngTranscludeMinErr("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",startingTag($element));$attrs.ngTransclude===$attrs.$attr.ngTransclude&&($attrs.ngTransclude="");var slotName=$attrs.ngTransclude||$attrs.ngTranscludeSlot;$transclude(ngTranscludeCloneAttachFn,null,slotName),slotName&&!$transclude.isSlotFilled(slotName)&&useFallbackContent()}}}}],scriptDirective=["$templateCache",function($templateCache){return{restrict:"E",terminal:!0,compile:function(element,attr){if("text/ng-template"===attr.type){var templateUrl=attr.id,text=element[0].text;$templateCache.put(templateUrl,text)}}}}],noopNgModelController={$setViewValue:noop,$render:noop},SelectController=["$element","$scope",function($element,$scope){function scheduleRender(){renderScheduled||(renderScheduled=!0,$scope.$$postDigest(function(){renderScheduled=!1,self.ngModelCtrl.$render()}))}function scheduleViewValueUpdate(renderAfter){updateScheduled||(updateScheduled=!0,$scope.$$postDigest(function(){$scope.$$destroyed||(updateScheduled=!1,self.ngModelCtrl.$setViewValue(self.readValue()),renderAfter&&self.ngModelCtrl.$render())}))}var self=this,optionsMap=new NgMap;self.selectValueMap={},self.ngModelCtrl=noopNgModelController,self.multiple=!1,self.unknownOption=jqLite(window.document.createElement("option")),self.hasEmptyOption=!1,self.emptyOption=void 0,self.renderUnknownOption=function(val){var unknownVal=self.generateUnknownOptionValue(val);self.unknownOption.val(unknownVal),$element.prepend(self.unknownOption),setOptionSelectedStatus(self.unknownOption,!0),$element.val(unknownVal)},self.updateUnknownOption=function(val){var unknownVal=self.generateUnknownOptionValue(val);self.unknownOption.val(unknownVal),setOptionSelectedStatus(self.unknownOption,!0),$element.val(unknownVal)},self.generateUnknownOptionValue=function(val){return"? "+hashKey(val)+" ?"},self.removeUnknownOption=function(){self.unknownOption.parent()&&self.unknownOption.remove()},self.selectEmptyOption=function(){self.emptyOption&&($element.val(""),setOptionSelectedStatus(self.emptyOption,!0))},self.unselectEmptyOption=function(){self.hasEmptyOption&&self.emptyOption.removeAttr("selected")},$scope.$on("$destroy",function(){self.renderUnknownOption=noop}),self.readValue=function(){var val=$element.val(),realVal=val in self.selectValueMap?self.selectValueMap[val]:val;return self.hasOption(realVal)?realVal:null},self.writeValue=function(value){var currentlySelectedOption=$element[0].options[$element[0].selectedIndex];if(currentlySelectedOption&&setOptionSelectedStatus(jqLite(currentlySelectedOption),!1),self.hasOption(value)){self.removeUnknownOption();var hashedVal=hashKey(value);$element.val(hashedVal in self.selectValueMap?hashedVal:value);var selectedOption=$element[0].options[$element[0].selectedIndex];setOptionSelectedStatus(jqLite(selectedOption),!0)}else null==value&&self.emptyOption?(self.removeUnknownOption(),self.selectEmptyOption()):self.unknownOption.parent().length?self.updateUnknownOption(value):self.renderUnknownOption(value)},self.addOption=function(value,element){if(element[0].nodeType!==NODE_TYPE_COMMENT){assertNotHasOwnProperty(value,'"option value"'),""===value&&(self.hasEmptyOption=!0,self.emptyOption=element);var count=optionsMap.get(value)||0;optionsMap.set(value,count+1),scheduleRender()}},self.removeOption=function(value){var count=optionsMap.get(value);count&&(1===count?(optionsMap.delete(value),""===value&&(self.hasEmptyOption=!1,self.emptyOption=void 0)):optionsMap.set(value,count-1))},self.hasOption=function(value){return!!optionsMap.get(value)};var renderScheduled=!1,updateScheduled=!1;self.registerOption=function(optionScope,optionElement,optionAttrs,interpolateValueFn,interpolateTextFn){if(optionAttrs.$attr.ngValue){var oldVal,hashedVal=NaN;optionAttrs.$observe("value",function(newVal){var removal,previouslySelected=optionElement.prop("selected");isDefined(hashedVal)&&(self.removeOption(oldVal),delete self.selectValueMap[hashedVal],removal=!0),hashedVal=hashKey(newVal),oldVal=newVal,self.selectValueMap[hashedVal]=newVal,self.addOption(newVal,optionElement),optionElement.attr("value",hashedVal),removal&&previouslySelected&&scheduleViewValueUpdate()})}else interpolateValueFn?optionAttrs.$observe("value",function(newVal){self.readValue();var removal,previouslySelected=optionElement.prop("selected");isDefined(oldVal)&&(self.removeOption(oldVal),removal=!0),oldVal=newVal,self.addOption(newVal,optionElement),removal&&previouslySelected&&scheduleViewValueUpdate()}):interpolateTextFn?optionScope.$watch(interpolateTextFn,function(newVal,oldVal){optionAttrs.$set("value",newVal);var previouslySelected=optionElement.prop("selected");oldVal!==newVal&&self.removeOption(oldVal),self.addOption(newVal,optionElement),oldVal&&previouslySelected&&scheduleViewValueUpdate()}):self.addOption(optionAttrs.value,optionElement);optionAttrs.$observe("disabled",function(newVal){("true"===newVal||newVal&&optionElement.prop("selected"))&&(self.multiple?scheduleViewValueUpdate(!0):(self.ngModelCtrl.$setViewValue(null),self.ngModelCtrl.$render()))}),optionElement.on("$destroy",function(){var currentValue=self.readValue(),removeValue=optionAttrs.value;self.removeOption(removeValue),scheduleRender(),(self.multiple&&currentValue&&-1!==currentValue.indexOf(removeValue)||currentValue===removeValue)&&scheduleViewValueUpdate(!0)})}}],selectDirective=function(){function selectPreLink(scope,element,attr,ctrls){var selectCtrl=ctrls[0],ngModelCtrl=ctrls[1];if(!ngModelCtrl)return void(selectCtrl.registerOption=noop);if(selectCtrl.ngModelCtrl=ngModelCtrl,element.on("change",function(){selectCtrl.removeUnknownOption(),scope.$apply(function(){ngModelCtrl.$setViewValue(selectCtrl.readValue())})}),attr.multiple){selectCtrl.multiple=!0,selectCtrl.readValue=function(){var array=[];return forEach(element.find("option"),function(option){if(option.selected&&!option.disabled){var val=option.value;array.push(val in selectCtrl.selectValueMap?selectCtrl.selectValueMap[val]:val)}}),array},selectCtrl.writeValue=function(value){forEach(element.find("option"),function(option){var shouldBeSelected=!!value&&(includes(value,option.value)||includes(value,selectCtrl.selectValueMap[option.value]));shouldBeSelected!==option.selected&&setOptionSelectedStatus(jqLite(option),shouldBeSelected)})};var lastView,lastViewRef=NaN;scope.$watch(function(){lastViewRef!==ngModelCtrl.$viewValue||equals(lastView,ngModelCtrl.$viewValue)||(lastView=shallowCopy(ngModelCtrl.$viewValue),ngModelCtrl.$render()),lastViewRef=ngModelCtrl.$viewValue}),ngModelCtrl.$isEmpty=function(value){return!value||0===value.length}}}function selectPostLink(scope,element,attrs,ctrls){var ngModelCtrl=ctrls[1];if(ngModelCtrl){var selectCtrl=ctrls[0];ngModelCtrl.$render=function(){selectCtrl.writeValue(ngModelCtrl.$viewValue)}}}return{restrict:"E",require:["select","?ngModel"],controller:SelectController,priority:1,link:{pre:selectPreLink,post:selectPostLink}}},optionDirective=["$interpolate",function($interpolate){return{restrict:"E",priority:100,compile:function(element,attr){var interpolateValueFn,interpolateTextFn;return isDefined(attr.ngValue)||(isDefined(attr.value)?interpolateValueFn=$interpolate(attr.value,!0):(interpolateTextFn=$interpolate(element.text(),!0))||attr.$set("value",element.text())),function(scope,element,attr){var parent=element.parent(),selectCtrl=parent.data("$selectController")||parent.parent().data("$selectController");selectCtrl&&selectCtrl.registerOption(scope,element,attr,interpolateValueFn,interpolateTextFn)}}}}],requiredDirective=function(){return{restrict:"A",require:"?ngModel",link:function(scope,elm,attr,ctrl){ctrl&&(attr.required=!0,ctrl.$validators.required=function(modelValue,viewValue){return!attr.required||!ctrl.$isEmpty(viewValue)},attr.$observe("required",function(){ctrl.$validate()}))}}},patternDirective=function(){return{restrict:"A",require:"?ngModel",link:function(scope,elm,attr,ctrl){if(ctrl){var regexp,patternExp=attr.ngPattern||attr.pattern;attr.$observe("pattern",function(regex){if(isString(regex)&&regex.length>0&&(regex=new RegExp("^"+regex+"$")),regex&&!regex.test)throw minErr("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",patternExp,regex,startingTag(elm));regexp=regex||void 0,ctrl.$validate()}),ctrl.$validators.pattern=function(modelValue,viewValue){return ctrl.$isEmpty(viewValue)||isUndefined(regexp)||regexp.test(viewValue)}}}}},maxlengthDirective=function(){return{restrict:"A",require:"?ngModel",link:function(scope,elm,attr,ctrl){if(ctrl){var maxlength=-1;attr.$observe("maxlength",function(value){var intVal=toInt(value);maxlength=isNumberNaN(intVal)?-1:intVal,ctrl.$validate()}),ctrl.$validators.maxlength=function(modelValue,viewValue){return maxlength<0||ctrl.$isEmpty(viewValue)||viewValue.length<=maxlength}}}}},minlengthDirective=function(){return{restrict:"A",require:"?ngModel",link:function(scope,elm,attr,ctrl){if(ctrl){var minlength=0;attr.$observe("minlength",function(value){minlength=toInt(value)||0,ctrl.$validate()}),ctrl.$validators.minlength=function(modelValue,viewValue){return ctrl.$isEmpty(viewValue)||viewValue.length>=minlength}}}}};if(window.angular.bootstrap)return void(window.console&&console.log("WARNING: Tried to load angular more than once."));!function(){var originalCleanData;if(!bindJQueryFired){var jqName=jq();jQuery=isUndefined(jqName)?window.jQuery:jqName?window[jqName]:void 0,jQuery&&jQuery.fn.on?(jqLite=jQuery,extend(jQuery.fn,{scope:JQLitePrototype.scope,isolateScope:JQLitePrototype.isolateScope,controller:JQLitePrototype.controller,injector:JQLitePrototype.injector,inheritedData:JQLitePrototype.inheritedData}),originalCleanData=jQuery.cleanData,jQuery.cleanData=function(elems){for(var events,elem,i=0;null!=(elem=elems[i]);i++)(events=jQuery._data(elem,"events"))&&events.$destroy&&jQuery(elem).triggerHandler("$destroy");originalCleanData(elems)}):jqLite=JQLite,angular.element=jqLite,bindJQueryFired=!0}}(),function(angular){extend(angular,{errorHandlingConfig:errorHandlingConfig,bootstrap:bootstrap,copy:copy,extend:extend,merge:merge,equals:equals,element:jqLite,forEach:forEach,injector:createInjector,noop:noop,bind:bind,toJson:toJson,fromJson:fromJson,identity:identity,isUndefined:isUndefined,isDefined:isDefined,isString:isString,isFunction:isFunction,isObject:isObject,isNumber:isNumber,isElement:isElement,isArray:isArray,version:version,isDate:isDate,lowercase:lowercase,uppercase:uppercase,callbacks:{$$counter:0},getTestability:getTestability,reloadWithDebugInfo:reloadWithDebugInfo,$$minErr:minErr,$$csp:csp,$$encodeUriSegment:encodeUriSegment,$$encodeUriQuery:encodeUriQuery,$$stringify:stringify}),angularModule=setupModuleLoader(window),angularModule("ng",["ngLocale"],["$provide",function($provide){$provide.provider({$$sanitizeUri:$$SanitizeUriProvider}),$provide.provider("$compile",$CompileProvider).directive({a:htmlAnchorDirective,input:inputDirective,textarea:inputDirective,form:formDirective,script:scriptDirective,select:selectDirective,option:optionDirective,ngBind:ngBindDirective,ngBindHtml:ngBindHtmlDirective,ngBindTemplate:ngBindTemplateDirective,ngClass:ngClassDirective,ngClassEven:ngClassEvenDirective,ngClassOdd:ngClassOddDirective,ngCloak:ngCloakDirective,ngController:ngControllerDirective,ngForm:ngFormDirective,ngHide:ngHideDirective,ngIf:ngIfDirective,ngInclude:ngIncludeDirective,ngInit:ngInitDirective,ngNonBindable:ngNonBindableDirective,ngPluralize:ngPluralizeDirective,ngRepeat:ngRepeatDirective,ngShow:ngShowDirective,ngStyle:ngStyleDirective,ngSwitch:ngSwitchDirective,ngSwitchWhen:ngSwitchWhenDirective,ngSwitchDefault:ngSwitchDefaultDirective,ngOptions:ngOptionsDirective,ngTransclude:ngTranscludeDirective,ngModel:ngModelDirective,ngList:ngListDirective,ngChange:ngChangeDirective,pattern:patternDirective,ngPattern:patternDirective,required:requiredDirective,ngRequired:requiredDirective,minlength:minlengthDirective,ngMinlength:minlengthDirective,maxlength:maxlengthDirective,ngMaxlength:maxlengthDirective,ngValue:ngValueDirective,ngModelOptions:ngModelOptionsDirective}).directive({ngInclude:ngIncludeFillContentDirective}).directive(ngAttributeAliasDirectives).directive(ngEventDirectives),$provide.provider({$anchorScroll:$AnchorScrollProvider,$animate:$AnimateProvider,$animateCss:$CoreAnimateCssProvider,$$animateJs:$$CoreAnimateJsProvider,$$animateQueue:$$CoreAnimateQueueProvider,$$AnimateRunner:$$AnimateRunnerFactoryProvider,$$animateAsyncRun:$$AnimateAsyncRunFactoryProvider,$browser:$BrowserProvider,$cacheFactory:$CacheFactoryProvider,$controller:$ControllerProvider,$document:$DocumentProvider,$$isDocumentHidden:$$IsDocumentHiddenProvider,$exceptionHandler:$ExceptionHandlerProvider,$filter:$FilterProvider,$$forceReflow:$$ForceReflowProvider,$interpolate:$InterpolateProvider,$interval:$IntervalProvider,$http:$HttpProvider,$httpParamSerializer:$HttpParamSerializerProvider,$httpParamSerializerJQLike:$HttpParamSerializerJQLikeProvider,$httpBackend:$HttpBackendProvider,$xhrFactory:$xhrFactoryProvider,$jsonpCallbacks:$jsonpCallbacksProvider,$location:$LocationProvider,$log:$LogProvider,$parse:$ParseProvider,$rootScope:$RootScopeProvider,$q:$QProvider,$$q:$$QProvider,$sce:$SceProvider,$sceDelegate:$SceDelegateProvider,$sniffer:$SnifferProvider,$templateCache:$TemplateCacheProvider,$templateRequest:$TemplateRequestProvider,$$testability:$$TestabilityProvider,$timeout:$TimeoutProvider,$window:$WindowProvider,$$rAF:$$RAFProvider,$$jqLite:$$jqLiteProvider,$$Map:$$MapProvider,$$cookieReader:$$CookieReaderProvider})}]).info({angularVersion:"1.6.4"})}(angular),angular.module("ngLocale",[],["$provide",function($provide){function getDecimals(n){n+="";var i=n.indexOf(".");return-1==i?0:n.length-i-1}function getVF(n,opt_precision){var v=opt_precision;void 0===v&&(v=Math.min(getDecimals(n),3));var base=Math.pow(10,v);return{v:v,f:(n*base|0)%base}}var PLURAL_CATEGORY={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};$provide.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],STANDALONEMONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a",short:"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-¤",negSuf:"",posPre:"¤",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(n,opt_precision){var i=0|n,vf=getVF(n,opt_precision);return 1==i&&0==vf.v?PLURAL_CATEGORY.ONE:PLURAL_CATEGORY.OTHER}})}]),jqLite(function(){angularInit(window.document,bootstrap)})}(window),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>'),function(window,angular){"use strict";function assertArg(arg,name,reason){if(!arg)throw ngMinErr("areq","Argument '{0}' is {1}",name||"?",reason||"required");return arg}function mergeClasses(a,b){return a||b?a?b?(isArray(a)&&(a=a.join(" ")),isArray(b)&&(b=b.join(" ")),a+" "+b):a:b:""}function packageStyles(options){var styles={};return options&&(options.to||options.from)&&(styles.to=options.to,styles.from=options.from),styles}function pendClasses(classes,fix,isPrefix){var className="";return classes=isArray(classes)?classes:classes&&isString(classes)&&classes.length?classes.split(/\s+/):[],forEach(classes,function(klass,i){klass&&klass.length>0&&(className+=i>0?" ":"",className+=isPrefix?fix+klass:klass+fix)}),className}function removeFromArray(arr,val){var index=arr.indexOf(val);val>=0&&arr.splice(index,1)}function stripCommentsFromElement(element){if(element instanceof jqLite)switch(element.length){case 0:return element;case 1:if(element[0].nodeType===ELEMENT_NODE)return element;break;default:return jqLite(extractElementNode(element))}if(element.nodeType===ELEMENT_NODE)return jqLite(element)}function extractElementNode(element){if(!element[0])return element;for(var i=0;i<element.length;i++){var elm=element[i];if(elm.nodeType===ELEMENT_NODE)return elm}}function $$addClass($$jqLite,element,className){forEach(element,function(elm){$$jqLite.addClass(elm,className)})}function $$removeClass($$jqLite,element,className){forEach(element,function(elm){$$jqLite.removeClass(elm,className)})}function applyAnimationClassesFactory($$jqLite){return function(element,options){options.addClass&&($$addClass($$jqLite,element,options.addClass),options.addClass=null),options.removeClass&&($$removeClass($$jqLite,element,options.removeClass),options.removeClass=null)}}function prepareAnimationOptions(options){if(options=options||{},!options.$$prepared){var domOperation=options.domOperation||noop;options.domOperation=function(){options.$$domOperationFired=!0,domOperation(),domOperation=noop},options.$$prepared=!0}return options}function applyAnimationStyles(element,options){applyAnimationFromStyles(element,options),applyAnimationToStyles(element,options)}function applyAnimationFromStyles(element,options){options.from&&(element.css(options.from),options.from=null)}function applyAnimationToStyles(element,options){options.to&&(element.css(options.to),options.to=null)}function mergeAnimationDetails(element,oldAnimation,newAnimation){var target=oldAnimation.options||{},newOptions=newAnimation.options||{},toAdd=(target.addClass||"")+" "+(newOptions.addClass||""),toRemove=(target.removeClass||"")+" "+(newOptions.removeClass||""),classes=resolveElementClasses(element.attr("class"),toAdd,toRemove);newOptions.preparationClasses&&(target.preparationClasses=concatWithSpace(newOptions.preparationClasses,target.preparationClasses),delete newOptions.preparationClasses);var realDomOperation=target.domOperation!==noop?target.domOperation:null;return extend(target,newOptions),realDomOperation&&(target.domOperation=realDomOperation),classes.addClass?target.addClass=classes.addClass:target.addClass=null,classes.removeClass?target.removeClass=classes.removeClass:target.removeClass=null,oldAnimation.addClass=target.addClass,oldAnimation.removeClass=target.removeClass,target}function resolveElementClasses(existing,toAdd,toRemove){function splitClassesToLookup(classes){isString(classes)&&(classes=classes.split(" "));var obj={};return forEach(classes,function(klass){klass.length&&(obj[klass]=!0)}),obj}var flags={};existing=splitClassesToLookup(existing),toAdd=splitClassesToLookup(toAdd),forEach(toAdd,function(value,key){flags[key]=1}),toRemove=splitClassesToLookup(toRemove),forEach(toRemove,function(value,key){flags[key]=1===flags[key]?null:-1});var classes={addClass:"",removeClass:""};return forEach(flags,function(val,klass){var prop,allow;1===val?(prop="addClass",allow=!existing[klass]||existing[klass+REMOVE_CLASS_SUFFIX]):-1===val&&(prop="removeClass",allow=existing[klass]||existing[klass+ADD_CLASS_SUFFIX]),allow&&(classes[prop].length&&(classes[prop]+=" "),classes[prop]+=klass)}),classes}function getDomNode(element){return element instanceof jqLite?element[0]:element}function applyGeneratedPreparationClasses(element,event,options){var classes="";event&&(classes=pendClasses(event,EVENT_CLASS_PREFIX,!0)),options.addClass&&(classes=concatWithSpace(classes,pendClasses(options.addClass,ADD_CLASS_SUFFIX))),options.removeClass&&(classes=concatWithSpace(classes,pendClasses(options.removeClass,REMOVE_CLASS_SUFFIX))),classes.length&&(options.preparationClasses=classes,element.addClass(classes))}function clearGeneratedClasses(element,options){options.preparationClasses&&(element.removeClass(options.preparationClasses),options.preparationClasses=null),options.activeClasses&&(element.removeClass(options.activeClasses),options.activeClasses=null)}function blockTransitions(node,duration){var value=duration?"-"+duration+"s":"";return applyInlineStyle(node,[TRANSITION_DELAY_PROP,value]),[TRANSITION_DELAY_PROP,value]}function blockKeyframeAnimations(node,applyBlock){var value=applyBlock?"paused":"",key=ANIMATION_PROP+ANIMATION_PLAYSTATE_KEY;return applyInlineStyle(node,[key,value]),[key,value]}function applyInlineStyle(node,styleTuple){var prop=styleTuple[0],value=styleTuple[1];node.style[prop]=value}function concatWithSpace(a,b){
return a?b?a+" "+b:a:b}function getCssKeyframeDurationStyle(duration){return[ANIMATION_DURATION_PROP,duration+"s"]}function getCssDelayStyle(delay,isKeyframeAnimation){return[isKeyframeAnimation?ANIMATION_DELAY_PROP:TRANSITION_DELAY_PROP,delay+"s"]}function computeCssStyles($window,element,properties){var styles=Object.create(null),detectedStyles=$window.getComputedStyle(element)||{};return forEach(properties,function(formalStyleName,actualStyleName){var val=detectedStyles[formalStyleName];if(val){var c=val.charAt(0);("-"===c||"+"===c||c>=0)&&(val=parseMaxTime(val)),0===val&&(val=null),styles[actualStyleName]=val}}),styles}function parseMaxTime(str){var maxValue=0,values=str.split(/\s*,\s*/);return forEach(values,function(value){"s"===value.charAt(value.length-1)&&(value=value.substring(0,value.length-1)),value=parseFloat(value)||0,maxValue=maxValue?Math.max(value,maxValue):value}),maxValue}function truthyTimingValue(val){return 0===val||null!=val}function getCssTransitionDurationStyle(duration,applyOnlyDuration){var style=TRANSITION_PROP,value=duration+"s";return applyOnlyDuration?style+=DURATION_KEY:value+=" linear all",[style,value]}function createLocalCacheLookup(){var cache=Object.create(null);return{flush:function(){cache=Object.create(null)},count:function(key){var entry=cache[key];return entry?entry.total:0},get:function(key){var entry=cache[key];return entry&&entry.value},put:function(key,value){cache[key]?cache[key].total++:cache[key]={total:1,value:value}}}}function registerRestorableStyles(backup,node,properties){forEach(properties,function(prop){backup[prop]=isDefined(backup[prop])?backup[prop]:node.style.getPropertyValue(prop)})}var TRANSITION_PROP,TRANSITIONEND_EVENT,ANIMATION_PROP,ANIMATIONEND_EVENT,ELEMENT_NODE=1,ADD_CLASS_SUFFIX="-add",REMOVE_CLASS_SUFFIX="-remove",EVENT_CLASS_PREFIX="ng-",NG_ANIMATE_CLASSNAME="ng-animate",NG_ANIMATE_CHILDREN_DATA="$$ngAnimateChildren";void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend?("-webkit-",TRANSITION_PROP="WebkitTransition",TRANSITIONEND_EVENT="webkitTransitionEnd transitionend"):(TRANSITION_PROP="transition",TRANSITIONEND_EVENT="transitionend"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend?("-webkit-",ANIMATION_PROP="WebkitAnimation",ANIMATIONEND_EVENT="webkitAnimationEnd animationend"):(ANIMATION_PROP="animation",ANIMATIONEND_EVENT="animationend");var copy,extend,forEach,isArray,isDefined,isElement,isFunction,isObject,isString,isUndefined,jqLite,noop,DURATION_KEY="Duration",TIMING_KEY="TimingFunction",ANIMATION_PLAYSTATE_KEY="PlayState",ANIMATION_DELAY_PROP=ANIMATION_PROP+"Delay",ANIMATION_DURATION_PROP=ANIMATION_PROP+DURATION_KEY,TRANSITION_DELAY_PROP=TRANSITION_PROP+"Delay",TRANSITION_DURATION_PROP=TRANSITION_PROP+DURATION_KEY,ngMinErr=angular.$$minErr("ng"),$$rAFSchedulerFactory=["$$rAF",function($$rAF){function scheduler(tasks){queue=queue.concat(tasks),nextTick()}function nextTick(){if(queue.length){for(var items=queue.shift(),i=0;i<items.length;i++)items[i]();cancelFn||$$rAF(function(){cancelFn||nextTick()})}}var queue,cancelFn;return queue=scheduler.queue=[],scheduler.waitUntilQuiet=function(fn){cancelFn&&cancelFn(),cancelFn=$$rAF(function(){cancelFn=null,fn(),nextTick()})},scheduler}],$$AnimateChildrenDirective=["$interpolate",function($interpolate){return{link:function(scope,element,attrs){function setData(value){value="on"===value||"true"===value,element.data(NG_ANIMATE_CHILDREN_DATA,value)}var val=attrs.ngAnimateChildren;isString(val)&&0===val.length?element.data(NG_ANIMATE_CHILDREN_DATA,!0):(setData($interpolate(val)(scope)),attrs.$observe("ngAnimateChildren",setData))}}}],ANIMATE_TIMER_KEY="$$animateCss",ONE_SECOND=1e3,ELAPSED_TIME_MAX_DECIMAL_PLACES=3,CLOSING_TIME_BUFFER=1.5,DETECT_CSS_PROPERTIES={transitionDuration:TRANSITION_DURATION_PROP,transitionDelay:TRANSITION_DELAY_PROP,transitionProperty:TRANSITION_PROP+"Property",animationDuration:ANIMATION_DURATION_PROP,animationDelay:ANIMATION_DELAY_PROP,animationIterationCount:ANIMATION_PROP+"IterationCount"},DETECT_STAGGER_CSS_PROPERTIES={transitionDuration:TRANSITION_DURATION_PROP,transitionDelay:TRANSITION_DELAY_PROP,animationDuration:ANIMATION_DURATION_PROP,animationDelay:ANIMATION_DELAY_PROP},$AnimateCssProvider=["$animateProvider",function($animateProvider){var gcsLookup=createLocalCacheLookup(),gcsStaggerLookup=createLocalCacheLookup();this.$get=["$window","$$jqLite","$$AnimateRunner","$timeout","$$forceReflow","$sniffer","$$rAFScheduler","$$animateQueue",function($window,$$jqLite,$$AnimateRunner,$timeout,$$forceReflow,$sniffer,$$rAFScheduler,$$animateQueue){function gcsHashFn(node,extraClasses){var KEY="$$ngAnimateParentKey",parentNode=node.parentNode;return(parentNode[KEY]||(parentNode[KEY]=++parentCounter))+"-"+node.getAttribute("class")+"-"+extraClasses}function computeCachedCssStyles(node,className,cacheKey,properties){var timings=gcsLookup.get(cacheKey);return timings||(timings=computeCssStyles($window,node,properties),"infinite"===timings.animationIterationCount&&(timings.animationIterationCount=1)),gcsLookup.put(cacheKey,timings),timings}function computeCachedCssStaggerStyles(node,className,cacheKey,properties){var stagger;if(gcsLookup.count(cacheKey)>0&&!(stagger=gcsStaggerLookup.get(cacheKey))){var staggerClassName=pendClasses(className,"-stagger");$$jqLite.addClass(node,staggerClassName),stagger=computeCssStyles($window,node,properties),stagger.animationDuration=Math.max(stagger.animationDuration,0),stagger.transitionDuration=Math.max(stagger.transitionDuration,0),$$jqLite.removeClass(node,staggerClassName),gcsStaggerLookup.put(cacheKey,stagger)}return stagger||{}}function waitUntilQuiet(callback){rafWaitQueue.push(callback),$$rAFScheduler.waitUntilQuiet(function(){gcsLookup.flush(),gcsStaggerLookup.flush();for(var pageWidth=$$forceReflow(),i=0;i<rafWaitQueue.length;i++)rafWaitQueue[i](pageWidth);rafWaitQueue.length=0})}function computeTimings(node,className,cacheKey){var timings=computeCachedCssStyles(node,className,cacheKey,DETECT_CSS_PROPERTIES),aD=timings.animationDelay,tD=timings.transitionDelay;return timings.maxDelay=aD&&tD?Math.max(aD,tD):aD||tD,timings.maxDuration=Math.max(timings.animationDuration*timings.animationIterationCount,timings.transitionDuration),timings}var applyAnimationClasses=applyAnimationClassesFactory($$jqLite),parentCounter=0,rafWaitQueue=[];return function(element,initialOptions){function endFn(){close()}function cancelFn(){close(!0)}function close(rejected){if(!(animationClosed||animationCompleted&&animationPaused)){animationClosed=!0,animationPaused=!1,options.$$skipPreparationClasses||$$jqLite.removeClass(element,preparationClasses),$$jqLite.removeClass(element,activeClasses),blockKeyframeAnimations(node,!1),blockTransitions(node,!1),forEach(temporaryStyles,function(entry){node.style[entry[0]]=""}),applyAnimationClasses(element,options),applyAnimationStyles(element,options),Object.keys(restoreStyles).length&&forEach(restoreStyles,function(value,prop){value?node.style.setProperty(prop,value):node.style.removeProperty(prop)}),options.onDone&&options.onDone(),events&&events.length&&element.off(events.join(" "),onAnimationProgress);var animationTimerData=element.data(ANIMATE_TIMER_KEY);animationTimerData&&($timeout.cancel(animationTimerData[0].timer),element.removeData(ANIMATE_TIMER_KEY)),runner&&runner.complete(!rejected)}}function applyBlocking(duration){flags.blockTransition&&blockTransitions(node,duration),flags.blockKeyframeAnimation&&blockKeyframeAnimations(node,!!duration)}function closeAndReturnNoopAnimator(){return runner=new $$AnimateRunner({end:endFn,cancel:cancelFn}),waitUntilQuiet(noop),close(),{$$willAnimate:!1,start:function(){return runner},end:endFn}}function onAnimationProgress(event){event.stopPropagation();var ev=event.originalEvent||event,timeStamp=ev.$manualTimeStamp||Date.now(),elapsedTime=parseFloat(ev.elapsedTime.toFixed(ELAPSED_TIME_MAX_DECIMAL_PLACES));Math.max(timeStamp-startTime,0)>=maxDelayTime&&elapsedTime>=maxDuration&&(animationCompleted=!0,close())}function start(){function triggerAnimationStart(){if(!animationClosed){if(applyBlocking(!1),forEach(temporaryStyles,function(entry){var key=entry[0],value=entry[1];node.style[key]=value}),applyAnimationClasses(element,options),$$jqLite.addClass(element,activeClasses),flags.recalculateTimingStyles){if(fullClassName=node.getAttribute("class")+" "+preparationClasses,cacheKey=gcsHashFn(node,fullClassName),timings=computeTimings(node,fullClassName,cacheKey),relativeDelay=timings.maxDelay,maxDelay=Math.max(relativeDelay,0),0===(maxDuration=timings.maxDuration))return void close();flags.hasTransitions=timings.transitionDuration>0,flags.hasAnimations=timings.animationDuration>0}if(flags.applyAnimationDelay&&(relativeDelay="boolean"!=typeof options.delay&&truthyTimingValue(options.delay)?parseFloat(options.delay):relativeDelay,maxDelay=Math.max(relativeDelay,0),timings.animationDelay=relativeDelay,delayStyle=getCssDelayStyle(relativeDelay,!0),temporaryStyles.push(delayStyle),node.style[delayStyle[0]]=delayStyle[1]),maxDelayTime=maxDelay*ONE_SECOND,maxDurationTime=maxDuration*ONE_SECOND,options.easing){var easeProp,easeVal=options.easing;flags.hasTransitions&&(easeProp=TRANSITION_PROP+TIMING_KEY,temporaryStyles.push([easeProp,easeVal]),node.style[easeProp]=easeVal),flags.hasAnimations&&(easeProp=ANIMATION_PROP+TIMING_KEY,temporaryStyles.push([easeProp,easeVal]),node.style[easeProp]=easeVal)}timings.transitionDuration&&events.push(TRANSITIONEND_EVENT),timings.animationDuration&&events.push(ANIMATIONEND_EVENT),startTime=Date.now();var timerTime=maxDelayTime+CLOSING_TIME_BUFFER*maxDurationTime,endTime=startTime+timerTime,animationsData=element.data(ANIMATE_TIMER_KEY)||[],setupFallbackTimer=!0;if(animationsData.length){var currentTimerData=animationsData[0];setupFallbackTimer=endTime>currentTimerData.expectedEndTime,setupFallbackTimer?$timeout.cancel(currentTimerData.timer):animationsData.push(close)}if(setupFallbackTimer){var timer=$timeout(onAnimationExpired,timerTime,!1);animationsData[0]={timer:timer,expectedEndTime:endTime},animationsData.push(close),element.data(ANIMATE_TIMER_KEY,animationsData)}events.length&&element.on(events.join(" "),onAnimationProgress),options.to&&(options.cleanupStyles&&registerRestorableStyles(restoreStyles,node,Object.keys(options.to)),applyAnimationToStyles(element,options))}}function onAnimationExpired(){var animationsData=element.data(ANIMATE_TIMER_KEY);if(animationsData){for(var i=1;i<animationsData.length;i++)animationsData[i]();element.removeData(ANIMATE_TIMER_KEY)}}if(!animationClosed){if(!node.parentNode)return void close();var playPause=function(playAnimation){if(animationCompleted)animationPaused&&playAnimation&&(animationPaused=!1,close());else if(animationPaused=!playAnimation,timings.animationDuration){var value=blockKeyframeAnimations(node,animationPaused);animationPaused?temporaryStyles.push(value):removeFromArray(temporaryStyles,value)}},maxStagger=itemIndex>0&&(timings.transitionDuration&&0===stagger.transitionDuration||timings.animationDuration&&0===stagger.animationDuration)&&Math.max(stagger.animationDelay,stagger.transitionDelay);maxStagger?$timeout(triggerAnimationStart,Math.floor(maxStagger*itemIndex*ONE_SECOND),!1):triggerAnimationStart(),runnerHost.resume=function(){playPause(!0)},runnerHost.pause=function(){playPause(!1)}}}var options=initialOptions||{};options.$$prepared||(options=prepareAnimationOptions(copy(options)));var restoreStyles={},node=getDomNode(element);if(!node||!node.parentNode||!$$animateQueue.enabled())return closeAndReturnNoopAnimator();var animationClosed,animationPaused,animationCompleted,runner,runnerHost,maxDelay,maxDelayTime,maxDuration,maxDurationTime,startTime,temporaryStyles=[],classes=element.attr("class"),styles=packageStyles(options),events=[];if(0===options.duration||!$sniffer.animations&&!$sniffer.transitions)return closeAndReturnNoopAnimator();var method=options.event&&isArray(options.event)?options.event.join(" "):options.event,isStructural=method&&options.structural,structuralClassName="",addRemoveClassName="";isStructural?structuralClassName=pendClasses(method,EVENT_CLASS_PREFIX,!0):method&&(structuralClassName=method),options.addClass&&(addRemoveClassName+=pendClasses(options.addClass,ADD_CLASS_SUFFIX)),options.removeClass&&(addRemoveClassName.length&&(addRemoveClassName+=" "),addRemoveClassName+=pendClasses(options.removeClass,REMOVE_CLASS_SUFFIX)),options.applyClassesEarly&&addRemoveClassName.length&&applyAnimationClasses(element,options);var preparationClasses=[structuralClassName,addRemoveClassName].join(" ").trim(),fullClassName=classes+" "+preparationClasses,activeClasses=pendClasses(preparationClasses,"-active"),hasToStyles=styles.to&&Object.keys(styles.to).length>0;if(!((options.keyframeStyle||"").length>0||hasToStyles||preparationClasses))return closeAndReturnNoopAnimator();var cacheKey,stagger;if(options.stagger>0){var staggerVal=parseFloat(options.stagger);stagger={transitionDelay:staggerVal,animationDelay:staggerVal,transitionDuration:0,animationDuration:0}}else cacheKey=gcsHashFn(node,fullClassName),stagger=computeCachedCssStaggerStyles(node,preparationClasses,cacheKey,DETECT_STAGGER_CSS_PROPERTIES);options.$$skipPreparationClasses||$$jqLite.addClass(element,preparationClasses);var applyOnlyDuration;if(options.transitionStyle){var transitionStyle=[TRANSITION_PROP,options.transitionStyle];applyInlineStyle(node,transitionStyle),temporaryStyles.push(transitionStyle)}if(options.duration>=0){applyOnlyDuration=node.style[TRANSITION_PROP].length>0;var durationStyle=getCssTransitionDurationStyle(options.duration,applyOnlyDuration);applyInlineStyle(node,durationStyle),temporaryStyles.push(durationStyle)}if(options.keyframeStyle){var keyframeStyle=[ANIMATION_PROP,options.keyframeStyle];applyInlineStyle(node,keyframeStyle),temporaryStyles.push(keyframeStyle)}var itemIndex=stagger?options.staggerIndex>=0?options.staggerIndex:gcsLookup.count(cacheKey):0,isFirst=0===itemIndex;isFirst&&!options.skipBlocking&&blockTransitions(node,9999);var timings=computeTimings(node,fullClassName,cacheKey),relativeDelay=timings.maxDelay;maxDelay=Math.max(relativeDelay,0),maxDuration=timings.maxDuration;var flags={};if(flags.hasTransitions=timings.transitionDuration>0,flags.hasAnimations=timings.animationDuration>0,flags.hasTransitionAll=flags.hasTransitions&&"all"===timings.transitionProperty,flags.applyTransitionDuration=hasToStyles&&(flags.hasTransitions&&!flags.hasTransitionAll||flags.hasAnimations&&!flags.hasTransitions),flags.applyAnimationDuration=options.duration&&flags.hasAnimations,flags.applyTransitionDelay=truthyTimingValue(options.delay)&&(flags.applyTransitionDuration||flags.hasTransitions),flags.applyAnimationDelay=truthyTimingValue(options.delay)&&flags.hasAnimations,flags.recalculateTimingStyles=addRemoveClassName.length>0,(flags.applyTransitionDuration||flags.applyAnimationDuration)&&(maxDuration=options.duration?parseFloat(options.duration):maxDuration,flags.applyTransitionDuration&&(flags.hasTransitions=!0,timings.transitionDuration=maxDuration,applyOnlyDuration=node.style[TRANSITION_PROP+"Property"].length>0,temporaryStyles.push(getCssTransitionDurationStyle(maxDuration,applyOnlyDuration))),flags.applyAnimationDuration&&(flags.hasAnimations=!0,timings.animationDuration=maxDuration,temporaryStyles.push(getCssKeyframeDurationStyle(maxDuration)))),0===maxDuration&&!flags.recalculateTimingStyles)return closeAndReturnNoopAnimator();if(null!=options.delay){var delayStyle;"boolean"!=typeof options.delay&&(delayStyle=parseFloat(options.delay),maxDelay=Math.max(delayStyle,0)),flags.applyTransitionDelay&&temporaryStyles.push(getCssDelayStyle(delayStyle)),flags.applyAnimationDelay&&temporaryStyles.push(getCssDelayStyle(delayStyle,!0))}return null==options.duration&&timings.transitionDuration>0&&(flags.recalculateTimingStyles=flags.recalculateTimingStyles||isFirst),maxDelayTime=maxDelay*ONE_SECOND,maxDurationTime=maxDuration*ONE_SECOND,options.skipBlocking||(flags.blockTransition=timings.transitionDuration>0,flags.blockKeyframeAnimation=timings.animationDuration>0&&stagger.animationDelay>0&&0===stagger.animationDuration),options.from&&(options.cleanupStyles&&registerRestorableStyles(restoreStyles,node,Object.keys(options.from)),applyAnimationFromStyles(element,options)),flags.blockTransition||flags.blockKeyframeAnimation?applyBlocking(maxDuration):options.skipBlocking||blockTransitions(node,!1),{$$willAnimate:!0,end:endFn,start:function(){if(!animationClosed)return runnerHost={end:endFn,cancel:cancelFn,resume:null,pause:null},runner=new $$AnimateRunner(runnerHost),waitUntilQuiet(start),runner}}}}]}],$$AnimateCssDriverProvider=["$$animationProvider",function($$animationProvider){function isDocumentFragment(node){return node.parentNode&&11===node.parentNode.nodeType}$$animationProvider.drivers.push("$$animateCssDriver");var NG_ANIMATE_SHIM_CLASS_NAME="ng-animate-shim",NG_OUT_ANCHOR_CLASS_NAME="ng-anchor-out";this.$get=["$animateCss","$rootScope","$$AnimateRunner","$rootElement","$sniffer","$$jqLite","$document",function($animateCss,$rootScope,$$AnimateRunner,$rootElement,$sniffer,$$jqLite,$document){function filterCssClasses(classes){return classes.replace(/\bng-\S+\b/g,"")}function getUniqueValues(a,b){return isString(a)&&(a=a.split(" ")),isString(b)&&(b=b.split(" ")),a.filter(function(val){return-1===b.indexOf(val)}).join(" ")}function prepareAnchoredAnimation(classes,outAnchor,inAnchor){function calculateAnchorStyles(anchor){var styles={},coords=getDomNode(anchor).getBoundingClientRect();return forEach(["width","height","top","left"],function(key){var value=coords[key];switch(key){case"top":value+=bodyNode.scrollTop;break;case"left":value+=bodyNode.scrollLeft}styles[key]=Math.floor(value)+"px"}),styles}function getClassVal(element){return element.attr("class")||""}function prepareInAnimation(){var endingClasses=filterCssClasses(getClassVal(inAnchor)),toAdd=getUniqueValues(endingClasses,startingClasses),toRemove=getUniqueValues(startingClasses,endingClasses),animator=$animateCss(clone,{to:calculateAnchorStyles(inAnchor),addClass:"ng-anchor-in "+toAdd,removeClass:NG_OUT_ANCHOR_CLASS_NAME+" "+toRemove,delay:!0});return animator.$$willAnimate?animator:null}function end(){clone.remove(),outAnchor.removeClass(NG_ANIMATE_SHIM_CLASS_NAME),inAnchor.removeClass(NG_ANIMATE_SHIM_CLASS_NAME)}var clone=jqLite(getDomNode(outAnchor).cloneNode(!0)),startingClasses=filterCssClasses(getClassVal(clone));outAnchor.addClass(NG_ANIMATE_SHIM_CLASS_NAME),inAnchor.addClass(NG_ANIMATE_SHIM_CLASS_NAME),clone.addClass("ng-anchor"),rootBodyElement.append(clone);var animatorIn,animatorOut=function(){var animator=$animateCss(clone,{addClass:NG_OUT_ANCHOR_CLASS_NAME,delay:!0,from:calculateAnchorStyles(outAnchor)});return animator.$$willAnimate?animator:null}();if(!animatorOut&&!(animatorIn=prepareInAnimation()))return end();var startingAnimator=animatorOut||animatorIn;return{start:function(){function endFn(){currentAnimation&&currentAnimation.end()}var runner,currentAnimation=startingAnimator.start();return currentAnimation.done(function(){if(currentAnimation=null,!animatorIn&&(animatorIn=prepareInAnimation()))return currentAnimation=animatorIn.start(),currentAnimation.done(function(){currentAnimation=null,end(),runner.complete()}),currentAnimation;end(),runner.complete()}),runner=new $$AnimateRunner({end:endFn,cancel:endFn})}}}function prepareFromToAnchorAnimation(from,to,classes,anchors){var fromAnimation=prepareRegularAnimation(from),toAnimation=prepareRegularAnimation(to),anchorAnimations=[];if(forEach(anchors,function(anchor){var outElement=anchor.out,inElement=anchor.in,animator=prepareAnchoredAnimation(classes,outElement,inElement);animator&&anchorAnimations.push(animator)}),fromAnimation||toAnimation||0!==anchorAnimations.length)return{start:function(){function endFn(){forEach(animationRunners,function(runner){runner.end()})}var animationRunners=[];fromAnimation&&animationRunners.push(fromAnimation.start()),toAnimation&&animationRunners.push(toAnimation.start()),forEach(anchorAnimations,function(animation){animationRunners.push(animation.start())});var runner=new $$AnimateRunner({end:endFn,cancel:endFn});return $$AnimateRunner.all(animationRunners,function(status){runner.complete(status)}),runner}}}function prepareRegularAnimation(animationDetails){var element=animationDetails.element,options=animationDetails.options||{};animationDetails.structural&&(options.event=animationDetails.event,options.structural=!0,options.applyClassesEarly=!0,"leave"===animationDetails.event&&(options.onDone=options.domOperation)),options.preparationClasses&&(options.event=concatWithSpace(options.event,options.preparationClasses));var animator=$animateCss(element,options);return animator.$$willAnimate?animator:null}if(!$sniffer.animations&&!$sniffer.transitions)return noop;var bodyNode=$document[0].body,rootNode=getDomNode($rootElement),rootBodyElement=jqLite(isDocumentFragment(rootNode)||bodyNode.contains(rootNode)?rootNode:bodyNode);return function(animationDetails){return animationDetails.from&&animationDetails.to?prepareFromToAnchorAnimation(animationDetails.from,animationDetails.to,animationDetails.classes,animationDetails.anchors):prepareRegularAnimation(animationDetails)}}]}],$$AnimateJsProvider=["$animateProvider",function($animateProvider){this.$get=["$injector","$$AnimateRunner","$$jqLite",function($injector,$$AnimateRunner,$$jqLite){function lookupAnimations(classes){classes=isArray(classes)?classes:classes.split(" ");for(var matches=[],flagMap={},i=0;i<classes.length;i++){var klass=classes[i],animationFactory=$animateProvider.$$registeredAnimations[klass];animationFactory&&!flagMap[klass]&&(matches.push($injector.get(animationFactory)),flagMap[klass]=!0)}return matches}var applyAnimationClasses=applyAnimationClassesFactory($$jqLite);return function(element,event,classes,options){function applyOptions(){options.domOperation(),applyAnimationClasses(element,options)}function close(){animationClosed=!0,applyOptions(),applyAnimationStyles(element,options)}function executeAnimationFn(fn,element,event,options,onDone){var args;switch(event){case"animate":args=[element,options.from,options.to,onDone];break;case"setClass":args=[element,classesToAdd,classesToRemove,onDone];break;case"addClass":args=[element,classesToAdd,onDone];break;case"removeClass":args=[element,classesToRemove,onDone];break;default:args=[element,onDone]}args.push(options);var value=fn.apply(fn,args);if(value)if(isFunction(value.start)&&(value=value.start()),value instanceof $$AnimateRunner)value.done(onDone);else if(isFunction(value))return value;return noop}function groupEventedAnimations(element,event,options,animations,fnName){var operations=[];return forEach(animations,function(ani){var animation=ani[fnName];animation&&operations.push(function(){var runner,endProgressCb,resolved=!1,onAnimationComplete=function(rejected){resolved||(resolved=!0,(endProgressCb||noop)(rejected),runner.complete(!rejected))};return runner=new $$AnimateRunner({end:function(){onAnimationComplete()},cancel:function(){onAnimationComplete(!0)}}),endProgressCb=executeAnimationFn(animation,element,event,options,function(result){onAnimationComplete(!1===result)}),runner})}),operations}function packageAnimations(element,event,options,animations,fnName){var operations=groupEventedAnimations(element,event,options,animations,fnName);if(0===operations.length){var a,b;"beforeSetClass"===fnName?(a=groupEventedAnimations(element,"removeClass",options,animations,"beforeRemoveClass"),b=groupEventedAnimations(element,"addClass",options,animations,"beforeAddClass")):"setClass"===fnName&&(a=groupEventedAnimations(element,"removeClass",options,animations,"removeClass"),b=groupEventedAnimations(element,"addClass",options,animations,"addClass")),a&&(operations=operations.concat(a)),b&&(operations=operations.concat(b))}if(0!==operations.length)return function(callback){var runners=[];return operations.length&&forEach(operations,function(animateFn){runners.push(animateFn())}),runners.length?$$AnimateRunner.all(runners,callback):callback(),function(reject){forEach(runners,function(runner){reject?runner.cancel():runner.end()})}}}var animationClosed=!1;3===arguments.length&&isObject(classes)&&(options=classes,classes=null),options=prepareAnimationOptions(options),classes||(classes=element.attr("class")||"",options.addClass&&(classes+=" "+options.addClass),options.removeClass&&(classes+=" "+options.removeClass));var before,after,classesToAdd=options.addClass,classesToRemove=options.removeClass,animations=lookupAnimations(classes);if(animations.length){var afterFn,beforeFn;"leave"===event?(beforeFn="leave",afterFn="afterLeave"):(beforeFn="before"+event.charAt(0).toUpperCase()+event.substr(1),afterFn=event),"enter"!==event&&"move"!==event&&(before=packageAnimations(element,event,options,animations,beforeFn)),after=packageAnimations(element,event,options,animations,afterFn)}if(before||after){var runner;return{$$willAnimate:!0,end:function(){return runner?runner.end():(close(),runner=new $$AnimateRunner,runner.complete(!0)),runner},start:function(){function onComplete(success){close(success),runner.complete(success)}function endAnimations(cancelled){animationClosed||((closeActiveAnimations||noop)(cancelled),onComplete(cancelled))}if(runner)return runner;runner=new $$AnimateRunner;var closeActiveAnimations,chain=[];return before&&chain.push(function(fn){closeActiveAnimations=before(fn)}),chain.length?chain.push(function(fn){applyOptions(),fn(!0)}):applyOptions(),after&&chain.push(function(fn){closeActiveAnimations=after(fn)}),runner.setHost({end:function(){endAnimations()},cancel:function(){endAnimations(!0)}}),$$AnimateRunner.chain(chain,onComplete),runner}}}}}]}],$$AnimateJsDriverProvider=["$$animationProvider",function($$animationProvider){$$animationProvider.drivers.push("$$animateJsDriver"),this.$get=["$$animateJs","$$AnimateRunner",function($$animateJs,$$AnimateRunner){function prepareAnimation(animationDetails){var element=animationDetails.element,event=animationDetails.event,options=animationDetails.options,classes=animationDetails.classes;return $$animateJs(element,event,classes,options)}return function(animationDetails){if(animationDetails.from&&animationDetails.to){var fromAnimation=prepareAnimation(animationDetails.from),toAnimation=prepareAnimation(animationDetails.to);if(!fromAnimation&&!toAnimation)return;return{start:function(){function endFnFactory(){return function(){forEach(animationRunners,function(runner){runner.end()})}}function done(status){runner.complete(status)}var animationRunners=[];fromAnimation&&animationRunners.push(fromAnimation.start()),toAnimation&&animationRunners.push(toAnimation.start()),$$AnimateRunner.all(animationRunners,done);var runner=new $$AnimateRunner({end:endFnFactory(),cancel:endFnFactory()});return runner}}}return prepareAnimation(animationDetails)}}]}],NG_ANIMATE_ATTR_NAME="data-ng-animate",NG_ANIMATE_PIN_DATA="$ngAnimatePin",$$AnimateQueueProvider=["$animateProvider",function($animateProvider){function makeTruthyCssClassMap(classString){if(!classString)return null;var keys=classString.split(ONE_SPACE),map=Object.create(null);return forEach(keys,function(key){map[key]=!0}),map}function hasMatchingClasses(newClassString,currentClassString){if(newClassString&&currentClassString){var currentClassMap=makeTruthyCssClassMap(currentClassString);return newClassString.split(ONE_SPACE).some(function(className){return currentClassMap[className]})}}function isAllowed(ruleType,currentAnimation,previousAnimation){return rules[ruleType].some(function(fn){return fn(currentAnimation,previousAnimation)})}function hasAnimationClasses(animation,and){var a=(animation.addClass||"").length>0,b=(animation.removeClass||"").length>0;return and?a&&b:a||b}var PRE_DIGEST_STATE=1,RUNNING_STATE=2,ONE_SPACE=" ",rules=this.rules={skip:[],cancel:[],join:[]};rules.join.push(function(newAnimation,currentAnimation){return!newAnimation.structural&&hasAnimationClasses(newAnimation)}),rules.skip.push(function(newAnimation,currentAnimation){return!newAnimation.structural&&!hasAnimationClasses(newAnimation)}),rules.skip.push(function(newAnimation,currentAnimation){return"leave"===currentAnimation.event&&newAnimation.structural}),rules.skip.push(function(newAnimation,currentAnimation){return currentAnimation.structural&&currentAnimation.state===RUNNING_STATE&&!newAnimation.structural}),rules.cancel.push(function(newAnimation,currentAnimation){return currentAnimation.structural&&newAnimation.structural}),rules.cancel.push(function(newAnimation,currentAnimation){return currentAnimation.state===RUNNING_STATE&&newAnimation.structural}),rules.cancel.push(function(newAnimation,currentAnimation){if(currentAnimation.structural)return!1;var nA=newAnimation.addClass,nR=newAnimation.removeClass,cA=currentAnimation.addClass,cR=currentAnimation.removeClass;return!(isUndefined(nA)&&isUndefined(nR)||isUndefined(cA)&&isUndefined(cR))&&(hasMatchingClasses(nA,cR)||hasMatchingClasses(nR,cA))}),this.$get=["$$rAF","$rootScope","$rootElement","$document","$$Map","$$animation","$$AnimateRunner","$templateRequest","$$jqLite","$$forceReflow","$$isDocumentHidden",function($$rAF,$rootScope,$rootElement,$document,$$Map,$$animation,$$AnimateRunner,$templateRequest,$$jqLite,$$forceReflow,$$isDocumentHidden){function postDigestTaskFactory(){var postDigestCalled=!1;return function(fn){postDigestCalled?fn():$rootScope.$$postDigest(function(){postDigestCalled=!0,fn()})}}function normalizeAnimationDetails(element,animation){return mergeAnimationDetails(element,animation,{})}function findCallbacks(targetParentNode,targetNode,event){var matches=[],entries=callbackRegistry[event];return entries&&forEach(entries,function(entry){contains.call(entry.node,targetNode)?matches.push(entry.callback):"leave"===event&&contains.call(entry.node,targetParentNode)&&matches.push(entry.callback)}),matches}function filterFromRegistry(list,matchContainer,matchCallback){var containerNode=extractElementNode(matchContainer);return list.filter(function(entry){return!(entry.node===containerNode&&(!matchCallback||entry.callback===matchCallback))})}function cleanupEventListeners(phase,node){"close"!==phase||node.parentNode||$animate.off(node)}function queueAnimation(originalElement,event,initialOptions){function notifyProgress(runner,event,phase,data){runInNextPostDigestOrNow(function(){var callbacks=findCallbacks(parentNode,node,event);callbacks.length?$$rAF(function(){forEach(callbacks,function(callback){callback(element,phase,data)}),cleanupEventListeners(phase,node)}):cleanupEventListeners(phase,node)}),runner.progress(event,phase,data)}function close(reject){clearGeneratedClasses(element,options),applyAnimationClasses(element,options),applyAnimationStyles(element,options),options.domOperation(),runner.complete(!reject)}var options=copy(initialOptions),element=stripCommentsFromElement(originalElement),node=getDomNode(element),parentNode=node&&node.parentNode;options=prepareAnimationOptions(options);var runner=new $$AnimateRunner,runInNextPostDigestOrNow=postDigestTaskFactory();if(isArray(options.addClass)&&(options.addClass=options.addClass.join(" ")),options.addClass&&!isString(options.addClass)&&(options.addClass=null),isArray(options.removeClass)&&(options.removeClass=options.removeClass.join(" ")),options.removeClass&&!isString(options.removeClass)&&(options.removeClass=null),options.from&&!isObject(options.from)&&(options.from=null),options.to&&!isObject(options.to)&&(options.to=null),!node)return close(),runner;var className=[node.getAttribute("class"),options.addClass,options.removeClass].join(" ");if(!isAnimatableClassName(className))return close(),runner
;var isStructural=["enter","move","leave"].indexOf(event)>=0,documentHidden=$$isDocumentHidden(),skipAnimations=!animationsEnabled||documentHidden||disabledElementsLookup.get(node),existingAnimation=!skipAnimations&&activeAnimationsLookup.get(node)||{},hasExistingAnimation=!!existingAnimation.state;if(skipAnimations||hasExistingAnimation&&existingAnimation.state===PRE_DIGEST_STATE||(skipAnimations=!areAnimationsAllowed(node,parentNode,event)),skipAnimations)return documentHidden&&notifyProgress(runner,event,"start"),close(),documentHidden&&notifyProgress(runner,event,"close"),runner;isStructural&&closeChildAnimations(node);var newAnimation={structural:isStructural,element:element,event:event,addClass:options.addClass,removeClass:options.removeClass,close:close,options:options,runner:runner};if(hasExistingAnimation){if(isAllowed("skip",newAnimation,existingAnimation))return existingAnimation.state===RUNNING_STATE?(close(),runner):(mergeAnimationDetails(element,existingAnimation,newAnimation),existingAnimation.runner);if(isAllowed("cancel",newAnimation,existingAnimation))if(existingAnimation.state===RUNNING_STATE)existingAnimation.runner.end();else{if(!existingAnimation.structural)return mergeAnimationDetails(element,existingAnimation,newAnimation),existingAnimation.runner;existingAnimation.close()}else{if(isAllowed("join",newAnimation,existingAnimation)){if(existingAnimation.state!==RUNNING_STATE)return applyGeneratedPreparationClasses(element,isStructural?event:null,options),event=newAnimation.event=existingAnimation.event,options=mergeAnimationDetails(element,existingAnimation,newAnimation),existingAnimation.runner;normalizeAnimationDetails(element,newAnimation)}}}else normalizeAnimationDetails(element,newAnimation);var isValidAnimation=newAnimation.structural;if(isValidAnimation||(isValidAnimation="animate"===newAnimation.event&&Object.keys(newAnimation.options.to||{}).length>0||hasAnimationClasses(newAnimation)),!isValidAnimation)return close(),clearElementAnimationState(node),runner;var counter=(existingAnimation.counter||0)+1;return newAnimation.counter=counter,markElementAnimationState(node,PRE_DIGEST_STATE,newAnimation),$rootScope.$$postDigest(function(){element=stripCommentsFromElement(originalElement);var animationDetails=activeAnimationsLookup.get(node),animationCancelled=!animationDetails;animationDetails=animationDetails||{};var parentElement=element.parent()||[],isValidAnimation=parentElement.length>0&&("animate"===animationDetails.event||animationDetails.structural||hasAnimationClasses(animationDetails));if(animationCancelled||animationDetails.counter!==counter||!isValidAnimation)return animationCancelled&&(applyAnimationClasses(element,options),applyAnimationStyles(element,options)),(animationCancelled||isStructural&&animationDetails.event!==event)&&(options.domOperation(),runner.end()),void(isValidAnimation||clearElementAnimationState(node));event=!animationDetails.structural&&hasAnimationClasses(animationDetails,!0)?"setClass":animationDetails.event,markElementAnimationState(node,RUNNING_STATE);var realRunner=$$animation(element,event,animationDetails.options);runner.setHost(realRunner),notifyProgress(runner,event,"start",{}),realRunner.done(function(status){close(!status);var animationDetails=activeAnimationsLookup.get(node);animationDetails&&animationDetails.counter===counter&&clearElementAnimationState(node),notifyProgress(runner,event,"close",{})})}),runner}function closeChildAnimations(node){var children=node.querySelectorAll("["+NG_ANIMATE_ATTR_NAME+"]");forEach(children,function(child){var state=parseInt(child.getAttribute(NG_ANIMATE_ATTR_NAME),10),animationDetails=activeAnimationsLookup.get(child);if(animationDetails)switch(state){case RUNNING_STATE:animationDetails.runner.end();case PRE_DIGEST_STATE:activeAnimationsLookup.delete(child)}})}function clearElementAnimationState(node){node.removeAttribute(NG_ANIMATE_ATTR_NAME),activeAnimationsLookup.delete(node)}function areAnimationsAllowed(node,parentNode,event){var animateChildren,bodyNode=$document[0].body,rootNode=getDomNode($rootElement),bodyNodeDetected=node===bodyNode||"HTML"===node.nodeName,rootNodeDetected=node===rootNode,parentAnimationDetected=!1,elementDisabled=disabledElementsLookup.get(node),parentHost=jqLite.data(node,NG_ANIMATE_PIN_DATA);for(parentHost&&(parentNode=getDomNode(parentHost));parentNode&&(rootNodeDetected||(rootNodeDetected=parentNode===rootNode),parentNode.nodeType===ELEMENT_NODE);){var details=activeAnimationsLookup.get(parentNode)||{};if(!parentAnimationDetected){var parentNodeDisabled=disabledElementsLookup.get(parentNode);if(!0===parentNodeDisabled&&!1!==elementDisabled){elementDisabled=!0;break}!1===parentNodeDisabled&&(elementDisabled=!1),parentAnimationDetected=details.structural}if(isUndefined(animateChildren)||!0===animateChildren){var value=jqLite.data(parentNode,NG_ANIMATE_CHILDREN_DATA);isDefined(value)&&(animateChildren=value)}if(parentAnimationDetected&&!1===animateChildren)break;if(bodyNodeDetected||(bodyNodeDetected=parentNode===bodyNode),bodyNodeDetected&&rootNodeDetected)break;parentNode=rootNodeDetected||!(parentHost=jqLite.data(parentNode,NG_ANIMATE_PIN_DATA))?parentNode.parentNode:getDomNode(parentHost)}return(!parentAnimationDetected||animateChildren)&&!0!==elementDisabled&&rootNodeDetected&&bodyNodeDetected}function markElementAnimationState(node,state,details){details=details||{},details.state=state,node.setAttribute(NG_ANIMATE_ATTR_NAME,state);var oldValue=activeAnimationsLookup.get(node),newValue=oldValue?extend(oldValue,details):details;activeAnimationsLookup.set(node,newValue)}var activeAnimationsLookup=new $$Map,disabledElementsLookup=new $$Map,animationsEnabled=null,deregisterWatch=$rootScope.$watch(function(){return 0===$templateRequest.totalPendingRequests},function(isEmpty){isEmpty&&(deregisterWatch(),$rootScope.$$postDigest(function(){$rootScope.$$postDigest(function(){null===animationsEnabled&&(animationsEnabled=!0)})}))}),callbackRegistry=Object.create(null),classNameFilter=$animateProvider.classNameFilter(),isAnimatableClassName=classNameFilter?function(className){return classNameFilter.test(className)}:function(){return!0},applyAnimationClasses=applyAnimationClassesFactory($$jqLite),contains=window.Node.prototype.contains||function(arg){return this===arg||!!(16&this.compareDocumentPosition(arg))},$animate={on:function(event,container,callback){var node=extractElementNode(container);callbackRegistry[event]=callbackRegistry[event]||[],callbackRegistry[event].push({node:node,callback:callback}),jqLite(container).on("$destroy",function(){activeAnimationsLookup.get(node)||$animate.off(event,container,callback)})},off:function(event,container,callback){if(1!==arguments.length||isString(arguments[0])){var entries=callbackRegistry[event];entries&&(callbackRegistry[event]=1===arguments.length?null:filterFromRegistry(entries,container,callback))}else{container=arguments[0];for(var eventType in callbackRegistry)callbackRegistry[eventType]=filterFromRegistry(callbackRegistry[eventType],container)}},pin:function(element,parentElement){assertArg(isElement(element),"element","not an element"),assertArg(isElement(parentElement),"parentElement","not an element"),element.data(NG_ANIMATE_PIN_DATA,parentElement)},push:function(element,event,options,domOperation){return options=options||{},options.domOperation=domOperation,queueAnimation(element,event,options)},enabled:function(element,bool){var argCount=arguments.length;if(0===argCount)bool=!!animationsEnabled;else{if(isElement(element)){var node=getDomNode(element);1===argCount?bool=!disabledElementsLookup.get(node):disabledElementsLookup.set(node,!bool)}else bool=animationsEnabled=!!element}return bool}};return $animate}]}],$$AnimationProvider=["$animateProvider",function($animateProvider){function setRunner(element,runner){element.data(RUNNER_STORAGE_KEY,runner)}function removeRunner(element){element.removeData(RUNNER_STORAGE_KEY)}function getRunner(element){return element.data(RUNNER_STORAGE_KEY)}var NG_ANIMATE_REF_ATTR="ng-animate-ref",drivers=this.drivers=[],RUNNER_STORAGE_KEY="$$animationRunner";this.$get=["$$jqLite","$rootScope","$injector","$$AnimateRunner","$$Map","$$rAFScheduler",function($$jqLite,$rootScope,$injector,$$AnimateRunner,$$Map,$$rAFScheduler){function sortAnimations(animations){function processNode(entry){if(entry.processed)return entry;entry.processed=!0;var elementNode=entry.domNode,parentNode=elementNode.parentNode;lookup.set(elementNode,entry);for(var parentEntry;parentNode;){if(parentEntry=lookup.get(parentNode)){parentEntry.processed||(parentEntry=processNode(parentEntry));break}parentNode=parentNode.parentNode}return(parentEntry||tree).children.push(entry),entry}var i,tree={children:[]},lookup=new $$Map;for(i=0;i<animations.length;i++){var animation=animations[i];lookup.set(animation.domNode,animations[i]={domNode:animation.domNode,fn:animation.fn,children:[]})}for(i=0;i<animations.length;i++)processNode(animations[i]);return function(tree){var i,result=[],queue=[];for(i=0;i<tree.children.length;i++)queue.push(tree.children[i]);var remainingLevelEntries=queue.length,nextLevelEntries=0,row=[];for(i=0;i<queue.length;i++){var entry=queue[i];remainingLevelEntries<=0&&(remainingLevelEntries=nextLevelEntries,nextLevelEntries=0,result.push(row),row=[]),row.push(entry.fn),entry.children.forEach(function(childEntry){nextLevelEntries++,queue.push(childEntry)}),remainingLevelEntries--}return row.length&&result.push(row),result}(tree)}var animationQueue=[],applyAnimationClasses=applyAnimationClassesFactory($$jqLite);return function(element,event,options){function getAnchorNodes(node){var SELECTOR="["+NG_ANIMATE_REF_ATTR+"]",items=node.hasAttribute(NG_ANIMATE_REF_ATTR)?[node]:node.querySelectorAll(SELECTOR),anchors=[];return forEach(items,function(node){var attr=node.getAttribute(NG_ANIMATE_REF_ATTR);attr&&attr.length&&anchors.push(node)}),anchors}function groupAnimations(animations){var preparedAnimations=[],refLookup={};forEach(animations,function(animation,index){var element=animation.element,node=getDomNode(element),event=animation.event,enterOrMove=["enter","move"].indexOf(event)>=0,anchorNodes=animation.structural?getAnchorNodes(node):[];if(anchorNodes.length){var direction=enterOrMove?"to":"from";forEach(anchorNodes,function(anchor){var key=anchor.getAttribute(NG_ANIMATE_REF_ATTR);refLookup[key]=refLookup[key]||{},refLookup[key][direction]={animationID:index,element:jqLite(anchor)}})}else preparedAnimations.push(animation)});var usedIndicesLookup={},anchorGroups={};return forEach(refLookup,function(operations,key){var from=operations.from,to=operations.to;if(!from||!to){var index=from?from.animationID:to.animationID,indexKey=index.toString();return void(usedIndicesLookup[indexKey]||(usedIndicesLookup[indexKey]=!0,preparedAnimations.push(animations[index])))}var fromAnimation=animations[from.animationID],toAnimation=animations[to.animationID],lookupKey=from.animationID.toString();if(!anchorGroups[lookupKey]){var group=anchorGroups[lookupKey]={structural:!0,beforeStart:function(){fromAnimation.beforeStart(),toAnimation.beforeStart()},close:function(){fromAnimation.close(),toAnimation.close()},classes:cssClassesIntersection(fromAnimation.classes,toAnimation.classes),from:fromAnimation,to:toAnimation,anchors:[]};group.classes.length?preparedAnimations.push(group):(preparedAnimations.push(fromAnimation),preparedAnimations.push(toAnimation))}anchorGroups[lookupKey].anchors.push({out:from.element,in:to.element})}),preparedAnimations}function cssClassesIntersection(a,b){a=a.split(" "),b=b.split(" ");for(var matches=[],i=0;i<a.length;i++){var aa=a[i];if("ng-"!==aa.substring(0,3))for(var j=0;j<b.length;j++)if(aa===b[j]){matches.push(aa);break}}return matches.join(" ")}function invokeFirstDriver(animationDetails){for(var i=drivers.length-1;i>=0;i--){var driverName=drivers[i],factory=$injector.get(driverName),driver=factory(animationDetails);if(driver)return driver}}function beforeStart(){element.addClass(NG_ANIMATE_CLASSNAME),tempClasses&&$$jqLite.addClass(element,tempClasses),prepareClassName&&($$jqLite.removeClass(element,prepareClassName),prepareClassName=null)}function updateAnimationRunners(animation,newRunner){function update(element){var runner=getRunner(element);runner&&runner.setHost(newRunner)}animation.from&&animation.to?(update(animation.from.element),update(animation.to.element)):update(animation.element)}function handleDestroyedElement(){var runner=getRunner(element);!runner||"leave"===event&&options.$$domOperationFired||runner.end()}function close(rejected){element.off("$destroy",handleDestroyedElement),removeRunner(element),applyAnimationClasses(element,options),applyAnimationStyles(element,options),options.domOperation(),tempClasses&&$$jqLite.removeClass(element,tempClasses),element.removeClass(NG_ANIMATE_CLASSNAME),runner.complete(!rejected)}options=prepareAnimationOptions(options);var isStructural=["enter","move","leave"].indexOf(event)>=0,runner=new $$AnimateRunner({end:function(){close()},cancel:function(){close(!0)}});if(!drivers.length)return close(),runner;setRunner(element,runner);var classes=mergeClasses(element.attr("class"),mergeClasses(options.addClass,options.removeClass)),tempClasses=options.tempClasses;tempClasses&&(classes+=" "+tempClasses,options.tempClasses=null);var prepareClassName;return isStructural&&(prepareClassName="ng-"+event+"-prepare",$$jqLite.addClass(element,prepareClassName)),animationQueue.push({element:element,classes:classes,event:event,structural:isStructural,options:options,beforeStart:beforeStart,close:close}),element.on("$destroy",handleDestroyedElement),animationQueue.length>1?runner:($rootScope.$$postDigest(function(){var animations=[];forEach(animationQueue,function(entry){getRunner(entry.element)?animations.push(entry):entry.close()}),animationQueue.length=0;var groupedAnimations=groupAnimations(animations),toBeSortedAnimations=[];forEach(groupedAnimations,function(animationEntry){toBeSortedAnimations.push({domNode:getDomNode(animationEntry.from?animationEntry.from.element:animationEntry.element),fn:function(){animationEntry.beforeStart();var startAnimationFn,closeFn=animationEntry.close;if(getRunner(animationEntry.anchors?animationEntry.from.element||animationEntry.to.element:animationEntry.element)){var operation=invokeFirstDriver(animationEntry);operation&&(startAnimationFn=operation.start)}if(startAnimationFn){var animationRunner=startAnimationFn();animationRunner.done(function(status){closeFn(!status)}),updateAnimationRunners(animationEntry,animationRunner)}else closeFn()}})}),$$rAFScheduler(sortAnimations(toBeSortedAnimations))}),runner)}}]}],ngAnimateSwapDirective=["$animate","$rootScope",function($animate,$rootScope){return{restrict:"A",transclude:"element",terminal:!0,priority:600,link:function(scope,$element,attrs,ctrl,$transclude){var previousElement,previousScope;scope.$watchCollection(attrs.ngAnimateSwap||attrs.for,function(value){previousElement&&$animate.leave(previousElement),previousScope&&(previousScope.$destroy(),previousScope=null),(value||0===value)&&(previousScope=scope.$new(),$transclude(previousScope,function(element){previousElement=element,$animate.enter(element,null,$element)}))})}}}];angular.module("ngAnimate",[],function(){noop=angular.noop,copy=angular.copy,extend=angular.extend,jqLite=angular.element,forEach=angular.forEach,isArray=angular.isArray,isString=angular.isString,isObject=angular.isObject,isUndefined=angular.isUndefined,isDefined=angular.isDefined,isFunction=angular.isFunction,isElement=angular.isElement}).info({angularVersion:"1.6.4"}).directive("ngAnimateSwap",ngAnimateSwapDirective).directive("ngAnimateChildren",$$AnimateChildrenDirective).factory("$$rAFScheduler",$$rAFSchedulerFactory).provider("$$animateQueue",$$AnimateQueueProvider).provider("$$animation",$$AnimationProvider).provider("$animateCss",$AnimateCssProvider).provider("$$animateCssDriver",$$AnimateCssDriverProvider).provider("$$animateJs",$$AnimateJsProvider).provider("$$animateJsDriver",$$AnimateJsDriverProvider)}(window,window.angular),function(window,angular){"use strict";function $AriaProvider(){function watchExpr(attrName,ariaAttr,nodeBlackList,negate){return function(scope,elem,attr){var ariaCamelName=attr.$normalize(ariaAttr);!config[ariaCamelName]||isNodeOneOf(elem,nodeBlackList)||attr[ariaCamelName]||scope.$watch(attr[attrName],function(boolVal){boolVal=negate?!boolVal:!!boolVal,elem.attr(ariaAttr,boolVal)})}}var config={ariaHidden:!0,ariaChecked:!0,ariaReadonly:!0,ariaDisabled:!0,ariaRequired:!0,ariaInvalid:!0,ariaValue:!0,tabindex:!0,bindKeydown:!0,bindRoleForClick:!0};this.config=function(newConfig){config=angular.extend(config,newConfig)},this.$get=function(){return{config:function(key){return config[key]},$$watchExpr:watchExpr}}}var ngAriaModule=angular.module("ngAria",["ng"]).info({angularVersion:"1.6.4"}).provider("$aria",$AriaProvider),nodeBlackList=["BUTTON","A","INPUT","TEXTAREA","SELECT","DETAILS","SUMMARY"],isNodeOneOf=function(elem,nodeTypeArray){if(-1!==nodeTypeArray.indexOf(elem[0].nodeName))return!0};ngAriaModule.directive("ngShow",["$aria",function($aria){return $aria.$$watchExpr("ngShow","aria-hidden",[],!0)}]).directive("ngHide",["$aria",function($aria){return $aria.$$watchExpr("ngHide","aria-hidden",[],!1)}]).directive("ngValue",["$aria",function($aria){return $aria.$$watchExpr("ngValue","aria-checked",nodeBlackList,!1)}]).directive("ngChecked",["$aria",function($aria){return $aria.$$watchExpr("ngChecked","aria-checked",nodeBlackList,!1)}]).directive("ngReadonly",["$aria",function($aria){return $aria.$$watchExpr("ngReadonly","aria-readonly",nodeBlackList,!1)}]).directive("ngRequired",["$aria",function($aria){return $aria.$$watchExpr("ngRequired","aria-required",nodeBlackList,!1)}]).directive("ngModel",["$aria",function($aria){function shouldAttachAttr(attr,normalizedAttr,elem,allowBlacklistEls){return $aria.config(normalizedAttr)&&!elem.attr(attr)&&(allowBlacklistEls||!isNodeOneOf(elem,nodeBlackList))}function shouldAttachRole(role,elem){return!elem.attr("role")&&elem.attr("type")===role&&!isNodeOneOf(elem,nodeBlackList)}function getShape(attr,elem){var type=attr.type,role=attr.role;return"checkbox"===(type||role)||"menuitemcheckbox"===role?"checkbox":"radio"===(type||role)||"menuitemradio"===role?"radio":"range"===type||"progressbar"===role||"slider"===role?"range":""}return{restrict:"A",require:"ngModel",priority:200,compile:function(elem,attr){var shape=getShape(attr,elem);return{post:function(scope,elem,attr,ngModel){function ngAriaWatchModelValue(){return ngModel.$modelValue}function getRadioReaction(newVal){var boolVal=attr.value==ngModel.$viewValue;elem.attr("aria-checked",boolVal)}function getCheckboxReaction(){elem.attr("aria-checked",!ngModel.$isEmpty(ngModel.$viewValue))}var needsTabIndex=shouldAttachAttr("tabindex","tabindex",elem,!1);switch(shape){case"radio":case"checkbox":shouldAttachRole(shape,elem)&&elem.attr("role",shape),shouldAttachAttr("aria-checked","ariaChecked",elem,!1)&&scope.$watch(ngAriaWatchModelValue,"radio"===shape?getRadioReaction:getCheckboxReaction),needsTabIndex&&elem.attr("tabindex",0);break;case"range":if(shouldAttachRole(shape,elem)&&elem.attr("role","slider"),$aria.config("ariaValue")){var needsAriaValuemin=!elem.attr("aria-valuemin")&&(attr.hasOwnProperty("min")||attr.hasOwnProperty("ngMin")),needsAriaValuemax=!elem.attr("aria-valuemax")&&(attr.hasOwnProperty("max")||attr.hasOwnProperty("ngMax")),needsAriaValuenow=!elem.attr("aria-valuenow");needsAriaValuemin&&attr.$observe("min",function(newVal){elem.attr("aria-valuemin",newVal)}),needsAriaValuemax&&attr.$observe("max",function(newVal){elem.attr("aria-valuemax",newVal)}),needsAriaValuenow&&scope.$watch(ngAriaWatchModelValue,function(newVal){elem.attr("aria-valuenow",newVal)})}needsTabIndex&&elem.attr("tabindex",0)}!attr.hasOwnProperty("ngRequired")&&ngModel.$validators.required&&shouldAttachAttr("aria-required","ariaRequired",elem,!1)&&attr.$observe("required",function(){elem.attr("aria-required",!!attr.required)}),shouldAttachAttr("aria-invalid","ariaInvalid",elem,!0)&&scope.$watch(function(){return ngModel.$invalid},function(newVal){elem.attr("aria-invalid",!!newVal)})}}}}}]).directive("ngDisabled",["$aria",function($aria){return $aria.$$watchExpr("ngDisabled","aria-disabled",nodeBlackList,!1)}]).directive("ngMessages",function(){return{restrict:"A",require:"?ngMessages",link:function(scope,elem,attr,ngMessages){elem.attr("aria-live")||elem.attr("aria-live","assertive")}}}).directive("ngClick",["$aria","$parse",function($aria,$parse){return{restrict:"A",compile:function(elem,attr){var fn=$parse(attr.ngClick);return function(scope,elem,attr){isNodeOneOf(elem,nodeBlackList)||($aria.config("bindRoleForClick")&&!elem.attr("role")&&elem.attr("role","button"),$aria.config("tabindex")&&!elem.attr("tabindex")&&elem.attr("tabindex",0),!$aria.config("bindKeydown")||attr.ngKeydown||attr.ngKeypress||attr.ngKeyup||elem.on("keydown",function(event){function callback(){fn(scope,{$event:event})}var keyCode=event.which||event.keyCode;32!==keyCode&&13!==keyCode||scope.$apply(callback)}))}}}}]).directive("ngDblclick",["$aria",function($aria){return function(scope,elem,attr){!$aria.config("tabindex")||elem.attr("tabindex")||isNodeOneOf(elem,nodeBlackList)||elem.attr("tabindex",0)}}])}(window,window.angular),function(window,angular){"use strict";function ngMessageDirectiveFactory(){function contains(collection,key){if(collection)return isArray(collection)?collection.indexOf(key)>=0:collection.hasOwnProperty(key)}return["$animate",function($animate){return{restrict:"AE",transclude:"element",priority:1,terminal:!0,require:"^^ngMessages",link:function(scope,element,attrs,ngMessagesCtrl,$transclude){var records,commentNode=element[0],staticExp=attrs.ngMessage||attrs.when,dynamicExp=attrs.ngMessageExp||attrs.whenExp,assignRecords=function(items){records=items?isArray(items)?items:items.split(/[\s,]+/):null,ngMessagesCtrl.reRender()};dynamicExp?(assignRecords(scope.$eval(dynamicExp)),scope.$watchCollection(dynamicExp,assignRecords)):assignRecords(staticExp);var currentElement,messageCtrl;ngMessagesCtrl.register(commentNode,messageCtrl={test:function(name){return contains(records,name)},attach:function(){currentElement||$transclude(function(elm,newScope){$animate.enter(elm,null,element),currentElement=elm;var $$attachId=currentElement.$$attachId=ngMessagesCtrl.getAttachId();currentElement.on("$destroy",function(){currentElement&&currentElement.$$attachId===$$attachId&&(ngMessagesCtrl.deregister(commentNode),messageCtrl.detach()),newScope.$destroy()})})},detach:function(){if(currentElement){var elm=currentElement;currentElement=null,$animate.leave(elm)}}})}}}]}var forEach,isArray,isString,jqLite;angular.module("ngMessages",[],function(){forEach=angular.forEach,isArray=angular.isArray,isString=angular.isString,jqLite=angular.element}).info({angularVersion:"1.6.4"}).directive("ngMessages",["$animate",function($animate){function isAttrTruthy(scope,attr){return isString(attr)&&0===attr.length||truthy(scope.$eval(attr))}function truthy(val){return isString(val)?val.length:!!val}return{require:"ngMessages",restrict:"AE",controller:["$element","$scope","$attrs",function($element,$scope,$attrs){function findPreviousMessage(parent,comment){for(var prevNode=comment,parentLookup=[];prevNode&&prevNode!==parent;){var prevKey=prevNode.$$ngMessageNode;if(prevKey&&prevKey.length)return messages[prevKey];prevNode.childNodes.length&&-1===parentLookup.indexOf(prevNode)?(parentLookup.push(prevNode),prevNode=prevNode.childNodes[prevNode.childNodes.length-1]):prevNode.previousSibling?prevNode=prevNode.previousSibling:(prevNode=prevNode.parentNode,parentLookup.push(prevNode))}}function insertMessageNode(parent,comment,key){var messageNode=messages[key];if(ctrl.head){var match=findPreviousMessage(parent,comment);match?(messageNode.next=match.next,match.next=messageNode):(messageNode.next=ctrl.head,ctrl.head=messageNode)}else ctrl.head=messageNode}function removeMessageNode(parent,comment,key){var messageNode=messages[key],match=findPreviousMessage(parent,comment);match?match.next=messageNode.next:ctrl.head=messageNode.next}var ctrl=this,latestKey=0,nextAttachId=0;this.getAttachId=function(){return nextAttachId++};var renderLater,cachedCollection,messages=this.messages={};this.render=function(collection){collection=collection||{},renderLater=!1,cachedCollection=collection;for(var multiple=isAttrTruthy($scope,$attrs.ngMessagesMultiple)||isAttrTruthy($scope,$attrs.multiple),unmatchedMessages=[],matchedKeys={},messageItem=ctrl.head,messageFound=!1,totalMessages=0;null!=messageItem;){totalMessages++;var messageCtrl=messageItem.message,messageUsed=!1;messageFound||forEach(collection,function(value,key){if(!messageUsed&&truthy(value)&&messageCtrl.test(key)){if(matchedKeys[key])return;matchedKeys[key]=!0,messageUsed=!0,messageCtrl.attach()}}),messageUsed?messageFound=!multiple:unmatchedMessages.push(messageCtrl),messageItem=messageItem.next}forEach(unmatchedMessages,function(messageCtrl){messageCtrl.detach()}),unmatchedMessages.length!==totalMessages?$animate.setClass($element,"ng-active","ng-inactive"):$animate.setClass($element,"ng-inactive","ng-active")},$scope.$watchCollection($attrs.ngMessages||$attrs.for,ctrl.render),$element.on("$destroy",function(){forEach(messages,function(item){item.message.detach()})}),this.reRender=function(){renderLater||(renderLater=!0,$scope.$evalAsync(function(){renderLater&&cachedCollection&&ctrl.render(cachedCollection)}))},this.register=function(comment,messageCtrl){var nextKey=latestKey.toString();messages[nextKey]={message:messageCtrl},insertMessageNode($element[0],comment,nextKey),comment.$$ngMessageNode=nextKey,latestKey++,ctrl.reRender()},this.deregister=function(comment){var key=comment.$$ngMessageNode;delete comment.$$ngMessageNode,removeMessageNode($element[0],comment,key),delete messages[key],ctrl.reRender()}}]}}]).directive("ngMessagesInclude",["$templateRequest","$document","$compile",function($templateRequest,$document,$compile){function replaceElementWithMarker(element,src){var comment=$compile.$$createComment?$compile.$$createComment("ngMessagesInclude",src):$document[0].createComment(" ngMessagesInclude: "+src+" "),marker=jqLite(comment);element.after(marker),element.remove()}return{restrict:"AE",require:"^^ngMessages",link:function($scope,element,attrs){var src=attrs.ngMessagesInclude||attrs.src;$templateRequest(src).then(function(html){$scope.$$destroyed||(isString(html)&&!html.trim()?replaceElementWithMarker(element,src):$compile(html)($scope,function(contents){element.after(contents),replaceElementWithMarker(element,src)}))})}}}]).directive("ngMessage",ngMessageDirectiveFactory()).directive("ngMessageExp",ngMessageDirectiveFactory())}(window,window.angular),function(window,angular){"use strict";function isValidDottedPath(path){return null!=path&&""!==path&&"hasOwnProperty"!==path&&MEMBER_NAME_REGEX.test("."+path)}function lookupDottedPath(obj,path){if(!isValidDottedPath(path))throw $resourceMinErr("badmember",'Dotted member path "@{0}" is invalid.',path);for(var keys=path.split("."),i=0,ii=keys.length;i<ii&&angular.isDefined(obj);i++){var key=keys[i];obj=null!==obj?obj[key]:void 0}return obj}function shallowClearAndCopy(src,dst){dst=dst||{},angular.forEach(dst,function(value,key){delete dst[key]});for(var key in src)!src.hasOwnProperty(key)||"$"===key.charAt(0)&&"$"===key.charAt(1)||(dst[key]=src[key]);return dst}var $resourceMinErr=angular.$$minErr("$resource"),MEMBER_NAME_REGEX=/^(\.[a-zA-Z_$@][0-9a-zA-Z_$@]*)+$/;angular.module("ngResource",["ng"]).info({angularVersion:"1.6.4"}).provider("$resource",function(){var provider=this;this.defaults={stripTrailingSlashes:!0,cancellable:!1,actions:{get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},delete:{method:"DELETE"}}},this.$get=["$http","$log","$q","$timeout",function($http,$log,$q,$timeout){function Route(template,defaults){this.template=template,this.defaults=extend({},provider.defaults,defaults),this.urlParams={}}function resourceFactory(url,paramDefaults,actions,options){function extractParams(data,actionParams){var ids={};return actionParams=extend({},paramDefaults,actionParams),forEach(actionParams,function(value,key){isFunction(value)&&(value=value(data)),ids[key]=value&&value.charAt&&"@"===value.charAt(0)?lookupDottedPath(data,value.substr(1)):value}),ids}function defaultResponseInterceptor(response){return response.resource}function Resource(value){shallowClearAndCopy(value||{},this)}var route=new Route(url,options);return actions=extend({},provider.defaults.actions,actions),Resource.prototype.toJSON=function(){var data=extend({},this);return delete data.$promise,delete data.$resolved,delete data.$cancelRequest,data},forEach(actions,function(action,name){var hasBody=!0===action.hasBody||!1!==action.hasBody&&/^(POST|PUT|PATCH)$/i.test(action.method),numericTimeout=action.timeout,cancellable=isDefined(action.cancellable)?action.cancellable:route.defaults.cancellable;numericTimeout&&!isNumber(numericTimeout)&&($log.debug("ngResource:\n  Only numeric values are allowed as `timeout`.\n  Promises are not supported in $resource, because the same value would be used for multiple requests. If you are looking for a way to cancel requests, you should use the `cancellable` option."),delete action.timeout,numericTimeout=null),Resource[name]=function(a1,a2,a3,a4){function cancelRequest(value){promise.catch(noop),timeoutDeferred.resolve(value)}var data,success,error,params={};switch(arguments.length){case 4:error=a4,success=a3;case 3:case 2:if(!isFunction(a2)){params=a1,data=a2,success=a3;break}if(isFunction(a1)){success=a1,error=a2;break}success=a2,error=a3;case 1:isFunction(a1)?success=a1:hasBody?data=a1:params=a1;break;case 0:break;default:throw $resourceMinErr("badargs","Expected up to 4 arguments [params, data, success, error], got {0} arguments",arguments.length)}var timeoutDeferred,numericTimeoutPromise,isInstanceCall=this instanceof Resource,value=isInstanceCall?data:action.isArray?[]:new Resource(data),httpConfig={},responseInterceptor=action.interceptor&&action.interceptor.response||defaultResponseInterceptor,responseErrorInterceptor=action.interceptor&&action.interceptor.responseError||void 0,hasError=!!error,hasResponseErrorInterceptor=!!responseErrorInterceptor;forEach(action,function(value,key){switch(key){default:httpConfig[key]=copy(value);break;case"params":case"isArray":case"interceptor":case"cancellable":}}),!isInstanceCall&&cancellable&&(timeoutDeferred=$q.defer(),httpConfig.timeout=timeoutDeferred.promise,numericTimeout&&(numericTimeoutPromise=$timeout(timeoutDeferred.resolve,numericTimeout))),hasBody&&(httpConfig.data=data),route.setUrlParams(httpConfig,extend({},extractParams(data,action.params||{}),params),action.url);var promise=$http(httpConfig).then(function(response){var data=response.data;if(data){if(isArray(data)!==!!action.isArray)throw $resourceMinErr("badcfg","Error in resource configuration for action `{0}`. Expected response to contain an {1} but got an {2} (Request: {3} {4})",name,action.isArray?"array":"object",isArray(data)?"array":"object",httpConfig.method,httpConfig.url);if(action.isArray)value.length=0,forEach(data,function(item){"object"==typeof item?value.push(new Resource(item)):value.push(item)});else{var promise=value.$promise;shallowClearAndCopy(data,value),value.$promise=promise}}return response.resource=value,response});return promise=promise.finally(function(){value.$resolved=!0,!isInstanceCall&&cancellable&&(value.$cancelRequest=noop,$timeout.cancel(numericTimeoutPromise),timeoutDeferred=numericTimeoutPromise=httpConfig.timeout=null)}),promise=promise.then(function(response){var value=responseInterceptor(response);return(success||noop)(value,response.headers,response.status,response.statusText),value},hasError||hasResponseErrorInterceptor?function(response){
return hasError&&!hasResponseErrorInterceptor&&promise.catch(noop),hasError&&error(response),hasResponseErrorInterceptor?responseErrorInterceptor(response):$q.reject(response)}:void 0),isInstanceCall?promise:(value.$promise=promise,value.$resolved=!1,cancellable&&(value.$cancelRequest=cancelRequest),value)},Resource.prototype["$"+name]=function(params,success,error){isFunction(params)&&(error=success,success=params,params={});var result=Resource[name].call(this,params,this,success,error);return result.$promise||result}}),Resource.bind=function(additionalParamDefaults){var extendedParamDefaults=extend({},paramDefaults,additionalParamDefaults);return resourceFactory(url,extendedParamDefaults,actions,options)},Resource}var noop=angular.noop,forEach=angular.forEach,extend=angular.extend,copy=angular.copy,isArray=angular.isArray,isDefined=angular.isDefined,isFunction=angular.isFunction,isNumber=angular.isNumber,encodeUriQuery=angular.$$encodeUriQuery,encodeUriSegment=angular.$$encodeUriSegment;return Route.prototype={setUrlParams:function(config,params,actionUrl){var val,encodedVal,self=this,url=actionUrl||self.template,protocolAndIpv6="",urlParams=self.urlParams=Object.create(null);forEach(url.split(/\W/),function(param){if("hasOwnProperty"===param)throw $resourceMinErr("badname","hasOwnProperty is not a valid parameter name.");!new RegExp("^\\d+$").test(param)&&param&&new RegExp("(^|[^\\\\]):"+param+"(\\W|$)").test(url)&&(urlParams[param]={isQueryParamValue:new RegExp("\\?.*=:"+param+"(?:\\W|$)").test(url)})}),url=url.replace(/\\:/g,":"),url=url.replace(/^https?:\/\/\[[^\]]*][^\/]*/,function(match){return protocolAndIpv6=match,""}),params=params||{},forEach(self.urlParams,function(paramInfo,urlParam){val=params.hasOwnProperty(urlParam)?params[urlParam]:self.defaults[urlParam],isDefined(val)&&null!==val?(encodedVal=paramInfo.isQueryParamValue?encodeUriQuery(val,!0):encodeUriSegment(val),url=url.replace(new RegExp(":"+urlParam+"(\\W|$)","g"),function(match,p1){return encodedVal+p1})):url=url.replace(new RegExp("(/?):"+urlParam+"(\\W|$)","g"),function(match,leadingSlashes,tail){return"/"===tail.charAt(0)?tail:leadingSlashes+tail})}),self.defaults.stripTrailingSlashes&&(url=url.replace(/\/+$/,"")||"/"),url=url.replace(/\/\.(?=\w+($|\?))/,"."),config.url=protocolAndIpv6+url.replace(/\/(\\|%5C)\./,"/."),forEach(params,function(value,key){self.urlParams[key]||(config.params=config.params||{},config.params[key]=value)})}},resourceFactory}]})}(window,window.angular),"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="ui.router"),function(window,angular,undefined){"use strict";function inherit(parent,extra){return extend(new(extend(function(){},{prototype:parent})),extra)}function merge(dst){return forEach(arguments,function(obj){obj!==dst&&forEach(obj,function(value,key){dst.hasOwnProperty(key)||(dst[key]=value)})}),dst}function ancestors(first,second){var path=[];for(var n in first.path){if(first.path[n]!==second.path[n])break;path.push(first.path[n])}return path}function objectKeys(object){if(Object.keys)return Object.keys(object);var result=[];return forEach(object,function(val,key){result.push(key)}),result}function indexOf(array,value){if(Array.prototype.indexOf)return array.indexOf(value,Number(arguments[2])||0);var len=array.length>>>0,from=Number(arguments[2])||0;for(from=from<0?Math.ceil(from):Math.floor(from),from<0&&(from+=len);from<len;from++)if(from in array&&array[from]===value)return from;return-1}function inheritParams(currentParams,newParams,$current,$to){var parentParams,parents=ancestors($current,$to),inherited={},inheritList=[];for(var i in parents)if(parents[i]&&parents[i].params&&(parentParams=objectKeys(parents[i].params),parentParams.length))for(var j in parentParams)indexOf(inheritList,parentParams[j])>=0||(inheritList.push(parentParams[j]),inherited[parentParams[j]]=currentParams[parentParams[j]]);return extend({},inherited,newParams)}function equalForKeys(a,b,keys){if(!keys){keys=[];for(var n in a)keys.push(n)}for(var i=0;i<keys.length;i++){var k=keys[i];if(a[k]!=b[k])return!1}return!0}function filterByKeys(keys,values){var filtered={};return forEach(keys,function(name){filtered[name]=values[name]}),filtered}function pick(obj){var copy={},keys=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));return forEach(keys,function(key){key in obj&&(copy[key]=obj[key])}),copy}function omit(obj){var copy={},keys=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));for(var key in obj)-1==indexOf(keys,key)&&(copy[key]=obj[key]);return copy}function filter(collection,callback){var array=isArray(collection),result=array?[]:{};return forEach(collection,function(val,i){callback(val,i)&&(result[array?result.length:i]=val)}),result}function map(collection,callback){var result=isArray(collection)?[]:{};return forEach(collection,function(val,i){result[i]=callback(val,i)}),result}function silenceUncaughtInPromise(promise){return promise.then(undefined,function(){})&&promise}function $Resolve($q,$injector){var VISIT_IN_PROGRESS=1,VISIT_DONE=2,NOTHING={},NO_DEPENDENCIES=[],NO_LOCALS=NOTHING,NO_PARENT=extend($q.when(NOTHING),{$$promises:NOTHING,$$values:NOTHING});this.study=function(invocables){function visit(value,key){if(visited[key]!==VISIT_DONE){if(cycle.push(key),visited[key]===VISIT_IN_PROGRESS)throw cycle.splice(0,indexOf(cycle,key)),new Error("Cyclic dependency: "+cycle.join(" -> "));if(visited[key]=VISIT_IN_PROGRESS,isString(value))plan.push(key,[function(){return $injector.get(value)}],NO_DEPENDENCIES);else{var params=$injector.annotate(value);forEach(params,function(param){param!==key&&invocables.hasOwnProperty(param)&&visit(invocables[param],param)}),plan.push(key,value,params)}cycle.pop(),visited[key]=VISIT_DONE}}function isResolve(value){return isObject(value)&&value.then&&value.$$promises}if(!isObject(invocables))throw new Error("'invocables' must be an object");var invocableKeys=objectKeys(invocables||{}),plan=[],cycle=[],visited={};return forEach(invocables,visit),invocables=cycle=visited=null,function(locals,parent,self){function done(){--wait||(merged||merge(values,parent.$$values),result.$$values=values,result.$$promises=result.$$promises||!0,delete result.$$inheritedValues,resolution.resolve(values))}function fail(reason){result.$$failure=reason,resolution.reject(reason)}if(isResolve(locals)&&self===undefined&&(self=parent,parent=locals,locals=null),locals){if(!isObject(locals))throw new Error("'locals' must be an object")}else locals=NO_LOCALS;if(parent){if(!isResolve(parent))throw new Error("'parent' must be a promise returned by $resolve.resolve()")}else parent=NO_PARENT;var resolution=$q.defer(),result=resolution.promise,promises=result.$$promises={},values=extend({},locals),wait=1+plan.length/3,merged=!1;if(isDefined(parent.$$failure))return fail(parent.$$failure),result;parent.$$inheritedValues&&merge(values,omit(parent.$$inheritedValues,invocableKeys)),extend(promises,parent.$$promises),parent.$$values?(merged=merge(values,omit(parent.$$values,invocableKeys)),result.$$inheritedValues=omit(parent.$$values,invocableKeys),done()):(parent.$$inheritedValues&&(result.$$inheritedValues=omit(parent.$$inheritedValues,invocableKeys)),parent.then(done,fail));for(var i=0,ii=plan.length;i<ii;i+=3)locals.hasOwnProperty(plan[i])?done():function(key,invocable,params){function onfailure(reason){invocation.reject(reason),fail(reason)}function proceed(){if(!isDefined(result.$$failure))try{invocation.resolve($injector.invoke(invocable,self,values)),invocation.promise.then(function(result){values[key]=result,done()},onfailure)}catch(e){onfailure(e)}}var invocation=$q.defer(),waitParams=0;forEach(params,function(dep){promises.hasOwnProperty(dep)&&!locals.hasOwnProperty(dep)&&(waitParams++,promises[dep].then(function(result){values[dep]=result,--waitParams||proceed()},onfailure))}),waitParams||proceed(),promises[key]=invocation.promise}(plan[i],plan[i+1],plan[i+2]);return result}},this.resolve=function(invocables,locals,parent,self){return this.study(invocables)(locals,parent,self)}}function $TemplateFactory($http,$templateCache,$injector){this.fromConfig=function(config,params,locals){return isDefined(config.template)?this.fromString(config.template,params):isDefined(config.templateUrl)?this.fromUrl(config.templateUrl,params):isDefined(config.templateProvider)?this.fromProvider(config.templateProvider,params,locals):null},this.fromString=function(template,params){return isFunction(template)?template(params):template},this.fromUrl=function(url,params){return isFunction(url)&&(url=url(params)),null==url?null:$http.get(url,{cache:$templateCache,headers:{Accept:"text/html"}}).then(function(response){return response.data})},this.fromProvider=function(provider,params,locals){return $injector.invoke(provider,null,locals||{params:params})}}function UrlMatcher(pattern,config,parentMatcher){function addParameter(id,type,config,location){if(paramNames.push(id),parentParams[id])return parentParams[id];if(!/^\w+([-.]+\w+)*(?:\[\])?$/.test(id))throw new Error("Invalid parameter name '"+id+"' in pattern '"+pattern+"'");if(params[id])throw new Error("Duplicate parameter name '"+id+"' in pattern '"+pattern+"'");return params[id]=new $$UMFP.Param(id,type,config,location),params[id]}function quoteRegExp(string,pattern,squash,optional){var surroundPattern=["",""],result=string.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!pattern)return result;switch(squash){case!1:surroundPattern=["(",")"+(optional?"?":"")];break;case!0:result=result.replace(/\/$/,""),surroundPattern=["(?:/(",")|/)?"];break;default:surroundPattern=["("+squash+"|",")?"]}return result+surroundPattern[0]+pattern+surroundPattern[1]}function matchDetails(m,isSearch){var id,regexp,segment,type,cfg;return id=m[2]||m[3],cfg=config.params[id],segment=pattern.substring(last,m.index),regexp=isSearch?m[4]:m[4]||("*"==m[1]?".*":null),regexp&&(type=$$UMFP.type(regexp)||inherit($$UMFP.type("string"),{pattern:new RegExp(regexp,config.caseInsensitive?"i":undefined)})),{id:id,regexp:regexp,segment:segment,type:type,cfg:cfg}}config=extend({params:{}},isObject(config)?config:{});var m,placeholder=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,searchPlaceholder=/([:]?)([\w\[\].-]+)|\{([\w\[\].-]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,compiled="^",last=0,segments=this.segments=[],parentParams=parentMatcher?parentMatcher.params:{},params=this.params=parentMatcher?parentMatcher.params.$$new():new $$UMFP.ParamSet,paramNames=[];this.source=pattern;for(var p,param,segment;(m=placeholder.exec(pattern))&&(p=matchDetails(m,!1),!(p.segment.indexOf("?")>=0));)param=addParameter(p.id,p.type,p.cfg,"path"),compiled+=quoteRegExp(p.segment,param.type.pattern.source,param.squash,param.isOptional),segments.push(p.segment),last=placeholder.lastIndex;segment=pattern.substring(last);var i=segment.indexOf("?");if(i>=0){var search=this.sourceSearch=segment.substring(i);if(segment=segment.substring(0,i),this.sourcePath=pattern.substring(0,last+i),search.length>0)for(last=0;m=searchPlaceholder.exec(search);)p=matchDetails(m,!0),param=addParameter(p.id,p.type,p.cfg,"search"),last=placeholder.lastIndex}else this.sourcePath=pattern,this.sourceSearch="";compiled+=quoteRegExp(segment)+(!1===config.strict?"/?":"")+"$",segments.push(segment),this.regexp=new RegExp(compiled,config.caseInsensitive?"i":undefined),this.prefix=segments[0],this.$$paramNames=paramNames}function Type(config){extend(this,config)}function $UrlMatcherFactory(){function valToString(val){return null!=val?val.toString().replace(/(~|\/)/g,function(m){return{"~":"~~","/":"~2F"}[m]}):val}function valFromString(val){return null!=val?val.toString().replace(/(~~|~2F)/g,function(m){return{"~~":"~","~2F":"/"}[m]}):val}function getDefaultConfig(){return{strict:isStrictMode,caseInsensitive:isCaseInsensitive}}function isInjectable(value){return isFunction(value)||isArray(value)&&isFunction(value[value.length-1])}function flushTypeQueue(){for(;typeQueue.length;){var type=typeQueue.shift();if(type.pattern)throw new Error("You cannot override a type's .pattern at runtime.");angular.extend($types[type.name],injector.invoke(type.def))}}function ParamSet(params){extend(this,params||{})}$$UMFP=this;var injector,isCaseInsensitive=!1,isStrictMode=!0,defaultSquashPolicy=!1,$types={},enqueue=!0,typeQueue=[],defaultTypes={string:{encode:valToString,decode:valFromString,is:function(val){return null==val||!isDefined(val)||"string"==typeof val},pattern:/[^\/]*/},int:{encode:valToString,decode:function(val){return parseInt(val,10)},is:function(val){return isDefined(val)&&this.decode(val.toString())===val},pattern:/\d+/},bool:{encode:function(val){return val?1:0},decode:function(val){return 0!==parseInt(val,10)},is:function(val){return!0===val||!1===val},pattern:/0|1/},date:{encode:function(val){return this.is(val)?[val.getFullYear(),("0"+(val.getMonth()+1)).slice(-2),("0"+val.getDate()).slice(-2)].join("-"):undefined},decode:function(val){if(this.is(val))return val;var match=this.capture.exec(val);return match?new Date(match[1],match[2]-1,match[3]):undefined},is:function(val){return val instanceof Date&&!isNaN(val.valueOf())},equals:function(a,b){return this.is(a)&&this.is(b)&&a.toISOString()===b.toISOString()},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/},json:{encode:angular.toJson,decode:angular.fromJson,is:angular.isObject,equals:angular.equals,pattern:/[^\/]*/},any:{encode:angular.identity,decode:angular.identity,equals:angular.equals,pattern:/.*/}};$UrlMatcherFactory.$$getDefaultValue=function(config){if(!isInjectable(config.value))return config.value;if(!injector)throw new Error("Injectable functions cannot be called at configuration time");return injector.invoke(config.value)},this.caseInsensitive=function(value){return isDefined(value)&&(isCaseInsensitive=value),isCaseInsensitive},this.strictMode=function(value){return isDefined(value)&&(isStrictMode=value),isStrictMode},this.defaultSquashPolicy=function(value){if(!isDefined(value))return defaultSquashPolicy;if(!0!==value&&!1!==value&&!isString(value))throw new Error("Invalid squash policy: "+value+". Valid policies: false, true, arbitrary-string");return defaultSquashPolicy=value,value},this.compile=function(pattern,config){return new UrlMatcher(pattern,extend(getDefaultConfig(),config))},this.isMatcher=function(o){if(!isObject(o))return!1;var result=!0;return forEach(UrlMatcher.prototype,function(val,name){isFunction(val)&&(result=result&&isDefined(o[name])&&isFunction(o[name]))}),result},this.type=function(name,definition,definitionFn){if(!isDefined(definition))return $types[name];if($types.hasOwnProperty(name))throw new Error("A type named '"+name+"' has already been defined.");return $types[name]=new Type(extend({name:name},definition)),definitionFn&&(typeQueue.push({name:name,def:definitionFn}),enqueue||flushTypeQueue()),this},forEach(defaultTypes,function(type,name){$types[name]=new Type(extend({name:name},type))}),$types=inherit($types,{}),this.$get=["$injector",function($injector){return injector=$injector,enqueue=!1,flushTypeQueue(),forEach(defaultTypes,function(type,name){$types[name]||($types[name]=new Type(type))}),this}],this.Param=function(id,type,config,location){function $$getDefaultValue(){if(!injector)throw new Error("Injectable functions cannot be called at configuration time");var defaultValue=injector.invoke(config.$$fn);if(null!==defaultValue&&defaultValue!==undefined&&!self.type.is(defaultValue))throw new Error("Default value ("+defaultValue+") for parameter '"+self.id+"' is not an instance of Type ("+self.type.name+")");return defaultValue}function $value(value){function hasReplaceVal(val){return function(obj){return obj.from===val}}return value=function(value){var replacement=map(filter(self.replace,hasReplaceVal(value)),function(obj){return obj.to});return replacement.length?replacement[0]:value}(value),isDefined(value)?self.type.$normalize(value):$$getDefaultValue()}function toString(){return"{Param:"+id+" "+type+" squash: '"+squash+"' optional: "+isOptional+"}"}var self=this;config=function(config){var keys=isObject(config)?objectKeys(config):[];return-1===indexOf(keys,"value")&&-1===indexOf(keys,"type")&&-1===indexOf(keys,"squash")&&-1===indexOf(keys,"array")&&(config={value:config}),config.$$fn=isInjectable(config.value)?config.value:function(){return config.value},config}(config),type=function(config,urlType,location){if(config.type&&urlType)throw new Error("Param '"+id+"' has two type configurations.");return urlType||(config.type?angular.isString(config.type)?$types[config.type]:config.type instanceof Type?config.type:new Type(config.type):"config"===location?$types.any:$types.string)}(config,type,location);var arrayMode=function(){var arrayDefaults={array:"search"===location&&"auto"},arrayParamNomenclature=id.match(/\[\]$/)?{array:!0}:{};return extend(arrayDefaults,arrayParamNomenclature,config).array}();type=arrayMode?type.$asArray(arrayMode,"search"===location):type,"string"!==type.name||arrayMode||"path"!==location||config.value!==undefined||(config.value="");var isOptional=config.value!==undefined,squash=function(config,isOptional){var squash=config.squash;if(!isOptional||!1===squash)return!1;if(!isDefined(squash)||null==squash)return defaultSquashPolicy;if(!0===squash||isString(squash))return squash;throw new Error("Invalid squash policy: '"+squash+"'. Valid policies: false, true, or arbitrary string")}(config,isOptional),replace=function(config,arrayMode,isOptional,squash){var replace,configuredKeys,defaultPolicy=[{from:"",to:isOptional||arrayMode?undefined:""},{from:null,to:isOptional||arrayMode?undefined:""}];return replace=isArray(config.replace)?config.replace:[],isString(squash)&&replace.push({from:squash,to:undefined}),configuredKeys=map(replace,function(item){return item.from}),filter(defaultPolicy,function(item){return-1===indexOf(configuredKeys,item.from)}).concat(replace)}(config,arrayMode,isOptional,squash);extend(this,{id:id,type:type,location:location,array:arrayMode,squash:squash,replace:replace,isOptional:isOptional,value:$value,dynamic:undefined,config:config,toString:toString})},ParamSet.prototype={$$new:function(){return inherit(this,extend(new ParamSet,{$$parent:this}))},$$keys:function(){for(var keys=[],chain=[],parent=this,ignore=objectKeys(ParamSet.prototype);parent;)chain.push(parent),parent=parent.$$parent;return chain.reverse(),forEach(chain,function(paramset){forEach(objectKeys(paramset),function(key){-1===indexOf(keys,key)&&-1===indexOf(ignore,key)&&keys.push(key)})}),keys},$$values:function(paramValues){var values={},self=this;return forEach(self.$$keys(),function(key){values[key]=self[key].value(paramValues&&paramValues[key])}),values},$$equals:function(paramValues1,paramValues2){var equal=!0,self=this;return forEach(self.$$keys(),function(key){var left=paramValues1&&paramValues1[key],right=paramValues2&&paramValues2[key];self[key].type.equals(left,right)||(equal=!1)}),equal},$$validates:function(paramValues){var i,param,rawVal,normalized,encoded,keys=this.$$keys();for(i=0;i<keys.length&&(param=this[keys[i]],(rawVal=paramValues[keys[i]])!==undefined&&null!==rawVal||!param.isOptional);i++){if(normalized=param.type.$normalize(rawVal),!param.type.is(normalized))return!1;if(encoded=param.type.encode(normalized),angular.isString(encoded)&&!param.type.pattern.exec(encoded))return!1}return!0},$$parent:undefined},this.ParamSet=ParamSet}function $UrlRouterProvider($locationProvider,$urlMatcherFactory){function regExpPrefix(re){var prefix=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(re.source);return null!=prefix?prefix[1].replace(/\\(.)/g,"$1"):""}function interpolate(pattern,match){return pattern.replace(/\$(\$|\d{1,2})/,function(m,what){return match["$"===what?0:Number(what)]})}function handleIfMatch($injector,handler,match){if(!match)return!1;var result=$injector.invoke(handler,handler,{$match:match});return!isDefined(result)||result}function $get($location,$rootScope,$injector,$browser,$sniffer){function appendBasePath(url,isHtml5,absolute){return"/"===baseHref?url:isHtml5?baseHref.slice(0,-1)+url:absolute?baseHref.slice(1)+url:url}function update(evt){function check(rule){var handled=rule($injector,$location);return!!handled&&(isString(handled)&&$location.replace().url(handled),!0)}if(!evt||!evt.defaultPrevented){lastPushedUrl&&$location.url();lastPushedUrl=undefined;var i,n=rules.length;for(i=0;i<n;i++)if(check(rules[i]))return;otherwise&&check(otherwise)}}function listen(){return listener=listener||$rootScope.$on("$locationChangeSuccess",update)}var lastPushedUrl,baseHref=$browser.baseHref(),location=$location.url();return interceptDeferred||listen(),{sync:function(){update()},listen:function(){return listen()},update:function(read){if(read)return void(location=$location.url());$location.url()!==location&&($location.url(location),$location.replace())},push:function(urlMatcher,params,options){var url=urlMatcher.format(params||{});null!==url&&params&&params["#"]&&(url+="#"+params["#"]),$location.url(url),lastPushedUrl=options&&options.$$avoidResync?$location.url():undefined,options&&options.replace&&$location.replace()},href:function(urlMatcher,params,options){if(!urlMatcher.validates(params))return null;var isHtml5=$locationProvider.html5Mode();angular.isObject(isHtml5)&&(isHtml5=isHtml5.enabled),isHtml5=isHtml5&&$sniffer.history;var url=urlMatcher.format(params);if(options=options||{},isHtml5||null===url||(url="#"+$locationProvider.hashPrefix()+url),null!==url&&params&&params["#"]&&(url+="#"+params["#"]),url=appendBasePath(url,isHtml5,options.absolute),!options.absolute||!url)return url;var slash=!isHtml5&&url?"/":"",port=$location.port();return port=80===port||443===port?"":":"+port,[$location.protocol(),"://",$location.host(),port,slash,url].join("")}}}var listener,rules=[],otherwise=null,interceptDeferred=!1;this.rule=function(rule){if(!isFunction(rule))throw new Error("'rule' must be a function");return rules.push(rule),this},this.otherwise=function(rule){if(isString(rule)){var redirect=rule;rule=function(){return redirect}}else if(!isFunction(rule))throw new Error("'rule' must be a function");return otherwise=rule,this},this.when=function(what,handler){var redirect,handlerIsString=isString(handler);if(isString(what)&&(what=$urlMatcherFactory.compile(what)),!handlerIsString&&!isFunction(handler)&&!isArray(handler))throw new Error("invalid 'handler' in when()");var strategies={matcher:function(what,handler){return handlerIsString&&(redirect=$urlMatcherFactory.compile(handler),handler=["$match",function($match){return redirect.format($match)}]),extend(function($injector,$location){return handleIfMatch($injector,handler,what.exec($location.path(),$location.search()))},{prefix:isString(what.prefix)?what.prefix:""})},regex:function(what,handler){if(what.global||what.sticky)throw new Error("when() RegExp must not be global or sticky");return handlerIsString&&(redirect=handler,handler=["$match",function($match){return interpolate(redirect,$match)}]),extend(function($injector,$location){return handleIfMatch($injector,handler,what.exec($location.path()))},{prefix:regExpPrefix(what)})}},check={matcher:$urlMatcherFactory.isMatcher(what),regex:what instanceof RegExp};for(var n in check)if(check[n])return this.rule(strategies[n](what,handler));throw new Error("invalid 'what' in when()")},this.deferIntercept=function(defer){defer===undefined&&(defer=!0),interceptDeferred=defer},this.$get=$get,$get.$inject=["$location","$rootScope","$injector","$browser","$sniffer"]}function $StateProvider($urlRouterProvider,$urlMatcherFactory){function isRelative(stateName){return 0===stateName.indexOf(".")||0===stateName.indexOf("^")}function findState(stateOrName,base){if(!stateOrName)return undefined;var isStr=isString(stateOrName),name=isStr?stateOrName:stateOrName.name;if(isRelative(name)){if(!base)throw new Error("No reference point given for path '"+name+"'");base=findState(base);for(var rel=name.split("."),i=0,pathLength=rel.length,current=base;i<pathLength;i++)if(""!==rel[i]||0!==i){if("^"!==rel[i])break;if(!current.parent)throw new Error("Path '"+name+"' not valid for state '"+base.name+"'");current=current.parent}else current=base;rel=rel.slice(i).join("."),name=current.name+(current.name&&rel?".":"")+rel}var state=states[name];return!state||!isStr&&(isStr||state!==stateOrName&&state.self!==stateOrName)?undefined:state}function queueState(parentName,state){queue[parentName]||(queue[parentName]=[]),queue[parentName].push(state)}function flushQueuedChildren(parentName){for(var queued=queue[parentName]||[];queued.length;)registerState(queued.shift())}function registerState(state){state=inherit(state,{self:state,resolve:state.resolve||{},toString:function(){return this.name}});var name=state.name;if(!isString(name)||name.indexOf("@")>=0)throw new Error("State must have a valid name");if(states.hasOwnProperty(name))throw new Error("State '"+name+"' is already defined");var parentName=-1!==name.indexOf(".")?name.substring(0,name.lastIndexOf(".")):isString(state.parent)?state.parent:isObject(state.parent)&&isString(state.parent.name)?state.parent.name:"";if(parentName&&!states[parentName])return queueState(parentName,state.self);for(var key in stateBuilder)isFunction(stateBuilder[key])&&(state[key]=stateBuilder[key](state,stateBuilder.$delegates[key]));return states[name]=state,!state[abstractKey]&&state.url&&$urlRouterProvider.when(state.url,["$match","$stateParams",function($match,$stateParams){$state.$current.navigable==state&&equalForKeys($match,$stateParams)||$state.transitionTo(state,$match,{inherit:!0,location:!1})}]),flushQueuedChildren(name),state}function isGlob(text){return text.indexOf("*")>-1}function doesStateMatchGlob(glob){for(var globSegments=glob.split("."),segments=$state.$current.name.split("."),i=0,l=globSegments.length;i<l;i++)"*"===globSegments[i]&&(segments[i]="*");return"**"===globSegments[0]&&(segments=segments.slice(indexOf(segments,globSegments[1])),segments.unshift("**")),"**"===globSegments[globSegments.length-1]&&(segments.splice(indexOf(segments,globSegments[globSegments.length-2])+1,Number.MAX_VALUE),segments.push("**")),globSegments.length==segments.length&&segments.join("")===globSegments.join("")}function decorator(name,func){return isString(name)&&!isDefined(func)?stateBuilder[name]:isFunction(func)&&isString(name)?(stateBuilder[name]&&!stateBuilder.$delegates[name]&&(stateBuilder.$delegates[name]=stateBuilder[name]),stateBuilder[name]=func,this):this}function state(name,definition){return isObject(name)?definition=name:definition.name=name,registerState(definition),this}function $get($rootScope,$q,$view,$injector,$resolve,$stateParams,$urlRouter,$location,$urlMatcherFactory){function handleRedirect(redirect,state,params,options){var evt=$rootScope.$broadcast("$stateNotFound",redirect,state,params);if(evt.defaultPrevented)return $urlRouter.update(),TransitionAborted;if(!evt.retry)return null;if(options.$retry)return $urlRouter.update(),TransitionFailed;var retryTransition=$state.transition=$q.when(evt.retry);return retryTransition.then(function(){return retryTransition!==$state.transition?($rootScope.$broadcast("$stateChangeCancel",redirect.to,redirect.toParams,state,params),TransitionSuperseded):(redirect.options.$retry=!0,$state.transitionTo(redirect.to,redirect.toParams,redirect.options))},function(){return TransitionAborted}),$urlRouter.update(),retryTransition}function resolveState(state,params,paramsAreFiltered,inherited,dst,options){function resolveViews(){var viewsPromises=[];return forEach(state.views,function(view,name){var injectables=view.resolve&&view.resolve!==state.resolve?view.resolve:{};injectables.$template=[function(){return $view.load(name,{view:view,locals:dst.globals,params:$stateParams,notify:options.notify})||""}],viewsPromises.push($resolve.resolve(injectables,dst.globals,dst.resolve,state).then(function(result){if(isFunction(view.controllerProvider)||isArray(view.controllerProvider)){var injectLocals=angular.extend({},injectables,dst.globals);result.$$controller=$injector.invoke(view.controllerProvider,null,injectLocals)}else result.$$controller=view.controller;result.$$state=state,result.$$controllerAs=view.controllerAs,result.$$resolveAs=view.resolveAs,dst[name]=result}))}),$q.all(viewsPromises).then(function(){return dst.globals})}var $stateParams=paramsAreFiltered?params:filterByKeys(state.params.$$keys(),params),locals={$stateParams:$stateParams};dst.resolve=$resolve.resolve(state.resolve,locals,dst.resolve,state);var promises=[dst.resolve.then(function(globals){dst.globals=globals})];return inherited&&promises.push(inherited),$q.all(promises).then(resolveViews).then(function(values){return dst})}var TransitionSupersededError=new Error("transition superseded"),TransitionSuperseded=silenceUncaughtInPromise($q.reject(TransitionSupersededError)),TransitionPrevented=silenceUncaughtInPromise($q.reject(new Error("transition prevented"))),TransitionAborted=silenceUncaughtInPromise($q.reject(new Error("transition aborted"))),TransitionFailed=silenceUncaughtInPromise($q.reject(new Error("transition failed")));return root.locals={resolve:null,globals:{$stateParams:{}}},$state={params:{},current:root.self,$current:root,transition:null},$state.reload=function(state){return $state.transitionTo($state.current,$stateParams,{reload:state||!0,inherit:!1,notify:!0})},$state.go=function(to,params,options){return $state.transitionTo(to,params,extend({inherit:!0,relative:$state.$current},options))},$state.transitionTo=function(to,toParams,options){toParams=toParams||{},options=extend({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},options||{});var evt,from=$state.$current,fromParams=$state.params,fromPath=from.path,toState=findState(to,options.relative),hash=toParams["#"];if(!isDefined(toState)){var redirect={to:to,toParams:toParams,options:options},redirectResult=handleRedirect(redirect,from.self,fromParams,options);if(redirectResult)return redirectResult;if(to=redirect.to,toParams=redirect.toParams,options=redirect.options,toState=findState(to,options.relative),!isDefined(toState)){if(!options.relative)throw new Error("No such state '"+to+"'");throw new Error("Could not resolve '"+to+"' from state '"+options.relative+"'")}}if(toState[abstractKey])throw new Error("Cannot transition to abstract state '"+to+"'");if(options.inherit&&(toParams=inheritParams($stateParams,toParams||{},$state.$current,toState)),!toState.params.$$validates(toParams))return TransitionFailed;toParams=toState.params.$$values(toParams),to=toState;var toPath=to.path,keep=0,state=toPath[keep],locals=root.locals,toLocals=[];if(options.reload){if(isString(options.reload)||isObject(options.reload)){if(isObject(options.reload)&&!options.reload.name)throw new Error("Invalid reload state object");var reloadState=!0===options.reload?fromPath[0]:findState(options.reload);if(options.reload&&!reloadState)throw new Error("No such reload state '"+(isString(options.reload)?options.reload:options.reload.name)+"'");for(;state&&state===fromPath[keep]&&state!==reloadState;)locals=toLocals[keep]=state.locals,keep++,state=toPath[keep]}}else for(;state&&state===fromPath[keep]&&state.ownParams.$$equals(toParams,fromParams);)locals=toLocals[keep]=state.locals,keep++,state=toPath[keep];if(shouldSkipReload(to,toParams,from,fromParams,locals,options))return hash&&(toParams["#"]=hash),$state.params=toParams,copy($state.params,$stateParams),copy(filterByKeys(to.params.$$keys(),$stateParams),to.locals.globals.$stateParams),options.location&&to.navigable&&to.navigable.url&&($urlRouter.push(to.navigable.url,toParams,{$$avoidResync:!0,replace:"replace"===options.location}),$urlRouter.update(!0)),$state.transition=null,$q.when($state.current)
;if(toParams=filterByKeys(to.params.$$keys(),toParams||{}),hash&&(toParams["#"]=hash),options.notify&&$rootScope.$broadcast("$stateChangeStart",to.self,toParams,from.self,fromParams,options).defaultPrevented)return $rootScope.$broadcast("$stateChangeCancel",to.self,toParams,from.self,fromParams),null==$state.transition&&$urlRouter.update(),TransitionPrevented;for(var resolved=$q.when(locals),l=keep;l<toPath.length;l++,state=toPath[l])locals=toLocals[l]=inherit(locals),resolved=resolveState(state,toParams,state===to,resolved,locals,options);var transition=$state.transition=resolved.then(function(){var l,entering,exiting;if($state.transition!==transition)return $rootScope.$broadcast("$stateChangeCancel",to.self,toParams,from.self,fromParams),TransitionSuperseded;for(l=fromPath.length-1;l>=keep;l--)exiting=fromPath[l],exiting.self.onExit&&$injector.invoke(exiting.self.onExit,exiting.self,exiting.locals.globals),exiting.locals=null;for(l=keep;l<toPath.length;l++)entering=toPath[l],entering.locals=toLocals[l],entering.self.onEnter&&$injector.invoke(entering.self.onEnter,entering.self,entering.locals.globals);return $state.transition!==transition?($rootScope.$broadcast("$stateChangeCancel",to.self,toParams,from.self,fromParams),TransitionSuperseded):($state.$current=to,$state.current=to.self,$state.params=toParams,copy($state.params,$stateParams),$state.transition=null,options.location&&to.navigable&&$urlRouter.push(to.navigable.url,to.navigable.locals.globals.$stateParams,{$$avoidResync:!0,replace:"replace"===options.location}),options.notify&&$rootScope.$broadcast("$stateChangeSuccess",to.self,toParams,from.self,fromParams),$urlRouter.update(!0),$state.current)}).then(null,function(error){return error===TransitionSupersededError?TransitionSuperseded:$state.transition!==transition?($rootScope.$broadcast("$stateChangeCancel",to.self,toParams,from.self,fromParams),TransitionSuperseded):($state.transition=null,evt=$rootScope.$broadcast("$stateChangeError",to.self,toParams,from.self,fromParams,error),evt.defaultPrevented||$urlRouter.update(),$q.reject(error))});return transition},$state.is=function(stateOrName,params,options){options=extend({relative:$state.$current},options||{});var state=findState(stateOrName,options.relative);return isDefined(state)?$state.$current===state&&(!params||equalForKeys(state.params.$$values(params),$stateParams)):undefined},$state.includes=function(stateOrName,params,options){if(options=extend({relative:$state.$current},options||{}),isString(stateOrName)&&isGlob(stateOrName)){if(!doesStateMatchGlob(stateOrName))return!1;stateOrName=$state.$current.name}var state=findState(stateOrName,options.relative);if(!isDefined(state))return undefined;if(!isDefined($state.$current.includes[state.name]))return!1;if(!params)return!0;for(var keys=objectKeys(params),i=0;i<keys.length;i++){var key=keys[i],paramDef=state.params[key];if(paramDef&&!paramDef.type.equals($stateParams[key],params[key]))return!1}return!0},$state.href=function(stateOrName,params,options){options=extend({lossy:!0,inherit:!0,absolute:!1,relative:$state.$current},options||{});var state=findState(stateOrName,options.relative);if(!isDefined(state))return null;options.inherit&&(params=inheritParams($stateParams,params||{},$state.$current,state));var nav=state&&options.lossy?state.navigable:state;return nav&&nav.url!==undefined&&null!==nav.url?$urlRouter.href(nav.url,filterByKeys(state.params.$$keys().concat("#"),params||{}),{absolute:options.absolute}):null},$state.get=function(stateOrName,context){if(0===arguments.length)return map(objectKeys(states),function(name){return states[name].self});var state=findState(stateOrName,context||$state.$current);return state&&state.self?state.self:null},$state}function shouldSkipReload(to,toParams,from,fromParams,locals,options){if(!options.reload&&to===from&&(locals===from.locals||!1===to.self.reloadOnSearch&&function(fromAndToState,fromParams,toParams){function notSearchParam(key){return"search"!=fromAndToState.params[key].location}var nonQueryParamKeys=fromAndToState.params.$$keys().filter(notSearchParam),nonQueryParams=pick.apply({},[fromAndToState.params].concat(nonQueryParamKeys));return new $$UMFP.ParamSet(nonQueryParams).$$equals(fromParams,toParams)}(from,fromParams,toParams)))return!0}var root,$state,states={},queue={},abstractKey="abstract",stateBuilder={parent:function(state){if(isDefined(state.parent)&&state.parent)return findState(state.parent);var compositeName=/^(.+)\.[^.]+$/.exec(state.name);return compositeName?findState(compositeName[1]):root},data:function(state){return state.parent&&state.parent.data&&(state.data=state.self.data=inherit(state.parent.data,state.data)),state.data},url:function(state){var url=state.url,config={params:state.params||{}};if(isString(url))return"^"==url.charAt(0)?$urlMatcherFactory.compile(url.substring(1),config):(state.parent.navigable||root).url.concat(url,config);if(!url||$urlMatcherFactory.isMatcher(url))return url;throw new Error("Invalid url '"+url+"' in state '"+state+"'")},navigable:function(state){return state.url?state:state.parent?state.parent.navigable:null},ownParams:function(state){var params=state.url&&state.url.params||new $$UMFP.ParamSet;return forEach(state.params||{},function(config,id){params[id]||(params[id]=new $$UMFP.Param(id,null,config,"config"))}),params},params:function(state){var ownParams=pick(state.ownParams,state.ownParams.$$keys());return state.parent&&state.parent.params?extend(state.parent.params.$$new(),ownParams):new $$UMFP.ParamSet},views:function(state){var views={};return forEach(isDefined(state.views)?state.views:{"":state},function(view,name){name.indexOf("@")<0&&(name+="@"+state.parent.name),view.resolveAs=view.resolveAs||state.resolveAs||"$resolve",views[name]=view}),views},path:function(state){return state.parent?state.parent.path.concat(state):[]},includes:function(state){var includes=state.parent?extend({},state.parent.includes):{};return includes[state.name]=!0,includes},$delegates:{}};root=registerState({name:"",url:"^",views:null,abstract:!0}),root.navigable=null,this.decorator=decorator,this.state=state,this.$get=$get,$get.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$urlRouter","$location","$urlMatcherFactory"]}function $ViewProvider(){function $get($rootScope,$templateFactory){return{load:function(name,options){var result;return options=extend({template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}},options),options.view&&(result=$templateFactory.fromConfig(options.view,options.params,options.locals)),result}}}this.$get=$get,$get.$inject=["$rootScope","$templateFactory"]}function $ViewScrollProvider(){var useAnchorScroll=!1;this.useAnchorScroll=function(){useAnchorScroll=!0},this.$get=["$anchorScroll","$timeout",function($anchorScroll,$timeout){return useAnchorScroll?$anchorScroll:function($element){return $timeout(function(){$element[0].scrollIntoView()},0,!1)}}]}function $ViewDirective($state,$injector,$uiViewScroll,$interpolate,$q){function getRenderer(attrs,scope){if($animate)return{enter:function(element,target,cb){angular.version.minor>2?$animate.enter(element,null,target).then(cb):$animate.enter(element,null,target,cb)},leave:function(element,cb){angular.version.minor>2?$animate.leave(element).then(cb):$animate.leave(element,cb)}};if($animator){var animate=$animator&&$animator(scope,attrs);return{enter:function(element,target,cb){animate.enter(element,null,target),cb()},leave:function(element,cb){animate.leave(element),cb()}}}return function(){return{enter:function(element,target,cb){target.after(element),cb()},leave:function(element,cb){element.remove(),cb()}}}()}var service=function(){return $injector.has?function(service){return $injector.has(service)?$injector.get(service):null}:function(service){try{return $injector.get(service)}catch(e){return null}}}(),$animator=service("$animator"),$animate=service("$animate");return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(tElement,tAttrs,$transclude){return function(scope,$element,attrs){function cleanupLastView(){if(previousEl&&(previousEl.remove(),previousEl=null),currentScope&&(currentScope.$destroy(),currentScope=null),currentEl){var $uiViewData=currentEl.data("$uiViewAnim");renderer.leave(currentEl,function(){$uiViewData.$$animLeave.resolve(),previousEl=null}),previousEl=currentEl,currentEl=null}}function updateView(firstTime){var newScope,name=getUiViewName(scope,attrs,$element,$interpolate),previousLocals=name&&$state.$current&&$state.$current.locals[name];if(firstTime||previousLocals!==latestLocals){newScope=scope.$new(),latestLocals=$state.$current.locals[name],newScope.$emit("$viewContentLoading",name);var clone=$transclude(newScope,function(clone){var animEnter=$q.defer(),animLeave=$q.defer(),viewAnimData={$animEnter:animEnter.promise,$animLeave:animLeave.promise,$$animLeave:animLeave};clone.data("$uiViewAnim",viewAnimData),renderer.enter(clone,$element,function(){animEnter.resolve(),currentScope&&currentScope.$emit("$viewContentAnimationEnded"),(angular.isDefined(autoScrollExp)&&!autoScrollExp||scope.$eval(autoScrollExp))&&$uiViewScroll(clone)}),cleanupLastView()});currentEl=clone,currentScope=newScope,currentScope.$emit("$viewContentLoaded",name),currentScope.$eval(onloadExp)}}var previousEl,currentEl,currentScope,latestLocals,onloadExp=attrs.onload||"",autoScrollExp=attrs.autoscroll,renderer=getRenderer(attrs,scope);$element.inheritedData("$uiView");scope.$on("$stateChangeSuccess",function(){updateView(!1)}),updateView(!0)}}}}function $ViewDirectiveFill($compile,$controller,$state,$interpolate){return{restrict:"ECA",priority:-400,compile:function(tElement){var initial=tElement.html();return function(scope,$element,attrs){var current=$state.$current,name=getUiViewName(scope,attrs,$element,$interpolate),locals=current&&current.locals[name];if(locals){$element.data("$uiView",{name:name,state:locals.$$state}),$element.html(locals.$template?locals.$template:initial);var resolveData=angular.extend({},locals);scope[locals.$$resolveAs]=resolveData;var link=$compile($element.contents());if(locals.$$controller){locals.$scope=scope,locals.$element=$element;var controller=$controller(locals.$$controller,locals);locals.$$controllerAs&&(scope[locals.$$controllerAs]=controller,scope[locals.$$controllerAs][locals.$$resolveAs]=resolveData),isFunction(controller.$onInit)&&controller.$onInit(),$element.data("$ngControllerController",controller),$element.children().data("$ngControllerController",controller)}link(scope)}}}}}function getUiViewName(scope,attrs,element,$interpolate){var name=$interpolate(attrs.uiView||attrs.name||"")(scope),uiViewCreatedBy=element.inheritedData("$uiView");return name.indexOf("@")>=0?name:name+"@"+(uiViewCreatedBy?uiViewCreatedBy.state.name:"")}function parseStateRef(ref,current){var parsed,preparsed=ref.match(/^\s*({[^}]*})\s*$/);if(preparsed&&(ref=current+"("+preparsed[1]+")"),!(parsed=ref.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/))||4!==parsed.length)throw new Error("Invalid state ref '"+ref+"'");return{state:parsed[1],paramExpr:parsed[3]||null}}function stateContext(el){var stateData=el.parent().inheritedData("$uiView");if(stateData&&stateData.state&&stateData.state.name)return stateData.state}function getTypeInfo(el){var isSvg="[object SVGAnimatedString]"===Object.prototype.toString.call(el.prop("href")),isForm="FORM"===el[0].nodeName;return{attr:isForm?"action":isSvg?"xlink:href":"href",isAnchor:"A"===el.prop("tagName").toUpperCase(),clickable:!isForm}}function clickHook(el,$state,$timeout,type,current){return function(e){var button=e.which||e.button,target=current();if(!(button>1||e.ctrlKey||e.metaKey||e.shiftKey||el.attr("target"))){var transition=$timeout(function(){$state.go(target.state,target.params,target.options)});e.preventDefault();var ignorePreventDefaultCount=type.isAnchor&&!target.href?1:0;e.preventDefault=function(){ignorePreventDefaultCount--<=0&&$timeout.cancel(transition)}}}}function defaultOpts(el,$state){return{relative:stateContext(el)||$state.$current,inherit:!0}}function $StateRefDirective($state,$timeout){return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(scope,element,attrs,uiSrefActive){var hookFn,ref=parseStateRef(attrs.uiSref,$state.current.name),def={state:ref.state,href:null,params:null},type=getTypeInfo(element),active=uiSrefActive[1]||uiSrefActive[0],unlinkInfoFn=null;def.options=extend(defaultOpts(element,$state),attrs.uiSrefOpts?scope.$eval(attrs.uiSrefOpts):{});var update=function(val){val&&(def.params=angular.copy(val)),def.href=$state.href(ref.state,def.params,def.options),unlinkInfoFn&&unlinkInfoFn(),active&&(unlinkInfoFn=active.$$addStateInfo(ref.state,def.params)),null!==def.href&&attrs.$set(type.attr,def.href)};ref.paramExpr&&(scope.$watch(ref.paramExpr,function(val){val!==def.params&&update(val)},!0),def.params=angular.copy(scope.$eval(ref.paramExpr))),update(),type.clickable&&(hookFn=clickHook(element,$state,$timeout,type,function(){return def}),element[element.on?"on":"bind"]("click",hookFn),scope.$on("$destroy",function(){element[element.off?"off":"unbind"]("click",hookFn)}))}}}function $StateRefDynamicDirective($state,$timeout){return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(scope,element,attrs,uiSrefActive){function runStateRefLink(group){def.state=group[0],def.params=group[1],def.options=group[2],def.href=$state.href(def.state,def.params,def.options),unlinkInfoFn&&unlinkInfoFn(),active&&(unlinkInfoFn=active.$$addStateInfo(def.state,def.params)),def.href&&attrs.$set(type.attr,def.href)}var hookFn,type=getTypeInfo(element),active=uiSrefActive[1]||uiSrefActive[0],group=[attrs.uiState,attrs.uiStateParams||null,attrs.uiStateOpts||null],watch="["+group.map(function(val){return val||"null"}).join(", ")+"]",def={state:null,params:null,options:null,href:null},unlinkInfoFn=null;scope.$watch(watch,runStateRefLink,!0),runStateRefLink(scope.$eval(watch)),type.clickable&&(hookFn=clickHook(element,$state,$timeout,type,function(){return def}),element[element.on?"on":"bind"]("click",hookFn),scope.$on("$destroy",function(){element[element.off?"off":"unbind"]("click",hookFn)}))}}}function $StateRefActiveDirective($state,$stateParams,$interpolate){return{restrict:"A",controller:["$scope","$element","$attrs","$timeout",function($scope,$element,$attrs,$timeout){function addState(stateName,stateParams,activeClass){var state=$state.get(stateName,stateContext($element)),stateHash=createStateHash(stateName,stateParams),stateInfo={state:state||{name:stateName},params:stateParams,hash:stateHash};return states.push(stateInfo),activeClasses[stateHash]=activeClass,function(){var idx=states.indexOf(stateInfo);-1!==idx&&states.splice(idx,1)}}function createStateHash(state,params){if(!isString(state))throw new Error("state should be a string");return isObject(params)?state+toJson(params):(params=$scope.$eval(params),isObject(params)?state+toJson(params):state)}function update(){for(var i=0;i<states.length;i++)anyMatch(states[i].state,states[i].params)?addClass($element,activeClasses[states[i].hash]):removeClass($element,activeClasses[states[i].hash]),exactMatch(states[i].state,states[i].params)?addClass($element,activeEqClass):removeClass($element,activeEqClass)}function addClass(el,className){$timeout(function(){el.addClass(className)})}function removeClass(el,className){el.removeClass(className)}function anyMatch(state,params){return $state.includes(state.name,params)}function exactMatch(state,params){return $state.is(state.name,params)}var activeEqClass,uiSrefActive,states=[],activeClasses={};activeEqClass=$interpolate($attrs.uiSrefActiveEq||"",!1)($scope);try{uiSrefActive=$scope.$eval($attrs.uiSrefActive)}catch(e){}uiSrefActive=uiSrefActive||$interpolate($attrs.uiSrefActive||"",!1)($scope),isObject(uiSrefActive)&&forEach(uiSrefActive,function(stateOrName,activeClass){if(isString(stateOrName)){var ref=parseStateRef(stateOrName,$state.current.name);addState(ref.state,$scope.$eval(ref.paramExpr),activeClass)}}),this.$$addStateInfo=function(newState,newParams){if(!(isObject(uiSrefActive)&&states.length>0)){var deregister=addState(newState,newParams,uiSrefActive);return update(),deregister}},$scope.$on("$stateChangeSuccess",update),update()}]}}function $IsStateFilter($state){var isFilter=function(state,params){return $state.is(state,params)};return isFilter.$stateful=!0,isFilter}function $IncludedByStateFilter($state){var includesFilter=function(state,params,options){return $state.includes(state,params,options)};return includesFilter.$stateful=!0,includesFilter}var isDefined=angular.isDefined,isFunction=angular.isFunction,isString=angular.isString,isObject=angular.isObject,isArray=angular.isArray,forEach=angular.forEach,extend=angular.extend,copy=angular.copy,toJson=angular.toJson;angular.module("ui.router.util",["ng"]),angular.module("ui.router.router",["ui.router.util"]),angular.module("ui.router.state",["ui.router.router","ui.router.util"]),angular.module("ui.router",["ui.router.state"]),angular.module("ui.router.compat",["ui.router"]),$Resolve.$inject=["$q","$injector"],angular.module("ui.router.util").service("$resolve",$Resolve),$TemplateFactory.$inject=["$http","$templateCache","$injector"],angular.module("ui.router.util").service("$templateFactory",$TemplateFactory);var $$UMFP;UrlMatcher.prototype.concat=function(pattern,config){var defaultConfig={caseInsensitive:$$UMFP.caseInsensitive(),strict:$$UMFP.strictMode(),squash:$$UMFP.defaultSquashPolicy()};return new UrlMatcher(this.sourcePath+pattern+this.sourceSearch,extend(defaultConfig,config),this)},UrlMatcher.prototype.toString=function(){return this.source},UrlMatcher.prototype.exec=function(path,searchParams){var m=this.regexp.exec(path);if(!m)return null;searchParams=searchParams||{};var i,j,paramName,paramNames=this.parameters(),nTotal=paramNames.length,nPath=this.segments.length-1,values={};if(nPath!==m.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");var param,paramVal;for(i=0;i<nPath;i++){for(paramName=paramNames[i],param=this.params[paramName],paramVal=m[i+1],j=0;j<param.replace.length;j++)param.replace[j].from===paramVal&&(paramVal=param.replace[j].to);paramVal&&!0===param.array&&(paramVal=function(string){function reverseString(str){return str.split("").reverse().join("")}function unquoteDashes(str){return str.replace(/\\-/g,"-")}return map(map(reverseString(string).split(/-(?!\\)/),reverseString),unquoteDashes).reverse()}(paramVal)),isDefined(paramVal)&&(paramVal=param.type.decode(paramVal)),values[paramName]=param.value(paramVal)}for(;i<nTotal;i++){for(paramName=paramNames[i],values[paramName]=this.params[paramName].value(searchParams[paramName]),param=this.params[paramName],paramVal=searchParams[paramName],j=0;j<param.replace.length;j++)param.replace[j].from===paramVal&&(paramVal=param.replace[j].to);isDefined(paramVal)&&(paramVal=param.type.decode(paramVal)),values[paramName]=param.value(paramVal)}return values},UrlMatcher.prototype.parameters=function(param){return isDefined(param)?this.params[param]||null:this.$$paramNames},UrlMatcher.prototype.validates=function(params){return this.params.$$validates(params)},UrlMatcher.prototype.format=function(values){function encodeDashes(str){return encodeURIComponent(str).replace(/-/g,function(c){return"%5C%"+c.charCodeAt(0).toString(16).toUpperCase()})}values=values||{};var segments=this.segments,params=this.parameters(),paramset=this.params;if(!this.validates(values))return null;var i,search=!1,nPath=segments.length-1,nTotal=params.length,result=segments[0];for(i=0;i<nTotal;i++){var isPathParam=i<nPath,name=params[i],param=paramset[name],value=param.value(values[name]),isDefaultValue=param.isOptional&&param.type.equals(param.value(),value),squash=!!isDefaultValue&&param.squash,encoded=param.type.encode(value);if(isPathParam){var nextSegment=segments[i+1],isFinalPathParam=i+1===nPath;if(!1===squash)null!=encoded&&(isArray(encoded)?result+=map(encoded,encodeDashes).join("-"):result+=encodeURIComponent(encoded)),result+=nextSegment;else if(!0===squash){var capture=result.match(/\/$/)?/\/?(.*)/:/(.*)/;result+=nextSegment.match(capture)[1]}else isString(squash)&&(result+=squash+nextSegment);isFinalPathParam&&!0===param.squash&&"/"===result.slice(-1)&&(result=result.slice(0,-1))}else{if(null==encoded||isDefaultValue&&!1!==squash)continue;if(isArray(encoded)||(encoded=[encoded]),0===encoded.length)continue;encoded=map(encoded,encodeURIComponent).join("&"+name+"="),result+=(search?"&":"?")+name+"="+encoded,search=!0}}return result},Type.prototype.is=function(val,key){return!0},Type.prototype.encode=function(val,key){return val},Type.prototype.decode=function(val,key){return val},Type.prototype.equals=function(a,b){return a==b},Type.prototype.$subPattern=function(){var sub=this.pattern.toString();return sub.substr(1,sub.length-2)},Type.prototype.pattern=/.*/,Type.prototype.toString=function(){return"{Type:"+this.name+"}"},Type.prototype.$normalize=function(val){return this.is(val)?val:this.decode(val)},Type.prototype.$asArray=function(mode,isSearch){function ArrayType(type,mode){function bindTo(type,callbackName){return function(){return type[callbackName].apply(type,arguments)}}function arrayWrap(val){return isArray(val)?val:isDefined(val)?[val]:[]}function arrayUnwrap(val){switch(val.length){case 0:return undefined;case 1:return"auto"===mode?val[0]:val;default:return val}}function falsey(val){return!val}function arrayHandler(callback,allTruthyMode){return function(val){if(isArray(val)&&0===val.length)return val;val=arrayWrap(val);var result=map(val,callback);return!0===allTruthyMode?0===filter(result,falsey).length:arrayUnwrap(result)}}this.encode=arrayHandler(bindTo(type,"encode")),this.decode=arrayHandler(bindTo(type,"decode")),this.is=arrayHandler(bindTo(type,"is"),!0),this.equals=function(callback){return function(val1,val2){var left=arrayWrap(val1),right=arrayWrap(val2);if(left.length!==right.length)return!1;for(var i=0;i<left.length;i++)if(!callback(left[i],right[i]))return!1;return!0}}(bindTo(type,"equals")),this.pattern=type.pattern,this.$normalize=arrayHandler(bindTo(type,"$normalize")),this.name=type.name,this.$arrayMode=mode}if(!mode)return this;if("auto"===mode&&!isSearch)throw new Error("'auto' array mode is for query parameters only");return new ArrayType(this,mode)},angular.module("ui.router.util").provider("$urlMatcherFactory",$UrlMatcherFactory),angular.module("ui.router.util").run(["$urlMatcherFactory",function($urlMatcherFactory){}]),$UrlRouterProvider.$inject=["$locationProvider","$urlMatcherFactoryProvider"],angular.module("ui.router.router").provider("$urlRouter",$UrlRouterProvider),$StateProvider.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider"],angular.module("ui.router.state").factory("$stateParams",function(){return{}}).constant("$state.runtime",{autoinject:!0}).provider("$state",$StateProvider).run(["$injector",function($injector){$injector.get("$state.runtime").autoinject&&$injector.get("$state")}]),$ViewProvider.$inject=[],angular.module("ui.router.state").provider("$view",$ViewProvider),angular.module("ui.router.state").provider("$uiViewScroll",$ViewScrollProvider),$ViewDirective.$inject=["$state","$injector","$uiViewScroll","$interpolate","$q"],$ViewDirectiveFill.$inject=["$compile","$controller","$state","$interpolate"],angular.module("ui.router.state").directive("uiView",$ViewDirective),angular.module("ui.router.state").directive("uiView",$ViewDirectiveFill),$StateRefDirective.$inject=["$state","$timeout"],$StateRefDynamicDirective.$inject=["$state","$timeout"],$StateRefActiveDirective.$inject=["$state","$stateParams","$interpolate"],angular.module("ui.router.state").directive("uiSref",$StateRefDirective).directive("uiSrefActive",$StateRefActiveDirective).directive("uiSrefActiveEq",$StateRefActiveDirective).directive("uiState",$StateRefDynamicDirective),$IsStateFilter.$inject=["$state"],$IncludedByStateFilter.$inject=["$state"],angular.module("ui.router.state").filter("isState",$IsStateFilter).filter("includedByState",$IncludedByStateFilter)}(window,window.angular),function(window,angular){"use strict";function $SanitizeProvider(){function toMap(str,lowercaseKeys){var i,obj={},items=str.split(",");for(i=0;i<items.length;i++)obj[lowercaseKeys?lowercase(items[i]):items[i]]=!0;return obj}function htmlParserImpl(html,handler){null===html||void 0===html?html="":"string"!=typeof html&&(html=""+html),inertBodyElement.innerHTML=html;var mXSSAttempts=5;do{if(0===mXSSAttempts)throw $sanitizeMinErr("uinput","Failed to sanitize html because the input is unstable");mXSSAttempts--,window.document.documentMode&&stripCustomNsAttrs(inertBodyElement),html=inertBodyElement.innerHTML,inertBodyElement.innerHTML=html}while(html!==inertBodyElement.innerHTML);for(var node=inertBodyElement.firstChild;node;){switch(node.nodeType){case 1:handler.start(node.nodeName.toLowerCase(),attrToMap(node.attributes));break;case 3:handler.chars(node.textContent)}var nextNode;if(!((nextNode=node.firstChild)||(1===node.nodeType&&handler.end(node.nodeName.toLowerCase()),nextNode=getNonDescendant("nextSibling",node))))for(;null==nextNode&&(node=getNonDescendant("parentNode",node))!==inertBodyElement;)nextNode=getNonDescendant("nextSibling",node),1===node.nodeType&&handler.end(node.nodeName.toLowerCase());node=nextNode}for(;node=inertBodyElement.firstChild;)inertBodyElement.removeChild(node)}function attrToMap(attrs){for(var map={},i=0,ii=attrs.length;i<ii;i++){var attr=attrs[i];map[attr.name]=attr.value}return map}function encodeEntities(value){return value.replace(/&/g,"&amp;").replace(SURROGATE_PAIR_REGEXP,function(value){return"&#"+(1024*(value.charCodeAt(0)-55296)+(value.charCodeAt(1)-56320)+65536)+";"}).replace(NON_ALPHANUMERIC_REGEXP,function(value){return"&#"+value.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function htmlSanitizeWriterImpl(buf,uriValidator){var ignoreCurrentElement=!1,out=bind(buf,buf.push);return{start:function(tag,attrs){tag=lowercase(tag),!ignoreCurrentElement&&blockedElements[tag]&&(ignoreCurrentElement=tag),ignoreCurrentElement||!0!==validElements[tag]||(out("<"),out(tag),forEach(attrs,function(value,key){var lkey=lowercase(key),isImage="img"===tag&&"src"===lkey||"background"===lkey;!0!==validAttrs[lkey]||!0===uriAttrs[lkey]&&!uriValidator(value,isImage)||(out(" "),out(key),out('="'),out(encodeEntities(value)),out('"'))}),out(">"))},end:function(tag){tag=lowercase(tag),ignoreCurrentElement||!0!==validElements[tag]||!0===voidElements[tag]||(out("</"),out(tag),out(">")),tag==ignoreCurrentElement&&(ignoreCurrentElement=!1)},chars:function(chars){ignoreCurrentElement||out(encodeEntities(chars))}}}function stripCustomNsAttrs(node){for(;node;){if(node.nodeType===window.Node.ELEMENT_NODE)for(var attrs=node.attributes,i=0,l=attrs.length;i<l;i++){var attrNode=attrs[i],attrName=attrNode.name.toLowerCase();"xmlns:ns1"!==attrName&&0!==attrName.lastIndexOf("ns1:",0)||(node.removeAttributeNode(attrNode),i--,l--)}var nextNode=node.firstChild;nextNode&&stripCustomNsAttrs(nextNode),node=getNonDescendant("nextSibling",node)}}function getNonDescendant(propName,node){var nextNode=node[propName];if(nextNode&&nodeContains.call(node,nextNode))throw $sanitizeMinErr("elclob","Failed to sanitize html because the element is clobbered: {0}",node.outerHTML||node.outerText);return nextNode}var svgEnabled=!1;this.$get=["$$sanitizeUri",function($$sanitizeUri){return svgEnabled&&extend(validElements,svgElements),function(html){var buf=[];return htmlParser(html,htmlSanitizeWriter(buf,function(uri,isImage){return!/^unsafe:/.test($$sanitizeUri(uri,isImage))})),buf.join("")}}],this.enableSvg=function(enableSvg){return isDefined(enableSvg)?(svgEnabled=enableSvg,this):svgEnabled},bind=angular.bind,extend=angular.extend,forEach=angular.forEach,isDefined=angular.isDefined,lowercase=angular.lowercase,noop=angular.noop,htmlParser=htmlParserImpl,htmlSanitizeWriter=htmlSanitizeWriterImpl,nodeContains=window.Node.prototype.contains||function(arg){return!!(16&this.compareDocumentPosition(arg))};var inertBodyElement,SURROGATE_PAIR_REGEXP=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,NON_ALPHANUMERIC_REGEXP=/([^#-~ |!])/g,voidElements=toMap("area,br,col,hr,img,wbr"),optionalEndTagBlockElements=toMap("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),optionalEndTagInlineElements=toMap("rp,rt"),optionalEndTagElements=extend({},optionalEndTagInlineElements,optionalEndTagBlockElements),blockElements=extend({},optionalEndTagBlockElements,toMap("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul")),inlineElements=extend({},optionalEndTagInlineElements,toMap("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),svgElements=toMap("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan"),blockedElements=toMap("script,style"),validElements=extend({},voidElements,blockElements,inlineElements,optionalEndTagElements),uriAttrs=toMap("background,cite,href,longdesc,src,xlink:href"),htmlAttrs=toMap("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),svgAttrs=toMap("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",!0),validAttrs=extend({},uriAttrs,svgAttrs,htmlAttrs);!function(window){var doc;if(!window.document||!window.document.implementation)throw $sanitizeMinErr("noinert","Can't create an inert html document");doc=window.document.implementation.createHTMLDocument("inert");var docElement=doc.documentElement||doc.getDocumentElement(),bodyElements=docElement.getElementsByTagName("body");if(1===bodyElements.length)inertBodyElement=bodyElements[0];else{var html=doc.createElement("html");inertBodyElement=doc.createElement("body"),html.appendChild(inertBodyElement),doc.appendChild(html)}}(window)}function sanitizeText(chars){var buf=[];return htmlSanitizeWriter(buf,noop).chars(chars),buf.join("")}var bind,extend,forEach,isDefined,lowercase,noop,nodeContains,htmlParser,htmlSanitizeWriter,$sanitizeMinErr=angular.$$minErr("$sanitize");angular.module("ngSanitize",[]).provider("$sanitize",$SanitizeProvider).info({angularVersion:"1.6.4"}),angular.module("ngSanitize").filter("linky",["$sanitize",function($sanitize){
var linkyMinErr=angular.$$minErr("linky"),isDefined=angular.isDefined,isFunction=angular.isFunction,isObject=angular.isObject,isString=angular.isString;return function(text,target,attributes){function addText(text){text&&html.push(sanitizeText(text))}if(null==text||""===text)return text;if(!isString(text))throw linkyMinErr("notstring","Expected string but received: {0}",text);for(var match,url,i,attributesFn=isFunction(attributes)?attributes:isObject(attributes)?function(){return attributes}:function(){return{}},raw=text,html=[];match=raw.match(/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i);)url=match[0],match[2]||match[4]||(url=(match[3]?"http://":"mailto:")+url),i=match.index,addText(raw.substr(0,i)),function(url,text){var key,linkAttributes=attributesFn(url);html.push("<a ");for(key in linkAttributes)html.push(key+'="'+linkAttributes[key]+'" ');!isDefined(target)||"target"in linkAttributes||html.push('target="',target,'" '),html.push('href="',url.replace(/"/g,"&quot;"),'">'),addText(text),html.push("</a>")}(url,match[0].replace(/^mailto:/i,"")),raw=raw.substring(i+match[0].length);return addText(raw),$sanitize(html.join(""))}}])}(window,window.angular),function(window,angular){"use strict";function nodeName_(element){return angular.lowercase(element.nodeName||element[0]&&element[0].nodeName)}function $TouchProvider($provide,$compileProvider){var ngClickOverrideEnabled=!1,ngClickDirectiveAdded=!1;this.ngClickOverrideEnabled=function(enabled){return angular.isDefined(enabled)?(enabled&&!ngClickDirectiveAdded&&(ngClickDirectiveAdded=!0,ngTouchClickDirectiveFactory.$$moduleName="ngTouch",$compileProvider.directive("ngClick",ngTouchClickDirectiveFactory),$provide.decorator("ngClickDirective",["$delegate",function($delegate){if(ngClickOverrideEnabled)$delegate.shift();else for(var i=$delegate.length-1;i>=0;){if("ngTouch"===$delegate[i].$$moduleName){$delegate.splice(i,1);break}i--}return $delegate}])),ngClickOverrideEnabled=enabled,this):ngClickOverrideEnabled},this.$get=function(){return{ngClickOverrideEnabled:function(){return ngClickOverrideEnabled}}}}function makeSwipeDirective(directiveName,direction,eventName){ngTouch.directive(directiveName,["$parse","$swipe",function($parse,$swipe){return function(scope,element,attr){function validSwipe(coords){if(!startCoords)return!1;var deltaY=Math.abs(coords.y-startCoords.y),deltaX=(coords.x-startCoords.x)*direction;return valid&&deltaY<75&&deltaX>0&&deltaX>30&&deltaY/deltaX<.3}var startCoords,valid,swipeHandler=$parse(attr[directiveName]),pointerTypes=["touch"];angular.isDefined(attr.ngSwipeDisableMouse)||pointerTypes.push("mouse"),$swipe.bind(element,{start:function(coords,event){startCoords=coords,valid=!0},cancel:function(event){valid=!1},end:function(coords,event){validSwipe(coords)&&scope.$apply(function(){element.triggerHandler(eventName),swipeHandler(scope,{$event:event})})}},pointerTypes)}}])}var ngTouch=angular.module("ngTouch",[]);ngTouch.info({angularVersion:"1.6.4"}),ngTouch.provider("$touch",$TouchProvider),$TouchProvider.$inject=["$provide","$compileProvider"],ngTouch.factory("$swipe",[function(){function getCoordinates(event){var originalEvent=event.originalEvent||event,touches=originalEvent.touches&&originalEvent.touches.length?originalEvent.touches:[originalEvent],e=originalEvent.changedTouches&&originalEvent.changedTouches[0]||touches[0];return{x:e.clientX,y:e.clientY}}function getEvents(pointerTypes,eventType){var res=[];return angular.forEach(pointerTypes,function(pointerType){var eventName=POINTER_EVENTS[pointerType][eventType];eventName&&res.push(eventName)}),res.join(" ")}var POINTER_EVENTS={mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},touch:{start:"touchstart",move:"touchmove",end:"touchend",cancel:"touchcancel"},pointer:{start:"pointerdown",move:"pointermove",end:"pointerup",cancel:"pointercancel"}};return{bind:function(element,eventHandlers,pointerTypes){var totalX,totalY,startCoords,lastPos,active=!1;pointerTypes=pointerTypes||["mouse","touch","pointer"],element.on(getEvents(pointerTypes,"start"),function(event){startCoords=getCoordinates(event),active=!0,totalX=0,totalY=0,lastPos=startCoords,eventHandlers.start&&eventHandlers.start(startCoords,event)});var events=getEvents(pointerTypes,"cancel");events&&element.on(events,function(event){active=!1,eventHandlers.cancel&&eventHandlers.cancel(event)}),element.on(getEvents(pointerTypes,"move"),function(event){if(active&&startCoords){var coords=getCoordinates(event);if(totalX+=Math.abs(coords.x-lastPos.x),totalY+=Math.abs(coords.y-lastPos.y),lastPos=coords,!(totalX<10&&totalY<10))return totalY>totalX?(active=!1,void(eventHandlers.cancel&&eventHandlers.cancel(event))):(event.preventDefault(),void(eventHandlers.move&&eventHandlers.move(coords,event)))}}),element.on(getEvents(pointerTypes,"end"),function(event){active&&(active=!1,eventHandlers.end&&eventHandlers.end(getCoordinates(event),event))})}}}]);var ngTouchClickDirectiveFactory=["$parse","$timeout","$rootElement",function($parse,$timeout,$rootElement){function hit(x1,y1,x2,y2){return Math.abs(x1-x2)<CLICKBUSTER_THRESHOLD&&Math.abs(y1-y2)<CLICKBUSTER_THRESHOLD}function checkAllowableRegions(touchCoordinates,x,y){for(var i=0;i<touchCoordinates.length;i+=2)if(hit(touchCoordinates[i],touchCoordinates[i+1],x,y))return touchCoordinates.splice(i,i+2),!0;return!1}function onClick(event){if(!(Date.now()-lastPreventedTime>PREVENT_DURATION)){var touches=event.touches&&event.touches.length?event.touches:[event],x=touches[0].clientX,y=touches[0].clientY;x<1&&y<1||lastLabelClickCoordinates&&lastLabelClickCoordinates[0]===x&&lastLabelClickCoordinates[1]===y||(lastLabelClickCoordinates&&(lastLabelClickCoordinates=null),"label"===nodeName_(event.target)&&(lastLabelClickCoordinates=[x,y]),checkAllowableRegions(touchCoordinates,x,y)||(event.stopPropagation(),event.preventDefault(),event.target&&event.target.blur&&event.target.blur()))}}function onTouchStart(event){var touches=event.touches&&event.touches.length?event.touches:[event],x=touches[0].clientX,y=touches[0].clientY;touchCoordinates.push(x,y),$timeout(function(){for(var i=0;i<touchCoordinates.length;i+=2)if(touchCoordinates[i]===x&&touchCoordinates[i+1]===y)return void touchCoordinates.splice(i,i+2)},PREVENT_DURATION,!1)}function preventGhostClick(x,y){touchCoordinates||($rootElement[0].addEventListener("click",onClick,!0),$rootElement[0].addEventListener("touchstart",onTouchStart,!0),touchCoordinates=[]),lastPreventedTime=Date.now(),checkAllowableRegions(touchCoordinates,x,y)}var lastPreventedTime,touchCoordinates,lastLabelClickCoordinates,PREVENT_DURATION=2500,CLICKBUSTER_THRESHOLD=25,ACTIVE_CLASS_NAME="ng-click-active";return function(scope,element,attr){function resetState(){tapping=!1,element.removeClass(ACTIVE_CLASS_NAME)}var tapElement,startTime,touchStartX,touchStartY,clickHandler=$parse(attr.ngClick),tapping=!1;element.on("touchstart",function(event){tapping=!0,tapElement=event.target?event.target:event.srcElement,3===tapElement.nodeType&&(tapElement=tapElement.parentNode),element.addClass(ACTIVE_CLASS_NAME),startTime=Date.now();var originalEvent=event.originalEvent||event,touches=originalEvent.touches&&originalEvent.touches.length?originalEvent.touches:[originalEvent],e=touches[0];touchStartX=e.clientX,touchStartY=e.clientY}),element.on("touchcancel",function(event){resetState()}),element.on("touchend",function(event){var diff=Date.now()-startTime,originalEvent=event.originalEvent||event,touches=originalEvent.changedTouches&&originalEvent.changedTouches.length?originalEvent.changedTouches:originalEvent.touches&&originalEvent.touches.length?originalEvent.touches:[originalEvent],e=touches[0],x=e.clientX,y=e.clientY,dist=Math.sqrt(Math.pow(x-touchStartX,2)+Math.pow(y-touchStartY,2));tapping&&diff<750&&dist<12&&(preventGhostClick(x,y),tapElement&&tapElement.blur(),angular.isDefined(attr.disabled)&&!1!==attr.disabled||element.triggerHandler("click",[event])),resetState()}),element.onclick=function(event){},element.on("click",function(event,touchend){scope.$apply(function(){clickHandler(scope,{$event:touchend||event})})}),element.on("mousedown",function(event){element.addClass(ACTIVE_CLASS_NAME)}),element.on("mousemove mouseup",function(event){element.removeClass(ACTIVE_CLASS_NAME)})}}];makeSwipeDirective("ngSwipeLeft",-1,"swipeleft"),makeSwipeDirective("ngSwipeRight",1,"swiperight")}(window,window.angular),function(factory,root){"function"==typeof define&&define.amd?define(factory):"undefined"!=typeof module&&"object"==typeof exports?module.exports=factory():root.rangy=factory()}(function(){function isHostMethod(o,p){var t=typeof o[p];return t==FUNCTION||!(t!=OBJECT||!o[p])||"unknown"==t}function isHostObject(o,p){return!(typeof o[p]!=OBJECT||!o[p])}function isHostProperty(o,p){return typeof o[p]!=UNDEFINED}function createMultiplePropertyTest(testFunc){return function(o,props){for(var i=props.length;i--;)if(!testFunc(o,props[i]))return!1;return!0}}function isTextRange(range){return range&&areHostMethods(range,textRangeMethods)&&areHostProperties(range,textRangeProperties)}function getBody(doc){return isHostObject(doc,"body")?doc.body:doc.getElementsByTagName("body")[0]}function consoleLog(msg){typeof console!=UNDEFINED&&isHostMethod(console,"log")&&console.log(msg)}function alertOrLog(msg,shouldAlert){isBrowser&&shouldAlert?alert(msg):consoleLog(msg)}function fail(reason){api.initialized=!0,api.supported=!1,alertOrLog("Rangy is not supported in this environment. Reason: "+reason,api.config.alertOnFail)}function warn(msg){alertOrLog("Rangy warning: "+msg,api.config.alertOnWarn)}function getErrorDesc(ex){return ex.message||ex.description||String(ex)}function init(){if(isBrowser&&!api.initialized){var testRange,implementsDomRange=!1,implementsTextRange=!1;isHostMethod(document,"createRange")&&(testRange=document.createRange(),areHostMethods(testRange,domRangeMethods)&&areHostProperties(testRange,domRangeProperties)&&(implementsDomRange=!0));var body=getBody(document);if(!body||"body"!=body.nodeName.toLowerCase())return void fail("No body element found");if(body&&isHostMethod(body,"createTextRange")&&(testRange=body.createTextRange(),isTextRange(testRange)&&(implementsTextRange=!0)),!implementsDomRange&&!implementsTextRange)return void fail("Neither Range nor TextRange are available");api.initialized=!0,api.features={implementsDomRange:implementsDomRange,implementsTextRange:implementsTextRange};var module,errorMessage;for(var moduleName in modules)(module=modules[moduleName])instanceof Module&&module.init(module,api);for(var i=0,len=initListeners.length;i<len;++i)try{initListeners[i](api)}catch(ex){errorMessage="Rangy init listener threw an exception. Continuing. Detail: "+getErrorDesc(ex),consoleLog(errorMessage)}}}function deprecationNotice(deprecated,replacement,module){module&&(deprecated+=" in module "+module.name),api.warn("DEPRECATED: "+deprecated+" is deprecated. Please use "+replacement+" instead.")}function createAliasForDeprecatedMethod(owner,deprecated,replacement,module){owner[deprecated]=function(){return deprecationNotice(deprecated,replacement,module),owner[replacement].apply(owner,util.toArray(arguments))}}function shim(win){win=win||window,init();for(var i=0,len=shimListeners.length;i<len;++i)shimListeners[i](win)}function Module(name,dependencies,initializer){this.name=name,this.dependencies=dependencies,this.initialized=!1,this.supported=!1,this.initializer=initializer}function createModule(name,dependencies,initFunc){var newModule=new Module(name,dependencies,function(module){if(!module.initialized){module.initialized=!0;try{initFunc(api,module),module.supported=!0}catch(ex){var errorMessage="Module '"+name+"' failed to load: "+getErrorDesc(ex);consoleLog(errorMessage),ex.stack&&consoleLog(ex.stack)}}});return modules[name]=newModule,newModule}function RangePrototype(){}function SelectionPrototype(){}var OBJECT="object",FUNCTION="function",UNDEFINED="undefined",domRangeProperties=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],domRangeMethods=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],textRangeProperties=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],textRangeMethods=["collapse","compareEndPoints","duplicate","moveToElementText","parentElement","select","setEndPoint","getBoundingClientRect"],areHostMethods=createMultiplePropertyTest(isHostMethod),areHostObjects=createMultiplePropertyTest(isHostObject),areHostProperties=createMultiplePropertyTest(isHostProperty),forEach=[].forEach?function(arr,func){arr.forEach(func)}:function(arr,func){for(var i=0,len=arr.length;i<len;++i)func(arr[i],i)},modules={},isBrowser=typeof window!=UNDEFINED&&typeof document!=UNDEFINED,util={isHostMethod:isHostMethod,isHostObject:isHostObject,isHostProperty:isHostProperty,areHostMethods:areHostMethods,areHostObjects:areHostObjects,areHostProperties:areHostProperties,isTextRange:isTextRange,getBody:getBody,forEach:forEach},api={version:"1.3.0",initialized:!1,isBrowser:isBrowser,supported:!0,util:util,features:{},modules:modules,config:{alertOnFail:!1,alertOnWarn:!1,preferTextRange:!1,autoInitialize:typeof rangyAutoInitialize==UNDEFINED||rangyAutoInitialize}};api.fail=fail,api.warn=warn;var extend;!{}.hasOwnProperty?fail("hasOwnProperty not supported"):(util.extend=extend=function(obj,props,deep){var o,p;for(var i in props)props.hasOwnProperty(i)&&(o=obj[i],p=props[i],deep&&null!==o&&"object"==typeof o&&null!==p&&"object"==typeof p&&extend(o,p,!0),obj[i]=p);return props.hasOwnProperty("toString")&&(obj.toString=props.toString),obj},util.createOptions=function(optionsParam,defaults){var options={};return extend(options,defaults),optionsParam&&extend(options,optionsParam),options}),isBrowser||fail("Rangy can only run in a browser"),function(){var toArray;if(isBrowser){var el=document.createElement("div");el.appendChild(document.createElement("span"));var slice=[].slice;try{1==slice.call(el.childNodes,0)[0].nodeType&&(toArray=function(arrayLike){return slice.call(arrayLike,0)})}catch(e){}}toArray||(toArray=function(arrayLike){for(var arr=[],i=0,len=arrayLike.length;i<len;++i)arr[i]=arrayLike[i];return arr}),util.toArray=toArray}();var addListener;isBrowser&&(isHostMethod(document,"addEventListener")?addListener=function(obj,eventType,listener){obj.addEventListener(eventType,listener,!1)}:isHostMethod(document,"attachEvent")?addListener=function(obj,eventType,listener){obj.attachEvent("on"+eventType,listener)}:fail("Document does not have required addEventListener or attachEvent method"),util.addListener=addListener);var initListeners=[];util.deprecationNotice=deprecationNotice,util.createAliasForDeprecatedMethod=createAliasForDeprecatedMethod,api.init=init,api.addInitListener=function(listener){api.initialized?listener(api):initListeners.push(listener)};var shimListeners=[];api.addShimListener=function(listener){shimListeners.push(listener)},isBrowser&&(api.shim=api.createMissingNativeApi=shim,createAliasForDeprecatedMethod(api,"createMissingNativeApi","shim")),Module.prototype={init:function(){for(var requiredModule,moduleName,requiredModuleNames=this.dependencies||[],i=0,len=requiredModuleNames.length;i<len;++i){if(moduleName=requiredModuleNames[i],!((requiredModule=modules[moduleName])&&requiredModule instanceof Module))throw new Error("required module '"+moduleName+"' not found");if(requiredModule.init(),!requiredModule.supported)throw new Error("required module '"+moduleName+"' not supported")}this.initializer(this)},fail:function(reason){throw this.initialized=!0,this.supported=!1,new Error(reason)},warn:function(msg){api.warn("Module "+this.name+": "+msg)},deprecationNotice:function(deprecated,replacement){api.warn("DEPRECATED: "+deprecated+" in module "+this.name+" is deprecated. Please use "+replacement+" instead")},createError:function(msg){return new Error("Error in Rangy "+this.name+" module: "+msg)}},api.createModule=function(name){var initFunc,dependencies;2==arguments.length?(initFunc=arguments[1],dependencies=[]):(initFunc=arguments[2],dependencies=arguments[1]);var module=createModule(name,dependencies,initFunc);api.initialized&&api.supported&&module.init()},api.createCoreModule=function(name,dependencies,initFunc){createModule(name,dependencies,initFunc)},api.RangePrototype=RangePrototype,api.rangePrototype=new RangePrototype,api.selectionPrototype=new SelectionPrototype,api.createCoreModule("DomUtil",[],function(api,module){function isHtmlNamespace(node){var ns;return typeof node.namespaceURI==UNDEF||null===(ns=node.namespaceURI)||"http://www.w3.org/1999/xhtml"==ns}function parentElement(node){var parent=node.parentNode;return 1==parent.nodeType?parent:null}function getNodeIndex(node){for(var i=0;node=node.previousSibling;)++i;return i}function getNodeLength(node){switch(node.nodeType){case 7:case 10:return 0;case 3:case 8:return node.length;default:return node.childNodes.length}}function getCommonAncestor(node1,node2){var n,ancestors=[];for(n=node1;n;n=n.parentNode)ancestors.push(n);for(n=node2;n;n=n.parentNode)if(arrayContains(ancestors,n))return n;return null}function isAncestorOf(ancestor,descendant,selfIsAncestor){for(var n=selfIsAncestor?descendant:descendant.parentNode;n;){if(n===ancestor)return!0;n=n.parentNode}return!1}function isOrIsAncestorOf(ancestor,descendant){return isAncestorOf(ancestor,descendant,!0)}function getClosestAncestorIn(node,ancestor,selfIsAncestor){for(var p,n=selfIsAncestor?node:node.parentNode;n;){if((p=n.parentNode)===ancestor)return n;n=p}return null}function isCharacterDataNode(node){var t=node.nodeType;return 3==t||4==t||8==t}function isTextOrCommentNode(node){if(!node)return!1;var t=node.nodeType;return 3==t||8==t}function insertAfter(node,precedingNode){var nextNode=precedingNode.nextSibling,parent=precedingNode.parentNode;return nextNode?parent.insertBefore(node,nextNode):parent.appendChild(node),node}function splitDataNode(node,index,positionsToPreserve){var newNode=node.cloneNode(!1);if(newNode.deleteData(0,index),node.deleteData(index,node.length-index),insertAfter(newNode,node),positionsToPreserve)for(var position,i=0;position=positionsToPreserve[i++];)position.node==node&&position.offset>index?(position.node=newNode,position.offset-=index):position.node==node.parentNode&&position.offset>getNodeIndex(node)&&++position.offset;return newNode}function getDocument(node){if(9==node.nodeType)return node;if(typeof node.ownerDocument!=UNDEF)return node.ownerDocument;if(typeof node.document!=UNDEF)return node.document;if(node.parentNode)return getDocument(node.parentNode);throw module.createError("getDocument: no document found for node")}function getWindow(node){var doc=getDocument(node);if(typeof doc.defaultView!=UNDEF)return doc.defaultView;if(typeof doc.parentWindow!=UNDEF)return doc.parentWindow;throw module.createError("Cannot get a window object for node")}function getIframeDocument(iframeEl){if(typeof iframeEl.contentDocument!=UNDEF)return iframeEl.contentDocument;if(typeof iframeEl.contentWindow!=UNDEF)return iframeEl.contentWindow.document;throw module.createError("getIframeDocument: No Document object found for iframe element")}function getIframeWindow(iframeEl){if(typeof iframeEl.contentWindow!=UNDEF)return iframeEl.contentWindow;if(typeof iframeEl.contentDocument!=UNDEF)return iframeEl.contentDocument.defaultView;throw module.createError("getIframeWindow: No Window object found for iframe element")}function isWindow(obj){return obj&&util.isHostMethod(obj,"setTimeout")&&util.isHostObject(obj,"document")}function getContentDocument(obj,module,methodName){var doc;if(obj?util.isHostProperty(obj,"nodeType")?doc=1==obj.nodeType&&"iframe"==obj.tagName.toLowerCase()?getIframeDocument(obj):getDocument(obj):isWindow(obj)&&(doc=obj.document):doc=document,!doc)throw module.createError(methodName+"(): Parameter must be a Window object or DOM node");return doc}function getRootContainer(node){for(var parent;parent=node.parentNode;)node=parent;return node}function comparePoints(nodeA,offsetA,nodeB,offsetB){var nodeC,root,childA,childB,n;if(nodeA==nodeB)return offsetA===offsetB?0:offsetA<offsetB?-1:1;if(nodeC=getClosestAncestorIn(nodeB,nodeA,!0))return offsetA<=getNodeIndex(nodeC)?-1:1;if(nodeC=getClosestAncestorIn(nodeA,nodeB,!0))return getNodeIndex(nodeC)<offsetB?-1:1;if(!(root=getCommonAncestor(nodeA,nodeB)))throw new Error("comparePoints error: nodes have no common ancestor");if(childA=nodeA===root?root:getClosestAncestorIn(nodeA,root,!0),childB=nodeB===root?root:getClosestAncestorIn(nodeB,root,!0),childA===childB)throw module.createError("comparePoints got to case 4 and childA and childB are the same!");for(n=root.firstChild;n;){if(n===childA)return-1;if(n===childB)return 1;n=n.nextSibling}}function isBrokenNode(node){try{return node.parentNode,!1}catch(e){return!0}}function inspectNode(node){if(!node)return"[No node]";if(crashyTextNodes&&isBrokenNode(node))return"[Broken node]";if(isCharacterDataNode(node))return'"'+node.data+'"';if(1==node.nodeType){var idAttr=node.id?' id="'+node.id+'"':"";return"<"+node.nodeName+idAttr+">[index:"+getNodeIndex(node)+",length:"+node.childNodes.length+"]["+(node.innerHTML||"[innerHTML not supported]").slice(0,25)+"]"}return node.nodeName}function fragmentFromNodeChildren(node){for(var child,fragment=getDocument(node).createDocumentFragment();child=node.firstChild;)fragment.appendChild(child);return fragment}function createTestElement(doc,html,contentEditable){var body=getBody(doc),el=doc.createElement("div");el.contentEditable=""+!!contentEditable,html&&(el.innerHTML=html);var bodyFirstChild=body.firstChild;return bodyFirstChild?body.insertBefore(el,bodyFirstChild):body.appendChild(el),el}function removeNode(node){return node.parentNode.removeChild(node)}function NodeIterator(root){this.root=root,this._next=root}function createIterator(root){return new NodeIterator(root)}function DomPosition(node,offset){this.node=node,this.offset=offset}function DOMException(codeName){this.code=this[codeName],this.codeName=codeName,this.message="DOMException: "+this.codeName}var UNDEF="undefined",util=api.util,getBody=util.getBody;util.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||module.fail("document missing a Node creation method"),util.isHostMethod(document,"getElementsByTagName")||module.fail("document missing getElementsByTagName method");var el=document.createElement("div");util.areHostMethods(el,["insertBefore","appendChild","cloneNode"]||!util.areHostObjects(el,["previousSibling","nextSibling","childNodes","parentNode"]))||module.fail("Incomplete Element implementation"),util.isHostProperty(el,"innerHTML")||module.fail("Element is missing innerHTML property");var textNode=document.createTextNode("test");util.areHostMethods(textNode,["splitText","deleteData","insertData","appendData","cloneNode"]||!util.areHostObjects(el,["previousSibling","nextSibling","childNodes","parentNode"])||!util.areHostProperties(textNode,["data"]))||module.fail("Incomplete Text Node implementation");var arrayContains=function(arr,val){for(var i=arr.length;i--;)if(arr[i]===val)return!0;return!1},crashyTextNodes=!1;!function(){var el=document.createElement("b");el.innerHTML="1";var textNode=el.firstChild;el.innerHTML="<br />",crashyTextNodes=isBrokenNode(textNode),api.features.crashyTextNodes=crashyTextNodes}();var getComputedStyleProperty;typeof window.getComputedStyle!=UNDEF?getComputedStyleProperty=function(el,propName){return getWindow(el).getComputedStyle(el,null)[propName]}:typeof document.documentElement.currentStyle!=UNDEF?getComputedStyleProperty=function(el,propName){return el.currentStyle?el.currentStyle[propName]:""}:module.fail("No means of obtaining computed style properties found"),NodeIterator.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var child,next,n=this._current=this._next;if(this._current)if(child=n.firstChild)this._next=child;else{for(next=null;n!==this.root&&!(next=n.nextSibling);)n=n.parentNode;this._next=next}return this._current},detach:function(){this._current=this._next=this.root=null}},DomPosition.prototype={equals:function(pos){return!!pos&&this.node===pos.node&&this.offset==pos.offset},inspect:function(){return"[DomPosition("+inspectNode(this.node)+":"+this.offset+")]"},toString:function(){return this.inspect()}},DOMException.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11,INVALID_NODE_TYPE_ERR:24},DOMException.prototype.toString=function(){return this.message},api.dom={arrayContains:arrayContains,isHtmlNamespace:isHtmlNamespace,parentElement:parentElement,getNodeIndex:getNodeIndex,getNodeLength:getNodeLength,getCommonAncestor:getCommonAncestor,isAncestorOf:isAncestorOf,isOrIsAncestorOf:isOrIsAncestorOf,getClosestAncestorIn:getClosestAncestorIn,isCharacterDataNode:isCharacterDataNode,isTextOrCommentNode:isTextOrCommentNode,insertAfter:insertAfter,splitDataNode:splitDataNode,getDocument:getDocument,getWindow:getWindow,getIframeWindow:getIframeWindow,getIframeDocument:getIframeDocument,getBody:getBody,isWindow:isWindow,getContentDocument:getContentDocument,getRootContainer:getRootContainer,comparePoints:comparePoints,isBrokenNode:isBrokenNode,inspectNode:inspectNode,getComputedStyleProperty:getComputedStyleProperty,createTestElement:createTestElement,removeNode:removeNode,fragmentFromNodeChildren:fragmentFromNodeChildren,createIterator:createIterator,DomPosition:DomPosition},api.DOMException=DOMException}),api.createCoreModule("DomRange",["DomUtil"],function(api,module){function isNonTextPartiallySelected(node,range){return 3!=node.nodeType&&(isOrIsAncestorOf(node,range.startContainer)||isOrIsAncestorOf(node,range.endContainer))}function getRangeDocument(range){return range.document||getDocument(range.startContainer)}function getRangeRoot(range){return getRootContainer(range.startContainer)}function getBoundaryBeforeNode(node){return new DomPosition(node.parentNode,getNodeIndex(node))}function getBoundaryAfterNode(node){return new DomPosition(node.parentNode,getNodeIndex(node)+1)}function insertNodeAtPosition(node,n,o){var firstNodeInserted=11==node.nodeType?node.firstChild:node;return isCharacterDataNode(n)?o==n.length?dom.insertAfter(node,n):n.parentNode.insertBefore(node,0==o?n:splitDataNode(n,o)):o>=n.childNodes.length?n.appendChild(node):n.insertBefore(node,n.childNodes[o]),firstNodeInserted}function rangesIntersect(rangeA,rangeB,touchingIsIntersecting){if(assertRangeValid(rangeA),assertRangeValid(rangeB),getRangeDocument(rangeB)!=getRangeDocument(rangeA))throw new DOMException("WRONG_DOCUMENT_ERR");var startComparison=comparePoints(rangeA.startContainer,rangeA.startOffset,rangeB.endContainer,rangeB.endOffset),endComparison=comparePoints(rangeA.endContainer,rangeA.endOffset,rangeB.startContainer,rangeB.startOffset);return touchingIsIntersecting?startComparison<=0&&endComparison>=0:startComparison<0&&endComparison>0}function cloneSubtree(iterator){for(var partiallySelected,node,subIterator,frag=getRangeDocument(iterator.range).createDocumentFragment();node=iterator.next();){if(partiallySelected=iterator.isPartiallySelectedSubtree(),node=node.cloneNode(!partiallySelected),partiallySelected&&(subIterator=iterator.getSubtreeIterator(),node.appendChild(cloneSubtree(subIterator)),subIterator.detach()),10==node.nodeType)throw new DOMException("HIERARCHY_REQUEST_ERR");frag.appendChild(node)}return frag}function iterateSubtree(rangeIterator,func,iteratorState){var it,n;iteratorState=iteratorState||{stop:!1};for(var node,subRangeIterator;node=rangeIterator.next();)if(rangeIterator.isPartiallySelectedSubtree()){if(!1===func(node))return void(iteratorState.stop=!0);if(subRangeIterator=rangeIterator.getSubtreeIterator(),iterateSubtree(subRangeIterator,func,iteratorState),subRangeIterator.detach(),iteratorState.stop)return}else for(it=dom.createIterator(node);n=it.next();)if(!1===func(n))return void(iteratorState.stop=!0)}function deleteSubtree(iterator){for(var subIterator;iterator.next();)iterator.isPartiallySelectedSubtree()?(subIterator=iterator.getSubtreeIterator(),deleteSubtree(subIterator),subIterator.detach()):iterator.remove()}function extractSubtree(iterator){for(var node,subIterator,frag=getRangeDocument(iterator.range).createDocumentFragment();node=iterator.next();){if(iterator.isPartiallySelectedSubtree()?(node=node.cloneNode(!1),subIterator=iterator.getSubtreeIterator(),node.appendChild(extractSubtree(subIterator)),subIterator.detach()):iterator.remove(),10==node.nodeType)throw new DOMException("HIERARCHY_REQUEST_ERR");frag.appendChild(node)}return frag}function getNodesInRange(range,nodeTypes,filter){var regex,filterNodeTypes=!(!nodeTypes||!nodeTypes.length),filterExists=!!filter;filterNodeTypes&&(regex=new RegExp("^("+nodeTypes.join("|")+")$"));var nodes=[];return iterateSubtree(new RangeIterator(range,!1),function(node){if((!filterNodeTypes||regex.test(node.nodeType))&&(!filterExists||filter(node))){var sc=range.startContainer;if(node!=sc||!isCharacterDataNode(sc)||range.startOffset!=sc.length){var ec=range.endContainer;node==ec&&isCharacterDataNode(ec)&&0==range.endOffset||nodes.push(node)}}}),nodes}function inspect(range){return"["+(void 0===range.getName?"Range":range.getName())+"("+dom.inspectNode(range.startContainer)+":"+range.startOffset+", "+dom.inspectNode(range.endContainer)+":"+range.endOffset+")]"}function RangeIterator(range,clonePartiallySelectedTextNodes){if(this.range=range,this.clonePartiallySelectedTextNodes=clonePartiallySelectedTextNodes,!range.collapsed){this.sc=range.startContainer,this.so=range.startOffset,this.ec=range.endContainer,this.eo=range.endOffset;var root=range.commonAncestorContainer;this.sc===this.ec&&isCharacterDataNode(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==root||isCharacterDataNode(this.sc)?getClosestAncestorIn(this.sc,root,!0):this.sc.childNodes[this.so],this._last=this.ec!==root||isCharacterDataNode(this.ec)?getClosestAncestorIn(this.ec,root,!0):this.ec.childNodes[this.eo-1])}}function createAncestorFinder(nodeTypes){return function(node,selfIsAncestor){for(var t,n=selfIsAncestor?node:node.parentNode;n;){if(t=n.nodeType,arrayContains(nodeTypes,t))return n;n=n.parentNode}return null}}function assertNoDocTypeNotationEntityAncestor(node,allowSelf){if(getDocTypeNotationEntityAncestor(node,allowSelf))throw new DOMException("INVALID_NODE_TYPE_ERR")}function assertValidNodeType(node,invalidTypes){if(!arrayContains(invalidTypes,node.nodeType))throw new DOMException("INVALID_NODE_TYPE_ERR")}function assertValidOffset(node,offset){if(offset<0||offset>(isCharacterDataNode(node)?node.length:node.childNodes.length))throw new DOMException("INDEX_SIZE_ERR")}function assertSameDocumentOrFragment(node1,node2){if(getDocumentOrFragmentContainer(node1,!0)!==getDocumentOrFragmentContainer(node2,!0))throw new DOMException("WRONG_DOCUMENT_ERR")}function assertNodeNotReadOnly(node){if(getReadonlyAncestor(node,!0))throw new DOMException("NO_MODIFICATION_ALLOWED_ERR")}function assertNode(node,codeName){if(!node)throw new DOMException(codeName)}function isValidOffset(node,offset){return offset<=(isCharacterDataNode(node)?node.length:node.childNodes.length)}function isRangeValid(range){return!!range.startContainer&&!!range.endContainer&&!(crashyTextNodes&&(dom.isBrokenNode(range.startContainer)||dom.isBrokenNode(range.endContainer)))&&getRootContainer(range.startContainer)==getRootContainer(range.endContainer)&&isValidOffset(range.startContainer,range.startOffset)&&isValidOffset(range.endContainer,range.endOffset)}function assertRangeValid(range){
if(!isRangeValid(range))throw new Error("Range error: Range is not valid. This usually happens after DOM mutation. Range: ("+range.inspect()+")")}function splitRangeBoundaries(range,positionsToPreserve){assertRangeValid(range);var sc=range.startContainer,so=range.startOffset,ec=range.endContainer,eo=range.endOffset,startEndSame=sc===ec;isCharacterDataNode(ec)&&eo>0&&eo<ec.length&&splitDataNode(ec,eo,positionsToPreserve),isCharacterDataNode(sc)&&so>0&&so<sc.length&&(sc=splitDataNode(sc,so,positionsToPreserve),startEndSame?(eo-=so,ec=sc):ec==sc.parentNode&&eo>=getNodeIndex(sc)&&eo++,so=0),range.setStartAndEnd(sc,so,ec,eo)}function rangeToHtml(range){assertRangeValid(range);var container=range.commonAncestorContainer.parentNode.cloneNode(!1);return container.appendChild(range.cloneContents()),container.innerHTML}function copyComparisonConstantsToObject(obj){obj.START_TO_START=s2s,obj.START_TO_END=s2e,obj.END_TO_END=e2e,obj.END_TO_START=e2s,obj.NODE_BEFORE=n_b,obj.NODE_AFTER=n_a,obj.NODE_BEFORE_AND_AFTER=n_b_a,obj.NODE_INSIDE=n_i}function copyComparisonConstants(constructor){copyComparisonConstantsToObject(constructor),copyComparisonConstantsToObject(constructor.prototype)}function createRangeContentRemover(remover,boundaryUpdater){return function(){assertRangeValid(this);var node,boundary,sc=this.startContainer,so=this.startOffset,root=this.commonAncestorContainer,iterator=new RangeIterator(this,!0);sc!==root&&(node=getClosestAncestorIn(sc,root,!0),boundary=getBoundaryAfterNode(node),sc=boundary.node,so=boundary.offset),iterateSubtree(iterator,assertNodeNotReadOnly),iterator.reset();var returnValue=remover(iterator);return iterator.detach(),boundaryUpdater(this,sc,so,sc,so),returnValue}}function createPrototypeRange(constructor,boundaryUpdater){function createBeforeAfterNodeSetter(isBefore,isStart){return function(node){assertValidNodeType(node,beforeAfterNodeTypes),assertValidNodeType(getRootContainer(node),rootContainerNodeTypes);var boundary=(isBefore?getBoundaryBeforeNode:getBoundaryAfterNode)(node);(isStart?setRangeStart:setRangeEnd)(this,boundary.node,boundary.offset)}}function setRangeStart(range,node,offset){var ec=range.endContainer,eo=range.endOffset;node===range.startContainer&&offset===range.startOffset||(getRootContainer(node)==getRootContainer(ec)&&1!=comparePoints(node,offset,ec,eo)||(ec=node,eo=offset),boundaryUpdater(range,node,offset,ec,eo))}function setRangeEnd(range,node,offset){var sc=range.startContainer,so=range.startOffset;node===range.endContainer&&offset===range.endOffset||(getRootContainer(node)==getRootContainer(sc)&&-1!=comparePoints(node,offset,sc,so)||(sc=node,so=offset),boundaryUpdater(range,sc,so,node,offset))}var F=function(){};F.prototype=api.rangePrototype,constructor.prototype=new F,util.extend(constructor.prototype,{setStart:function(node,offset){assertNoDocTypeNotationEntityAncestor(node,!0),assertValidOffset(node,offset),setRangeStart(this,node,offset)},setEnd:function(node,offset){assertNoDocTypeNotationEntityAncestor(node,!0),assertValidOffset(node,offset),setRangeEnd(this,node,offset)},setStartAndEnd:function(){var args=arguments,sc=args[0],so=args[1],ec=sc,eo=so;switch(args.length){case 3:eo=args[2];break;case 4:ec=args[2],eo=args[3]}boundaryUpdater(this,sc,so,ec,eo)},setBoundary:function(node,offset,isStart){this["set"+(isStart?"Start":"End")](node,offset)},setStartBefore:createBeforeAfterNodeSetter(!0,!0),setStartAfter:createBeforeAfterNodeSetter(!1,!0),setEndBefore:createBeforeAfterNodeSetter(!0,!1),setEndAfter:createBeforeAfterNodeSetter(!1,!1),collapse:function(isStart){assertRangeValid(this),isStart?boundaryUpdater(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):boundaryUpdater(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(node){assertNoDocTypeNotationEntityAncestor(node,!0),boundaryUpdater(this,node,0,node,getNodeLength(node))},selectNode:function(node){assertNoDocTypeNotationEntityAncestor(node,!1),assertValidNodeType(node,beforeAfterNodeTypes);var start=getBoundaryBeforeNode(node),end=getBoundaryAfterNode(node);boundaryUpdater(this,start.node,start.offset,end.node,end.offset)},extractContents:createRangeContentRemover(extractSubtree,boundaryUpdater),deleteContents:createRangeContentRemover(deleteSubtree,boundaryUpdater),canSurroundContents:function(){assertRangeValid(this),assertNodeNotReadOnly(this.startContainer),assertNodeNotReadOnly(this.endContainer);var iterator=new RangeIterator(this,!0),boundariesInvalid=iterator._first&&isNonTextPartiallySelected(iterator._first,this)||iterator._last&&isNonTextPartiallySelected(iterator._last,this);return iterator.detach(),!boundariesInvalid},splitBoundaries:function(){splitRangeBoundaries(this)},splitBoundariesPreservingPositions:function(positionsToPreserve){splitRangeBoundaries(this,positionsToPreserve)},normalizeBoundaries:function(){assertRangeValid(this);var sibling,sc=this.startContainer,so=this.startOffset,ec=this.endContainer,eo=this.endOffset,mergeForward=function(node){var sibling=node.nextSibling;sibling&&sibling.nodeType==node.nodeType&&(ec=node,eo=node.length,node.appendData(sibling.data),removeNode(sibling))},mergeBackward=function(node){var sibling=node.previousSibling;if(sibling&&sibling.nodeType==node.nodeType){sc=node;var nodeLength=node.length;if(so=sibling.length,node.insertData(0,sibling.data),removeNode(sibling),sc==ec)eo+=so,ec=sc;else if(ec==node.parentNode){var nodeIndex=getNodeIndex(node);eo==nodeIndex?(ec=node,eo=nodeLength):eo>nodeIndex&&eo--}}},normalizeStart=!0;if(isCharacterDataNode(ec))eo==ec.length?mergeForward(ec):0==eo&&(sibling=ec.previousSibling)&&sibling.nodeType==ec.nodeType&&(eo=sibling.length,sc==ec&&(normalizeStart=!1),sibling.appendData(ec.data),removeNode(ec),ec=sibling);else{if(eo>0){var endNode=ec.childNodes[eo-1];endNode&&isCharacterDataNode(endNode)&&mergeForward(endNode)}normalizeStart=!this.collapsed}if(normalizeStart){if(isCharacterDataNode(sc))0==so?mergeBackward(sc):so==sc.length&&(sibling=sc.nextSibling)&&sibling.nodeType==sc.nodeType&&(ec==sibling&&(ec=sc,eo+=sc.length),sc.appendData(sibling.data),removeNode(sibling));else if(so<sc.childNodes.length){var startNode=sc.childNodes[so];startNode&&isCharacterDataNode(startNode)&&mergeBackward(startNode)}}else sc=ec,so=eo;boundaryUpdater(this,sc,so,ec,eo)},collapseToPoint:function(node,offset){assertNoDocTypeNotationEntityAncestor(node,!0),assertValidOffset(node,offset),this.setStartAndEnd(node,offset)}}),copyComparisonConstants(constructor)}function updateCollapsedAndCommonAncestor(range){range.collapsed=range.startContainer===range.endContainer&&range.startOffset===range.endOffset,range.commonAncestorContainer=range.collapsed?range.startContainer:dom.getCommonAncestor(range.startContainer,range.endContainer)}function updateBoundaries(range,startContainer,startOffset,endContainer,endOffset){range.startContainer=startContainer,range.startOffset=startOffset,range.endContainer=endContainer,range.endOffset=endOffset,range.document=dom.getDocument(startContainer),updateCollapsedAndCommonAncestor(range)}function Range(doc){this.startContainer=doc,this.startOffset=0,this.endContainer=doc,this.endOffset=0,this.document=doc,updateCollapsedAndCommonAncestor(this)}var dom=api.dom,util=api.util,DomPosition=dom.DomPosition,DOMException=api.DOMException,isCharacterDataNode=dom.isCharacterDataNode,getNodeIndex=dom.getNodeIndex,isOrIsAncestorOf=dom.isOrIsAncestorOf,getDocument=dom.getDocument,comparePoints=dom.comparePoints,splitDataNode=dom.splitDataNode,getClosestAncestorIn=dom.getClosestAncestorIn,getNodeLength=dom.getNodeLength,arrayContains=dom.arrayContains,getRootContainer=dom.getRootContainer,crashyTextNodes=api.features.crashyTextNodes,removeNode=dom.removeNode;RangeIterator.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var current=this._current=this._next;return current&&(this._next=current!==this._last?current.nextSibling:null,isCharacterDataNode(current)&&this.clonePartiallySelectedTextNodes&&(current===this.ec&&(current=current.cloneNode(!0)).deleteData(this.eo,current.length-this.eo),this._current===this.sc&&(current=current.cloneNode(!0)).deleteData(0,this.so))),current},remove:function(){var start,end,current=this._current;!isCharacterDataNode(current)||current!==this.sc&&current!==this.ec?current.parentNode&&removeNode(current):(start=current===this.sc?this.so:0,end=current===this.ec?this.eo:current.length,start!=end&&current.deleteData(start,end-start))},isPartiallySelectedSubtree:function(){return isNonTextPartiallySelected(this._current,this.range)},getSubtreeIterator:function(){var subRange;if(this.isSingleCharacterDataNode)subRange=this.range.cloneRange(),subRange.collapse(!1);else{subRange=new Range(getRangeDocument(this.range));var current=this._current,startContainer=current,startOffset=0,endContainer=current,endOffset=getNodeLength(current);isOrIsAncestorOf(current,this.sc)&&(startContainer=this.sc,startOffset=this.so),isOrIsAncestorOf(current,this.ec)&&(endContainer=this.ec,endOffset=this.eo),updateBoundaries(subRange,startContainer,startOffset,endContainer,endOffset)}return new RangeIterator(subRange,this.clonePartiallySelectedTextNodes)},detach:function(){this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}};var beforeAfterNodeTypes=[1,3,4,5,7,8,10],rootContainerNodeTypes=[2,9,11],readonlyNodeTypes=[5,6,10,12],insertableNodeTypes=[1,3,4,5,7,8,10,11],surroundNodeTypes=[1,3,4,5,7,8],getDocumentOrFragmentContainer=createAncestorFinder([9,11]),getReadonlyAncestor=createAncestorFinder(readonlyNodeTypes),getDocTypeNotationEntityAncestor=createAncestorFinder([6,10,12]),styleEl=document.createElement("style"),htmlParsingConforms=!1;try{styleEl.innerHTML="<b>x</b>",htmlParsingConforms=3==styleEl.firstChild.nodeType}catch(e){}api.features.htmlParsingConforms=htmlParsingConforms;var createContextualFragment=htmlParsingConforms?function(fragmentStr){var node=this.startContainer,doc=getDocument(node);if(!node)throw new DOMException("INVALID_STATE_ERR");var el=null;return 1==node.nodeType?el=node:isCharacterDataNode(node)&&(el=dom.parentElement(node)),el=null===el||"HTML"==el.nodeName&&dom.isHtmlNamespace(getDocument(el).documentElement)&&dom.isHtmlNamespace(el)?doc.createElement("body"):el.cloneNode(!1),el.innerHTML=fragmentStr,dom.fragmentFromNodeChildren(el)}:function(fragmentStr){var doc=getRangeDocument(this),el=doc.createElement("body");return el.innerHTML=fragmentStr,dom.fragmentFromNodeChildren(el)},rangeProperties=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],s2s=0,s2e=1,e2e=2,e2s=3,n_b=0,n_a=1,n_b_a=2,n_i=3;util.extend(api.rangePrototype,{compareBoundaryPoints:function(how,range){assertRangeValid(this),assertSameDocumentOrFragment(this.startContainer,range.startContainer);var nodeA,offsetA,nodeB,offsetB,prefixA=how==e2s||how==s2s?"start":"end",prefixB=how==s2e||how==s2s?"start":"end";return nodeA=this[prefixA+"Container"],offsetA=this[prefixA+"Offset"],nodeB=range[prefixB+"Container"],offsetB=range[prefixB+"Offset"],comparePoints(nodeA,offsetA,nodeB,offsetB)},insertNode:function(node){if(assertRangeValid(this),assertValidNodeType(node,insertableNodeTypes),assertNodeNotReadOnly(this.startContainer),isOrIsAncestorOf(node,this.startContainer))throw new DOMException("HIERARCHY_REQUEST_ERR");var firstNodeInserted=insertNodeAtPosition(node,this.startContainer,this.startOffset);this.setStartBefore(firstNodeInserted)},cloneContents:function(){assertRangeValid(this);var clone,frag;if(this.collapsed)return getRangeDocument(this).createDocumentFragment();if(this.startContainer===this.endContainer&&isCharacterDataNode(this.startContainer))return clone=this.startContainer.cloneNode(!0),clone.data=clone.data.slice(this.startOffset,this.endOffset),frag=getRangeDocument(this).createDocumentFragment(),frag.appendChild(clone),frag;var iterator=new RangeIterator(this,!0);return clone=cloneSubtree(iterator),iterator.detach(),clone},canSurroundContents:function(){assertRangeValid(this),assertNodeNotReadOnly(this.startContainer),assertNodeNotReadOnly(this.endContainer);var iterator=new RangeIterator(this,!0),boundariesInvalid=iterator._first&&isNonTextPartiallySelected(iterator._first,this)||iterator._last&&isNonTextPartiallySelected(iterator._last,this);return iterator.detach(),!boundariesInvalid},surroundContents:function(node){if(assertValidNodeType(node,surroundNodeTypes),!this.canSurroundContents())throw new DOMException("INVALID_STATE_ERR");var content=this.extractContents();if(node.hasChildNodes())for(;node.lastChild;)node.removeChild(node.lastChild);insertNodeAtPosition(node,this.startContainer,this.startOffset),node.appendChild(content),this.selectNode(node)},cloneRange:function(){assertRangeValid(this);for(var prop,range=new Range(getRangeDocument(this)),i=rangeProperties.length;i--;)prop=rangeProperties[i],range[prop]=this[prop];return range},toString:function(){assertRangeValid(this);var sc=this.startContainer;if(sc===this.endContainer&&isCharacterDataNode(sc))return 3==sc.nodeType||4==sc.nodeType?sc.data.slice(this.startOffset,this.endOffset):"";var textParts=[],iterator=new RangeIterator(this,!0);return iterateSubtree(iterator,function(node){3!=node.nodeType&&4!=node.nodeType||textParts.push(node.data)}),iterator.detach(),textParts.join("")},compareNode:function(node){assertRangeValid(this);var parent=node.parentNode,nodeIndex=getNodeIndex(node);if(!parent)throw new DOMException("NOT_FOUND_ERR");var startComparison=this.comparePoint(parent,nodeIndex),endComparison=this.comparePoint(parent,nodeIndex+1);return startComparison<0?endComparison>0?n_b_a:n_b:endComparison>0?n_a:n_i},comparePoint:function(node,offset){return assertRangeValid(this),assertNode(node,"HIERARCHY_REQUEST_ERR"),assertSameDocumentOrFragment(node,this.startContainer),comparePoints(node,offset,this.startContainer,this.startOffset)<0?-1:comparePoints(node,offset,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:createContextualFragment,toHtml:function(){return rangeToHtml(this)},intersectsNode:function(node,touchingIsIntersecting){if(assertRangeValid(this),getRootContainer(node)!=getRangeRoot(this))return!1;var parent=node.parentNode,offset=getNodeIndex(node);if(!parent)return!0;var startComparison=comparePoints(parent,offset,this.endContainer,this.endOffset),endComparison=comparePoints(parent,offset+1,this.startContainer,this.startOffset);return touchingIsIntersecting?startComparison<=0&&endComparison>=0:startComparison<0&&endComparison>0},isPointInRange:function(node,offset){return assertRangeValid(this),assertNode(node,"HIERARCHY_REQUEST_ERR"),assertSameDocumentOrFragment(node,this.startContainer),comparePoints(node,offset,this.startContainer,this.startOffset)>=0&&comparePoints(node,offset,this.endContainer,this.endOffset)<=0},intersectsRange:function(range){return rangesIntersect(this,range,!1)},intersectsOrTouchesRange:function(range){return rangesIntersect(this,range,!0)},intersection:function(range){if(this.intersectsRange(range)){var startComparison=comparePoints(this.startContainer,this.startOffset,range.startContainer,range.startOffset),endComparison=comparePoints(this.endContainer,this.endOffset,range.endContainer,range.endOffset),intersectionRange=this.cloneRange();return-1==startComparison&&intersectionRange.setStart(range.startContainer,range.startOffset),1==endComparison&&intersectionRange.setEnd(range.endContainer,range.endOffset),intersectionRange}return null},union:function(range){if(this.intersectsOrTouchesRange(range)){var unionRange=this.cloneRange();return-1==comparePoints(range.startContainer,range.startOffset,this.startContainer,this.startOffset)&&unionRange.setStart(range.startContainer,range.startOffset),1==comparePoints(range.endContainer,range.endOffset,this.endContainer,this.endOffset)&&unionRange.setEnd(range.endContainer,range.endOffset),unionRange}throw new DOMException("Ranges do not intersect")},containsNode:function(node,allowPartial){return allowPartial?this.intersectsNode(node,!1):this.compareNode(node)==n_i},containsNodeContents:function(node){return this.comparePoint(node,0)>=0&&this.comparePoint(node,getNodeLength(node))<=0},containsRange:function(range){var intersection=this.intersection(range);return null!==intersection&&range.equals(intersection)},containsNodeText:function(node){var nodeRange=this.cloneRange();nodeRange.selectNode(node);var textNodes=nodeRange.getNodes([3]);if(textNodes.length>0){nodeRange.setStart(textNodes[0],0);var lastTextNode=textNodes.pop();return nodeRange.setEnd(lastTextNode,lastTextNode.length),this.containsRange(nodeRange)}return this.containsNodeContents(node)},getNodes:function(nodeTypes,filter){return assertRangeValid(this),getNodesInRange(this,nodeTypes,filter)},getDocument:function(){return getRangeDocument(this)},collapseBefore:function(node){this.setEndBefore(node),this.collapse(!1)},collapseAfter:function(node){this.setStartAfter(node),this.collapse(!0)},getBookmark:function(containerNode){var doc=getRangeDocument(this),preSelectionRange=api.createRange(doc);containerNode=containerNode||dom.getBody(doc),preSelectionRange.selectNodeContents(containerNode);var range=this.intersection(preSelectionRange),start=0,end=0;return range&&(preSelectionRange.setEnd(range.startContainer,range.startOffset),start=preSelectionRange.toString().length,end=start+range.toString().length),{start:start,end:end,containerNode:containerNode}},moveToBookmark:function(bookmark){var containerNode=bookmark.containerNode,charIndex=0;this.setStart(containerNode,0),this.collapse(!0);for(var node,nextCharIndex,i,childNodes,nodeStack=[containerNode],foundStart=!1,stop=!1;!stop&&(node=nodeStack.pop());)if(3==node.nodeType)nextCharIndex=charIndex+node.length,!foundStart&&bookmark.start>=charIndex&&bookmark.start<=nextCharIndex&&(this.setStart(node,bookmark.start-charIndex),foundStart=!0),foundStart&&bookmark.end>=charIndex&&bookmark.end<=nextCharIndex&&(this.setEnd(node,bookmark.end-charIndex),stop=!0),charIndex=nextCharIndex;else for(childNodes=node.childNodes,i=childNodes.length;i--;)nodeStack.push(childNodes[i])},getName:function(){return"DomRange"},equals:function(range){return Range.rangesEqual(this,range)},isValid:function(){return isRangeValid(this)},inspect:function(){return inspect(this)},detach:function(){}}),createPrototypeRange(Range,updateBoundaries),util.extend(Range,{rangeProperties:rangeProperties,RangeIterator:RangeIterator,copyComparisonConstants:copyComparisonConstants,createPrototypeRange:createPrototypeRange,inspect:inspect,toHtml:rangeToHtml,getRangeDocument:getRangeDocument,rangesEqual:function(r1,r2){return r1.startContainer===r2.startContainer&&r1.startOffset===r2.startOffset&&r1.endContainer===r2.endContainer&&r1.endOffset===r2.endOffset}}),api.DomRange=Range}),api.createCoreModule("WrappedRange",["DomRange"],function(api,module){var WrappedRange,WrappedTextRange,dom=api.dom,util=api.util,DomPosition=dom.DomPosition,DomRange=api.DomRange,getBody=dom.getBody,getContentDocument=dom.getContentDocument,isCharacterDataNode=dom.isCharacterDataNode;if(api.features.implementsDomRange&&function(){function updateRangeProperties(range){for(var prop,i=rangeProperties.length;i--;)prop=rangeProperties[i],range[prop]=range.nativeRange[prop];range.collapsed=range.startContainer===range.endContainer&&range.startOffset===range.endOffset}function updateNativeRange(range,startContainer,startOffset,endContainer,endOffset){var startMoved=range.startContainer!==startContainer||range.startOffset!=startOffset,endMoved=range.endContainer!==endContainer||range.endOffset!=endOffset,nativeRangeDifferent=!range.equals(range.nativeRange);(startMoved||endMoved||nativeRangeDifferent)&&(range.setEnd(endContainer,endOffset),range.setStart(startContainer,startOffset))}var rangeProto,createBeforeAfterNodeSetter,rangeProperties=DomRange.rangeProperties;WrappedRange=function(range){if(!range)throw module.createError("WrappedRange: Range must be specified");this.nativeRange=range,updateRangeProperties(this)},DomRange.createPrototypeRange(WrappedRange,updateNativeRange),rangeProto=WrappedRange.prototype,rangeProto.selectNode=function(node){this.nativeRange.selectNode(node),updateRangeProperties(this)},rangeProto.cloneContents=function(){return this.nativeRange.cloneContents()},rangeProto.surroundContents=function(node){this.nativeRange.surroundContents(node),updateRangeProperties(this)},rangeProto.collapse=function(isStart){this.nativeRange.collapse(isStart),updateRangeProperties(this)},rangeProto.cloneRange=function(){return new WrappedRange(this.nativeRange.cloneRange())},rangeProto.refresh=function(){updateRangeProperties(this)},rangeProto.toString=function(){return this.nativeRange.toString()};var testTextNode=document.createTextNode("test");getBody(document).appendChild(testTextNode);var range=document.createRange();range.setStart(testTextNode,0),range.setEnd(testTextNode,0);try{range.setStart(testTextNode,1),rangeProto.setStart=function(node,offset){this.nativeRange.setStart(node,offset),updateRangeProperties(this)},rangeProto.setEnd=function(node,offset){this.nativeRange.setEnd(node,offset),updateRangeProperties(this)},createBeforeAfterNodeSetter=function(name){return function(node){this.nativeRange[name](node),updateRangeProperties(this)}}}catch(ex){rangeProto.setStart=function(node,offset){try{this.nativeRange.setStart(node,offset)}catch(ex){this.nativeRange.setEnd(node,offset),this.nativeRange.setStart(node,offset)}updateRangeProperties(this)},rangeProto.setEnd=function(node,offset){try{this.nativeRange.setEnd(node,offset)}catch(ex){this.nativeRange.setStart(node,offset),this.nativeRange.setEnd(node,offset)}updateRangeProperties(this)},createBeforeAfterNodeSetter=function(name,oppositeName){return function(node){try{this.nativeRange[name](node)}catch(ex){this.nativeRange[oppositeName](node),this.nativeRange[name](node)}updateRangeProperties(this)}}}rangeProto.setStartBefore=createBeforeAfterNodeSetter("setStartBefore","setEndBefore"),rangeProto.setStartAfter=createBeforeAfterNodeSetter("setStartAfter","setEndAfter"),rangeProto.setEndBefore=createBeforeAfterNodeSetter("setEndBefore","setStartBefore"),rangeProto.setEndAfter=createBeforeAfterNodeSetter("setEndAfter","setStartAfter"),rangeProto.selectNodeContents=function(node){this.setStartAndEnd(node,0,dom.getNodeLength(node))},range.selectNodeContents(testTextNode),range.setEnd(testTextNode,3);var range2=document.createRange();range2.selectNodeContents(testTextNode),range2.setEnd(testTextNode,4),range2.setStart(testTextNode,2),-1==range.compareBoundaryPoints(range.START_TO_END,range2)&&1==range.compareBoundaryPoints(range.END_TO_START,range2)?rangeProto.compareBoundaryPoints=function(type,range){return range=range.nativeRange||range,type==range.START_TO_END?type=range.END_TO_START:type==range.END_TO_START&&(type=range.START_TO_END),this.nativeRange.compareBoundaryPoints(type,range)}:rangeProto.compareBoundaryPoints=function(type,range){return this.nativeRange.compareBoundaryPoints(type,range.nativeRange||range)};var el=document.createElement("div");el.innerHTML="123";var textNode=el.firstChild,body=getBody(document);body.appendChild(el),range.setStart(textNode,1),range.setEnd(textNode,2),range.deleteContents(),"13"==textNode.data&&(rangeProto.deleteContents=function(){this.nativeRange.deleteContents(),updateRangeProperties(this)},rangeProto.extractContents=function(){var frag=this.nativeRange.extractContents();return updateRangeProperties(this),frag}),body.removeChild(el),body=null,util.isHostMethod(range,"createContextualFragment")&&(rangeProto.createContextualFragment=function(fragmentStr){return this.nativeRange.createContextualFragment(fragmentStr)}),getBody(document).removeChild(testTextNode),rangeProto.getName=function(){return"WrappedRange"},api.WrappedRange=WrappedRange,api.createNativeRange=function(doc){return doc=getContentDocument(doc,module,"createNativeRange"),doc.createRange()}}(),api.features.implementsTextRange){var getTextRangeContainerElement=function(textRange){var parentEl=textRange.parentElement(),range=textRange.duplicate();range.collapse(!0);var startEl=range.parentElement();range=textRange.duplicate(),range.collapse(!1);var endEl=range.parentElement(),startEndContainer=startEl==endEl?startEl:dom.getCommonAncestor(startEl,endEl);return startEndContainer==parentEl?startEndContainer:dom.getCommonAncestor(parentEl,startEndContainer)},textRangeIsCollapsed=function(textRange){return 0==textRange.compareEndPoints("StartToEnd",textRange)},getTextRangeBoundaryPosition=function(textRange,wholeRangeContainerElement,isStart,isCollapsed,startInfo){var workingRange=textRange.duplicate();workingRange.collapse(isStart);var containerElement=workingRange.parentElement();if(dom.isOrIsAncestorOf(wholeRangeContainerElement,containerElement)||(containerElement=wholeRangeContainerElement),!containerElement.canHaveHTML){var pos=new DomPosition(containerElement.parentNode,dom.getNodeIndex(containerElement));return{boundaryPosition:pos,nodeInfo:{nodeIndex:pos.offset,containerElement:pos.node}}}var workingNode=dom.getDocument(containerElement).createElement("span");workingNode.parentNode&&dom.removeNode(workingNode);for(var comparison,previousNode,nextNode,boundaryPosition,boundaryNode,workingComparisonType=isStart?"StartToStart":"StartToEnd",start=startInfo&&startInfo.containerElement==containerElement?startInfo.nodeIndex:0,childNodeCount=containerElement.childNodes.length,end=childNodeCount,nodeIndex=end;;){if(nodeIndex==childNodeCount?containerElement.appendChild(workingNode):containerElement.insertBefore(workingNode,containerElement.childNodes[nodeIndex]),workingRange.moveToElementText(workingNode),0==(comparison=workingRange.compareEndPoints(workingComparisonType,textRange))||start==end)break;if(-1==comparison){if(end==start+1)break;start=nodeIndex}else end=end==start+1?start:nodeIndex;nodeIndex=Math.floor((start+end)/2),containerElement.removeChild(workingNode)}if(boundaryNode=workingNode.nextSibling,-1==comparison&&boundaryNode&&isCharacterDataNode(boundaryNode)){workingRange.setEndPoint(isStart?"EndToStart":"EndToEnd",textRange);var offset;if(/[\r\n]/.test(boundaryNode.data)){var tempRange=workingRange.duplicate(),rangeLength=tempRange.text.replace(/\r\n/g,"\r").length;for(offset=tempRange.moveStart("character",rangeLength);-1==(comparison=tempRange.compareEndPoints("StartToEnd",tempRange));)offset++,tempRange.moveStart("character",1)}else offset=workingRange.text.length;boundaryPosition=new DomPosition(boundaryNode,offset)}else previousNode=(isCollapsed||!isStart)&&workingNode.previousSibling,nextNode=(isCollapsed||isStart)&&workingNode.nextSibling,boundaryPosition=nextNode&&isCharacterDataNode(nextNode)?new DomPosition(nextNode,0):previousNode&&isCharacterDataNode(previousNode)?new DomPosition(previousNode,previousNode.data.length):new DomPosition(containerElement,dom.getNodeIndex(workingNode));return dom.removeNode(workingNode),{boundaryPosition:boundaryPosition,nodeInfo:{nodeIndex:nodeIndex,containerElement:containerElement}}},createBoundaryTextRange=function(boundaryPosition,isStart){var boundaryNode,boundaryParent,workingNode,childNodes,boundaryOffset=boundaryPosition.offset,doc=dom.getDocument(boundaryPosition.node),workingRange=getBody(doc).createTextRange(),nodeIsDataNode=isCharacterDataNode(boundaryPosition.node);return nodeIsDataNode?(boundaryNode=boundaryPosition.node,boundaryParent=boundaryNode.parentNode):(childNodes=boundaryPosition.node.childNodes,boundaryNode=boundaryOffset<childNodes.length?childNodes[boundaryOffset]:null,boundaryParent=boundaryPosition.node),workingNode=doc.createElement("span"),workingNode.innerHTML="&#feff;",boundaryNode?boundaryParent.insertBefore(workingNode,boundaryNode):boundaryParent.appendChild(workingNode),workingRange.moveToElementText(workingNode),workingRange.collapse(!isStart),boundaryParent.removeChild(workingNode),nodeIsDataNode&&workingRange[isStart?"moveStart":"moveEnd"]("character",boundaryOffset),workingRange};WrappedTextRange=function(textRange){this.textRange=textRange,this.refresh()},WrappedTextRange.prototype=new DomRange(document),WrappedTextRange.prototype.refresh=function(){var start,end,startBoundary,rangeContainerElement=getTextRangeContainerElement(this.textRange);textRangeIsCollapsed(this.textRange)?end=start=getTextRangeBoundaryPosition(this.textRange,rangeContainerElement,!0,!0).boundaryPosition:(startBoundary=getTextRangeBoundaryPosition(this.textRange,rangeContainerElement,!0,!1),start=startBoundary.boundaryPosition,end=getTextRangeBoundaryPosition(this.textRange,rangeContainerElement,!1,!1,startBoundary.nodeInfo).boundaryPosition),this.setStart(start.node,start.offset),this.setEnd(end.node,end.offset)},WrappedTextRange.prototype.getName=function(){return"WrappedTextRange"},DomRange.copyComparisonConstants(WrappedTextRange);var rangeToTextRange=function(range){if(range.collapsed)return createBoundaryTextRange(new DomPosition(range.startContainer,range.startOffset),!0);var startRange=createBoundaryTextRange(new DomPosition(range.startContainer,range.startOffset),!0),endRange=createBoundaryTextRange(new DomPosition(range.endContainer,range.endOffset),!1),textRange=getBody(DomRange.getRangeDocument(range)).createTextRange();return textRange.setEndPoint("StartToStart",startRange),textRange.setEndPoint("EndToEnd",endRange),textRange};if(WrappedTextRange.rangeToTextRange=rangeToTextRange,WrappedTextRange.prototype.toTextRange=function(){return rangeToTextRange(this)},api.WrappedTextRange=WrappedTextRange,!api.features.implementsDomRange||api.config.preferTextRange){var globalObj=function(f){return f("return this;")()}(Function);void 0===globalObj.Range&&(globalObj.Range=WrappedTextRange),api.createNativeRange=function(doc){return doc=getContentDocument(doc,module,"createNativeRange"),getBody(doc).createTextRange()},api.WrappedRange=WrappedTextRange}}api.createRange=function(doc){return doc=getContentDocument(doc,module,"createRange"),new api.WrappedRange(api.createNativeRange(doc))},api.createRangyRange=function(doc){return doc=getContentDocument(doc,module,"createRangyRange"),new DomRange(doc)},util.createAliasForDeprecatedMethod(api,"createIframeRange","createRange"),util.createAliasForDeprecatedMethod(api,"createIframeRangyRange","createRangyRange"),api.addShimListener(function(win){var doc=win.document;void 0===doc.createRange&&(doc.createRange=function(){return api.createRange(doc)}),doc=win=null})}),api.createCoreModule("WrappedSelection",["DomRange","WrappedRange"],function(api,module){function isDirectionBackward(dir){return"string"==typeof dir?/^backward(s)?$/i.test(dir):!!dir}function getWindow(win,methodName){if(win){if(dom.isWindow(win))return win;if(win instanceof WrappedSelection)return win.win;var doc=dom.getContentDocument(win,module,methodName);return dom.getWindow(doc)}return window}function getWinSelection(winParam){return getWindow(winParam,"getWinSelection").getSelection()}function getDocSelection(winParam){return getWindow(winParam,"getDocSelection").document.selection}function winSelectionIsBackward(sel){var backward=!1;return sel.anchorNode&&(backward=1==dom.comparePoints(sel.anchorNode,sel.anchorOffset,sel.focusNode,sel.focusOffset)),backward}function updateAnchorAndFocusFromRange(sel,range,backward){var anchorPrefix=backward?"end":"start",focusPrefix=backward?"start":"end";sel.anchorNode=range[anchorPrefix+"Container"],sel.anchorOffset=range[anchorPrefix+"Offset"],sel.focusNode=range[focusPrefix+"Container"],sel.focusOffset=range[focusPrefix+"Offset"]}function updateAnchorAndFocusFromNativeSelection(sel){var nativeSel=sel.nativeSelection;sel.anchorNode=nativeSel.anchorNode,sel.anchorOffset=nativeSel.anchorOffset,sel.focusNode=nativeSel.focusNode,sel.focusOffset=nativeSel.focusOffset}
function updateEmptySelection(sel){sel.anchorNode=sel.focusNode=null,sel.anchorOffset=sel.focusOffset=0,sel.rangeCount=0,sel.isCollapsed=!0,sel._ranges.length=0}function getNativeRange(range){var nativeRange;return range instanceof DomRange?(nativeRange=api.createNativeRange(range.getDocument()),nativeRange.setEnd(range.endContainer,range.endOffset),nativeRange.setStart(range.startContainer,range.startOffset)):range instanceof WrappedRange?nativeRange=range.nativeRange:features.implementsDomRange&&range instanceof dom.getWindow(range.startContainer).Range&&(nativeRange=range),nativeRange}function rangeContainsSingleElement(rangeNodes){if(!rangeNodes.length||1!=rangeNodes[0].nodeType)return!1;for(var i=1,len=rangeNodes.length;i<len;++i)if(!dom.isAncestorOf(rangeNodes[0],rangeNodes[i]))return!1;return!0}function getSingleElementFromRange(range){var nodes=range.getNodes();if(!rangeContainsSingleElement(nodes))throw module.createError("getSingleElementFromRange: range "+range.inspect()+" did not consist of a single element");return nodes[0]}function isTextRange(range){return!!range&&void 0!==range.text}function updateFromTextRange(sel,range){var wrappedRange=new WrappedRange(range);sel._ranges=[wrappedRange],updateAnchorAndFocusFromRange(sel,wrappedRange,!1),sel.rangeCount=1,sel.isCollapsed=wrappedRange.collapsed}function updateControlSelection(sel){if(sel._ranges.length=0,"None"==sel.docSelection.type)updateEmptySelection(sel);else{var controlRange=sel.docSelection.createRange();if(isTextRange(controlRange))updateFromTextRange(sel,controlRange);else{sel.rangeCount=controlRange.length;for(var range,doc=getDocument(controlRange.item(0)),i=0;i<sel.rangeCount;++i)range=api.createRange(doc),range.selectNode(controlRange.item(i)),sel._ranges.push(range);sel.isCollapsed=1==sel.rangeCount&&sel._ranges[0].collapsed,updateAnchorAndFocusFromRange(sel,sel._ranges[sel.rangeCount-1],!1)}}}function addRangeToControlSelection(sel,range){for(var controlRange=sel.docSelection.createRange(),rangeElement=getSingleElementFromRange(range),doc=getDocument(controlRange.item(0)),newControlRange=getBody(doc).createControlRange(),i=0,len=controlRange.length;i<len;++i)newControlRange.add(controlRange.item(i));try{newControlRange.add(rangeElement)}catch(ex){throw module.createError("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}newControlRange.select(),updateControlSelection(sel)}function WrappedSelection(selection,docSelection,win){this.nativeSelection=selection,this.docSelection=docSelection,this._ranges=[],this.win=win,this.refresh()}function deleteProperties(sel){sel.win=sel.anchorNode=sel.focusNode=sel._ranges=null,sel.rangeCount=sel.anchorOffset=sel.focusOffset=0,sel.detached=!0}function actOnCachedSelection(win,action){for(var cached,sel,i=cachedRangySelections.length;i--;)if(cached=cachedRangySelections[i],sel=cached.selection,"deleteAll"==action)deleteProperties(sel);else if(cached.win==win)return"delete"==action?(cachedRangySelections.splice(i,1),!0):sel;return"deleteAll"==action&&(cachedRangySelections.length=0),null}function createControlSelection(sel,ranges){for(var el,doc=getDocument(ranges[0].startContainer),controlRange=getBody(doc).createControlRange(),i=0,len=ranges.length;i<len;++i){el=getSingleElementFromRange(ranges[i]);try{controlRange.add(el)}catch(ex){throw module.createError("setRanges(): Element within one of the specified Ranges could not be added to control selection (does it have layout?)")}}controlRange.select(),updateControlSelection(sel)}function assertNodeInSameDocument(sel,node){if(sel.win.document!=getDocument(node))throw new DOMException("WRONG_DOCUMENT_ERR")}function createStartOrEndSetter(isStart){return function(node,offset){var range;this.rangeCount?(range=this.getRangeAt(0),range["set"+(isStart?"Start":"End")](node,offset)):(range=api.createRange(this.win.document),range.setStartAndEnd(node,offset)),this.setSingleRange(range,this.isBackward())}}function inspect(sel){var rangeInspects=[],anchor=new DomPosition(sel.anchorNode,sel.anchorOffset),focus=new DomPosition(sel.focusNode,sel.focusOffset),name="function"==typeof sel.getName?sel.getName():"Selection";if(void 0!==sel.rangeCount)for(var i=0,len=sel.rangeCount;i<len;++i)rangeInspects[i]=DomRange.inspect(sel.getRangeAt(i));return"["+name+"(Ranges: "+rangeInspects.join(", ")+")(anchor: "+anchor.inspect()+", focus: "+focus.inspect()+"]"}api.config.checkSelectionRanges=!0;var getNativeSelection,selectionIsCollapsed,dom=api.dom,util=api.util,isHostMethod=util.isHostMethod,DomRange=api.DomRange,WrappedRange=api.WrappedRange,DOMException=api.DOMException,DomPosition=dom.DomPosition,features=api.features,getDocument=dom.getDocument,getBody=dom.getBody,rangesEqual=DomRange.rangesEqual,implementsWinGetSelection=isHostMethod(window,"getSelection"),implementsDocSelection=util.isHostObject(document,"selection");features.implementsWinGetSelection=implementsWinGetSelection,features.implementsDocSelection=implementsDocSelection;var useDocumentSelection=implementsDocSelection&&(!implementsWinGetSelection||api.config.preferTextRange);if(useDocumentSelection)getNativeSelection=getDocSelection,api.isSelectionValid=function(winParam){var doc=getWindow(winParam,"isSelectionValid").document,nativeSel=doc.selection;return"None"!=nativeSel.type||getDocument(nativeSel.createRange().parentElement())==doc};else{if(!implementsWinGetSelection)return module.fail("Neither document.selection or window.getSelection() detected."),!1;getNativeSelection=getWinSelection,api.isSelectionValid=function(){return!0}}api.getNativeSelection=getNativeSelection;var testSelection=getNativeSelection();if(!testSelection)return module.fail("Native selection was null (possibly issue 138?)"),!1;var testRange=api.createNativeRange(document),body=getBody(document),selectionHasAnchorAndFocus=util.areHostProperties(testSelection,["anchorNode","focusNode","anchorOffset","focusOffset"]);features.selectionHasAnchorAndFocus=selectionHasAnchorAndFocus;var selectionHasExtend=isHostMethod(testSelection,"extend");features.selectionHasExtend=selectionHasExtend;var selectionHasRangeCount="number"==typeof testSelection.rangeCount;features.selectionHasRangeCount=selectionHasRangeCount;var selectionSupportsMultipleRanges=!1,collapsedNonEditableSelectionsSupported=!0,addRangeBackwardToNative=selectionHasExtend?function(nativeSelection,range){var doc=DomRange.getRangeDocument(range),endRange=api.createRange(doc);endRange.collapseToPoint(range.endContainer,range.endOffset),nativeSelection.addRange(getNativeRange(endRange)),nativeSelection.extend(range.startContainer,range.startOffset)}:null;util.areHostMethods(testSelection,["addRange","getRangeAt","removeAllRanges"])&&"number"==typeof testSelection.rangeCount&&features.implementsDomRange&&function(){var sel=window.getSelection();if(sel){for(var originalSelectionRangeCount=sel.rangeCount,selectionHasMultipleRanges=originalSelectionRangeCount>1,originalSelectionRanges=[],originalSelectionBackward=winSelectionIsBackward(sel),i=0;i<originalSelectionRangeCount;++i)originalSelectionRanges[i]=sel.getRangeAt(i);var testEl=dom.createTestElement(document,"",!1),textNode=testEl.appendChild(document.createTextNode("   ")),r1=document.createRange();if(r1.setStart(textNode,1),r1.collapse(!0),sel.removeAllRanges(),sel.addRange(r1),collapsedNonEditableSelectionsSupported=1==sel.rangeCount,sel.removeAllRanges(),!selectionHasMultipleRanges){var chromeMatch=window.navigator.appVersion.match(/Chrome\/(.*?) /);if(chromeMatch&&parseInt(chromeMatch[1])>=36)selectionSupportsMultipleRanges=!1;else{var r2=r1.cloneRange();r1.setStart(textNode,0),r2.setEnd(textNode,3),r2.setStart(textNode,2),sel.addRange(r1),sel.addRange(r2),selectionSupportsMultipleRanges=2==sel.rangeCount}}for(dom.removeNode(testEl),sel.removeAllRanges(),i=0;i<originalSelectionRangeCount;++i)0==i&&originalSelectionBackward?addRangeBackwardToNative?addRangeBackwardToNative(sel,originalSelectionRanges[i]):(api.warn("Rangy initialization: original selection was backwards but selection has been restored forwards because the browser does not support Selection.extend"),sel.addRange(originalSelectionRanges[i])):sel.addRange(originalSelectionRanges[i])}}(),features.selectionSupportsMultipleRanges=selectionSupportsMultipleRanges,features.collapsedNonEditableSelectionsSupported=collapsedNonEditableSelectionsSupported;var testControlRange,implementsControlRange=!1;body&&isHostMethod(body,"createControlRange")&&(testControlRange=body.createControlRange(),util.areHostProperties(testControlRange,["item","add"])&&(implementsControlRange=!0)),features.implementsControlRange=implementsControlRange,selectionIsCollapsed=selectionHasAnchorAndFocus?function(sel){return sel.anchorNode===sel.focusNode&&sel.anchorOffset===sel.focusOffset}:function(sel){return!!sel.rangeCount&&sel.getRangeAt(sel.rangeCount-1).collapsed};var getSelectionRangeAt;isHostMethod(testSelection,"getRangeAt")?getSelectionRangeAt=function(sel,index){try{return sel.getRangeAt(index)}catch(ex){return null}}:selectionHasAnchorAndFocus&&(getSelectionRangeAt=function(sel){var doc=getDocument(sel.anchorNode),range=api.createRange(doc);return range.setStartAndEnd(sel.anchorNode,sel.anchorOffset,sel.focusNode,sel.focusOffset),range.collapsed!==this.isCollapsed&&range.setStartAndEnd(sel.focusNode,sel.focusOffset,sel.anchorNode,sel.anchorOffset),range}),WrappedSelection.prototype=api.selectionPrototype;var cachedRangySelections=[],getSelection=function(win){if(win&&win instanceof WrappedSelection)return win.refresh(),win;win=getWindow(win,"getNativeSelection");var sel=actOnCachedSelection(win),nativeSel=getNativeSelection(win),docSel=implementsDocSelection?getDocSelection(win):null;return sel?(sel.nativeSelection=nativeSel,sel.docSelection=docSel,sel.refresh()):(sel=new WrappedSelection(nativeSel,docSel,win),cachedRangySelections.push({win:win,selection:sel})),sel};api.getSelection=getSelection,util.createAliasForDeprecatedMethod(api,"getIframeSelection","getSelection");var selProto=WrappedSelection.prototype;if(!useDocumentSelection&&selectionHasAnchorAndFocus&&util.areHostMethods(testSelection,["removeAllRanges","addRange"])){selProto.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),updateEmptySelection(this)};var addRangeBackward=function(sel,range){addRangeBackwardToNative(sel.nativeSelection,range),sel.refresh()};selProto.addRange=selectionHasRangeCount?function(range,direction){if(implementsControlRange&&implementsDocSelection&&"Control"==this.docSelection.type)addRangeToControlSelection(this,range);else if(isDirectionBackward(direction)&&selectionHasExtend)addRangeBackward(this,range);else{var previousRangeCount;selectionSupportsMultipleRanges?previousRangeCount=this.rangeCount:(this.removeAllRanges(),previousRangeCount=0);var clonedNativeRange=getNativeRange(range).cloneRange();try{this.nativeSelection.addRange(clonedNativeRange)}catch(ex){}if(this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==previousRangeCount+1){if(api.config.checkSelectionRanges){var nativeRange=getSelectionRangeAt(this.nativeSelection,this.rangeCount-1);nativeRange&&!rangesEqual(nativeRange,range)&&(range=new WrappedRange(nativeRange))}this._ranges[this.rangeCount-1]=range,updateAnchorAndFocusFromRange(this,range,selectionIsBackward(this.nativeSelection)),this.isCollapsed=selectionIsCollapsed(this)}else this.refresh()}}:function(range,direction){isDirectionBackward(direction)&&selectionHasExtend?addRangeBackward(this,range):(this.nativeSelection.addRange(getNativeRange(range)),this.refresh())},selProto.setRanges=function(ranges){if(implementsControlRange&&implementsDocSelection&&ranges.length>1)createControlSelection(this,ranges);else{this.removeAllRanges();for(var i=0,len=ranges.length;i<len;++i)this.addRange(ranges[i])}}}else{if(!(isHostMethod(testSelection,"empty")&&isHostMethod(testRange,"select")&&implementsControlRange&&useDocumentSelection))return module.fail("No means of selecting a Range or TextRange was found"),!1;selProto.removeAllRanges=function(){try{if(this.docSelection.empty(),"None"!=this.docSelection.type){var doc;if(this.anchorNode)doc=getDocument(this.anchorNode);else if("Control"==this.docSelection.type){var controlRange=this.docSelection.createRange();controlRange.length&&(doc=getDocument(controlRange.item(0)))}if(doc){getBody(doc).createTextRange().select(),this.docSelection.empty()}}}catch(ex){}updateEmptySelection(this)},selProto.addRange=function(range){"Control"==this.docSelection.type?addRangeToControlSelection(this,range):(api.WrappedTextRange.rangeToTextRange(range).select(),this._ranges[0]=range,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,updateAnchorAndFocusFromRange(this,range,!1))},selProto.setRanges=function(ranges){this.removeAllRanges();var rangeCount=ranges.length;rangeCount>1?createControlSelection(this,ranges):rangeCount&&this.addRange(ranges[0])}}selProto.getRangeAt=function(index){if(index<0||index>=this.rangeCount)throw new DOMException("INDEX_SIZE_ERR");return this._ranges[index].cloneRange()};var refreshSelection;if(useDocumentSelection)refreshSelection=function(sel){var range;api.isSelectionValid(sel.win)?range=sel.docSelection.createRange():(range=getBody(sel.win.document).createTextRange(),range.collapse(!0)),"Control"==sel.docSelection.type?updateControlSelection(sel):isTextRange(range)?updateFromTextRange(sel,range):updateEmptySelection(sel)};else if(isHostMethod(testSelection,"getRangeAt")&&"number"==typeof testSelection.rangeCount)refreshSelection=function(sel){if(implementsControlRange&&implementsDocSelection&&"Control"==sel.docSelection.type)updateControlSelection(sel);else if(sel._ranges.length=sel.rangeCount=sel.nativeSelection.rangeCount,sel.rangeCount){for(var i=0,len=sel.rangeCount;i<len;++i)sel._ranges[i]=new api.WrappedRange(sel.nativeSelection.getRangeAt(i));updateAnchorAndFocusFromRange(sel,sel._ranges[sel.rangeCount-1],selectionIsBackward(sel.nativeSelection)),sel.isCollapsed=selectionIsCollapsed(sel)}else updateEmptySelection(sel)};else{if(!selectionHasAnchorAndFocus||"boolean"!=typeof testSelection.isCollapsed||"boolean"!=typeof testRange.collapsed||!features.implementsDomRange)return module.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;refreshSelection=function(sel){var range,nativeSel=sel.nativeSelection;nativeSel.anchorNode?(range=getSelectionRangeAt(nativeSel,0),sel._ranges=[range],sel.rangeCount=1,updateAnchorAndFocusFromNativeSelection(sel),sel.isCollapsed=selectionIsCollapsed(sel)):updateEmptySelection(sel)}}selProto.refresh=function(checkForChanges){var oldRanges=checkForChanges?this._ranges.slice(0):null,oldAnchorNode=this.anchorNode,oldAnchorOffset=this.anchorOffset;if(refreshSelection(this),checkForChanges){var i=oldRanges.length;if(i!=this._ranges.length)return!0;if(this.anchorNode!=oldAnchorNode||this.anchorOffset!=oldAnchorOffset)return!0;for(;i--;)if(!rangesEqual(oldRanges[i],this._ranges[i]))return!0;return!1}};var removeRangeManually=function(sel,range){var ranges=sel.getAllRanges();sel.removeAllRanges();for(var i=0,len=ranges.length;i<len;++i)rangesEqual(range,ranges[i])||sel.addRange(ranges[i]);sel.rangeCount||updateEmptySelection(sel)};selProto.removeRange=implementsControlRange&&implementsDocSelection?function(range){if("Control"==this.docSelection.type){for(var el,controlRange=this.docSelection.createRange(),rangeElement=getSingleElementFromRange(range),doc=getDocument(controlRange.item(0)),newControlRange=getBody(doc).createControlRange(),removed=!1,i=0,len=controlRange.length;i<len;++i)el=controlRange.item(i),el!==rangeElement||removed?newControlRange.add(controlRange.item(i)):removed=!0;newControlRange.select(),updateControlSelection(this)}else removeRangeManually(this,range)}:function(range){removeRangeManually(this,range)};var selectionIsBackward;!useDocumentSelection&&selectionHasAnchorAndFocus&&features.implementsDomRange?(selectionIsBackward=winSelectionIsBackward,selProto.isBackward=function(){return selectionIsBackward(this)}):selectionIsBackward=selProto.isBackward=function(){return!1},selProto.isBackwards=selProto.isBackward,selProto.toString=function(){for(var rangeTexts=[],i=0,len=this.rangeCount;i<len;++i)rangeTexts[i]=""+this._ranges[i];return rangeTexts.join("")},selProto.collapse=function(node,offset){assertNodeInSameDocument(this,node);var range=api.createRange(node);range.collapseToPoint(node,offset),this.setSingleRange(range),this.isCollapsed=!0},selProto.collapseToStart=function(){if(!this.rangeCount)throw new DOMException("INVALID_STATE_ERR");var range=this._ranges[0];this.collapse(range.startContainer,range.startOffset)},selProto.collapseToEnd=function(){if(!this.rangeCount)throw new DOMException("INVALID_STATE_ERR");var range=this._ranges[this.rangeCount-1];this.collapse(range.endContainer,range.endOffset)},selProto.selectAllChildren=function(node){assertNodeInSameDocument(this,node);var range=api.createRange(node);range.selectNodeContents(node),this.setSingleRange(range)},selProto.deleteFromDocument=function(){if(implementsControlRange&&implementsDocSelection&&"Control"==this.docSelection.type){for(var element,controlRange=this.docSelection.createRange();controlRange.length;)element=controlRange.item(0),controlRange.remove(element),dom.removeNode(element);this.refresh()}else if(this.rangeCount){var ranges=this.getAllRanges();if(ranges.length){this.removeAllRanges();for(var i=0,len=ranges.length;i<len;++i)ranges[i].deleteContents();this.addRange(ranges[len-1])}}},selProto.eachRange=function(func,returnValue){for(var i=0,len=this._ranges.length;i<len;++i)if(func(this.getRangeAt(i)))return returnValue},selProto.getAllRanges=function(){var ranges=[];return this.eachRange(function(range){ranges.push(range)}),ranges},selProto.setSingleRange=function(range,direction){this.removeAllRanges(),this.addRange(range,direction)},selProto.callMethodOnEachRange=function(methodName,params){var results=[];return this.eachRange(function(range){results.push(range[methodName].apply(range,params||[]))}),results},selProto.setStart=createStartOrEndSetter(!0),selProto.setEnd=createStartOrEndSetter(!1),api.rangePrototype.select=function(direction){getSelection(this.getDocument()).setSingleRange(this,direction)},selProto.changeEachRange=function(func){var ranges=[],backward=this.isBackward();this.eachRange(function(range){func(range),ranges.push(range)}),this.removeAllRanges(),backward&&1==ranges.length?this.addRange(ranges[0],"backward"):this.setRanges(ranges)},selProto.containsNode=function(node,allowPartial){return this.eachRange(function(range){return range.containsNode(node,allowPartial)},!0)||!1},selProto.getBookmark=function(containerNode){return{backward:this.isBackward(),rangeBookmarks:this.callMethodOnEachRange("getBookmark",[containerNode])}},selProto.moveToBookmark=function(bookmark){for(var rangeBookmark,range,selRanges=[],i=0;rangeBookmark=bookmark.rangeBookmarks[i++];)range=api.createRange(this.win),range.moveToBookmark(rangeBookmark),selRanges.push(range);bookmark.backward?this.setSingleRange(selRanges[0],"backward"):this.setRanges(selRanges)},selProto.saveRanges=function(){return{backward:this.isBackward(),ranges:this.callMethodOnEachRange("cloneRange")}},selProto.restoreRanges=function(selRanges){this.removeAllRanges();for(var range,i=0;range=selRanges.ranges[i];++i)this.addRange(range,selRanges.backward&&0==i)},selProto.toHtml=function(){var rangeHtmls=[];return this.eachRange(function(range){rangeHtmls.push(DomRange.toHtml(range))}),rangeHtmls.join("")},features.implementsTextRange&&(selProto.getNativeTextRange=function(){var sel;if(sel=this.docSelection){var range=sel.createRange();if(isTextRange(range))return range;throw module.createError("getNativeTextRange: selection is a control selection")}if(this.rangeCount>0)return api.WrappedTextRange.rangeToTextRange(this.getRangeAt(0));throw module.createError("getNativeTextRange: selection contains no range")}),selProto.getName=function(){return"WrappedSelection"},selProto.inspect=function(){return inspect(this)},selProto.detach=function(){actOnCachedSelection(this.win,"delete"),deleteProperties(this)},WrappedSelection.detachAll=function(){actOnCachedSelection(null,"deleteAll")},WrappedSelection.inspect=inspect,WrappedSelection.isDirectionBackward=isDirectionBackward,api.Selection=WrappedSelection,api.selectionPrototype=selProto,api.addShimListener(function(win){void 0===win.getSelection&&(win.getSelection=function(){return getSelection(win)}),win=null})});var docReady=!1,loadHandler=function(e){docReady||(docReady=!0,!api.initialized&&api.config.autoInitialize&&init())};return isBrowser&&("complete"==document.readyState?loadHandler():(isHostMethod(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",loadHandler,!1),addListener(window,"load",loadHandler))),api},this),function(factory,root){"function"==typeof define&&define.amd?define(["./rangy-core"],factory):"undefined"!=typeof module&&"object"==typeof exports?module.exports=factory(require("rangy")):factory(root.rangy)}(function(rangy){return rangy.createModule("ClassApplier",["WrappedSelection"],function(api,module){function each(obj,func){for(var i in obj)if(obj.hasOwnProperty(i)&&!1===func(i,obj[i]))return!1;return!0}function trim(str){return str.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function classNameContainsClass(fullClassName,className){return!!fullClassName&&new RegExp("(?:^|\\s)"+className+"(?:\\s|$)").test(fullClassName)}function hasClass(el,className){return"object"==typeof el.classList?el.classList.contains(className):classNameContainsClass("string"==typeof el.className?el.className:el.getAttribute("class"),className)}function addClass(el,className){if("object"==typeof el.classList)el.classList.add(className);else{var classNameSupported="string"==typeof el.className,elClass=classNameSupported?el.className:el.getAttribute("class");elClass?classNameContainsClass(elClass,className)||(elClass+=" "+className):elClass=className,classNameSupported?el.className=elClass:el.setAttribute("class",elClass)}}function getClass(el){return"string"==typeof el.className?el.className:el.getAttribute("class")}function sortClassName(className){return className&&className.split(/\s+/).sort().join(" ")}function getSortedClassName(el){return sortClassName(getClass(el))}function haveSameClasses(el1,el2){return getSortedClassName(el1)==getSortedClassName(el2)}function hasAllClasses(el,className){for(var classes=className.split(/\s+/),i=0,len=classes.length;i<len;++i)if(!hasClass(el,trim(classes[i])))return!1;return!0}function canTextBeStyled(textNode){var parent=textNode.parentNode;return parent&&1==parent.nodeType&&!/^(textarea|style|script|select|iframe)$/i.test(parent.nodeName)}function movePosition(position,oldParent,oldIndex,newParent,newIndex){var posNode=position.node,posOffset=position.offset,newNode=posNode,newOffset=posOffset;posNode==newParent&&posOffset>newIndex&&++newOffset,posNode!=oldParent||posOffset!=oldIndex&&posOffset!=oldIndex+1||(newNode=newParent,newOffset+=newIndex-oldIndex),posNode==oldParent&&posOffset>oldIndex+1&&--newOffset,position.node=newNode,position.offset=newOffset}function movePositionWhenRemovingNode(position,parentNode,index){position.node==parentNode&&position.offset>index&&--position.offset}function movePreservingPositions(node,newParent,newIndex,positionsToPreserve){-1==newIndex&&(newIndex=newParent.childNodes.length);var oldParent=node.parentNode,oldIndex=dom.getNodeIndex(node);forEach(positionsToPreserve,function(position){movePosition(position,oldParent,oldIndex,newParent,newIndex)}),newParent.childNodes.length==newIndex?newParent.appendChild(node):newParent.insertBefore(node,newParent.childNodes[newIndex])}function removePreservingPositions(node,positionsToPreserve){var oldParent=node.parentNode,oldIndex=dom.getNodeIndex(node);forEach(positionsToPreserve,function(position){movePositionWhenRemovingNode(position,oldParent,oldIndex)}),dom.removeNode(node)}function moveChildrenPreservingPositions(node,newParent,newIndex,removeNode,positionsToPreserve){for(var child,children=[];child=node.firstChild;)movePreservingPositions(child,newParent,newIndex++,positionsToPreserve),children.push(child);return removeNode&&removePreservingPositions(node,positionsToPreserve),children}function replaceWithOwnChildrenPreservingPositions(element,positionsToPreserve){return moveChildrenPreservingPositions(element,element.parentNode,dom.getNodeIndex(element),!0,positionsToPreserve)}function rangeSelectsAnyText(range,textNode){var textNodeRange=range.cloneRange();textNodeRange.selectNodeContents(textNode);var intersectionRange=textNodeRange.intersection(range);return""!=(intersectionRange?intersectionRange.toString():"")}function getEffectiveTextNodes(range){for(var node,nodes=range.getNodes([3]),start=0;(node=nodes[start])&&!rangeSelectsAnyText(range,node);)++start;for(var end=nodes.length-1;(node=nodes[end])&&!rangeSelectsAnyText(range,node);)--end;return nodes.slice(start,end+1)}function elementsHaveSameNonClassAttributes(el1,el2){if(el1.attributes.length!=el2.attributes.length)return!1;for(var attr1,attr2,name,i=0,len=el1.attributes.length;i<len;++i)if(attr1=el1.attributes[i],"class"!=(name=attr1.name)){if(attr2=el2.attributes.getNamedItem(name),null===attr1!=(null===attr2))return!1;if(attr1.specified!=attr2.specified)return!1;if(attr1.specified&&attr1.nodeValue!==attr2.nodeValue)return!1}return!0}function elementHasNonClassAttributes(el,exceptions){for(var attrName,i=0,len=el.attributes.length;i<len;++i)if(attrName=el.attributes[i].name,(!exceptions||!contains(exceptions,attrName))&&el.attributes[i].specified&&"class"!=attrName)return!0;return!1}function isEditingHost(node){var parent;return node&&1==node.nodeType&&((parent=node.parentNode)&&9==parent.nodeType&&"on"==parent.designMode||isEditableElement(node)&&!isEditableElement(node.parentNode))}function isEditable(node){return(isEditableElement(node)||1!=node.nodeType&&isEditableElement(node.parentNode))&&!isEditingHost(node)}function isNonInlineElement(node){return node&&1==node.nodeType&&!inlineDisplayRegex.test(getComputedStyleProperty(node,"display"))}function isUnrenderedWhiteSpaceNode(node){if(0==node.data.length)return!0;if(htmlNonWhiteSpaceRegex.test(node.data))return!1;switch(getComputedStyleProperty(node.parentNode,"whiteSpace")){case"pre":case"pre-wrap":case"-moz-pre-wrap":return!1;case"pre-line":if(/[\r\n]/.test(node.data))return!1}return isNonInlineElement(node.previousSibling)||isNonInlineElement(node.nextSibling)}function getRangeBoundaries(ranges){var i,range,positions=[];for(i=0;range=ranges[i++];)positions.push(new DomPosition(range.startContainer,range.startOffset),new DomPosition(range.endContainer,range.endOffset));return positions}function updateRangesFromBoundaries(ranges,positions){for(var range,start,end,i=0,len=ranges.length;i<len;++i)range=ranges[i],start=positions[2*i],end=positions[2*i+1],range.setStartAndEnd(start.node,start.offset,end.node,end.offset)}function isSplitPoint(node,offset){return dom.isCharacterDataNode(node)?0==offset?!!node.previousSibling:offset!=node.length||!!node.nextSibling:offset>0&&offset<node.childNodes.length}function splitNodeAt(node,descendantNode,descendantOffset,positionsToPreserve){var newNode,parentNode,splitAtStart=0==descendantOffset;if(dom.isAncestorOf(descendantNode,node))return node;if(dom.isCharacterDataNode(descendantNode)){var descendantIndex=dom.getNodeIndex(descendantNode);if(0==descendantOffset)descendantOffset=descendantIndex;else{if(descendantOffset!=descendantNode.length)throw module.createError("splitNodeAt() should not be called with offset in the middle of a data node ("+descendantOffset+" in "+descendantNode.data);descendantOffset=descendantIndex+1}descendantNode=descendantNode.parentNode}if(isSplitPoint(descendantNode,descendantOffset)){newNode=descendantNode.cloneNode(!1),parentNode=descendantNode.parentNode,newNode.id&&newNode.removeAttribute("id");for(var child,newChildIndex=0;child=descendantNode.childNodes[descendantOffset];)movePreservingPositions(child,newNode,newChildIndex++,positionsToPreserve);return movePreservingPositions(newNode,parentNode,dom.getNodeIndex(descendantNode)+1,positionsToPreserve),descendantNode==node?newNode:splitNodeAt(node,parentNode,dom.getNodeIndex(newNode),positionsToPreserve)}if(node!=descendantNode){newNode=descendantNode.parentNode;var newNodeIndex=dom.getNodeIndex(descendantNode);return splitAtStart||newNodeIndex++,splitNodeAt(node,newNode,newNodeIndex,positionsToPreserve)}return node}function areElementsMergeable(el1,el2){return el1.namespaceURI==el2.namespaceURI&&el1.tagName.toLowerCase()==el2.tagName.toLowerCase()&&haveSameClasses(el1,el2)&&elementsHaveSameNonClassAttributes(el1,el2)&&"inline"==getComputedStyleProperty(el1,"display")&&"inline"==getComputedStyleProperty(el2,"display")}function createAdjacentMergeableTextNodeGetter(forward){var siblingPropName=forward?"nextSibling":"previousSibling";return function(textNode,checkParentElement){var el=textNode.parentNode,adjacentNode=textNode[siblingPropName];if(adjacentNode){if(adjacentNode&&3==adjacentNode.nodeType)return adjacentNode}else if(checkParentElement&&(adjacentNode=el[siblingPropName])&&1==adjacentNode.nodeType&&areElementsMergeable(el,adjacentNode)){var adjacentNodeChild=adjacentNode[forward?"firstChild":"lastChild"];if(adjacentNodeChild&&3==adjacentNodeChild.nodeType)return adjacentNodeChild}return null}}function Merge(firstNode){this.isElementMerge=1==firstNode.nodeType,this.textNodes=[];var firstTextNode=this.isElementMerge?firstNode.lastChild:firstNode;firstTextNode&&(this.textNodes[0]=firstTextNode)}function ClassApplier(className,options,tagNames){var normalize,i,len,propName,applier=this;applier.cssClass=applier.className=className;var elementPropertiesFromOptions=null,elementAttributes={};if("object"==typeof options&&null!==options){for(void 0!==options.elementTagName&&(options.elementTagName=options.elementTagName.toLowerCase()),tagNames=options.tagNames,elementPropertiesFromOptions=options.elementProperties,elementAttributes=options.elementAttributes,i=0;propName=optionProperties[i++];)options.hasOwnProperty(propName)&&(applier[propName]=options[propName]);normalize=options.normalize}else normalize=options;applier.normalize=void 0===normalize||normalize,applier.attrExceptions=[];var el=document.createElement(applier.elementTagName);applier.elementProperties=applier.copyPropertiesToElement(elementPropertiesFromOptions,el,!0),each(elementAttributes,function(attrName,attrValue){applier.attrExceptions.push(attrName),elementAttributes[attrName]=""+attrValue}),applier.elementAttributes=elementAttributes,applier.elementSortedClassName=applier.elementProperties.hasOwnProperty("className")?sortClassName(applier.elementProperties.className+" "+className):className,applier.applyToAnyTagName=!1;var type=typeof tagNames;if("string"==type)"*"==tagNames?applier.applyToAnyTagName=!0:applier.tagNames=trim(tagNames.toLowerCase()).split(/\s*,\s*/);else if("object"==type&&"number"==typeof tagNames.length)for(applier.tagNames=[],i=0,len=tagNames.length;i<len;++i)"*"==tagNames[i]?applier.applyToAnyTagName=!0:applier.tagNames.push(tagNames[i].toLowerCase());else applier.tagNames=[applier.elementTagName]}function createClassApplier(className,options,tagNames){return new ClassApplier(className,options,tagNames)}var dom=api.dom,DomPosition=dom.DomPosition,contains=dom.arrayContains,util=api.util,forEach=util.forEach,createElementNSSupported=util.isHostMethod(document,"createElementNS"),removeClass=function(){function replacer(matched,whiteSpaceBefore,whiteSpaceAfter){return whiteSpaceBefore&&whiteSpaceAfter?" ":""}return function(el,className){if("object"==typeof el.classList)el.classList.remove(className);else{var classNameSupported="string"==typeof el.className,elClass=classNameSupported?el.className:el.getAttribute("class")
;elClass=elClass.replace(new RegExp("(^|\\s)"+className+"(\\s|$)"),replacer),classNameSupported?el.className=elClass:el.setAttribute("class",elClass)}}}(),getComputedStyleProperty=dom.getComputedStyleProperty,isEditableElement=function(){return"boolean"==typeof document.createElement("div").isContentEditable?function(node){return node&&1==node.nodeType&&node.isContentEditable}:function(node){return!(!node||1!=node.nodeType||"false"==node.contentEditable)&&("true"==node.contentEditable||isEditableElement(node.parentNode))}}(),inlineDisplayRegex=/^inline(-block|-table)?$/i,htmlNonWhiteSpaceRegex=/[^\r\n\t\f \u200B]/,getPreviousMergeableTextNode=createAdjacentMergeableTextNodeGetter(!1),getNextMergeableTextNode=createAdjacentMergeableTextNodeGetter(!0);Merge.prototype={doMerge:function(positionsToPreserve){var textNodes=this.textNodes,firstTextNode=textNodes[0];if(textNodes.length>1){var parent,firstTextNodeIndex=dom.getNodeIndex(firstTextNode),textParts=[],combinedTextLength=0;forEach(textNodes,function(textNode,i){parent=textNode.parentNode,i>0&&(parent.removeChild(textNode),parent.hasChildNodes()||dom.removeNode(parent),positionsToPreserve&&forEach(positionsToPreserve,function(position){position.node==textNode&&(position.node=firstTextNode,position.offset+=combinedTextLength),position.node==parent&&position.offset>firstTextNodeIndex&&--position.offset==firstTextNodeIndex+1&&i<len-1&&(position.node=firstTextNode,position.offset=combinedTextLength)})),textParts[i]=textNode.data,combinedTextLength+=textNode.data.length}),firstTextNode.data=textParts.join("")}return firstTextNode.data},getLength:function(){for(var i=this.textNodes.length,len=0;i--;)len+=this.textNodes[i].length;return len},toString:function(){var textParts=[];return forEach(this.textNodes,function(textNode,i){textParts[i]="'"+textNode.data+"'"}),"[Merge("+textParts.join(",")+")]"}};var optionProperties=["elementTagName","ignoreWhiteSpace","applyToEditableOnly","useExistingElements","removeEmptyElements","onElementCreate"],attrNamesForProperties={};ClassApplier.prototype={elementTagName:"span",elementProperties:{},elementAttributes:{},ignoreWhiteSpace:!0,applyToEditableOnly:!1,useExistingElements:!0,removeEmptyElements:!0,onElementCreate:null,copyPropertiesToElement:function(props,el,createCopy){var s,elStyle,elPropsStyle,propValue,elPropValue,attrName,elProps={};for(var p in props)if(props.hasOwnProperty(p))if(propValue=props[p],elPropValue=el[p],"className"==p)addClass(el,propValue),addClass(el,this.className),el[p]=sortClassName(el[p]),createCopy&&(elProps[p]=propValue);else if("style"==p){elStyle=elPropValue,createCopy&&(elProps[p]=elPropsStyle={});for(s in props[p])props[p].hasOwnProperty(s)&&(elStyle[s]=propValue[s],createCopy&&(elPropsStyle[s]=elStyle[s]));this.attrExceptions.push(p)}else el[p]=propValue,createCopy&&(elProps[p]=el[p],attrName=attrNamesForProperties.hasOwnProperty(p)?attrNamesForProperties[p]:p,this.attrExceptions.push(attrName));return createCopy?elProps:""},copyAttributesToElement:function(attrs,el){for(var attrName in attrs)attrs.hasOwnProperty(attrName)&&!/^class(?:Name)?$/i.test(attrName)&&el.setAttribute(attrName,attrs[attrName])},appliesToElement:function(el){return contains(this.tagNames,el.tagName.toLowerCase())},getEmptyElements:function(range){var applier=this;return range.getNodes([1],function(el){return applier.appliesToElement(el)&&!el.hasChildNodes()})},hasClass:function(node){return 1==node.nodeType&&(this.applyToAnyTagName||this.appliesToElement(node))&&hasClass(node,this.className)},getSelfOrAncestorWithClass:function(node){for(;node;){if(this.hasClass(node))return node;node=node.parentNode}return null},isModifiable:function(node){return!this.applyToEditableOnly||isEditable(node)},isIgnorableWhiteSpaceNode:function(node){return this.ignoreWhiteSpace&&node&&3==node.nodeType&&isUnrenderedWhiteSpaceNode(node)},postApply:function(textNodes,range,positionsToPreserve,isUndo){var currentMerge,precedingTextNode,firstNode=textNodes[0],lastNode=textNodes[textNodes.length-1],merges=[],rangeStartNode=firstNode,rangeEndNode=lastNode,rangeStartOffset=0,rangeEndOffset=lastNode.length;forEach(textNodes,function(textNode){precedingTextNode=getPreviousMergeableTextNode(textNode,!isUndo),precedingTextNode?(currentMerge||(currentMerge=new Merge(precedingTextNode),merges.push(currentMerge)),currentMerge.textNodes.push(textNode),textNode===firstNode&&(rangeStartNode=currentMerge.textNodes[0],rangeStartOffset=rangeStartNode.length),textNode===lastNode&&(rangeEndNode=currentMerge.textNodes[0],rangeEndOffset=currentMerge.getLength())):currentMerge=null});var nextTextNode=getNextMergeableTextNode(lastNode,!isUndo);if(nextTextNode&&(currentMerge||(currentMerge=new Merge(lastNode),merges.push(currentMerge)),currentMerge.textNodes.push(nextTextNode)),merges.length){for(i=0,len=merges.length;i<len;++i)merges[i].doMerge(positionsToPreserve);range.setStartAndEnd(rangeStartNode,rangeStartOffset,rangeEndNode,rangeEndOffset)}},createContainer:function(parentNode){var namespace,doc=dom.getDocument(parentNode),el=createElementNSSupported&&!dom.isHtmlNamespace(parentNode)&&(namespace=parentNode.namespaceURI)?doc.createElementNS(parentNode.namespaceURI,this.elementTagName):doc.createElement(this.elementTagName);return this.copyPropertiesToElement(this.elementProperties,el,!1),this.copyAttributesToElement(this.elementAttributes,el),addClass(el,this.className),this.onElementCreate&&this.onElementCreate(el,this),el},elementHasProperties:function(el,props){var applier=this;return each(props,function(p,propValue){if("className"==p)return hasAllClasses(el,propValue);if("object"==typeof propValue){if(!applier.elementHasProperties(el[p],propValue))return!1}else if(el[p]!==propValue)return!1})},elementHasAttributes:function(el,attrs){return each(attrs,function(name,value){if(el.getAttribute(name)!==value)return!1})},applyToTextNode:function(textNode,positionsToPreserve){if(canTextBeStyled(textNode)){var parent=textNode.parentNode;if(1==parent.childNodes.length&&this.useExistingElements&&this.appliesToElement(parent)&&this.elementHasProperties(parent,this.elementProperties)&&this.elementHasAttributes(parent,this.elementAttributes))addClass(parent,this.className);else{var textNodeParent=textNode.parentNode,el=this.createContainer(textNodeParent);textNodeParent.insertBefore(el,textNode),el.appendChild(textNode)}}},isRemovable:function(el){return el.tagName.toLowerCase()==this.elementTagName&&getSortedClassName(el)==this.elementSortedClassName&&this.elementHasProperties(el,this.elementProperties)&&!elementHasNonClassAttributes(el,this.attrExceptions)&&this.elementHasAttributes(el,this.elementAttributes)&&this.isModifiable(el)},isEmptyContainer:function(el){var childNodeCount=el.childNodes.length;return 1==el.nodeType&&this.isRemovable(el)&&(0==childNodeCount||1==childNodeCount&&this.isEmptyContainer(el.firstChild))},removeEmptyContainers:function(range){var applier=this,nodesToRemove=range.getNodes([1],function(el){return applier.isEmptyContainer(el)}),rangesToPreserve=[range],positionsToPreserve=getRangeBoundaries(rangesToPreserve);forEach(nodesToRemove,function(node){removePreservingPositions(node,positionsToPreserve)}),updateRangesFromBoundaries(rangesToPreserve,positionsToPreserve)},undoToTextNode:function(textNode,range,ancestorWithClass,positionsToPreserve){if(!range.containsNode(ancestorWithClass)){var ancestorRange=range.cloneRange();ancestorRange.selectNode(ancestorWithClass),ancestorRange.isPointInRange(range.endContainer,range.endOffset)&&(splitNodeAt(ancestorWithClass,range.endContainer,range.endOffset,positionsToPreserve),range.setEndAfter(ancestorWithClass)),ancestorRange.isPointInRange(range.startContainer,range.startOffset)&&(ancestorWithClass=splitNodeAt(ancestorWithClass,range.startContainer,range.startOffset,positionsToPreserve))}this.isRemovable(ancestorWithClass)?replaceWithOwnChildrenPreservingPositions(ancestorWithClass,positionsToPreserve):removeClass(ancestorWithClass,this.className)},splitAncestorWithClass:function(container,offset,positionsToPreserve){var ancestorWithClass=this.getSelfOrAncestorWithClass(container);ancestorWithClass&&splitNodeAt(ancestorWithClass,container,offset,positionsToPreserve)},undoToAncestor:function(ancestorWithClass,positionsToPreserve){this.isRemovable(ancestorWithClass)?replaceWithOwnChildrenPreservingPositions(ancestorWithClass,positionsToPreserve):removeClass(ancestorWithClass,this.className)},applyToRange:function(range,rangesToPreserve){var applier=this;rangesToPreserve=rangesToPreserve||[];var positionsToPreserve=getRangeBoundaries(rangesToPreserve||[]);range.splitBoundariesPreservingPositions(positionsToPreserve),applier.removeEmptyElements&&applier.removeEmptyContainers(range);var textNodes=getEffectiveTextNodes(range);if(textNodes.length){forEach(textNodes,function(textNode){applier.isIgnorableWhiteSpaceNode(textNode)||applier.getSelfOrAncestorWithClass(textNode)||!applier.isModifiable(textNode)||applier.applyToTextNode(textNode,positionsToPreserve)});var lastTextNode=textNodes[textNodes.length-1];range.setStartAndEnd(textNodes[0],0,lastTextNode,lastTextNode.length),applier.normalize&&applier.postApply(textNodes,range,positionsToPreserve,!1),updateRangesFromBoundaries(rangesToPreserve,positionsToPreserve)}var emptyElements=applier.getEmptyElements(range);forEach(emptyElements,function(el){addClass(el,applier.className)})},applyToRanges:function(ranges){for(var i=ranges.length;i--;)this.applyToRange(ranges[i],ranges);return ranges},applyToSelection:function(win){var sel=api.getSelection(win);sel.setRanges(this.applyToRanges(sel.getAllRanges()))},undoToRange:function(range,rangesToPreserve){var applier=this;rangesToPreserve=rangesToPreserve||[];var positionsToPreserve=getRangeBoundaries(rangesToPreserve);range.splitBoundariesPreservingPositions(positionsToPreserve),applier.removeEmptyElements&&applier.removeEmptyContainers(range,positionsToPreserve);var textNode,ancestorWithClass,textNodes=getEffectiveTextNodes(range),lastTextNode=textNodes[textNodes.length-1];if(textNodes.length){applier.splitAncestorWithClass(range.endContainer,range.endOffset,positionsToPreserve),applier.splitAncestorWithClass(range.startContainer,range.startOffset,positionsToPreserve);for(var i=0,len=textNodes.length;i<len;++i)textNode=textNodes[i],(ancestorWithClass=applier.getSelfOrAncestorWithClass(textNode))&&applier.isModifiable(textNode)&&applier.undoToAncestor(ancestorWithClass,positionsToPreserve);range.setStartAndEnd(textNodes[0],0,lastTextNode,lastTextNode.length),applier.normalize&&applier.postApply(textNodes,range,positionsToPreserve,!0),updateRangesFromBoundaries(rangesToPreserve,positionsToPreserve)}var emptyElements=applier.getEmptyElements(range);forEach(emptyElements,function(el){removeClass(el,applier.className)})},undoToRanges:function(ranges){for(var i=ranges.length;i--;)this.undoToRange(ranges[i],ranges);return ranges},undoToSelection:function(win){var sel=api.getSelection(win),ranges=api.getSelection(win).getAllRanges();this.undoToRanges(ranges),sel.setRanges(ranges)},isAppliedToRange:function(range){if(range.collapsed||""==range.toString())return!!this.getSelfOrAncestorWithClass(range.commonAncestorContainer);var textNodes=range.getNodes([3]);if(textNodes.length)for(var textNode,i=0;textNode=textNodes[i++];)if(!this.isIgnorableWhiteSpaceNode(textNode)&&rangeSelectsAnyText(range,textNode)&&this.isModifiable(textNode)&&!this.getSelfOrAncestorWithClass(textNode))return!1;return!0},isAppliedToRanges:function(ranges){var i=ranges.length;if(0==i)return!1;for(;i--;)if(!this.isAppliedToRange(ranges[i]))return!1;return!0},isAppliedToSelection:function(win){var sel=api.getSelection(win);return this.isAppliedToRanges(sel.getAllRanges())},toggleRange:function(range){this.isAppliedToRange(range)?this.undoToRange(range):this.applyToRange(range)},toggleSelection:function(win){this.isAppliedToSelection(win)?this.undoToSelection(win):this.applyToSelection(win)},getElementsWithClassIntersectingRange:function(range){var elements=[],applier=this;return range.getNodes([3],function(textNode){var el=applier.getSelfOrAncestorWithClass(textNode);el&&!contains(elements,el)&&elements.push(el)}),elements},detach:function(){}},ClassApplier.util={hasClass:hasClass,addClass:addClass,removeClass:removeClass,getClass:getClass,hasSameClasses:haveSameClasses,hasAllClasses:hasAllClasses,replaceWithOwnChildren:replaceWithOwnChildrenPreservingPositions,elementsHaveSameNonClassAttributes:elementsHaveSameNonClassAttributes,elementHasNonClassAttributes:elementHasNonClassAttributes,splitNodeAt:splitNodeAt,isEditableElement:isEditableElement,isEditingHost:isEditingHost,isEditable:isEditable},api.CssClassApplier=api.ClassApplier=ClassApplier,api.createClassApplier=createClassApplier,util.createAliasForDeprecatedMethod(api,"createCssClassApplier","createClassApplier",module)}),rangy},this),function(factory,root){"function"==typeof define&&define.amd?define(["./rangy-core"],factory):"undefined"!=typeof module&&"object"==typeof exports?module.exports=factory(require("rangy")):factory(root.rangy)}(function(rangy){return rangy.createModule("Highlighter",["ClassApplier"],function(api,module){function compareHighlights(h1,h2){return h1.characterRange.start-h2.characterRange.start}function getContainerElement(doc,id){return id?doc.getElementById(id):getBody(doc)}function HighlighterType(type,converterCreator){this.type=type,this.converterCreator=converterCreator}function registerHighlighterType(type,converterCreator){highlighterTypes[type]=new HighlighterType(type,converterCreator)}function getConverter(type){var highlighterType=highlighterTypes[type];if(highlighterType instanceof HighlighterType)return highlighterType.create();throw new Error("Highlighter type '"+type+"' is not valid")}function CharacterRange(start,end){this.start=start,this.end=end}function Highlight(doc,characterRange,classApplier,converter,id,containerElementId){id?(this.id=id,nextHighlightId=Math.max(nextHighlightId,id+1)):this.id=nextHighlightId++,this.characterRange=characterRange,this.doc=doc,this.classApplier=classApplier,this.converter=converter,this.containerElementId=containerElementId||null,this.applied=!1}function Highlighter(doc,type){type=type||"textContent",this.doc=doc||document,this.classAppliers={},this.highlights=[],this.converter=getConverter(type)}var dom=api.dom,contains=dom.arrayContains,getBody=dom.getBody,createOptions=api.util.createOptions,forEach=api.util.forEach,nextHighlightId=1,highlighterTypes={};HighlighterType.prototype.create=function(){var converter=this.converterCreator();return converter.type=this.type,converter},api.registerHighlighterType=registerHighlighterType,CharacterRange.prototype={intersects:function(charRange){return this.start<charRange.end&&this.end>charRange.start},isContiguousWith:function(charRange){return this.start==charRange.end||this.end==charRange.start},union:function(charRange){return new CharacterRange(Math.min(this.start,charRange.start),Math.max(this.end,charRange.end))},intersection:function(charRange){return new CharacterRange(Math.max(this.start,charRange.start),Math.min(this.end,charRange.end))},getComplements:function(charRange){var ranges=[];if(this.start>=charRange.start){if(this.end<=charRange.end)return[];ranges.push(new CharacterRange(charRange.end,this.end))}else ranges.push(new CharacterRange(this.start,Math.min(this.end,charRange.start))),this.end>charRange.end&&ranges.push(new CharacterRange(charRange.end,this.end));return ranges},toString:function(){return"[CharacterRange("+this.start+", "+this.end+")]"}},CharacterRange.fromCharacterRange=function(charRange){return new CharacterRange(charRange.start,charRange.end)};var textContentConverter={rangeToCharacterRange:function(range,containerNode){var bookmark=range.getBookmark(containerNode);return new CharacterRange(bookmark.start,bookmark.end)},characterRangeToRange:function(doc,characterRange,containerNode){var range=api.createRange(doc);return range.moveToBookmark({start:characterRange.start,end:characterRange.end,containerNode:containerNode}),range},serializeSelection:function(selection,containerNode){for(var ranges=selection.getAllRanges(),rangeCount=ranges.length,rangeInfos=[],backward=1==rangeCount&&selection.isBackward(),i=0,len=ranges.length;i<len;++i)rangeInfos[i]={characterRange:this.rangeToCharacterRange(ranges[i],containerNode),backward:backward};return rangeInfos},restoreSelection:function(selection,savedSelection,containerNode){selection.removeAllRanges();for(var range,rangeInfo,doc=selection.win.document,i=0,len=savedSelection.length;i<len;++i)rangeInfo=savedSelection[i],rangeInfo.characterRange,range=this.characterRangeToRange(doc,rangeInfo.characterRange,containerNode),selection.addRange(range,rangeInfo.backward)}};registerHighlighterType("textContent",function(){return textContentConverter}),registerHighlighterType("TextRange",function(){var converter;return function(){if(!converter){var textRangeModule=api.modules.TextRange;if(!textRangeModule)throw new Error("TextRange module is missing.");if(!textRangeModule.supported)throw new Error("TextRange module is present but not supported.");converter={rangeToCharacterRange:function(range,containerNode){return CharacterRange.fromCharacterRange(range.toCharacterRange(containerNode))},characterRangeToRange:function(doc,characterRange,containerNode){var range=api.createRange(doc);return range.selectCharacters(containerNode,characterRange.start,characterRange.end),range},serializeSelection:function(selection,containerNode){return selection.saveCharacterRanges(containerNode)},restoreSelection:function(selection,savedSelection,containerNode){selection.restoreCharacterRanges(containerNode,savedSelection)}}}return converter}}()),Highlight.prototype={getContainerElement:function(){return getContainerElement(this.doc,this.containerElementId)},getRange:function(){return this.converter.characterRangeToRange(this.doc,this.characterRange,this.getContainerElement())},fromRange:function(range){this.characterRange=this.converter.rangeToCharacterRange(range,this.getContainerElement())},getText:function(){return this.getRange().toString()},containsElement:function(el){return this.getRange().containsNodeContents(el.firstChild)},unapply:function(){this.classApplier.undoToRange(this.getRange()),this.applied=!1},apply:function(){this.classApplier.applyToRange(this.getRange()),this.applied=!0},getHighlightElements:function(){return this.classApplier.getElementsWithClassIntersectingRange(this.getRange())},toString:function(){return"[Highlight(ID: "+this.id+", class: "+this.classApplier.className+", character range: "+this.characterRange.start+" - "+this.characterRange.end+")]"}},Highlighter.prototype={addClassApplier:function(classApplier){this.classAppliers[classApplier.className]=classApplier},getHighlightForElement:function(el){for(var highlights=this.highlights,i=0,len=highlights.length;i<len;++i)if(highlights[i].containsElement(el))return highlights[i];return null},removeHighlights:function(highlights){for(var highlight,i=0,len=this.highlights.length;i<len;++i)highlight=this.highlights[i],contains(highlights,highlight)&&(highlight.unapply(),this.highlights.splice(i--,1))},removeAllHighlights:function(){this.removeHighlights(this.highlights)},getIntersectingHighlights:function(ranges){var intersectingHighlights=[],highlights=this.highlights;return forEach(ranges,function(range){forEach(highlights,function(highlight){range.intersectsRange(highlight.getRange())&&!contains(intersectingHighlights,highlight)&&intersectingHighlights.push(highlight)})}),intersectingHighlights},highlightCharacterRanges:function(className,charRanges,options){var i,len,j,highlights=this.highlights,converter=this.converter,doc=this.doc,highlightsToRemove=[],classApplier=className?this.classAppliers[className]:null;options=createOptions(options,{containerElementId:null,exclusive:!0});var containerElement,containerElementRange,containerElementCharRange,containerElementId=options.containerElementId,exclusive=options.exclusive;containerElementId&&(containerElement=this.doc.getElementById(containerElementId))&&(containerElementRange=api.createRange(this.doc),containerElementRange.selectNodeContents(containerElement),containerElementCharRange=new CharacterRange(0,containerElementRange.toString().length));var charRange,highlightCharRange,removeHighlight,isSameClassApplier,highlightsToKeep,splitHighlight;for(i=0,len=charRanges.length;i<len;++i)if(charRange=charRanges[i],highlightsToKeep=[],containerElementCharRange&&(charRange=charRange.intersection(containerElementCharRange)),charRange.start!=charRange.end){for(j=0;j<highlights.length;++j)removeHighlight=!1,containerElementId==highlights[j].containerElementId&&(highlightCharRange=highlights[j].characterRange,isSameClassApplier=classApplier==highlights[j].classApplier,splitHighlight=!isSameClassApplier&&exclusive,(highlightCharRange.intersects(charRange)||highlightCharRange.isContiguousWith(charRange))&&(isSameClassApplier||splitHighlight)&&(splitHighlight&&forEach(highlightCharRange.getComplements(charRange),function(rangeToAdd){highlightsToKeep.push(new Highlight(doc,rangeToAdd,highlights[j].classApplier,converter,null,containerElementId))}),removeHighlight=!0,isSameClassApplier&&(charRange=highlightCharRange.union(charRange)))),removeHighlight?(highlightsToRemove.push(highlights[j]),highlights[j]=new Highlight(doc,highlightCharRange.union(charRange),classApplier,converter,null,containerElementId)):highlightsToKeep.push(highlights[j]);classApplier&&highlightsToKeep.push(new Highlight(doc,charRange,classApplier,converter,null,containerElementId)),this.highlights=highlights=highlightsToKeep}forEach(highlightsToRemove,function(highlightToRemove){highlightToRemove.unapply()});var newHighlights=[];return forEach(highlights,function(highlight){highlight.applied||(highlight.apply(),newHighlights.push(highlight))}),newHighlights},highlightRanges:function(className,ranges,options){var selCharRanges=[],converter=this.converter;options=createOptions(options,{containerElement:null,exclusive:!0});var containerElementRange,containerElement=options.containerElement,containerElementId=containerElement?containerElement.id:null;return containerElement&&(containerElementRange=api.createRange(containerElement),containerElementRange.selectNodeContents(containerElement)),forEach(ranges,function(range){var scopedRange=containerElement?containerElementRange.intersection(range):range;selCharRanges.push(converter.rangeToCharacterRange(scopedRange,containerElement||getBody(range.getDocument())))}),this.highlightCharacterRanges(className,selCharRanges,{containerElementId:containerElementId,exclusive:options.exclusive})},highlightSelection:function(className,options){var converter=this.converter,classApplier=!!className&&this.classAppliers[className];options=createOptions(options,{containerElementId:null,selection:api.getSelection(this.doc),exclusive:!0});var containerElementId=options.containerElementId,exclusive=options.exclusive,selection=options.selection,doc=selection.win.document,containerElement=getContainerElement(doc,containerElementId);if(!classApplier&&!1!==className)throw new Error("No class applier found for class '"+className+"'");var serializedSelection=converter.serializeSelection(selection,containerElement),selCharRanges=[];forEach(serializedSelection,function(rangeInfo){selCharRanges.push(CharacterRange.fromCharacterRange(rangeInfo.characterRange))});var newHighlights=this.highlightCharacterRanges(className,selCharRanges,{containerElementId:containerElementId,exclusive:exclusive});return converter.restoreSelection(selection,serializedSelection,containerElement),newHighlights},unhighlightSelection:function(selection){selection=selection||api.getSelection(this.doc);var intersectingHighlights=this.getIntersectingHighlights(selection.getAllRanges());return this.removeHighlights(intersectingHighlights),selection.removeAllRanges(),intersectingHighlights},getHighlightsInSelection:function(selection){return selection=selection||api.getSelection(this.doc),this.getIntersectingHighlights(selection.getAllRanges())},selectionOverlapsHighlight:function(selection){return this.getHighlightsInSelection(selection).length>0},serialize:function(options){var serializedType,serializedHighlights,convertType,serializationConverter,highlighter=this,highlights=highlighter.highlights;return highlights.sort(compareHighlights),options=createOptions(options,{serializeHighlightText:!1,type:highlighter.converter.type}),serializedType=options.type,convertType=serializedType!=highlighter.converter.type,convertType&&(serializationConverter=getConverter(serializedType)),serializedHighlights=["type:"+serializedType],forEach(highlights,function(highlight){var containerElement,characterRange=highlight.characterRange;convertType&&(containerElement=highlight.getContainerElement(),characterRange=serializationConverter.rangeToCharacterRange(highlighter.converter.characterRangeToRange(highlighter.doc,characterRange,containerElement),containerElement));var parts=[characterRange.start,characterRange.end,highlight.id,highlight.classApplier.className,highlight.containerElementId];options.serializeHighlightText&&parts.push(highlight.getText()),serializedHighlights.push(parts.join("$"))}),serializedHighlights.join("|")},deserialize:function(serialized){var regexResult,serializationType,serializationConverter,serializedHighlights=serialized.split("|"),highlights=[],firstHighlight=serializedHighlights[0],convertType=!1;if(!firstHighlight||!(regexResult=/^type:(\w+)$/.exec(firstHighlight)))throw new Error("Serialized highlights are invalid.");serializationType=regexResult[1],serializationType!=this.converter.type&&(serializationConverter=getConverter(serializationType),convertType=!0),serializedHighlights.shift();for(var classApplier,highlight,characterRange,containerElementId,containerElement,parts,i=serializedHighlights.length;i-- >0;){if(parts=serializedHighlights[i].split("$"),characterRange=new CharacterRange(+parts[0],+parts[1]),containerElementId=parts[4]||null,convertType&&(containerElement=getContainerElement(this.doc,containerElementId),characterRange=this.converter.rangeToCharacterRange(serializationConverter.characterRangeToRange(this.doc,characterRange,containerElement),containerElement)),!(classApplier=this.classAppliers[parts[3]]))throw new Error("No class applier found for class '"+parts[3]+"'");highlight=new Highlight(this.doc,characterRange,classApplier,this.converter,parseInt(parts[2]),containerElementId),highlight.apply(),highlights.push(highlight)}this.highlights=highlights}},api.Highlighter=Highlighter,api.createHighlighter=function(doc,rangeCharacterOffsetConverterType){return new Highlighter(doc,rangeCharacterOffsetConverterType)}}),rangy},this),function(factory,root){"function"==typeof define&&define.amd?define(["./rangy-core"],factory):"undefined"!=typeof module&&"object"==typeof exports?module.exports=factory(require("rangy")):factory(root.rangy)}(function(rangy){return rangy.createModule("SaveRestore",["WrappedRange"],function(api,module){function gEBI(id,doc){return(doc||document).getElementById(id)}function insertRangeBoundaryMarker(range,atStart){var markerEl,markerId="selectionBoundary_"+ +new Date+"_"+(""+Math.random()).slice(2),doc=dom.getDocument(range.startContainer),boundaryRange=range.cloneRange();return boundaryRange.collapse(atStart),markerEl=doc.createElement("span"),markerEl.id=markerId,markerEl.style.lineHeight="0",markerEl.style.display="none",markerEl.className="rangySelectionBoundary",markerEl.appendChild(doc.createTextNode(markerTextChar)),boundaryRange.insertNode(markerEl),markerEl}function setRangeBoundary(doc,range,markerId,atStart){var markerEl=gEBI(markerId,doc);markerEl?(range[atStart?"setStartBefore":"setEndBefore"](markerEl),removeNode(markerEl)):module.warn("Marker element has been removed. Cannot restore selection.")}function compareRanges(r1,r2){return r2.compareBoundaryPoints(r1.START_TO_START,r1)}function saveRange(range,direction){var startEl,endEl,doc=api.DomRange.getRangeDocument(range),text=range.toString(),backward=isDirectionBackward(direction);return range.collapsed?(endEl=insertRangeBoundaryMarker(range,!1),{document:doc,markerId:endEl.id,collapsed:!0}):(endEl=insertRangeBoundaryMarker(range,!1),startEl=insertRangeBoundaryMarker(range,!0),{document:doc,startMarkerId:startEl.id,endMarkerId:endEl.id,collapsed:!1,backward:backward,toString:function(){return"original text: '"+text+"', new text: '"+range.toString()+"'"}})}function restoreRange(rangeInfo,normalize){var doc=rangeInfo.document;void 0===normalize&&(normalize=!0);var range=api.createRange(doc);if(rangeInfo.collapsed){var markerEl=gEBI(rangeInfo.markerId,doc);if(markerEl){markerEl.style.display="inline";var previousNode=markerEl.previousSibling;previousNode&&3==previousNode.nodeType?(removeNode(markerEl),range.collapseToPoint(previousNode,previousNode.length)):(range.collapseBefore(markerEl),removeNode(markerEl))}else module.warn("Marker element has been removed. Cannot restore selection.")}else setRangeBoundary(doc,range,rangeInfo.startMarkerId,!0),setRangeBoundary(doc,range,rangeInfo.endMarkerId,!1);return normalize&&range.normalizeBoundaries(),range}function saveRanges(ranges,direction){var range,doc,rangeInfos=[],backward=isDirectionBackward(direction);ranges=ranges.slice(0),ranges.sort(compareRanges);for(var i=0,len=ranges.length;i<len;++i)rangeInfos[i]=saveRange(ranges[i],backward);for(i=len-1;i>=0;--i)range=ranges[i],doc=api.DomRange.getRangeDocument(range),range.collapsed?range.collapseAfter(gEBI(rangeInfos[i].markerId,doc)):(range.setEndBefore(gEBI(rangeInfos[i].endMarkerId,doc)),range.setStartAfter(gEBI(rangeInfos[i].startMarkerId,doc)));return rangeInfos}function saveSelection(win){if(!api.isSelectionValid(win))return module.warn("Cannot save selection. This usually happens when the selection is collapsed and the selection document has lost focus."),null;var sel=api.getSelection(win),ranges=sel.getAllRanges(),backward=1==ranges.length&&sel.isBackward(),rangeInfos=saveRanges(ranges,backward);return backward?sel.setSingleRange(ranges[0],backward):sel.setRanges(ranges),{win:win,rangeInfos:rangeInfos,restored:!1}}function restoreRanges(rangeInfos){for(var ranges=[],rangeCount=rangeInfos.length,i=rangeCount-1;i>=0;i--)ranges[i]=restoreRange(rangeInfos[i],!0);return ranges}function restoreSelection(savedSelection,preserveDirection){if(!savedSelection.restored){var rangeInfos=savedSelection.rangeInfos,sel=api.getSelection(savedSelection.win),ranges=restoreRanges(rangeInfos);1==rangeInfos.length&&preserveDirection&&api.features.selectionHasExtend&&rangeInfos[0].backward?(sel.removeAllRanges(),sel.addRange(ranges[0],!0)):sel.setRanges(ranges),savedSelection.restored=!0}}function removeMarkerElement(doc,markerId){var markerEl=gEBI(markerId,doc);markerEl&&removeNode(markerEl)}function removeMarkers(savedSelection){for(var rangeInfo,rangeInfos=savedSelection.rangeInfos,i=0,len=rangeInfos.length;i<len;++i)rangeInfo=rangeInfos[i],rangeInfo.collapsed?removeMarkerElement(savedSelection.doc,rangeInfo.markerId):(removeMarkerElement(savedSelection.doc,rangeInfo.startMarkerId),removeMarkerElement(savedSelection.doc,rangeInfo.endMarkerId))}var dom=api.dom,removeNode=dom.removeNode,isDirectionBackward=api.Selection.isDirectionBackward,markerTextChar="\ufeff";api.util.extend(api,{saveRange:saveRange,restoreRange:restoreRange,saveRanges:saveRanges,restoreRanges:restoreRanges,saveSelection:saveSelection,restoreSelection:restoreSelection,removeMarkerElement:removeMarkerElement,removeMarkers:removeMarkers})}),rangy},this),function(factory,root){"function"==typeof define&&define.amd?define(["./rangy-core"],factory):"undefined"!=typeof module&&"object"==typeof exports?module.exports=factory(require("rangy")):factory(root.rangy)}(function(rangy){return rangy.createModule("Serializer",["WrappedSelection"],function(api,module){
function escapeTextForHtml(str){return str.replace(/</g,"&lt;").replace(/>/g,"&gt;")}function nodeToInfoString(node,infoParts){infoParts=infoParts||[];var nodeType=node.nodeType,children=node.childNodes,childCount=children.length,nodeInfo=[nodeType,node.nodeName,childCount].join(":"),start="",end="";switch(nodeType){case 3:start=escapeTextForHtml(node.nodeValue);break;case 8:start="\x3c!--"+escapeTextForHtml(node.nodeValue)+"--\x3e";break;default:start="<"+nodeInfo+">",end="</>"}start&&infoParts.push(start);for(var i=0;i<childCount;++i)nodeToInfoString(children[i],infoParts);return end&&infoParts.push(end),infoParts}function getElementChecksum(el){var info=nodeToInfoString(el).join("");return crc32(info).toString(16)}function serializePosition(node,offset,rootNode){var pathParts=[],n=node;for(rootNode=rootNode||dom.getDocument(node).documentElement;n&&n!=rootNode;)pathParts.push(dom.getNodeIndex(n,!0)),n=n.parentNode;return pathParts.join("/")+":"+offset}function deserializePosition(serialized,rootNode,doc){rootNode||(rootNode=(doc||document).documentElement);for(var nodeIndex,parts=serialized.split(":"),node=rootNode,nodeIndices=parts[0]?parts[0].split("/"):[],i=nodeIndices.length;i--;){if(!((nodeIndex=parseInt(nodeIndices[i],10))<node.childNodes.length))throw module.createError("deserializePosition() failed: node "+dom.inspectNode(node)+" has no child with index "+nodeIndex+", "+i);node=node.childNodes[nodeIndex]}return new dom.DomPosition(node,parseInt(parts[1],10))}function serializeRange(range,omitChecksum,rootNode){if(rootNode=rootNode||api.DomRange.getRangeDocument(range).documentElement,!dom.isOrIsAncestorOf(rootNode,range.commonAncestorContainer))throw module.createError("serializeRange(): range "+range.inspect()+" is not wholly contained within specified root node "+dom.inspectNode(rootNode));var serialized=serializePosition(range.startContainer,range.startOffset,rootNode)+","+serializePosition(range.endContainer,range.endOffset,rootNode);return omitChecksum||(serialized+="{"+getElementChecksum(rootNode)+"}"),serialized}function deserializeRange(serialized,rootNode,doc){rootNode?doc=doc||dom.getDocument(rootNode):(doc=doc||document,rootNode=doc.documentElement);var result=deserializeRegex.exec(serialized),checksum=result[4];if(checksum){var rootNodeChecksum=getElementChecksum(rootNode);if(checksum!==rootNodeChecksum)throw module.createError("deserializeRange(): checksums of serialized range root node ("+checksum+") and target root node ("+rootNodeChecksum+") do not match")}var start=deserializePosition(result[1],rootNode,doc),end=deserializePosition(result[2],rootNode,doc),range=api.createRange(doc);return range.setStartAndEnd(start.node,start.offset,end.node,end.offset),range}function canDeserializeRange(serialized,rootNode,doc){rootNode||(rootNode=(doc||document).documentElement);var result=deserializeRegex.exec(serialized),checksum=result[3];return!checksum||checksum===getElementChecksum(rootNode)}function serializeSelection(selection,omitChecksum,rootNode){selection=api.getSelection(selection);for(var ranges=selection.getAllRanges(),serializedRanges=[],i=0,len=ranges.length;i<len;++i)serializedRanges[i]=serializeRange(ranges[i],omitChecksum,rootNode);return serializedRanges.join("|")}function deserializeSelection(serialized,rootNode,win){rootNode?win=win||dom.getWindow(rootNode):(win=win||window,rootNode=win.document.documentElement);for(var serializedRanges=serialized.split("|"),sel=api.getSelection(win),ranges=[],i=0,len=serializedRanges.length;i<len;++i)ranges[i]=deserializeRange(serializedRanges[i],rootNode,win.document);return sel.setRanges(ranges),sel}function canDeserializeSelection(serialized,rootNode,win){var doc;rootNode?doc=win?win.document:dom.getDocument(rootNode):(win=win||window,rootNode=win.document.documentElement);for(var serializedRanges=serialized.split("|"),i=0,len=serializedRanges.length;i<len;++i)if(!canDeserializeRange(serializedRanges[i],rootNode,doc))return!1;return!0}function getSerializedSelectionFromCookie(cookie){for(var nameVal,val,parts=cookie.split(/[;,]/),i=0,len=parts.length;i<len;++i)if(nameVal=parts[i].split("="),nameVal[0].replace(/^\s+/,"")==cookieName&&(val=nameVal[1]))return decodeURIComponent(val.replace(/\s+$/,""));return null}function restoreSelectionFromCookie(win){win=win||window;var serialized=getSerializedSelectionFromCookie(win.document.cookie);serialized&&deserializeSelection(serialized,win.doc)}function saveSelectionCookie(win,props){win=win||window,props="object"==typeof props?props:{};var expires=props.expires?";expires="+props.expires.toUTCString():"",path=props.path?";path="+props.path:"",domain=props.domain?";domain="+props.domain:"",secure=props.secure?";secure":"",serialized=serializeSelection(api.getSelection(win));win.document.cookie=encodeURIComponent(cookieName)+"="+encodeURIComponent(serialized)+expires+path+domain+secure}var util=api.util;"undefined"!=typeof encodeURIComponent&&"undefined"!=typeof decodeURIComponent||module.fail("encodeURIComponent and/or decodeURIComponent method is missing");var crc32=function(){function utf8encode(str){for(var c,utf8CharCodes=[],i=0,len=str.length;i<len;++i)c=str.charCodeAt(i),c<128?utf8CharCodes.push(c):c<2048?utf8CharCodes.push(c>>6|192,63&c|128):utf8CharCodes.push(c>>12|224,c>>6&63|128,63&c|128);return utf8CharCodes}function buildCRCTable(){for(var j,crc,table=[],i=0;i<256;++i){for(crc=i,j=8;j--;)1==(1&crc)?crc=crc>>>1^3988292384:crc>>>=1;table[i]=crc>>>0}return table}function getCrcTable(){return cachedCrcTable||(cachedCrcTable=buildCRCTable()),cachedCrcTable}var cachedCrcTable=null;return function(str){for(var y,utf8CharCodes=utf8encode(str),crc=-1,crcTable=getCrcTable(),i=0,len=utf8CharCodes.length;i<len;++i)y=255&(crc^utf8CharCodes[i]),crc=crc>>>8^crcTable[y];return(-1^crc)>>>0}}(),dom=api.dom,deserializeRegex=/^([^,]+),([^,\{]+)(\{([^}]+)\})?$/,cookieName="rangySerializedSelection";util.extend(api,{serializePosition:serializePosition,deserializePosition:deserializePosition,serializeRange:serializeRange,deserializeRange:deserializeRange,canDeserializeRange:canDeserializeRange,serializeSelection:serializeSelection,deserializeSelection:deserializeSelection,canDeserializeSelection:canDeserializeSelection,restoreSelectionFromCookie:restoreSelectionFromCookie,saveSelectionCookie:saveSelectionCookie,getElementChecksum:getElementChecksum,nodeToInfoString:nodeToInfoString}),util.crc32=crc32}),rangy},this),function(factory,root){"function"==typeof define&&define.amd?define(["./rangy-core"],factory):"undefined"!=typeof module&&"object"==typeof exports?module.exports=factory(require("rangy")):factory(root.rangy)}(function(rangy){return rangy.createModule("TextRange",["WrappedSelection"],function(api,module){function defaultTokenizer(chars,wordOptions){function createTokenRange(start,end,isWord){tokenRanges.push({start:start,end:end,isWord:isWord})}for(var result,wordStart,wordEnd,word=chars.join(""),tokenRanges=[],lastWordEnd=0;result=wordOptions.wordRegex.exec(word);){if(wordStart=result.index,wordEnd=wordStart+result[0].length,wordStart>lastWordEnd&&createTokenRange(lastWordEnd,wordStart,!1),wordOptions.includeTrailingSpace)for(;nonLineBreakWhiteSpaceRegex.test(chars[wordEnd]);)++wordEnd;createTokenRange(wordStart,wordEnd,!0),lastWordEnd=wordEnd}return lastWordEnd<chars.length&&createTokenRange(lastWordEnd,chars.length,!1),tokenRanges}function convertCharRangeToToken(chars,tokenRange){for(var tokenChars=chars.slice(tokenRange.start,tokenRange.end),token={isWord:tokenRange.isWord,chars:tokenChars,toString:function(){return tokenChars.join("")}},i=0,len=tokenChars.length;i<len;++i)tokenChars[i].token=token;return token}function tokenize(chars,wordOptions,tokenizer){for(var tokenRange,tokenRanges=tokenizer(chars,wordOptions),tokens=[],i=0;tokenRange=tokenRanges[i++];)tokens.push(convertCharRangeToToken(chars,tokenRange));return tokens}function normalizeIgnoredCharacters(ignoredCharacters){var ignoredChars=ignoredCharacters||"",ignoredCharsArray="string"==typeof ignoredChars?ignoredChars.split(""):ignoredChars;return ignoredCharsArray.sort(function(char1,char2){return char1.charCodeAt(0)-char2.charCodeAt(0)}),ignoredCharsArray.join("").replace(/(.)\1+/g,"$1")}function createWordOptions(options){var lang,defaults;return options?(lang=options.language||defaultLanguage,defaults={},extend(defaults,defaultWordOptions[lang]||defaultWordOptions[defaultLanguage]),extend(defaults,options),defaults):defaultWordOptions[defaultLanguage]}function createNestedOptions(optionsParam,defaults){var options=createOptions(optionsParam,defaults);return defaults.hasOwnProperty("wordOptions")&&(options.wordOptions=createWordOptions(options.wordOptions)),defaults.hasOwnProperty("characterOptions")&&(options.characterOptions=createOptions(options.characterOptions,defaultCharacterOptions)),options}function getComputedDisplay(el,win){var display=getComputedStyleProperty(el,"display",win),tagName=el.tagName.toLowerCase();return"block"==display&&tableCssDisplayBlock&&defaultDisplayValueForTag.hasOwnProperty(tagName)?defaultDisplayValueForTag[tagName]:display}function isHidden(node){for(var ancestors=getAncestorsAndSelf(node),i=0,len=ancestors.length;i<len;++i)if(1==ancestors[i].nodeType&&"none"==getComputedDisplay(ancestors[i]))return!0;return!1}function isVisibilityHiddenTextNode(textNode){var el;return 3==textNode.nodeType&&(el=textNode.parentNode)&&"hidden"==getComputedStyleProperty(el,"visibility")}function isBlockNode(node){return node&&(1==node.nodeType&&!/^(inline(-block|-table)?|none)$/.test(getComputedDisplay(node))||9==node.nodeType||11==node.nodeType)}function containsPositions(node){return dom.isCharacterDataNode(node)||!/^(area|base|basefont|br|col|frame|hr|img|input|isindex|link|meta|param)$/i.test(node.nodeName)}function getAncestors(node){for(var ancestors=[];node.parentNode;)ancestors.unshift(node.parentNode),node=node.parentNode;return ancestors}function getAncestorsAndSelf(node){return getAncestors(node).concat([node])}function nextNodeDescendants(node){for(;node&&!node.nextSibling;)node=node.parentNode;return node?node.nextSibling:null}function nextNode(node,excludeChildren){return!excludeChildren&&node.hasChildNodes()?node.firstChild:nextNodeDescendants(node)}function previousNode(node){var previous=node.previousSibling;if(previous){for(node=previous;node.hasChildNodes();)node=node.lastChild;return node}var parent=node.parentNode;return parent&&1==parent.nodeType?parent:null}function isWhitespaceNode(node){if(!node||3!=node.nodeType)return!1;var text=node.data;if(""===text)return!0;var parent=node.parentNode;if(!parent||1!=parent.nodeType)return!1;var computedWhiteSpace=getComputedStyleProperty(node.parentNode,"whiteSpace");return/^[\t\n\r ]+$/.test(text)&&/^(normal|nowrap)$/.test(computedWhiteSpace)||/^[\t\r ]+$/.test(text)&&"pre-line"==computedWhiteSpace}function isCollapsedWhitespaceNode(node){return""===node.data||!!isWhitespaceNode(node)&&(!node.parentNode||!!isHidden(node))}function isCollapsedNode(node){var type=node.nodeType;return 7==type||8==type||isHidden(node)||/^(script|style)$/i.test(node.nodeName)||isVisibilityHiddenTextNode(node)||isCollapsedWhitespaceNode(node)}function isIgnoredNode(node,win){var type=node.nodeType;return 7==type||8==type||1==type&&"none"==getComputedDisplay(node,win)}function Cache(){this.store={}}function createCachingGetter(methodName,func,objProperty){return function(args){var cache=this.cache;if(cache.hasOwnProperty(methodName))return cachedCount++,cache[methodName];uncachedCount++;var value=func.call(this,objProperty?this[objProperty]:this,args);return cache[methodName]=value,value}}function NodeWrapper(node,session){this.node=node,this.session=session,this.cache=new Cache,this.positions=new Cache}function Position(nodeWrapper,offset){this.offset=offset,this.nodeWrapper=nodeWrapper,this.node=nodeWrapper.node,this.session=nodeWrapper.session,this.cache=new Cache}function inspectPosition(){return"[Position("+dom.inspectNode(this.node)+":"+this.offset+")]"}function startSession(){return endSession(),currentSession=new Session}function getSession(){return currentSession||startSession()}function endSession(){currentSession&&currentSession.detach(),currentSession=null}function createCharacterIterator(startPos,backward,endPos,characterOptions){function next(){var charPos=null;return backward?(charPos=pos,finished||(pos=pos.previousVisible(),finished=!pos||endPos&&pos.equals(endPos))):finished||(charPos=pos=pos.nextVisible(),finished=!pos||endPos&&pos.equals(endPos)),finished&&(pos=null),charPos}endPos&&(backward?isCollapsedNode(endPos.node)&&(endPos=startPos.previousVisible()):isCollapsedNode(endPos.node)&&(endPos=endPos.nextVisible()));var previousTextPos,pos=startPos,finished=!1,returnPreviousTextPos=!1;return{next:function(){if(returnPreviousTextPos)return returnPreviousTextPos=!1,previousTextPos;for(var pos;pos=next();)if(pos.getCharacter(characterOptions))return previousTextPos=pos,pos;return null},rewind:function(){if(!previousTextPos)throw module.createError("createCharacterIterator: cannot rewind. Only one position can be rewound.");returnPreviousTextPos=!0},dispose:function(){startPos=endPos=null}}}function createTokenizedTextProvider(pos,characterOptions,wordOptions){function consumeWord(forward){for(var pos,textChar,newChars=[],it=forward?forwardIterator:backwardIterator,passedWordBoundary=!1,insideWord=!1;pos=it.next();){if(textChar=pos.character,allWhiteSpaceRegex.test(textChar))insideWord&&(insideWord=!1,passedWordBoundary=!0);else{if(passedWordBoundary){it.rewind();break}insideWord=!0}newChars.push(pos)}return newChars}var forwardIterator=createCharacterIterator(pos,!1,null,characterOptions),backwardIterator=createCharacterIterator(pos,!0,null,characterOptions),tokenizer=wordOptions.tokenizer,forwardChars=consumeWord(!0),backwardChars=consumeWord(!1).reverse(),tokens=tokenize(backwardChars.concat(forwardChars),wordOptions,tokenizer),forwardTokensBuffer=forwardChars.length?tokens.slice(arrayIndexOf(tokens,forwardChars[0].token)):[],backwardTokensBuffer=backwardChars.length?tokens.slice(0,arrayIndexOf(tokens,backwardChars.pop().token)+1):[];return{nextEndToken:function(){for(var lastToken,forwardChars;1==forwardTokensBuffer.length&&!(lastToken=forwardTokensBuffer[0]).isWord&&(forwardChars=consumeWord(!0)).length>0;)forwardTokensBuffer=tokenize(lastToken.chars.concat(forwardChars),wordOptions,tokenizer);return forwardTokensBuffer.shift()},previousStartToken:function(){for(var lastToken,backwardChars;1==backwardTokensBuffer.length&&!(lastToken=backwardTokensBuffer[0]).isWord&&(backwardChars=consumeWord(!1)).length>0;)backwardTokensBuffer=tokenize(backwardChars.reverse().concat(lastToken.chars),wordOptions,tokenizer);return backwardTokensBuffer.pop()},dispose:function(){forwardIterator.dispose(),backwardIterator.dispose(),forwardTokensBuffer=backwardTokensBuffer=null}}}function movePositionBy(pos,unit,count,characterOptions,wordOptions){var currentPos,charIterator,nextPos,token,unitsMoved=0,newPos=pos,absCount=Math.abs(count);if(0!==count){var backward=count<0;switch(unit){case CHARACTER:for(charIterator=createCharacterIterator(pos,backward,null,characterOptions);(currentPos=charIterator.next())&&unitsMoved<absCount;)++unitsMoved,newPos=currentPos;nextPos=currentPos,charIterator.dispose();break;case WORD:for(var tokenizedTextProvider=createTokenizedTextProvider(pos,characterOptions,wordOptions),next=backward?tokenizedTextProvider.previousStartToken:tokenizedTextProvider.nextEndToken;(token=next())&&unitsMoved<absCount;)token.isWord&&(++unitsMoved,newPos=backward?token.chars[0]:token.chars[token.chars.length-1]);break;default:throw new Error("movePositionBy: unit '"+unit+"' not implemented")}backward?(newPos=newPos.previousVisible(),unitsMoved=-unitsMoved):newPos&&newPos.isLeadingSpace&&!newPos.isTrailingSpace&&(unit==WORD&&(charIterator=createCharacterIterator(pos,!1,null,characterOptions),nextPos=charIterator.next(),charIterator.dispose()),nextPos&&(newPos=nextPos.previousVisible()))}return{position:newPos,unitsMoved:unitsMoved}}function createRangeCharacterIterator(session,range,characterOptions,backward){var rangeStart=session.getRangeBoundaryPosition(range,!0),rangeEnd=session.getRangeBoundaryPosition(range,!1);return createCharacterIterator(backward?rangeEnd:rangeStart,!!backward,backward?rangeStart:rangeEnd,characterOptions)}function getRangeCharacters(session,range,characterOptions){for(var pos,chars=[],it=createRangeCharacterIterator(session,range,characterOptions);pos=it.next();)chars.push(pos);return it.dispose(),chars}function isWholeWord(startPos,endPos,wordOptions){var range=api.createRange(startPos.node);return range.setStartAndEnd(startPos.node,startPos.offset,endPos.node,endPos.offset),!range.expand("word",{wordOptions:wordOptions})}function findTextFromPosition(initialPos,searchTerm,isRegex,searchScopeRange,findOptions){function handleMatch(startIndex,endIndex){var startPos=chars[startIndex].previousVisible(),endPos=chars[endIndex-1];return{startPos:startPos,endPos:endPos,valid:!findOptions.wholeWordsOnly||isWholeWord(startPos,endPos,findOptions.wordOptions)}}for(var pos,currentChar,matchStartIndex,matchEndIndex,result,insideRegexMatch,backward=isDirectionBackward(findOptions.direction),it=createCharacterIterator(initialPos,backward,initialPos.session.getRangeBoundaryPosition(searchScopeRange,backward),findOptions.characterOptions),text="",chars=[],returnValue=null;pos=it.next();)if(currentChar=pos.character,isRegex||findOptions.caseSensitive||(currentChar=currentChar.toLowerCase()),backward?(chars.unshift(pos),text=currentChar+text):(chars.push(pos),text+=currentChar),isRegex){if(result=searchTerm.exec(text))if(matchStartIndex=result.index,matchEndIndex=matchStartIndex+result[0].length,insideRegexMatch){if(!backward&&matchEndIndex<text.length||backward&&matchStartIndex>0){returnValue=handleMatch(matchStartIndex,matchEndIndex);break}}else insideRegexMatch=!0}else if(-1!=(matchStartIndex=text.indexOf(searchTerm))){returnValue=handleMatch(matchStartIndex,matchStartIndex+searchTerm.length);break}return insideRegexMatch&&(returnValue=handleMatch(matchStartIndex,matchEndIndex)),it.dispose(),returnValue}function createEntryPointFunction(func){return function(){var sessionRunning=!!currentSession,session=getSession(),args=[session].concat(util.toArray(arguments)),returnValue=func.apply(this,args);return sessionRunning||endSession(),returnValue}}function createRangeBoundaryMover(isStart,collapse){return createEntryPointFunction(function(session,unit,count,moveOptions){typeof count==UNDEF&&(count=unit,unit=CHARACTER),moveOptions=createNestedOptions(moveOptions,defaultMoveOptions);var boundaryIsStart=isStart;collapse&&(boundaryIsStart=count>=0,this.collapse(!boundaryIsStart));var moveResult=movePositionBy(session.getRangeBoundaryPosition(this,boundaryIsStart),unit,count,moveOptions.characterOptions,moveOptions.wordOptions),newPos=moveResult.position;return this[boundaryIsStart?"setStart":"setEnd"](newPos.node,newPos.offset),moveResult.unitsMoved})}function createRangeTrimmer(isStart){return createEntryPointFunction(function(session,characterOptions){characterOptions=createOptions(characterOptions,defaultCharacterOptions);for(var pos,it=createRangeCharacterIterator(session,this,characterOptions,!isStart),trimCharCount=0;(pos=it.next())&&allWhiteSpaceRegex.test(pos.character);)++trimCharCount;it.dispose();var trimmed=trimCharCount>0;return trimmed&&this[isStart?"moveStart":"moveEnd"]("character",isStart?trimCharCount:-trimCharCount,{characterOptions:characterOptions}),trimmed})}function createSelectionTrimmer(methodName){return createEntryPointFunction(function(session,characterOptions){var trimmed=!1;return this.changeEachRange(function(range){trimmed=range[methodName](characterOptions)||trimmed}),trimmed})}var UNDEF="undefined",CHARACTER="character",WORD="word",dom=api.dom,util=api.util,extend=util.extend,createOptions=util.createOptions,getBody=dom.getBody,allWhiteSpaceRegex=/^[\t-\r \u0085\u00A0\u1680\u180E\u2000-\u200B\u2028\u2029\u202F\u205F\u3000]+$/,nonLineBreakWhiteSpaceRegex=/^[\t \u00A0\u1680\u180E\u2000-\u200B\u202F\u205F\u3000]+$/,defaultLanguage="en",isDirectionBackward=api.Selection.isDirectionBackward,trailingSpaceInBlockCollapses=!1,trailingSpaceBeforeBrCollapses=!1,trailingSpaceBeforeBlockCollapses=!1;!function(){var el=dom.createTestElement(document,"<p>1 </p><p></p>",!0),p=el.firstChild,sel=api.getSelection();sel.collapse(p.lastChild,2),sel.setStart(p.firstChild,0),trailingSpaceInBlockCollapses=1==(""+sel).length,el.innerHTML="1 <br />",sel.collapse(el,2),sel.setStart(el.firstChild,0),trailingSpaceBeforeBrCollapses=1==(""+sel).length,el.innerHTML="1 <p>1</p>",sel.collapse(el,2),sel.setStart(el.firstChild,0),trailingSpaceBeforeBlockCollapses=1==(""+sel).length,dom.removeNode(el),sel.removeAllRanges()}();var tableCssDisplayBlock,defaultCharacterOptions={includeBlockContentTrailingSpace:!0,includeSpaceBeforeBr:!0,includeSpaceBeforeBlock:!0,includePreLineTrailingSpace:!0,ignoreCharacters:""},defaultCaretCharacterOptions={includeBlockContentTrailingSpace:!1,includeSpaceBeforeBr:!trailingSpaceBeforeBrCollapses,includeSpaceBeforeBlock:!trailingSpaceBeforeBlockCollapses,includePreLineTrailingSpace:!0},defaultWordOptions={en:{wordRegex:/[a-z0-9]+('[a-z0-9]+)*/gi,includeTrailingSpace:!1,tokenizer:defaultTokenizer}},defaultFindOptions={caseSensitive:!1,withinRange:null,wholeWordsOnly:!1,wrap:!1,direction:"forward",wordOptions:null,characterOptions:null},defaultMoveOptions={wordOptions:null,characterOptions:null},defaultExpandOptions={wordOptions:null,characterOptions:null,trim:!1,trimStart:!0,trimEnd:!0},defaultWordIteratorOptions={wordOptions:null,characterOptions:null,direction:"forward"},getComputedStyleProperty=dom.getComputedStyleProperty;!function(){var table=document.createElement("table"),body=getBody(document);body.appendChild(table),tableCssDisplayBlock="block"==getComputedStyleProperty(table,"display"),body.removeChild(table)}();var defaultDisplayValueForTag={table:"table",caption:"table-caption",colgroup:"table-column-group",col:"table-column",thead:"table-header-group",tbody:"table-row-group",tfoot:"table-footer-group",tr:"table-row",td:"table-cell",th:"table-cell"};Cache.prototype={get:function(key){return this.store.hasOwnProperty(key)?this.store[key]:null},set:function(key,value){return this.store[key]=value}};var cachedCount=0,uncachedCount=0,nodeProto={getPosition:function(offset){var positions=this.positions;return positions.get(offset)||positions.set(offset,new Position(this,offset))},toString:function(){return"[NodeWrapper("+dom.inspectNode(this.node)+")]"}};NodeWrapper.prototype=nodeProto;extend(nodeProto,{isCharacterDataNode:createCachingGetter("isCharacterDataNode",dom.isCharacterDataNode,"node"),getNodeIndex:createCachingGetter("nodeIndex",dom.getNodeIndex,"node"),getLength:createCachingGetter("nodeLength",dom.getNodeLength,"node"),containsPositions:createCachingGetter("containsPositions",containsPositions,"node"),isWhitespace:createCachingGetter("isWhitespace",isWhitespaceNode,"node"),isCollapsedWhitespace:createCachingGetter("isCollapsedWhitespace",isCollapsedWhitespaceNode,"node"),getComputedDisplay:createCachingGetter("computedDisplay",getComputedDisplay,"node"),isCollapsed:createCachingGetter("collapsed",isCollapsedNode,"node"),isIgnored:createCachingGetter("ignored",isIgnoredNode,"node"),next:createCachingGetter("nextPos",nextNode,"node"),previous:createCachingGetter("previous",previousNode,"node"),getTextNodeInfo:createCachingGetter("textNodeInfo",function(textNode){var spaceRegex=null,collapseSpaces=!1,cssWhitespace=getComputedStyleProperty(textNode.parentNode,"whiteSpace"),preLine="pre-line"==cssWhitespace;return preLine?(spaceRegex=/^[ \t\f\r]+$/,collapseSpaces=!0):"normal"!=cssWhitespace&&"nowrap"!=cssWhitespace||(spaceRegex=/^[ \t\f\r\n]+$/,collapseSpaces=!0),{node:textNode,text:textNode.data,spaceRegex:spaceRegex,collapseSpaces:collapseSpaces,preLine:preLine}},"node"),hasInnerText:createCachingGetter("hasInnerText",function(el,backward){for(var session=this.session,posAfterEl=session.getPosition(el.parentNode,this.getNodeIndex()+1),firstPosInEl=session.getPosition(el,0),pos=backward?posAfterEl:firstPosInEl,endPos=backward?firstPosInEl:posAfterEl;pos!==endPos;){if(pos.prepopulateChar(),pos.isDefinitelyNonEmpty())return!0;pos=backward?pos.previousVisible():pos.nextVisible()}return!1},"node"),isRenderedBlock:createCachingGetter("isRenderedBlock",function(el){for(var brs=el.getElementsByTagName("br"),i=0,len=brs.length;i<len;++i)if(!isCollapsedNode(brs[i]))return!0;return this.hasInnerText()},"node"),getTrailingSpace:createCachingGetter("trailingSpace",function(el){if("br"==el.tagName.toLowerCase())return"";switch(this.getComputedDisplay()){case"inline":for(var child=el.lastChild;child;){if(!isIgnoredNode(child))return 1==child.nodeType?this.session.getNodeWrapper(child).getTrailingSpace():"";child=child.previousSibling}break;case"inline-block":case"inline-table":case"none":case"table-column":case"table-column-group":break;case"table-cell":return"\t";default:return this.isRenderedBlock(!0)?"\n":""}return""},"node"),getLeadingSpace:createCachingGetter("leadingSpace",function(el){switch(this.getComputedDisplay()){case"inline":case"inline-block":case"inline-table":case"none":case"table-column":case"table-column-group":case"table-cell":break;default:return this.isRenderedBlock(!1)?"\n":""}return""},"node")});var positionProto={character:"",characterType:"EMPTY",isBr:!1,prepopulateChar:function(){var pos=this;if(!pos.prepopulatedChar){var node=pos.node,offset=pos.offset,visibleChar="",charType="EMPTY",finalizedChar=!1;if(offset>0)if(3==node.nodeType){var text=node.data,textChar=text.charAt(offset-1),nodeInfo=pos.nodeWrapper.getTextNodeInfo(),spaceRegex=nodeInfo.spaceRegex;nodeInfo.collapseSpaces?spaceRegex.test(textChar)?offset>1&&spaceRegex.test(text.charAt(offset-2))||(nodeInfo.preLine&&"\n"===text.charAt(offset)?(visibleChar=" ",charType="PRE_LINE_TRAILING_SPACE_BEFORE_LINE_BREAK"):(visibleChar=" ",charType="COLLAPSIBLE_SPACE")):(visibleChar=textChar,charType="NON_SPACE",finalizedChar=!0):(visibleChar=textChar,charType="UNCOLLAPSIBLE_SPACE",finalizedChar=!0)}else{var nodePassed=node.childNodes[offset-1];if(nodePassed&&1==nodePassed.nodeType&&!isCollapsedNode(nodePassed)&&("br"==nodePassed.tagName.toLowerCase()?(visibleChar="\n",pos.isBr=!0,charType="COLLAPSIBLE_SPACE",finalizedChar=!1):pos.checkForTrailingSpace=!0),!visibleChar){var nextNode=node.childNodes[offset];nextNode&&1==nextNode.nodeType&&!isCollapsedNode(nextNode)&&(pos.checkForLeadingSpace=!0)}}pos.prepopulatedChar=!0,pos.character=visibleChar,pos.characterType=charType,pos.isCharInvariant=finalizedChar}},isDefinitelyNonEmpty:function(){var charType=this.characterType;return"NON_SPACE"==charType||"UNCOLLAPSIBLE_SPACE"==charType},resolveLeadingAndTrailingSpaces:function(){if(this.prepopulatedChar||this.prepopulateChar(),this.checkForTrailingSpace){var trailingSpace=this.session.getNodeWrapper(this.node.childNodes[this.offset-1]).getTrailingSpace();trailingSpace&&(this.isTrailingSpace=!0,this.character=trailingSpace,this.characterType="COLLAPSIBLE_SPACE"),this.checkForTrailingSpace=!1}if(this.checkForLeadingSpace){var leadingSpace=this.session.getNodeWrapper(this.node.childNodes[this.offset]).getLeadingSpace();leadingSpace&&(this.isLeadingSpace=!0,this.character=leadingSpace,this.characterType="COLLAPSIBLE_SPACE"),this.checkForLeadingSpace=!1}},getPrecedingUncollapsedPosition:function(characterOptions){for(var pos=this;pos=pos.previousVisible();)if(""!==pos.getCharacter(characterOptions))return pos;return null},getCharacter:function(characterOptions){function getPreviousPos(){return gotPreviousPos||(previousPos=pos.getPrecedingUncollapsedPosition(characterOptions),gotPreviousPos=!0),previousPos}this.resolveLeadingAndTrailingSpaces();var thisChar=this.character,ignoredChars=normalizeIgnoredCharacters(characterOptions.ignoreCharacters),isIgnoredCharacter=""!==thisChar&&ignoredChars.indexOf(thisChar)>-1;if(this.isCharInvariant)return isIgnoredCharacter?"":thisChar;var cacheKey=["character",characterOptions.includeSpaceBeforeBr,characterOptions.includeBlockContentTrailingSpace,characterOptions.includePreLineTrailingSpace,ignoredChars].join("_"),cachedChar=this.cache.get(cacheKey);if(null!==cachedChar)return cachedChar;var nextPos,previousPos,character="",collapsible="COLLAPSIBLE_SPACE"==this.characterType,gotPreviousPos=!1,pos=this;return collapsible&&("INCLUDED_TRAILING_LINE_BREAK_AFTER_BR"==this.type?character="\n":" "==thisChar&&(!getPreviousPos()||previousPos.isTrailingSpace||"\n"==previousPos.character||" "==previousPos.character&&"COLLAPSIBLE_SPACE"==previousPos.characterType)||("\n"==thisChar&&this.isLeadingSpace?getPreviousPos()&&"\n"!=previousPos.character&&(character="\n"):(nextPos=this.nextUncollapsed())&&(nextPos.isBr?this.type="TRAILING_SPACE_BEFORE_BR":nextPos.isTrailingSpace&&"\n"==nextPos.character?this.type="TRAILING_SPACE_IN_BLOCK":nextPos.isLeadingSpace&&"\n"==nextPos.character&&(this.type="TRAILING_SPACE_BEFORE_BLOCK"),"\n"==nextPos.character?("TRAILING_SPACE_BEFORE_BR"!=this.type||characterOptions.includeSpaceBeforeBr)&&("TRAILING_SPACE_BEFORE_BLOCK"!=this.type||characterOptions.includeSpaceBeforeBlock)&&("TRAILING_SPACE_IN_BLOCK"==this.type&&nextPos.isTrailingSpace&&!characterOptions.includeBlockContentTrailingSpace||("PRE_LINE_TRAILING_SPACE_BEFORE_LINE_BREAK"!=this.type||"NON_SPACE"!=nextPos.type||characterOptions.includePreLineTrailingSpace)&&("\n"==thisChar?nextPos.isTrailingSpace?this.isTrailingSpace||this.isBr&&(nextPos.type="TRAILING_LINE_BREAK_AFTER_BR",getPreviousPos()&&previousPos.isLeadingSpace&&!previousPos.isTrailingSpace&&"\n"==previousPos.character?nextPos.character="":nextPos.type="INCLUDED_TRAILING_LINE_BREAK_AFTER_BR"):character="\n":" "==thisChar&&(character=" "))):character=thisChar))),ignoredChars.indexOf(character)>-1&&(character=""),this.cache.set(cacheKey,character),character},equals:function(pos){return!!pos&&this.node===pos.node&&this.offset===pos.offset},inspect:inspectPosition,toString:function(){return this.character}};Position.prototype=positionProto,extend(positionProto,{next:createCachingGetter("nextPos",function(pos){var nodeWrapper=pos.nodeWrapper,node=pos.node,offset=pos.offset,session=nodeWrapper.session;if(!node)return null;var nextNode,nextOffset,child;return offset==nodeWrapper.getLength()?(nextNode=node.parentNode,nextOffset=nextNode?nodeWrapper.getNodeIndex()+1:0):nodeWrapper.isCharacterDataNode()?(nextNode=node,nextOffset=offset+1):(child=node.childNodes[offset],session.getNodeWrapper(child).containsPositions()?(nextNode=child,nextOffset=0):(nextNode=node,nextOffset=offset+1)),nextNode?session.getPosition(nextNode,nextOffset):null}),previous:createCachingGetter("previous",function(pos){var previousNode,previousOffset,child,nodeWrapper=pos.nodeWrapper,node=pos.node,offset=pos.offset,session=nodeWrapper.session;return 0==offset?(previousNode=node.parentNode,previousOffset=previousNode?nodeWrapper.getNodeIndex():0):nodeWrapper.isCharacterDataNode()?(previousNode=node,previousOffset=offset-1):(child=node.childNodes[offset-1],session.getNodeWrapper(child).containsPositions()?(previousNode=child,previousOffset=dom.getNodeLength(child)):(previousNode=node,previousOffset=offset-1)),previousNode?session.getPosition(previousNode,previousOffset):null}),nextVisible:createCachingGetter("nextVisible",function(pos){var next=pos.next();if(!next)return null;var nodeWrapper=next.nodeWrapper,node=next.node,newPos=next;return nodeWrapper.isCollapsed()&&(newPos=nodeWrapper.session.getPosition(node.parentNode,nodeWrapper.getNodeIndex()+1)),newPos}),nextUncollapsed:createCachingGetter("nextUncollapsed",function(pos){for(var nextPos=pos;nextPos=nextPos.nextVisible();)if(nextPos.resolveLeadingAndTrailingSpaces(),""!==nextPos.character)return nextPos;return null}),
previousVisible:createCachingGetter("previousVisible",function(pos){var previous=pos.previous();if(!previous)return null;var nodeWrapper=previous.nodeWrapper,node=previous.node,newPos=previous;return nodeWrapper.isCollapsed()&&(newPos=nodeWrapper.session.getPosition(node.parentNode,nodeWrapper.getNodeIndex())),newPos})});var currentSession=null,Session=function(){function createWrapperCache(nodeProperty){var cache=new Cache;return{get:function(node){var wrappersByProperty=cache.get(node[nodeProperty]);if(wrappersByProperty)for(var wrapper,i=0;wrapper=wrappersByProperty[i++];)if(wrapper.node===node)return wrapper;return null},set:function(nodeWrapper){var property=nodeWrapper.node[nodeProperty];(cache.get(property)||cache.set(property,[])).push(nodeWrapper)}}}function Session(){this.initCaches()}var uniqueIDSupported=util.isHostProperty(document.documentElement,"uniqueID");return Session.prototype={initCaches:function(){this.elementCache=uniqueIDSupported?function(){var elementsCache=new Cache;return{get:function(el){return elementsCache.get(el.uniqueID)},set:function(elWrapper){elementsCache.set(elWrapper.node.uniqueID,elWrapper)}}}():createWrapperCache("tagName"),this.textNodeCache=createWrapperCache("data"),this.otherNodeCache=createWrapperCache("nodeName")},getNodeWrapper:function(node){var wrapperCache;switch(node.nodeType){case 1:wrapperCache=this.elementCache;break;case 3:wrapperCache=this.textNodeCache;break;default:wrapperCache=this.otherNodeCache}var wrapper=wrapperCache.get(node);return wrapper||(wrapper=new NodeWrapper(node,this),wrapperCache.set(wrapper)),wrapper},getPosition:function(node,offset){return this.getNodeWrapper(node).getPosition(offset)},getRangeBoundaryPosition:function(range,isStart){var prefix=isStart?"start":"end";return this.getPosition(range[prefix+"Container"],range[prefix+"Offset"])},detach:function(){this.elementCache=this.textNodeCache=this.otherNodeCache=null}},Session}();extend(dom,{nextNode:nextNode,previousNode:previousNode});var arrayIndexOf=Array.prototype.indexOf?function(arr,val){return arr.indexOf(val)}:function(arr,val){for(var i=0,len=arr.length;i<len;++i)if(arr[i]===val)return i;return-1};extend(api.rangePrototype,{moveStart:createRangeBoundaryMover(!0,!1),moveEnd:createRangeBoundaryMover(!1,!1),move:createRangeBoundaryMover(!0,!0),trimStart:createRangeTrimmer(!0),trimEnd:createRangeTrimmer(!1),trim:createEntryPointFunction(function(session,characterOptions){var startTrimmed=this.trimStart(characterOptions),endTrimmed=this.trimEnd(characterOptions);return startTrimmed||endTrimmed}),expand:createEntryPointFunction(function(session,unit,expandOptions){var moved=!1;expandOptions=createNestedOptions(expandOptions,defaultExpandOptions);var characterOptions=expandOptions.characterOptions;if(unit||(unit=CHARACTER),unit==WORD){var endToken,newEndPos,wordOptions=expandOptions.wordOptions,startPos=session.getRangeBoundaryPosition(this,!0),endPos=session.getRangeBoundaryPosition(this,!1),startTokenizedTextProvider=createTokenizedTextProvider(startPos,characterOptions,wordOptions),startToken=startTokenizedTextProvider.nextEndToken(),newStartPos=startToken.chars[0].previousVisible();if(this.collapsed)endToken=startToken;else{endToken=createTokenizedTextProvider(endPos,characterOptions,wordOptions).previousStartToken()}return newEndPos=endToken.chars[endToken.chars.length-1],newStartPos.equals(startPos)||(this.setStart(newStartPos.node,newStartPos.offset),moved=!0),newEndPos&&!newEndPos.equals(endPos)&&(this.setEnd(newEndPos.node,newEndPos.offset),moved=!0),expandOptions.trim&&(expandOptions.trimStart&&(moved=this.trimStart(characterOptions)||moved),expandOptions.trimEnd&&(moved=this.trimEnd(characterOptions)||moved)),moved}return this.moveEnd(CHARACTER,1,expandOptions)}),text:createEntryPointFunction(function(session,characterOptions){return this.collapsed?"":getRangeCharacters(session,this,createOptions(characterOptions,defaultCharacterOptions)).join("")}),selectCharacters:createEntryPointFunction(function(session,containerNode,startIndex,endIndex,characterOptions){var moveOptions={characterOptions:characterOptions};containerNode||(containerNode=getBody(this.getDocument())),this.selectNodeContents(containerNode),this.collapse(!0),this.moveStart("character",startIndex,moveOptions),this.collapse(!0),this.moveEnd("character",endIndex-startIndex,moveOptions)}),toCharacterRange:createEntryPointFunction(function(session,containerNode,characterOptions){containerNode||(containerNode=getBody(this.getDocument()));var startIndex,endIndex,parent=containerNode.parentNode,nodeIndex=dom.getNodeIndex(containerNode),rangeStartsBeforeNode=-1==dom.comparePoints(this.startContainer,this.endContainer,parent,nodeIndex),rangeBetween=this.cloneRange();return rangeStartsBeforeNode?(rangeBetween.setStartAndEnd(this.startContainer,this.startOffset,parent,nodeIndex),startIndex=-rangeBetween.text(characterOptions).length):(rangeBetween.setStartAndEnd(parent,nodeIndex,this.startContainer,this.startOffset),startIndex=rangeBetween.text(characterOptions).length),endIndex=startIndex+this.text(characterOptions).length,{start:startIndex,end:endIndex}}),findText:createEntryPointFunction(function(session,searchTermParam,findOptions){findOptions=createNestedOptions(findOptions,defaultFindOptions),findOptions.wholeWordsOnly&&(findOptions.wordOptions.includeTrailingSpace=!1);var backward=isDirectionBackward(findOptions.direction),searchScopeRange=findOptions.withinRange;searchScopeRange||(searchScopeRange=api.createRange(),searchScopeRange.selectNodeContents(this.getDocument()));var searchTerm=searchTermParam,isRegex=!1;"string"==typeof searchTerm?findOptions.caseSensitive||(searchTerm=searchTerm.toLowerCase()):isRegex=!0;var initialPos=session.getRangeBoundaryPosition(this,!backward),comparison=searchScopeRange.comparePoint(initialPos.node,initialPos.offset);-1===comparison?initialPos=session.getRangeBoundaryPosition(searchScopeRange,!0):1===comparison&&(initialPos=session.getRangeBoundaryPosition(searchScopeRange,!1));for(var findResult,pos=initialPos,wrappedAround=!1;;)if(findResult=findTextFromPosition(pos,searchTerm,isRegex,searchScopeRange,findOptions)){if(findResult.valid)return this.setStartAndEnd(findResult.startPos.node,findResult.startPos.offset,findResult.endPos.node,findResult.endPos.offset),!0;pos=backward?findResult.startPos:findResult.endPos}else{if(!findOptions.wrap||wrappedAround)return!1;searchScopeRange=searchScopeRange.cloneRange(),pos=session.getRangeBoundaryPosition(searchScopeRange,!backward),searchScopeRange.setBoundary(initialPos.node,initialPos.offset,backward),wrappedAround=!0}}),pasteHtml:function(html){if(this.deleteContents(),html){var frag=this.createContextualFragment(html),lastChild=frag.lastChild;this.insertNode(frag),this.collapseAfter(lastChild)}}}),extend(api.selectionPrototype,{expand:createEntryPointFunction(function(session,unit,expandOptions){this.changeEachRange(function(range){range.expand(unit,expandOptions)})}),move:createEntryPointFunction(function(session,unit,count,options){var unitsMoved=0;if(this.focusNode){this.collapse(this.focusNode,this.focusOffset);var range=this.getRangeAt(0);options||(options={}),options.characterOptions=createOptions(options.characterOptions,defaultCaretCharacterOptions),unitsMoved=range.move(unit,count,options),this.setSingleRange(range)}return unitsMoved}),trimStart:createSelectionTrimmer("trimStart"),trimEnd:createSelectionTrimmer("trimEnd"),trim:createSelectionTrimmer("trim"),selectCharacters:createEntryPointFunction(function(session,containerNode,startIndex,endIndex,direction,characterOptions){var range=api.createRange(containerNode);range.selectCharacters(containerNode,startIndex,endIndex,characterOptions),this.setSingleRange(range,direction)}),saveCharacterRanges:createEntryPointFunction(function(session,containerNode,characterOptions){for(var ranges=this.getAllRanges(),rangeCount=ranges.length,rangeInfos=[],backward=1==rangeCount&&this.isBackward(),i=0,len=ranges.length;i<len;++i)rangeInfos[i]={characterRange:ranges[i].toCharacterRange(containerNode,characterOptions),backward:backward,characterOptions:characterOptions};return rangeInfos}),restoreCharacterRanges:createEntryPointFunction(function(session,containerNode,saved){this.removeAllRanges();for(var range,rangeInfo,characterRange,i=0,len=saved.length;i<len;++i)rangeInfo=saved[i],characterRange=rangeInfo.characterRange,range=api.createRange(containerNode),range.selectCharacters(containerNode,characterRange.start,characterRange.end,rangeInfo.characterOptions),this.addRange(range,rangeInfo.backward)}),text:createEntryPointFunction(function(session,characterOptions){for(var rangeTexts=[],i=0,len=this.rangeCount;i<len;++i)rangeTexts[i]=this.getRangeAt(i).text(characterOptions);return rangeTexts.join("")})}),api.innerText=function(el,characterOptions){var range=api.createRange(el);return range.selectNodeContents(el),range.text(characterOptions)},api.createWordIterator=function(startNode,startOffset,iteratorOptions){var session=getSession();iteratorOptions=createNestedOptions(iteratorOptions,defaultWordIteratorOptions);var startPos=session.getPosition(startNode,startOffset),tokenizedTextProvider=createTokenizedTextProvider(startPos,iteratorOptions.characterOptions,iteratorOptions.wordOptions),backward=isDirectionBackward(iteratorOptions.direction);return{next:function(){return backward?tokenizedTextProvider.previousStartToken():tokenizedTextProvider.nextEndToken()},dispose:function(){tokenizedTextProvider.dispose(),this.next=function(){}}}},api.noMutation=function(func){func(getSession()),endSession()},api.noMutation.createEntryPointFunction=createEntryPointFunction,api.textRange={isBlockNode:isBlockNode,isCollapsedWhitespaceNode:isCollapsedWhitespaceNode,createPosition:createEntryPointFunction(function(session,node,offset){return session.getPosition(node,offset)})}}),rangy},this);var textAngularVersion="v1.5.16",_browserDetect={ie:function(){for(var v=3,div=document.createElement("div"),all=div.getElementsByTagName("i");div.innerHTML="\x3c!--[if gt IE "+ ++v+"]><i></i><![endif]--\x3e",all[0];);return v>4?v:void 0}(),webkit:/AppleWebKit\/([\d.]+)/i.test(navigator.userAgent),isFirefox:navigator.userAgent.toLowerCase().indexOf("firefox")>-1},performance=performance||{};performance.now=function(){return performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow||function(){return(new Date).getTime()}}();var BLOCKELEMENTS=/^(address|article|aside|audio|blockquote|canvas|center|dd|div|dl|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|noscript|ol|output|p|pre|section|table|tfoot|ul|video)$/i,LISTELEMENTS=/^(ul|li|ol)$/i,VALIDELEMENTS=/^(#text|span|address|article|aside|audio|blockquote|canvas|center|dd|div|dl|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|noscript|ol|output|p|pre|section|table|tfoot|ul|video|li)$/i;String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var sheet,addCSSRule,removeCSSRule,_addCSSRule,_removeCSSRule,_getRuleIndex;if(_browserDetect.ie>8||void 0===_browserDetect.ie){for(var _sheets=document.styleSheets,i=0;i<_sheets.length;i++)if((0===_sheets[i].media.length||_sheets[i].media.mediaText.match(/(all|screen)/gi))&&_sheets[i].href&&_sheets[i].href.match(/textangular\.(min\.|)css/gi)){sheet=_sheets[i];break}sheet||(sheet=function(){var style=document.createElement("style");return _browserDetect.webkit&&style.appendChild(document.createTextNode("")),document.getElementsByTagName("head")[0].appendChild(style),style.sheet}()),addCSSRule=function(selector,rules){return _addCSSRule(sheet,selector,rules)},_addCSSRule=function(_sheet,selector,rules){var insertIndex,insertedRule;return _sheet.cssRules?insertIndex=Math.max(_sheet.cssRules.length-1,0):_sheet.rules&&(insertIndex=Math.max(_sheet.rules.length-1,0)),_sheet.insertRule?_sheet.insertRule(selector+"{"+rules+"}",insertIndex):_sheet.addRule(selector,rules,insertIndex),sheet.rules?insertedRule=sheet.rules[insertIndex]:sheet.cssRules&&(insertedRule=sheet.cssRules[insertIndex]),insertedRule},_getRuleIndex=function(rule,rules){var i,ruleIndex;for(i=0;i<rules.length;i++)if(rules[i].cssText===rule.cssText){ruleIndex=i;break}return ruleIndex},removeCSSRule=function(rule){_removeCSSRule(sheet,rule)},_removeCSSRule=function(sheet,rule){var rules=sheet.cssRules||sheet.rules;if(rules&&0!==rules.length){var ruleIndex=_getRuleIndex(rule,rules);sheet.removeRule?sheet.removeRule(ruleIndex):sheet.deleteRule(ruleIndex)}}}angular.module("textAngular.factories",[]).factory("taBrowserTag",[function(){return function(tag){return tag?""===tag?void 0===_browserDetect.ie?"div":_browserDetect.ie<=8?"P":"p":_browserDetect.ie<=8?tag.toUpperCase():tag:_browserDetect.ie<=8?"P":"p"}}]).factory("taApplyCustomRenderers",["taCustomRenderers","taDOM",function(taCustomRenderers,taDOM){return function(val){var element=angular.element("<div></div>");return element[0].innerHTML=val,angular.forEach(taCustomRenderers,function(renderer){var elements=[];renderer.selector&&""!==renderer.selector?elements=element.find(renderer.selector):renderer.customAttribute&&""!==renderer.customAttribute&&(elements=taDOM.getByAttribute(element,renderer.customAttribute)),angular.forEach(elements,function(_element){_element=angular.element(_element),renderer.selector&&""!==renderer.selector&&renderer.customAttribute&&""!==renderer.customAttribute?void 0!==_element.attr(renderer.customAttribute)&&renderer.renderLogic(_element):renderer.renderLogic(_element)})}),element[0].innerHTML}}]).factory("taFixChrome",function(){return function(html,keepStyles){if(!html||!angular.isString(html)||html.length<=0)return html;for(var match,styleVal,appleSpaceVal,betterSpanMatch=/style\s?=\s?(["'])(?:(?=(\\?))\2.)*?\1/gi,appleConvertedSpaceMatch=/<span class="Apple-converted-space">([^<]+)<\/span>/gi,finalHtml="",lastIndex=0;match=appleConvertedSpaceMatch.exec(html);)appleSpaceVal=match[1],appleSpaceVal=appleSpaceVal.replace(/&nbsp;/gi," "),finalHtml+=html.substring(lastIndex,match.index)+appleSpaceVal,lastIndex=match.index+match[0].length;if(lastIndex&&(finalHtml+=html.substring(lastIndex),html=finalHtml,finalHtml="",lastIndex=0),!keepStyles){for(;match=betterSpanMatch.exec(html);)finalHtml+=html.substring(lastIndex,match.index-1),styleVal=match[0],match=/font-family: inherit;|line-height: 1.[0-9]{3,12};|color: inherit; line-height: 1.1;|color: rgb\(\d{1,3}, \d{1,3}, \d{1,3}\);|background-color: rgb\(\d{1,3}, \d{1,3}, \d{1,3}\);/gi.exec(styleVal),match?(styleVal=styleVal.replace(/( |)font-family: inherit;|( |)line-height: 1.[0-9]{3,12};|( |)color: inherit;|( |)color: rgb\(\d{1,3}, \d{1,3}, \d{1,3}\);|( |)background-color: rgb\(\d{1,3}, \d{1,3}, \d{1,3}\);/gi,""),styleVal.length>8&&(finalHtml+=" "+styleVal)):finalHtml+=" "+styleVal,lastIndex=betterSpanMatch.lastIndex;finalHtml+=html.substring(lastIndex)}if(lastIndex>0){return finalHtml.replace(/<span\s?>(.*?)<\/span>(<br(\/|)>|)/gi,"$1")}return html}}).factory("taSanitize",["$sanitize",function($sanitize){function wrapNested(html,wrapTag){for(var match,depth=0,lastIndex=0,tagRegex=/<[^>]*>/gi;match=tagRegex.exec(html);)if(lastIndex=match.index,"/"===match[0].substr(1,1)){if(0===depth)break;depth--}else depth++;return wrapTag+html.substring(0,lastIndex)+angular.element(wrapTag)[0].outerHTML.substring(wrapTag.length)+html.substring(lastIndex)}function transformLegacyStyles(html){if(!html||!angular.isString(html)||html.length<=0)return html;for(var i,match,subMatch,styleVal,newTag,newHtml,styleElementMatch=/<([^>\/]+?)style=("([^"]+)"|'([^']+)')([^>]*)>/gi,lastNewTag="",finalHtml="",lastIndex=0;match=styleElementMatch.exec(html);){styleVal=match[3]||match[4];var styleRegex=new RegExp(styleRegexString,"i");if(angular.isString(styleVal)&&styleRegex.test(styleVal)){newTag="";for(var styleRegexExec=new RegExp(styleRegexString,"ig");subMatch=styleRegexExec.exec(styleVal);)for(i=0;i<convert_infos.length;i++)subMatch[2*i+2]&&(newTag+="<"+convert_infos[i].tag+">");newHtml=transformLegacyStyles(html.substring(lastIndex,match.index)),lastNewTag.length>0?finalHtml+=wrapNested(newHtml,lastNewTag):finalHtml+=newHtml,styleVal=styleVal.replace(new RegExp(styleRegexString,"ig"),""),finalHtml+="<"+match[1].trim(),styleVal.length>0&&(finalHtml+=' style="'+styleVal+'"'),finalHtml+=match[5]+">",lastIndex=match.index+match[0].length,lastNewTag=newTag}}return lastNewTag.length>0?finalHtml+=wrapNested(html.substring(lastIndex),lastNewTag):finalHtml+=html.substring(lastIndex),finalHtml}function transformLegacyAttributes(html){if(!html||!angular.isString(html)||html.length<=0)return html;for(var match,attrElementMatch=/<([^>\/]+?)align=("([^"]+)"|'([^']+)')([^>]*)>/gi,finalHtml="",lastIndex=0;match=attrElementMatch.exec(html);){finalHtml+=html.substring(lastIndex,match.index),lastIndex=match.index+match[0].length;var newTag="<"+match[1]+match[5];/style=("([^"]+)"|'([^']+)')/gi.test(newTag)?newTag=newTag.replace(/style=("([^"]+)"|'([^']+)')/i,'style="$2$3 text-align:'+(match[3]||match[4])+';"'):newTag+=' style="text-align:'+(match[3]||match[4])+';"',newTag+=">",finalHtml+=newTag}return finalHtml+html.substring(lastIndex)}for(var convert_infos=[{property:"font-weight",values:["bold"],tag:"b"},{property:"font-style",values:["italic"],tag:"i"}],styleMatch=[],i=0;i<convert_infos.length;i++){for(var _partialStyle="("+convert_infos[i].property+":\\s*(",j=0;j<convert_infos[i].values.length;j++)j>0&&(_partialStyle+="|"),_partialStyle+=convert_infos[i].values[j];_partialStyle+=");)",styleMatch.push(_partialStyle)}var styleRegexString="("+styleMatch.join("|")+")",rsb1=new RegExp(/<span id="selectionBoundary_\d+_\d+" class="rangySelectionBoundary">[^<>]+?<\/span>/gi),rsb2=new RegExp(/<span class="rangySelectionBoundary" id="selectionBoundary_\d+_\d+">[^<>]+?<\/span>/gi),rsb3=new RegExp(/<span id="selectionBoundary_\d+_\d+" class="rangySelectionBoundary">[^<>]+?<\/span>/gi);return function(unsafe,oldsafe,ignore){if(!ignore)try{unsafe=transformLegacyStyles(unsafe)}catch(e){}if(unsafe=transformLegacyAttributes(unsafe))try{unsafe=unsafe.replace(rsb1,""),unsafe=unsafe.replace(rsb2,""),unsafe=unsafe.replace(rsb1,""),unsafe=unsafe.replace(rsb3,"")}catch(e){}var safe;try{safe=$sanitize(unsafe),ignore&&(safe=unsafe)}catch(e){safe=oldsafe||""}var origTag,_preTags=safe.match(/(<pre[^>]*>.*?<\/pre[^>]*>)/gi),processedSafe=safe.replace(/(&#(9|10);)*/gi,""),re=/<pre[^>]*>.*?<\/pre[^>]*>/gi,index=0,lastIndex=0;for(safe="";null!==(origTag=re.exec(processedSafe))&&index<_preTags.length;)safe+=processedSafe.substring(lastIndex,origTag.index)+_preTags[index],lastIndex=origTag.index+origTag[0].length,index++;return safe+processedSafe.substring(lastIndex)}}]).factory("taToolExecuteAction",["$q","$log",function($q,$log){return function(editor){void 0!==editor&&(this.$editor=function(){return editor});var result,deferred=$q.defer(),promise=deferred.promise,_editor=this.$editor();try{result=this.action(deferred,_editor.startAction()),promise.finally(function(){_editor.endAction.call(_editor)})}catch(exc){$log.error(exc)}(result||void 0===result)&&deferred.resolve()}}]),angular.module("textAngular.DOM",["textAngular.factories"]).factory("taExecCommand",["taSelection","taBrowserTag","$document",function(taSelection,taBrowserTag,$document){var listToDefault=function(listElement,defaultWrap){var $target,i,children=listElement.find("li");for(i=children.length-1;i>=0;i--)$target=angular.element("<"+defaultWrap+">"+children[i].innerHTML+"</"+defaultWrap+">"),listElement.after($target);listElement.remove(),taSelection.setSelectionToElementEnd($target[0])},listElementToSelfTag=function(list,listElement,selfTag,bDefault,defaultWrap){var $target,i,priorElement,nextElement,foundIndex,children=list.find("li");for(i=0;i<children.length;i++)if(children[i].outerHTML===listElement[0].outerHTML){foundIndex=i,i>0&&(priorElement=children[i-1]),i+1<children.length&&(nextElement=children[i+1]);break}var html="";if(bDefault?html+="<"+defaultWrap+">"+listElement[0].innerHTML+"</"+defaultWrap+">":(html+="<"+taBrowserTag(selfTag)+">",html+="<li>"+listElement[0].innerHTML+"</li>",html+="</"+taBrowserTag(selfTag)+">"),$target=angular.element(html),!priorElement)return listElement.remove(),list.after(angular.element(list[0].outerHTML)),list.after($target),list.remove(),void taSelection.setSelectionToElementEnd($target[0]);if(nextElement){var html1=(list.parent(),""),listTag=list[0].nodeName.toLowerCase();for(html1+="<"+listTag+">",i=0;i<foundIndex;i++)html1+="<li>"+children[i].innerHTML+"</li>";html1+="</"+listTag+">";var html2="";for(html2+="<"+listTag+">",i=foundIndex+1;i<children.length;i++)html2+="<li>"+children[i].innerHTML+"</li>";html2+="</"+listTag+">",list.after(angular.element(html2)),list.after($target),list.after(angular.element(html1)),list.remove(),taSelection.setSelectionToElementEnd($target[0])}else listElement.remove(),list.after($target),taSelection.setSelectionToElementEnd($target[0])},listElementsToSelfTag=function(list,listElements,selfTag,bDefault,defaultWrap){var $target,i,j,priorElement,afterElement,children=list.find("li"),foundIndexes=[];for(i=0;i<children.length;i++)for(j=0;j<listElements.length;j++)children[i].isEqualNode(listElements[j])&&(foundIndexes[j]=i);foundIndexes[0]>0&&(priorElement=children[foundIndexes[0]-1]),foundIndexes[listElements.length-1]+1<children.length&&(afterElement=children[foundIndexes[listElements.length-1]+1]);var html="";if(bDefault)for(j=0;j<listElements.length;j++)html+="<"+defaultWrap+">"+listElements[j].innerHTML+"</"+defaultWrap+">",listElements[j].remove();else{for(html+="<"+taBrowserTag(selfTag)+">",j=0;j<listElements.length;j++)html+=listElements[j].outerHTML,listElements[j].remove();html+="</"+taBrowserTag(selfTag)+">"}if($target=angular.element(html),!priorElement)return list.after(angular.element(list[0].outerHTML)),list.after($target),list.remove(),void taSelection.setSelectionToElementEnd($target[0]);if(!afterElement)return list.after($target),void taSelection.setSelectionToElementEnd($target[0]);var html1="",listTag=list[0].nodeName.toLowerCase();for(html1+="<"+listTag+">",i=0;i<foundIndexes[0];i++)html1+="<li>"+children[i].innerHTML+"</li>";html1+="</"+listTag+">";var html2="";for(html2+="<"+listTag+">",i=foundIndexes[listElements.length-1]+1;i<children.length;i++)html2+="<li>"+children[i].innerHTML+"</li>";html2+="</"+listTag+">",list.after(angular.element(html2)),list.after($target),list.after(angular.element(html1)),list.remove(),taSelection.setSelectionToElementEnd($target[0])},selectLi=function(liElement){/(<br(|\/)>)$/i.test(liElement.innerHTML.trim())?taSelection.setSelectionBeforeElement(angular.element(liElement).find("br")[0]):taSelection.setSelectionToElementEnd(liElement)},listToList=function(listElement,newListTag){var $target=angular.element("<"+newListTag+">"+listElement[0].innerHTML+"</"+newListTag+">");listElement.after($target),listElement.remove(),selectLi($target.find("li")[0])},childElementsToList=function(elements,listElement,newListTag){for(var html="",i=0;i<elements.length;i++)html+="<"+taBrowserTag("li")+">"+elements[i].innerHTML+"</"+taBrowserTag("li")+">";var $target=angular.element("<"+newListTag+">"+html+"</"+newListTag+">");listElement.after($target),listElement.remove(),selectLi($target.find("li")[0])},turnBlockIntoBlocks=function(element,options){for(var i=0;i<element.childNodes.length;i++){var _n=element.childNodes[i];_n.tagName&&_n.tagName.match(BLOCKELEMENTS)&&turnBlockIntoBlocks(_n,options)}if(null===element.parentNode)return element;if("<br>"===options)return element;var $target=angular.element(options);return $target[0].innerHTML=element.innerHTML,element.parentNode.insertBefore($target[0],element),element.parentNode.removeChild(element),$target};return function(taDefaultWrap,topNode){return taDefaultWrap=taBrowserTag(taDefaultWrap),function(command,showUI,options,defaultTagAttributes){var i,$target,html,_nodes,next,optionsTagName,selectedElement,ourSelection,defaultWrapper=angular.element("<"+taDefaultWrap+">");try{taSelection.getSelection&&(ourSelection=taSelection.getSelection()),selectedElement=taSelection.getSelectionElement();var __h,_innerNode;void 0!==selectedElement.tagName&&("div"===selectedElement.tagName.toLowerCase()&&/taTextElement.+/.test(selectedElement.id)&&ourSelection&&ourSelection.start&&1===ourSelection.start.offset&&1===ourSelection.end.offset?(__h=selectedElement.innerHTML,/<br>/i.test(__h)&&(__h=__h.replace(/<br>/i,"&#8203;")),/<br\/>/i.test(__h)&&(__h=__h.replace(/<br\/>/i,"&#8203;")),/<span>(<span>)+/i.test(__h)&&(__h=__.replace(/<span>(<span>)+/i,"<span>")),/<\/span>(<\/span>)+/i.test(__h)&&(__h=__.replace(/<\/span>(<\/span>)+/i,"</span>")),/<span><\/span>/i.test(__h)&&(__h=__h.replace(/<span><\/span>/i,"")),_innerNode="<div>"+__h+"</div>",selectedElement.innerHTML=_innerNode,taSelection.setSelectionToElementEnd(selectedElement.childNodes[0]),selectedElement=taSelection.getSelectionElement()):"span"===selectedElement.tagName.toLowerCase()&&ourSelection&&ourSelection.start&&1===ourSelection.start.offset&&1===ourSelection.end.offset?(__h=selectedElement.innerHTML,/<br>/i.test(__h)&&(__h=__h.replace(/<br>/i,"&#8203;")),/<br\/>/i.test(__h)&&(__h=__h.replace(/<br\/>/i,"&#8203;")),/<span>(<span>)+/i.test(__h)&&(__h=__.replace(/<span>(<span>)+/i,"<span>")),/<\/span>(<\/span>)+/i.test(__h)&&(__h=__.replace(/<\/span>(<\/span>)+/i,"</span>")),/<span><\/span>/i.test(__h)&&(__h=__h.replace(/<span><\/span>/i,"")),_innerNode="<div>"+__h+"</div>",selectedElement.innerHTML=_innerNode,taSelection.setSelectionToElementEnd(selectedElement.childNodes[0]),selectedElement=taSelection.getSelectionElement()):"p"===selectedElement.tagName.toLowerCase()&&ourSelection&&ourSelection.start&&1===ourSelection.start.offset&&1===ourSelection.end.offset?(__h=selectedElement.innerHTML,/<br>/i.test(__h)&&(__h=__h.replace(/<br>/i,"&#8203;"),selectedElement.innerHTML=__h)):"li"===selectedElement.tagName.toLowerCase()&&ourSelection&&ourSelection.start&&ourSelection.start.offset===ourSelection.end.offset&&(__h=selectedElement.innerHTML,/<br>/i.test(__h)&&(__h=__h.replace(/<br>/i,""),selectedElement.innerHTML=__h)))}catch(e){}if(selectedElement){var $selected=angular.element(selectedElement),tagName=selectedElement&&selectedElement.tagName&&selectedElement.tagName.toLowerCase()||"";if("insertorderedlist"===command.toLowerCase()||"insertunorderedlist"===command.toLowerCase()){var selfTag=taBrowserTag("insertorderedlist"===command.toLowerCase()?"ol":"ul"),selectedElements=taSelection.getOnlySelectedElements();if(selectedElements.length>1&&("ol"===tagName||"ul"===tagName))return listElementsToSelfTag($selected,selectedElements,selfTag,selfTag===tagName,taDefaultWrap);if(tagName===selfTag)return $selected[0].childNodes.length!==selectedElements.length&&1===selectedElements.length?($selected=angular.element(selectedElements[0]),listElementToSelfTag($selected.parent(),$selected,selfTag,!0,taDefaultWrap)):listToDefault($selected,taDefaultWrap);if("li"===tagName&&$selected.parent()[0].tagName.toLowerCase()===selfTag&&1===$selected.parent().children().length)return listToDefault($selected.parent(),taDefaultWrap);if("li"===tagName&&$selected.parent()[0].tagName.toLowerCase()!==selfTag&&1===$selected.parent().children().length)return listToList($selected.parent(),selfTag);if(tagName.match(BLOCKELEMENTS)&&!$selected.hasClass("ta-bind")){if(selectedElements.length&&$selected[0].childNodes.length!==selectedElements.length&&1===selectedElements.length)return $selected=angular.element(selectedElements[0]),listElementToSelfTag($selected.parent(),$selected,selfTag,selfTag===tagName,taDefaultWrap);if("ol"===tagName||"ul"===tagName)return listToList($selected,selfTag);var childBlockElements=!1;return angular.forEach($selected.children(),function(elem){elem.tagName.match(BLOCKELEMENTS)&&(childBlockElements=!0)}),childBlockElements?childElementsToList($selected.children(),$selected,selfTag):childElementsToList([angular.element("<div>"+selectedElement.innerHTML+"</div>")[0]],$selected,selfTag)}if(tagName.match(BLOCKELEMENTS)){if(_nodes=taSelection.getOnlySelectedElements(),0===_nodes.length)$target=angular.element("<"+selfTag+"><li>"+selectedElement.innerHTML+"</li></"+selfTag+">"),$selected.html(""),$selected.append($target);else{if(1===_nodes.length&&("ol"===_nodes[0].tagName.toLowerCase()||"ul"===_nodes[0].tagName.toLowerCase()))return _nodes[0].tagName.toLowerCase()===selfTag?listToDefault(angular.element(_nodes[0]),taDefaultWrap):listToList(angular.element(_nodes[0]),selfTag);html="";var $nodes=[];for(i=0;i<_nodes.length;i++)if(3!==_nodes[i].nodeType){var $n=angular.element(_nodes[i]);if("li"===_nodes[i].tagName.toLowerCase())continue;"ol"===_nodes[i].tagName.toLowerCase()||"ul"===_nodes[i].tagName.toLowerCase()?html+=$n[0].innerHTML:"span"!==_nodes[i].tagName.toLowerCase()||"ol"!==_nodes[i].childNodes[0].tagName.toLowerCase()&&"ul"!==_nodes[i].childNodes[0].tagName.toLowerCase()?html+="<"+taBrowserTag("li")+">"+$n[0].innerHTML+"</"+taBrowserTag("li")+">":html+=$n[0].childNodes[0].innerHTML,$nodes.unshift($n)}$target=angular.element("<"+selfTag+">"+html+"</"+selfTag+">"),$nodes.pop().replaceWith($target),angular.forEach($nodes,function($node){$node.remove()})}return void taSelection.setSelectionToElementEnd($target[0])}}else{if("formatblock"===command.toLowerCase()){for(optionsTagName=options.toLowerCase().replace(/[<>]/gi,""),"default"===optionsTagName.trim()&&(optionsTagName=taDefaultWrap,options="<"+taDefaultWrap+">"),$target="li"===tagName?$selected.parent():$selected;!$target[0].tagName||!$target[0].tagName.match(BLOCKELEMENTS)&&!$target.parent().attr("contenteditable");)$target=$target.parent(),tagName=($target[0].tagName||"").toLowerCase();if(tagName===optionsTagName){_nodes=$target.children();var hasBlock=!1;for(i=0;i<_nodes.length;i++)hasBlock=hasBlock||_nodes[i].tagName.match(BLOCKELEMENTS);hasBlock?($target.after(_nodes),next=$target.next(),$target.remove(),$target=next):(defaultWrapper.append($target[0].childNodes),$target.after(defaultWrapper),$target.remove(),$target=defaultWrapper)}else if($target.parent()[0].tagName.toLowerCase()!==optionsTagName||$target.parent().hasClass("ta-bind"))if(tagName.match(LISTELEMENTS))$target.wrap(options);else{for(_nodes=taSelection.getOnlySelectedElements(),0===_nodes.length&&(_nodes=[$target[0]]),i=0;i<_nodes.length;i++)if(3===_nodes[i].nodeType||!_nodes[i].tagName.match(BLOCKELEMENTS))for(;3===_nodes[i].nodeType||!_nodes[i].tagName||!_nodes[i].tagName.match(BLOCKELEMENTS);)_nodes[i]=_nodes[i].parentNode;if(_nodes=_nodes.filter(function(value,index,self){return self.indexOf(value)===index}),_nodes.length>1&&(_nodes=_nodes.filter(function(value,index,self){return!("div"===value.nodeName.toLowerCase()&&/^taTextElement/.test(value.id))})),angular.element(_nodes[0]).hasClass("ta-bind"))$target=angular.element(options),$target[0].innerHTML=_nodes[0].innerHTML,_nodes[0].innerHTML=$target[0].outerHTML;else if("blockquote"===optionsTagName){for(html="",i=0;i<_nodes.length;i++)html+=_nodes[i].outerHTML;for($target=angular.element(options),$target[0].innerHTML=html,_nodes[0].parentNode.insertBefore($target[0],_nodes[0]),i=_nodes.length-1;i>=0;i--)_nodes[i].parentNode&&_nodes[i].parentNode.removeChild(_nodes[i])}else if("pre"===optionsTagName&&taSelection.getStateShiftKey()){for(html="",i=0;i<_nodes.length;i++)html+=_nodes[i].outerHTML;for($target=angular.element(options),$target[0].innerHTML=html,_nodes[0].parentNode.insertBefore($target[0],_nodes[0]),i=_nodes.length-1;i>=0;i--)_nodes[i].parentNode&&_nodes[i].parentNode.removeChild(_nodes[i])}else for(i=0;i<_nodes.length;i++){var newBlock=turnBlockIntoBlocks(_nodes[i],options);_nodes[i]===$target[0]&&($target=angular.element(newBlock))}}else{var blockElement=$target.parent(),contents=blockElement.contents()
;for(i=0;i<contents.length;i++)blockElement.parent().hasClass("ta-bind")&&3===contents[i].nodeType&&(defaultWrapper=angular.element("<"+taDefaultWrap+">"),defaultWrapper[0].innerHTML=contents[i].outerHTML,contents[i]=defaultWrapper[0]),blockElement.parent()[0].insertBefore(contents[i],blockElement[0]);blockElement.remove()}return taSelection.setSelectionToElementEnd($target[0]),void $target[0].focus()}if("createlink"===command.toLowerCase()){if("a"===tagName)return void(taSelection.getSelectionElement().href=options);var tagBegin='<a href="'+options+'" target="'+(defaultTagAttributes.a.target?defaultTagAttributes.a.target:"")+'">';if(taSelection.getSelection().collapsed)taSelection.insertHtml(tagBegin+options+"</a>",topNode);else if(rangy.getSelection().getRangeAt(0).canSurroundContents()){var node=angular.element(tagBegin+"</a>")[0];rangy.getSelection().getRangeAt(0).surroundContents(node)}return}if("inserthtml"===command.toLowerCase())return void taSelection.insertHtml(options,topNode)}try{$document[0].execCommand(command,showUI,options)}catch(e){}}}}}]).service("taSelection",["$document","taDOM","$log",function($document,taDOM,$log){var bShiftState,_document=$document[0],brException=function(element,offset){return element.tagName&&element.tagName.match(/^br$/i)&&0===offset&&!element.previousSibling?{element:element.parentNode,offset:0}:{element:element,offset:offset}},api={getSelection:function(){var range;try{range=rangy.getSelection().getRangeAt(0)}catch(e){return}var container=range.commonAncestorContainer,selection={start:brException(range.startContainer,range.startOffset),end:brException(range.endContainer,range.endOffset),collapsed:range.collapsed};return 3===container.nodeType&&("div"===container.parentNode.nodeName.toLowerCase()&&/^taTextElement/.test(container.parentNode.id)||(container=container.parentNode)),"div"===container.nodeName.toLowerCase()&&/^taTextElement/.test(container.id)?(selection.start.element=container.childNodes[selection.start.offset],selection.end.element=container.childNodes[selection.end.offset],selection.container=container):container.parentNode===selection.start.element||container.parentNode===selection.end.element?selection.container=container.parentNode:selection.container=container,selection},updateLeftArrowKey:function(element){var range=rangy.getSelection().getRangeAt(0);if(range&&range.collapsed){var _nodes=api.getFlattenedDom(range);if(!_nodes.findIndex)return;var nextNodeToRight,_node=range.startContainer,indexStartContainer=_nodes.findIndex(function(element,index){return element.node===_node||-1!==element.parents.indexOf(_node)});if(_nodes.forEach(function(n,i){n.parents.forEach(function(nn,j){})}),indexStartContainer+1<_nodes.length&&(nextNodeToRight=_nodes[indexStartContainer+1].node),nextNodeToRight&&nextNodeToRight.textContent&&/^\ufeff([^\ufeff]*)$/.exec(nextNodeToRight.textContent))return;var nextNodeToLeft;if(indexStartContainer>0&&(nextNodeToLeft=_nodes[indexStartContainer-1].node),0===range.startOffset&&nextNodeToLeft&&/^\ufeff([^\ufeff]*)$/.exec(nextNodeToLeft.textContent))return void api.setSelectionToElementEnd(nextNodeToLeft)}},updateRightArrowKey:function(element){},getFlattenedDom:function(range){function addNodes(_set){if(_set.node.childNodes.length){Array.prototype.slice.call(_set.node.childNodes).forEach(function(n){var _t=_set.parents.slice();_t.slice(-1)[0]!==_set.node&&_t.push(_set.node),addNodes({parents:_t,node:n})})}else nodes.push({parents:_set.parents,node:_set.node})}var parent=range.commonAncestorContainer.parentNode;if(!parent)return range.commonAncestorContainer.childNodes;var nodes=Array.prototype.slice.call(parent.childNodes),indexStartContainer=nodes.indexOf(range.startContainer);return indexStartContainer+1<nodes.length&&indexStartContainer>0||parent.parentNode&&(parent=parent.parentNode),nodes=[],addNodes({parents:[parent],node:parent}),nodes},getOnlySelectedElements:function(){var range=rangy.getSelection().getRangeAt(0),container=range.commonAncestorContainer;return container=3===container.nodeType?container.parentNode:container,range.getNodes([1],function(node){return node.parentNode===container})},getAllSelectedElements:function(){var range=rangy.getSelection().getRangeAt(0),container=range.commonAncestorContainer;container=3===container.nodeType?container.parentNode:container;var selectedNodes=range.getNodes([1],function(node){return node.parentNode===container}),innerHtml=container.innerHTML;if((innerHtml=innerHtml.replace(/<span id=.selectionBoundary[^>]+>\ufeff?<\/span>/gi,""))===range.toHtml()&&("div"!==container.nodeName.toLowerCase()||!/^taTextElement/.test(container.id))){for(var arr=[],i=selectedNodes.length;i--;arr.unshift(selectedNodes[i]));selectedNodes=arr,selectedNodes.push(container)}return selectedNodes},getSelectionElement:function(){return api.getSelection()?api.getSelection().container:void 0},setSelection:function(elStart,elEnd,start,end){var range=rangy.createRange();range.setStart(elStart,start),range.setEnd(elEnd,end),rangy.getSelection().setSingleRange(range)},setSelectionBeforeElement:function(el){var range=rangy.createRange();range.selectNode(el),range.collapse(!0),rangy.getSelection().setSingleRange(range)},setSelectionAfterElement:function(el){var range=rangy.createRange();range.selectNode(el),range.collapse(!1),rangy.getSelection().setSingleRange(range)},setSelectionToElementStart:function(el){var range=rangy.createRange();range.selectNodeContents(el),range.collapse(!0),rangy.getSelection().setSingleRange(range)},setSelectionToElementEnd:function(el){var range=rangy.createRange();range.selectNodeContents(el),range.collapse(!1),el.childNodes&&el.childNodes[el.childNodes.length-1]&&"br"===el.childNodes[el.childNodes.length-1].nodeName&&(range.startOffset=range.endOffset=range.startOffset-1),rangy.getSelection().setSingleRange(range)},setStateShiftKey:function(bS){bShiftState=bS},getStateShiftKey:function(){return bShiftState},insertHtml:function(html,topNode){var parent,secondParent,_childI,nodes,i,lastNode,_tempFrag,element=angular.element("<div>"+html+"</div>"),range=rangy.getSelection().getRangeAt(0),frag=_document.createDocumentFragment(),children=element[0].childNodes,isInline=!0;if(children.length>0){for(nodes=[],_childI=0;_childI<children.length;_childI++){var _cnode=children[_childI];"p"===_cnode.nodeName.toLowerCase()&&""===_cnode.innerHTML.trim()||(isInline=isInline&&!BLOCKELEMENTS.test(_cnode.nodeName),nodes.push(_cnode))}for(var _n=0;_n<nodes.length;_n++)lastNode=frag.appendChild(nodes[_n]);!isInline&&range.collapsed&&/^(|<br(|\/)>)$/i.test(range.startContainer.innerHTML)&&range.selectNode(range.startContainer)}else isInline=!0,lastNode=frag=_document.createTextNode(html);if(isInline)range.deleteContents();else if(range.collapsed&&range.startContainer!==topNode)if(range.startContainer.innerHTML&&range.startContainer.innerHTML.match(/^<[^>]*>$/i))parent=range.startContainer,1===range.startOffset?(range.setStartAfter(parent),range.setEndAfter(parent)):(range.setStartBefore(parent),range.setEndBefore(parent));else{if(3===range.startContainer.nodeType&&range.startContainer.parentNode!==topNode)for(parent=range.startContainer.parentNode,secondParent=parent.cloneNode(),taDOM.splitNodes(parent.childNodes,parent,secondParent,range.startContainer,range.startOffset);!VALIDELEMENTS.test(parent.nodeName);){angular.element(parent).after(secondParent),parent=parent.parentNode;var _lastSecondParent=secondParent;secondParent=parent.cloneNode(),taDOM.splitNodes(parent.childNodes,parent,secondParent,_lastSecondParent)}else parent=range.startContainer,secondParent=parent.cloneNode(),taDOM.splitNodes(parent.childNodes,parent,secondParent,void 0,void 0,range.startOffset);if(angular.element(parent).after(secondParent),range.setStartAfter(parent),range.setEndAfter(parent),/^(|<br(|\/)>)$/i.test(parent.innerHTML.trim())&&(range.setStartBefore(parent),range.setEndBefore(parent),angular.element(parent).remove()),/^(|<br(|\/)>)$/i.test(secondParent.innerHTML.trim())&&angular.element(secondParent).remove(),"li"===parent.nodeName.toLowerCase()){for(_tempFrag=_document.createDocumentFragment(),i=0;i<frag.childNodes.length;i++)element=angular.element("<li>"),taDOM.transferChildNodes(frag.childNodes[i],element[0]),taDOM.transferNodeAttributes(frag.childNodes[i],element[0]),_tempFrag.appendChild(element[0]);frag=_tempFrag,lastNode&&(lastNode=frag.childNodes[frag.childNodes.length-1],lastNode=lastNode.childNodes[lastNode.childNodes.length-1])}}else range.deleteContents();range.insertNode(frag),lastNode&&api.setSelectionToElementEnd(lastNode)}};return api}]).service("taDOM",function(){var taDOM={getByAttribute:function(element,attribute){var resultingElements=[],childNodes=element.children();return childNodes.length&&angular.forEach(childNodes,function(child){resultingElements=resultingElements.concat(taDOM.getByAttribute(angular.element(child),attribute))}),void 0!==element.attr(attribute)&&resultingElements.push(element),resultingElements},transferChildNodes:function(source,target){for(target.innerHTML="";source.childNodes.length>0;)target.appendChild(source.childNodes[0]);return target},splitNodes:function(nodes,target1,target2,splitNode,subSplitIndex,splitIndex){if(!splitNode&&isNaN(splitIndex))throw new Error("taDOM.splitNodes requires a splitNode or splitIndex");for(var startNodes=document.createDocumentFragment(),endNodes=document.createDocumentFragment(),index=0;nodes.length>0&&(isNaN(splitIndex)||splitIndex!==index)&&nodes[0]!==splitNode;)startNodes.appendChild(nodes[0]),index++;for(!isNaN(subSplitIndex)&&subSplitIndex>=0&&nodes[0]&&(startNodes.appendChild(document.createTextNode(nodes[0].nodeValue.substring(0,subSplitIndex))),nodes[0].nodeValue=nodes[0].nodeValue.substring(subSplitIndex));nodes.length>0;)endNodes.appendChild(nodes[0]);taDOM.transferChildNodes(startNodes,target1),taDOM.transferChildNodes(endNodes,target2)},transferNodeAttributes:function(source,target){for(var i=0;i<source.attributes.length;i++)target.setAttribute(source.attributes[i].name,source.attributes[i].value);return target}};return taDOM}),angular.module("textAngular.validators",[]).directive("taMaxText",function(){return{restrict:"A",require:"ngModel",link:function(scope,elem,attrs,ctrl){var max=parseInt(scope.$eval(attrs.taMaxText));if(isNaN(max))throw"Max text must be an integer";attrs.$observe("taMaxText",function(value){if(max=parseInt(value),isNaN(max))throw"Max text must be an integer";ctrl.$dirty&&ctrl.$validate()}),ctrl.$validators.taMaxText=function(viewValue){var source=angular.element("<div/>");return source.html(viewValue),source.text().length<=max}}}}).directive("taMinText",function(){return{restrict:"A",require:"ngModel",link:function(scope,elem,attrs,ctrl){var min=parseInt(scope.$eval(attrs.taMinText));if(isNaN(min))throw"Min text must be an integer";attrs.$observe("taMinText",function(value){if(min=parseInt(value),isNaN(min))throw"Min text must be an integer";ctrl.$dirty&&ctrl.$validate()}),ctrl.$validators.taMinText=function(viewValue){var source=angular.element("<div/>");return source.html(viewValue),!source.text().length||source.text().length>=min}}}}),angular.module("textAngular.taBind",["textAngular.factories","textAngular.DOM"]).service("_taBlankTest",[function(){return function(_blankVal){return!_blankVal||""===stripHtmlToText(_blankVal)&&!/<img[^>]+>/.test(_blankVal)}}]).directive("taButton",[function(){return{link:function(scope,element,attrs){element.attr("unselectable","on"),element.on("mousedown",function(e,eventData){return eventData&&angular.extend(e,eventData),e.preventDefault(),!1})}}}]).directive("taBind",["taSanitize","$timeout","$document","taFixChrome","taBrowserTag","taSelection","taSelectableElements","taApplyCustomRenderers","taOptions","_taBlankTest","$parse","taDOM","textAngularManager",function(taSanitize,$timeout,$document,taFixChrome,taBrowserTag,taSelection,taSelectableElements,taApplyCustomRenderers,taOptions,_taBlankTest,$parse,taDOM,textAngularManager){return{priority:2,require:["ngModel","?ngModelOptions"],link:function(scope,element,attrs,controller){function _mapKeys(event){var specialKey;return _keyMappings.forEach(function(map){if(map.keyCode===event.keyCode){var netModifiers=(event.metaKey?_META_KEY:0)+(event.ctrlKey?_CTRL_KEY:0)+(event.shiftKey?_SHIFT_KEY:0)+(event.altKey?_ALT_KEY:0);if(map.forbiddenModifiers&netModifiers)return;map.mustHaveModifiers.every(function(modifier){return netModifiers&modifier})&&(specialKey=map.specialKey)}}),specialKey}var _lastKey,_pasteHandler,_defaultVal,ngModel=controller[0],ngModelOptions=controller[1]||{},_isContentEditable=void 0!==element.attr("contenteditable")&&element.attr("contenteditable"),_isInputFriendly=_isContentEditable||"textarea"===element[0].tagName.toLowerCase()||"input"===element[0].tagName.toLowerCase(),_isReadonly=!1,_focussed=!1,_skipRender=!1,_disableSanitizer=attrs.taUnsafeSanitizer||taOptions.disableSanitizer,_keepStyles=attrs.taKeepStyles||taOptions.keepStyles,BLOCKED_KEYS=/^(9|19|20|27|33|34|35|36|37|38|39|40|45|112|113|114|115|116|117|118|119|120|121|122|123|144|145)$/i,UNDO_TRIGGER_KEYS=/^(8|13|32|46|59|61|107|109|173|186|187|188|189|190|191|192|219|220|221|222)$/i,_CTRL_KEY=1,_META_KEY=2,_ALT_KEY=4,_SHIFT_KEY=8,_keyMappings=[{specialKey:"UndoKey",forbiddenModifiers:_ALT_KEY+_SHIFT_KEY,mustHaveModifiers:[_META_KEY+_CTRL_KEY],keyCode:90},{specialKey:"RedoKey",forbiddenModifiers:_ALT_KEY,mustHaveModifiers:[_META_KEY+_CTRL_KEY,_SHIFT_KEY],keyCode:90},{specialKey:"RedoKey",forbiddenModifiers:_ALT_KEY+_SHIFT_KEY,mustHaveModifiers:[_META_KEY+_CTRL_KEY],keyCode:89},{specialKey:"TabKey",forbiddenModifiers:_META_KEY+_SHIFT_KEY+_ALT_KEY+_CTRL_KEY,mustHaveModifiers:[],keyCode:9},{specialKey:"ShiftTabKey",forbiddenModifiers:_META_KEY+_ALT_KEY+_CTRL_KEY,mustHaveModifiers:[_SHIFT_KEY],keyCode:9}];void 0===attrs.taDefaultWrap&&(attrs.taDefaultWrap="p"),""===attrs.taDefaultWrap?(_defaultVal="",void 0===_browserDetect.ie||(_browserDetect.ie>=11||_browserDetect.ie)):(_defaultVal=void 0===_browserDetect.ie||_browserDetect.ie>=11?"br"===attrs.taDefaultWrap.toLowerCase()?"<BR><BR>":"<"+attrs.taDefaultWrap+"><br></"+attrs.taDefaultWrap+">":_browserDetect.ie<=8?"<"+attrs.taDefaultWrap.toUpperCase()+"></"+attrs.taDefaultWrap.toUpperCase()+">":"<"+attrs.taDefaultWrap+"></"+attrs.taDefaultWrap+">",void 0===_browserDetect.ie||_browserDetect.ie>=11?"br"===attrs.taDefaultWrap.toLowerCase()||(attrs.taDefaultWrap,attrs.taDefaultWrap):_browserDetect.ie<=8?(attrs.taDefaultWrap.toUpperCase(),attrs.taDefaultWrap.toUpperCase()):(attrs.taDefaultWrap,attrs.taDefaultWrap)),ngModelOptions.$options||(ngModelOptions.$options={});var _ensureContentWrapped=function(value){if(_taBlankTest(value))return value;var domTest=angular.element("<div>"+value+"</div>");if(0===domTest.children().length)value="<"+attrs.taDefaultWrap+">"+value+"</"+attrs.taDefaultWrap+">";else{var i,_children=domTest[0].childNodes,_foundBlockElement=!1;for(i=0;i<_children.length&&!(_foundBlockElement=_children[i].nodeName.toLowerCase().match(BLOCKELEMENTS));i++);if(_foundBlockElement)for(value="",i=0;i<_children.length;i++){var node=_children[i],nodeName=node.nodeName.toLowerCase();if("#comment"===nodeName)value+="\x3c!--"+node.nodeValue+"--\x3e";else if("#text"===nodeName){var text=node.textContent;text.trim()?value+="<"+attrs.taDefaultWrap+">"+text+"</"+attrs.taDefaultWrap+">":value+=text}else if(nodeName.match(BLOCKELEMENTS))value+=node.outerHTML;else{var _subVal=node.outerHTML||node.nodeValue;""!==_subVal.trim()?value+="<"+attrs.taDefaultWrap+">"+_subVal+"</"+attrs.taDefaultWrap+">":value+=_subVal}}else value="<"+attrs.taDefaultWrap+">"+value+"</"+attrs.taDefaultWrap+">"}return value};attrs.taPaste&&(_pasteHandler=$parse(attrs.taPaste)),element.addClass("ta-bind");var _undoKeyupTimeout;scope["$undoManager"+(attrs.id||"")]=ngModel.$undoManager={_stack:[],_index:0,_max:1e3,push:function(value){return void 0===value||null===value||void 0!==this.current()&&null!==this.current()&&value===this.current()?value:(this._index<this._stack.length-1&&(this._stack=this._stack.slice(0,this._index+1)),this._stack.push(value),_undoKeyupTimeout&&$timeout.cancel(_undoKeyupTimeout),this._stack.length>this._max&&this._stack.shift(),this._index=this._stack.length-1,value)},undo:function(){return this.setToIndex(this._index-1)},redo:function(){return this.setToIndex(this._index+1)},setToIndex:function(index){if(!(index<0||index>this._stack.length-1))return this._index=index,this.current()},current:function(){return this._stack[this._index]}};var _redoUndoTimeout,_compileHtml=function(){if(_isContentEditable)return element[0].innerHTML;if(_isInputFriendly)return element.val();throw"textAngular Error: attempting to update non-editable taBind"},selectorClickHandler=function(event){return scope.$emit("ta-element-select",this),event.preventDefault(),!1},_reApplyOnSelectorHandlers=scope["reApplyOnSelectorHandlers"+(attrs.id||"")]=function(){_isReadonly||angular.forEach(taSelectableElements,function(selector){element.find(selector).off("click",selectorClickHandler).on("click",selectorClickHandler)})},_setViewValue=function(_val,triggerUndo,skipRender){_skipRender=skipRender||!1,void 0!==triggerUndo&&null!==triggerUndo||(triggerUndo=_isContentEditable),void 0!==_val&&null!==_val||(_val=_compileHtml()),_taBlankTest(_val)?(""!==ngModel.$viewValue&&ngModel.$setViewValue(""),triggerUndo&&""!==ngModel.$undoManager.current()&&ngModel.$undoManager.push("")):(_reApplyOnSelectorHandlers(),ngModel.$viewValue!==_val&&(ngModel.$setViewValue(_val),triggerUndo&&ngModel.$undoManager.push(_val))),ngModel.$render()},_setInnerHTML=function(newval){element[0].innerHTML=newval},_undo=scope["$undoTaBind"+(attrs.id||"")]=function(){if(!_isReadonly&&_isContentEditable){var content=ngModel.$undoManager.undo();void 0!==content&&null!==content&&(_setInnerHTML(content),_setViewValue(content,!1),_redoUndoTimeout&&$timeout.cancel(_redoUndoTimeout),_redoUndoTimeout=$timeout(function(){element[0].focus(),taSelection.setSelectionToElementEnd(element[0])},1))}},_redo=scope["$redoTaBind"+(attrs.id||"")]=function(){if(!_isReadonly&&_isContentEditable){var content=ngModel.$undoManager.redo();void 0!==content&&null!==content&&(_setInnerHTML(content),_setViewValue(content,!1),_redoUndoTimeout&&$timeout.cancel(_redoUndoTimeout),_redoUndoTimeout=$timeout(function(){element[0].focus(),taSelection.setSelectionToElementEnd(element[0])},1))}};scope["updateTaBind"+(attrs.id||"")]=function(){_isReadonly||_setViewValue(void 0,void 0,!0)};var _sanitize=function(unsafe){return ngModel.$oldViewValue=taSanitize(taFixChrome(unsafe,_keepStyles),ngModel.$oldViewValue,_disableSanitizer)};if(element.attr("required")&&(ngModel.$validators.required=function(modelValue,viewValue){return!_taBlankTest(modelValue||viewValue)}),ngModel.$parsers.push(_sanitize),ngModel.$parsers.unshift(_ensureContentWrapped),ngModel.$formatters.push(_sanitize),ngModel.$formatters.unshift(_ensureContentWrapped),ngModel.$formatters.unshift(function(value){return ngModel.$undoManager.push(value||"")}),_isInputFriendly)if(scope.events={},_isContentEditable){var _processingPaste=!1,processpaste=function(text){var _isOneNote=void 0!==text&&text.match(/content=["']*OneNote.File/i);if(text&&text.trim().length){if(text.match(/class=["']*Mso(Normal|List)/i)||text.match(/content=["']*Word.Document/i)||text.match(/content=["']*OneNote.File/i)){var textFragment=text.match(/<!--StartFragment-->([\s\S]*?)<!--EndFragment-->/i);textFragment=textFragment?textFragment[1]:text,textFragment=textFragment.replace(/<o:p>[\s\S]*?<\/o:p>/gi,"").replace(/class=(["']|)MsoNormal(["']|)/gi,"");var dom=angular.element("<div>"+textFragment+"</div>"),targetDom=angular.element("<div></div>"),_list={element:null,lastIndent:[],lastLi:null,isUl:!1};_list.lastIndent.peek=function(){var n=this.length;if(n>0)return this[n-1]};for(var _resetList=function(isUl){_list.isUl=isUl,_list.element=angular.element(isUl?"<ul>":"<ol>"),_list.lastIndent=[],_list.lastIndent.peek=function(){var n=this.length;if(n>0)return this[n-1]},_list.lastLevelMatch=null},i=0;i<=dom[0].childNodes.length;i++)if(dom[0].childNodes[i]&&"#text"!==dom[0].childNodes[i].nodeName){var tagName=dom[0].childNodes[i].tagName.toLowerCase();if("p"===tagName||"ul"===tagName||"h1"===tagName||"h2"===tagName||"h3"===tagName||"h4"===tagName||"h5"===tagName||"h6"===tagName||"table"===tagName){var el=angular.element(dom[0].childNodes[i]),_listMatch=(el.attr("class")||"").match(/MsoList(Bullet|Number|Paragraph)(CxSp(First|Middle|Last)|)/i);if(_listMatch){if(el[0].childNodes.length<2||el[0].childNodes[1].childNodes.length<1)continue;var isUl="bullet"===_listMatch[1].toLowerCase()||"number"!==_listMatch[1].toLowerCase()&&!(/^[^0-9a-z<]*[0-9a-z]+[^0-9a-z<>]</i.test(el[0].childNodes[1].innerHTML)||/^[^0-9a-z<]*[0-9a-z]+[^0-9a-z<>]</i.test(el[0].childNodes[1].childNodes[0].innerHTML)),_indentMatch=(el.attr("style")||"").match(/margin-left:([\-\.0-9]*)/i),indent=parseFloat(_indentMatch?_indentMatch[1]:0),_levelMatch=(el.attr("style")||"").match(/mso-list:l([0-9]+) level([0-9]+) lfo[0-9+]($|;)/i);if(_levelMatch&&_levelMatch[2]&&(indent=parseInt(_levelMatch[2])),_levelMatch&&(!_list.lastLevelMatch||_levelMatch[1]!==_list.lastLevelMatch[1])||!_listMatch[3]||"first"===_listMatch[3].toLowerCase()||null===_list.lastIndent.peek()||_list.isUl!==isUl&&_list.lastIndent.peek()===indent)_resetList(isUl),targetDom.append(_list.element);else if(null!=_list.lastIndent.peek()&&_list.lastIndent.peek()<indent)_list.element=angular.element(isUl?"<ul>":"<ol>"),_list.lastLi.append(_list.element);else if(null!=_list.lastIndent.peek()&&_list.lastIndent.peek()>indent){for(;null!=_list.lastIndent.peek()&&_list.lastIndent.peek()>indent;)if("li"!==_list.element.parent()[0].tagName.toLowerCase()){if(!/[uo]l/i.test(_list.element.parent()[0].tagName.toLowerCase()))break;_list.element=_list.element.parent(),_list.lastIndent.pop()}else _list.element=_list.element.parent();_list.isUl="ul"===_list.element[0].tagName.toLowerCase(),isUl!==_list.isUl&&(_resetList(isUl),targetDom.append(_list.element))}_list.lastLevelMatch=_levelMatch,indent!==_list.lastIndent.peek()&&_list.lastIndent.push(indent),_list.lastLi=angular.element("<li>"),_list.element.append(_list.lastLi),_list.lastLi.html(el.html().replace(/<!(--|)\[if !supportLists\](--|)>[\s\S]*?<!(--|)\[endif\](--|)>/gi,"")),el.remove()}else _resetList(!1),targetDom.append(el)}}var _unwrapElement=function(node){node=angular.element(node);for(var _n=node[0].childNodes.length-1;_n>=0;_n--)node.after(node[0].childNodes[_n]);node.remove()};angular.forEach(targetDom.find("span"),function(node){node.removeAttribute("lang"),node.attributes.length<=0&&_unwrapElement(node)}),angular.forEach(targetDom.find("font"),_unwrapElement),text=targetDom.html(),_isOneNote&&(text=targetDom.html()||dom.html()),text=text.replace(/\n/g," ")}else{if(text=text.replace(/<(|\/)meta[^>]*?>/gi,""),text.match(/<[^>]*?(ta-bind)[^>]*?>/)){if(text.match(/<[^>]*?(text-angular)[^>]*?>/)){var _el=angular.element("<div>"+text+"</div>");_el.find("textarea").remove();for(var _b=0;_b<binds.length;_b++){for(var _target=binds[_b][0].parentNode.parentNode,_c=0;_c<binds[_b][0].childNodes.length;_c++)_target.parentNode.insertBefore(binds[_b][0].childNodes[_c],_target);_target.parentNode.removeChild(_target)}text=_el.html().replace('<br class="Apple-interchange-newline">',"")}}else text.match(/^<span/)&&(text.match(/<span class=(\"Apple-converted-space\"|\'Apple-converted-space\')>.<\/span>/gi)||(text=text.replace(/<(|\/)span[^>]*?>/gi,"")));text=text.replace(/<br class="Apple-interchange-newline"[^>]*?>/gi,"").replace(/<span class="Apple-converted-space">( |&nbsp;)<\/span>/gi,"&nbsp;")}/<li(\s.*)?>/i.test(text)&&!1===/(<ul(\s.*)?>|<ol(\s.*)?>).*<li(\s.*)?>/i.test(text)&&(text=text.replace(/<li(\s.*)?>.*<\/li(\s.*)?>/i,"<ul>$&</ul>")),text=text.replace(/^[ |\u00A0]+/gm,function(match){for(var result="",i=0;i<match.length;i++)result+="&nbsp;";return result}).replace(/\n|\r\n|\r/g,"<br />").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;"),_pasteHandler&&(text=_pasteHandler(scope,{$html:text})||text),text=text.replace(/<span style=("|')([^<]*?)vertical-align\s*:\s*super;?([^>]*?)("|')>([^<]+?)<\/span>/g,"<sup style='$2$3'>$5</sup>"),text=taSanitize(text,"",_disableSanitizer),taSelection.insertHtml(text,element[0]),$timeout(function(){ngModel.$setViewValue(_compileHtml()),_processingPaste=!1,element.removeClass("processing-paste")},0)}else _processingPaste=!1,element.removeClass("processing-paste")};element.on("paste",scope.events.paste=function(e,eventData){if(eventData&&angular.extend(e,eventData),_isReadonly||_processingPaste)return e.stopPropagation(),e.preventDefault(),!1;_processingPaste=!0,element.addClass("processing-paste");var pastedContent,clipboardData=(e.originalEvent||e).clipboardData;if(!clipboardData&&window.clipboardData&&window.clipboardData.getData)return pastedContent=window.clipboardData.getData("Text"),processpaste(pastedContent),e.stopPropagation(),e.preventDefault(),!1;if(clipboardData&&clipboardData.getData&&clipboardData.types.length>0){for(var _types="",_t=0;_t<clipboardData.types.length;_t++)_types+=" "+clipboardData.types[_t];return/text\/html/i.test(_types)?pastedContent=clipboardData.getData("text/html"):/text\/plain/i.test(_types)&&(pastedContent=clipboardData.getData("text/plain")),processpaste(pastedContent),e.stopPropagation(),e.preventDefault(),!1}var _savedSelection=rangy.saveSelection(),_tempDiv=angular.element('<div class="ta-hidden-input" contenteditable="true"></div>');$document.find("body").append(_tempDiv),_tempDiv[0].focus(),$timeout(function(){rangy.restoreSelection(_savedSelection),processpaste(_tempDiv[0].innerHTML),element[0].focus(),_tempDiv.remove()},0)}),element.on("cut",scope.events.cut=function(e){_isReadonly?e.preventDefault():$timeout(function(){ngModel.$setViewValue(_compileHtml())},0)}),element.on("keydown",scope.events.keydown=function(event,eventData){eventData&&angular.extend(event,eventData),16===event.keyCode?taSelection.setStateShiftKey(!0):taSelection.setStateShiftKey(!1),event.specialKey=_mapKeys(event);var userSpecialKey;if(taOptions.keyMappings.forEach(function(mapping){event.specialKey===mapping.commandKeyCode&&(event.specialKey=void 0),mapping.testForKey(event)&&(userSpecialKey=mapping.commandKeyCode),"UndoKey"!==mapping.commandKeyCode&&"RedoKey"!==mapping.commandKeyCode||mapping.enablePropagation||event.preventDefault()}),void 0!==userSpecialKey&&(event.specialKey=userSpecialKey),void 0===event.specialKey||"UndoKey"===event.specialKey&&"RedoKey"===event.specialKey||(event.preventDefault(),textAngularManager.sendKeyCommand(scope,event)),!(_isReadonly||("UndoKey"===event.specialKey&&(_undo(),event.preventDefault()),"RedoKey"===event.specialKey&&(_redo(),event.preventDefault()),13!==event.keyCode||event.shiftKey||event.ctrlKey||event.metaKey||event.altKey))){var $selection,selection=taSelection.getSelectionElement();if(!selection.nodeName.match(VALIDELEMENTS))return;var _new=angular.element(_defaultVal),moveOutsideElements=["blockquote","ul","ol"];if(function(a,obj){for(var i=0;i<a.length;i++)if(a[i]===obj)return!0;return!1}(moveOutsideElements,selection.parentNode.tagName.toLowerCase())){if(/^<br(|\/)>$/i.test(selection.innerHTML.trim())&&!selection.nextSibling){$selection=angular.element(selection);var _parent=$selection.parent();_parent.after(_new),$selection.remove(),0===_parent.children().length&&_parent.remove(),taSelection.setSelectionToElementStart(_new[0]),event.preventDefault()}/^<[^>]+><br(|\/)><\/[^>]+>$/i.test(selection.innerHTML.trim())&&($selection=angular.element(selection),$selection.after(_new),$selection.remove(),taSelection.setSelectionToElementStart(_new[0]),event.preventDefault())}}});var _keyupTimeout;element.on("keyup",scope.events.keyup=function(event,eventData){if(eventData&&angular.extend(event,eventData),taSelection.setStateShiftKey(!1),9===event.keyCode){return void(taSelection.getSelection().start.element===element[0]&&element.children().length&&taSelection.setSelectionToElementStart(element.children()[0]))}if(37!==event.keyCode||event.shiftKey||taSelection.updateLeftArrowKey(element),39!==event.keyCode||event.shiftKey||taSelection.updateRightArrowKey(element),_undoKeyupTimeout&&$timeout.cancel(_undoKeyupTimeout),!_isReadonly&&!BLOCKED_KEYS.test(event.keyCode))if(13===event.keyCode&&(event.ctrlKey||event.metaKey||event.altKey));else{if(""!==_defaultVal&&"<BR><BR>"!==_defaultVal&&13===event.keyCode&&!event.ctrlKey&&!event.metaKey&&!event.altKey){for(var selection=taSelection.getSelectionElement();!selection.nodeName.match(VALIDELEMENTS)&&selection!==element[0];)selection=selection.parentNode;if(event.shiftKey){var tagName=selection.tagName.toLowerCase();if((tagName===attrs.taDefaultWrap||"li"===tagName||"pre"===tagName||"div"===tagName)&&!/.+<br><br>/.test(selection.innerHTML.trim())){var ps=selection.previousSibling;ps&&(ps.innerHTML=ps.innerHTML+"<br><br>",angular.element(selection).remove(),taSelection.setSelectionToElementEnd(ps))}}else if(selection.tagName.toLowerCase()!==attrs.taDefaultWrap&&"li"!==selection.nodeName.toLowerCase()&&(""===selection.innerHTML.trim()||"<br>"===selection.innerHTML.trim())){var _new=angular.element(_defaultVal);angular.element(selection).replaceWith(_new),taSelection.setSelectionToElementStart(_new[0])}}var val=_compileHtml();""===_defaultVal||""!==val.trim()&&"<br>"!==val.trim()?"<"!==val.substring(0,1)&&attrs.taDefaultWrap:(_setInnerHTML(_defaultVal),taSelection.setSelectionToElementStart(element.children()[0]));var triggerUndo=_lastKey!==event.keyCode&&UNDO_TRIGGER_KEYS.test(event.keyCode);_keyupTimeout&&$timeout.cancel(_keyupTimeout),_keyupTimeout=$timeout(function(){_setViewValue(val,triggerUndo,!0)},ngModelOptions.$options.debounce||400),triggerUndo||(_undoKeyupTimeout=$timeout(function(){ngModel.$undoManager.push(val)},250)),_lastKey=event.keyCode}});var _inputTimeout;if(element.on("input",function(){_compileHtml()!==ngModel.$viewValue&&(_inputTimeout&&$timeout.cancel(_inputTimeout),_inputTimeout=$timeout(function(){var _savedSelection=rangy.saveSelection(),_val=_compileHtml();_val!==ngModel.$viewValue&&_setViewValue(_val,!0),0!==ngModel.$viewValue.length&&rangy.restoreSelection(_savedSelection)},1e3))}),element.on("blur",scope.events.blur=function(){_focussed=!1,_isReadonly?(_skipRender=!0,ngModel.$render()):_setViewValue(void 0,void 0,!0)}),attrs.placeholder&&(_browserDetect.ie>8||void 0===_browserDetect.ie)){var rule;if(!attrs.id)throw"textAngular Error: An unique ID is required for placeholders to work";rule=addCSSRule("#"+attrs.id+".placeholder-text:before",'content: "'+attrs.placeholder+'"'),scope.$on("$destroy",function(){removeCSSRule(rule)})}element.on("focus",scope.events.focus=function(){_focussed=!0,element.removeClass("placeholder-text"),_reApplyOnSelectorHandlers()}),element.on("mouseup",scope.events.mouseup=function(){var _selection=taSelection.getSelection();_selection&&_selection.start.element===element[0]&&element.children().length&&taSelection.setSelectionToElementStart(element.children()[0])}),element.on("mousedown",scope.events.mousedown=function(event,eventData){eventData&&angular.extend(event,eventData),event.stopPropagation()})}else{element.on("change blur",scope.events.change=scope.events.blur=function(){_isReadonly||ngModel.$setViewValue(_compileHtml())}),element.on("keydown",scope.events.keydown=function(event,eventData){if(eventData&&angular.extend(event,eventData),9===event.keyCode){var start=this.selectionStart,end=this.selectionEnd,value=element.val();if(event.shiftKey){var _linebreak=value.lastIndexOf("\n",start),_tab=value.lastIndexOf("\t",start);-1!==_tab&&_tab>=_linebreak&&(element.val(value.substring(0,_tab)+value.substring(_tab+1)),this.selectionStart=this.selectionEnd=start-1)}else element.val(value.substring(0,start)+"\t"+value.substring(end)),this.selectionStart=this.selectionEnd=start+1;event.preventDefault()}})
;var _repeat=function(string,n){for(var result="",_n=0;_n<n;_n++)result+=string;return result},forEach=function(array,callback,scope){for(var i=0;i<array.length;i++)callback.call(scope,i,array[i])},recursiveListFormat=function(listNode,tablevel){var _html="",_subnodes=listNode.childNodes;return tablevel++,_html+=_repeat("\t",tablevel-1)+listNode.outerHTML.substring(0,4),forEach(_subnodes,function(index,node){var nodeName=node.nodeName.toLowerCase();return"#comment"===nodeName?void(_html+="\x3c!--"+node.nodeValue+"--\x3e"):"#text"===nodeName?void(_html+=node.textContent):void(node.outerHTML&&(_html+="ul"===nodeName||"ol"===nodeName?"\n"+recursiveListFormat(node,tablevel):"\n"+_repeat("\t",tablevel)+node.outerHTML))}),_html+="\n"+_repeat("\t",tablevel-1)+listNode.outerHTML.substring(listNode.outerHTML.lastIndexOf("<"))};ngModel.$formatters.unshift(function(htmlValue){var _nodes=angular.element("<div>"+htmlValue+"</div>")[0].childNodes;return _nodes.length>0&&(htmlValue="",forEach(_nodes,function(index,node){var nodeName=node.nodeName.toLowerCase();return"#comment"===nodeName?void(htmlValue+="\x3c!--"+node.nodeValue+"--\x3e"):"#text"===nodeName?void(htmlValue+=node.textContent):void(node.outerHTML&&(htmlValue.length>0&&(htmlValue+="\n"),htmlValue+="ul"===nodeName||"ol"===nodeName?""+recursiveListFormat(node,0):""+node.outerHTML))})),htmlValue})}var _renderTimeout,fileDropHandler=function(event,eventData){if(eventData&&angular.extend(event,eventData),!dropFired&&!_isReadonly){dropFired=!0;var dataTransfer;dataTransfer=event.originalEvent?event.originalEvent.dataTransfer:event.dataTransfer,scope.$emit("ta-drop-event",this,event,dataTransfer),$timeout(function(){dropFired=!1,_setViewValue(void 0,void 0,!0)},100)}},_renderInProgress=!1;ngModel.$render=function(){if(!_renderInProgress){_renderInProgress=!0;var val=ngModel.$viewValue||"";_skipRender||(_isContentEditable&&_focussed&&(element.removeClass("placeholder-text"),_renderTimeout&&$timeout.cancel(_renderTimeout),_renderTimeout=$timeout(function(){_focussed||(element[0].focus(),taSelection.setSelectionToElementEnd(element.children()[element.children().length-1])),_renderTimeout=void 0},1)),_isContentEditable?(_setInnerHTML(attrs.placeholder?""===val?_defaultVal:val:""===val?_defaultVal:val),_isReadonly?element.off("drop",fileDropHandler):(_reApplyOnSelectorHandlers(),element.on("drop",fileDropHandler))):"textarea"!==element[0].tagName.toLowerCase()&&"input"!==element[0].tagName.toLowerCase()?_setInnerHTML(taApplyCustomRenderers(val)):element.val(val)),_isContentEditable&&attrs.placeholder&&(""===val?_focussed?element.removeClass("placeholder-text"):element.addClass("placeholder-text"):element.removeClass("placeholder-text")),_renderInProgress=_skipRender=!1}},attrs.taReadonly&&(_isReadonly=scope.$eval(attrs.taReadonly),_isReadonly?(element.addClass("ta-readonly"),"textarea"!==element[0].tagName.toLowerCase()&&"input"!==element[0].tagName.toLowerCase()||element.attr("disabled","disabled"),void 0!==element.attr("contenteditable")&&element.attr("contenteditable")&&element.removeAttr("contenteditable")):(element.removeClass("ta-readonly"),"textarea"===element[0].tagName.toLowerCase()||"input"===element[0].tagName.toLowerCase()?element.removeAttr("disabled"):_isContentEditable&&element.attr("contenteditable","true")),scope.$watch(attrs.taReadonly,function(newVal,oldVal){oldVal!==newVal&&(newVal?(element.addClass("ta-readonly"),"textarea"!==element[0].tagName.toLowerCase()&&"input"!==element[0].tagName.toLowerCase()||element.attr("disabled","disabled"),void 0!==element.attr("contenteditable")&&element.attr("contenteditable")&&element.removeAttr("contenteditable"),angular.forEach(taSelectableElements,function(selector){element.find(selector).on("click",selectorClickHandler)}),element.off("drop",fileDropHandler)):(element.removeClass("ta-readonly"),"textarea"===element[0].tagName.toLowerCase()||"input"===element[0].tagName.toLowerCase()?element.removeAttr("disabled"):_isContentEditable&&element.attr("contenteditable","true"),angular.forEach(taSelectableElements,function(selector){element.find(selector).off("click",selectorClickHandler)}),element.on("drop",fileDropHandler)),_isReadonly=newVal)})),_isContentEditable&&!_isReadonly&&(angular.forEach(taSelectableElements,function(selector){element.find(selector).on("click",selectorClickHandler)}),element.on("drop",fileDropHandler))}}}]);var dropFired=!1,textAngular=angular.module("textAngular",["ngSanitize","textAngularSetup","textAngular.factories","textAngular.DOM","textAngular.validators","textAngular.taBind"]);textAngular.config([function(){angular.forEach(taTools,function(value,key){delete taTools[key]})}]),textAngular.directive("textAngular",["$compile","$timeout","taOptions","taSelection","taExecCommand","textAngularManager","$document","$animate","$log","$q","$parse",function($compile,$timeout,taOptions,taSelection,taExecCommand,textAngularManager,$document,$animate,$log,$q,$parse){return{require:"?ngModel",scope:{},restrict:"EA",priority:2,link:function(scope,element,attrs,ngModel){var _keydown,_keyup,_keypress,_mouseup,_focusin,_focusout,_originalContents,_editorFunctions,_taExecCommand,_resizeMouseDown,_updateSelectedStylesTimeout,_resizeTimeout,_serial=attrs.serial?attrs.serial:Math.floor(1e16*Math.random());scope._name=attrs.name?attrs.name:"textAngularEditor"+_serial;var oneEvent=function(_element,event,action){$timeout(function(){_element.one(event,action)},100)};if(_taExecCommand=taExecCommand(attrs.taDefaultWrap),angular.extend(scope,angular.copy(taOptions),{wrapSelection:function(command,opt,isSelectableElementTool){"undo"===command.toLowerCase()?scope["$undoTaBindtaTextElement"+_serial]():"redo"===command.toLowerCase()?scope["$redoTaBindtaTextElement"+_serial]():(_taExecCommand(command,!1,opt,scope.defaultTagAttributes),isSelectableElementTool&&scope["reApplyOnSelectorHandlerstaTextElement"+_serial](),scope.displayElements.text[0].focus())},showHtml:scope.$eval(attrs.taShowHtml)||!1}),attrs.taFocussedClass&&(scope.classes.focussed=attrs.taFocussedClass),attrs.taTextEditorClass&&(scope.classes.textEditor=attrs.taTextEditorClass),attrs.taHtmlEditorClass&&(scope.classes.htmlEditor=attrs.taHtmlEditorClass),attrs.taDefaultTagAttributes)try{angular.extend(scope.defaultTagAttributes,angular.fromJson(attrs.taDefaultTagAttributes))}catch(error){$log.error(error)}attrs.taTextEditorSetup&&(scope.setup.textEditorSetup=scope.$parent.$eval(attrs.taTextEditorSetup)),attrs.taHtmlEditorSetup&&(scope.setup.htmlEditorSetup=scope.$parent.$eval(attrs.taHtmlEditorSetup)),attrs.taFileDrop?scope.fileDropHandler=scope.$parent.$eval(attrs.taFileDrop):scope.fileDropHandler=scope.defaultFileDropHandler,_originalContents=element[0].innerHTML,element[0].innerHTML="",scope.displayElements={forminput:angular.element("<input type='hidden' tabindex='-1' style='display: none;'>"),html:angular.element("<textarea></textarea>"),text:angular.element("<div></div>"),scrollWindow:angular.element("<div class='ta-scroll-window'></div>"),popover:angular.element('<div class="popover fade bottom" style="max-width: none; width: 305px;"></div>'),popoverArrow:angular.element('<div class="arrow"></div>'),popoverContainer:angular.element('<div class="popover-content"></div>'),resize:{overlay:angular.element('<div class="ta-resizer-handle-overlay"></div>'),background:angular.element('<div class="ta-resizer-handle-background"></div>'),anchors:[angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-tl"></div>'),angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-tr"></div>'),angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-bl"></div>'),angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-br"></div>')],info:angular.element('<div class="ta-resizer-handle-info"></div>')}},scope.displayElements.popover.append(scope.displayElements.popoverArrow),scope.displayElements.popover.append(scope.displayElements.popoverContainer),scope.displayElements.scrollWindow.append(scope.displayElements.popover),scope.displayElements.popover.on("mousedown",function(e,eventData){return eventData&&angular.extend(e,eventData),e.preventDefault(),!1}),scope.handlePopoverEvents=function(){"block"===scope.displayElements.popover.css("display")&&(_resizeTimeout&&$timeout.cancel(_resizeTimeout),_resizeTimeout=$timeout(function(){scope.reflowPopover(scope.resizeElement),scope.reflowResizeOverlay(scope.resizeElement)},100))},angular.element(window).on("resize",scope.handlePopoverEvents),angular.element(window).on("scroll",scope.handlePopoverEvents);var isScrollable=function(node){var cs,_notScrollable={vertical:!1,horizontal:!1};try{if(null===(cs=window.getComputedStyle(node)))return _notScrollable}catch(e){return _notScrollable}var overflowY=cs["overflow-y"],overflowX=cs["overflow-x"];return{vertical:("scroll"===overflowY||"auto"===overflowY)&&node.scrollHeight>node.clientHeight,horizontal:("scroll"===overflowX||"auto"===overflowX)&&node.scrollWidth>node.clientWidth}};scope.getScrollTop=function(_el,bAddListener){var scrollTop=_el.scrollTop;return void 0===scrollTop&&(scrollTop=0),bAddListener&&isScrollable(_el).vertical&&(_el.removeEventListener("scroll",scope._scrollListener,!1),_el.addEventListener("scroll",scope._scrollListener,!1)),0!==scrollTop?{node:_el.nodeName,top:scrollTop}:_el.parentNode?scope.getScrollTop(_el.parentNode,bAddListener):{node:"<none>",top:0}},scope.showPopover=function(_el){scope.getScrollTop(scope.displayElements.scrollWindow[0],!0),scope.displayElements.popover.css("display","block"),$timeout(function(){scope.displayElements.resize.overlay.css("display","block")}),scope.resizeElement=_el,scope.reflowPopover(_el),$animate.addClass(scope.displayElements.popover,"in"),oneEvent($document.find("body"),"click keyup",function(){scope.hidePopover()})},scope._scrollListener=function(e,eventData){scope.handlePopoverEvents()},scope.reflowPopover=function(_el){var scrollTop=scope.getScrollTop(scope.displayElements.scrollWindow[0],!1);_el[0].offsetTop-scrollTop.top<51?(scope.displayElements.popover.css("top",_el[0].offsetTop+_el[0].offsetHeight+scope.displayElements.scrollWindow[0].scrollTop+"px"),scope.displayElements.popover.removeClass("top").addClass("bottom")):(scope.displayElements.popover.css("top",_el[0].offsetTop-54+scope.displayElements.scrollWindow[0].scrollTop+"px"),scope.displayElements.popover.removeClass("bottom").addClass("top"));var _maxLeft=scope.displayElements.text[0].offsetWidth-scope.displayElements.popover[0].offsetWidth,_targetLeft=_el[0].offsetLeft+_el[0].offsetWidth/2-scope.displayElements.popover[0].offsetWidth/2,_rleft=Math.max(0,Math.min(_maxLeft,_targetLeft)),_marginLeft=Math.min(_targetLeft,Math.max(0,_targetLeft-_maxLeft))-11;_rleft+=window.scrollX,_marginLeft-=window.scrollX,scope.displayElements.popover.css("left",_rleft+"px"),scope.displayElements.popoverArrow.css("margin-left",_marginLeft+"px")},scope.hidePopover=function(){scope.displayElements.popover.css("display","none"),scope.displayElements.popoverContainer.attr("style",""),scope.displayElements.popoverContainer.attr("class","popover-content"),scope.displayElements.popover.removeClass("in"),scope.displayElements.resize.overlay.css("display","none")},scope.displayElements.resize.overlay.append(scope.displayElements.resize.background),angular.forEach(scope.displayElements.resize.anchors,function(anchor){scope.displayElements.resize.overlay.append(anchor)}),scope.displayElements.resize.overlay.append(scope.displayElements.resize.info),scope.displayElements.scrollWindow.append(scope.displayElements.resize.overlay),scope.displayElements.resize.background.on("click",function(e){scope.displayElements.text[0].focus()}),scope.reflowResizeOverlay=function(_el){_el=angular.element(_el)[0],scope.displayElements.resize.overlay.css({display:"block",left:_el.offsetLeft-5+"px",top:_el.offsetTop-5+"px",width:_el.offsetWidth+10+"px",height:_el.offsetHeight+10+"px"}),scope.displayElements.resize.info.text(_el.offsetWidth+" x "+_el.offsetHeight)},scope.showResizeOverlay=function(_el){var _body=$document.find("body");_resizeMouseDown=function(event){var startPosition={width:parseInt(_el.attr("width")),height:parseInt(_el.attr("height")),x:event.clientX,y:event.clientY};(void 0===startPosition.width||isNaN(startPosition.width))&&(startPosition.width=_el[0].offsetWidth),(void 0===startPosition.height||isNaN(startPosition.height))&&(startPosition.height=_el[0].offsetHeight),scope.hidePopover();var ratio=startPosition.height/startPosition.width,mousemove=function(event){function roundedMaxVal(val){return Math.round(Math.max(0,val))}var pos={x:Math.max(0,startPosition.width+(event.clientX-startPosition.x)),y:Math.max(0,startPosition.height+(event.clientY-startPosition.y))},bForceAspectRatio=void 0!==attrs.taResizeForceAspectRatio,bFlipKeyBinding=attrs.taResizeMaintainAspectRatio;if(bForceAspectRatio||bFlipKeyBinding&&!event.shiftKey){var newRatio=pos.y/pos.x;pos.x=ratio>newRatio?pos.x:pos.y/ratio,pos.y=ratio>newRatio?pos.x*ratio:pos.y}var el=angular.element(_el);el.css("height",roundedMaxVal(pos.y)+"px"),el.css("width",roundedMaxVal(pos.x)+"px"),scope.reflowResizeOverlay(_el)};_body.on("mousemove",mousemove),oneEvent(_body,"mouseup",function(event){event.preventDefault(),event.stopPropagation(),_body.off("mousemove",mousemove),scope.$apply(function(){scope.hidePopover(),scope.updateTaBindtaTextElement()},100)}),event.stopPropagation(),event.preventDefault()},scope.displayElements.resize.anchors[3].off("mousedown"),scope.displayElements.resize.anchors[3].on("mousedown",_resizeMouseDown),scope.reflowResizeOverlay(_el),oneEvent(_body,"click",function(){scope.hideResizeOverlay()})},scope.hideResizeOverlay=function(){scope.displayElements.resize.anchors[3].off("mousedown",_resizeMouseDown),scope.displayElements.resize.overlay.css("display","none")},scope.setup.htmlEditorSetup(scope.displayElements.html),scope.setup.textEditorSetup(scope.displayElements.text),scope.displayElements.html.attr({id:"taHtmlElement"+_serial,"ng-show":"showHtml","ta-bind":"ta-bind","ng-model":"html","ng-model-options":element.attr("ng-model-options")}),scope.displayElements.text.attr({id:"taTextElement"+_serial,contentEditable:"true","ta-bind":"ta-bind","ng-model":"html","ng-model-options":element.attr("ng-model-options")}),scope.displayElements.scrollWindow.attr({"ng-hide":"showHtml"}),attrs.taDefaultWrap&&scope.displayElements.text.attr("ta-default-wrap",attrs.taDefaultWrap),attrs.taUnsafeSanitizer&&(scope.displayElements.text.attr("ta-unsafe-sanitizer",attrs.taUnsafeSanitizer),scope.displayElements.html.attr("ta-unsafe-sanitizer",attrs.taUnsafeSanitizer)),attrs.taKeepStyles&&(scope.displayElements.text.attr("ta-keep-styles",attrs.taKeepStyles),scope.displayElements.html.attr("ta-keep-styles",attrs.taKeepStyles)),scope.displayElements.scrollWindow.append(scope.displayElements.text),element.append(scope.displayElements.scrollWindow),element.append(scope.displayElements.html),scope.displayElements.forminput.attr("name",scope._name),element.append(scope.displayElements.forminput),attrs.tabindex&&(element.removeAttr("tabindex"),scope.displayElements.text.attr("tabindex",attrs.tabindex),scope.displayElements.html.attr("tabindex",attrs.tabindex)),attrs.placeholder&&(scope.displayElements.text.attr("placeholder",attrs.placeholder),scope.displayElements.html.attr("placeholder",attrs.placeholder)),attrs.taDisabled&&(scope.displayElements.text.attr("ta-readonly","disabled"),scope.displayElements.html.attr("ta-readonly","disabled"),scope.disabled=scope.$parent.$eval(attrs.taDisabled),scope.$parent.$watch(attrs.taDisabled,function(newVal){scope.disabled=newVal,scope.disabled?element.addClass(scope.classes.disabled):element.removeClass(scope.classes.disabled)})),attrs.taPaste&&(scope._pasteHandler=function(_html){return $parse(attrs.taPaste)(scope.$parent,{$html:_html})},scope.displayElements.text.attr("ta-paste","_pasteHandler($html)")),$compile(scope.displayElements.scrollWindow)(scope),$compile(scope.displayElements.html)(scope),scope.updateTaBindtaTextElement=scope["updateTaBindtaTextElement"+_serial],scope.updateTaBindtaHtmlElement=scope["updateTaBindtaHtmlElement"+_serial],element.addClass("ta-root"),scope.displayElements.scrollWindow.addClass("ta-text ta-editor "+scope.classes.textEditor),scope.displayElements.html.addClass("ta-html ta-editor "+scope.classes.htmlEditor);var testAndSet=function(choice,beforeState){beforeState!==$document[0].queryCommandState(choice)&&$document[0].execCommand(choice,!1,null)};scope._actionRunning=!1;var _savedSelection=!1;if(scope.startAction=function(){var _beforeStateBold=!1,_beforeStateItalic=!1,_beforeStateUnderline=!1,_beforeStateStrikethough=!1;return scope._actionRunning=!0,_beforeStateBold=$document[0].queryCommandState("bold"),_beforeStateItalic=$document[0].queryCommandState("italic"),_beforeStateUnderline=$document[0].queryCommandState("underline"),_beforeStateStrikethough=$document[0].queryCommandState("strikeThrough"),_savedSelection=rangy.saveSelection(),testAndSet("bold",_beforeStateBold),testAndSet("italic",_beforeStateItalic),testAndSet("underline",_beforeStateUnderline),testAndSet("strikeThrough",_beforeStateStrikethough),function(){_savedSelection&&rangy.restoreSelection(_savedSelection)}},scope.endAction=function(){scope._actionRunning=!1,_savedSelection&&(scope.showHtml?scope.displayElements.html[0].focus():scope.displayElements.text[0].focus(),rangy.removeMarkers(_savedSelection)),_savedSelection=!1,scope.updateSelectedStyles(),scope.showHtml||scope["updateTaBindtaTextElement"+_serial]()},_focusin=function(e){scope.focussed=!0,element.addClass(scope.classes.focussed),_editorFunctions.focus(),element.triggerHandler("focus"),scope.updateSelectedStyles&&!scope._bUpdateSelectedStyles&&$timeout(function(){scope.updateSelectedStyles()},0)},scope.displayElements.html.on("focus",_focusin),scope.displayElements.text.on("focus",_focusin),_focusout=function(e){return scope._actionRunning||$document[0].activeElement===scope.displayElements.html[0]||$document[0].activeElement===scope.displayElements.text[0]||(element.removeClass(scope.classes.focussed),_editorFunctions.unfocus(),$timeout(function(){scope._bUpdateSelectedStyles=!1,element.triggerHandler("blur"),scope.focussed=!1},0)),e.preventDefault(),!1},scope.displayElements.html.on("blur",_focusout),scope.displayElements.text.on("blur",_focusout),scope.displayElements.text.on("paste",function(event){element.triggerHandler("paste",event)}),scope.queryFormatBlockState=function(command){return!scope.showHtml&&command.toLowerCase()===$document[0].queryCommandValue("formatBlock").toLowerCase()},scope.queryCommandState=function(command){return scope.showHtml?"":$document[0].queryCommandState(command)},scope.switchView=function(){scope.showHtml=!scope.showHtml,$animate.enabled(!1,scope.displayElements.html),$animate.enabled(!1,scope.displayElements.text),scope.showHtml?$timeout(function(){return $animate.enabled(!0,scope.displayElements.html),$animate.enabled(!0,scope.displayElements.text),scope.displayElements.html[0].focus()},100):$timeout(function(){return $animate.enabled(!0,scope.displayElements.html),$animate.enabled(!0,scope.displayElements.text),scope.displayElements.text[0].focus()},100)},attrs.ngModel){var _firstRun=!0;ngModel.$render=function(){if(_firstRun){_firstRun=!1;var _initialValue=scope.$parent.$eval(attrs.ngModel);void 0!==_initialValue&&null!==_initialValue||!_originalContents||""===_originalContents||ngModel.$setViewValue(_originalContents)}scope.displayElements.forminput.val(ngModel.$viewValue),scope.html=ngModel.$viewValue||""},element.attr("required")&&(ngModel.$validators.required=function(modelValue,viewValue){var value=modelValue||viewValue;return!(!value||""===value.trim())})}else scope.displayElements.forminput.val(_originalContents),scope.html=_originalContents;if(scope.$watch("html",function(newValue,oldValue){newValue!==oldValue&&(attrs.ngModel&&ngModel.$viewValue!==newValue&&ngModel.$setViewValue(newValue),scope.displayElements.forminput.val(newValue))}),attrs.taTargetToolbars)_editorFunctions=textAngularManager.registerEditor(scope._name,scope,attrs.taTargetToolbars.split(","));else{var _toolbar=angular.element('<div text-angular-toolbar name="textAngularToolbar'+_serial+'">');attrs.taToolbar&&_toolbar.attr("ta-toolbar",attrs.taToolbar),attrs.taToolbarClass&&_toolbar.attr("ta-toolbar-class",attrs.taToolbarClass),attrs.taToolbarGroupClass&&_toolbar.attr("ta-toolbar-group-class",attrs.taToolbarGroupClass),attrs.taToolbarButtonClass&&_toolbar.attr("ta-toolbar-button-class",attrs.taToolbarButtonClass),attrs.taToolbarActiveButtonClass&&_toolbar.attr("ta-toolbar-active-button-class",attrs.taToolbarActiveButtonClass),attrs.taFocussedClass&&_toolbar.attr("ta-focussed-class",attrs.taFocussedClass),element.prepend(_toolbar),$compile(_toolbar)(scope.$parent),_editorFunctions=textAngularManager.registerEditor(scope._name,scope,["textAngularToolbar"+_serial])}scope.$on("$destroy",function(){textAngularManager.unregisterEditor(scope._name),angular.element(window).off("blur"),angular.element(window).off("resize",scope.handlePopoverEvents),angular.element(window).off("scroll",scope.handlePopoverEvents)}),scope.$on("ta-element-select",function(event,element){_editorFunctions.triggerElementSelect(event,element)&&scope["reApplyOnSelectorHandlerstaTextElement"+_serial]()}),scope.$on("ta-drop-event",function(event,element,dropEvent,dataTransfer){dataTransfer&&dataTransfer.files&&dataTransfer.files.length>0?(scope.displayElements.text[0].focus(),taSelection.setSelectionToElementEnd(dropEvent.target),angular.forEach(dataTransfer.files,function(file){try{$q.when(scope.fileDropHandler(file,scope.wrapSelection)||scope.fileDropHandler!==scope.defaultFileDropHandler&&$q.when(scope.defaultFileDropHandler(file,scope.wrapSelection))).then(function(){scope["updateTaBindtaTextElement"+_serial]()})}catch(error){$log.error(error)}}),dropEvent.preventDefault(),dropEvent.stopPropagation()):$timeout(function(){scope["updateTaBindtaTextElement"+_serial]()},0)}),scope._bUpdateSelectedStyles=!1,angular.element(window).on("blur",function(){scope._bUpdateSelectedStyles=!1,scope.focussed=!1}),scope.updateSelectedStyles=function(){var _selection;_updateSelectedStylesTimeout&&$timeout.cancel(_updateSelectedStylesTimeout),void 0!==(_selection=taSelection.getSelectionElement())&&_selection.parentNode!==scope.displayElements.text[0]?_editorFunctions.updateSelectedStyles(angular.element(_selection)):_editorFunctions.updateSelectedStyles(),scope._bUpdateSelectedStyles&&(_updateSelectedStylesTimeout=$timeout(scope.updateSelectedStyles,200))},_keydown=function(){if(!scope.focussed)return void(scope._bUpdateSelectedStyles=!1);scope._bUpdateSelectedStyles||(scope._bUpdateSelectedStyles=!0,scope.$apply(function(){scope.updateSelectedStyles()}))},scope.displayElements.html.on("keydown",_keydown),scope.displayElements.text.on("keydown",_keydown),_keyup=function(){scope._bUpdateSelectedStyles=!1},scope.displayElements.html.on("keyup",_keyup),scope.displayElements.text.on("keyup",_keyup),_keypress=function(event,eventData){if(taSelection.getSelection){var _selection=taSelection.getSelection();taSelection.getSelectionElement()&&"a"===taSelection.getSelectionElement().nodeName.toLowerCase()&&(3===_selection.start.element.nodeType&&_selection.start.element.textContent.length===_selection.end.offset&&taSelection.setSelectionAfterElement(taSelection.getSelectionElement()),3===_selection.start.element.nodeType&&0===_selection.start.offset&&taSelection.setSelectionBeforeElement(taSelection.getSelectionElement()))}eventData&&angular.extend(event,eventData),scope.$apply(function(){if(_editorFunctions.sendKeyCommand(event))return scope._bUpdateSelectedStyles||scope.updateSelectedStyles(),event.preventDefault(),!1})},scope.displayElements.html.on("keypress",_keypress),scope.displayElements.text.on("keypress",_keypress),_mouseup=function(){scope._bUpdateSelectedStyles=!1,$timeout(function(){scope.updateSelectedStyles()},0)},scope.displayElements.html.on("mouseup",_mouseup),scope.displayElements.text.on("mouseup",_mouseup)}}}]),textAngular.service("textAngularManager",["taToolExecuteAction","taTools","taRegisterTool","$interval","$rootScope","$log",function(taToolExecuteAction,taTools,taRegisterTool,$interval,$rootScope,$log){var triggerIntervalTimer,toolbars={},editors={},timeRecentModification=0,updateStyles=function(selectedElement){angular.forEach(editors,function(editor){editor.editorFunctions.updateSelectedStyles(selectedElement)})},setupTriggerUpdateStyles=function(){timeRecentModification=Date.now(),triggerIntervalTimer=$interval(function(){updateStyles(),triggerIntervalTimer=void 0},50,1)};$rootScope.$on("destroy",function(){triggerIntervalTimer&&($interval.cancel(triggerIntervalTimer),triggerIntervalTimer=void 0)});var touchModification=function(){Math.abs(Date.now()-timeRecentModification)>50&&setupTriggerUpdateStyles()};return{registerEditor:function(editorName,editorScope,targetToolbars){if(!editorName||""===editorName)throw"textAngular Error: An editor requires a name";if(!editorScope)throw"textAngular Error: An editor requires a scope";if(editors[editorName])throw'textAngular Error: An Editor with name "'+editorName+'" already exists';return editors[editorName]={scope:editorScope,toolbars:targetToolbars,toolbarScopes:[],_registerToolbarScope:function(toolbarScope){this.toolbars.indexOf(toolbarScope.name)>=0&&this.toolbarScopes.push(toolbarScope)},editorFunctions:{disable:function(){angular.forEach(editors[editorName].toolbarScopes,function(toolbarScope){toolbarScope.disabled=!0})},enable:function(){angular.forEach(editors[editorName].toolbarScopes,function(toolbarScope){toolbarScope.disabled=!1})},focus:function(){angular.forEach(editors[editorName].toolbarScopes,function(toolbarScope){toolbarScope._parent=editorScope,toolbarScope.disabled=!1,toolbarScope.focussed=!0}),editorScope.focussed=!0},unfocus:function(){angular.forEach(editors[editorName].toolbarScopes,function(toolbarScope){toolbarScope.disabled=!0,toolbarScope.focussed=!1}),editorScope.focussed=!1},updateSelectedStyles:function(selectedElement){angular.forEach(editors[editorName].toolbarScopes,function(toolbarScope){angular.forEach(toolbarScope.tools,function(toolScope){toolScope.activeState&&(toolbarScope._parent=editorScope,toolScope.active=toolScope.activeState(selectedElement))})})},sendKeyCommand:function(event){var result=!1;return(event.ctrlKey||event.metaKey||event.specialKey)&&angular.forEach(taTools,function(tool,name){if(tool.commandKeyCode&&(tool.commandKeyCode===event.which||tool.commandKeyCode===event.specialKey))for(var _t=0;_t<editors[editorName].toolbarScopes.length;_t++)if(void 0!==editors[editorName].toolbarScopes[_t].tools[name]){taToolExecuteAction.call(editors[editorName].toolbarScopes[_t].tools[name],editorScope),result=!0;break}}),result},triggerElementSelect:function(event,element){var elementHasAttrs=function(_element,attrs){for(var result=!0,i=0;i<attrs.length;i++)result=result&&_element.attr(attrs[i]);return result},workerTools=[],unfilteredTools={},result=!1;element=angular.element(element);var onlyWithAttrsFilter=!1;if(angular.forEach(taTools,function(tool,name){tool.onElementSelect&&tool.onElementSelect.element&&tool.onElementSelect.element.toLowerCase()===element[0].tagName.toLowerCase()&&(!tool.onElementSelect.filter||tool.onElementSelect.filter(element))&&(onlyWithAttrsFilter=onlyWithAttrsFilter||angular.isArray(tool.onElementSelect.onlyWithAttrs)&&elementHasAttrs(element,tool.onElementSelect.onlyWithAttrs),tool.onElementSelect.onlyWithAttrs&&!elementHasAttrs(element,tool.onElementSelect.onlyWithAttrs)||(unfilteredTools[name]=tool))}),onlyWithAttrsFilter?(angular.forEach(unfilteredTools,function(tool,name){tool.onElementSelect.onlyWithAttrs&&elementHasAttrs(element,tool.onElementSelect.onlyWithAttrs)&&workerTools.push({name:name,tool:tool})}),workerTools.sort(function(a,b){return b.tool.onElementSelect.onlyWithAttrs.length-a.tool.onElementSelect.onlyWithAttrs.length})):angular.forEach(unfilteredTools,function(tool,name){workerTools.push({name:name,tool:tool})}),workerTools.length>0)for(var _i=0;_i<workerTools.length;_i++){for(var tool=workerTools[_i].tool,name=workerTools[_i].name,_t=0;_t<editors[editorName].toolbarScopes.length;_t++)if(void 0!==editors[editorName].toolbarScopes[_t].tools[name]){tool.onElementSelect.action.call(editors[editorName].toolbarScopes[_t].tools[name],event,element,editorScope),result=!0;break}if(result)break}return result}}},angular.forEach(targetToolbars,function(_name){toolbars[_name]&&editors[editorName].toolbarScopes.push(toolbars[_name])}),touchModification(),editors[editorName].editorFunctions},retrieveEditor:function(name){return editors[name]},unregisterEditor:function(name){delete editors[name],touchModification()},registerToolbar:function(toolbarScope){if(!toolbarScope)throw"textAngular Error: A toolbar requires a scope";if(!toolbarScope.name||""===toolbarScope.name)throw"textAngular Error: A toolbar requires a name";if(toolbars[toolbarScope.name])throw'textAngular Error: A toolbar with name "'+toolbarScope.name+'" already exists';toolbars[toolbarScope.name]=toolbarScope,angular.forEach(editors,function(_editor){_editor._registerToolbarScope(toolbarScope)}),touchModification()},retrieveToolbar:function(name){return toolbars[name]},retrieveToolbarsViaEditor:function(name){var result=[],_this=this;return angular.forEach(this.retrieveEditor(name).toolbars,function(name){result.push(_this.retrieveToolbar(name))}),result},unregisterToolbar:function(name){delete toolbars[name],touchModification()},updateToolsDisplay:function(newTaTools){var _this=this;angular.forEach(newTaTools,function(_newTool,key){_this.updateToolDisplay(key,_newTool)})},resetToolsDisplay:function(){var _this=this;angular.forEach(taTools,function(_newTool,key){_this.resetToolDisplay(key)}),touchModification()},updateToolDisplay:function(toolKey,_newTool){var _this=this;angular.forEach(toolbars,function(toolbarScope,toolbarKey){_this.updateToolbarToolDisplay(toolbarKey,toolKey,_newTool)}),touchModification()},resetToolDisplay:function(toolKey){var _this=this;angular.forEach(toolbars,function(toolbarScope,toolbarKey){_this.resetToolbarToolDisplay(toolbarKey,toolKey)}),touchModification()},updateToolbarToolDisplay:function(toolbarKey,toolKey,_newTool){if(!toolbars[toolbarKey])throw'textAngular Error: No Toolbar with name "'+toolbarKey+'" exists';toolbars[toolbarKey].updateToolDisplay(toolKey,_newTool)},resetToolbarToolDisplay:function(toolbarKey,toolKey){if(!toolbars[toolbarKey])throw'textAngular Error: No Toolbar with name "'+toolbarKey+'" exists';toolbars[toolbarKey].updateToolDisplay(toolKey,taTools[toolKey],!0)},removeTool:function(toolKey){delete taTools[toolKey],angular.forEach(toolbars,function(toolbarScope){delete toolbarScope.tools[toolKey];for(var i=0;i<toolbarScope.toolbar.length;i++){for(var toolbarIndex,j=0;j<toolbarScope.toolbar[i].length;j++){if(toolbarScope.toolbar[i][j]===toolKey){toolbarIndex={group:i,index:j};break}if(void 0!==toolbarIndex)break}void 0!==toolbarIndex&&(toolbarScope.toolbar[toolbarIndex.group].slice(toolbarIndex.index,1),toolbarScope._$element.children().eq(toolbarIndex.group).children().eq(toolbarIndex.index).remove())}}),touchModification()},addTool:function(toolKey,toolDefinition,group,index){taRegisterTool(toolKey,toolDefinition),angular.forEach(toolbars,function(toolbarScope){toolbarScope.addTool(toolKey,toolDefinition,group,index)}),touchModification()},addToolToToolbar:function(toolKey,toolDefinition,toolbarKey,group,index){taRegisterTool(toolKey,toolDefinition),toolbars[toolbarKey].addTool(toolKey,toolDefinition,group,index),touchModification()},refreshEditor:function(name){if(!editors[name])throw'textAngular Error: No Editor with name "'+name+'" exists';editors[name].scope.updateTaBindtaTextElement(),
editors[name].scope.$$phase||editors[name].scope.$digest(),touchModification()},sendKeyCommand:function(scope,event){var _editor=editors[scope._name];if(_editor&&_editor.editorFunctions.sendKeyCommand(event))return scope._bUpdateSelectedStyles||scope.updateSelectedStyles(),event.preventDefault(),!1},updateStyles:updateStyles,getVersion:function(){return textAngularVersion},getToolbarScopes:function(){var tmp=[];return angular.forEach(editors,function(_editor){tmp=tmp.concat(_editor.toolbarScopes)}),tmp}}}]),textAngular.directive("textAngularToolbar",["$compile","textAngularManager","taOptions","taTools","taToolExecuteAction","$window",function($compile,textAngularManager,taOptions,taTools,taToolExecuteAction,$window){return{scope:{name:"@"},restrict:"EA",link:function(scope,element,attrs){if(!scope.name||""===scope.name)throw"textAngular Error: A toolbar requires a name";angular.extend(scope,angular.copy(taOptions)),attrs.taToolbar&&(scope.toolbar=scope.$parent.$eval(attrs.taToolbar)),attrs.taToolbarClass&&(scope.classes.toolbar=attrs.taToolbarClass),attrs.taToolbarGroupClass&&(scope.classes.toolbarGroup=attrs.taToolbarGroupClass),attrs.taToolbarButtonClass&&(scope.classes.toolbarButton=attrs.taToolbarButtonClass),attrs.taToolbarActiveButtonClass&&(scope.classes.toolbarButtonActive=attrs.taToolbarActiveButtonClass),attrs.taFocussedClass&&(scope.classes.focussed=attrs.taFocussedClass),scope.disabled=!0,scope.focussed=!1,scope._$element=element,element[0].innerHTML="",element.addClass("ta-toolbar "+scope.classes.toolbar),scope.$watch("focussed",function(){scope.focussed?element.addClass(scope.classes.focussed):element.removeClass(scope.classes.focussed)});var setupToolElement=function(toolDefinition,toolScope){var toolElement;if(toolElement=toolDefinition&&toolDefinition.display?angular.element(toolDefinition.display):angular.element("<button type='button'>"),toolDefinition&&toolDefinition.class?toolElement.addClass(toolDefinition.class):toolElement.addClass(scope.classes.toolbarButton),toolElement.attr("name",toolScope.name),toolElement.attr("ta-button","ta-button"),toolElement.attr("ng-disabled","isDisabled()"),toolElement.attr("tabindex","-1"),toolElement.attr("ng-click","executeAction()"),toolElement.attr("ng-class","displayActiveToolClass(active)"),toolDefinition&&toolDefinition.tooltiptext&&toolElement.attr("title",toolDefinition.tooltiptext),toolDefinition&&!toolDefinition.display&&!toolScope._display&&(toolElement[0].innerHTML="",toolDefinition.buttontext&&(toolElement[0].innerHTML=toolDefinition.buttontext),toolDefinition.iconclass)){var icon=angular.element("<i>"),content=toolElement[0].innerHTML;icon.addClass(toolDefinition.iconclass),toolElement[0].innerHTML="",toolElement.append(icon),content&&""!==content&&toolElement.append("&nbsp;"+content)}return toolScope._lastToolDefinition=angular.copy(toolDefinition),$compile(toolElement)(toolScope)};scope.tools={},scope._parent={disabled:!0,showHtml:!1,queryFormatBlockState:function(){return!1},queryCommandState:function(){return!1}};var defaultChildScope={$window:$window,$editor:function(){return scope._parent},isDisabled:function(){return("html"!==this.name||!scope._parent.startAction)&&("function"!=typeof this.$eval("disabled")&&this.$eval("disabled")||this.$eval("disabled()")||"html"!==this.name&&this.$editor().showHtml||this.$parent.disabled||this.$editor().disabled)},displayActiveToolClass:function(active){return active?scope.classes.toolbarButtonActive:""},executeAction:taToolExecuteAction};angular.forEach(scope.toolbar,function(group){var groupElement=angular.element("<div>");groupElement.addClass(scope.classes.toolbarGroup),angular.forEach(group,function(tool){scope.tools[tool]=angular.extend(scope.$new(!0),taTools[tool],defaultChildScope,{name:tool}),scope.tools[tool].$element=setupToolElement(taTools[tool],scope.tools[tool]),groupElement.append(scope.tools[tool].$element)}),element.append(groupElement)}),scope.updateToolDisplay=function(key,_newTool,forceNew){var toolInstance=scope.tools[key];if(toolInstance){if(toolInstance._lastToolDefinition&&!forceNew&&(_newTool=angular.extend({},toolInstance._lastToolDefinition,_newTool)),null===_newTool.buttontext&&null===_newTool.iconclass&&null===_newTool.display)throw'textAngular Error: Tool Definition for updating "'+key+'" does not have a valid display/iconclass/buttontext value';null===_newTool.buttontext&&delete _newTool.buttontext,null===_newTool.iconclass&&delete _newTool.iconclass,null===_newTool.display&&delete _newTool.display;var toolElement=setupToolElement(_newTool,toolInstance);toolInstance.$element.replaceWith(toolElement),toolInstance.$element=toolElement}},scope.addTool=function(key,_newTool,groupIndex,index){scope.tools[key]=angular.extend(scope.$new(!0),taTools[key],defaultChildScope,{name:key}),scope.tools[key].$element=setupToolElement(taTools[key],scope.tools[key]);var group;void 0===groupIndex&&(groupIndex=scope.toolbar.length-1),group=angular.element(element.children()[groupIndex]),void 0===index?(group.append(scope.tools[key].$element),scope.toolbar[groupIndex][scope.toolbar[groupIndex].length-1]=key):(group.children().eq(index).after(scope.tools[key].$element),scope.toolbar[groupIndex][index]=key)},textAngularManager.registerToolbar(scope),scope.$on("$destroy",function(){textAngularManager.unregisterToolbar(scope.name)})}}}]),textAngular.directive("textAngularVersion",["textAngularManager",function(textAngularManager){var version=textAngularManager.getVersion();return{restrict:"EA",link:function(scope,element,attrs){element.html(version)}}}]),function(window,angular,undefined){"use strict";function $SanitizeProvider(){this.$get=["$$sanitizeUri",function($$sanitizeUri){return function(html){void 0!==arguments[1]&&(arguments[1].version="taSanitize");var buf=[];return htmlParser(html,htmlSanitizeWriter(buf,function(uri,isImage){return!/^unsafe/.test($$sanitizeUri(uri,isImage))})),buf.join("")}}]}function sanitizeText(chars){var buf=[];return htmlSanitizeWriter(buf,angular.noop).chars(chars),buf.join("")}function makeMap(str){var i,obj={},items=str.split(",");for(i=0;i<items.length;i++)obj[items[i]]=!0;return obj}function htmlParser(html,handler){function parseStartTag(tag,tagName,rest,unary){if(tagName=angular.lowercase(tagName),blockElements[tagName])for(;stack.last()&&inlineElements[stack.last()];)parseEndTag("",stack.last());optionalEndTagElements[tagName]&&stack.last()==tagName&&parseEndTag("",tagName),(unary=voidElements[tagName]||!!unary)||stack.push(tagName);var attrs={};rest.replace(ATTR_REGEXP,function(match,name,doubleQuotedValue,singleQuotedValue,unquotedValue){var value=doubleQuotedValue||singleQuotedValue||unquotedValue||"";attrs[name]=decodeEntities(value)}),handler.start&&handler.start(tagName,attrs,unary)}function parseEndTag(tag,tagName){var i,pos=0;if(tagName=angular.lowercase(tagName))for(pos=stack.length-1;pos>=0&&stack[pos]!=tagName;pos--);if(pos>=0){for(i=stack.length-1;i>=pos;i--)handler.end&&handler.end(stack[i]);stack.length=pos}}"string"!=typeof html&&(html=null===html||void 0===html?"":""+html);var index,chars,match,text,stack=[],last=html;for(stack.last=function(){return stack[stack.length-1]};html;){if(text="",chars=!0,stack.last()&&specialElements[stack.last()])html=html.replace(new RegExp("([^]*)<\\s*\\/\\s*"+stack.last()+"[^>]*>","i"),function(all,text){return text=text.replace(COMMENT_REGEXP,"$1").replace(CDATA_REGEXP,"$1"),handler.chars&&handler.chars(decodeEntities(text)),""}),parseEndTag("",stack.last());else{if(WHITE_SPACE_REGEXP.test(html)){if(match=html.match(WHITE_SPACE_REGEXP)){match[0];handler.whitespace&&handler.whitespace(match[0]),html=html.replace(match[0],""),chars=!1}}else SINGLE_COMMENT_REGEXP.test(html)?(match=html.match(SINGLE_COMMENT_REGEXP))&&(handler.comment&&handler.comment(match[1]),html=html.replace(match[0],""),chars=!1):DOCTYPE_REGEXP.test(html)?(match=html.match(DOCTYPE_REGEXP))&&(html=html.replace(match[0],""),chars=!1):BEGING_END_TAGE_REGEXP.test(html)?(match=html.match(END_TAG_REGEXP))&&(html=html.substring(match[0].length),match[0].replace(END_TAG_REGEXP,parseEndTag),chars=!1):BEGIN_TAG_REGEXP.test(html)&&(match=html.match(START_TAG_REGEXP),match?(match[4]&&(html=html.substring(match[0].length),match[0].replace(START_TAG_REGEXP,parseStartTag)),chars=!1):(text+="<",html=html.substring(1)));chars&&(index=html.indexOf("<"),text+=index<0?html:html.substring(0,index),html=index<0?"":html.substring(index),handler.chars&&handler.chars(decodeEntities(text)))}if(html==last)throw $sanitizeMinErr("badparse","The sanitizer was unable to parse the following block of html: {0}",html);last=html}parseEndTag()}function decodeEntities(value){if(!value)return"";var parts=spaceRe.exec(value),spaceBefore=parts[1],spaceAfter=parts[3],content=parts[2];return content&&(hiddenPre.innerHTML=content.replace(/</g,"&lt;"),content="textContent"in hiddenPre?hiddenPre.textContent:hiddenPre.innerText),spaceBefore+content+spaceAfter}function encodeEntities(value){return value.replace(/&/g,"&amp;").replace(SURROGATE_PAIR_REGEXP,function(value){return"&#"+(1024*(value.charCodeAt(0)-55296)+(value.charCodeAt(1)-56320)+65536)+";"}).replace(NON_ALPHANUMERIC_REGEXP,function(value){var c=value.charCodeAt(0);return c<=159||173==c||c>=1536&&c<=1540||1807==c||6068==c||6069==c||c>=8204&&c<=8207||c>=8232&&c<=8239||c>=8288&&c<=8303||65279==c||c>=65520&&c<=65535?"&#"+c+";":value}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function validStyles(styleAttr){var result="",styleArray=styleAttr.split(";");return angular.forEach(styleArray,function(value){var v=value.split(":");if(2==v.length){var key=trim(angular.lowercase(v[0])),value=trim(angular.lowercase(v[1]));(("color"===key||"background-color"===key)&&(value.match(/^rgb\([0-9%,\. ]*\)$/i)||value.match(/^rgba\([0-9%,\. ]*\)$/i)||value.match(/^hsl\([0-9%,\. ]*\)$/i)||value.match(/^hsla\([0-9%,\. ]*\)$/i)||value.match(/^#[0-9a-f]{3,6}$/i)||value.match(/^[a-z]*$/i))||"text-align"===key&&("left"===value||"right"===value||"center"===value||"justify"===value)||"text-decoration"===key&&("underline"===value||"line-through"===value)||"font-weight"===key&&"bold"===value||"font-style"===key&&"italic"===value||"float"===key&&("left"===value||"right"===value||"none"===value)||"vertical-align"===key&&("baseline"===value||"sub"===value||"super"===value||"test-top"===value||"text-bottom"===value||"middle"===value||"top"===value||"bottom"===value||value.match(/[0-9]*(px|em)/)||value.match(/[0-9]+?%/))||"font-size"===key&&("xx-small"===value||"x-small"===value||"small"===value||"medium"===value||"large"===value||"x-large"===value||"xx-large"===value||"larger"===value||"smaller"===value||value.match(/[0-9]*\.?[0-9]*(px|em|rem|mm|q|cm|in|pt|pc|%)/))||("width"===key||"height"===key)&&value.match(/[0-9\.]*(px|em|rem|%)/)||"direction"===key&&value.match(/^ltr|rtl|initial|inherit$/))&&(result+=key+": "+value+";")}}),result}function validCustomTag(tag,attrs,lkey,value){return!("img"!==tag||!attrs["ta-insert-video"]||"ta-insert-video"!==lkey&&"allowfullscreen"!==lkey&&"frameborder"!==lkey&&("contenteditable"!==lkey||"false"!==value))}function htmlSanitizeWriter(buf,uriValidator){var ignore=!1,out=angular.bind(buf,buf.push);return{start:function(tag,attrs,unary){tag=angular.lowercase(tag),!ignore&&specialElements[tag]&&(ignore=tag),ignore||!0!==validElements[tag]||(out("<"),out(tag),angular.forEach(attrs,function(value,key){var lkey=angular.lowercase(key),isImage="img"===tag&&"src"===lkey||"background"===lkey;("style"===lkey&&""!==(value=validStyles(value))||validCustomTag(tag,attrs,lkey,value)||!0===validAttrs[lkey]&&(!0!==uriAttrs[lkey]||uriValidator(value,isImage)))&&(out(" "),out(key),out('="'),out(encodeEntities(value)),out('"'))}),out(unary?"/>":">"))},comment:function(com){out(com)},whitespace:function(ws){out(encodeEntities(ws))},end:function(tag){tag=angular.lowercase(tag),ignore||!0!==validElements[tag]||(out("</"),out(tag),out(">")),tag==ignore&&(ignore=!1)},chars:function(chars){ignore||out(encodeEntities(chars))}}}var $sanitizeMinErr=angular.$$minErr("$sanitize"),START_TAG_REGEXP=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,END_TAG_REGEXP=/^<\/\s*([\w:-]+)[^>]*>/,ATTR_REGEXP=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,BEGIN_TAG_REGEXP=/^</,BEGING_END_TAGE_REGEXP=/^<\//,COMMENT_REGEXP=/<!--(.*?)-->/g,SINGLE_COMMENT_REGEXP=/(^<!--.*?-->)/,DOCTYPE_REGEXP=/<!DOCTYPE([^>]*?)>/i,CDATA_REGEXP=/<!\[CDATA\[(.*?)]]>/g,SURROGATE_PAIR_REGEXP=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,NON_ALPHANUMERIC_REGEXP=/([^\#-~| |!])/g,WHITE_SPACE_REGEXP=/^(\s+)/,voidElements=makeMap("area,br,col,hr,img,wbr,input"),optionalEndTagBlockElements=makeMap("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),optionalEndTagInlineElements=makeMap("rp,rt"),optionalEndTagElements=angular.extend({},optionalEndTagInlineElements,optionalEndTagBlockElements),blockElements=angular.extend({},optionalEndTagBlockElements,makeMap("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),inlineElements=angular.extend({},optionalEndTagInlineElements,makeMap("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),svgElements=makeMap("animate,animateColor,animateMotion,animateTransform,circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,set,stop,svg,switch,text,title,tspan,use"),specialElements=makeMap("script,style"),validElements=angular.extend({},voidElements,blockElements,inlineElements,optionalEndTagElements,svgElements),uriAttrs=makeMap("background,cite,href,longdesc,src,usemap,xlink:href"),htmlAttrs=makeMap("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,id,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width"),svgAttrs=makeMap("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,attributeName,attributeType,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan"),validAttrs=angular.extend({},uriAttrs,svgAttrs,htmlAttrs),hiddenPre=document.createElement("pre"),spaceRe=/^(\s*)([\s\S]*?)(\s*)$/,trim=function(){return String.prototype.trim?function(value){return angular.isString(value)?value.trim():value}:function(value){return angular.isString(value)?value.replace(/^\s\s*/,"").replace(/\s\s*$/,""):value}}();angular.module("ngSanitize",[]).provider("$sanitize",$SanitizeProvider),angular.module("ngSanitize").filter("linky",["$sanitize",function($sanitize){return function(text,target){function addText(text){text&&html.push(sanitizeText(text))}if(!text)return text;for(var match,url,i,raw=text,html=[];match=raw.match(/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"”’]/);)url=match[0],match[2]||match[4]||(url=(match[3]?"http://":"mailto:")+url),i=match.index,addText(raw.substr(0,i)),function(url,text){html.push("<a "),angular.isDefined(target)&&html.push('target="',target,'" '),html.push('href="',url.replace(/"/g,"&quot;"),'">'),addText(text),html.push("</a>")}(url,match[0].replace(/^mailto:/,"")),raw=raw.substring(i+match[0].length);return addText(raw),$sanitize(html.join(""))}}])}(window,window.angular);var taTools={};angular.module("textAngularSetup",[]).constant("taRegisterTool",registerTextAngularTool).value("taTools",taTools).value("taOptions",{forceTextAngularSanitize:!0,keyMappings:[],toolbar:[["h1","h2","h3","h4","h5","h6","p","pre","quote"],["bold","italics","underline","strikeThrough","ul","ol","redo","undo","clear"],["justifyLeft","justifyCenter","justifyRight","justifyFull","indent","outdent"],["html","insertImage","insertLink","insertVideo","wordcount","charcount"]],classes:{focussed:"focussed",toolbar:"btn-toolbar",toolbarGroup:"btn-group",toolbarButton:"btn btn-default",toolbarButtonActive:"active",disabled:"disabled",textEditor:"form-control",htmlEditor:"form-control"},defaultTagAttributes:{a:{target:""}},setup:{textEditorSetup:function($element){},htmlEditorSetup:function($element){}},defaultFileDropHandler:function(file,insertAction){var reader=new FileReader;return"image"===file.type.substring(0,5)&&(reader.onload=function(){""!==reader.result&&insertAction("insertImage",reader.result,!0)},reader.readAsDataURL(file),!0)}}).value("taSelectableElements",["a","img"]).value("taCustomRenderers",[{selector:"img",customAttribute:"ta-insert-video",renderLogic:function(element){var iframe=angular.element("<iframe></iframe>"),attributes=element.prop("attributes");angular.forEach(attributes,function(attr){iframe.attr(attr.name,attr.value)}),iframe.attr("src",iframe.attr("ta-insert-video")),element.replaceWith(iframe)}}]).value("taTranslations",{html:{tooltip:"Toggle html / Rich Text"},heading:{tooltip:"Heading "},p:{tooltip:"Paragraph"},pre:{tooltip:"Preformatted text"},ul:{tooltip:"Unordered List"},ol:{tooltip:"Ordered List"},quote:{tooltip:"Quote/unquote selection or paragraph"},undo:{tooltip:"Undo"},redo:{tooltip:"Redo"},bold:{tooltip:"Bold"},italic:{tooltip:"Italic"},underline:{tooltip:"Underline"},strikeThrough:{tooltip:"Strikethrough"},justifyLeft:{tooltip:"Align text left"},justifyRight:{tooltip:"Align text right"},justifyFull:{tooltip:"Justify text"},justifyCenter:{tooltip:"Center"},indent:{tooltip:"Increase indent"},outdent:{tooltip:"Decrease indent"},clear:{tooltip:"Clear formatting"},insertImage:{dialogPrompt:"Please enter an image URL to insert",tooltip:"Insert image",hotkey:"the - possibly language dependent hotkey ... for some future implementation"},insertVideo:{tooltip:"Insert video",dialogPrompt:"Please enter a youtube URL to embed"},insertLink:{tooltip:"Insert / edit link",dialogPrompt:"Please enter a URL to insert"},editLink:{reLinkButton:{tooltip:"Relink"},unLinkButton:{tooltip:"Unlink"},targetToggle:{buttontext:"Open in New Window"}},wordcount:{tooltip:"Display words Count"},charcount:{tooltip:"Display characters Count"}}).factory("taToolFunctions",["$window","taTranslations",function($window,taTranslations){return{imgOnSelectAction:function(event,$element,editorScope){var finishEdit=function(){editorScope.updateTaBindtaTextElement(),editorScope.hidePopover()};event.preventDefault(),editorScope.displayElements.popover.css("width","375px");var container=editorScope.displayElements.popoverContainer;container.empty();var buttonGroup=angular.element('<div class="btn-group" style="padding-right: 6px;">'),fullButton=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">100% </button>');fullButton.on("click",function(event){event.preventDefault(),$element.css({width:"100%",height:""}),finishEdit()});var halfButton=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">50% </button>');halfButton.on("click",function(event){event.preventDefault(),$element.css({width:"50%",height:""}),finishEdit()});var quartButton=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">25% </button>');quartButton.on("click",function(event){event.preventDefault(),$element.css({width:"25%",height:""}),finishEdit()});var resetButton=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">Reset</button>');resetButton.on("click",function(event){event.preventDefault(),$element.css({width:"",height:""}),finishEdit()}),buttonGroup.append(fullButton),buttonGroup.append(halfButton),buttonGroup.append(quartButton),buttonGroup.append(resetButton),container.append(buttonGroup),buttonGroup=angular.element('<div class="btn-group" style="padding-right: 6px;">');var floatLeft=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-align-left"></i></button>');floatLeft.on("click",function(event){event.preventDefault(),$element.css("float","left"),$element.css("cssFloat","left"),$element.css("styleFloat","left"),finishEdit()});var floatRight=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-align-right"></i></button>');floatRight.on("click",function(event){event.preventDefault(),$element.css("float","right"),$element.css("cssFloat","right"),$element.css("styleFloat","right"),finishEdit()});var floatNone=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-align-justify"></i></button>');floatNone.on("click",function(event){event.preventDefault(),$element.css("float",""),$element.css("cssFloat",""),$element.css("styleFloat",""),finishEdit()}),buttonGroup.append(floatLeft),buttonGroup.append(floatNone),buttonGroup.append(floatRight),container.append(buttonGroup),buttonGroup=angular.element('<div class="btn-group">');var remove=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-trash-o"></i></button>');remove.on("click",function(event){event.preventDefault(),$element.remove(),finishEdit()}),buttonGroup.append(remove),container.append(buttonGroup),editorScope.showPopover($element),editorScope.showResizeOverlay($element)},aOnSelectAction:function(event,$element,editorScope){event.preventDefault(),editorScope.displayElements.popover.css("width","436px");var container=editorScope.displayElements.popoverContainer;container.empty(),container.css("line-height","28px");var link=angular.element('<a href="'+$element.attr("href")+'" target="_blank">'+$element.attr("href")+"</a>");link.css({display:"inline-block","max-width":"200px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap","vertical-align":"middle"}),container.append(link);var buttonGroup=angular.element('<div class="btn-group pull-right">'),reLinkButton=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on" title="'+taTranslations.editLink.reLinkButton.tooltip+'"><i class="fa fa-edit icon-edit"></i></button>');reLinkButton.on("click",function(event){event.preventDefault();var urlLink=$window.prompt(taTranslations.insertLink.dialogPrompt,$element.attr("href"));urlLink&&""!==urlLink&&"http://"!==urlLink&&($element.attr("href",urlLink),editorScope.updateTaBindtaTextElement()),editorScope.hidePopover()}),buttonGroup.append(reLinkButton);var unLinkButton=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on" title="'+taTranslations.editLink.unLinkButton.tooltip+'"><i class="fa fa-unlink icon-unlink"></i></button>');unLinkButton.on("click",function(event){event.preventDefault(),$element.replaceWith($element.contents()),editorScope.updateTaBindtaTextElement(),editorScope.hidePopover()}),buttonGroup.append(unLinkButton);var targetToggle=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on">'+taTranslations.editLink.targetToggle.buttontext+"</button>");"_blank"===$element.attr("target")&&targetToggle.addClass("active"),targetToggle.on("click",function(event){event.preventDefault(),$element.attr("target","_blank"===$element.attr("target")?"":"_blank"),targetToggle.toggleClass("active"),editorScope.updateTaBindtaTextElement()}),buttonGroup.append(targetToggle),container.append(buttonGroup),editorScope.showPopover($element)},extractYoutubeVideoId:function(url){var match=url.match(/(?:youtube(?:-nocookie)?\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/i);return match&&match[1]||null}}}]).run(["taRegisterTool","$window","taTranslations","taSelection","taToolFunctions","$sanitize","taOptions","$log",function(taRegisterTool,$window,taTranslations,taSelection,taToolFunctions,$sanitize,taOptions,$log){var gv={};if($sanitize("",gv),!0===taOptions.forceTextAngularSanitize&&"taSanitize"!==gv.version)throw angular.$$minErr("textAngular")("textAngularSetup","The textAngular-sanitize provider has been replaced by another -- have you included angular-sanitize by mistake?");taRegisterTool("html",{iconclass:"fa fa-code",tooltiptext:taTranslations.html.tooltip,action:function(){this.$editor().switchView()},activeState:function(){return this.$editor().showHtml}});var _retActiveStateFunction=function(q){return function(){return this.$editor().queryFormatBlockState(q)}},headerAction=function(){return this.$editor().wrapSelection("formatBlock","<"+this.name.toUpperCase()+">")};angular.forEach(["h1","h2","h3","h4","h5","h6"],function(h){taRegisterTool(h.toLowerCase(),{buttontext:h.toUpperCase(),tooltiptext:taTranslations.heading.tooltip+h.charAt(1),action:headerAction,activeState:_retActiveStateFunction(h.toLowerCase())})}),taRegisterTool("p",{buttontext:"P",tooltiptext:taTranslations.p.tooltip,action:function(){return this.$editor().wrapSelection("formatBlock","<P>")},activeState:function(){return this.$editor().queryFormatBlockState("p")}}),taRegisterTool("pre",{buttontext:"pre",tooltiptext:taTranslations.pre.tooltip,action:function(){return this.$editor().wrapSelection("formatBlock","<PRE>")},activeState:function(){return this.$editor().queryFormatBlockState("pre")}}),taRegisterTool("ul",{iconclass:"fa fa-list-ul",tooltiptext:taTranslations.ul.tooltip,action:function(){return this.$editor().wrapSelection("insertUnorderedList",null)},activeState:function(){return this.$editor().queryCommandState("insertUnorderedList")}}),taRegisterTool("ol",{iconclass:"fa fa-list-ol",tooltiptext:taTranslations.ol.tooltip,action:function(){return this.$editor().wrapSelection("insertOrderedList",null)},activeState:function(){return this.$editor().queryCommandState("insertOrderedList")}}),taRegisterTool("quote",{iconclass:"fa fa-quote-right",tooltiptext:taTranslations.quote.tooltip,action:function(){return this.$editor().wrapSelection("formatBlock","<BLOCKQUOTE>")},activeState:function(){return this.$editor().queryFormatBlockState("blockquote")}}),taRegisterTool("undo",{iconclass:"fa fa-undo",tooltiptext:taTranslations.undo.tooltip,action:function(){return this.$editor().wrapSelection("undo",null)}}),taRegisterTool("redo",{iconclass:"fa fa-repeat",tooltiptext:taTranslations.redo.tooltip,action:function(){return this.$editor().wrapSelection("redo",null)}}),taRegisterTool("bold",{iconclass:"fa fa-bold",tooltiptext:taTranslations.bold.tooltip,action:function(){return this.$editor().wrapSelection("bold",null)},activeState:function(){return this.$editor().queryCommandState("bold")},commandKeyCode:98}),taRegisterTool("justifyLeft",{iconclass:"fa fa-align-left",tooltiptext:taTranslations.justifyLeft.tooltip,action:function(){return this.$editor().wrapSelection("justifyLeft",null)},activeState:function(commonElement){if(commonElement&&"#document"===commonElement.nodeName)return!1;var result=!1;if(commonElement)try{result="left"===commonElement.css("text-align")||"left"===commonElement.attr("align")||"right"!==commonElement.css("text-align")&&"center"!==commonElement.css("text-align")&&"justify"!==commonElement.css("text-align")&&!this.$editor().queryCommandState("justifyRight")&&!this.$editor().queryCommandState("justifyCenter")&&!this.$editor().queryCommandState("justifyFull")}catch(e){result=!1}return result=result||this.$editor().queryCommandState("justifyLeft")}}),taRegisterTool("justifyRight",{iconclass:"fa fa-align-right",tooltiptext:taTranslations.justifyRight.tooltip,action:function(){return this.$editor().wrapSelection("justifyRight",null)},activeState:function(commonElement){if(commonElement&&"#document"===commonElement.nodeName)return!1;var result=!1;if(commonElement)try{result="right"===commonElement.css("text-align")}catch(e){result=!1}return result=result||this.$editor().queryCommandState("justifyRight")}}),taRegisterTool("justifyFull",{iconclass:"fa fa-align-justify",tooltiptext:taTranslations.justifyFull.tooltip,action:function(){return this.$editor().wrapSelection("justifyFull",null)},activeState:function(commonElement){var result=!1;if(commonElement)try{result="justify"===commonElement.css("text-align")}catch(e){result=!1}return result=result||this.$editor().queryCommandState("justifyFull")}}),taRegisterTool("justifyCenter",{iconclass:"fa fa-align-center",tooltiptext:taTranslations.justifyCenter.tooltip,action:function(){return this.$editor().wrapSelection("justifyCenter",null)},activeState:function(commonElement){if(commonElement&&"#document"===commonElement.nodeName)return!1;var result=!1;if(commonElement)try{result="center"===commonElement.css("text-align")}catch(e){result=!1}return result=result||this.$editor().queryCommandState("justifyCenter")}}),taRegisterTool("indent",{iconclass:"fa fa-indent",tooltiptext:taTranslations.indent.tooltip,action:function(){return this.$editor().wrapSelection("indent",null)},activeState:function(){return this.$editor().queryFormatBlockState("blockquote")},commandKeyCode:"TabKey"}),taRegisterTool("outdent",{iconclass:"fa fa-outdent",tooltiptext:taTranslations.outdent.tooltip,action:function(){return this.$editor().wrapSelection("outdent",null)},activeState:function(){return!1},commandKeyCode:"ShiftTabKey"}),taRegisterTool("italics",{iconclass:"fa fa-italic",tooltiptext:taTranslations.italic.tooltip,action:function(){return this.$editor().wrapSelection("italic",null)},activeState:function(){return this.$editor().queryCommandState("italic")},commandKeyCode:105}),taRegisterTool("underline",{iconclass:"fa fa-underline",tooltiptext:taTranslations.underline.tooltip,action:function(){return this.$editor().wrapSelection("underline",null)},activeState:function(){return this.$editor().queryCommandState("underline")},commandKeyCode:117}),taRegisterTool("strikeThrough",{iconclass:"fa fa-strikethrough",tooltiptext:taTranslations.strikeThrough.tooltip,action:function(){return this.$editor().wrapSelection("strikeThrough",null)},activeState:function(){return document.queryCommandState("strikeThrough")}}),taRegisterTool("clear",{iconclass:"fa fa-ban",tooltiptext:taTranslations.clear.tooltip,action:function(deferred,restoreSelection){var selectedElements;this.$editor().wrapSelection("removeFormat",null);var possibleNodes=angular.element(taSelection.getSelectionElement());selectedElements=taSelection.getAllSelectedElements();var removeListElements=function(list,pe){list=angular.element(list);var prevElement=pe;return pe||(prevElement=list),angular.forEach(list.children(),function(liElem){
if("ul"===liElem.tagName.toLowerCase()||"ol"===liElem.tagName.toLowerCase())prevElement=removeListElements(liElem,prevElement);else{var newElem=angular.element("<p></p>");newElem.html(angular.element(liElem).html()),prevElement.after(newElem),prevElement=newElem}}),list.remove(),prevElement};angular.forEach(selectedElements,function(element){"ul"!==element.nodeName.toLowerCase()&&"ol"!==element.nodeName.toLowerCase()||removeListElements(element)}),angular.forEach(possibleNodes.find("ul"),removeListElements),angular.forEach(possibleNodes.find("ol"),removeListElements);var $editor=this.$editor(),recursiveRemoveClass=function(node){node=angular.element(node),node[0]!==$editor.displayElements.text[0]&&node.removeAttr("class"),angular.forEach(node.children(),recursiveRemoveClass)};angular.forEach(possibleNodes,recursiveRemoveClass),possibleNodes[0]&&"li"!==possibleNodes[0].tagName.toLowerCase()&&"ol"!==possibleNodes[0].tagName.toLowerCase()&&"ul"!==possibleNodes[0].tagName.toLowerCase()&&"true"!==possibleNodes[0].getAttribute("contenteditable")&&this.$editor().wrapSelection("formatBlock","default"),restoreSelection()}});var blockJavascript=function(link){return-1!==link.toLowerCase().indexOf("javascript")};taRegisterTool("insertImage",{iconclass:"fa fa-picture-o",tooltiptext:taTranslations.insertImage.tooltip,action:function(){var imageLink;if((imageLink=$window.prompt(taTranslations.insertImage.dialogPrompt,"http://"))&&""!==imageLink&&"http://"!==imageLink&&!blockJavascript(imageLink)){taSelection.getSelectionElement().tagName&&"a"===taSelection.getSelectionElement().tagName.toLowerCase()&&taSelection.setSelectionAfterElement(taSelection.getSelectionElement());var embed='<img src="'+imageLink+'">';return this.$editor().wrapSelection("insertHTML",embed,!0)}},onElementSelect:{element:"img",action:taToolFunctions.imgOnSelectAction}}),taRegisterTool("insertVideo",{iconclass:"fa fa-youtube-play",tooltiptext:taTranslations.insertVideo.tooltip,action:function(){var urlPrompt;if(urlPrompt=$window.prompt(taTranslations.insertVideo.dialogPrompt,"https://"),!blockJavascript(urlPrompt)&&urlPrompt&&""!==urlPrompt&&"https://"!==urlPrompt&&(videoId=taToolFunctions.extractYoutubeVideoId(urlPrompt),videoId)){var urlLink="https://www.youtube.com/embed/"+videoId,embed='<img class="ta-insert-video" src="https://img.youtube.com/vi/'+videoId+'/hqdefault.jpg" ta-insert-video="'+urlLink+'" contenteditable="false" allowfullscreen="true" frameborder="0" />';return taSelection.getSelectionElement().tagName&&"a"===taSelection.getSelectionElement().tagName.toLowerCase()&&taSelection.setSelectionAfterElement(taSelection.getSelectionElement()),this.$editor().wrapSelection("insertHTML",embed,!0)}},onElementSelect:{element:"img",onlyWithAttrs:["ta-insert-video"],action:taToolFunctions.imgOnSelectAction}}),taRegisterTool("insertLink",{tooltiptext:taTranslations.insertLink.tooltip,iconclass:"fa fa-link",action:function(){var urlLink;if((urlLink=taSelection.getSelectionElement().tagName&&"a"===taSelection.getSelectionElement().tagName.toLowerCase()?$window.prompt(taTranslations.insertLink.dialogPrompt,taSelection.getSelectionElement().href):$window.prompt(taTranslations.insertLink.dialogPrompt,"http://"))&&""!==urlLink&&"http://"!==urlLink&&!blockJavascript(urlLink))return this.$editor().wrapSelection("createLink",urlLink,!0)},activeState:function(commonElement){return!!commonElement&&"A"===commonElement[0].tagName},onElementSelect:{element:"a",action:taToolFunctions.aOnSelectAction}}),taRegisterTool("wordcount",{display:'<div id="toolbarWC" style="display:block; min-width:100px;">Words: <span ng-bind="wordcount"></span></div>',disabled:!0,wordcount:0,activeState:function(){var textElement=this.$editor().displayElements.text,workingHTML=textElement[0].innerHTML||"",noOfWords=0;return""!==workingHTML.replace(/\s*<[^>]*?>\s*/g,"")&&""!==workingHTML.trim()&&(noOfWords=workingHTML.replace(/<\/?(b|i|em|strong|span|u|strikethrough|a|img|small|sub|sup|label)( [^>*?])?>/gi,"").replace(/(<[^>]*?>\s*<[^>]*?>)/gi," ").replace(/(<[^>]*?>)/gi,"").replace(/\s+/gi," ").match(/\S+/g).length),this.wordcount=noOfWords,this.$editor().wordcount=noOfWords,!1}}),taRegisterTool("charcount",{display:'<div id="toolbarCC" style="display:block; min-width:120px;">Characters: <span ng-bind="charcount"></span></div>',disabled:!0,charcount:0,activeState:function(){var textElement=this.$editor().displayElements.text,sourceText=textElement[0].innerText||textElement[0].textContent,noOfChars=sourceText.replace(/(\r\n|\n|\r)/gm,"").replace(/^\s+/g," ").replace(/\s+$/g," ").length;return this.charcount=noOfChars,this.$editor().charcount=noOfChars,!1}})}]),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e){"use strict";function t(e){return"string"==typeof e?parseInt(e,10):~~e}var o={wheelSpeed:1,wheelPropagation:!1,swipePropagation:!0,minScrollbarLength:null,maxScrollbarLength:null,useBothWheelAxes:!1,useKeyboard:!0,suppressScrollX:!1,suppressScrollY:!1,scrollXMarginOffset:0,scrollYMarginOffset:0,includePadding:!1},n=0,r=function(){var e=n++;return function(t){var o=".perfect-scrollbar-"+e;return void 0===t?o:t+o}},l="WebkitAppearance"in document.documentElement.style;e.fn.perfectScrollbar=function(n,i){return this.each(function(){function a(e,o){var n=e+o,r=D-R;j=0>n?0:n>r?r:n;var l=t(j*(Y-D)/(D-R));M.scrollTop(l)}function s(e,o){var n=e+o,r=E-k;W=0>n?0:n>r?r:n;var l=t(W*(C-E)/(E-k));M.scrollLeft(l)}function c(e){return P.minScrollbarLength&&(e=Math.max(e,P.minScrollbarLength)),P.maxScrollbarLength&&(e=Math.min(e,P.maxScrollbarLength)),e}function u(){var e={width:I};e.left=B?M.scrollLeft()+E-C:M.scrollLeft(),N?e.bottom=_-M.scrollTop():e.top=Q+M.scrollTop(),H.css(e);var t={top:M.scrollTop(),height:A};Z?t.right=B?C-M.scrollLeft()-V-J.outerWidth():V-M.scrollLeft():t.left=B?M.scrollLeft()+2*E-C-$-J.outerWidth():$+M.scrollLeft(),G.css(t),U.css({left:W,width:k-z}),J.css({top:j,height:R-et})}function p(){M.removeClass("ps-active-x"),M.removeClass("ps-active-y"),E=P.includePadding?M.innerWidth():M.width(),D=P.includePadding?M.innerHeight():M.height(),C=M.prop("scrollWidth"),Y=M.prop("scrollHeight"),!P.suppressScrollX&&C>E+P.scrollXMarginOffset?(X=!0,I=E-F,k=c(t(I*E/C)),W=t(M.scrollLeft()*(I-k)/(C-E))):(X=!1,k=0,W=0,M.scrollLeft(0)),!P.suppressScrollY&&Y>D+P.scrollYMarginOffset?(O=!0,A=D-tt,R=c(t(A*D/Y)),j=t(M.scrollTop()*(A-R)/(Y-D))):(O=!1,R=0,j=0,M.scrollTop(0)),W>=I-k&&(W=I-k),j>=A-R&&(j=A-R),u(),X&&M.addClass("ps-active-x"),O&&M.addClass("ps-active-y")}function d(){var t,o,n=function(e){s(t,e.pageX-o),p(),e.stopPropagation(),e.preventDefault()},r=function(){M.removeClass("ps-in-scrolling"),e(q).unbind(K("mousemove"),n)};U.bind(K("mousedown"),function(l){o=l.pageX,t=U.position().left,M.addClass("ps-in-scrolling"),e(q).bind(K("mousemove"),n),e(q).one(K("mouseup"),r),l.stopPropagation(),l.preventDefault()}),t=o=null}function f(){var t,o,n=function(e){a(t,e.pageY-o),p(),e.stopPropagation(),e.preventDefault()},r=function(){M.removeClass("ps-in-scrolling"),e(q).unbind(K("mousemove"),n)};J.bind(K("mousedown"),function(l){o=l.pageY,t=J.position().top,M.addClass("ps-in-scrolling"),e(q).bind(K("mousemove"),n),e(q).one(K("mouseup"),r),l.stopPropagation(),l.preventDefault()}),t=o=null}function v(e,t){var o=M.scrollTop();if(0===e){if(!O)return!1;if(0===o&&t>0||o>=Y-D&&0>t)return!P.wheelPropagation}var n=M.scrollLeft();if(0===t){if(!X)return!1;if(0===n&&0>e||n>=C-E&&e>0)return!P.wheelPropagation}return!0}function g(e,t){var o=M.scrollTop(),n=M.scrollLeft(),r=Math.abs(e),l=Math.abs(t);if(l>r){if(0>t&&o===Y-D||t>0&&0===o)return!P.swipePropagation}else if(r>l&&(0>e&&n===C-E||e>0&&0===n))return!P.swipePropagation;return!0}function b(){function e(e){var t=e.originalEvent.deltaX,o=-1*e.originalEvent.deltaY;return(void 0===t||void 0===o)&&(t=-1*e.originalEvent.wheelDeltaX/6,o=e.originalEvent.wheelDeltaY/6),e.originalEvent.deltaMode&&1===e.originalEvent.deltaMode&&(t*=10,o*=10),t!==t&&o!==o&&(t=0,o=e.originalEvent.wheelDelta),[t,o]}function t(t){if(l||!(M.find("select:focus").length>0)){var n=e(t),r=n[0],i=n[1];o=!1,P.useBothWheelAxes?O&&!X?(i?M.scrollTop(M.scrollTop()-i*P.wheelSpeed):M.scrollTop(M.scrollTop()+r*P.wheelSpeed),o=!0):X&&!O&&(r?M.scrollLeft(M.scrollLeft()+r*P.wheelSpeed):M.scrollLeft(M.scrollLeft()-i*P.wheelSpeed),o=!0):(M.scrollTop(M.scrollTop()-i*P.wheelSpeed),M.scrollLeft(M.scrollLeft()+r*P.wheelSpeed)),p(),(o=o||v(r,i))&&(t.stopPropagation(),t.preventDefault())}}var o=!1;void 0!==window.onwheel?M.bind(K("wheel"),t):void 0!==window.onmousewheel&&M.bind(K("mousewheel"),t)}function h(){var t=!1;M.bind(K("mouseenter"),function(){t=!0}),M.bind(K("mouseleave"),function(){t=!1});var o=!1;e(q).bind(K("keydown"),function(n){if((!n.isDefaultPrevented||!n.isDefaultPrevented())&&t){var r=document.activeElement?document.activeElement:q.activeElement;if(r){for(;r.shadowRoot;)r=r.shadowRoot.activeElement;if(e(r).is(":input,[contenteditable]"))return}var l=0,i=0;switch(n.which){case 37:l=-30;break;case 38:i=30;break;case 39:l=30;break;case 40:i=-30;break;case 33:i=90;break;case 32:case 34:i=-90;break;case 35:i=n.ctrlKey?-Y:-D;break;case 36:i=n.ctrlKey?M.scrollTop():D;break;default:return}M.scrollTop(M.scrollTop()-i),M.scrollLeft(M.scrollLeft()+l),(o=v(l,i))&&n.preventDefault()}})}function w(){function e(e){e.stopPropagation()}J.bind(K("click"),e),G.bind(K("click"),function(e){var o=t(R/2),n=e.pageY-G.offset().top-o,r=D-R,l=n/r;0>l?l=0:l>1&&(l=1),M.scrollTop((Y-D)*l)}),U.bind(K("click"),e),H.bind(K("click"),function(e){var o=t(k/2),n=e.pageX-H.offset().left-o,r=E-k,l=n/r;0>l?l=0:l>1&&(l=1),M.scrollLeft((C-E)*l)})}function m(){function t(){var e=window.getSelection?window.getSelection():document.getSlection?document.getSlection():{rangeCount:0};return 0===e.rangeCount?null:e.getRangeAt(0).commonAncestorContainer}function o(){r||(r=setInterval(function(){return x()?(M.scrollTop(M.scrollTop()+l.top),M.scrollLeft(M.scrollLeft()+l.left),void p()):void clearInterval(r)},50))}function n(){r&&(clearInterval(r),r=null),M.removeClass("ps-in-scrolling"),M.removeClass("ps-in-scrolling")}var r=null,l={top:0,left:0},i=!1;e(q).bind(K("selectionchange"),function(){e.contains(M[0],t())?i=!0:(i=!1,n())}),e(window).bind(K("mouseup"),function(){i&&(i=!1,n())}),e(window).bind(K("mousemove"),function(e){if(i){var t={x:e.pageX,y:e.pageY},r=M.offset(),a={left:r.left,right:r.left+M.outerWidth(),top:r.top,bottom:r.top+M.outerHeight()};t.x<a.left+3?(l.left=-5,M.addClass("ps-in-scrolling")):t.x>a.right-3?(l.left=5,M.addClass("ps-in-scrolling")):l.left=0,t.y<a.top+3?(l.top=5>a.top+3-t.y?-5:-20,M.addClass("ps-in-scrolling")):t.y>a.bottom-3?(l.top=5>t.y-a.bottom+3?5:20,M.addClass("ps-in-scrolling")):l.top=0,0===l.top&&0===l.left?n():o()}})}function T(t,o){function n(e,t){M.scrollTop(M.scrollTop()-t),M.scrollLeft(M.scrollLeft()-e),p()}function r(){h=!0}function l(){h=!1}function i(e){return e.originalEvent.targetTouches?e.originalEvent.targetTouches[0]:e.originalEvent}function a(e){var t=e.originalEvent;return!(!t.targetTouches||1!==t.targetTouches.length)||!(!t.pointerType||"mouse"===t.pointerType||t.pointerType===t.MSPOINTER_TYPE_MOUSE)}function s(e){if(a(e)){w=!0;var t=i(e);d.pageX=t.pageX,d.pageY=t.pageY,f=(new Date).getTime(),null!==b&&clearInterval(b),e.stopPropagation()}}function c(e){if(!h&&w&&a(e)){var t=i(e),o={pageX:t.pageX,pageY:t.pageY},r=o.pageX-d.pageX,l=o.pageY-d.pageY;n(r,l),d=o;var s=(new Date).getTime(),c=s-f;c>0&&(v.x=r/c,v.y=l/c,f=s),g(r,l)&&(e.stopPropagation(),e.preventDefault())}}function u(){!h&&w&&(w=!1,clearInterval(b),b=setInterval(function(){return x()?.01>Math.abs(v.x)&&.01>Math.abs(v.y)?void clearInterval(b):(n(30*v.x,30*v.y),v.x*=.8,void(v.y*=.8)):void clearInterval(b)},10))}var d={},f=0,v={},b=null,h=!1,w=!1;t&&(e(window).bind(K("touchstart"),r),e(window).bind(K("touchend"),l),M.bind(K("touchstart"),s),M.bind(K("touchmove"),c),M.bind(K("touchend"),u)),o&&(window.PointerEvent?(e(window).bind(K("pointerdown"),r),e(window).bind(K("pointerup"),l),M.bind(K("pointerdown"),s),M.bind(K("pointermove"),c),M.bind(K("pointerup"),u)):window.MSPointerEvent&&(e(window).bind(K("MSPointerDown"),r),e(window).bind(K("MSPointerUp"),l),M.bind(K("MSPointerDown"),s),M.bind(K("MSPointerMove"),c),M.bind(K("MSPointerUp"),u)))}function y(){M.bind(K("scroll"),function(){p()})}function L(){M.unbind(K()),e(window).unbind(K()),e(q).unbind(K()),M.data("perfect-scrollbar",null),M.data("perfect-scrollbar-update",null),M.data("perfect-scrollbar-destroy",null),U.remove(),J.remove(),H.remove(),G.remove(),M=H=G=U=J=X=O=E=D=C=Y=k=W=_=N=Q=R=j=V=Z=$=B=K=null}var P=e.extend(!0,{},o),M=e(this),x=function(){return!!M};if("object"==typeof n?e.extend(!0,P,n):i=n,"update"===i)return M.data("perfect-scrollbar-update")&&M.data("perfect-scrollbar-update")(),M;if("destroy"===i)return M.data("perfect-scrollbar-destroy")&&M.data("perfect-scrollbar-destroy")(),M;if(M.data("perfect-scrollbar"))return M.data("perfect-scrollbar");M.addClass("ps-container");var E,D,C,Y,X,k,W,I,O,R,j,A,B="rtl"===M.css("direction"),K=r(),q=this.ownerDocument||document,H=e("<div class='ps-scrollbar-x-rail'>").appendTo(M),U=e("<div class='ps-scrollbar-x'>").appendTo(H),_=t(H.css("bottom")),N=_===_,Q=N?null:t(H.css("top")),z=t(H.css("borderLeftWidth"))+t(H.css("borderRightWidth")),F=t(H.css("marginLeft"))+t(H.css("marginRight")),G=e("<div class='ps-scrollbar-y-rail'>").appendTo(M),J=e("<div class='ps-scrollbar-y'>").appendTo(G),V=t(G.css("right")),Z=V===V,$=Z?null:t(G.css("left")),et=t(G.css("borderTopWidth"))+t(G.css("borderBottomWidth")),tt=t(G.css("marginTop"))+t(G.css("marginBottom")),ot="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,nt=null!==window.navigator.msMaxTouchPoints;return function(){p(),y(),d(),f(),w(),m(),b(),(ot||nt)&&T(ot,nt),P.useKeyboard&&h(),M.data("perfect-scrollbar",M),M.data("perfect-scrollbar-update",p),M.data("perfect-scrollbar-destroy",L)}(),M})}}),angular.module("perfect_scrollbar",[]).directive("perfectScrollbar",["$parse","$window",function($parse,$window){var psOptions=["wheelSpeed","wheelPropagation","minScrollbarLength","useBothWheelAxes","useKeyboard","suppressScrollX","suppressScrollY","scrollXMarginOffset","scrollYMarginOffset","includePadding"];return{restrict:"EA",transclude:!0,template:"<div><div ng-transclude></div></div>",replace:!0,link:function($scope,$elem,$attr){function update(event){$scope.$evalAsync(function(){"true"==$attr.scrollDown&&"mouseenter"!=event&&setTimeout(function(){$($elem).scrollTop($($elem).prop("scrollHeight"))},100),$elem.perfectScrollbar("update")})}for(var jqWindow=angular.element($window),options={},i=0,l=psOptions.length;i<l;i++){var opt=psOptions[i];void 0!==$attr[opt]&&(options[opt]=$parse($attr[opt])())}$scope.$evalAsync(function(){$elem.perfectScrollbar(options);var onScrollHandler=$parse($attr.onScroll);$elem.scroll(function(){var scrollTop=$elem.scrollTop(),scrollHeight=$elem.prop("scrollHeight")-$elem.height();$scope.$apply(function(){onScrollHandler($scope,{scrollTop:scrollTop,scrollHeight:scrollHeight})})})}),$elem.bind("mouseenter",update("mouseenter")),$attr.refreshOnChange&&$scope.$watchCollection($attr.refreshOnChange,function(){update()}),$attr.refreshOnResize&&jqWindow.on("resize",update),$elem.bind("$destroy",function(){jqWindow.off("resize",update),$elem.perfectScrollbar("destroy")})}}}]),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory():"function"==typeof define&&define.amd?define(factory):global.moment=factory()}(this,function(){"use strict";function utils_hooks__hooks(){return hookCallback.apply(null,arguments)}function isArray(input){return"[object Array]"===Object.prototype.toString.call(input)}function isDate(input){return input instanceof Date||"[object Date]"===Object.prototype.toString.call(input)}function map(arr,fn){var i,res=[];for(i=0;i<arr.length;++i)res.push(fn(arr[i],i));return res}function hasOwnProp(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function extend(a,b){for(var i in b)hasOwnProp(b,i)&&(a[i]=b[i]);return hasOwnProp(b,"toString")&&(a.toString=b.toString),hasOwnProp(b,"valueOf")&&(a.valueOf=b.valueOf),a}function create_utc__createUTC(input,format,locale,strict){return createLocalOrUTC(input,format,locale,strict,!0).utc()}function defaultParsingFlags(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function getParsingFlags(m){return null==m._pf&&(m._pf=defaultParsingFlags()),m._pf}function valid__isValid(m){if(null==m._isValid){var flags=getParsingFlags(m);m._isValid=!(isNaN(m._d.getTime())||!(flags.overflow<0)||flags.empty||flags.invalidMonth||flags.invalidWeekday||flags.nullInput||flags.invalidFormat||flags.userInvalidated),m._strict&&(m._isValid=m._isValid&&0===flags.charsLeftOver&&0===flags.unusedTokens.length&&void 0===flags.bigHour)}return m._isValid}function valid__createInvalid(flags){var m=create_utc__createUTC(NaN);return null!=flags?extend(getParsingFlags(m),flags):getParsingFlags(m).userInvalidated=!0,m}function copyConfig(to,from){var i,prop,val;if(void 0!==from._isAMomentObject&&(to._isAMomentObject=from._isAMomentObject),void 0!==from._i&&(to._i=from._i),void 0!==from._f&&(to._f=from._f),void 0!==from._l&&(to._l=from._l),void 0!==from._strict&&(to._strict=from._strict),void 0!==from._tzm&&(to._tzm=from._tzm),void 0!==from._isUTC&&(to._isUTC=from._isUTC),void 0!==from._offset&&(to._offset=from._offset),void 0!==from._pf&&(to._pf=getParsingFlags(from)),void 0!==from._locale&&(to._locale=from._locale),momentProperties.length>0)for(i in momentProperties)prop=momentProperties[i],void 0!==(val=from[prop])&&(to[prop]=val);return to}function Moment(config){copyConfig(this,config),this._d=new Date(null!=config._d?config._d.getTime():NaN),!1===updateInProgress&&(updateInProgress=!0,utils_hooks__hooks.updateOffset(this),updateInProgress=!1)}function isMoment(obj){return obj instanceof Moment||null!=obj&&null!=obj._isAMomentObject}function absFloor(number){return number<0?Math.ceil(number):Math.floor(number)}function toInt(argumentForCoercion){var coercedNumber=+argumentForCoercion,value=0;return 0!==coercedNumber&&isFinite(coercedNumber)&&(value=absFloor(coercedNumber)),value}function compareArrays(array1,array2,dontConvert){var i,len=Math.min(array1.length,array2.length),lengthDiff=Math.abs(array1.length-array2.length),diffs=0;for(i=0;i<len;i++)(dontConvert&&array1[i]!==array2[i]||!dontConvert&&toInt(array1[i])!==toInt(array2[i]))&&diffs++;return diffs+lengthDiff}function Locale(){}function normalizeLocale(key){return key?key.toLowerCase().replace("_","-"):key}function chooseLocale(names){for(var j,next,locale,split,i=0;i<names.length;){for(split=normalizeLocale(names[i]).split("-"),j=split.length,next=normalizeLocale(names[i+1]),next=next?next.split("-"):null;j>0;){if(locale=loadLocale(split.slice(0,j).join("-")))return locale;if(next&&next.length>=j&&compareArrays(split,next,!0)>=j-1)break;j--}i++}return null}function loadLocale(name){var oldLocale=null;if(!locales[name]&&"undefined"!=typeof module&&module&&module.exports)try{oldLocale=globalLocale._abbr,require("./locale/"+name),locale_locales__getSetGlobalLocale(oldLocale)}catch(e){}return locales[name]}function locale_locales__getSetGlobalLocale(key,values){var data;return key&&(data=void 0===values?locale_locales__getLocale(key):defineLocale(key,values))&&(globalLocale=data),globalLocale._abbr}function defineLocale(name,values){return null!==values?(values.abbr=name,locales[name]=locales[name]||new Locale,locales[name].set(values),locale_locales__getSetGlobalLocale(name),locales[name]):(delete locales[name],null)}function locale_locales__getLocale(key){var locale;if(key&&key._locale&&key._locale._abbr&&(key=key._locale._abbr),!key)return globalLocale;if(!isArray(key)){if(locale=loadLocale(key))return locale;key=[key]}return chooseLocale(key)}function addUnitAlias(unit,shorthand){var lowerCase=unit.toLowerCase();aliases[lowerCase]=aliases[lowerCase+"s"]=aliases[shorthand]=unit}function normalizeUnits(units){return"string"==typeof units?aliases[units]||aliases[units.toLowerCase()]:void 0}function normalizeObjectUnits(inputObject){var normalizedProp,prop,normalizedInput={};for(prop in inputObject)hasOwnProp(inputObject,prop)&&(normalizedProp=normalizeUnits(prop))&&(normalizedInput[normalizedProp]=inputObject[prop]);return normalizedInput}function makeGetSet(unit,keepTime){return function(value){return null!=value?(get_set__set(this,unit,value),utils_hooks__hooks.updateOffset(this,keepTime),this):get_set__get(this,unit)}}function get_set__get(mom,unit){return mom._d["get"+(mom._isUTC?"UTC":"")+unit]()}function get_set__set(mom,unit,value){return mom._d["set"+(mom._isUTC?"UTC":"")+unit](value)}function getSet(units,value){var unit;if("object"==typeof units)for(unit in units)this.set(unit,units[unit]);else if(units=normalizeUnits(units),"function"==typeof this[units])return this[units](value);return this}function zeroFill(number,targetLength,forceSign){var absNumber=""+Math.abs(number),zerosToFill=targetLength-absNumber.length;return(number>=0?forceSign?"+":"":"-")+Math.pow(10,Math.max(0,zerosToFill)).toString().substr(1)+absNumber}function addFormatToken(token,padded,ordinal,callback){var func=callback;"string"==typeof callback&&(func=function(){return this[callback]()}),token&&(formatTokenFunctions[token]=func),padded&&(formatTokenFunctions[padded[0]]=function(){return zeroFill(func.apply(this,arguments),padded[1],padded[2])}),ordinal&&(formatTokenFunctions[ordinal]=function(){return this.localeData().ordinal(func.apply(this,arguments),token)})}function removeFormattingTokens(input){return input.match(/\[[\s\S]/)?input.replace(/^\[|\]$/g,""):input.replace(/\\/g,"")}function makeFormatFunction(format){var i,length,array=format.match(formattingTokens);for(i=0,length=array.length;i<length;i++)formatTokenFunctions[array[i]]?array[i]=formatTokenFunctions[array[i]]:array[i]=removeFormattingTokens(array[i]);return function(mom){var output="";for(i=0;i<length;i++)output+=array[i]instanceof Function?array[i].call(mom,format):array[i];return output}}function formatMoment(m,format){return m.isValid()?(format=expandFormat(format,m.localeData()),formatFunctions[format]=formatFunctions[format]||makeFormatFunction(format),formatFunctions[format](m)):m.localeData().invalidDate()}function expandFormat(format,locale){function replaceLongDateFormatTokens(input){return locale.longDateFormat(input)||input}var i=5;for(localFormattingTokens.lastIndex=0;i>=0&&localFormattingTokens.test(format);)format=format.replace(localFormattingTokens,replaceLongDateFormatTokens),localFormattingTokens.lastIndex=0,i-=1;return format}function isFunction(sth){return"function"==typeof sth&&"[object Function]"===Object.prototype.toString.call(sth)}function addRegexToken(token,regex,strictRegex){regexes[token]=isFunction(regex)?regex:function(isStrict){return isStrict&&strictRegex?strictRegex:regex}}function getParseRegexForToken(token,config){return hasOwnProp(regexes,token)?regexes[token](config._strict,config._locale):new RegExp(unescapeFormat(token))}function unescapeFormat(s){return s.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(matched,p1,p2,p3,p4){return p1||p2||p3||p4}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function addParseToken(token,callback){var i,func=callback;for("string"==typeof token&&(token=[token]),"number"==typeof callback&&(func=function(input,array){array[callback]=toInt(input)}),i=0;i<token.length;i++)tokens[token[i]]=func}function addWeekParseToken(token,callback){addParseToken(token,function(input,array,config,token){config._w=config._w||{},callback(input,config._w,config,token)})}function addTimeToArrayFromToken(token,input,config){null!=input&&hasOwnProp(tokens,token)&&tokens[token](input,config._a,config,token)}function daysInMonth(year,month){return new Date(Date.UTC(year,month+1,0)).getUTCDate()}function localeMonths(m){return this._months[m.month()]}function localeMonthsShort(m){return this._monthsShort[m.month()]}function localeMonthsParse(monthName,format,strict){var i,mom,regex;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(mom=create_utc__createUTC([2e3,i]),strict&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(mom,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(mom,"").replace(".","")+"$","i")),strict||this._monthsParse[i]||(regex="^"+this.months(mom,"")+"|^"+this.monthsShort(mom,""),this._monthsParse[i]=new RegExp(regex.replace(".",""),"i")),strict&&"MMMM"===format&&this._longMonthsParse[i].test(monthName))return i;if(strict&&"MMM"===format&&this._shortMonthsParse[i].test(monthName))return i;if(!strict&&this._monthsParse[i].test(monthName))return i}}function setMonth(mom,value){var dayOfMonth;return"string"==typeof value&&"number"!=typeof(value=mom.localeData().monthsParse(value))?mom:(dayOfMonth=Math.min(mom.date(),daysInMonth(mom.year(),value)),mom._d["set"+(mom._isUTC?"UTC":"")+"Month"](value,dayOfMonth),mom)}function getSetMonth(value){return null!=value?(setMonth(this,value),utils_hooks__hooks.updateOffset(this,!0),this):get_set__get(this,"Month")}function getDaysInMonth(){return daysInMonth(this.year(),this.month())}function checkOverflow(m){var overflow,a=m._a;return a&&-2===getParsingFlags(m).overflow&&(overflow=a[MONTH]<0||a[MONTH]>11?MONTH:a[DATE]<1||a[DATE]>daysInMonth(a[YEAR],a[MONTH])?DATE:a[HOUR]<0||a[HOUR]>24||24===a[HOUR]&&(0!==a[MINUTE]||0!==a[SECOND]||0!==a[MILLISECOND])?HOUR:a[MINUTE]<0||a[MINUTE]>59?MINUTE:a[SECOND]<0||a[SECOND]>59?SECOND:a[MILLISECOND]<0||a[MILLISECOND]>999?MILLISECOND:-1,getParsingFlags(m)._overflowDayOfYear&&(overflow<YEAR||overflow>DATE)&&(overflow=DATE),getParsingFlags(m).overflow=overflow),m}function warn(msg){!1===utils_hooks__hooks.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+msg)}function deprecate(msg,fn){var firstTime=!0;return extend(function(){return firstTime&&(warn(msg+"\n"+(new Error).stack),firstTime=!1),fn.apply(this,arguments)},fn)}function deprecateSimple(name,msg){deprecations[name]||(warn(msg),deprecations[name]=!0)}function configFromISO(config){var i,l,string=config._i,match=from_string__isoRegex.exec(string);if(match){for(getParsingFlags(config).iso=!0,i=0,l=isoDates.length;i<l;i++)if(isoDates[i][1].exec(string)){config._f=isoDates[i][0];break}for(i=0,l=isoTimes.length;i<l;i++)if(isoTimes[i][1].exec(string)){config._f+=(match[6]||" ")+isoTimes[i][0];break}string.match(matchOffset)&&(config._f+="Z"),configFromStringAndFormat(config)}else config._isValid=!1}function configFromString(config){var matched=aspNetJsonRegex.exec(config._i);if(null!==matched)return void(config._d=new Date(+matched[1]));configFromISO(config),!1===config._isValid&&(delete config._isValid,utils_hooks__hooks.createFromInputFallback(config))}function createDate(y,m,d,h,M,s,ms){var date=new Date(y,m,d,h,M,s,ms);return y<1970&&date.setFullYear(y),date}function createUTCDate(y){var date=new Date(Date.UTC.apply(null,arguments));return y<1970&&date.setUTCFullYear(y),date}function daysInYear(year){return isLeapYear(year)?366:365}function isLeapYear(year){return year%4==0&&year%100!=0||year%400==0}function getIsLeapYear(){return isLeapYear(this.year())}function weekOfYear(mom,firstDayOfWeek,firstDayOfWeekOfYear){var adjustedMoment,end=firstDayOfWeekOfYear-firstDayOfWeek,daysToDayOfWeek=firstDayOfWeekOfYear-mom.day();return daysToDayOfWeek>end&&(daysToDayOfWeek-=7),daysToDayOfWeek<end-7&&(daysToDayOfWeek+=7),adjustedMoment=local__createLocal(mom).add(daysToDayOfWeek,"d"),{week:Math.ceil(adjustedMoment.dayOfYear()/7),year:adjustedMoment.year()}}function localeWeek(mom){return weekOfYear(mom,this._week.dow,this._week.doy).week}function localeFirstDayOfWeek(){return this._week.dow}function localeFirstDayOfYear(){return this._week.doy}function getSetWeek(input){var week=this.localeData().week(this);return null==input?week:this.add(7*(input-week),"d")}function getSetISOWeek(input){var week=weekOfYear(this,1,4).week;return null==input?week:this.add(7*(input-week),"d")}function dayOfYearFromWeeks(year,week,weekday,firstDayOfWeekOfYear,firstDayOfWeek){var dayOfYear,week1Jan=6+firstDayOfWeek-firstDayOfWeekOfYear,janX=createUTCDate(year,0,1+week1Jan),d=janX.getUTCDay();return d<firstDayOfWeek&&(d+=7),weekday=null!=weekday?1*weekday:firstDayOfWeek,dayOfYear=1+week1Jan+7*(week-1)-d+weekday,{year:dayOfYear>0?year:year-1,dayOfYear:dayOfYear>0?dayOfYear:daysInYear(year-1)+dayOfYear}}function getSetDayOfYear(input){var dayOfYear=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==input?dayOfYear:this.add(input-dayOfYear,"d")}function defaults(a,b,c){return null!=a?a:null!=b?b:c}function currentDateArray(config){var now=new Date;return config._useUTC?[now.getUTCFullYear(),now.getUTCMonth(),now.getUTCDate()]:[now.getFullYear(),now.getMonth(),now.getDate()]}function configFromArray(config){var i,date,currentDate,yearToUse,input=[];if(!config._d){for(currentDate=currentDateArray(config),config._w&&null==config._a[DATE]&&null==config._a[MONTH]&&dayOfYearFromWeekInfo(config),config._dayOfYear&&(yearToUse=defaults(config._a[YEAR],currentDate[YEAR]),config._dayOfYear>daysInYear(yearToUse)&&(getParsingFlags(config)._overflowDayOfYear=!0),date=createUTCDate(yearToUse,0,config._dayOfYear),config._a[MONTH]=date.getUTCMonth(),config._a[DATE]=date.getUTCDate()),i=0;i<3&&null==config._a[i];++i)config._a[i]=input[i]=currentDate[i];for(;i<7;i++)config._a[i]=input[i]=null==config._a[i]?2===i?1:0:config._a[i];24===config._a[HOUR]&&0===config._a[MINUTE]&&0===config._a[SECOND]&&0===config._a[MILLISECOND]&&(config._nextDay=!0,config._a[HOUR]=0),config._d=(config._useUTC?createUTCDate:createDate).apply(null,input),null!=config._tzm&&config._d.setUTCMinutes(config._d.getUTCMinutes()-config._tzm),config._nextDay&&(config._a[HOUR]=24)}}function dayOfYearFromWeekInfo(config){var w,weekYear,week,weekday,dow,doy,temp;w=config._w,null!=w.GG||null!=w.W||null!=w.E?(dow=1,doy=4,weekYear=defaults(w.GG,config._a[YEAR],weekOfYear(local__createLocal(),1,4).year),week=defaults(w.W,1),weekday=defaults(w.E,1)):(dow=config._locale._week.dow,doy=config._locale._week.doy,weekYear=defaults(w.gg,config._a[YEAR],weekOfYear(local__createLocal(),dow,doy).year),week=defaults(w.w,1),null!=w.d?(weekday=w.d)<dow&&++week:weekday=null!=w.e?w.e+dow:dow),temp=dayOfYearFromWeeks(weekYear,week,weekday,doy,dow),config._a[YEAR]=temp.year,config._dayOfYear=temp.dayOfYear}function configFromStringAndFormat(config){if(config._f===utils_hooks__hooks.ISO_8601)return void configFromISO(config);config._a=[],getParsingFlags(config).empty=!0;var i,parsedInput,tokens,token,skipped,string=""+config._i,stringLength=string.length,totalParsedInputLength=0;for(tokens=expandFormat(config._f,config._locale).match(formattingTokens)||[],i=0;i<tokens.length;i++)token=tokens[i],parsedInput=(string.match(getParseRegexForToken(token,config))||[])[0],parsedInput&&(skipped=string.substr(0,string.indexOf(parsedInput)),skipped.length>0&&getParsingFlags(config).unusedInput.push(skipped),string=string.slice(string.indexOf(parsedInput)+parsedInput.length),totalParsedInputLength+=parsedInput.length),formatTokenFunctions[token]?(parsedInput?getParsingFlags(config).empty=!1:getParsingFlags(config).unusedTokens.push(token),addTimeToArrayFromToken(token,parsedInput,config)):config._strict&&!parsedInput&&getParsingFlags(config).unusedTokens.push(token);getParsingFlags(config).charsLeftOver=stringLength-totalParsedInputLength,string.length>0&&getParsingFlags(config).unusedInput.push(string),!0===getParsingFlags(config).bigHour&&config._a[HOUR]<=12&&config._a[HOUR]>0&&(getParsingFlags(config).bigHour=void 0),
config._a[HOUR]=meridiemFixWrap(config._locale,config._a[HOUR],config._meridiem),configFromArray(config),checkOverflow(config)}function meridiemFixWrap(locale,hour,meridiem){var isPm;return null==meridiem?hour:null!=locale.meridiemHour?locale.meridiemHour(hour,meridiem):null!=locale.isPM?(isPm=locale.isPM(meridiem),isPm&&hour<12&&(hour+=12),isPm||12!==hour||(hour=0),hour):hour}function configFromStringAndArray(config){var tempConfig,bestMoment,scoreToBeat,i,currentScore;if(0===config._f.length)return getParsingFlags(config).invalidFormat=!0,void(config._d=new Date(NaN));for(i=0;i<config._f.length;i++)currentScore=0,tempConfig=copyConfig({},config),null!=config._useUTC&&(tempConfig._useUTC=config._useUTC),tempConfig._f=config._f[i],configFromStringAndFormat(tempConfig),valid__isValid(tempConfig)&&(currentScore+=getParsingFlags(tempConfig).charsLeftOver,currentScore+=10*getParsingFlags(tempConfig).unusedTokens.length,getParsingFlags(tempConfig).score=currentScore,(null==scoreToBeat||currentScore<scoreToBeat)&&(scoreToBeat=currentScore,bestMoment=tempConfig));extend(config,bestMoment||tempConfig)}function configFromObject(config){if(!config._d){var i=normalizeObjectUnits(config._i);config._a=[i.year,i.month,i.day||i.date,i.hour,i.minute,i.second,i.millisecond],configFromArray(config)}}function createFromConfig(config){var res=new Moment(checkOverflow(prepareConfig(config)));return res._nextDay&&(res.add(1,"d"),res._nextDay=void 0),res}function prepareConfig(config){var input=config._i,format=config._f;return config._locale=config._locale||locale_locales__getLocale(config._l),null===input||void 0===format&&""===input?valid__createInvalid({nullInput:!0}):("string"==typeof input&&(config._i=input=config._locale.preparse(input)),isMoment(input)?new Moment(checkOverflow(input)):(isArray(format)?configFromStringAndArray(config):format?configFromStringAndFormat(config):isDate(input)?config._d=input:configFromInput(config),config))}function configFromInput(config){var input=config._i;void 0===input?config._d=new Date:isDate(input)?config._d=new Date(+input):"string"==typeof input?configFromString(config):isArray(input)?(config._a=map(input.slice(0),function(obj){return parseInt(obj,10)}),configFromArray(config)):"object"==typeof input?configFromObject(config):"number"==typeof input?config._d=new Date(input):utils_hooks__hooks.createFromInputFallback(config)}function createLocalOrUTC(input,format,locale,strict,isUTC){var c={};return"boolean"==typeof locale&&(strict=locale,locale=void 0),c._isAMomentObject=!0,c._useUTC=c._isUTC=isUTC,c._l=locale,c._i=input,c._f=format,c._strict=strict,createFromConfig(c)}function local__createLocal(input,format,locale,strict){return createLocalOrUTC(input,format,locale,strict,!1)}function pickBy(fn,moments){var res,i;if(1===moments.length&&isArray(moments[0])&&(moments=moments[0]),!moments.length)return local__createLocal();for(res=moments[0],i=1;i<moments.length;++i)moments[i].isValid()&&!moments[i][fn](res)||(res=moments[i]);return res}function min(){return pickBy("isBefore",[].slice.call(arguments,0))}function max(){return pickBy("isAfter",[].slice.call(arguments,0))}function Duration(duration){var normalizedInput=normalizeObjectUnits(duration),years=normalizedInput.year||0,quarters=normalizedInput.quarter||0,months=normalizedInput.month||0,weeks=normalizedInput.week||0,days=normalizedInput.day||0,hours=normalizedInput.hour||0,minutes=normalizedInput.minute||0,seconds=normalizedInput.second||0,milliseconds=normalizedInput.millisecond||0;this._milliseconds=+milliseconds+1e3*seconds+6e4*minutes+36e5*hours,this._days=+days+7*weeks,this._months=+months+3*quarters+12*years,this._data={},this._locale=locale_locales__getLocale(),this._bubble()}function isDuration(obj){return obj instanceof Duration}function offset(token,separator){addFormatToken(token,0,0,function(){var offset=this.utcOffset(),sign="+";return offset<0&&(offset=-offset,sign="-"),sign+zeroFill(~~(offset/60),2)+separator+zeroFill(~~offset%60,2)})}function offsetFromString(string){var matches=(string||"").match(matchOffset)||[],chunk=matches[matches.length-1]||[],parts=(chunk+"").match(chunkOffset)||["-",0,0],minutes=60*parts[1]+toInt(parts[2]);return"+"===parts[0]?minutes:-minutes}function cloneWithOffset(input,model){var res,diff;return model._isUTC?(res=model.clone(),diff=(isMoment(input)||isDate(input)?+input:+local__createLocal(input))-+res,res._d.setTime(+res._d+diff),utils_hooks__hooks.updateOffset(res,!1),res):local__createLocal(input).local()}function getDateOffset(m){return 15*-Math.round(m._d.getTimezoneOffset()/15)}function getSetOffset(input,keepLocalTime){var localAdjust,offset=this._offset||0;return null!=input?("string"==typeof input&&(input=offsetFromString(input)),Math.abs(input)<16&&(input*=60),!this._isUTC&&keepLocalTime&&(localAdjust=getDateOffset(this)),this._offset=input,this._isUTC=!0,null!=localAdjust&&this.add(localAdjust,"m"),offset!==input&&(!keepLocalTime||this._changeInProgress?add_subtract__addSubtract(this,create__createDuration(input-offset,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,utils_hooks__hooks.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?offset:getDateOffset(this)}function getSetZone(input,keepLocalTime){return null!=input?("string"!=typeof input&&(input=-input),this.utcOffset(input,keepLocalTime),this):-this.utcOffset()}function setOffsetToUTC(keepLocalTime){return this.utcOffset(0,keepLocalTime)}function setOffsetToLocal(keepLocalTime){return this._isUTC&&(this.utcOffset(0,keepLocalTime),this._isUTC=!1,keepLocalTime&&this.subtract(getDateOffset(this),"m")),this}function setOffsetToParsedOffset(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(offsetFromString(this._i)),this}function hasAlignedHourOffset(input){return input=input?local__createLocal(input).utcOffset():0,(this.utcOffset()-input)%60==0}function isDaylightSavingTime(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function isDaylightSavingTimeShifted(){if(void 0!==this._isDSTShifted)return this._isDSTShifted;var c={};if(copyConfig(c,this),c=prepareConfig(c),c._a){var other=c._isUTC?create_utc__createUTC(c._a):local__createLocal(c._a);this._isDSTShifted=this.isValid()&&compareArrays(c._a,other.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function isLocal(){return!this._isUTC}function isUtcOffset(){return this._isUTC}function isUtc(){return this._isUTC&&0===this._offset}function create__createDuration(input,key){var sign,ret,diffRes,duration=input,match=null;return isDuration(input)?duration={ms:input._milliseconds,d:input._days,M:input._months}:"number"==typeof input?(duration={},key?duration[key]=input:duration.milliseconds=input):(match=aspNetRegex.exec(input))?(sign="-"===match[1]?-1:1,duration={y:0,d:toInt(match[DATE])*sign,h:toInt(match[HOUR])*sign,m:toInt(match[MINUTE])*sign,s:toInt(match[SECOND])*sign,ms:toInt(match[MILLISECOND])*sign}):(match=create__isoRegex.exec(input))?(sign="-"===match[1]?-1:1,duration={y:parseIso(match[2],sign),M:parseIso(match[3],sign),d:parseIso(match[4],sign),h:parseIso(match[5],sign),m:parseIso(match[6],sign),s:parseIso(match[7],sign),w:parseIso(match[8],sign)}):null==duration?duration={}:"object"==typeof duration&&("from"in duration||"to"in duration)&&(diffRes=momentsDifference(local__createLocal(duration.from),local__createLocal(duration.to)),duration={},duration.ms=diffRes.milliseconds,duration.M=diffRes.months),ret=new Duration(duration),isDuration(input)&&hasOwnProp(input,"_locale")&&(ret._locale=input._locale),ret}function parseIso(inp,sign){var res=inp&&parseFloat(inp.replace(",","."));return(isNaN(res)?0:res)*sign}function positiveMomentsDifference(base,other){var res={milliseconds:0,months:0};return res.months=other.month()-base.month()+12*(other.year()-base.year()),base.clone().add(res.months,"M").isAfter(other)&&--res.months,res.milliseconds=+other-+base.clone().add(res.months,"M"),res}function momentsDifference(base,other){var res;return other=cloneWithOffset(other,base),base.isBefore(other)?res=positiveMomentsDifference(base,other):(res=positiveMomentsDifference(other,base),res.milliseconds=-res.milliseconds,res.months=-res.months),res}function createAdder(direction,name){return function(val,period){var dur,tmp;return null===period||isNaN(+period)||(deprecateSimple(name,"moment()."+name+"(period, number) is deprecated. Please use moment()."+name+"(number, period)."),tmp=val,val=period,period=tmp),val="string"==typeof val?+val:val,dur=create__createDuration(val,period),add_subtract__addSubtract(this,dur,direction),this}}function add_subtract__addSubtract(mom,duration,isAdding,updateOffset){var milliseconds=duration._milliseconds,days=duration._days,months=duration._months;updateOffset=null==updateOffset||updateOffset,milliseconds&&mom._d.setTime(+mom._d+milliseconds*isAdding),days&&get_set__set(mom,"Date",get_set__get(mom,"Date")+days*isAdding),months&&setMonth(mom,get_set__get(mom,"Month")+months*isAdding),updateOffset&&utils_hooks__hooks.updateOffset(mom,days||months)}function moment_calendar__calendar(time,formats){var now=time||local__createLocal(),sod=cloneWithOffset(now,this).startOf("day"),diff=this.diff(sod,"days",!0),format=diff<-6?"sameElse":diff<-1?"lastWeek":diff<0?"lastDay":diff<1?"sameDay":diff<2?"nextDay":diff<7?"nextWeek":"sameElse";return this.format(formats&&formats[format]||this.localeData().calendar(format,this,local__createLocal(now)))}function clone(){return new Moment(this)}function isAfter(input,units){return units=normalizeUnits(void 0!==units?units:"millisecond"),"millisecond"===units?(input=isMoment(input)?input:local__createLocal(input),+this>+input):(isMoment(input)?+input:+local__createLocal(input))<+this.clone().startOf(units)}function isBefore(input,units){var inputMs;return units=normalizeUnits(void 0!==units?units:"millisecond"),"millisecond"===units?(input=isMoment(input)?input:local__createLocal(input),+this<+input):(inputMs=isMoment(input)?+input:+local__createLocal(input),+this.clone().endOf(units)<inputMs)}function isBetween(from,to,units){return this.isAfter(from,units)&&this.isBefore(to,units)}function isSame(input,units){var inputMs;return units=normalizeUnits(units||"millisecond"),"millisecond"===units?(input=isMoment(input)?input:local__createLocal(input),+this==+input):(inputMs=+local__createLocal(input),+this.clone().startOf(units)<=inputMs&&inputMs<=+this.clone().endOf(units))}function diff(input,units,asFloat){var delta,output,that=cloneWithOffset(input,this),zoneDelta=6e4*(that.utcOffset()-this.utcOffset());return units=normalizeUnits(units),"year"===units||"month"===units||"quarter"===units?(output=monthDiff(this,that),"quarter"===units?output/=3:"year"===units&&(output/=12)):(delta=this-that,output="second"===units?delta/1e3:"minute"===units?delta/6e4:"hour"===units?delta/36e5:"day"===units?(delta-zoneDelta)/864e5:"week"===units?(delta-zoneDelta)/6048e5:delta),asFloat?output:absFloor(output)}function monthDiff(a,b){var anchor2,adjust,wholeMonthDiff=12*(b.year()-a.year())+(b.month()-a.month()),anchor=a.clone().add(wholeMonthDiff,"months");return b-anchor<0?(anchor2=a.clone().add(wholeMonthDiff-1,"months"),adjust=(b-anchor)/(anchor-anchor2)):(anchor2=a.clone().add(wholeMonthDiff+1,"months"),adjust=(b-anchor)/(anchor2-anchor)),-(wholeMonthDiff+adjust)}function toString(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function moment_format__toISOString(){var m=this.clone().utc();return 0<m.year()&&m.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():formatMoment(m,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):formatMoment(m,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function format(inputString){var output=formatMoment(this,inputString||utils_hooks__hooks.defaultFormat);return this.localeData().postformat(output)}function from(time,withoutSuffix){return this.isValid()?create__createDuration({to:this,from:time}).locale(this.locale()).humanize(!withoutSuffix):this.localeData().invalidDate()}function fromNow(withoutSuffix){return this.from(local__createLocal(),withoutSuffix)}function to(time,withoutSuffix){return this.isValid()?create__createDuration({from:this,to:time}).locale(this.locale()).humanize(!withoutSuffix):this.localeData().invalidDate()}function toNow(withoutSuffix){return this.to(local__createLocal(),withoutSuffix)}function locale(key){var newLocaleData;return void 0===key?this._locale._abbr:(newLocaleData=locale_locales__getLocale(key),null!=newLocaleData&&(this._locale=newLocaleData),this)}function localeData(){return this._locale}function startOf(units){switch(units=normalizeUnits(units)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===units&&this.weekday(0),"isoWeek"===units&&this.isoWeekday(1),"quarter"===units&&this.month(3*Math.floor(this.month()/3)),this}function endOf(units){return units=normalizeUnits(units),void 0===units||"millisecond"===units?this:this.startOf(units).add(1,"isoWeek"===units?"week":units).subtract(1,"ms")}function to_type__valueOf(){return+this._d-6e4*(this._offset||0)}function unix(){return Math.floor(+this/1e3)}function toDate(){return this._offset?new Date(+this):this._d}function toArray(){var m=this;return[m.year(),m.month(),m.date(),m.hour(),m.minute(),m.second(),m.millisecond()]}function toObject(){var m=this;return{years:m.year(),months:m.month(),date:m.date(),hours:m.hours(),minutes:m.minutes(),seconds:m.seconds(),milliseconds:m.milliseconds()}}function moment_valid__isValid(){return valid__isValid(this)}function parsingFlags(){return extend({},getParsingFlags(this))}function invalidAt(){return getParsingFlags(this).overflow}function addWeekYearFormatToken(token,getter){addFormatToken(0,[token,token.length],0,getter)}function weeksInYear(year,dow,doy){return weekOfYear(local__createLocal([year,11,31+dow-doy]),dow,doy).week}function getSetWeekYear(input){var year=weekOfYear(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==input?year:this.add(input-year,"y")}function getSetISOWeekYear(input){var year=weekOfYear(this,1,4).year;return null==input?year:this.add(input-year,"y")}function getISOWeeksInYear(){return weeksInYear(this.year(),1,4)}function getWeeksInYear(){var weekInfo=this.localeData()._week;return weeksInYear(this.year(),weekInfo.dow,weekInfo.doy)}function getSetQuarter(input){return null==input?Math.ceil((this.month()+1)/3):this.month(3*(input-1)+this.month()%3)}function parseWeekday(input,locale){return"string"!=typeof input?input:isNaN(input)?(input=locale.weekdaysParse(input),"number"==typeof input?input:null):parseInt(input,10)}function localeWeekdays(m){return this._weekdays[m.day()]}function localeWeekdaysShort(m){return this._weekdaysShort[m.day()]}function localeWeekdaysMin(m){return this._weekdaysMin[m.day()]}function localeWeekdaysParse(weekdayName){var i,mom,regex;for(this._weekdaysParse=this._weekdaysParse||[],i=0;i<7;i++)if(this._weekdaysParse[i]||(mom=local__createLocal([2e3,1]).day(i),regex="^"+this.weekdays(mom,"")+"|^"+this.weekdaysShort(mom,"")+"|^"+this.weekdaysMin(mom,""),this._weekdaysParse[i]=new RegExp(regex.replace(".",""),"i")),this._weekdaysParse[i].test(weekdayName))return i}function getSetDayOfWeek(input){var day=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=input?(input=parseWeekday(input,this.localeData()),this.add(input-day,"d")):day}function getSetLocaleDayOfWeek(input){var weekday=(this.day()+7-this.localeData()._week.dow)%7;return null==input?weekday:this.add(input-weekday,"d")}function getSetISODayOfWeek(input){return null==input?this.day()||7:this.day(this.day()%7?input:input-7)}function meridiem(token,lowercase){addFormatToken(token,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),lowercase)})}function matchMeridiem(isStrict,locale){return locale._meridiemParse}function localeIsPM(input){return"p"===(input+"").toLowerCase().charAt(0)}function localeMeridiem(hours,minutes,isLower){return hours>11?isLower?"pm":"PM":isLower?"am":"AM"}function parseMs(input,array){array[MILLISECOND]=toInt(1e3*("0."+input))}function getZoneAbbr(){return this._isUTC?"UTC":""}function getZoneName(){return this._isUTC?"Coordinated Universal Time":""}function moment__createUnix(input){return local__createLocal(1e3*input)}function moment__createInZone(){return local__createLocal.apply(null,arguments).parseZone()}function locale_calendar__calendar(key,mom,now){var output=this._calendar[key];return"function"==typeof output?output.call(mom,now):output}function longDateFormat(key){var format=this._longDateFormat[key],formatUpper=this._longDateFormat[key.toUpperCase()];return format||!formatUpper?format:(this._longDateFormat[key]=formatUpper.replace(/MMMM|MM|DD|dddd/g,function(val){return val.slice(1)}),this._longDateFormat[key])}function invalidDate(){return this._invalidDate}function ordinal(number){return this._ordinal.replace("%d",number)}function preParsePostFormat(string){return string}function relative__relativeTime(number,withoutSuffix,string,isFuture){var output=this._relativeTime[string];return"function"==typeof output?output(number,withoutSuffix,string,isFuture):output.replace(/%d/i,number)}function pastFuture(diff,output){var format=this._relativeTime[diff>0?"future":"past"];return"function"==typeof format?format(output):format.replace(/%s/i,output)}function locale_set__set(config){var prop,i;for(i in config)prop=config[i],"function"==typeof prop?this[i]=prop:this["_"+i]=prop;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function lists__get(format,index,field,setter){var locale=locale_locales__getLocale(),utc=create_utc__createUTC().set(setter,index);return locale[field](utc,format)}function list(format,index,field,count,setter){if("number"==typeof format&&(index=format,format=void 0),format=format||"",null!=index)return lists__get(format,index,field,setter);var i,out=[];for(i=0;i<count;i++)out[i]=lists__get(format,i,field,setter);return out}function lists__listMonths(format,index){return list(format,index,"months",12,"month")}function lists__listMonthsShort(format,index){return list(format,index,"monthsShort",12,"month")}function lists__listWeekdays(format,index){return list(format,index,"weekdays",7,"day")}function lists__listWeekdaysShort(format,index){return list(format,index,"weekdaysShort",7,"day")}function lists__listWeekdaysMin(format,index){return list(format,index,"weekdaysMin",7,"day")}function duration_abs__abs(){var data=this._data;return this._milliseconds=mathAbs(this._milliseconds),this._days=mathAbs(this._days),this._months=mathAbs(this._months),data.milliseconds=mathAbs(data.milliseconds),data.seconds=mathAbs(data.seconds),data.minutes=mathAbs(data.minutes),data.hours=mathAbs(data.hours),data.months=mathAbs(data.months),data.years=mathAbs(data.years),this}function duration_add_subtract__addSubtract(duration,input,value,direction){var other=create__createDuration(input,value);return duration._milliseconds+=direction*other._milliseconds,duration._days+=direction*other._days,duration._months+=direction*other._months,duration._bubble()}function duration_add_subtract__add(input,value){return duration_add_subtract__addSubtract(this,input,value,1)}function duration_add_subtract__subtract(input,value){return duration_add_subtract__addSubtract(this,input,value,-1)}function absCeil(number){return number<0?Math.floor(number):Math.ceil(number)}function bubble(){var seconds,minutes,hours,years,monthsFromDays,milliseconds=this._milliseconds,days=this._days,months=this._months,data=this._data;return milliseconds>=0&&days>=0&&months>=0||milliseconds<=0&&days<=0&&months<=0||(milliseconds+=864e5*absCeil(monthsToDays(months)+days),days=0,months=0),data.milliseconds=milliseconds%1e3,seconds=absFloor(milliseconds/1e3),data.seconds=seconds%60,minutes=absFloor(seconds/60),data.minutes=minutes%60,hours=absFloor(minutes/60),data.hours=hours%24,days+=absFloor(hours/24),monthsFromDays=absFloor(daysToMonths(days)),months+=monthsFromDays,days-=absCeil(monthsToDays(monthsFromDays)),years=absFloor(months/12),months%=12,data.days=days,data.months=months,data.years=years,this}function daysToMonths(days){return 4800*days/146097}function monthsToDays(months){return 146097*months/4800}function as(units){var days,months,milliseconds=this._milliseconds;if("month"===(units=normalizeUnits(units))||"year"===units)return days=this._days+milliseconds/864e5,months=this._months+daysToMonths(days),"month"===units?months:months/12;switch(days=this._days+Math.round(monthsToDays(this._months)),units){case"week":return days/7+milliseconds/6048e5;case"day":return days+milliseconds/864e5;case"hour":return 24*days+milliseconds/36e5;case"minute":return 1440*days+milliseconds/6e4;case"second":return 86400*days+milliseconds/1e3;case"millisecond":return Math.floor(864e5*days)+milliseconds;default:throw new Error("Unknown unit "+units)}}function duration_as__valueOf(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*toInt(this._months/12)}function makeAs(alias){return function(){return this.as(alias)}}function duration_get__get(units){return units=normalizeUnits(units),this[units+"s"]()}function makeGetter(name){return function(){return this._data[name]}}function weeks(){return absFloor(this.days()/7)}function substituteTimeAgo(string,number,withoutSuffix,isFuture,locale){return locale.relativeTime(number||1,!!withoutSuffix,string,isFuture)}function duration_humanize__relativeTime(posNegDuration,withoutSuffix,locale){var duration=create__createDuration(posNegDuration).abs(),seconds=round(duration.as("s")),minutes=round(duration.as("m")),hours=round(duration.as("h")),days=round(duration.as("d")),months=round(duration.as("M")),years=round(duration.as("y")),a=seconds<thresholds.s&&["s",seconds]||1===minutes&&["m"]||minutes<thresholds.m&&["mm",minutes]||1===hours&&["h"]||hours<thresholds.h&&["hh",hours]||1===days&&["d"]||days<thresholds.d&&["dd",days]||1===months&&["M"]||months<thresholds.M&&["MM",months]||1===years&&["y"]||["yy",years];return a[2]=withoutSuffix,a[3]=+posNegDuration>0,a[4]=locale,substituteTimeAgo.apply(null,a)}function duration_humanize__getSetRelativeTimeThreshold(threshold,limit){return void 0!==thresholds[threshold]&&(void 0===limit?thresholds[threshold]:(thresholds[threshold]=limit,!0))}function humanize(withSuffix){var locale=this.localeData(),output=duration_humanize__relativeTime(this,!withSuffix,locale);return withSuffix&&(output=locale.pastFuture(+this,output)),locale.postformat(output)}function iso_string__toISOString(){var minutes,hours,years,seconds=iso_string__abs(this._milliseconds)/1e3,days=iso_string__abs(this._days),months=iso_string__abs(this._months);minutes=absFloor(seconds/60),hours=absFloor(minutes/60),seconds%=60,minutes%=60,years=absFloor(months/12),months%=12;var Y=years,M=months,D=days,h=hours,m=minutes,s=seconds,total=this.asSeconds();return total?(total<0?"-":"")+"P"+(Y?Y+"Y":"")+(M?M+"M":"")+(D?D+"D":"")+(h||m||s?"T":"")+(h?h+"H":"")+(m?m+"M":"")+(s?s+"S":""):"P0D"}var hookCallback,globalLocale,momentProperties=utils_hooks__hooks.momentProperties=[],updateInProgress=!1,locales={},aliases={},formattingTokens=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,localFormattingTokens=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,formatFunctions={},formatTokenFunctions={},match6=/[+-]?\d{6}/,matchOffset=/Z|[+-]\d\d:?\d\d/gi,matchWord=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,regexes={},tokens={},YEAR=0,MONTH=1,DATE=2,HOUR=3,MINUTE=4,SECOND=5,MILLISECOND=6;addFormatToken("M",["MM",2],"Mo",function(){return this.month()+1}),addFormatToken("MMM",0,0,function(format){return this.localeData().monthsShort(this,format)}),addFormatToken("MMMM",0,0,function(format){return this.localeData().months(this,format)}),addUnitAlias("month","M"),addRegexToken("M",/\d\d?/),addRegexToken("MM",/\d\d?/,/\d\d/),addRegexToken("MMM",matchWord),addRegexToken("MMMM",matchWord),addParseToken(["M","MM"],function(input,array){array[MONTH]=toInt(input)-1}),addParseToken(["MMM","MMMM"],function(input,array,config,token){var month=config._locale.monthsParse(input,token,config._strict);null!=month?array[MONTH]=month:getParsingFlags(config).invalidMonth=input});var defaultLocaleMonths="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),defaultLocaleMonthsShort="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),deprecations={};utils_hooks__hooks.suppressDeprecationWarnings=!1;var from_string__isoRegex=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,isoDates=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],isoTimes=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],aspNetJsonRegex=/^\/?Date\((\-?\d+)/i;utils_hooks__hooks.createFromInputFallback=deprecate("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(config){config._d=new Date(config._i+(config._useUTC?" UTC":""))}),addFormatToken(0,["YY",2],0,function(){return this.year()%100}),addFormatToken(0,["YYYY",4],0,"year"),addFormatToken(0,["YYYYY",5],0,"year"),addFormatToken(0,["YYYYYY",6,!0],0,"year"),addUnitAlias("year","y"),addRegexToken("Y",/[+-]?\d+/),addRegexToken("YY",/\d\d?/,/\d\d/),addRegexToken("YYYY",/\d{1,4}/,/\d{4}/),addRegexToken("YYYYY",/[+-]?\d{1,6}/,match6),addRegexToken("YYYYYY",/[+-]?\d{1,6}/,match6),addParseToken(["YYYYY","YYYYYY"],YEAR),addParseToken("YYYY",function(input,array){array[YEAR]=2===input.length?utils_hooks__hooks.parseTwoDigitYear(input):toInt(input)}),addParseToken("YY",function(input,array){array[YEAR]=utils_hooks__hooks.parseTwoDigitYear(input)}),utils_hooks__hooks.parseTwoDigitYear=function(input){return toInt(input)+(toInt(input)>68?1900:2e3)};var getSetYear=makeGetSet("FullYear",!1);addFormatToken("w",["ww",2],"wo","week"),addFormatToken("W",["WW",2],"Wo","isoWeek"),addUnitAlias("week","w"),addUnitAlias("isoWeek","W"),addRegexToken("w",/\d\d?/),addRegexToken("ww",/\d\d?/,/\d\d/),addRegexToken("W",/\d\d?/),addRegexToken("WW",/\d\d?/,/\d\d/),addWeekParseToken(["w","ww","W","WW"],function(input,week,config,token){week[token.substr(0,1)]=toInt(input)});var defaultLocaleWeek={dow:0,doy:6};addFormatToken("DDD",["DDDD",3],"DDDo","dayOfYear"),addUnitAlias("dayOfYear","DDD"),addRegexToken("DDD",/\d{1,3}/),addRegexToken("DDDD",/\d{3}/),addParseToken(["DDD","DDDD"],function(input,array,config){config._dayOfYear=toInt(input)}),utils_hooks__hooks.ISO_8601=function(){};var prototypeMin=deprecate("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var other=local__createLocal.apply(null,arguments);return other<this?this:other}),prototypeMax=deprecate("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var other=local__createLocal.apply(null,arguments);return other>this?this:other});offset("Z",":"),offset("ZZ",""),addRegexToken("Z",matchOffset),addRegexToken("ZZ",matchOffset),addParseToken(["Z","ZZ"],function(input,array,config){config._useUTC=!0,config._tzm=offsetFromString(input)});var chunkOffset=/([\+\-]|\d\d)/gi;utils_hooks__hooks.updateOffset=function(){};var aspNetRegex=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,create__isoRegex=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;create__createDuration.fn=Duration.prototype;var add_subtract__add=createAdder(1,"add"),add_subtract__subtract=createAdder(-1,"subtract");utils_hooks__hooks.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var lang=deprecate("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(key){return void 0===key?this.localeData():this.locale(key)});addFormatToken(0,["gg",2],0,function(){return this.weekYear()%100}),addFormatToken(0,["GG",2],0,function(){return this.isoWeekYear()%100}),addWeekYearFormatToken("gggg","weekYear"),addWeekYearFormatToken("ggggg","weekYear"),addWeekYearFormatToken("GGGG","isoWeekYear"),addWeekYearFormatToken("GGGGG","isoWeekYear"),addUnitAlias("weekYear","gg"),addUnitAlias("isoWeekYear","GG"),addRegexToken("G",/[+-]?\d+/),addRegexToken("g",/[+-]?\d+/),addRegexToken("GG",/\d\d?/,/\d\d/),addRegexToken("gg",/\d\d?/,/\d\d/),addRegexToken("GGGG",/\d{1,4}/,/\d{4}/),addRegexToken("gggg",/\d{1,4}/,/\d{4}/),addRegexToken("GGGGG",/[+-]?\d{1,6}/,match6),addRegexToken("ggggg",/[+-]?\d{1,6}/,match6),addWeekParseToken(["gggg","ggggg","GGGG","GGGGG"],function(input,week,config,token){week[token.substr(0,2)]=toInt(input)}),addWeekParseToken(["gg","GG"],function(input,week,config,token){week[token]=utils_hooks__hooks.parseTwoDigitYear(input)}),addFormatToken("Q",0,0,"quarter"),addUnitAlias("quarter","Q"),addRegexToken("Q",/\d/),addParseToken("Q",function(input,array){array[MONTH]=3*(toInt(input)-1)}),addFormatToken("D",["DD",2],"Do","date"),addUnitAlias("date","D"),addRegexToken("D",/\d\d?/),addRegexToken("DD",/\d\d?/,/\d\d/),addRegexToken("Do",function(isStrict,locale){return isStrict?locale._ordinalParse:locale._ordinalParseLenient}),addParseToken(["D","DD"],DATE),addParseToken("Do",function(input,array){array[DATE]=toInt(input.match(/\d\d?/)[0],10)});var getSetDayOfMonth=makeGetSet("Date",!0);addFormatToken("d",0,"do","day"),addFormatToken("dd",0,0,function(format){return this.localeData().weekdaysMin(this,format)}),addFormatToken("ddd",0,0,function(format){return this.localeData().weekdaysShort(this,format)}),addFormatToken("dddd",0,0,function(format){return this.localeData().weekdays(this,format)}),addFormatToken("e",0,0,"weekday"),addFormatToken("E",0,0,"isoWeekday"),addUnitAlias("day","d"),addUnitAlias("weekday","e"),addUnitAlias("isoWeekday","E"),addRegexToken("d",/\d\d?/),addRegexToken("e",/\d\d?/),addRegexToken("E",/\d\d?/),addRegexToken("dd",matchWord),addRegexToken("ddd",matchWord),addRegexToken("dddd",matchWord),addWeekParseToken(["dd","ddd","dddd"],function(input,week,config){var weekday=config._locale.weekdaysParse(input);null!=weekday?week.d=weekday:getParsingFlags(config).invalidWeekday=input}),addWeekParseToken(["d","e","E"],function(input,week,config,token){week[token]=toInt(input)});var defaultLocaleWeekdays="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),defaultLocaleWeekdaysShort="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),defaultLocaleWeekdaysMin="Su_Mo_Tu_We_Th_Fr_Sa".split("_");addFormatToken("H",["HH",2],0,"hour"),addFormatToken("h",["hh",2],0,function(){return this.hours()%12||12}),meridiem("a",!0),meridiem("A",!1),addUnitAlias("hour","h"),addRegexToken("a",matchMeridiem),addRegexToken("A",matchMeridiem),addRegexToken("H",/\d\d?/),addRegexToken("h",/\d\d?/),addRegexToken("HH",/\d\d?/,/\d\d/),addRegexToken("hh",/\d\d?/,/\d\d/),addParseToken(["H","HH"],HOUR),addParseToken(["a","A"],function(input,array,config){config._isPm=config._locale.isPM(input),config._meridiem=input}),addParseToken(["h","hh"],function(input,array,config){array[HOUR]=toInt(input),getParsingFlags(config).bigHour=!0});var getSetHour=makeGetSet("Hours",!0);addFormatToken("m",["mm",2],0,"minute"),addUnitAlias("minute","m"),addRegexToken("m",/\d\d?/),
addRegexToken("mm",/\d\d?/,/\d\d/),addParseToken(["m","mm"],MINUTE);var getSetMinute=makeGetSet("Minutes",!1);addFormatToken("s",["ss",2],0,"second"),addUnitAlias("second","s"),addRegexToken("s",/\d\d?/),addRegexToken("ss",/\d\d?/,/\d\d/),addParseToken(["s","ss"],SECOND);var getSetSecond=makeGetSet("Seconds",!1);addFormatToken("S",0,0,function(){return~~(this.millisecond()/100)}),addFormatToken(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),addFormatToken(0,["SSS",3],0,"millisecond"),addFormatToken(0,["SSSS",4],0,function(){return 10*this.millisecond()}),addFormatToken(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),addFormatToken(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),addFormatToken(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),addFormatToken(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),addFormatToken(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),addUnitAlias("millisecond","ms"),addRegexToken("S",/\d{1,3}/,/\d/),addRegexToken("SS",/\d{1,3}/,/\d\d/),addRegexToken("SSS",/\d{1,3}/,/\d{3}/);var token;for(token="SSSS";token.length<=9;token+="S")addRegexToken(token,/\d+/);for(token="S";token.length<=9;token+="S")addParseToken(token,parseMs);var getSetMillisecond=makeGetSet("Milliseconds",!1);addFormatToken("z",0,0,"zoneAbbr"),addFormatToken("zz",0,0,"zoneName");var momentPrototype__proto=Moment.prototype;momentPrototype__proto.add=add_subtract__add,momentPrototype__proto.calendar=moment_calendar__calendar,momentPrototype__proto.clone=clone,momentPrototype__proto.diff=diff,momentPrototype__proto.endOf=endOf,momentPrototype__proto.format=format,momentPrototype__proto.from=from,momentPrototype__proto.fromNow=fromNow,momentPrototype__proto.to=to,momentPrototype__proto.toNow=toNow,momentPrototype__proto.get=getSet,momentPrototype__proto.invalidAt=invalidAt,momentPrototype__proto.isAfter=isAfter,momentPrototype__proto.isBefore=isBefore,momentPrototype__proto.isBetween=isBetween,momentPrototype__proto.isSame=isSame,momentPrototype__proto.isValid=moment_valid__isValid,momentPrototype__proto.lang=lang,momentPrototype__proto.locale=locale,momentPrototype__proto.localeData=localeData,momentPrototype__proto.max=prototypeMax,momentPrototype__proto.min=prototypeMin,momentPrototype__proto.parsingFlags=parsingFlags,momentPrototype__proto.set=getSet,momentPrototype__proto.startOf=startOf,momentPrototype__proto.subtract=add_subtract__subtract,momentPrototype__proto.toArray=toArray,momentPrototype__proto.toObject=toObject,momentPrototype__proto.toDate=toDate,momentPrototype__proto.toISOString=moment_format__toISOString,momentPrototype__proto.toJSON=moment_format__toISOString,momentPrototype__proto.toString=toString,momentPrototype__proto.unix=unix,momentPrototype__proto.valueOf=to_type__valueOf,momentPrototype__proto.year=getSetYear,momentPrototype__proto.isLeapYear=getIsLeapYear,momentPrototype__proto.weekYear=getSetWeekYear,momentPrototype__proto.isoWeekYear=getSetISOWeekYear,momentPrototype__proto.quarter=momentPrototype__proto.quarters=getSetQuarter,momentPrototype__proto.month=getSetMonth,momentPrototype__proto.daysInMonth=getDaysInMonth,momentPrototype__proto.week=momentPrototype__proto.weeks=getSetWeek,momentPrototype__proto.isoWeek=momentPrototype__proto.isoWeeks=getSetISOWeek,momentPrototype__proto.weeksInYear=getWeeksInYear,momentPrototype__proto.isoWeeksInYear=getISOWeeksInYear,momentPrototype__proto.date=getSetDayOfMonth,momentPrototype__proto.day=momentPrototype__proto.days=getSetDayOfWeek,momentPrototype__proto.weekday=getSetLocaleDayOfWeek,momentPrototype__proto.isoWeekday=getSetISODayOfWeek,momentPrototype__proto.dayOfYear=getSetDayOfYear,momentPrototype__proto.hour=momentPrototype__proto.hours=getSetHour,momentPrototype__proto.minute=momentPrototype__proto.minutes=getSetMinute,momentPrototype__proto.second=momentPrototype__proto.seconds=getSetSecond,momentPrototype__proto.millisecond=momentPrototype__proto.milliseconds=getSetMillisecond,momentPrototype__proto.utcOffset=getSetOffset,momentPrototype__proto.utc=setOffsetToUTC,momentPrototype__proto.local=setOffsetToLocal,momentPrototype__proto.parseZone=setOffsetToParsedOffset,momentPrototype__proto.hasAlignedHourOffset=hasAlignedHourOffset,momentPrototype__proto.isDST=isDaylightSavingTime,momentPrototype__proto.isDSTShifted=isDaylightSavingTimeShifted,momentPrototype__proto.isLocal=isLocal,momentPrototype__proto.isUtcOffset=isUtcOffset,momentPrototype__proto.isUtc=isUtc,momentPrototype__proto.isUTC=isUtc,momentPrototype__proto.zoneAbbr=getZoneAbbr,momentPrototype__proto.zoneName=getZoneName,momentPrototype__proto.dates=deprecate("dates accessor is deprecated. Use date instead.",getSetDayOfMonth),momentPrototype__proto.months=deprecate("months accessor is deprecated. Use month instead",getSetMonth),momentPrototype__proto.years=deprecate("years accessor is deprecated. Use year instead",getSetYear),momentPrototype__proto.zone=deprecate("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",getSetZone);var momentPrototype=momentPrototype__proto,defaultCalendar={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},defaultLongDateFormat={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},defaultRelativeTime={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},prototype__proto=Locale.prototype;prototype__proto._calendar=defaultCalendar,prototype__proto.calendar=locale_calendar__calendar,prototype__proto._longDateFormat=defaultLongDateFormat,prototype__proto.longDateFormat=longDateFormat,prototype__proto._invalidDate="Invalid date",prototype__proto.invalidDate=invalidDate,prototype__proto._ordinal="%d",prototype__proto.ordinal=ordinal,prototype__proto._ordinalParse=/\d{1,2}/,prototype__proto.preparse=preParsePostFormat,prototype__proto.postformat=preParsePostFormat,prototype__proto._relativeTime=defaultRelativeTime,prototype__proto.relativeTime=relative__relativeTime,prototype__proto.pastFuture=pastFuture,prototype__proto.set=locale_set__set,prototype__proto.months=localeMonths,prototype__proto._months=defaultLocaleMonths,prototype__proto.monthsShort=localeMonthsShort,prototype__proto._monthsShort=defaultLocaleMonthsShort,prototype__proto.monthsParse=localeMonthsParse,prototype__proto.week=localeWeek,prototype__proto._week=defaultLocaleWeek,prototype__proto.firstDayOfYear=localeFirstDayOfYear,prototype__proto.firstDayOfWeek=localeFirstDayOfWeek,prototype__proto.weekdays=localeWeekdays,prototype__proto._weekdays=defaultLocaleWeekdays,prototype__proto.weekdaysMin=localeWeekdaysMin,prototype__proto._weekdaysMin=defaultLocaleWeekdaysMin,prototype__proto.weekdaysShort=localeWeekdaysShort,prototype__proto._weekdaysShort=defaultLocaleWeekdaysShort,prototype__proto.weekdaysParse=localeWeekdaysParse,prototype__proto.isPM=localeIsPM,prototype__proto._meridiemParse=/[ap]\.?m?\.?/i,prototype__proto.meridiem=localeMeridiem,locale_locales__getSetGlobalLocale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(number){var b=number%10;return number+(1===toInt(number%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th")}}),utils_hooks__hooks.lang=deprecate("moment.lang is deprecated. Use moment.locale instead.",locale_locales__getSetGlobalLocale),utils_hooks__hooks.langData=deprecate("moment.langData is deprecated. Use moment.localeData instead.",locale_locales__getLocale);var mathAbs=Math.abs,asMilliseconds=makeAs("ms"),asSeconds=makeAs("s"),asMinutes=makeAs("m"),asHours=makeAs("h"),asDays=makeAs("d"),asWeeks=makeAs("w"),asMonths=makeAs("M"),asYears=makeAs("y"),milliseconds=makeGetter("milliseconds"),seconds=makeGetter("seconds"),minutes=makeGetter("minutes"),hours=makeGetter("hours"),days=makeGetter("days"),months=makeGetter("months"),years=makeGetter("years"),round=Math.round,thresholds={s:45,m:45,h:22,d:26,M:11},iso_string__abs=Math.abs,duration_prototype__proto=Duration.prototype;return duration_prototype__proto.abs=duration_abs__abs,duration_prototype__proto.add=duration_add_subtract__add,duration_prototype__proto.subtract=duration_add_subtract__subtract,duration_prototype__proto.as=as,duration_prototype__proto.asMilliseconds=asMilliseconds,duration_prototype__proto.asSeconds=asSeconds,duration_prototype__proto.asMinutes=asMinutes,duration_prototype__proto.asHours=asHours,duration_prototype__proto.asDays=asDays,duration_prototype__proto.asWeeks=asWeeks,duration_prototype__proto.asMonths=asMonths,duration_prototype__proto.asYears=asYears,duration_prototype__proto.valueOf=duration_as__valueOf,duration_prototype__proto._bubble=bubble,duration_prototype__proto.get=duration_get__get,duration_prototype__proto.milliseconds=milliseconds,duration_prototype__proto.seconds=seconds,duration_prototype__proto.minutes=minutes,duration_prototype__proto.hours=hours,duration_prototype__proto.days=days,duration_prototype__proto.weeks=weeks,duration_prototype__proto.months=months,duration_prototype__proto.years=years,duration_prototype__proto.humanize=humanize,duration_prototype__proto.toISOString=iso_string__toISOString,duration_prototype__proto.toString=iso_string__toISOString,duration_prototype__proto.toJSON=iso_string__toISOString,duration_prototype__proto.locale=locale,duration_prototype__proto.localeData=localeData,duration_prototype__proto.toIsoString=deprecate("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",iso_string__toISOString),duration_prototype__proto.lang=lang,addFormatToken("X",0,0,"unix"),addFormatToken("x",0,0,"valueOf"),addRegexToken("x",/[+-]?\d+/),addRegexToken("X",/[+-]?\d+(\.\d{1,3})?/),addParseToken("X",function(input,array,config){config._d=new Date(1e3*parseFloat(input,10))}),addParseToken("x",function(input,array,config){config._d=new Date(toInt(input))}),utils_hooks__hooks.version="2.10.6",function(callback){hookCallback=callback}(local__createLocal),utils_hooks__hooks.fn=momentPrototype,utils_hooks__hooks.min=min,utils_hooks__hooks.max=max,utils_hooks__hooks.utc=create_utc__createUTC,utils_hooks__hooks.unix=moment__createUnix,utils_hooks__hooks.months=lists__listMonths,utils_hooks__hooks.isDate=isDate,utils_hooks__hooks.locale=locale_locales__getSetGlobalLocale,utils_hooks__hooks.invalid=valid__createInvalid,utils_hooks__hooks.duration=create__createDuration,utils_hooks__hooks.isMoment=isMoment,utils_hooks__hooks.weekdays=lists__listWeekdays,utils_hooks__hooks.parseZone=moment__createInZone,utils_hooks__hooks.localeData=locale_locales__getLocale,utils_hooks__hooks.isDuration=isDuration,utils_hooks__hooks.monthsShort=lists__listMonthsShort,utils_hooks__hooks.weekdaysMin=lists__listWeekdaysMin,utils_hooks__hooks.defineLocale=defineLocale,utils_hooks__hooks.weekdaysShort=lists__listWeekdaysShort,utils_hooks__hooks.normalizeUnits=normalizeUnits,utils_hooks__hooks.relativeTimeThreshold=duration_humanize__getSetRelativeTimeThreshold,utils_hooks__hooks}),function(factory){"function"==typeof define&&define.amd?define(["jquery","moment"],factory):"object"==typeof exports?module.exports=factory(require("jquery"),require("moment")):factory(jQuery,moment)}(function($,moment){function mergeOptions(optionObjs){return mergeProps(optionObjs,complexOptions)}function massageOverrides(input){var subObj,overrides={views:input.views||{}};return $.each(input,function(name,val){"views"!=name&&($.isPlainObject(val)&&!/(time|duration|interval)$/i.test(name)&&-1==$.inArray(name,complexOptions)?(subObj=null,$.each(val,function(subName,subVal){/^(month|week|day|default|basic(Week|Day)?|agenda(Week|Day)?)$/.test(subName)?(overrides.views[subName]||(overrides.views[subName]={}),overrides.views[subName][name]=subVal):(subObj||(subObj={}),subObj[subName]=subVal)}),subObj&&(overrides[name]=subObj)):overrides[name]=val)}),overrides}function compensateScroll(rowEls,scrollbarWidths){scrollbarWidths.left&&rowEls.css({"border-left-width":1,"margin-left":scrollbarWidths.left-1}),scrollbarWidths.right&&rowEls.css({"border-right-width":1,"margin-right":scrollbarWidths.right-1})}function uncompensateScroll(rowEls){rowEls.css({"margin-left":"","margin-right":"","border-left-width":"","border-right-width":""})}function disableCursor(){$("body").addClass("fc-not-allowed")}function enableCursor(){$("body").removeClass("fc-not-allowed")}function distributeHeight(els,availableHeight,shouldRedistribute){var minOffset1=Math.floor(availableHeight/els.length),minOffset2=Math.floor(availableHeight-minOffset1*(els.length-1)),flexEls=[],flexOffsets=[],flexHeights=[],usedHeight=0;undistributeHeight(els),els.each(function(i,el){var minOffset=i===els.length-1?minOffset2:minOffset1,naturalOffset=$(el).outerHeight(!0);naturalOffset<minOffset?(flexEls.push(el),flexOffsets.push(naturalOffset),flexHeights.push($(el).height())):usedHeight+=naturalOffset}),shouldRedistribute&&(availableHeight-=usedHeight,minOffset1=Math.floor(availableHeight/flexEls.length),minOffset2=Math.floor(availableHeight-minOffset1*(flexEls.length-1))),$(flexEls).each(function(i,el){var minOffset=i===flexEls.length-1?minOffset2:minOffset1,naturalOffset=flexOffsets[i],naturalHeight=flexHeights[i],newHeight=minOffset-(naturalOffset-naturalHeight);naturalOffset<minOffset&&$(el).height(newHeight)})}function undistributeHeight(els){els.height("")}function matchCellWidths(els){var maxInnerWidth=0;return els.find("> span").each(function(i,innerEl){var innerWidth=$(innerEl).outerWidth();innerWidth>maxInnerWidth&&(maxInnerWidth=innerWidth)}),maxInnerWidth++,els.width(maxInnerWidth),maxInnerWidth}function subtractInnerElHeight(outerEl,innerEl){var diff,both=outerEl.add(innerEl);return both.css({position:"relative",left:-1}),diff=outerEl.outerHeight()-innerEl.outerHeight(),both.css({position:"",left:""}),diff}function getScrollParent(el){var position=el.css("position"),scrollParent=el.parents().filter(function(){var parent=$(this);return/(auto|scroll)/.test(parent.css("overflow")+parent.css("overflow-y")+parent.css("overflow-x"))}).eq(0);return"fixed"!==position&&scrollParent.length?scrollParent:$(el[0].ownerDocument||document)}function getOuterRect(el,origin){var offset=el.offset(),left=offset.left-(origin?origin.left:0),top=offset.top-(origin?origin.top:0);return{left:left,right:left+el.outerWidth(),top:top,bottom:top+el.outerHeight()}}function getClientRect(el,origin){var offset=el.offset(),scrollbarWidths=getScrollbarWidths(el),left=offset.left+getCssFloat(el,"border-left-width")+scrollbarWidths.left-(origin?origin.left:0),top=offset.top+getCssFloat(el,"border-top-width")+scrollbarWidths.top-(origin?origin.top:0);return{left:left,right:left+el[0].clientWidth,top:top,bottom:top+el[0].clientHeight}}function getContentRect(el,origin){var offset=el.offset(),left=offset.left+getCssFloat(el,"border-left-width")+getCssFloat(el,"padding-left")-(origin?origin.left:0),top=offset.top+getCssFloat(el,"border-top-width")+getCssFloat(el,"padding-top")-(origin?origin.top:0);return{left:left,right:left+el.width(),top:top,bottom:top+el.height()}}function getScrollbarWidths(el){var leftRightWidth=el.innerWidth()-el[0].clientWidth,widths={left:0,right:0,top:0,bottom:el.innerHeight()-el[0].clientHeight};return getIsLeftRtlScrollbars()&&"rtl"==el.css("direction")?widths.left=leftRightWidth:widths.right=leftRightWidth,widths}function getIsLeftRtlScrollbars(){return null===_isLeftRtlScrollbars&&(_isLeftRtlScrollbars=computeIsLeftRtlScrollbars()),_isLeftRtlScrollbars}function computeIsLeftRtlScrollbars(){var el=$("<div><div/></div>").css({position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}).appendTo("body"),innerEl=el.children(),res=innerEl.offset().left>el.offset().left;return el.remove(),res}function getCssFloat(el,prop){return parseFloat(el.css(prop))||0}function isPrimaryMouseButton(ev){return 1==ev.which&&!ev.ctrlKey}function getEvX(ev){if(void 0!==ev.pageX)return ev.pageX;var touches=ev.originalEvent.touches;return touches?touches[0].pageX:void 0}function getEvY(ev){if(void 0!==ev.pageY)return ev.pageY;var touches=ev.originalEvent.touches;return touches?touches[0].pageY:void 0}function getEvIsTouch(ev){return/^touch/.test(ev.type)}function preventSelection(el){el.addClass("fc-unselectable").on("selectstart",preventDefault)}function preventDefault(ev){ev.preventDefault()}function bindAnyScroll(handler){return!!window.addEventListener&&(window.addEventListener("scroll",handler,!0),!0)}function unbindAnyScroll(handler){return!!window.removeEventListener&&(window.removeEventListener("scroll",handler,!0),!0)}function intersectRects(rect1,rect2){var res={left:Math.max(rect1.left,rect2.left),right:Math.min(rect1.right,rect2.right),top:Math.max(rect1.top,rect2.top),bottom:Math.min(rect1.bottom,rect2.bottom)};return res.left<res.right&&res.top<res.bottom&&res}function constrainPoint(point,rect){return{left:Math.min(Math.max(point.left,rect.left),rect.right),top:Math.min(Math.max(point.top,rect.top),rect.bottom)}}function getRectCenter(rect){return{left:(rect.left+rect.right)/2,top:(rect.top+rect.bottom)/2}}function diffPoints(point1,point2){return{left:point1.left-point2.left,top:point1.top-point2.top}}function parseFieldSpecs(input){var i,token,specs=[],tokens=[];for("string"==typeof input?tokens=input.split(/\s*,\s*/):"function"==typeof input?tokens=[input]:$.isArray(input)&&(tokens=input),i=0;i<tokens.length;i++)token=tokens[i],"string"==typeof token?specs.push("-"==token.charAt(0)?{field:token.substring(1),order:-1}:{field:token,order:1}):"function"==typeof token&&specs.push({func:token});return specs}function compareByFieldSpecs(obj1,obj2,fieldSpecs){var i,cmp;for(i=0;i<fieldSpecs.length;i++)if(cmp=compareByFieldSpec(obj1,obj2,fieldSpecs[i]))return cmp;return 0}function compareByFieldSpec(obj1,obj2,fieldSpec){return fieldSpec.func?fieldSpec.func(obj1,obj2):flexibleCompare(obj1[fieldSpec.field],obj2[fieldSpec.field])*(fieldSpec.order||1)}function flexibleCompare(a,b){return a||b?null==b?-1:null==a?1:"string"===$.type(a)||"string"===$.type(b)?String(a).localeCompare(String(b)):a-b:0}function intersectRanges(subjectRange,constraintRange){var segStart,segEnd,isStart,isEnd,subjectStart=subjectRange.start,subjectEnd=subjectRange.end,constraintStart=constraintRange.start,constraintEnd=constraintRange.end;if(subjectEnd>constraintStart&&subjectStart<constraintEnd)return subjectStart>=constraintStart?(segStart=subjectStart.clone(),isStart=!0):(segStart=constraintStart.clone(),isStart=!1),subjectEnd<=constraintEnd?(segEnd=subjectEnd.clone(),isEnd=!0):(segEnd=constraintEnd.clone(),isEnd=!1),{start:segStart,end:segEnd,isStart:isStart,isEnd:isEnd}}function diffDayTime(a,b){return moment.duration({days:a.clone().stripTime().diff(b.clone().stripTime(),"days"),ms:a.time()-b.time()})}function diffDay(a,b){return moment.duration({days:a.clone().stripTime().diff(b.clone().stripTime(),"days")})}function diffByUnit(a,b,unit){return moment.duration(Math.round(a.diff(b,unit,!0)),unit)}function computeIntervalUnit(start,end){var i,unit,val;for(i=0;i<intervalUnits.length&&(unit=intervalUnits[i],!((val=computeRangeAs(unit,start,end))>=1&&isInt(val)));i++);return unit}function computeRangeAs(unit,start,end){return null!=end?end.diff(start,unit,!0):moment.isDuration(start)?start.as(unit):start.end.diff(start.start,unit,!0)}function divideRangeByDuration(start,end,dur){var months;return durationHasTime(dur)?(end-start)/dur:(months=dur.asMonths(),Math.abs(months)>=1&&isInt(months)?end.diff(start,"months",!0)/months:end.diff(start,"days",!0)/dur.asDays())}function divideDurationByDuration(dur1,dur2){var months1,months2;return durationHasTime(dur1)||durationHasTime(dur2)?dur1/dur2:(months1=dur1.asMonths(),months2=dur2.asMonths(),Math.abs(months1)>=1&&isInt(months1)&&Math.abs(months2)>=1&&isInt(months2)?months1/months2:dur1.asDays()/dur2.asDays())}function multiplyDuration(dur,n){var months;return durationHasTime(dur)?moment.duration(dur*n):(months=dur.asMonths(),Math.abs(months)>=1&&isInt(months)?moment.duration({months:months*n}):moment.duration({days:dur.asDays()*n}))}function durationHasTime(dur){return Boolean(dur.hours()||dur.minutes()||dur.seconds()||dur.milliseconds())}function isNativeDate(input){return"[object Date]"===Object.prototype.toString.call(input)||input instanceof Date}function isTimeString(str){return/^\d+\:\d+(?:\:\d+\.?(?:\d{3})?)?$/.test(str)}function mergeProps(propObjs,complexProps){var i,name,complexObjs,j,val,props,dest={};if(complexProps)for(i=0;i<complexProps.length;i++){for(name=complexProps[i],complexObjs=[],j=propObjs.length-1;j>=0;j--)if("object"==typeof(val=propObjs[j][name]))complexObjs.unshift(val);else if(void 0!==val){dest[name]=val;break}complexObjs.length&&(dest[name]=mergeProps(complexObjs))}for(i=propObjs.length-1;i>=0;i--){props=propObjs[i];for(name in props)name in dest||(dest[name]=props[name])}return dest}function createObject(proto){var f=function(){};return f.prototype=proto,new f}function copyOwnProps(src,dest){for(var name in src)hasOwnProp(src,name)&&(dest[name]=src[name])}function copyNativeMethods(src,dest){var i,name,names=["constructor","toString","valueOf"];for(i=0;i<names.length;i++)name=names[i],src[name]!==Object.prototype[name]&&(dest[name]=src[name])}function hasOwnProp(obj,name){return hasOwnPropMethod.call(obj,name)}function isAtomic(val){return/undefined|null|boolean|number|string/.test($.type(val))}function applyAll(functions,thisObj,args){if($.isFunction(functions)&&(functions=[functions]),functions){var i,ret;for(i=0;i<functions.length;i++)ret=functions[i].apply(thisObj,args)||ret;return ret}}function firstDefined(){for(var i=0;i<arguments.length;i++)if(void 0!==arguments[i])return arguments[i]}function htmlEscape(s){return(s+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function stripHtmlEntities(text){return text.replace(/&.*?;/g,"")}function cssToStr(cssProps){var statements=[];return $.each(cssProps,function(name,val){null!=val&&statements.push(name+":"+val)}),statements.join(";")}function capitaliseFirstLetter(str){return str.charAt(0).toUpperCase()+str.slice(1)}function compareNumbers(a,b){return a-b}function isInt(n){return n%1==0}function proxy(obj,methodName){var method=obj[methodName];return function(){return method.apply(obj,arguments)}}function debounce(func,wait,immediate){var timeout,args,context,timestamp,result,later=function(){var last=+new Date-timestamp;last<wait?timeout=setTimeout(later,wait-last):(timeout=null,immediate||(result=func.apply(context,args),context=args=null))};return function(){context=this,args=arguments,timestamp=+new Date;var callNow=immediate&&!timeout;return timeout||(timeout=setTimeout(later,wait)),callNow&&(result=func.apply(context,args),context=args=null),result}}function makeMoment(args,parseAsUTC,parseZone){var isAmbigTime,isAmbigZone,ambigMatch,mom,input=args[0],isSingleString=1==args.length&&"string"==typeof input;return moment.isMoment(input)?(mom=moment.apply(null,args),transferAmbigs(input,mom)):isNativeDate(input)||void 0===input?mom=moment.apply(null,args):(isAmbigTime=!1,isAmbigZone=!1,isSingleString?ambigDateOfMonthRegex.test(input)?(input+="-01",args=[input],isAmbigTime=!0,isAmbigZone=!0):(ambigMatch=ambigTimeOrZoneRegex.exec(input))&&(isAmbigTime=!ambigMatch[5],isAmbigZone=!0):$.isArray(input)&&(isAmbigZone=!0),mom=parseAsUTC||isAmbigTime?moment.utc.apply(moment,args):moment.apply(null,args),isAmbigTime?(mom._ambigTime=!0,mom._ambigZone=!0):parseZone&&(isAmbigZone?mom._ambigZone=!0:isSingleString&&(mom.utcOffset?mom.utcOffset(input):mom.zone(input)))),mom._fullCalendar=!0,mom}function commonlyAmbiguate(inputs,preserveTime){var i,mom,anyAmbigTime=!1,anyAmbigZone=!1,len=inputs.length,moms=[];for(i=0;i<len;i++)mom=inputs[i],moment.isMoment(mom)||(mom=FC.moment.parseZone(mom)),anyAmbigTime=anyAmbigTime||mom._ambigTime,anyAmbigZone=anyAmbigZone||mom._ambigZone,moms.push(mom);for(i=0;i<len;i++)mom=moms[i],preserveTime||!anyAmbigTime||mom._ambigTime?anyAmbigZone&&!mom._ambigZone&&(moms[i]=mom.clone().stripZone()):moms[i]=mom.clone().stripTime();return moms}function transferAmbigs(src,dest){src._ambigTime?dest._ambigTime=!0:dest._ambigTime&&(dest._ambigTime=!1),src._ambigZone?dest._ambigZone=!0:dest._ambigZone&&(dest._ambigZone=!1)}function setMomentValues(mom,a){mom.year(a[0]||0).month(a[1]||0).date(a[2]||0).hours(a[3]||0).minutes(a[4]||0).seconds(a[5]||0).milliseconds(a[6]||0)}function oldMomentFormat(mom,formatStr){return oldMomentProto.format.call(mom,formatStr)}function formatDate(date,formatStr){return formatDateWithChunks(date,getFormatStringChunks(formatStr))}function formatDateWithChunks(date,chunks){var i,s="";for(i=0;i<chunks.length;i++)s+=formatDateWithChunk(date,chunks[i]);return s}function formatDateWithChunk(date,chunk){var token,maybeStr;return"string"==typeof chunk?chunk:(token=chunk.token)?tokenOverrides[token]?tokenOverrides[token](date):oldMomentFormat(date,token):chunk.maybe&&(maybeStr=formatDateWithChunks(date,chunk.maybe),maybeStr.match(/[1-9]/))?maybeStr:""}function formatRange(date1,date2,formatStr,separator,isRTL){var localeData;return date1=FC.moment.parseZone(date1),date2=FC.moment.parseZone(date2),localeData=(date1.localeData||date1.lang).call(date1),formatStr=localeData.longDateFormat(formatStr)||formatStr,separator=separator||" - ",formatRangeWithChunks(date1,date2,getFormatStringChunks(formatStr),separator,isRTL)}function formatRangeWithChunks(date1,date2,chunks,separator,isRTL){var chunkStr,leftI,rightI,middleI,unzonedDate1=date1.clone().stripZone(),unzonedDate2=date2.clone().stripZone(),leftStr="",rightStr="",middleStr1="",middleStr2="",middleStr="";for(leftI=0;leftI<chunks.length&&!1!==(chunkStr=formatSimilarChunk(date1,date2,unzonedDate1,unzonedDate2,chunks[leftI]));leftI++)leftStr+=chunkStr;for(rightI=chunks.length-1;rightI>leftI&&!1!==(chunkStr=formatSimilarChunk(date1,date2,unzonedDate1,unzonedDate2,chunks[rightI]));rightI--)rightStr=chunkStr+rightStr;for(middleI=leftI;middleI<=rightI;middleI++)middleStr1+=formatDateWithChunk(date1,chunks[middleI]),middleStr2+=formatDateWithChunk(date2,chunks[middleI]);return(middleStr1||middleStr2)&&(middleStr=isRTL?middleStr2+separator+middleStr1:middleStr1+separator+middleStr2),leftStr+middleStr+rightStr}function formatSimilarChunk(date1,date2,unzonedDate1,unzonedDate2,chunk){var token,unit;return"string"==typeof chunk?chunk:!!((token=chunk.token)&&(unit=similarUnitMap[token.charAt(0)])&&unzonedDate1.isSame(unzonedDate2,unit))&&oldMomentFormat(date1,token)}function getFormatStringChunks(formatStr){return formatStr in formatStringChunkCache?formatStringChunkCache[formatStr]:formatStringChunkCache[formatStr]=chunkFormatString(formatStr)}function chunkFormatString(formatStr){for(var match,chunks=[],chunker=/\[([^\]]*)\]|\(([^\)]*)\)|(LTS|LT|(\w)\4*o?)|([^\w\[\(]+)/g;match=chunker.exec(formatStr);)match[1]?chunks.push(match[1]):match[2]?chunks.push({maybe:chunkFormatString(match[2])}):match[3]?chunks.push({token:match[3]}):match[5]&&chunks.push(match[5]);return chunks}function Class(){}function extendClass(superClass,members){var subClass;return hasOwnProp(members,"constructor")&&(subClass=members.constructor),"function"!=typeof subClass&&(subClass=members.constructor=function(){superClass.apply(this,arguments)}),subClass.prototype=createObject(superClass.prototype),copyOwnProps(members,subClass.prototype),copyNativeMethods(members,subClass.prototype),copyOwnProps(superClass,subClass),subClass}function mixIntoClass(theClass,members){copyOwnProps(members,theClass.prototype)}function isHitsEqual(hit0,hit1){return!hit0&&!hit1||!(!hit0||!hit1)&&(hit0.component===hit1.component&&isHitPropsWithin(hit0,hit1)&&isHitPropsWithin(hit1,hit0))}function isHitPropsWithin(subHit,superHit){for(var propName in subHit)if(!/^(component|left|right|top|bottom)$/.test(propName)&&subHit[propName]!==superHit[propName])return!1;return!0}function isBgEvent(event){var rendering=getEventRendering(event);return"background"===rendering||"inverse-background"===rendering}function isInverseBgEvent(event){return"inverse-background"===getEventRendering(event)}function getEventRendering(event){return firstDefined((event.source||{}).rendering,event.rendering)}function groupEventsById(events){var i,event,eventsById={};for(i=0;i<events.length;i++)event=events[i],(eventsById[event._id]||(eventsById[event._id]=[])).push(event);return eventsById}function compareRanges(range1,range2){return range1.start-range2.start}function getDraggedElMeta(el){var eventProps,startTime,duration,stick,prefix=FC.dataAttrPrefix;return prefix&&(prefix+="-"),eventProps=el.data(prefix+"event")||null,eventProps&&(eventProps="object"==typeof eventProps?$.extend({},eventProps):{},startTime=eventProps.start,null==startTime&&(startTime=eventProps.time),duration=eventProps.duration,stick=eventProps.stick,delete eventProps.start,delete eventProps.time,delete eventProps.duration,delete eventProps.stick),null==startTime&&(startTime=el.data(prefix+"start")),null==startTime&&(startTime=el.data(prefix+"time")),null==duration&&(duration=el.data(prefix+"duration")),null==stick&&(stick=el.data(prefix+"stick")),startTime=null!=startTime?moment.duration(startTime):null,duration=null!=duration?moment.duration(duration):null,stick=Boolean(stick),{eventProps:eventProps,startTime:startTime,duration:duration,stick:stick}}function isDaySegCollision(seg,otherSegs){var i,otherSeg;for(i=0;i<otherSegs.length;i++)if(otherSeg=otherSegs[i],otherSeg.leftCol<=seg.rightCol&&otherSeg.rightCol>=seg.leftCol)return!0;return!1}function compareDaySegCols(a,b){return a.leftCol-b.leftCol}function buildSlotSegLevels(segs){var i,seg,j,levels=[];for(i=0;i<segs.length;i++){for(seg=segs[i],j=0;j<levels.length&&computeSlotSegCollisions(seg,levels[j]).length;j++);seg.level=j,(levels[j]||(levels[j]=[])).push(seg)}return levels}function computeForwardSlotSegs(levels){var i,level,j,seg,k;for(i=0;i<levels.length;i++)for(level=levels[i],j=0;j<level.length;j++)for(seg=level[j],seg.forwardSegs=[],k=i+1;k<levels.length;k++)computeSlotSegCollisions(seg,levels[k],seg.forwardSegs)}function computeSlotSegPressures(seg){var i,forwardSeg,forwardSegs=seg.forwardSegs,forwardPressure=0;if(void 0===seg.forwardPressure){for(i=0;i<forwardSegs.length;i++)forwardSeg=forwardSegs[i],computeSlotSegPressures(forwardSeg),forwardPressure=Math.max(forwardPressure,1+forwardSeg.forwardPressure);seg.forwardPressure=forwardPressure}}function computeSlotSegCollisions(seg,otherSegs,results){results=results||[];for(var i=0;i<otherSegs.length;i++)isSlotSegCollision(seg,otherSegs[i])&&results.push(otherSegs[i]);return results}function isSlotSegCollision(seg1,seg2){return seg1.bottom>seg2.top&&seg1.top<seg2.bottom}function Calendar_constructor(element,overrides){function render(){content?elementVisible()&&(calcSize(),renderView()):initialRender()}function initialRender(){tm=options.theme?"ui":"fc",element.addClass("fc"),options.isRTL?element.addClass("fc-rtl"):element.addClass("fc-ltr"),options.theme?element.addClass("ui-widget"):element.addClass("fc-unthemed"),content=$("<div class='fc-view-container'/>").prependTo(element),header=t.header=new Header(t,options),headerElement=header.render(),headerElement&&element.prepend(headerElement),renderView(options.defaultView),options.handleWindowResize&&(windowResizeProxy=debounce(windowResize,options.windowResizeDelay),$(window).resize(windowResizeProxy))}function destroy(){currentView&&currentView.removeElement(),header.removeElement(),content.remove(),element.removeClass("fc fc-ltr fc-rtl fc-unthemed ui-widget"),windowResizeProxy&&$(window).unbind("resize",windowResizeProxy)}function elementVisible(){return element.is(":visible")}function renderView(viewType){ignoreWindowResize++,
currentView&&viewType&&currentView.type!==viewType&&(header.deactivateButton(currentView.type),freezeContentHeight(),currentView.removeElement(),currentView=t.view=null),!currentView&&viewType&&(currentView=t.view=viewsByType[viewType]||(viewsByType[viewType]=t.instantiateView(viewType)),currentView.setElement($("<div class='fc-view fc-"+viewType+"-view' />").appendTo(content)),header.activateButton(viewType)),currentView&&(date=currentView.massageCurrentDate(date),currentView.displaying&&date.isWithin(currentView.intervalStart,currentView.intervalEnd)||elementVisible()&&(currentView.display(date),unfreezeContentHeight(),updateHeaderTitle(),updateTodayButton(),getAndRenderEvents())),unfreezeContentHeight(),ignoreWindowResize--}function updateSize(shouldRecalc){if(elementVisible())return shouldRecalc&&_calcSize(),ignoreWindowResize++,currentView.updateSize(!0),ignoreWindowResize--,!0}function calcSize(){elementVisible()&&_calcSize()}function _calcSize(){suggestedViewHeight="number"==typeof options.contentHeight?options.contentHeight:"number"==typeof options.height?options.height-(headerElement?headerElement.outerHeight(!0):0):Math.round(content.width()/Math.max(options.aspectRatio,.5))}function windowResize(ev){!ignoreWindowResize&&ev.target===window&&currentView.start&&updateSize(!0)&&currentView.trigger("windowResize",_element)}function refetchEvents(){destroyEvents(),fetchAndRenderEvents()}function renderEvents(){elementVisible()&&(freezeContentHeight(),currentView.displayEvents(events),unfreezeContentHeight())}function destroyEvents(){freezeContentHeight(),currentView.clearEvents(),unfreezeContentHeight()}function getAndRenderEvents(){!options.lazyFetching||isFetchNeeded(currentView.start,currentView.end)?fetchAndRenderEvents():renderEvents()}function fetchAndRenderEvents(){fetchEvents(currentView.start,currentView.end)}function reportEvents(_events){events=_events,renderEvents()}function reportEventChange(){renderEvents()}function updateHeaderTitle(){header.updateTitle(currentView.title)}function updateTodayButton(){t.getNow().isWithin(currentView.intervalStart,currentView.intervalEnd)?header.disableButton("today"):header.enableButton("today")}function select(zonedStartInput,zonedEndInput){currentView.select(t.buildSelectSpan.apply(t,arguments))}function unselect(){currentView&&currentView.unselect()}function prev(){date=currentView.computePrevDate(date),renderView()}function next(){date=currentView.computeNextDate(date),renderView()}function prevYear(){date.add(-1,"years"),renderView()}function nextYear(){date.add(1,"years"),renderView()}function today(){date=t.getNow(),renderView()}function gotoDate(zonedDateInput){date=t.moment(zonedDateInput).stripZone(),renderView()}function incrementDate(delta){date.add(moment.duration(delta)),renderView()}function zoomTo(newDate,viewType){var spec;viewType=viewType||"day",spec=t.getViewSpec(viewType)||t.getUnitViewSpec(viewType),date=newDate.clone(),renderView(spec?spec.type:null)}function getDate(){return t.applyTimezone(date)}function freezeContentHeight(){content.css({width:"100%",height:content.height(),overflow:"hidden"})}function unfreezeContentHeight(){content.css({width:"",height:"",overflow:""})}function getCalendar(){return t}function getView(){return currentView}function option(name,value){if(void 0===value)return options[name];"height"!=name&&"contentHeight"!=name&&"aspectRatio"!=name||(options[name]=value,updateSize(!0))}function trigger(name,thisObj){var args=Array.prototype.slice.call(arguments,2);if(thisObj=thisObj||_element,this.triggerWith(name,thisObj,args),options[name])return options[name].apply(thisObj,args)}var t=this;t.initOptions(overrides||{});var options=this.options;t.render=render,t.destroy=destroy,t.refetchEvents=refetchEvents,t.reportEvents=reportEvents,t.reportEventChange=reportEventChange,t.rerenderEvents=renderEvents,t.changeView=renderView,t.select=select,t.unselect=unselect,t.prev=prev,t.next=next,t.prevYear=prevYear,t.nextYear=nextYear,t.today=today,t.gotoDate=gotoDate,t.incrementDate=incrementDate,t.zoomTo=zoomTo,t.getDate=getDate,t.getCalendar=getCalendar,t.getView=getView,t.option=option,t.trigger=trigger;var localeData=createObject(getMomentLocaleData(options.lang));if(options.monthNames&&(localeData._months=options.monthNames),options.monthNamesShort&&(localeData._monthsShort=options.monthNamesShort),options.dayNames&&(localeData._weekdays=options.dayNames),options.dayNamesShort&&(localeData._weekdaysShort=options.dayNamesShort),null!=options.firstDay){var _week=createObject(localeData._week);_week.dow=options.firstDay,localeData._week=_week}localeData._fullCalendar_weekCalc=function(weekCalc){return"function"==typeof weekCalc?weekCalc:"local"===weekCalc?weekCalc:"iso"===weekCalc||"ISO"===weekCalc?"ISO":void 0}(options.weekNumberCalculation),t.defaultAllDayEventDuration=moment.duration(options.defaultAllDayEventDuration),t.defaultTimedEventDuration=moment.duration(options.defaultTimedEventDuration),t.moment=function(){var mom;return"local"===options.timezone?(mom=FC.moment.apply(null,arguments),mom.hasTime()&&mom.local()):mom="UTC"===options.timezone?FC.moment.utc.apply(null,arguments):FC.moment.parseZone.apply(null,arguments),"_locale"in mom?mom._locale=localeData:mom._lang=localeData,mom},t.getIsAmbigTimezone=function(){return"local"!==options.timezone&&"UTC"!==options.timezone},t.applyTimezone=function(date){if(!date.hasTime())return date.clone();var adjustedZonedDate,zonedDate=t.moment(date.toArray()),timeAdjust=date.time()-zonedDate.time();return timeAdjust&&(adjustedZonedDate=zonedDate.clone().add(timeAdjust),date.time()-adjustedZonedDate.time()==0&&(zonedDate=adjustedZonedDate)),zonedDate},t.getNow=function(){var now=options.now;return"function"==typeof now&&(now=now()),t.moment(now).stripZone()},t.getEventEnd=function(event){return event.end?event.end.clone():t.getDefaultEventEnd(event.allDay,event.start)},t.getDefaultEventEnd=function(allDay,zonedStart){var end=zonedStart.clone();return allDay?end.stripTime().add(t.defaultAllDayEventDuration):end.add(t.defaultTimedEventDuration),t.getIsAmbigTimezone()&&end.stripZone(),end},t.humanizeDuration=function(duration){return(duration.locale||duration.lang).call(duration,options.lang).humanize()},EventManager.call(t,options);var header,headerElement,content,tm,currentView,suggestedViewHeight,windowResizeProxy,date,isFetchNeeded=t.isFetchNeeded,fetchEvents=t.fetchEvents,_element=element[0],viewsByType={},ignoreWindowResize=0,events=[];date=null!=options.defaultDate?t.moment(options.defaultDate).stripZone():t.getNow(),t.getSuggestedViewHeight=function(){return void 0===suggestedViewHeight&&calcSize(),suggestedViewHeight},t.isHeightAuto=function(){return"auto"===options.contentHeight||"auto"===options.height},t.freezeContentHeight=freezeContentHeight,t.unfreezeContentHeight=unfreezeContentHeight,t.initialize()}function populateInstanceComputableOptions(options){$.each(instanceComputableOptions,function(name,func){null==options[name]&&(options[name]=func(options))})}function getMomentLocaleData(langCode){var func=moment.localeData||moment.langData;return func.call(moment,langCode)||func.call(moment,"en")}function Header(calendar,options){function render(){var sections=options.header;if(tm=options.theme?"ui":"fc",sections)return el=$("<div class='fc-toolbar'/>").append(renderSection("left")).append(renderSection("right")).append(renderSection("center")).append('<div class="fc-clear"/>')}function removeElement(){el.remove(),el=$()}function renderSection(position){var sectionEl=$('<div class="fc-'+position+'"/>'),buttonStr=options.header[position];return buttonStr&&$.each(buttonStr.split(" "),function(i){var groupEl,groupChildren=$(),isOnlyButtons=!0;$.each(this.split(","),function(j,buttonName){var customButtonProps,viewSpec,buttonClick,overrideText,defaultText,themeIcon,normalIcon,innerHtml,classes,button;"title"==buttonName?(groupChildren=groupChildren.add($("<h2>&nbsp;</h2>")),isOnlyButtons=!1):((customButtonProps=(calendar.options.customButtons||{})[buttonName])?(buttonClick=function(ev){customButtonProps.click&&customButtonProps.click.call(button[0],ev)},overrideText="",defaultText=customButtonProps.text):(viewSpec=calendar.getViewSpec(buttonName))?(buttonClick=function(){calendar.changeView(buttonName)},viewsWithButtons.push(buttonName),overrideText=viewSpec.buttonTextOverride,defaultText=viewSpec.buttonTextDefault):calendar[buttonName]&&(buttonClick=function(){calendar[buttonName]()},overrideText=(calendar.overrides.buttonText||{})[buttonName],defaultText=options.buttonText[buttonName]),buttonClick&&(themeIcon=customButtonProps?customButtonProps.themeIcon:options.themeButtonIcons[buttonName],normalIcon=customButtonProps?customButtonProps.icon:options.buttonIcons[buttonName],innerHtml=overrideText?htmlEscape(overrideText):themeIcon&&options.theme?"<span class='ui-icon ui-icon-"+themeIcon+"'></span>":normalIcon&&!options.theme?"<span class='fc-icon fc-icon-"+normalIcon+"'></span>":htmlEscape(defaultText),classes=["fc-"+buttonName+"-button",tm+"-button",tm+"-state-default"],button=$('<button type="button" class="'+classes.join(" ")+'">'+innerHtml+"</button>").click(function(ev){button.hasClass(tm+"-state-disabled")||(buttonClick(ev),(button.hasClass(tm+"-state-active")||button.hasClass(tm+"-state-disabled"))&&button.removeClass(tm+"-state-hover"))}).mousedown(function(){button.not("."+tm+"-state-active").not("."+tm+"-state-disabled").addClass(tm+"-state-down")}).mouseup(function(){button.removeClass(tm+"-state-down")}).hover(function(){button.not("."+tm+"-state-active").not("."+tm+"-state-disabled").addClass(tm+"-state-hover")},function(){button.removeClass(tm+"-state-hover").removeClass(tm+"-state-down")}),groupChildren=groupChildren.add(button)))}),isOnlyButtons&&groupChildren.first().addClass(tm+"-corner-left").end().last().addClass(tm+"-corner-right").end(),groupChildren.length>1?(groupEl=$("<div/>"),isOnlyButtons&&groupEl.addClass("fc-button-group"),groupEl.append(groupChildren),sectionEl.append(groupEl)):sectionEl.append(groupChildren)}),sectionEl}function updateTitle(text){el.find("h2").text(text)}function activateButton(buttonName){el.find(".fc-"+buttonName+"-button").addClass(tm+"-state-active")}function deactivateButton(buttonName){el.find(".fc-"+buttonName+"-button").removeClass(tm+"-state-active")}function disableButton(buttonName){el.find(".fc-"+buttonName+"-button").attr("disabled","disabled").addClass(tm+"-state-disabled")}function enableButton(buttonName){el.find(".fc-"+buttonName+"-button").removeAttr("disabled").removeClass(tm+"-state-disabled")}function getViewsWithButtons(){return viewsWithButtons}var t=this;t.render=render,t.removeElement=removeElement,t.updateTitle=updateTitle,t.activateButton=activateButton,t.deactivateButton=deactivateButton,t.disableButton=disableButton,t.enableButton=enableButton,t.getViewsWithButtons=getViewsWithButtons;var tm,el=$(),viewsWithButtons=[]}function EventManager(options){function isFetchNeeded(start,end){return!rangeStart||start<rangeStart||end>rangeEnd}function fetchEvents(start,end){rangeStart=start,rangeEnd=end,cache=[];var fetchID=++currentFetchID,len=sources.length;pendingSourceCnt=len;for(var i=0;i<len;i++)fetchEventSource(sources[i],fetchID)}function fetchEventSource(source,fetchID){_fetchEventSource(source,function(eventInputs){var i,eventInput,abstractEvent,isArraySource=$.isArray(source.events);if(fetchID==currentFetchID){if(eventInputs)for(i=0;i<eventInputs.length;i++)eventInput=eventInputs[i],(abstractEvent=isArraySource?eventInput:buildEventFromInput(eventInput,source))&&cache.push.apply(cache,expandEvent(abstractEvent));pendingSourceCnt--,pendingSourceCnt||reportEvents(cache)}})}function _fetchEventSource(source,callback){var i,res,fetchers=FC.sourceFetchers;for(i=0;i<fetchers.length;i++){if(!0===(res=fetchers[i].call(t,source,rangeStart.clone(),rangeEnd.clone(),options.timezone,callback)))return;if("object"==typeof res)return void _fetchEventSource(res,callback)}var events=source.events;if(events)$.isFunction(events)?(t.pushLoading(),events.call(t,rangeStart.clone(),rangeEnd.clone(),options.timezone,function(events){callback(events),t.popLoading()})):$.isArray(events)?callback(events):callback();else{if(source.url){var customData,success=source.success,error=source.error,complete=source.complete;customData=$.isFunction(source.data)?source.data():source.data;var data=$.extend({},customData||{}),startParam=firstDefined(source.startParam,options.startParam),endParam=firstDefined(source.endParam,options.endParam),timezoneParam=firstDefined(source.timezoneParam,options.timezoneParam);startParam&&(data[startParam]=rangeStart.format()),endParam&&(data[endParam]=rangeEnd.format()),options.timezone&&"local"!=options.timezone&&(data[timezoneParam]=options.timezone),t.pushLoading(),$.ajax($.extend({},ajaxDefaults,source,{data:data,success:function(events){events=events||[];var res=applyAll(success,this,arguments);$.isArray(res)&&(events=res),callback(events)},error:function(){applyAll(error,this,arguments),callback()},complete:function(){applyAll(complete,this,arguments),t.popLoading()}}))}else callback()}}function addEventSource(sourceInput){var source=buildEventSource(sourceInput);source&&(sources.push(source),pendingSourceCnt++,fetchEventSource(source,currentFetchID))}function buildEventSource(sourceInput){var source,i,normalizers=FC.sourceNormalizers;if($.isFunction(sourceInput)||$.isArray(sourceInput)?source={events:sourceInput}:"string"==typeof sourceInput?source={url:sourceInput}:"object"==typeof sourceInput&&(source=$.extend({},sourceInput)),source){for(source.className?"string"==typeof source.className&&(source.className=source.className.split(/\s+/)):source.className=[],$.isArray(source.events)&&(source.origArray=source.events,source.events=$.map(source.events,function(eventInput){return buildEventFromInput(eventInput,source)})),i=0;i<normalizers.length;i++)normalizers[i].call(t,source);return source}}function removeEventSource(source){sources=$.grep(sources,function(src){return!isSourcesEqual(src,source)}),cache=$.grep(cache,function(e){return!isSourcesEqual(e.source,source)}),reportEvents(cache)}function isSourcesEqual(source1,source2){return source1&&source2&&getSourcePrimitive(source1)==getSourcePrimitive(source2)}function getSourcePrimitive(source){return("object"==typeof source?source.origArray||source.googleCalendarId||source.url||source.events:null)||source}function updateEvent(event){event.start=t.moment(event.start),event.end?event.end=t.moment(event.end):event.end=null,mutateEvent(event,getMiscEventProps(event)),reportEvents(cache)}function getMiscEventProps(event){var props={};return $.each(event,function(name,val){isMiscEventPropName(name)&&void 0!==val&&isAtomic(val)&&(props[name]=val)}),props}function isMiscEventPropName(name){return!/^_|^(id|allDay|start|end)$/.test(name)}function renderEvent(eventInput,stick){var events,i,event,abstractEvent=buildEventFromInput(eventInput);if(abstractEvent){for(events=expandEvent(abstractEvent),i=0;i<events.length;i++)event=events[i],event.source||(stick&&(stickySource.events.push(event),event.source=stickySource),cache.push(event));return reportEvents(cache),events}return[]}function removeEvents(filter){var eventID,i;for(null==filter?filter=function(){return!0}:$.isFunction(filter)||(eventID=filter+"",filter=function(event){return event._id==eventID}),cache=$.grep(cache,filter,!0),i=0;i<sources.length;i++)$.isArray(sources[i].events)&&(sources[i].events=$.grep(sources[i].events,filter,!0));reportEvents(cache)}function clientEvents(filter){return $.isFunction(filter)?$.grep(cache,filter):null!=filter?(filter+="",$.grep(cache,function(e){return e._id==filter})):cache}function buildEventFromInput(input,source){var start,end,allDay,out={};if(options.eventDataTransform&&(input=options.eventDataTransform(input)),source&&source.eventDataTransform&&(input=source.eventDataTransform(input)),$.extend(out,input),source&&(out.source=source),out._id=input._id||(void 0===input.id?"_fc"+eventGUID++:input.id+""),input.className?"string"==typeof input.className?out.className=input.className.split(/\s+/):out.className=input.className:out.className=[],start=input.start||input.date,end=input.end,isTimeString(start)&&(start=moment.duration(start)),isTimeString(end)&&(end=moment.duration(end)),input.dow||moment.isDuration(start)||moment.isDuration(end))out.start=start?moment.duration(start):null,out.end=end?moment.duration(end):null,out._recurring=!0;else{if(start&&(start=t.moment(start),!start.isValid()))return!1;end&&(end=t.moment(end),end.isValid()||(end=null)),allDay=input.allDay,void 0===allDay&&(allDay=firstDefined(source?source.allDayDefault:void 0,options.allDayDefault)),assignDatesToEvent(start,end,allDay,out)}return t.normalizeEvent(out),out}function assignDatesToEvent(start,end,allDay,event){event.start=start,event.end=end,event.allDay=allDay,normalizeEventDates(event),backupEventDates(event)}function normalizeEventDates(eventProps){normalizeEventTimes(eventProps),eventProps.end&&!eventProps.end.isAfter(eventProps.start)&&(eventProps.end=null),eventProps.end||(options.forceEventDuration?eventProps.end=t.getDefaultEventEnd(eventProps.allDay,eventProps.start):eventProps.end=null)}function normalizeEventTimes(eventProps){null==eventProps.allDay&&(eventProps.allDay=!(eventProps.start.hasTime()||eventProps.end&&eventProps.end.hasTime())),eventProps.allDay?(eventProps.start.stripTime(),eventProps.end&&eventProps.end.stripTime()):(eventProps.start.hasTime()||(eventProps.start=t.applyTimezone(eventProps.start.time(0))),eventProps.end&&!eventProps.end.hasTime()&&(eventProps.end=t.applyTimezone(eventProps.end.time(0))))}function expandEvent(abstractEvent,_rangeStart,_rangeEnd){var dowHash,dow,i,date,startTime,endTime,start,end,event,events=[];if(_rangeStart=_rangeStart||rangeStart,_rangeEnd=_rangeEnd||rangeEnd,abstractEvent)if(abstractEvent._recurring){if(dow=abstractEvent.dow)for(dowHash={},i=0;i<dow.length;i++)dowHash[dow[i]]=!0;for(date=_rangeStart.clone().stripTime();date.isBefore(_rangeEnd);)dowHash&&!dowHash[date.day()]||(startTime=abstractEvent.start,endTime=abstractEvent.end,start=date.clone(),end=null,startTime&&(start=start.time(startTime)),endTime&&(end=date.clone().time(endTime)),event=$.extend({},abstractEvent),assignDatesToEvent(start,end,!startTime&&!endTime,event),events.push(event)),date.add(1,"days")}else events.push(abstractEvent);return events}function mutateEvent(event,newProps,largeUnit){function diffDates(date1,date0){return largeUnit?diffByUnit(date1,date0,largeUnit):newProps.allDay?diffDay(date1,date0):diffDayTime(date1,date0)}var oldProps,clearEnd,startDelta,endDelta,durationDelta,undoFunc,miscProps={};return newProps=newProps||{},newProps.start||(newProps.start=event.start.clone()),void 0===newProps.end&&(newProps.end=event.end?event.end.clone():null),null==newProps.allDay&&(newProps.allDay=event.allDay),normalizeEventDates(newProps),oldProps={start:event._start.clone(),end:event._end?event._end.clone():t.getDefaultEventEnd(event._allDay,event._start),allDay:newProps.allDay},normalizeEventDates(oldProps),clearEnd=null!==event._end&&null===newProps.end,startDelta=diffDates(newProps.start,oldProps.start),newProps.end?(endDelta=diffDates(newProps.end,oldProps.end),durationDelta=endDelta.subtract(startDelta)):durationDelta=null,$.each(newProps,function(name,val){isMiscEventPropName(name)&&void 0!==val&&(miscProps[name]=val)}),undoFunc=mutateEvents(clientEvents(event._id),clearEnd,newProps.allDay,startDelta,durationDelta,miscProps),{dateDelta:startDelta,durationDelta:durationDelta,undo:undoFunc}}function mutateEvents(events,clearEnd,allDay,dateDelta,durationDelta,miscProps){var isAmbigTimezone=t.getIsAmbigTimezone(),undoFunctions=[];return dateDelta&&!dateDelta.valueOf()&&(dateDelta=null),durationDelta&&!durationDelta.valueOf()&&(durationDelta=null),$.each(events,function(i,event){var oldProps,newProps;oldProps={start:event.start.clone(),end:event.end?event.end.clone():null,allDay:event.allDay},$.each(miscProps,function(name){oldProps[name]=event[name]}),newProps={start:event._start,end:event._end,allDay:allDay},normalizeEventDates(newProps),clearEnd?newProps.end=null:durationDelta&&!newProps.end&&(newProps.end=t.getDefaultEventEnd(newProps.allDay,newProps.start)),dateDelta&&(newProps.start.add(dateDelta),newProps.end&&newProps.end.add(dateDelta)),durationDelta&&newProps.end.add(durationDelta),isAmbigTimezone&&!newProps.allDay&&(dateDelta||durationDelta)&&(newProps.start.stripZone(),newProps.end&&newProps.end.stripZone()),$.extend(event,miscProps,newProps),backupEventDates(event),undoFunctions.push(function(){$.extend(event,oldProps),backupEventDates(event)})}),function(){for(var i=0;i<undoFunctions.length;i++)undoFunctions[i]()}}function getBusinessHoursEvents(wholeDay){var eventInput,optionVal=options.businessHours,defaultVal={className:"fc-nonbusiness",start:"09:00",end:"17:00",dow:[1,2,3,4,5],rendering:"inverse-background"},view=t.getView();return optionVal&&(eventInput=$.extend({},defaultVal,"object"==typeof optionVal?optionVal:{})),eventInput?(wholeDay&&(eventInput.start=null,eventInput.end=null),expandEvent(buildEventFromInput(eventInput),view.start,view.end)):[]}function isEventSpanAllowed(span,event){var source=event.source||{};return isSpanAllowed(span,firstDefined(event.constraint,source.constraint,options.eventConstraint),firstDefined(event.overlap,source.overlap,options.eventOverlap),event)}function isExternalSpanAllowed(eventSpan,eventLocation,eventProps){var eventInput,event;return eventProps&&(eventInput=$.extend({},eventProps,eventLocation),event=expandEvent(buildEventFromInput(eventInput))[0]),event?isEventSpanAllowed(eventSpan,event):isSelectionSpanAllowed(eventSpan)}function isSelectionSpanAllowed(span){return isSpanAllowed(span,options.selectConstraint,options.selectOverlap)}function isSpanAllowed(span,constraint,overlap,event){var constraintEvents,anyContainment,peerEvents,i,peerEvent,peerOverlap;if(null!=constraint){for(constraintEvents=constraintToEvents(constraint),anyContainment=!1,i=0;i<constraintEvents.length;i++)if(eventContainsRange(constraintEvents[i],span)){anyContainment=!0;break}if(!anyContainment)return!1}for(peerEvents=t.getPeerEvents(span,event),i=0;i<peerEvents.length;i++)if(peerEvent=peerEvents[i],eventIntersectsRange(peerEvent,span)){if(!1===overlap)return!1;if("function"==typeof overlap&&!overlap(peerEvent,event))return!1;if(event){if(!1===(peerOverlap=firstDefined(peerEvent.overlap,(peerEvent.source||{}).overlap)))return!1;if("function"==typeof peerOverlap&&!peerOverlap(event,peerEvent))return!1}}return!0}function constraintToEvents(constraintInput){return"businessHours"===constraintInput?getBusinessHoursEvents():"object"==typeof constraintInput?expandEvent(buildEventFromInput(constraintInput)):clientEvents(constraintInput)}function eventContainsRange(event,range){var eventStart=event.start.clone().stripZone(),eventEnd=t.getEventEnd(event).stripZone();return range.start>=eventStart&&range.end<=eventEnd}function eventIntersectsRange(event,range){var eventStart=event.start.clone().stripZone(),eventEnd=t.getEventEnd(event).stripZone();return range.start<eventEnd&&range.end>eventStart}var t=this;t.isFetchNeeded=isFetchNeeded,t.fetchEvents=fetchEvents,t.addEventSource=addEventSource,t.removeEventSource=removeEventSource,t.updateEvent=updateEvent,t.renderEvent=renderEvent,t.removeEvents=removeEvents,t.clientEvents=clientEvents,t.mutateEvent=mutateEvent,t.normalizeEventDates=normalizeEventDates,t.normalizeEventTimes=normalizeEventTimes;var rangeStart,rangeEnd,reportEvents=t.reportEvents,stickySource={events:[]},sources=[stickySource],currentFetchID=0,pendingSourceCnt=0,cache=[];$.each((options.events?[options.events]:[]).concat(options.eventSources||[]),function(i,sourceInput){var source=buildEventSource(sourceInput);source&&sources.push(source)}),t.getBusinessHoursEvents=getBusinessHoursEvents,t.isEventSpanAllowed=isEventSpanAllowed,t.isExternalSpanAllowed=isExternalSpanAllowed,t.isSelectionSpanAllowed=isSelectionSpanAllowed,t.getEventCache=function(){return cache}}function backupEventDates(event){event._allDay=event.allDay,event._start=event.start.clone(),event._end=event.end?event.end.clone():null}var FC=$.fullCalendar={version:"2.7.3",internalApiVersion:4},fcViews=FC.views={};$.fn.fullCalendar=function(options){var args=Array.prototype.slice.call(arguments,1),res=this;return this.each(function(i,_element){var singleRes,element=$(_element),calendar=element.data("fullCalendar");"string"==typeof options?calendar&&$.isFunction(calendar[options])&&(singleRes=calendar[options].apply(calendar,args),i||(res=singleRes),"destroy"===options&&element.removeData("fullCalendar")):calendar||(calendar=new Calendar(element,options),element.data("fullCalendar",calendar),calendar.render())}),res};var complexOptions=["header","buttonText","buttonIcons","themeButtonIcons"];FC.intersectRanges=intersectRanges,FC.applyAll=applyAll,FC.debounce=debounce,FC.isInt=isInt,FC.htmlEscape=htmlEscape,FC.cssToStr=cssToStr,FC.proxy=proxy,FC.capitaliseFirstLetter=capitaliseFirstLetter,FC.getOuterRect=getOuterRect,FC.getClientRect=getClientRect,FC.getContentRect=getContentRect,FC.getScrollbarWidths=getScrollbarWidths;var _isLeftRtlScrollbars=null;FC.preventDefault=preventDefault,FC.intersectRects=intersectRects,FC.parseFieldSpecs=parseFieldSpecs,FC.compareByFieldSpecs=compareByFieldSpecs,FC.compareByFieldSpec=compareByFieldSpec,FC.flexibleCompare=flexibleCompare,FC.computeIntervalUnit=computeIntervalUnit,FC.divideRangeByDuration=divideRangeByDuration,FC.divideDurationByDuration=divideDurationByDuration,FC.multiplyDuration=multiplyDuration,FC.durationHasTime=durationHasTime;var dayIDs=["sun","mon","tue","wed","thu","fri","sat"],intervalUnits=["year","month","week","day","hour","minute","second","millisecond"];FC.log=function(){var console=window.console;if(console&&console.log)return console.log.apply(console,arguments)},FC.warn=function(){var console=window.console;return console&&console.warn?console.warn.apply(console,arguments):FC.log.apply(FC,arguments)};var allowValueOptimization,setUTCValues,setLocalValues,hasOwnPropMethod={}.hasOwnProperty,ambigDateOfMonthRegex=/^\s*\d{4}-\d\d$/,ambigTimeOrZoneRegex=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?)?$/,newMomentProto=moment.fn,oldMomentProto=$.extend({},newMomentProto);FC.moment=function(){return makeMoment(arguments)},FC.moment.utc=function(){var mom=makeMoment(arguments,!0);return mom.hasTime()&&mom.utc(),mom},FC.moment.parseZone=function(){return makeMoment(arguments,!0,!0)},newMomentProto.clone=function(){var mom=oldMomentProto.clone.apply(this,arguments);return transferAmbigs(this,mom),this._fullCalendar&&(mom._fullCalendar=!0),mom},newMomentProto.week=newMomentProto.weeks=function(input){var weekCalc=(this._locale||this._lang)._fullCalendar_weekCalc;return null==input&&"function"==typeof weekCalc?weekCalc(this):"ISO"===weekCalc?oldMomentProto.isoWeek.apply(this,arguments):oldMomentProto.week.apply(this,arguments)},newMomentProto.time=function(time){if(!this._fullCalendar)return oldMomentProto.time.apply(this,arguments);if(null==time)return moment.duration({hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()});this._ambigTime=!1,moment.isDuration(time)||moment.isMoment(time)||(time=moment.duration(time));var dayHours=0;return moment.isDuration(time)&&(dayHours=24*Math.floor(time.asDays())),this.hours(dayHours+time.hours()).minutes(time.minutes()).seconds(time.seconds()).milliseconds(time.milliseconds())},newMomentProto.stripTime=function(){var a;return this._ambigTime||(a=this.toArray(),this.utc(),setUTCValues(this,a.slice(0,3)),this._ambigTime=!0,this._ambigZone=!0),this},newMomentProto.hasTime=function(){return!this._ambigTime},newMomentProto.stripZone=function(){var a,wasAmbigTime;return this._ambigZone||(a=this.toArray(),wasAmbigTime=this._ambigTime,this.utc(),setUTCValues(this,a),this._ambigTime=wasAmbigTime||!1,this._ambigZone=!0),this},newMomentProto.hasZone=function(){return!this._ambigZone},newMomentProto.local=function(){var a=this.toArray(),wasAmbigZone=this._ambigZone;return oldMomentProto.local.apply(this,arguments),this._ambigTime=!1,this._ambigZone=!1,wasAmbigZone&&setLocalValues(this,a),this},newMomentProto.utc=function(){return oldMomentProto.utc.apply(this,arguments),this._ambigTime=!1,this._ambigZone=!1,this},$.each(["zone","utcOffset"],function(i,name){oldMomentProto[name]&&(newMomentProto[name]=function(tzo){return null!=tzo&&(this._ambigTime=!1,this._ambigZone=!1),oldMomentProto[name].apply(this,arguments)})}),newMomentProto.format=function(){return this._fullCalendar&&arguments[0]?formatDate(this,arguments[0]):this._ambigTime?oldMomentFormat(this,"YYYY-MM-DD"):this._ambigZone?oldMomentFormat(this,"YYYY-MM-DD[T]HH:mm:ss"):oldMomentProto.format.apply(this,arguments)},newMomentProto.toISOString=function(){return this._ambigTime?oldMomentFormat(this,"YYYY-MM-DD"):this._ambigZone?oldMomentFormat(this,"YYYY-MM-DD[T]HH:mm:ss"):oldMomentProto.toISOString.apply(this,arguments)},newMomentProto.isWithin=function(start,end){var a=commonlyAmbiguate([this,start,end]);return a[0]>=a[1]&&a[0]<a[2]},newMomentProto.isSame=function(input,units){var a;return this._fullCalendar?units?(a=commonlyAmbiguate([this,input],!0),oldMomentProto.isSame.call(a[0],a[1],units)):(input=FC.moment.parseZone(input),oldMomentProto.isSame.call(this,input)&&Boolean(this._ambigTime)===Boolean(input._ambigTime)&&Boolean(this._ambigZone)===Boolean(input._ambigZone)):oldMomentProto.isSame.apply(this,arguments)},$.each(["isBefore","isAfter"],function(i,methodName){newMomentProto[methodName]=function(input,units){var a;return this._fullCalendar?(a=commonlyAmbiguate([this,input]),oldMomentProto[methodName].call(a[0],a[1],units)):oldMomentProto[methodName].apply(this,arguments)}}),allowValueOptimization="_d"in moment()&&"updateOffset"in moment,setUTCValues=allowValueOptimization?function(mom,a){mom._d.setTime(Date.UTC.apply(Date,a)),moment.updateOffset(mom,!1)}:setMomentValues,setLocalValues=allowValueOptimization?function(mom,a){mom._d.setTime(+new Date(a[0]||0,a[1]||0,a[2]||0,a[3]||0,a[4]||0,a[5]||0,a[6]||0)),moment.updateOffset(mom,!1)}:setMomentValues;var tokenOverrides={t:function(date){return oldMomentFormat(date,"a").charAt(0)},T:function(date){return oldMomentFormat(date,"A").charAt(0)}};FC.formatRange=formatRange;var similarUnitMap={Y:"year",M:"month",D:"day",d:"day",A:"second",a:"second",T:"second",t:"second",H:"second",h:"second",m:"second",s:"second"},formatStringChunkCache={};FC.Class=Class,Class.extend=function(){var i,members,len=arguments.length;for(i=0;i<len;i++)members=arguments[i],i<len-1&&mixIntoClass(this,members);return extendClass(this,members||{})},Class.mixin=function(members){mixIntoClass(this,members)};var EmitterMixin=FC.EmitterMixin={on:function(types,handler){var intercept=function(ev,extra){return handler.apply(extra.context||this,extra.args||[])};return handler.guid||(handler.guid=$.guid++),intercept.guid=handler.guid,$(this).on(types,intercept),this},off:function(types,handler){return $(this).off(types,handler),this},trigger:function(types){var args=Array.prototype.slice.call(arguments,1);return $(this).triggerHandler(types,{args:args}),this},triggerWith:function(types,context,args){return $(this).triggerHandler(types,{context:context,args:args}),this}},ListenerMixin=FC.ListenerMixin=function(){var guid=0;return{listenerId:null,listenTo:function(other,arg,callback){if("object"==typeof arg)for(var eventName in arg)arg.hasOwnProperty(eventName)&&this.listenTo(other,eventName,arg[eventName]);else"string"==typeof arg&&other.on(arg+"."+this.getListenerNamespace(),$.proxy(callback,this))},stopListeningTo:function(other,eventName){other.off((eventName||"")+"."+this.getListenerNamespace())},getListenerNamespace:function(){
return null==this.listenerId&&(this.listenerId=guid++),"_listener"+this.listenerId}}}(),MouseIgnorerMixin={isIgnoringMouse:!1,delayUnignoreMouse:null,initMouseIgnoring:function(delay){this.delayUnignoreMouse=debounce(proxy(this,"unignoreMouse"),delay||1e3)},tempIgnoreMouse:function(){this.isIgnoringMouse=!0,this.delayUnignoreMouse()},unignoreMouse:function(){this.isIgnoringMouse=!1}},Popover=Class.extend(ListenerMixin,{isHidden:!0,options:null,el:null,margin:10,constructor:function(options){this.options=options||{}},show:function(){this.isHidden&&(this.el||this.render(),this.el.show(),this.position(),this.isHidden=!1,this.trigger("show"))},hide:function(){this.isHidden||(this.el.hide(),this.isHidden=!0,this.trigger("hide"))},render:function(){var _this=this,options=this.options;this.el=$('<div class="fc-popover"/>').addClass(options.className||"").css({top:0,left:0}).append(options.content).appendTo(options.parentEl),this.el.on("click",".fc-close",function(){_this.hide()}),options.autoHide&&this.listenTo($(document),"mousedown",this.documentMousedown)},documentMousedown:function(ev){this.el&&!$(ev.target).closest(this.el).length&&this.hide()},removeElement:function(){this.hide(),this.el&&(this.el.remove(),this.el=null),this.stopListeningTo($(document),"mousedown")},position:function(){var viewportTop,viewportLeft,viewportOffset,top,left,options=this.options,origin=this.el.offsetParent().offset(),width=this.el.outerWidth(),height=this.el.outerHeight(),windowEl=$(window),viewportEl=getScrollParent(this.el);top=options.top||0,left=void 0!==options.left?options.left:void 0!==options.right?options.right-width:0,viewportEl.is(window)||viewportEl.is(document)?(viewportEl=windowEl,viewportTop=0,viewportLeft=0):(viewportOffset=viewportEl.offset(),viewportTop=viewportOffset.top,viewportLeft=viewportOffset.left),viewportTop+=windowEl.scrollTop(),viewportLeft+=windowEl.scrollLeft(),!1!==options.viewportConstrain&&(top=Math.min(top,viewportTop+viewportEl.outerHeight()-height-this.margin),top=Math.max(top,viewportTop+this.margin),left=Math.min(left,viewportLeft+viewportEl.outerWidth()-width-this.margin),left=Math.max(left,viewportLeft+this.margin)),this.el.css({top:top-origin.top,left:left-origin.left})},trigger:function(name){this.options[name]&&this.options[name].apply(this,Array.prototype.slice.call(arguments,1))}}),CoordCache=FC.CoordCache=Class.extend({els:null,forcedOffsetParentEl:null,origin:null,boundingRect:null,isHorizontal:!1,isVertical:!1,lefts:null,rights:null,tops:null,bottoms:null,constructor:function(options){this.els=$(options.els),this.isHorizontal=options.isHorizontal,this.isVertical=options.isVertical,this.forcedOffsetParentEl=options.offsetParent?$(options.offsetParent):null},build:function(){var offsetParentEl=this.forcedOffsetParentEl||this.els.eq(0).offsetParent();this.origin=offsetParentEl.offset(),this.boundingRect=this.queryBoundingRect(),this.isHorizontal&&this.buildElHorizontals(),this.isVertical&&this.buildElVerticals()},clear:function(){this.origin=null,this.boundingRect=null,this.lefts=null,this.rights=null,this.tops=null,this.bottoms=null},ensureBuilt:function(){this.origin||this.build()},queryBoundingRect:function(){var scrollParentEl=getScrollParent(this.els.eq(0));if(!scrollParentEl.is(document))return getClientRect(scrollParentEl)},buildElHorizontals:function(){var lefts=[],rights=[];this.els.each(function(i,node){var el=$(node),left=el.offset().left,width=el.outerWidth();lefts.push(left),rights.push(left+width)}),this.lefts=lefts,this.rights=rights},buildElVerticals:function(){var tops=[],bottoms=[];this.els.each(function(i,node){var el=$(node),top=el.offset().top,height=el.outerHeight();tops.push(top),bottoms.push(top+height)}),this.tops=tops,this.bottoms=bottoms},getHorizontalIndex:function(leftOffset){this.ensureBuilt();var i,boundingRect=this.boundingRect,lefts=this.lefts,rights=this.rights,len=lefts.length;if(!boundingRect||leftOffset>=boundingRect.left&&leftOffset<boundingRect.right)for(i=0;i<len;i++)if(leftOffset>=lefts[i]&&leftOffset<rights[i])return i},getVerticalIndex:function(topOffset){this.ensureBuilt();var i,boundingRect=this.boundingRect,tops=this.tops,bottoms=this.bottoms,len=tops.length;if(!boundingRect||topOffset>=boundingRect.top&&topOffset<boundingRect.bottom)for(i=0;i<len;i++)if(topOffset>=tops[i]&&topOffset<bottoms[i])return i},getLeftOffset:function(leftIndex){return this.ensureBuilt(),this.lefts[leftIndex]},getLeftPosition:function(leftIndex){return this.ensureBuilt(),this.lefts[leftIndex]-this.origin.left},getRightOffset:function(leftIndex){return this.ensureBuilt(),this.rights[leftIndex]},getRightPosition:function(leftIndex){return this.ensureBuilt(),this.rights[leftIndex]-this.origin.left},getWidth:function(leftIndex){return this.ensureBuilt(),this.rights[leftIndex]-this.lefts[leftIndex]},getTopOffset:function(topIndex){return this.ensureBuilt(),this.tops[topIndex]},getTopPosition:function(topIndex){return this.ensureBuilt(),this.tops[topIndex]-this.origin.top},getBottomOffset:function(topIndex){return this.ensureBuilt(),this.bottoms[topIndex]},getBottomPosition:function(topIndex){return this.ensureBuilt(),this.bottoms[topIndex]-this.origin.top},getHeight:function(topIndex){return this.ensureBuilt(),this.bottoms[topIndex]-this.tops[topIndex]}}),DragListener=FC.DragListener=Class.extend(ListenerMixin,MouseIgnorerMixin,{options:null,subjectEl:null,subjectHref:null,originX:null,originY:null,scrollEl:null,isInteracting:!1,isDistanceSurpassed:!1,isDelayEnded:!1,isDragging:!1,isTouch:!1,delay:null,delayTimeoutId:null,minDistance:null,handleTouchScrollProxy:null,constructor:function(options){this.options=options||{},this.handleTouchScrollProxy=proxy(this,"handleTouchScroll"),this.initMouseIgnoring(500)},startInteraction:function(ev,extraOptions){var isTouch=getEvIsTouch(ev);if("mousedown"===ev.type){if(this.isIgnoringMouse)return;if(!isPrimaryMouseButton(ev))return;ev.preventDefault()}this.isInteracting||(extraOptions=extraOptions||{},this.delay=firstDefined(extraOptions.delay,this.options.delay,0),this.minDistance=firstDefined(extraOptions.distance,this.options.distance,0),this.subjectEl=this.options.subjectEl,this.isInteracting=!0,this.isTouch=isTouch,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,this.originX=getEvX(ev),this.originY=getEvY(ev),this.scrollEl=getScrollParent($(ev.target)),this.bindHandlers(),this.initAutoScroll(),this.handleInteractionStart(ev),this.startDelay(ev),this.minDistance||this.handleDistanceSurpassed(ev))},handleInteractionStart:function(ev){this.trigger("interactionStart",ev)},endInteraction:function(ev,isCancelled){this.isInteracting&&(this.endDrag(ev),this.delayTimeoutId&&(clearTimeout(this.delayTimeoutId),this.delayTimeoutId=null),this.destroyAutoScroll(),this.unbindHandlers(),this.isInteracting=!1,this.handleInteractionEnd(ev,isCancelled),this.isTouch&&this.tempIgnoreMouse())},handleInteractionEnd:function(ev,isCancelled){this.trigger("interactionEnd",ev,isCancelled||!1)},bindHandlers:function(){var _this=this,touchStartIgnores=1;this.isTouch?(this.listenTo($(document),{touchmove:this.handleTouchMove,touchend:this.endInteraction,touchcancel:this.endInteraction,touchstart:function(ev){touchStartIgnores?touchStartIgnores--:_this.endInteraction(ev,!0)}}),!bindAnyScroll(this.handleTouchScrollProxy)&&this.scrollEl&&this.listenTo(this.scrollEl,"scroll",this.handleTouchScroll)):this.listenTo($(document),{mousemove:this.handleMouseMove,mouseup:this.endInteraction}),this.listenTo($(document),{selectstart:preventDefault,contextmenu:preventDefault})},unbindHandlers:function(){this.stopListeningTo($(document)),unbindAnyScroll(this.handleTouchScrollProxy),this.scrollEl&&this.stopListeningTo(this.scrollEl,"scroll")},startDrag:function(ev,extraOptions){this.startInteraction(ev,extraOptions),this.isDragging||(this.isDragging=!0,this.handleDragStart(ev))},handleDragStart:function(ev){this.trigger("dragStart",ev),this.initHrefHack()},handleMove:function(ev){var dx=getEvX(ev)-this.originX,dy=getEvY(ev)-this.originY,minDistance=this.minDistance;this.isDistanceSurpassed||dx*dx+dy*dy>=minDistance*minDistance&&this.handleDistanceSurpassed(ev),this.isDragging&&this.handleDrag(dx,dy,ev)},handleDrag:function(dx,dy,ev){this.trigger("drag",dx,dy,ev),this.updateAutoScroll(ev)},endDrag:function(ev){this.isDragging&&(this.isDragging=!1,this.handleDragEnd(ev))},handleDragEnd:function(ev){this.trigger("dragEnd",ev),this.destroyHrefHack()},startDelay:function(initialEv){var _this=this;this.delay?this.delayTimeoutId=setTimeout(function(){_this.handleDelayEnd(initialEv)},this.delay):this.handleDelayEnd(initialEv)},handleDelayEnd:function(initialEv){this.isDelayEnded=!0,this.isDistanceSurpassed&&this.startDrag(initialEv)},handleDistanceSurpassed:function(ev){this.isDistanceSurpassed=!0,this.isDelayEnded&&this.startDrag(ev)},handleTouchMove:function(ev){this.isDragging&&ev.preventDefault(),this.handleMove(ev)},handleMouseMove:function(ev){this.handleMove(ev)},handleTouchScroll:function(ev){this.isDragging||this.endInteraction(ev,!0)},initHrefHack:function(){var subjectEl=this.subjectEl;(this.subjectHref=subjectEl?subjectEl.attr("href"):null)&&subjectEl.removeAttr("href")},destroyHrefHack:function(){var subjectEl=this.subjectEl,subjectHref=this.subjectHref;setTimeout(function(){subjectHref&&subjectEl.attr("href",subjectHref)},0)},trigger:function(name){this.options[name]&&this.options[name].apply(this,Array.prototype.slice.call(arguments,1)),this["_"+name]&&this["_"+name].apply(this,Array.prototype.slice.call(arguments,1))}});DragListener.mixin({isAutoScroll:!1,scrollBounds:null,scrollTopVel:null,scrollLeftVel:null,scrollIntervalId:null,scrollSensitivity:30,scrollSpeed:200,scrollIntervalMs:50,initAutoScroll:function(){var scrollEl=this.scrollEl;this.isAutoScroll=this.options.scroll&&scrollEl&&!scrollEl.is(window)&&!scrollEl.is(document),this.isAutoScroll&&this.listenTo(scrollEl,"scroll",debounce(this.handleDebouncedScroll,100))},destroyAutoScroll:function(){this.endAutoScroll(),this.isAutoScroll&&this.stopListeningTo(this.scrollEl,"scroll")},computeScrollBounds:function(){this.isAutoScroll&&(this.scrollBounds=getOuterRect(this.scrollEl))},updateAutoScroll:function(ev){var topCloseness,bottomCloseness,leftCloseness,rightCloseness,sensitivity=this.scrollSensitivity,bounds=this.scrollBounds,topVel=0,leftVel=0;bounds&&(topCloseness=(sensitivity-(getEvY(ev)-bounds.top))/sensitivity,bottomCloseness=(sensitivity-(bounds.bottom-getEvY(ev)))/sensitivity,leftCloseness=(sensitivity-(getEvX(ev)-bounds.left))/sensitivity,rightCloseness=(sensitivity-(bounds.right-getEvX(ev)))/sensitivity,topCloseness>=0&&topCloseness<=1?topVel=topCloseness*this.scrollSpeed*-1:bottomCloseness>=0&&bottomCloseness<=1&&(topVel=bottomCloseness*this.scrollSpeed),leftCloseness>=0&&leftCloseness<=1?leftVel=leftCloseness*this.scrollSpeed*-1:rightCloseness>=0&&rightCloseness<=1&&(leftVel=rightCloseness*this.scrollSpeed)),this.setScrollVel(topVel,leftVel)},setScrollVel:function(topVel,leftVel){this.scrollTopVel=topVel,this.scrollLeftVel=leftVel,this.constrainScrollVel(),!this.scrollTopVel&&!this.scrollLeftVel||this.scrollIntervalId||(this.scrollIntervalId=setInterval(proxy(this,"scrollIntervalFunc"),this.scrollIntervalMs))},constrainScrollVel:function(){var el=this.scrollEl;this.scrollTopVel<0?el.scrollTop()<=0&&(this.scrollTopVel=0):this.scrollTopVel>0&&el.scrollTop()+el[0].clientHeight>=el[0].scrollHeight&&(this.scrollTopVel=0),this.scrollLeftVel<0?el.scrollLeft()<=0&&(this.scrollLeftVel=0):this.scrollLeftVel>0&&el.scrollLeft()+el[0].clientWidth>=el[0].scrollWidth&&(this.scrollLeftVel=0)},scrollIntervalFunc:function(){var el=this.scrollEl,frac=this.scrollIntervalMs/1e3;this.scrollTopVel&&el.scrollTop(el.scrollTop()+this.scrollTopVel*frac),this.scrollLeftVel&&el.scrollLeft(el.scrollLeft()+this.scrollLeftVel*frac),this.constrainScrollVel(),this.scrollTopVel||this.scrollLeftVel||this.endAutoScroll()},endAutoScroll:function(){this.scrollIntervalId&&(clearInterval(this.scrollIntervalId),this.scrollIntervalId=null,this.handleScrollEnd())},handleDebouncedScroll:function(){this.scrollIntervalId||this.handleScrollEnd()},handleScrollEnd:function(){}});var HitDragListener=DragListener.extend({component:null,origHit:null,hit:null,coordAdjust:null,constructor:function(component,options){DragListener.call(this,options),this.component=component},handleInteractionStart:function(ev){var subjectRect,origPoint,point,subjectEl=this.subjectEl;this.computeCoords(),ev?(origPoint={left:getEvX(ev),top:getEvY(ev)},point=origPoint,subjectEl&&(subjectRect=getOuterRect(subjectEl),point=constrainPoint(point,subjectRect)),this.origHit=this.queryHit(point.left,point.top),subjectEl&&this.options.subjectCenter&&(this.origHit&&(subjectRect=intersectRects(this.origHit,subjectRect)||subjectRect),point=getRectCenter(subjectRect)),this.coordAdjust=diffPoints(point,origPoint)):(this.origHit=null,this.coordAdjust=null),DragListener.prototype.handleInteractionStart.apply(this,arguments)},computeCoords:function(){this.component.prepareHits(),this.computeScrollBounds()},handleDragStart:function(ev){var hit;DragListener.prototype.handleDragStart.apply(this,arguments),(hit=this.queryHit(getEvX(ev),getEvY(ev)))&&this.handleHitOver(hit)},handleDrag:function(dx,dy,ev){var hit;DragListener.prototype.handleDrag.apply(this,arguments),hit=this.queryHit(getEvX(ev),getEvY(ev)),isHitsEqual(hit,this.hit)||(this.hit&&this.handleHitOut(),hit&&this.handleHitOver(hit))},handleDragEnd:function(){this.handleHitDone(),DragListener.prototype.handleDragEnd.apply(this,arguments)},handleHitOver:function(hit){var isOrig=isHitsEqual(hit,this.origHit);this.hit=hit,this.trigger("hitOver",this.hit,isOrig,this.origHit)},handleHitOut:function(){this.hit&&(this.trigger("hitOut",this.hit),this.handleHitDone(),this.hit=null)},handleHitDone:function(){this.hit&&this.trigger("hitDone",this.hit)},handleInteractionEnd:function(){DragListener.prototype.handleInteractionEnd.apply(this,arguments),this.origHit=null,this.hit=null,this.component.releaseHits()},handleScrollEnd:function(){DragListener.prototype.handleScrollEnd.apply(this,arguments),this.computeCoords()},queryHit:function(left,top){return this.coordAdjust&&(left+=this.coordAdjust.left,top+=this.coordAdjust.top),this.component.queryHit(left,top)}}),MouseFollower=Class.extend(ListenerMixin,{options:null,sourceEl:null,el:null,parentEl:null,top0:null,left0:null,y0:null,x0:null,topDelta:null,leftDelta:null,isFollowing:!1,isHidden:!1,isAnimating:!1,constructor:function(sourceEl,options){this.options=options=options||{},this.sourceEl=sourceEl,this.parentEl=options.parentEl?$(options.parentEl):sourceEl.parent()},start:function(ev){this.isFollowing||(this.isFollowing=!0,this.y0=getEvY(ev),this.x0=getEvX(ev),this.topDelta=0,this.leftDelta=0,this.isHidden||this.updatePosition(),getEvIsTouch(ev)?this.listenTo($(document),"touchmove",this.handleMove):this.listenTo($(document),"mousemove",this.handleMove))},stop:function(shouldRevert,callback){function complete(){this.isAnimating=!1,_this.removeElement(),this.top0=this.left0=null,callback&&callback()}var _this=this,revertDuration=this.options.revertDuration;this.isFollowing&&!this.isAnimating&&(this.isFollowing=!1,this.stopListeningTo($(document)),shouldRevert&&revertDuration&&!this.isHidden?(this.isAnimating=!0,this.el.animate({top:this.top0,left:this.left0},{duration:revertDuration,complete:complete})):complete())},getEl:function(){var el=this.el;return el||(this.sourceEl.width(),el=this.el=this.sourceEl.clone().addClass(this.options.additionalClass||"").css({position:"absolute",visibility:"",display:this.isHidden?"none":"",margin:0,right:"auto",bottom:"auto",width:this.sourceEl.width(),height:this.sourceEl.height(),opacity:this.options.opacity||"",zIndex:this.options.zIndex}),el.addClass("fc-unselectable"),el.appendTo(this.parentEl)),el},removeElement:function(){this.el&&(this.el.remove(),this.el=null)},updatePosition:function(){var sourceOffset,origin;this.getEl(),null===this.top0&&(this.sourceEl.width(),sourceOffset=this.sourceEl.offset(),origin=this.el.offsetParent().offset(),this.top0=sourceOffset.top-origin.top,this.left0=sourceOffset.left-origin.left),this.el.css({top:this.top0+this.topDelta,left:this.left0+this.leftDelta})},handleMove:function(ev){this.topDelta=getEvY(ev)-this.y0,this.leftDelta=getEvX(ev)-this.x0,this.isHidden||this.updatePosition()},hide:function(){this.isHidden||(this.isHidden=!0,this.el&&this.el.hide())},show:function(){this.isHidden&&(this.isHidden=!1,this.updatePosition(),this.getEl().show())}}),Grid=FC.Grid=Class.extend(ListenerMixin,MouseIgnorerMixin,{view:null,isRTL:null,start:null,end:null,el:null,elsByFill:null,eventTimeFormat:null,displayEventTime:null,displayEventEnd:null,minResizeDuration:null,largeUnit:null,dayDragListener:null,segDragListener:null,segResizeListener:null,externalDragListener:null,constructor:function(view){this.view=view,this.isRTL=view.opt("isRTL"),this.elsByFill={},this.dayDragListener=this.buildDayDragListener(),this.initMouseIgnoring()},computeEventTimeFormat:function(){return this.view.opt("smallTimeFormat")},computeDisplayEventTime:function(){return!0},computeDisplayEventEnd:function(){return!0},setRange:function(range){this.start=range.start.clone(),this.end=range.end.clone(),this.rangeUpdated(),this.processRangeOptions()},rangeUpdated:function(){},processRangeOptions:function(){var displayEventTime,displayEventEnd,view=this.view;this.eventTimeFormat=view.opt("eventTimeFormat")||view.opt("timeFormat")||this.computeEventTimeFormat(),displayEventTime=view.opt("displayEventTime"),null==displayEventTime&&(displayEventTime=this.computeDisplayEventTime()),displayEventEnd=view.opt("displayEventEnd"),null==displayEventEnd&&(displayEventEnd=this.computeDisplayEventEnd()),this.displayEventTime=displayEventTime,this.displayEventEnd=displayEventEnd},spanToSegs:function(span){},diffDates:function(a,b){return this.largeUnit?diffByUnit(a,b,this.largeUnit):diffDayTime(a,b)},prepareHits:function(){},releaseHits:function(){},queryHit:function(leftOffset,topOffset){},getHitSpan:function(hit){},getHitEl:function(hit){},setElement:function(el){this.el=el,preventSelection(el),this.bindDayHandler("touchstart",this.dayTouchStart),this.bindDayHandler("mousedown",this.dayMousedown),this.bindSegHandlers(),this.bindGlobalHandlers()},bindDayHandler:function(name,handler){var _this=this;this.el.on(name,function(ev){if(!$(ev.target).is(".fc-event-container *, .fc-more")&&!$(ev.target).closest(".fc-popover").length)return handler.call(_this,ev)})},removeElement:function(){this.unbindGlobalHandlers(),this.clearDragListeners(),this.el.remove()},renderSkeleton:function(){},renderDates:function(){},unrenderDates:function(){},bindGlobalHandlers:function(){this.listenTo($(document),{dragstart:this.externalDragStart,sortstart:this.externalDragStart})},unbindGlobalHandlers:function(){this.stopListeningTo($(document))},dayMousedown:function(ev){this.isIgnoringMouse||this.dayDragListener.startInteraction(ev,{})},dayTouchStart:function(ev){var view=this.view;(view.isSelected||view.selectedEvent)&&this.tempIgnoreMouse(),this.dayDragListener.startInteraction(ev,{delay:this.view.opt("longPressDelay")})},buildDayDragListener:function(){var dayClickHit,selectionSpan,_this=this,view=this.view,isSelectable=view.opt("selectable"),dragListener=new HitDragListener(this,{scroll:view.opt("dragScroll"),interactionStart:function(){dayClickHit=dragListener.origHit},dragStart:function(){view.unselect()},hitOver:function(hit,isOrig,origHit){origHit&&(isOrig||(dayClickHit=null),isSelectable&&(selectionSpan=_this.computeSelection(_this.getHitSpan(origHit),_this.getHitSpan(hit)),selectionSpan?_this.renderSelection(selectionSpan):!1===selectionSpan&&disableCursor()))},hitOut:function(){dayClickHit=null,selectionSpan=null,_this.unrenderSelection(),enableCursor()},interactionEnd:function(ev,isCancelled){isCancelled||(dayClickHit&&!_this.isIgnoringMouse&&view.triggerDayClick(_this.getHitSpan(dayClickHit),_this.getHitEl(dayClickHit),ev),selectionSpan&&view.reportSelection(selectionSpan,ev),enableCursor())}});return dragListener},clearDragListeners:function(){this.dayDragListener.endInteraction(),this.segDragListener&&this.segDragListener.endInteraction(),this.segResizeListener&&this.segResizeListener.endInteraction(),this.externalDragListener&&this.externalDragListener.endInteraction()},renderEventLocationHelper:function(eventLocation,sourceSeg){var fakeEvent=this.fabricateHelperEvent(eventLocation,sourceSeg);return this.renderHelper(fakeEvent,sourceSeg)},fabricateHelperEvent:function(eventLocation,sourceSeg){var fakeEvent=sourceSeg?createObject(sourceSeg.event):{};return fakeEvent.start=eventLocation.start.clone(),fakeEvent.end=eventLocation.end?eventLocation.end.clone():null,fakeEvent.allDay=null,this.view.calendar.normalizeEventDates(fakeEvent),fakeEvent.className=(fakeEvent.className||[]).concat("fc-helper"),sourceSeg||(fakeEvent.editable=!1),fakeEvent},renderHelper:function(eventLocation,sourceSeg){},unrenderHelper:function(){},renderSelection:function(span){this.renderHighlight(span)},unrenderSelection:function(){this.unrenderHighlight()},computeSelection:function(span0,span1){var span=this.computeSelectionSpan(span0,span1);return!(span&&!this.view.calendar.isSelectionSpanAllowed(span))&&span},computeSelectionSpan:function(span0,span1){var dates=[span0.start,span0.end,span1.start,span1.end];return dates.sort(compareNumbers),{start:dates[0].clone(),end:dates[3].clone()}},renderHighlight:function(span){this.renderFill("highlight",this.spanToSegs(span))},unrenderHighlight:function(){this.unrenderFill("highlight")},highlightSegClasses:function(){return["fc-highlight"]},renderBusinessHours:function(){},unrenderBusinessHours:function(){},getNowIndicatorUnit:function(){},renderNowIndicator:function(date){},unrenderNowIndicator:function(){},renderFill:function(type,segs){},unrenderFill:function(type){var el=this.elsByFill[type];el&&(el.remove(),delete this.elsByFill[type])},renderFillSegEls:function(type,segs){var i,_this=this,segElMethod=this[type+"SegEl"],html="",renderedSegs=[];if(segs.length){for(i=0;i<segs.length;i++)html+=this.fillSegHtml(type,segs[i]);$(html).each(function(i,node){var seg=segs[i],el=$(node);segElMethod&&(el=segElMethod.call(_this,seg,el)),el&&(el=$(el),el.is(_this.fillSegTag)&&(seg.el=el,renderedSegs.push(seg)))})}return renderedSegs},fillSegTag:"div",fillSegHtml:function(type,seg){var classesMethod=this[type+"SegClasses"],cssMethod=this[type+"SegCss"],classes=classesMethod?classesMethod.call(this,seg):[],css=cssToStr(cssMethod?cssMethod.call(this,seg):{});return"<"+this.fillSegTag+(classes.length?' class="'+classes.join(" ")+'"':"")+(css?' style="'+css+'"':"")+" />"},getDayClasses:function(date){var view=this.view,today=view.calendar.getNow(),classes=["fc-"+dayIDs[date.day()]];return 1==view.intervalDuration.as("months")&&date.month()!=view.intervalStart.month()&&classes.push("fc-other-month"),date.isSame(today,"day")?classes.push("fc-today",view.highlightStateClass):date<today?classes.push("fc-past"):classes.push("fc-future"),classes}});Grid.mixin({mousedOverSeg:null,isDraggingSeg:!1,isResizingSeg:!1,isDraggingExternal:!1,segs:null,renderEvents:function(events){var i,bgEvents=[],fgEvents=[];for(i=0;i<events.length;i++)(isBgEvent(events[i])?bgEvents:fgEvents).push(events[i]);this.segs=[].concat(this.renderBgEvents(bgEvents),this.renderFgEvents(fgEvents))},renderBgEvents:function(events){var segs=this.eventsToSegs(events);return this.renderBgSegs(segs)||segs},renderFgEvents:function(events){var segs=this.eventsToSegs(events);return this.renderFgSegs(segs)||segs},unrenderEvents:function(){this.handleSegMouseout(),this.clearDragListeners(),this.unrenderFgSegs(),this.unrenderBgSegs(),this.segs=null},getEventSegs:function(){return this.segs||[]},renderFgSegs:function(segs){},unrenderFgSegs:function(){},renderFgSegEls:function(segs,disableResizing){var i,view=this.view,html="",renderedSegs=[];if(segs.length){for(i=0;i<segs.length;i++)html+=this.fgSegHtml(segs[i],disableResizing);$(html).each(function(i,node){var seg=segs[i],el=view.resolveEventEl(seg.event,$(node));el&&(el.data("fc-seg",seg),seg.el=el,renderedSegs.push(seg))})}return renderedSegs},fgSegHtml:function(seg,disableResizing){},renderBgSegs:function(segs){return this.renderFill("bgEvent",segs)},unrenderBgSegs:function(){this.unrenderFill("bgEvent")},bgEventSegEl:function(seg,el){return this.view.resolveEventEl(seg.event,el)},bgEventSegClasses:function(seg){var event=seg.event,source=event.source||{};return["fc-bgevent"].concat(event.className,source.className||[])},bgEventSegCss:function(seg){return{"background-color":this.getSegSkinCss(seg)["background-color"]}},businessHoursSegClasses:function(seg){return["fc-nonbusiness","fc-bgevent"]},bindSegHandlers:function(){this.bindSegHandler("touchstart",this.handleSegTouchStart),this.bindSegHandler("touchend",this.handleSegTouchEnd),this.bindSegHandler("mouseenter",this.handleSegMouseover),this.bindSegHandler("mouseleave",this.handleSegMouseout),this.bindSegHandler("mousedown",this.handleSegMousedown),this.bindSegHandler("click",this.handleSegClick)},bindSegHandler:function(name,handler){var _this=this;this.el.on(name,".fc-event-container > *",function(ev){var seg=$(this).data("fc-seg");if(seg&&!_this.isDraggingSeg&&!_this.isResizingSeg)return handler.call(_this,seg,ev)})},handleSegClick:function(seg,ev){return this.view.trigger("eventClick",seg.el[0],seg.event,ev)},handleSegMouseover:function(seg,ev){this.isIgnoringMouse||this.mousedOverSeg||(this.mousedOverSeg=seg,seg.el.addClass("fc-allow-mouse-resize"),this.view.trigger("eventMouseover",seg.el[0],seg.event,ev))},handleSegMouseout:function(seg,ev){ev=ev||{},this.mousedOverSeg&&(seg=seg||this.mousedOverSeg,this.mousedOverSeg=null,seg.el.removeClass("fc-allow-mouse-resize"),this.view.trigger("eventMouseout",seg.el[0],seg.event,ev))},handleSegMousedown:function(seg,ev){!this.startSegResize(seg,ev,{distance:5})&&this.view.isEventDraggable(seg.event)&&this.buildSegDragListener(seg).startInteraction(ev,{distance:5})},handleSegTouchStart:function(seg,ev){var dragListener,view=this.view,event=seg.event,isSelected=view.isEventSelected(event),isDraggable=view.isEventDraggable(event),isResizable=view.isEventResizable(event),isResizing=!1;isSelected&&isResizable&&(isResizing=this.startSegResize(seg,ev)),isResizing||!isDraggable&&!isResizable||(dragListener=isDraggable?this.buildSegDragListener(seg):this.buildSegSelectListener(seg),dragListener.startInteraction(ev,{delay:isSelected?0:this.view.opt("longPressDelay")})),this.tempIgnoreMouse()},handleSegTouchEnd:function(seg,ev){this.tempIgnoreMouse()},startSegResize:function(seg,ev,dragOptions){return!!$(ev.target).is(".fc-resizer")&&(this.buildSegResizeListener(seg,$(ev.target).is(".fc-start-resizer")).startInteraction(ev,dragOptions),!0)},buildSegDragListener:function(seg){var isDragging,mouseFollower,dropLocation,_this=this,view=this.view,calendar=view.calendar,el=seg.el,event=seg.event;if(this.segDragListener)return this.segDragListener;var dragListener=this.segDragListener=new HitDragListener(view,{scroll:view.opt("dragScroll"),subjectEl:el,subjectCenter:!0,interactionStart:function(ev){isDragging=!1,mouseFollower=new MouseFollower(seg.el,{additionalClass:"fc-dragging",parentEl:view.el,opacity:dragListener.isTouch?null:view.opt("dragOpacity"),revertDuration:view.opt("dragRevertDuration"),zIndex:2}),mouseFollower.hide(),mouseFollower.start(ev)},dragStart:function(ev){dragListener.isTouch&&!view.isEventSelected(event)&&view.selectEvent(event),isDragging=!0,_this.handleSegMouseout(seg,ev),_this.segDragStart(seg,ev),view.hideEvent(event)},hitOver:function(hit,isOrig,origHit){var dragHelperEls;seg.hit&&(origHit=seg.hit),dropLocation=_this.computeEventDrop(origHit.component.getHitSpan(origHit),hit.component.getHitSpan(hit),event),dropLocation&&!calendar.isEventSpanAllowed(_this.eventToSpan(dropLocation),event)&&(disableCursor(),dropLocation=null),dropLocation&&(dragHelperEls=view.renderDrag(dropLocation,seg))?(dragHelperEls.addClass("fc-dragging"),dragListener.isTouch||_this.applyDragOpacity(dragHelperEls),mouseFollower.hide()):mouseFollower.show(),isOrig&&(dropLocation=null)},hitOut:function(){view.unrenderDrag(),mouseFollower.show(),dropLocation=null},hitDone:function(){enableCursor()},interactionEnd:function(ev){mouseFollower.stop(!dropLocation,function(){isDragging&&(view.unrenderDrag(),view.showEvent(event),_this.segDragStop(seg,ev)),dropLocation&&view.reportEventDrop(event,dropLocation,this.largeUnit,el,ev)}),_this.segDragListener=null}});return dragListener},buildSegSelectListener:function(seg){var _this=this,view=this.view,event=seg.event;if(this.segDragListener)return this.segDragListener;var dragListener=this.segDragListener=new DragListener({dragStart:function(ev){dragListener.isTouch&&!view.isEventSelected(event)&&view.selectEvent(event)},interactionEnd:function(ev){_this.segDragListener=null}});return dragListener},segDragStart:function(seg,ev){this.isDraggingSeg=!0,this.view.trigger("eventDragStart",seg.el[0],seg.event,ev,{})},segDragStop:function(seg,ev){this.isDraggingSeg=!1,this.view.trigger("eventDragStop",seg.el[0],seg.event,ev,{})},computeEventDrop:function(startSpan,endSpan,event){var delta,dropLocation,calendar=this.view.calendar,dragStart=startSpan.start,dragEnd=endSpan.start;return dragStart.hasTime()===dragEnd.hasTime()?(delta=this.diffDates(dragEnd,dragStart),event.allDay&&durationHasTime(delta)?(dropLocation={start:event.start.clone(),end:calendar.getEventEnd(event),allDay:!1},calendar.normalizeEventTimes(dropLocation)):dropLocation={start:event.start.clone(),end:event.end?event.end.clone():null,allDay:event.allDay},dropLocation.start.add(delta),dropLocation.end&&dropLocation.end.add(delta)):dropLocation={start:dragEnd.clone(),end:null,allDay:!dragEnd.hasTime()},dropLocation},applyDragOpacity:function(els){var opacity=this.view.opt("dragOpacity");null!=opacity&&els.each(function(i,node){node.style.opacity=opacity})},externalDragStart:function(ev,ui){var el,accept,view=this.view;view.opt("droppable")&&(el=$((ui?ui.item:null)||ev.target),accept=view.opt("dropAccept"),($.isFunction(accept)?accept.call(el[0],el):el.is(accept))&&(this.isDraggingExternal||this.listenToExternalDrag(el,ev,ui)))},listenToExternalDrag:function(el,ev,ui){var dropLocation,_this=this,calendar=this.view.calendar,meta=getDraggedElMeta(el);(_this.externalDragListener=new HitDragListener(this,{interactionStart:function(){_this.isDraggingExternal=!0},hitOver:function(hit){dropLocation=_this.computeExternalDrop(hit.component.getHitSpan(hit),meta),dropLocation&&!calendar.isExternalSpanAllowed(_this.eventToSpan(dropLocation),dropLocation,meta.eventProps)&&(disableCursor(),dropLocation=null),dropLocation&&_this.renderDrag(dropLocation)},hitOut:function(){dropLocation=null},hitDone:function(){enableCursor(),_this.unrenderDrag()},interactionEnd:function(ev){dropLocation&&_this.view.reportExternalDrop(meta,dropLocation,el,ev,ui),_this.isDraggingExternal=!1,_this.externalDragListener=null}})).startDrag(ev)},computeExternalDrop:function(span,meta){var calendar=this.view.calendar,dropLocation={start:calendar.applyTimezone(span.start),end:null};return meta.startTime&&!dropLocation.start.hasTime()&&dropLocation.start.time(meta.startTime),meta.duration&&(dropLocation.end=dropLocation.start.clone().add(meta.duration)),dropLocation},renderDrag:function(dropLocation,seg){},unrenderDrag:function(){},buildSegResizeListener:function(seg,isStart){var isDragging,resizeLocation,_this=this,view=this.view,calendar=view.calendar,el=seg.el,event=seg.event,eventEnd=calendar.getEventEnd(event);return this.segResizeListener=new HitDragListener(this,{scroll:view.opt("dragScroll"),subjectEl:el,interactionStart:function(){isDragging=!1},dragStart:function(ev){isDragging=!0,_this.handleSegMouseout(seg,ev),_this.segResizeStart(seg,ev)},hitOver:function(hit,isOrig,origHit){
var origHitSpan=_this.getHitSpan(origHit),hitSpan=_this.getHitSpan(hit);resizeLocation=isStart?_this.computeEventStartResize(origHitSpan,hitSpan,event):_this.computeEventEndResize(origHitSpan,hitSpan,event),resizeLocation&&(calendar.isEventSpanAllowed(_this.eventToSpan(resizeLocation),event)?resizeLocation.start.isSame(event.start)&&resizeLocation.end.isSame(eventEnd)&&(resizeLocation=null):(disableCursor(),resizeLocation=null)),resizeLocation&&(view.hideEvent(event),_this.renderEventResize(resizeLocation,seg))},hitOut:function(){resizeLocation=null},hitDone:function(){_this.unrenderEventResize(),view.showEvent(event),enableCursor()},interactionEnd:function(ev){isDragging&&_this.segResizeStop(seg,ev),resizeLocation&&view.reportEventResize(event,resizeLocation,this.largeUnit,el,ev),_this.segResizeListener=null}})},segResizeStart:function(seg,ev){this.isResizingSeg=!0,this.view.trigger("eventResizeStart",seg.el[0],seg.event,ev,{})},segResizeStop:function(seg,ev){this.isResizingSeg=!1,this.view.trigger("eventResizeStop",seg.el[0],seg.event,ev,{})},computeEventStartResize:function(startSpan,endSpan,event){return this.computeEventResize("start",startSpan,endSpan,event)},computeEventEndResize:function(startSpan,endSpan,event){return this.computeEventResize("end",startSpan,endSpan,event)},computeEventResize:function(type,startSpan,endSpan,event){var resizeLocation,defaultDuration,calendar=this.view.calendar,delta=this.diffDates(endSpan[type],startSpan[type]);return resizeLocation={start:event.start.clone(),end:calendar.getEventEnd(event),allDay:event.allDay},resizeLocation.allDay&&durationHasTime(delta)&&(resizeLocation.allDay=!1,calendar.normalizeEventTimes(resizeLocation)),resizeLocation[type].add(delta),resizeLocation.start.isBefore(resizeLocation.end)||(defaultDuration=this.minResizeDuration||(event.allDay?calendar.defaultAllDayEventDuration:calendar.defaultTimedEventDuration),"start"==type?resizeLocation.start=resizeLocation.end.clone().subtract(defaultDuration):resizeLocation.end=resizeLocation.start.clone().add(defaultDuration)),resizeLocation},renderEventResize:function(range,seg){},unrenderEventResize:function(){},getEventTimeText:function(range,formatStr,displayEnd){return null==formatStr&&(formatStr=this.eventTimeFormat),null==displayEnd&&(displayEnd=this.displayEventEnd),this.displayEventTime&&range.start.hasTime()?displayEnd&&range.end?this.view.formatRange(range,formatStr):range.start.format(formatStr):""},getSegClasses:function(seg,isDraggable,isResizable){var view=this.view,event=seg.event,classes=["fc-event",seg.isStart?"fc-start":"fc-not-start",seg.isEnd?"fc-end":"fc-not-end"].concat(event.className,event.source?event.source.className:[]);return isDraggable&&classes.push("fc-draggable"),isResizable&&classes.push("fc-resizable"),view.isEventSelected(event)&&classes.push("fc-selected"),classes},getSegSkinCss:function(seg){var event=seg.event,view=this.view,source=event.source||{},eventColor=event.color,sourceColor=source.color,optionColor=view.opt("eventColor");return{"background-color":event.backgroundColor||eventColor||source.backgroundColor||sourceColor||view.opt("eventBackgroundColor")||optionColor,"border-color":event.borderColor||eventColor||source.borderColor||sourceColor||view.opt("eventBorderColor")||optionColor,color:event.textColor||source.textColor||view.opt("eventTextColor")}},eventToSegs:function(event){return this.eventsToSegs([event])},eventToSpan:function(event){return this.eventToSpans(event)[0]},eventToSpans:function(event){var range=this.eventToRange(event);return this.eventRangeToSpans(range,event)},eventsToSegs:function(allEvents,segSliceFunc){var _this=this,eventsById=groupEventsById(allEvents),segs=[];return $.each(eventsById,function(id,events){var i,ranges=[];for(i=0;i<events.length;i++)ranges.push(_this.eventToRange(events[i]));if(isInverseBgEvent(events[0]))for(ranges=_this.invertRanges(ranges),i=0;i<ranges.length;i++)segs.push.apply(segs,_this.eventRangeToSegs(ranges[i],events[0],segSliceFunc));else for(i=0;i<ranges.length;i++)segs.push.apply(segs,_this.eventRangeToSegs(ranges[i],events[i],segSliceFunc))}),segs},eventToRange:function(event){return{start:event.start.clone().stripZone(),end:(event.end?event.end.clone():this.view.calendar.getDefaultEventEnd(null!=event.allDay?event.allDay:!event.start.hasTime(),event.start)).stripZone()}},eventRangeToSegs:function(range,event,segSliceFunc){var i,spans=this.eventRangeToSpans(range,event),segs=[];for(i=0;i<spans.length;i++)segs.push.apply(segs,this.eventSpanToSegs(spans[i],event,segSliceFunc));return segs},eventRangeToSpans:function(range,event){return[$.extend({},range)]},eventSpanToSegs:function(span,event,segSliceFunc){var i,seg,segs=segSliceFunc?segSliceFunc(span):this.spanToSegs(span);for(i=0;i<segs.length;i++)seg=segs[i],seg.event=event,seg.eventStartMS=+span.start,seg.eventDurationMS=span.end-span.start;return segs},invertRanges:function(ranges){var i,range,view=this.view,viewStart=view.start.clone(),viewEnd=view.end.clone(),inverseRanges=[],start=viewStart;for(ranges.sort(compareRanges),i=0;i<ranges.length;i++)range=ranges[i],range.start>start&&inverseRanges.push({start:start,end:range.start}),start=range.end;return start<viewEnd&&inverseRanges.push({start:start,end:viewEnd}),inverseRanges},sortEventSegs:function(segs){segs.sort(proxy(this,"compareEventSegs"))},compareEventSegs:function(seg1,seg2){return seg1.eventStartMS-seg2.eventStartMS||seg2.eventDurationMS-seg1.eventDurationMS||seg2.event.allDay-seg1.event.allDay||compareByFieldSpecs(seg1.event,seg2.event,this.view.eventOrderSpecs)}}),FC.isBgEvent=isBgEvent,FC.dataAttrPrefix="";var DayTableMixin=FC.DayTableMixin={breakOnWeeks:!1,dayDates:null,dayIndices:null,daysPerRow:null,rowCnt:null,colCnt:null,colHeadFormat:null,updateDayTable:function(){for(var daysPerRow,firstDay,rowCnt,view=this.view,date=this.start.clone(),dayIndex=-1,dayIndices=[],dayDates=[];date.isBefore(this.end);)view.isHiddenDay(date)?dayIndices.push(dayIndex+.5):(dayIndex++,dayIndices.push(dayIndex),dayDates.push(date.clone())),date.add(1,"days");if(this.breakOnWeeks){for(firstDay=dayDates[0].day(),daysPerRow=1;daysPerRow<dayDates.length&&dayDates[daysPerRow].day()!=firstDay;daysPerRow++);rowCnt=Math.ceil(dayDates.length/daysPerRow)}else rowCnt=1,daysPerRow=dayDates.length;this.dayDates=dayDates,this.dayIndices=dayIndices,this.daysPerRow=daysPerRow,this.rowCnt=rowCnt,this.updateDayTableCols()},updateDayTableCols:function(){this.colCnt=this.computeColCnt(),this.colHeadFormat=this.view.opt("columnFormat")||this.computeColHeadFormat()},computeColCnt:function(){return this.daysPerRow},getCellDate:function(row,col){return this.dayDates[this.getCellDayIndex(row,col)].clone()},getCellRange:function(row,col){var start=this.getCellDate(row,col);return{start:start,end:start.clone().add(1,"days")}},getCellDayIndex:function(row,col){return row*this.daysPerRow+this.getColDayIndex(col)},getColDayIndex:function(col){return this.isRTL?this.colCnt-1-col:col},getDateDayIndex:function(date){var dayIndices=this.dayIndices,dayOffset=date.diff(this.start,"days");return dayOffset<0?dayIndices[0]-1:dayOffset>=dayIndices.length?dayIndices[dayIndices.length-1]+1:dayIndices[dayOffset]},computeColHeadFormat:function(){return this.rowCnt>1||this.colCnt>10?"ddd":this.colCnt>1?this.view.opt("dayOfMonthFormat"):"dddd"},sliceRangeByRow:function(range){var row,rowFirst,rowLast,segFirst,segLast,daysPerRow=this.daysPerRow,normalRange=this.view.computeDayRange(range),rangeFirst=this.getDateDayIndex(normalRange.start),rangeLast=this.getDateDayIndex(normalRange.end.clone().subtract(1,"days")),segs=[];for(row=0;row<this.rowCnt;row++)rowFirst=row*daysPerRow,rowLast=rowFirst+daysPerRow-1,segFirst=Math.max(rangeFirst,rowFirst),segLast=Math.min(rangeLast,rowLast),segFirst=Math.ceil(segFirst),segLast=Math.floor(segLast),segFirst<=segLast&&segs.push({row:row,firstRowDayIndex:segFirst-rowFirst,lastRowDayIndex:segLast-rowFirst,isStart:segFirst===rangeFirst,isEnd:segLast===rangeLast});return segs},sliceRangeByDay:function(range){var row,rowFirst,rowLast,i,segFirst,segLast,daysPerRow=this.daysPerRow,normalRange=this.view.computeDayRange(range),rangeFirst=this.getDateDayIndex(normalRange.start),rangeLast=this.getDateDayIndex(normalRange.end.clone().subtract(1,"days")),segs=[];for(row=0;row<this.rowCnt;row++)for(rowFirst=row*daysPerRow,rowLast=rowFirst+daysPerRow-1,i=rowFirst;i<=rowLast;i++)segFirst=Math.max(rangeFirst,i),segLast=Math.min(rangeLast,i),segFirst=Math.ceil(segFirst),segLast=Math.floor(segLast),segFirst<=segLast&&segs.push({row:row,firstRowDayIndex:segFirst-rowFirst,lastRowDayIndex:segLast-rowFirst,isStart:segFirst===rangeFirst,isEnd:segLast===rangeLast});return segs},renderHeadHtml:function(){return'<div class="fc-row '+this.view.widgetHeaderClass+'"><table><thead>'+this.renderHeadTrHtml()+"</thead></table></div>"},renderHeadIntroHtml:function(){return this.renderIntroHtml()},renderHeadTrHtml:function(){return"<tr>"+(this.isRTL?"":this.renderHeadIntroHtml())+this.renderHeadDateCellsHtml()+(this.isRTL?this.renderHeadIntroHtml():"")+"</tr>"},renderHeadDateCellsHtml:function(){var col,date,htmls=[];for(col=0;col<this.colCnt;col++)date=this.getCellDate(0,col),htmls.push(this.renderHeadDateCellHtml(date));return htmls.join("")},renderHeadDateCellHtml:function(date,colspan,otherAttrs){return'<th class="fc-day-header '+this.view.widgetHeaderClass+" fc-"+dayIDs[date.day()]+'"'+(1==this.rowCnt?' data-date="'+date.format("YYYY-MM-DD")+'"':"")+(colspan>1?' colspan="'+colspan+'"':"")+(otherAttrs?" "+otherAttrs:"")+">"+htmlEscape(date.format(this.colHeadFormat))+"</th>"},renderBgTrHtml:function(row){return"<tr>"+(this.isRTL?"":this.renderBgIntroHtml(row))+this.renderBgCellsHtml(row)+(this.isRTL?this.renderBgIntroHtml(row):"")+"</tr>"},renderBgIntroHtml:function(row){return this.renderIntroHtml()},renderBgCellsHtml:function(row){var col,date,htmls=[];for(col=0;col<this.colCnt;col++)date=this.getCellDate(row,col),htmls.push(this.renderBgCellHtml(date));return htmls.join("")},renderBgCellHtml:function(date,otherAttrs){var view=this.view,classes=this.getDayClasses(date);return classes.unshift("fc-day",view.widgetContentClass),'<td class="'+classes.join(" ")+'" data-date="'+date.format("YYYY-MM-DD")+'"'+(otherAttrs?" "+otherAttrs:"")+"></td>"},renderIntroHtml:function(){},bookendCells:function(trEl){var introHtml=this.renderIntroHtml();introHtml&&(this.isRTL?trEl.append(introHtml):trEl.prepend(introHtml))}},DayGrid=FC.DayGrid=Grid.extend(DayTableMixin,{numbersVisible:!1,bottomCoordPadding:0,rowEls:null,cellEls:null,helperEls:null,rowCoordCache:null,colCoordCache:null,renderDates:function(isRigid){var row,col,view=this.view,rowCnt=this.rowCnt,colCnt=this.colCnt,html="";for(row=0;row<rowCnt;row++)html+=this.renderDayRowHtml(row,isRigid);for(this.el.html(html),this.rowEls=this.el.find(".fc-row"),this.cellEls=this.el.find(".fc-day"),this.rowCoordCache=new CoordCache({els:this.rowEls,isVertical:!0}),this.colCoordCache=new CoordCache({els:this.cellEls.slice(0,this.colCnt),isHorizontal:!0}),row=0;row<rowCnt;row++)for(col=0;col<colCnt;col++)view.trigger("dayRender",null,this.getCellDate(row,col),this.getCellEl(row,col))},unrenderDates:function(){this.removeSegPopover()},renderBusinessHours:function(){var events=this.view.calendar.getBusinessHoursEvents(!0),segs=this.eventsToSegs(events);this.renderFill("businessHours",segs,"bgevent")},renderDayRowHtml:function(row,isRigid){var view=this.view,classes=["fc-row","fc-week",view.widgetContentClass];return isRigid&&classes.push("fc-rigid"),'<div class="'+classes.join(" ")+'"><div class="fc-bg"><table>'+this.renderBgTrHtml(row)+'</table></div><div class="fc-content-skeleton"><table>'+(this.numbersVisible?"<thead>"+this.renderNumberTrHtml(row)+"</thead>":"")+"</table></div></div>"},renderNumberTrHtml:function(row){return"<tr>"+(this.isRTL?"":this.renderNumberIntroHtml(row))+this.renderNumberCellsHtml(row)+(this.isRTL?this.renderNumberIntroHtml(row):"")+"</tr>"},renderNumberIntroHtml:function(row){return this.renderIntroHtml()},renderNumberCellsHtml:function(row){var col,date,htmls=[];for(col=0;col<this.colCnt;col++)date=this.getCellDate(row,col),htmls.push(this.renderNumberCellHtml(date));return htmls.join("")},renderNumberCellHtml:function(date){var classes;return this.view.dayNumbersVisible?(classes=this.getDayClasses(date),classes.unshift("fc-day-number"),'<td class="'+classes.join(" ")+'" data-date="'+date.format()+'">'+date.date()+"</td>"):"<td/>"},computeEventTimeFormat:function(){return this.view.opt("extraSmallTimeFormat")},computeDisplayEventEnd:function(){return 1==this.colCnt},rangeUpdated:function(){this.updateDayTable()},spanToSegs:function(span){var i,seg,segs=this.sliceRangeByRow(span);for(i=0;i<segs.length;i++)seg=segs[i],this.isRTL?(seg.leftCol=this.daysPerRow-1-seg.lastRowDayIndex,seg.rightCol=this.daysPerRow-1-seg.firstRowDayIndex):(seg.leftCol=seg.firstRowDayIndex,seg.rightCol=seg.lastRowDayIndex);return segs},prepareHits:function(){this.colCoordCache.build(),this.rowCoordCache.build(),this.rowCoordCache.bottoms[this.rowCnt-1]+=this.bottomCoordPadding},releaseHits:function(){this.colCoordCache.clear(),this.rowCoordCache.clear()},queryHit:function(leftOffset,topOffset){var col=this.colCoordCache.getHorizontalIndex(leftOffset),row=this.rowCoordCache.getVerticalIndex(topOffset);if(null!=row&&null!=col)return this.getCellHit(row,col)},getHitSpan:function(hit){return this.getCellRange(hit.row,hit.col)},getHitEl:function(hit){return this.getCellEl(hit.row,hit.col)},getCellHit:function(row,col){return{row:row,col:col,component:this,left:this.colCoordCache.getLeftOffset(col),right:this.colCoordCache.getRightOffset(col),top:this.rowCoordCache.getTopOffset(row),bottom:this.rowCoordCache.getBottomOffset(row)}},getCellEl:function(row,col){return this.cellEls.eq(row*this.colCnt+col)},renderDrag:function(eventLocation,seg){if(this.renderHighlight(this.eventToSpan(eventLocation)),seg&&!seg.el.closest(this.el).length)return this.renderEventLocationHelper(eventLocation,seg)},unrenderDrag:function(){this.unrenderHighlight(),this.unrenderHelper()},renderEventResize:function(eventLocation,seg){return this.renderHighlight(this.eventToSpan(eventLocation)),this.renderEventLocationHelper(eventLocation,seg)},unrenderEventResize:function(){this.unrenderHighlight(),this.unrenderHelper()},renderHelper:function(event,sourceSeg){var rowStructs,helperNodes=[],segs=this.eventToSegs(event);return segs=this.renderFgSegEls(segs),rowStructs=this.renderSegRows(segs),this.rowEls.each(function(row,rowNode){var skeletonTop,rowEl=$(rowNode),skeletonEl=$('<div class="fc-helper-skeleton"><table/></div>');skeletonTop=sourceSeg&&sourceSeg.row===row?sourceSeg.el.position().top:rowEl.find(".fc-content-skeleton tbody").position().top,skeletonEl.css("top",skeletonTop).find("table").append(rowStructs[row].tbodyEl),rowEl.append(skeletonEl),helperNodes.push(skeletonEl[0])}),this.helperEls=$(helperNodes)},unrenderHelper:function(){this.helperEls&&(this.helperEls.remove(),this.helperEls=null)},fillSegTag:"td",renderFill:function(type,segs,className){var i,seg,skeletonEl,nodes=[];for(segs=this.renderFillSegEls(type,segs),i=0;i<segs.length;i++)seg=segs[i],skeletonEl=this.renderFillRow(type,seg,className),this.rowEls.eq(seg.row).append(skeletonEl),nodes.push(skeletonEl[0]);return this.elsByFill[type]=$(nodes),segs},renderFillRow:function(type,seg,className){var skeletonEl,trEl,colCnt=this.colCnt,startCol=seg.leftCol,endCol=seg.rightCol+1;return className=className||type.toLowerCase(),skeletonEl=$('<div class="fc-'+className+'-skeleton"><table><tr/></table></div>'),trEl=skeletonEl.find("tr"),startCol>0&&trEl.append('<td colspan="'+startCol+'"/>'),trEl.append(seg.el.attr("colspan",endCol-startCol)),endCol<colCnt&&trEl.append('<td colspan="'+(colCnt-endCol)+'"/>'),this.bookendCells(trEl),skeletonEl}});DayGrid.mixin({rowStructs:null,unrenderEvents:function(){this.removeSegPopover(),Grid.prototype.unrenderEvents.apply(this,arguments)},getEventSegs:function(){return Grid.prototype.getEventSegs.call(this).concat(this.popoverSegs||[])},renderBgSegs:function(segs){var allDaySegs=$.grep(segs,function(seg){return seg.event.allDay});return Grid.prototype.renderBgSegs.call(this,allDaySegs)},renderFgSegs:function(segs){var rowStructs;return segs=this.renderFgSegEls(segs),rowStructs=this.rowStructs=this.renderSegRows(segs),this.rowEls.each(function(i,rowNode){$(rowNode).find(".fc-content-skeleton > table").append(rowStructs[i].tbodyEl)}),segs},unrenderFgSegs:function(){for(var rowStruct,rowStructs=this.rowStructs||[];rowStruct=rowStructs.pop();)rowStruct.tbodyEl.remove();this.rowStructs=null},renderSegRows:function(segs){var segRows,row,rowStructs=[];for(segRows=this.groupSegRows(segs),row=0;row<segRows.length;row++)rowStructs.push(this.renderSegRow(row,segRows[row]));return rowStructs},fgSegHtml:function(seg,disableResizing){var timeText,titleHtml,view=this.view,event=seg.event,isDraggable=view.isEventDraggable(event),isResizableFromStart=!disableResizing&&event.allDay&&seg.isStart&&view.isEventResizableFromStart(event),isResizableFromEnd=!disableResizing&&event.allDay&&seg.isEnd&&view.isEventResizableFromEnd(event),classes=this.getSegClasses(seg,isDraggable,isResizableFromStart||isResizableFromEnd),skinCss=cssToStr(this.getSegSkinCss(seg)),timeHtml="";return classes.unshift("fc-day-grid-event","fc-h-event"),seg.isStart&&(timeText=this.getEventTimeText(event))&&(timeHtml='<span class="fc-time">'+htmlEscape(timeText)+"</span>"),titleHtml='<span class="fc-title">'+(htmlEscape(event.title||"")||"&nbsp;")+"</span>",'<a class="'+classes.join(" ")+'"'+(event.url?' href="'+htmlEscape(event.url)+'"':"")+(skinCss?' style="'+skinCss+'"':"")+'><div class="fc-content">'+(this.isRTL?titleHtml+" "+timeHtml:timeHtml+" "+titleHtml)+"</div>"+(isResizableFromStart?'<div class="fc-resizer fc-start-resizer" />':"")+(isResizableFromEnd?'<div class="fc-resizer fc-end-resizer" />':"")+"</a>"},renderSegRow:function(row,rowSegs){function emptyCellsUntil(endCol){for(;col<endCol;)td=(loneCellMatrix[i-1]||[])[col],td?td.attr("rowspan",parseInt(td.attr("rowspan")||1,10)+1):(td=$("<td/>"),tr.append(td)),cellMatrix[i][col]=td,loneCellMatrix[i][col]=td,col++}var i,levelSegs,col,tr,j,seg,td,colCnt=this.colCnt,segLevels=this.buildSegLevels(rowSegs),levelCnt=Math.max(1,segLevels.length),tbody=$("<tbody/>"),segMatrix=[],cellMatrix=[],loneCellMatrix=[];for(i=0;i<levelCnt;i++){if(levelSegs=segLevels[i],col=0,tr=$("<tr/>"),segMatrix.push([]),cellMatrix.push([]),loneCellMatrix.push([]),levelSegs)for(j=0;j<levelSegs.length;j++){for(seg=levelSegs[j],emptyCellsUntil(seg.leftCol),td=$('<td class="fc-event-container"/>').append(seg.el),seg.leftCol!=seg.rightCol?td.attr("colspan",seg.rightCol-seg.leftCol+1):loneCellMatrix[i][col]=td;col<=seg.rightCol;)cellMatrix[i][col]=td,segMatrix[i][col]=seg,col++;tr.append(td)}emptyCellsUntil(colCnt),this.bookendCells(tr),tbody.append(tr)}return{row:row,tbodyEl:tbody,cellMatrix:cellMatrix,segMatrix:segMatrix,segLevels:segLevels,segs:rowSegs}},buildSegLevels:function(segs){var i,seg,j,levels=[];for(this.sortEventSegs(segs),i=0;i<segs.length;i++){for(seg=segs[i],j=0;j<levels.length&&isDaySegCollision(seg,levels[j]);j++);seg.level=j,(levels[j]||(levels[j]=[])).push(seg)}for(j=0;j<levels.length;j++)levels[j].sort(compareDaySegCols);return levels},groupSegRows:function(segs){var i,segRows=[];for(i=0;i<this.rowCnt;i++)segRows.push([]);for(i=0;i<segs.length;i++)segRows[segs[i].row].push(segs[i]);return segRows}}),DayGrid.mixin({segPopover:null,popoverSegs:null,removeSegPopover:function(){this.segPopover&&this.segPopover.hide()},limitRows:function(levelLimit){var row,rowLevelLimit,rowStructs=this.rowStructs||[];for(row=0;row<rowStructs.length;row++)this.unlimitRow(row),!1!==(rowLevelLimit=!!levelLimit&&("number"==typeof levelLimit?levelLimit:this.computeRowLevelLimit(row)))&&this.limitRow(row,rowLevelLimit)},computeRowLevelLimit:function(row){function iterInnerHeights(i,childNode){trHeight=Math.max(trHeight,$(childNode).outerHeight())}var i,trEl,trHeight,rowEl=this.rowEls.eq(row),rowHeight=rowEl.height(),trEls=this.rowStructs[row].tbodyEl.children();for(i=0;i<trEls.length;i++)if(trEl=trEls.eq(i).removeClass("fc-limited"),trHeight=0,trEl.find("> td > :first-child").each(iterInnerHeights),trEl.position().top+trHeight>rowHeight)return i;return!1},limitRow:function(row,levelLimit){function emptyCellsUntil(endCol){for(;col<endCol;)segsBelow=_this.getCellSegs(row,col,levelLimit),segsBelow.length&&(td=cellMatrix[levelLimit-1][col],moreLink=_this.renderMoreLink(row,col,segsBelow),moreWrap=$("<div/>").append(moreLink),td.append(moreWrap),moreNodes.push(moreWrap[0])),col++}var levelSegs,cellMatrix,limitedNodes,i,seg,segsBelow,totalSegsBelow,colSegsBelow,td,rowspan,segMoreNodes,j,moreTd,moreWrap,moreLink,_this=this,rowStruct=this.rowStructs[row],moreNodes=[],col=0;if(levelLimit&&levelLimit<rowStruct.segLevels.length){for(levelSegs=rowStruct.segLevels[levelLimit-1],cellMatrix=rowStruct.cellMatrix,limitedNodes=rowStruct.tbodyEl.children().slice(levelLimit).addClass("fc-limited").get(),i=0;i<levelSegs.length;i++){for(seg=levelSegs[i],emptyCellsUntil(seg.leftCol),colSegsBelow=[],totalSegsBelow=0;col<=seg.rightCol;)segsBelow=this.getCellSegs(row,col,levelLimit),colSegsBelow.push(segsBelow),totalSegsBelow+=segsBelow.length,col++;if(totalSegsBelow){for(td=cellMatrix[levelLimit-1][seg.leftCol],rowspan=td.attr("rowspan")||1,segMoreNodes=[],j=0;j<colSegsBelow.length;j++)moreTd=$('<td class="fc-more-cell"/>').attr("rowspan",rowspan),segsBelow=colSegsBelow[j],moreLink=this.renderMoreLink(row,seg.leftCol+j,[seg].concat(segsBelow)),moreWrap=$("<div/>").append(moreLink),moreTd.append(moreWrap),segMoreNodes.push(moreTd[0]),moreNodes.push(moreTd[0]);td.addClass("fc-limited").after($(segMoreNodes)),limitedNodes.push(td[0])}}emptyCellsUntil(this.colCnt),rowStruct.moreEls=$(moreNodes),rowStruct.limitedEls=$(limitedNodes)}},unlimitRow:function(row){var rowStruct=this.rowStructs[row];rowStruct.moreEls&&(rowStruct.moreEls.remove(),rowStruct.moreEls=null),rowStruct.limitedEls&&(rowStruct.limitedEls.removeClass("fc-limited"),rowStruct.limitedEls=null)},renderMoreLink:function(row,col,hiddenSegs){var _this=this,view=this.view;return $('<a class="fc-more"/>').text(this.getMoreLinkText(hiddenSegs.length)).on("click",function(ev){var clickOption=view.opt("eventLimitClick"),date=_this.getCellDate(row,col),moreEl=$(this),dayEl=_this.getCellEl(row,col),allSegs=_this.getCellSegs(row,col),reslicedAllSegs=_this.resliceDaySegs(allSegs,date),reslicedHiddenSegs=_this.resliceDaySegs(hiddenSegs,date);"function"==typeof clickOption&&(clickOption=view.trigger("eventLimitClick",null,{date:date,dayEl:dayEl,moreEl:moreEl,segs:reslicedAllSegs,hiddenSegs:reslicedHiddenSegs},ev)),"popover"===clickOption?_this.showSegPopover(row,col,moreEl,reslicedAllSegs):"string"==typeof clickOption&&view.calendar.zoomTo(date,clickOption)})},showSegPopover:function(row,col,moreLink,segs){var topEl,options,_this=this,view=this.view,moreWrap=moreLink.parent();topEl=1==this.rowCnt?view.el:this.rowEls.eq(row),options={className:"fc-more-popover",content:this.renderSegPopoverContent(row,col,segs),parentEl:this.el,top:topEl.offset().top,autoHide:!0,viewportConstrain:view.opt("popoverViewportConstrain"),hide:function(){_this.segPopover.removeElement(),_this.segPopover=null,_this.popoverSegs=null}},this.isRTL?options.right=moreWrap.offset().left+moreWrap.outerWidth()+1:options.left=moreWrap.offset().left-1,this.segPopover=new Popover(options),this.segPopover.show()},renderSegPopoverContent:function(row,col,segs){var i,view=this.view,isTheme=view.opt("theme"),title=this.getCellDate(row,col).format(view.opt("dayPopoverFormat")),content=$('<div class="fc-header '+view.widgetHeaderClass+'"><span class="fc-close '+(isTheme?"ui-icon ui-icon-closethick":"fc-icon fc-icon-x")+'"></span><span class="fc-title">'+htmlEscape(title)+'</span><div class="fc-clear"/></div><div class="fc-body '+view.widgetContentClass+'"><div class="fc-event-container"></div></div>'),segContainer=content.find(".fc-event-container");for(segs=this.renderFgSegEls(segs,!0),this.popoverSegs=segs,i=0;i<segs.length;i++)this.prepareHits(),segs[i].hit=this.getCellHit(row,col),this.releaseHits(),segContainer.append(segs[i].el);return content},resliceDaySegs:function(segs,dayDate){var events=$.map(segs,function(seg){return seg.event}),dayStart=dayDate.clone(),dayEnd=dayStart.clone().add(1,"days"),dayRange={start:dayStart,end:dayEnd};return segs=this.eventsToSegs(events,function(range){var seg=intersectRanges(range,dayRange);return seg?[seg]:[]}),this.sortEventSegs(segs),segs},getMoreLinkText:function(num){var opt=this.view.opt("eventLimitText");return"function"==typeof opt?opt(num):"+"+num+" "+opt},getCellSegs:function(row,col,startLevel){for(var seg,segMatrix=this.rowStructs[row].segMatrix,level=startLevel||0,segs=[];level<segMatrix.length;)seg=segMatrix[level][col],seg&&segs.push(seg),level++;return segs}});var TimeGrid=FC.TimeGrid=Grid.extend(DayTableMixin,{slotDuration:null,snapDuration:null,snapsPerSlot:null,minTime:null,maxTime:null,labelFormat:null,labelInterval:null,colEls:null,slatContainerEl:null,slatEls:null,nowIndicatorEls:null,colCoordCache:null,slatCoordCache:null,constructor:function(){Grid.apply(this,arguments),this.processOptions()},renderDates:function(){this.el.html(this.renderHtml()),this.colEls=this.el.find(".fc-day"),this.slatContainerEl=this.el.find(".fc-slats"),this.slatEls=this.slatContainerEl.find("tr"),this.colCoordCache=new CoordCache({els:this.colEls,isHorizontal:!0}),this.slatCoordCache=new CoordCache({els:this.slatEls,isVertical:!0}),this.renderContentSkeleton()},renderHtml:function(){return'<div class="fc-bg"><table>'+this.renderBgTrHtml(0)+'</table></div><div class="fc-slats"><table>'+this.renderSlatRowHtml()+"</table></div>"},renderSlatRowHtml:function(){for(var slotDate,isLabeled,axisHtml,view=this.view,isRTL=this.isRTL,html="",slotTime=moment.duration(+this.minTime);slotTime<this.maxTime;)slotDate=this.start.clone().time(slotTime),isLabeled=isInt(divideDurationByDuration(slotTime,this.labelInterval)),axisHtml='<td class="fc-axis fc-time '+view.widgetContentClass+'" '+view.axisStyleAttr()+">"+(isLabeled?"<span>"+htmlEscape(slotDate.format(this.labelFormat))+"</span>":"")+"</td>",html+='<tr data-time="'+slotDate.format("HH:mm:ss")+'"'+(isLabeled?"":' class="fc-minor"')+">"+(isRTL?"":axisHtml)+'<td class="'+view.widgetContentClass+'"/>'+(isRTL?axisHtml:"")+"</tr>",slotTime.add(this.slotDuration);return html},processOptions:function(){var input,view=this.view,slotDuration=view.opt("slotDuration"),snapDuration=view.opt("snapDuration");slotDuration=moment.duration(slotDuration),snapDuration=snapDuration?moment.duration(snapDuration):slotDuration,this.slotDuration=slotDuration,this.snapDuration=snapDuration,this.snapsPerSlot=slotDuration/snapDuration,this.minResizeDuration=snapDuration,this.minTime=moment.duration(view.opt("minTime")),this.maxTime=moment.duration(view.opt("maxTime")),input=view.opt("slotLabelFormat"),$.isArray(input)&&(input=input[input.length-1]),this.labelFormat=input||view.opt("axisFormat")||view.opt("smallTimeFormat"),input=view.opt("slotLabelInterval"),this.labelInterval=input?moment.duration(input):this.computeLabelInterval(slotDuration)},computeLabelInterval:function(slotDuration){var i,labelInterval,slotsPerLabel;for(i=AGENDA_STOCK_SUB_DURATIONS.length-1;i>=0;i--)if(labelInterval=moment.duration(AGENDA_STOCK_SUB_DURATIONS[i]),slotsPerLabel=divideDurationByDuration(labelInterval,slotDuration),isInt(slotsPerLabel)&&slotsPerLabel>1)return labelInterval;return moment.duration(slotDuration)},computeEventTimeFormat:function(){return this.view.opt("noMeridiemTimeFormat")},computeDisplayEventEnd:function(){return!0},prepareHits:function(){this.colCoordCache.build(),this.slatCoordCache.build()},releaseHits:function(){this.colCoordCache.clear()},queryHit:function(leftOffset,topOffset){var snapsPerSlot=this.snapsPerSlot,colCoordCache=this.colCoordCache,slatCoordCache=this.slatCoordCache,colIndex=colCoordCache.getHorizontalIndex(leftOffset),slatIndex=slatCoordCache.getVerticalIndex(topOffset);if(null!=colIndex&&null!=slatIndex){var slatTop=slatCoordCache.getTopOffset(slatIndex),slatHeight=slatCoordCache.getHeight(slatIndex),partial=(topOffset-slatTop)/slatHeight,localSnapIndex=Math.floor(partial*snapsPerSlot),snapIndex=slatIndex*snapsPerSlot+localSnapIndex,snapTop=slatTop+localSnapIndex/snapsPerSlot*slatHeight,snapBottom=slatTop+(localSnapIndex+1)/snapsPerSlot*slatHeight;return{col:colIndex,snap:snapIndex,component:this,left:colCoordCache.getLeftOffset(colIndex),right:colCoordCache.getRightOffset(colIndex),top:snapTop,bottom:snapBottom}}},getHitSpan:function(hit){var end,start=this.getCellDate(0,hit.col),time=this.computeSnapTime(hit.snap);return start.time(time),end=start.clone().add(this.snapDuration),{start:start,end:end}},getHitEl:function(hit){return this.colEls.eq(hit.col)},rangeUpdated:function(){this.updateDayTable()},computeSnapTime:function(snapIndex){return moment.duration(this.minTime+this.snapDuration*snapIndex)},spanToSegs:function(span){var i,segs=this.sliceRangeByTimes(span);for(i=0;i<segs.length;i++)this.isRTL?segs[i].col=this.daysPerRow-1-segs[i].dayIndex:segs[i].col=segs[i].dayIndex;return segs},sliceRangeByTimes:function(range){var seg,dayIndex,dayDate,dayRange,segs=[];for(dayIndex=0;dayIndex<this.daysPerRow;dayIndex++)dayDate=this.dayDates[dayIndex].clone(),dayRange={start:dayDate.clone().time(this.minTime),end:dayDate.clone().time(this.maxTime)},(seg=intersectRanges(range,dayRange))&&(seg.dayIndex=dayIndex,segs.push(seg));return segs},updateSize:function(isResize){this.slatCoordCache.build(),isResize&&this.updateSegVerticals([].concat(this.fgSegs||[],this.bgSegs||[],this.businessSegs||[]))},getTotalSlatHeight:function(){return this.slatContainerEl.outerHeight()},computeDateTop:function(date,startOfDayDate){return this.computeTimeTop(moment.duration(date-startOfDayDate.clone().stripTime()))},computeTimeTop:function(time){var slatIndex,slatRemainder,len=this.slatEls.length,slatCoverage=(time-this.minTime)/this.slotDuration;return slatCoverage=Math.max(0,slatCoverage),slatCoverage=Math.min(len,slatCoverage),slatIndex=Math.floor(slatCoverage),slatIndex=Math.min(slatIndex,len-1),slatRemainder=slatCoverage-slatIndex,this.slatCoordCache.getTopPosition(slatIndex)+this.slatCoordCache.getHeight(slatIndex)*slatRemainder},renderDrag:function(eventLocation,seg){if(seg)return this.renderEventLocationHelper(eventLocation,seg);this.renderHighlight(this.eventToSpan(eventLocation))},unrenderDrag:function(){this.unrenderHelper(),this.unrenderHighlight()},renderEventResize:function(eventLocation,seg){return this.renderEventLocationHelper(eventLocation,seg)},unrenderEventResize:function(){this.unrenderHelper()},renderHelper:function(event,sourceSeg){return this.renderHelperSegs(this.eventToSegs(event),sourceSeg)},unrenderHelper:function(){this.unrenderHelperSegs()},renderBusinessHours:function(){var events=this.view.calendar.getBusinessHoursEvents(),segs=this.eventsToSegs(events);this.renderBusinessSegs(segs)},unrenderBusinessHours:function(){this.unrenderBusinessSegs()},getNowIndicatorUnit:function(){return"minute"},renderNowIndicator:function(date){var i,segs=this.spanToSegs({start:date,end:date}),top=this.computeDateTop(date,date),nodes=[];for(i=0;i<segs.length;i++)nodes.push($('<div class="fc-now-indicator fc-now-indicator-line"></div>').css("top",top).appendTo(this.colContainerEls.eq(segs[i].col))[0]);segs.length>0&&nodes.push($('<div class="fc-now-indicator fc-now-indicator-arrow"></div>').css("top",top).appendTo(this.el.find(".fc-content-skeleton"))[0]),this.nowIndicatorEls=$(nodes)},unrenderNowIndicator:function(){this.nowIndicatorEls&&(this.nowIndicatorEls.remove(),this.nowIndicatorEls=null)},renderSelection:function(span){this.view.opt("selectHelper")?this.renderEventLocationHelper(span):this.renderHighlight(span)},
unrenderSelection:function(){this.unrenderHelper(),this.unrenderHighlight()},renderHighlight:function(span){this.renderHighlightSegs(this.spanToSegs(span))},unrenderHighlight:function(){this.unrenderHighlightSegs()}});TimeGrid.mixin({colContainerEls:null,fgContainerEls:null,bgContainerEls:null,helperContainerEls:null,highlightContainerEls:null,businessContainerEls:null,fgSegs:null,bgSegs:null,helperSegs:null,highlightSegs:null,businessSegs:null,renderContentSkeleton:function(){var i,skeletonEl,cellHtml="";for(i=0;i<this.colCnt;i++)cellHtml+='<td><div class="fc-content-col"><div class="fc-event-container fc-helper-container"></div><div class="fc-event-container"></div><div class="fc-highlight-container"></div><div class="fc-bgevent-container"></div><div class="fc-business-container"></div></div></td>';skeletonEl=$('<div class="fc-content-skeleton"><table><tr>'+cellHtml+"</tr></table></div>"),this.colContainerEls=skeletonEl.find(".fc-content-col"),this.helperContainerEls=skeletonEl.find(".fc-helper-container"),this.fgContainerEls=skeletonEl.find(".fc-event-container:not(.fc-helper-container)"),this.bgContainerEls=skeletonEl.find(".fc-bgevent-container"),this.highlightContainerEls=skeletonEl.find(".fc-highlight-container"),this.businessContainerEls=skeletonEl.find(".fc-business-container"),this.bookendCells(skeletonEl.find("tr")),this.el.append(skeletonEl)},renderFgSegs:function(segs){return segs=this.renderFgSegsIntoContainers(segs,this.fgContainerEls),this.fgSegs=segs,segs},unrenderFgSegs:function(){this.unrenderNamedSegs("fgSegs")},renderHelperSegs:function(segs,sourceSeg){var i,seg,sourceEl,helperEls=[];for(segs=this.renderFgSegsIntoContainers(segs,this.helperContainerEls),i=0;i<segs.length;i++)seg=segs[i],sourceSeg&&sourceSeg.col===seg.col&&(sourceEl=sourceSeg.el,seg.el.css({left:sourceEl.css("left"),right:sourceEl.css("right"),"margin-left":sourceEl.css("margin-left"),"margin-right":sourceEl.css("margin-right")})),helperEls.push(seg.el[0]);return this.helperSegs=segs,$(helperEls)},unrenderHelperSegs:function(){this.unrenderNamedSegs("helperSegs")},renderBgSegs:function(segs){return segs=this.renderFillSegEls("bgEvent",segs),this.updateSegVerticals(segs),this.attachSegsByCol(this.groupSegsByCol(segs),this.bgContainerEls),this.bgSegs=segs,segs},unrenderBgSegs:function(){this.unrenderNamedSegs("bgSegs")},renderHighlightSegs:function(segs){segs=this.renderFillSegEls("highlight",segs),this.updateSegVerticals(segs),this.attachSegsByCol(this.groupSegsByCol(segs),this.highlightContainerEls),this.highlightSegs=segs},unrenderHighlightSegs:function(){this.unrenderNamedSegs("highlightSegs")},renderBusinessSegs:function(segs){segs=this.renderFillSegEls("businessHours",segs),this.updateSegVerticals(segs),this.attachSegsByCol(this.groupSegsByCol(segs),this.businessContainerEls),this.businessSegs=segs},unrenderBusinessSegs:function(){this.unrenderNamedSegs("businessSegs")},groupSegsByCol:function(segs){var i,segsByCol=[];for(i=0;i<this.colCnt;i++)segsByCol.push([]);for(i=0;i<segs.length;i++)segsByCol[segs[i].col].push(segs[i]);return segsByCol},attachSegsByCol:function(segsByCol,containerEls){var col,segs,i;for(col=0;col<this.colCnt;col++)for(segs=segsByCol[col],i=0;i<segs.length;i++)containerEls.eq(col).append(segs[i].el)},unrenderNamedSegs:function(propName){var i,segs=this[propName];if(segs){for(i=0;i<segs.length;i++)segs[i].el.remove();this[propName]=null}},renderFgSegsIntoContainers:function(segs,containerEls){var segsByCol,col;for(segs=this.renderFgSegEls(segs),segsByCol=this.groupSegsByCol(segs),col=0;col<this.colCnt;col++)this.updateFgSegCoords(segsByCol[col]);return this.attachSegsByCol(segsByCol,containerEls),segs},fgSegHtml:function(seg,disableResizing){var timeText,fullTimeText,startTimeText,view=this.view,event=seg.event,isDraggable=view.isEventDraggable(event),isResizableFromStart=!disableResizing&&seg.isStart&&view.isEventResizableFromStart(event),isResizableFromEnd=!disableResizing&&seg.isEnd&&view.isEventResizableFromEnd(event),classes=this.getSegClasses(seg,isDraggable,isResizableFromStart||isResizableFromEnd),skinCss=cssToStr(this.getSegSkinCss(seg));return classes.unshift("fc-time-grid-event","fc-v-event"),view.isMultiDayEvent(event)?(seg.isStart||seg.isEnd)&&(timeText=this.getEventTimeText(seg),fullTimeText=this.getEventTimeText(seg,"LT"),startTimeText=this.getEventTimeText(seg,null,!1)):(timeText=this.getEventTimeText(event),fullTimeText=this.getEventTimeText(event,"LT"),startTimeText=this.getEventTimeText(event,null,!1)),'<a class="'+classes.join(" ")+'"'+(event.url?' href="'+htmlEscape(event.url)+'"':"")+(skinCss?' style="'+skinCss+'"':"")+'><div class="fc-content">'+(timeText?'<div class="fc-time" data-start="'+htmlEscape(startTimeText)+'" data-full="'+htmlEscape(fullTimeText)+'"><span>'+htmlEscape(timeText)+"</span></div>":"")+(event.title?'<div class="fc-title">'+htmlEscape(event.title)+"</div>":"")+'</div><div class="fc-bg"/>'+(isResizableFromEnd?'<div class="fc-resizer fc-end-resizer" />':"")+"</a>"},updateSegVerticals:function(segs){this.computeSegVerticals(segs),this.assignSegVerticals(segs)},computeSegVerticals:function(segs){var i,seg;for(i=0;i<segs.length;i++)seg=segs[i],seg.top=this.computeDateTop(seg.start,seg.start),seg.bottom=this.computeDateTop(seg.end,seg.start)},assignSegVerticals:function(segs){var i,seg;for(i=0;i<segs.length;i++)seg=segs[i],seg.el.css(this.generateSegVerticalCss(seg))},generateSegVerticalCss:function(seg){return{top:seg.top,bottom:-seg.bottom}},updateFgSegCoords:function(segs){this.computeSegVerticals(segs),this.computeFgSegHorizontals(segs),this.assignSegVerticals(segs),this.assignFgSegHorizontals(segs)},computeFgSegHorizontals:function(segs){var levels,level0,i;if(this.sortEventSegs(segs),levels=buildSlotSegLevels(segs),computeForwardSlotSegs(levels),level0=levels[0]){for(i=0;i<level0.length;i++)computeSlotSegPressures(level0[i]);for(i=0;i<level0.length;i++)this.computeFgSegForwardBack(level0[i],0,0)}},computeFgSegForwardBack:function(seg,seriesBackwardPressure,seriesBackwardCoord){var i,forwardSegs=seg.forwardSegs;if(void 0===seg.forwardCoord)for(forwardSegs.length?(this.sortForwardSegs(forwardSegs),this.computeFgSegForwardBack(forwardSegs[0],seriesBackwardPressure+1,seriesBackwardCoord),seg.forwardCoord=forwardSegs[0].backwardCoord):seg.forwardCoord=1,seg.backwardCoord=seg.forwardCoord-(seg.forwardCoord-seriesBackwardCoord)/(seriesBackwardPressure+1),i=0;i<forwardSegs.length;i++)this.computeFgSegForwardBack(forwardSegs[i],0,seg.forwardCoord)},sortForwardSegs:function(forwardSegs){forwardSegs.sort(proxy(this,"compareForwardSegs"))},compareForwardSegs:function(seg1,seg2){return seg2.forwardPressure-seg1.forwardPressure||(seg1.backwardCoord||0)-(seg2.backwardCoord||0)||this.compareEventSegs(seg1,seg2)},assignFgSegHorizontals:function(segs){var i,seg;for(i=0;i<segs.length;i++)seg=segs[i],seg.el.css(this.generateFgSegHorizontalCss(seg)),seg.bottom-seg.top<30&&seg.el.addClass("fc-short")},generateFgSegHorizontalCss:function(seg){var left,right,shouldOverlap=this.view.opt("slotEventOverlap"),backwardCoord=seg.backwardCoord,forwardCoord=seg.forwardCoord,props=this.generateSegVerticalCss(seg);return shouldOverlap&&(forwardCoord=Math.min(1,backwardCoord+2*(forwardCoord-backwardCoord))),this.isRTL?(left=1-forwardCoord,right=backwardCoord):(left=backwardCoord,right=1-forwardCoord),props.zIndex=seg.level+1,props.left=100*left+"%",props.right=100*right+"%",shouldOverlap&&seg.forwardPressure&&(props[this.isRTL?"marginLeft":"marginRight"]=20),props}});var View=FC.View=Class.extend(EmitterMixin,ListenerMixin,{type:null,name:null,title:null,calendar:null,options:null,el:null,displaying:null,isSkeletonRendered:!1,isEventsRendered:!1,start:null,end:null,intervalStart:null,intervalEnd:null,intervalDuration:null,intervalUnit:null,isRTL:!1,isSelected:!1,selectedEvent:null,eventOrderSpecs:null,widgetHeaderClass:null,widgetContentClass:null,highlightStateClass:null,nextDayThreshold:null,isHiddenDayHash:null,isNowIndicatorRendered:null,initialNowDate:null,initialNowQueriedMs:null,nowIndicatorTimeoutID:null,nowIndicatorIntervalID:null,constructor:function(calendar,type,options,intervalDuration){this.calendar=calendar,this.type=this.name=type,this.options=options,this.intervalDuration=intervalDuration||moment.duration(1,"day"),this.nextDayThreshold=moment.duration(this.opt("nextDayThreshold")),this.initThemingProps(),this.initHiddenDays(),this.isRTL=this.opt("isRTL"),this.eventOrderSpecs=parseFieldSpecs(this.opt("eventOrder")),this.initialize()},initialize:function(){},opt:function(name){return this.options[name]},trigger:function(name,thisObj){var calendar=this.calendar;return calendar.trigger.apply(calendar,[name,thisObj||this].concat(Array.prototype.slice.call(arguments,2),[this]))},setDate:function(date){this.setRange(this.computeRange(date))},setRange:function(range){$.extend(this,range),this.updateTitle()},computeRange:function(date){var start,end,intervalUnit=computeIntervalUnit(this.intervalDuration),intervalStart=date.clone().startOf(intervalUnit),intervalEnd=intervalStart.clone().add(this.intervalDuration);return/year|month|week|day/.test(intervalUnit)?(intervalStart.stripTime(),intervalEnd.stripTime()):(intervalStart.hasTime()||(intervalStart=this.calendar.time(0)),intervalEnd.hasTime()||(intervalEnd=this.calendar.time(0))),start=intervalStart.clone(),start=this.skipHiddenDays(start),end=intervalEnd.clone(),end=this.skipHiddenDays(end,-1,!0),{intervalUnit:intervalUnit,intervalStart:intervalStart,intervalEnd:intervalEnd,start:start,end:end}},computePrevDate:function(date){return this.massageCurrentDate(date.clone().startOf(this.intervalUnit).subtract(this.intervalDuration),-1)},computeNextDate:function(date){return this.massageCurrentDate(date.clone().startOf(this.intervalUnit).add(this.intervalDuration))},massageCurrentDate:function(date,direction){return this.intervalDuration.as("days")<=1&&this.isHiddenDay(date)&&(date=this.skipHiddenDays(date,direction),date.startOf("day")),date},updateTitle:function(){this.title=this.computeTitle()},computeTitle:function(){return this.formatRange({start:this.calendar.applyTimezone(this.intervalStart),end:this.calendar.applyTimezone(this.intervalEnd)},this.opt("titleFormat")||this.computeTitleFormat(),this.opt("titleRangeSeparator"))},computeTitleFormat:function(){return"year"==this.intervalUnit?"YYYY":"month"==this.intervalUnit?this.opt("monthYearFormat"):this.intervalDuration.as("days")>1?"ll":"LL"},formatRange:function(range,formatStr,separator){var end=range.end;return end.hasTime()||(end=end.clone().subtract(1)),formatRange(range.start,end,formatStr,separator,this.opt("isRTL"))},setElement:function(el){this.el=el,this.bindGlobalHandlers()},removeElement:function(){this.clear(),this.isSkeletonRendered&&(this.unrenderSkeleton(),this.isSkeletonRendered=!1),this.unbindGlobalHandlers(),this.el.remove()},display:function(date){var _this=this,scrollState=null;return this.displaying&&(scrollState=this.queryScroll()),this.calendar.freezeContentHeight(),this.clear().then(function(){return _this.displaying=$.when(_this.displayView(date)).then(function(){_this.forceScroll(_this.computeInitialScroll(scrollState)),_this.calendar.unfreezeContentHeight(),_this.triggerRender()})})},clear:function(){var _this=this,displaying=this.displaying;return displaying?displaying.then(function(){return _this.displaying=null,_this.clearEvents(),_this.clearView()}):$.when()},displayView:function(date){this.isSkeletonRendered||(this.renderSkeleton(),this.isSkeletonRendered=!0),date&&this.setDate(date),this.render&&this.render(),this.renderDates(),this.updateSize(),this.renderBusinessHours(),this.startNowIndicator()},clearView:function(){this.unselect(),this.stopNowIndicator(),this.triggerUnrender(),this.unrenderBusinessHours(),this.unrenderDates(),this.destroy&&this.destroy()},renderSkeleton:function(){},unrenderSkeleton:function(){},renderDates:function(){},unrenderDates:function(){},triggerRender:function(){this.trigger("viewRender",this,this,this.el)},triggerUnrender:function(){this.trigger("viewDestroy",this,this,this.el)},bindGlobalHandlers:function(){this.listenTo($(document),"mousedown",this.handleDocumentMousedown),this.listenTo($(document),"touchstart",this.processUnselect)},unbindGlobalHandlers:function(){this.stopListeningTo($(document))},initThemingProps:function(){var tm=this.opt("theme")?"ui":"fc";this.widgetHeaderClass=tm+"-widget-header",this.widgetContentClass=tm+"-widget-content",this.highlightStateClass=tm+"-state-highlight"},renderBusinessHours:function(){},unrenderBusinessHours:function(){},startNowIndicator:function(){var unit,update,delay,_this=this;this.opt("nowIndicator")&&(unit=this.getNowIndicatorUnit())&&(update=proxy(this,"updateNowIndicator"),this.initialNowDate=this.calendar.getNow(),this.initialNowQueriedMs=+new Date,this.renderNowIndicator(this.initialNowDate),this.isNowIndicatorRendered=!0,delay=this.initialNowDate.clone().startOf(unit).add(1,unit)-this.initialNowDate,this.nowIndicatorTimeoutID=setTimeout(function(){_this.nowIndicatorTimeoutID=null,update(),delay=+moment.duration(1,unit),delay=Math.max(100,delay),_this.nowIndicatorIntervalID=setInterval(update,delay)},delay))},updateNowIndicator:function(){this.isNowIndicatorRendered&&(this.unrenderNowIndicator(),this.renderNowIndicator(this.initialNowDate.clone().add(new Date-this.initialNowQueriedMs)))},stopNowIndicator:function(){this.isNowIndicatorRendered&&(this.nowIndicatorTimeoutID&&(clearTimeout(this.nowIndicatorTimeoutID),this.nowIndicatorTimeoutID=null),this.nowIndicatorIntervalID&&(clearTimeout(this.nowIndicatorIntervalID),this.nowIndicatorIntervalID=null),this.unrenderNowIndicator(),this.isNowIndicatorRendered=!1)},getNowIndicatorUnit:function(){},renderNowIndicator:function(date){},unrenderNowIndicator:function(){},updateSize:function(isResize){var scrollState;isResize&&(scrollState=this.queryScroll()),this.updateHeight(isResize),this.updateWidth(isResize),this.updateNowIndicator(),isResize&&this.setScroll(scrollState)},updateWidth:function(isResize){},updateHeight:function(isResize){var calendar=this.calendar;this.setHeight(calendar.getSuggestedViewHeight(),calendar.isHeightAuto())},setHeight:function(height,isAuto){},computeInitialScroll:function(previousScrollState){return 0},queryScroll:function(){},setScroll:function(scrollState){},forceScroll:function(scrollState){var _this=this;this.setScroll(scrollState),setTimeout(function(){_this.setScroll(scrollState)},0)},displayEvents:function(events){var scrollState=this.queryScroll();this.clearEvents(),this.renderEvents(events),this.isEventsRendered=!0,this.setScroll(scrollState),this.triggerEventRender()},clearEvents:function(){var scrollState;this.isEventsRendered&&(scrollState=this.queryScroll(),this.triggerEventUnrender(),this.destroyEvents&&this.destroyEvents(),this.unrenderEvents(),this.setScroll(scrollState),this.isEventsRendered=!1)},renderEvents:function(events){},unrenderEvents:function(){},triggerEventRender:function(){this.renderedEventSegEach(function(seg){this.trigger("eventAfterRender",seg.event,seg.event,seg.el)}),this.trigger("eventAfterAllRender")},triggerEventUnrender:function(){this.renderedEventSegEach(function(seg){this.trigger("eventDestroy",seg.event,seg.event,seg.el)})},resolveEventEl:function(event,el){var custom=this.trigger("eventRender",event,event,el);return!1===custom?el=null:custom&&!0!==custom&&(el=$(custom)),el},showEvent:function(event){this.renderedEventSegEach(function(seg){seg.el.css("visibility","")},event)},hideEvent:function(event){this.renderedEventSegEach(function(seg){seg.el.css("visibility","hidden")},event)},renderedEventSegEach:function(func,event){var i,segs=this.getEventSegs();for(i=0;i<segs.length;i++)event&&segs[i].event._id!==event._id||segs[i].el&&func.call(this,segs[i])},getEventSegs:function(){return[]},isEventDraggable:function(event){var source=event.source||{};return firstDefined(event.startEditable,source.startEditable,this.opt("eventStartEditable"),event.editable,source.editable,this.opt("editable"))},reportEventDrop:function(event,dropLocation,largeUnit,el,ev){var calendar=this.calendar,mutateResult=calendar.mutateEvent(event,dropLocation,largeUnit),undoFunc=function(){mutateResult.undo(),calendar.reportEventChange()};this.triggerEventDrop(event,mutateResult.dateDelta,undoFunc,el,ev),calendar.reportEventChange()},triggerEventDrop:function(event,dateDelta,undoFunc,el,ev){this.trigger("eventDrop",el[0],event,dateDelta,undoFunc,ev,{})},reportExternalDrop:function(meta,dropLocation,el,ev,ui){var eventInput,event,eventProps=meta.eventProps;eventProps&&(eventInput=$.extend({},eventProps,dropLocation),event=this.calendar.renderEvent(eventInput,meta.stick)[0]),this.triggerExternalDrop(event,dropLocation,el,ev,ui)},triggerExternalDrop:function(event,dropLocation,el,ev,ui){this.trigger("drop",el[0],dropLocation.start,ev,ui),event&&this.trigger("eventReceive",null,event)},renderDrag:function(dropLocation,seg){},unrenderDrag:function(){},isEventResizableFromStart:function(event){return this.opt("eventResizableFromStart")&&this.isEventResizable(event)},isEventResizableFromEnd:function(event){return this.isEventResizable(event)},isEventResizable:function(event){var source=event.source||{};return firstDefined(event.durationEditable,source.durationEditable,this.opt("eventDurationEditable"),event.editable,source.editable,this.opt("editable"))},reportEventResize:function(event,resizeLocation,largeUnit,el,ev){var calendar=this.calendar,mutateResult=calendar.mutateEvent(event,resizeLocation,largeUnit),undoFunc=function(){mutateResult.undo(),calendar.reportEventChange()};this.triggerEventResize(event,mutateResult.durationDelta,undoFunc,el,ev),calendar.reportEventChange()},triggerEventResize:function(event,durationDelta,undoFunc,el,ev){this.trigger("eventResize",el[0],event,durationDelta,undoFunc,ev,{})},select:function(span,ev){this.unselect(ev),this.renderSelection(span),this.reportSelection(span,ev)},renderSelection:function(span){},reportSelection:function(span,ev){this.isSelected=!0,this.triggerSelect(span,ev)},triggerSelect:function(span,ev){this.trigger("select",null,this.calendar.applyTimezone(span.start),this.calendar.applyTimezone(span.end),ev)},unselect:function(ev){this.isSelected&&(this.isSelected=!1,this.destroySelection&&this.destroySelection(),this.unrenderSelection(),this.trigger("unselect",null,ev))},unrenderSelection:function(){},selectEvent:function(event){this.selectedEvent&&this.selectedEvent===event||(this.unselectEvent(),this.renderedEventSegEach(function(seg){seg.el.addClass("fc-selected")},event),this.selectedEvent=event)},unselectEvent:function(){this.selectedEvent&&(this.renderedEventSegEach(function(seg){seg.el.removeClass("fc-selected")},this.selectedEvent),this.selectedEvent=null)},isEventSelected:function(event){return this.selectedEvent&&this.selectedEvent._id===event._id},handleDocumentMousedown:function(ev){isPrimaryMouseButton(ev)&&this.processUnselect(ev)},processUnselect:function(ev){this.processRangeUnselect(ev),this.processEventUnselect(ev)},processRangeUnselect:function(ev){var ignore;this.isSelected&&this.opt("unselectAuto")&&((ignore=this.opt("unselectCancel"))&&$(ev.target).closest(ignore).length||this.unselect(ev))},processEventUnselect:function(ev){this.selectedEvent&&($(ev.target).closest(".fc-selected").length||this.unselectEvent())},triggerDayClick:function(span,dayEl,ev){this.trigger("dayClick",dayEl,this.calendar.applyTimezone(span.start),ev)},initHiddenDays:function(){var i,hiddenDays=this.opt("hiddenDays")||[],isHiddenDayHash=[],dayCnt=0;for(!1===this.opt("weekends")&&hiddenDays.push(0,6),i=0;i<7;i++)(isHiddenDayHash[i]=-1!==$.inArray(i,hiddenDays))||dayCnt++;if(!dayCnt)throw"invalid hiddenDays";this.isHiddenDayHash=isHiddenDayHash},isHiddenDay:function(day){return moment.isMoment(day)&&(day=day.day()),this.isHiddenDayHash[day]},skipHiddenDays:function(date,inc,isExclusive){var out=date.clone();for(inc=inc||1;this.isHiddenDayHash[(out.day()+(isExclusive?inc:0)+7)%7];)out.add(inc,"days");return out},computeDayRange:function(range){var endTimeMS,startDay=range.start.clone().stripTime(),end=range.end,endDay=null;return end&&(endDay=end.clone().stripTime(),(endTimeMS=+end.time())&&endTimeMS>=this.nextDayThreshold&&endDay.add(1,"days")),(!end||endDay<=startDay)&&(endDay=startDay.clone().add(1,"days")),{start:startDay,end:endDay}},isMultiDayEvent:function(event){var range=this.computeDayRange(event);return range.end.diff(range.start,"days")>1}}),Scroller=FC.Scroller=Class.extend({el:null,scrollEl:null,overflowX:null,overflowY:null,constructor:function(options){options=options||{},this.overflowX=options.overflowX||options.overflow||"auto",this.overflowY=options.overflowY||options.overflow||"auto"},render:function(){this.el=this.renderEl(),this.applyOverflow()},renderEl:function(){return this.scrollEl=$('<div class="fc-scroller"></div>')},clear:function(){this.setHeight("auto"),this.applyOverflow()},destroy:function(){this.el.remove()},applyOverflow:function(){this.scrollEl.css({"overflow-x":this.overflowX,"overflow-y":this.overflowY})},lockOverflow:function(scrollbarWidths){var overflowX=this.overflowX,overflowY=this.overflowY;scrollbarWidths=scrollbarWidths||this.getScrollbarWidths(),"auto"===overflowX&&(overflowX=scrollbarWidths.top||scrollbarWidths.bottom||this.scrollEl[0].scrollWidth-1>this.scrollEl[0].clientWidth?"scroll":"hidden"),"auto"===overflowY&&(overflowY=scrollbarWidths.left||scrollbarWidths.right||this.scrollEl[0].scrollHeight-1>this.scrollEl[0].clientHeight?"scroll":"hidden"),this.scrollEl.css({"overflow-x":overflowX,"overflow-y":overflowY})},setHeight:function(height){this.scrollEl.height(height)},getScrollTop:function(){return this.scrollEl.scrollTop()},setScrollTop:function(top){this.scrollEl.scrollTop(top)},getClientWidth:function(){return this.scrollEl[0].clientWidth},getClientHeight:function(){return this.scrollEl[0].clientHeight},getScrollbarWidths:function(){return getScrollbarWidths(this.scrollEl)}}),Calendar=FC.Calendar=Class.extend({dirDefaults:null,langDefaults:null,overrides:null,options:null,viewSpecCache:null,view:null,header:null,loadingLevel:0,constructor:Calendar_constructor,initialize:function(){},initOptions:function(overrides){var lang,langDefaults,isRTL,dirDefaults;overrides=massageOverrides(overrides),lang=overrides.lang,langDefaults=langOptionHash[lang],langDefaults||(lang=Calendar.defaults.lang,langDefaults=langOptionHash[lang]||{}),isRTL=firstDefined(overrides.isRTL,langDefaults.isRTL,Calendar.defaults.isRTL),dirDefaults=isRTL?Calendar.rtlDefaults:{},this.dirDefaults=dirDefaults,this.langDefaults=langDefaults,this.overrides=overrides,this.options=mergeOptions([Calendar.defaults,dirDefaults,langDefaults,overrides]),populateInstanceComputableOptions(this.options),this.viewSpecCache={}},getViewSpec:function(viewType){var cache=this.viewSpecCache;return cache[viewType]||(cache[viewType]=this.buildViewSpec(viewType))},getUnitViewSpec:function(unit){var viewTypes,i,spec;if(-1!=$.inArray(unit,intervalUnits))for(viewTypes=this.header.getViewsWithButtons(),$.each(FC.views,function(viewType){viewTypes.push(viewType)}),i=0;i<viewTypes.length;i++)if((spec=this.getViewSpec(viewTypes[i]))&&spec.singleUnit==unit)return spec},buildViewSpec:function(requestedViewType){for(var spec,overrides,duration,unit,viewOverrides=this.overrides.views||{},specChain=[],defaultsChain=[],overridesChain=[],viewType=requestedViewType;viewType;)spec=fcViews[viewType],overrides=viewOverrides[viewType],viewType=null,"function"==typeof spec&&(spec={class:spec}),spec&&(specChain.unshift(spec),defaultsChain.unshift(spec.defaults||{}),duration=duration||spec.duration,viewType=viewType||spec.type),overrides&&(overridesChain.unshift(overrides),duration=duration||overrides.duration,viewType=viewType||overrides.type);return spec=mergeProps(specChain),spec.type=requestedViewType,!!spec.class&&(duration&&(duration=moment.duration(duration),duration.valueOf()&&(spec.duration=duration,unit=computeIntervalUnit(duration),1===duration.as(unit)&&(spec.singleUnit=unit,overridesChain.unshift(viewOverrides[unit]||{})))),spec.defaults=mergeOptions(defaultsChain),spec.overrides=mergeOptions(overridesChain),this.buildViewSpecOptions(spec),this.buildViewSpecButtonText(spec,requestedViewType),spec)},buildViewSpecOptions:function(spec){spec.options=mergeOptions([Calendar.defaults,spec.defaults,this.dirDefaults,this.langDefaults,this.overrides,spec.overrides]),populateInstanceComputableOptions(spec.options)},buildViewSpecButtonText:function(spec,requestedViewType){function queryButtonText(options){var buttonText=options.buttonText||{};return buttonText[requestedViewType]||(spec.singleUnit?buttonText[spec.singleUnit]:null)}spec.buttonTextOverride=queryButtonText(this.overrides)||spec.overrides.buttonText,spec.buttonTextDefault=queryButtonText(this.langDefaults)||queryButtonText(this.dirDefaults)||spec.defaults.buttonText||queryButtonText(Calendar.defaults)||(spec.duration?this.humanizeDuration(spec.duration):null)||requestedViewType},instantiateView:function(viewType){var spec=this.getViewSpec(viewType);return new spec.class(this,viewType,spec.options,spec.duration)},isValidViewType:function(viewType){return Boolean(this.getViewSpec(viewType))},pushLoading:function(){this.loadingLevel++||this.trigger("loading",null,!0,this.view)},popLoading:function(){--this.loadingLevel||this.trigger("loading",null,!1,this.view)},buildSelectSpan:function(zonedStartInput,zonedEndInput){var end,start=this.moment(zonedStartInput).stripZone();return end=zonedEndInput?this.moment(zonedEndInput).stripZone():start.hasTime()?start.clone().add(this.defaultTimedEventDuration):start.clone().add(this.defaultAllDayEventDuration),{start:start,end:end}}});Calendar.mixin(EmitterMixin),Calendar.defaults={titleRangeSeparator:" — ",monthYearFormat:"MMMM YYYY",defaultTimedEventDuration:"02:00:00",defaultAllDayEventDuration:{days:1},forceEventDuration:!1,nextDayThreshold:"09:00:00",defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberTitle:"W",weekNumberCalculation:"local",scrollTime:"06:00:00",lazyFetching:!0,startParam:"start",endParam:"end",timezoneParam:"timezone",timezone:!1,isRTL:!1,buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day"},buttonIcons:{prev:"left-single-arrow",next:"right-single-arrow",prevYear:"left-double-arrow",nextYear:"right-double-arrow"},theme:!1,themeButtonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e",prevYear:"seek-prev",nextYear:"seek-next"},dragOpacity:.75,dragRevertDuration:500,dragScroll:!0,unselectAuto:!0,dropAccept:"*",eventOrder:"title",eventLimit:!1,eventLimitText:"more",eventLimitClick:"popover",dayPopoverFormat:"LL",handleWindowResize:!0,windowResizeDelay:200,longPressDelay:1e3},Calendar.englishDefaults={dayPopoverFormat:"dddd, MMMM D"},Calendar.rtlDefaults={header:{left:"next,prev today",center:"",right:"title"},buttonIcons:{prev:"right-single-arrow",next:"left-single-arrow",prevYear:"right-double-arrow",nextYear:"left-double-arrow"},themeButtonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w",nextYear:"seek-prev",prevYear:"seek-next"}};var langOptionHash=FC.langs={};FC.datepickerLang=function(langCode,dpLangCode,dpOptions){var fcOptions=langOptionHash[langCode]||(langOptionHash[langCode]={});fcOptions.isRTL=dpOptions.isRTL,fcOptions.weekNumberTitle=dpOptions.weekHeader,$.each(dpComputableOptions,function(name,func){fcOptions[name]=func(dpOptions)}),$.datepicker&&($.datepicker.regional[dpLangCode]=$.datepicker.regional[langCode]=dpOptions,$.datepicker.regional.en=$.datepicker.regional[""],$.datepicker.setDefaults(dpOptions))},FC.lang=function(langCode,newFcOptions){var fcOptions,momOptions;fcOptions=langOptionHash[langCode]||(langOptionHash[langCode]={}),newFcOptions&&(fcOptions=langOptionHash[langCode]=mergeOptions([fcOptions,newFcOptions])),momOptions=getMomentLocaleData(langCode),$.each(momComputableOptions,function(name,func){null==fcOptions[name]&&(fcOptions[name]=func(momOptions,fcOptions))}),Calendar.defaults.lang=langCode};var dpComputableOptions={buttonText:function(dpOptions){return{prev:stripHtmlEntities(dpOptions.prevText),next:stripHtmlEntities(dpOptions.nextText),today:stripHtmlEntities(dpOptions.currentText)}},monthYearFormat:function(dpOptions){return dpOptions.showMonthAfterYear?"YYYY["+dpOptions.yearSuffix+"] MMMM":"MMMM YYYY["+dpOptions.yearSuffix+"]"}},momComputableOptions={dayOfMonthFormat:function(momOptions,fcOptions){var format=momOptions.longDateFormat("l");return format=format.replace(/^Y+[^\w\s]*|[^\w\s]*Y+$/g,""),fcOptions.isRTL?format+=" ddd":format="ddd "+format,format},mediumTimeFormat:function(momOptions){return momOptions.longDateFormat("LT").replace(/\s*a$/i,"a")},smallTimeFormat:function(momOptions){return momOptions.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"a")},extraSmallTimeFormat:function(momOptions){return momOptions.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"t")},hourFormat:function(momOptions){return momOptions.longDateFormat("LT").replace(":mm","").replace(/(\Wmm)$/,"").replace(/\s*a$/i,"a")},noMeridiemTimeFormat:function(momOptions){return momOptions.longDateFormat("LT").replace(/\s*a$/i,"")}},instanceComputableOptions={smallDayDateFormat:function(options){return options.isRTL?"D dd":"dd D"},weekFormat:function(options){return options.isRTL?"w[ "+options.weekNumberTitle+"]":"["+options.weekNumberTitle+" ]w"},smallWeekFormat:function(options){return options.isRTL?"w["+options.weekNumberTitle+"]":"["+options.weekNumberTitle+"]w"}};FC.lang("en",Calendar.englishDefaults),FC.sourceNormalizers=[],FC.sourceFetchers=[];var ajaxDefaults={dataType:"json",cache:!1},eventGUID=1;Calendar.prototype.normalizeEvent=function(event){},Calendar.prototype.getPeerEvents=function(span,event){var i,otherEvent,cache=this.getEventCache(),peerEvents=[];for(i=0;i<cache.length;i++)otherEvent=cache[i],event&&event._id===otherEvent._id||peerEvents.push(otherEvent);return peerEvents};var BasicView=FC.BasicView=View.extend({scroller:null,dayGridClass:DayGrid,dayGrid:null,dayNumbersVisible:!1,weekNumbersVisible:!1,weekNumberWidth:null,headContainerEl:null,headRowEl:null,initialize:function(){this.dayGrid=this.instantiateDayGrid(),this.scroller=new Scroller({overflowX:"hidden",overflowY:"auto"})},instantiateDayGrid:function(){return new(this.dayGridClass.extend(basicDayGridMethods))(this)},setRange:function(range){View.prototype.setRange.call(this,range),this.dayGrid.breakOnWeeks=/year|month|week/.test(this.intervalUnit),this.dayGrid.setRange(range)},computeRange:function(date){var range=View.prototype.computeRange.call(this,date);return/year|month/.test(range.intervalUnit)&&(range.start.startOf("week"),range.start=this.skipHiddenDays(range.start),range.end.weekday()&&(range.end.add(1,"week").startOf("week"),range.end=this.skipHiddenDays(range.end,-1,!0))),range},renderDates:function(){this.dayNumbersVisible=this.dayGrid.rowCnt>1,this.weekNumbersVisible=this.opt("weekNumbers"),this.dayGrid.numbersVisible=this.dayNumbersVisible||this.weekNumbersVisible,this.el.addClass("fc-basic-view").html(this.renderSkeletonHtml()),this.renderHead(),this.scroller.render();var dayGridContainerEl=this.scroller.el.addClass("fc-day-grid-container"),dayGridEl=$('<div class="fc-day-grid" />').appendTo(dayGridContainerEl);this.el.find(".fc-body > tr > td").append(dayGridContainerEl),this.dayGrid.setElement(dayGridEl),this.dayGrid.renderDates(this.hasRigidRows())},renderHead:function(){this.headContainerEl=this.el.find(".fc-head-container").html(this.dayGrid.renderHeadHtml()),this.headRowEl=this.headContainerEl.find(".fc-row")},unrenderDates:function(){this.dayGrid.unrenderDates(),this.dayGrid.removeElement(),this.scroller.destroy()},renderBusinessHours:function(){
this.dayGrid.renderBusinessHours()},renderSkeletonHtml:function(){return'<table><thead class="fc-head"><tr><td class="fc-head-container '+this.widgetHeaderClass+'"></td></tr></thead><tbody class="fc-body"><tr><td class="'+this.widgetContentClass+'"></td></tr></tbody></table>'},weekNumberStyleAttr:function(){return null!==this.weekNumberWidth?'style="width:'+this.weekNumberWidth+'px"':""},hasRigidRows:function(){var eventLimit=this.opt("eventLimit");return eventLimit&&"number"!=typeof eventLimit},updateWidth:function(){this.weekNumbersVisible&&(this.weekNumberWidth=matchCellWidths(this.el.find(".fc-week-number")))},setHeight:function(totalHeight,isAuto){var scrollerHeight,scrollbarWidths,eventLimit=this.opt("eventLimit");this.scroller.clear(),uncompensateScroll(this.headRowEl),this.dayGrid.removeSegPopover(),eventLimit&&"number"==typeof eventLimit&&this.dayGrid.limitRows(eventLimit),scrollerHeight=this.computeScrollerHeight(totalHeight),this.setGridHeight(scrollerHeight,isAuto),eventLimit&&"number"!=typeof eventLimit&&this.dayGrid.limitRows(eventLimit),isAuto||(this.scroller.setHeight(scrollerHeight),scrollbarWidths=this.scroller.getScrollbarWidths(),(scrollbarWidths.left||scrollbarWidths.right)&&(compensateScroll(this.headRowEl,scrollbarWidths),scrollerHeight=this.computeScrollerHeight(totalHeight),this.scroller.setHeight(scrollerHeight)),this.scroller.lockOverflow(scrollbarWidths))},computeScrollerHeight:function(totalHeight){return totalHeight-subtractInnerElHeight(this.el,this.scroller.el)},setGridHeight:function(height,isAuto){isAuto?undistributeHeight(this.dayGrid.rowEls):distributeHeight(this.dayGrid.rowEls,height,!0)},queryScroll:function(){return this.scroller.getScrollTop()},setScroll:function(top){this.scroller.setScrollTop(top)},prepareHits:function(){this.dayGrid.prepareHits()},releaseHits:function(){this.dayGrid.releaseHits()},queryHit:function(left,top){return this.dayGrid.queryHit(left,top)},getHitSpan:function(hit){return this.dayGrid.getHitSpan(hit)},getHitEl:function(hit){return this.dayGrid.getHitEl(hit)},renderEvents:function(events){this.dayGrid.renderEvents(events),this.updateHeight()},getEventSegs:function(){return this.dayGrid.getEventSegs()},unrenderEvents:function(){this.dayGrid.unrenderEvents()},renderDrag:function(dropLocation,seg){return this.dayGrid.renderDrag(dropLocation,seg)},unrenderDrag:function(){this.dayGrid.unrenderDrag()},renderSelection:function(span){this.dayGrid.renderSelection(span)},unrenderSelection:function(){this.dayGrid.unrenderSelection()}}),basicDayGridMethods={renderHeadIntroHtml:function(){var view=this.view;return view.weekNumbersVisible?'<th class="fc-week-number '+view.widgetHeaderClass+'" '+view.weekNumberStyleAttr()+"><span>"+htmlEscape(view.opt("weekNumberTitle"))+"</span></th>":""},renderNumberIntroHtml:function(row){var view=this.view;return view.weekNumbersVisible?'<td class="fc-week-number" '+view.weekNumberStyleAttr()+"><span>"+this.getCellDate(row,0).format("w")+"</span></td>":""},renderBgIntroHtml:function(){var view=this.view;return view.weekNumbersVisible?'<td class="fc-week-number '+view.widgetContentClass+'" '+view.weekNumberStyleAttr()+"></td>":""},renderIntroHtml:function(){var view=this.view;return view.weekNumbersVisible?'<td class="fc-week-number" '+view.weekNumberStyleAttr()+"></td>":""}},MonthView=FC.MonthView=BasicView.extend({computeRange:function(date){var rowCnt,range=BasicView.prototype.computeRange.call(this,date);return this.isFixedWeeks()&&(rowCnt=Math.ceil(range.end.diff(range.start,"weeks",!0)),range.end.add(6-rowCnt,"weeks")),range},setGridHeight:function(height,isAuto){isAuto=isAuto||"variable"===this.opt("weekMode"),isAuto&&(height*=this.rowCnt/6),distributeHeight(this.dayGrid.rowEls,height,!isAuto)},isFixedWeeks:function(){var weekMode=this.opt("weekMode");return weekMode?"fixed"===weekMode:this.opt("fixedWeekCount")}});fcViews.basic={class:BasicView},fcViews.basicDay={type:"basic",duration:{days:1}},fcViews.basicWeek={type:"basic",duration:{weeks:1}},fcViews.month={class:MonthView,duration:{months:1},defaults:{fixedWeekCount:!0}};var AgendaView=FC.AgendaView=View.extend({scroller:null,timeGridClass:TimeGrid,timeGrid:null,dayGridClass:DayGrid,dayGrid:null,axisWidth:null,headContainerEl:null,noScrollRowEls:null,bottomRuleEl:null,initialize:function(){this.timeGrid=this.instantiateTimeGrid(),this.opt("allDaySlot")&&(this.dayGrid=this.instantiateDayGrid()),this.scroller=new Scroller({overflowX:"hidden",overflowY:"auto"})},instantiateTimeGrid:function(){return new(this.timeGridClass.extend(agendaTimeGridMethods))(this)},instantiateDayGrid:function(){return new(this.dayGridClass.extend(agendaDayGridMethods))(this)},setRange:function(range){View.prototype.setRange.call(this,range),this.timeGrid.setRange(range),this.dayGrid&&this.dayGrid.setRange(range)},renderDates:function(){this.el.addClass("fc-agenda-view").html(this.renderSkeletonHtml()),this.renderHead(),this.scroller.render();var timeGridWrapEl=this.scroller.el.addClass("fc-time-grid-container"),timeGridEl=$('<div class="fc-time-grid" />').appendTo(timeGridWrapEl);this.el.find(".fc-body > tr > td").append(timeGridWrapEl),this.timeGrid.setElement(timeGridEl),this.timeGrid.renderDates(),this.bottomRuleEl=$('<hr class="fc-divider '+this.widgetHeaderClass+'"/>').appendTo(this.timeGrid.el),this.dayGrid&&(this.dayGrid.setElement(this.el.find(".fc-day-grid")),this.dayGrid.renderDates(),this.dayGrid.bottomCoordPadding=this.dayGrid.el.next("hr").outerHeight()),this.noScrollRowEls=this.el.find(".fc-row:not(.fc-scroller *)")},renderHead:function(){this.headContainerEl=this.el.find(".fc-head-container").html(this.timeGrid.renderHeadHtml())},unrenderDates:function(){this.timeGrid.unrenderDates(),this.timeGrid.removeElement(),this.dayGrid&&(this.dayGrid.unrenderDates(),this.dayGrid.removeElement()),this.scroller.destroy()},renderSkeletonHtml:function(){return'<table><thead class="fc-head"><tr><td class="fc-head-container '+this.widgetHeaderClass+'"></td></tr></thead><tbody class="fc-body"><tr><td class="'+this.widgetContentClass+'">'+(this.dayGrid?'<div class="fc-day-grid"/><hr class="fc-divider '+this.widgetHeaderClass+'"/>':"")+"</td></tr></tbody></table>"},axisStyleAttr:function(){return null!==this.axisWidth?'style="width:'+this.axisWidth+'px"':""},renderBusinessHours:function(){this.timeGrid.renderBusinessHours(),this.dayGrid&&this.dayGrid.renderBusinessHours()},unrenderBusinessHours:function(){this.timeGrid.unrenderBusinessHours(),this.dayGrid&&this.dayGrid.unrenderBusinessHours()},getNowIndicatorUnit:function(){return this.timeGrid.getNowIndicatorUnit()},renderNowIndicator:function(date){this.timeGrid.renderNowIndicator(date)},unrenderNowIndicator:function(){this.timeGrid.unrenderNowIndicator()},updateSize:function(isResize){this.timeGrid.updateSize(isResize),View.prototype.updateSize.call(this,isResize)},updateWidth:function(){this.axisWidth=matchCellWidths(this.el.find(".fc-axis"))},setHeight:function(totalHeight,isAuto){var eventLimit,scrollerHeight,scrollbarWidths;this.bottomRuleEl.hide(),this.scroller.clear(),uncompensateScroll(this.noScrollRowEls),this.dayGrid&&(this.dayGrid.removeSegPopover(),eventLimit=this.opt("eventLimit"),eventLimit&&"number"!=typeof eventLimit&&(eventLimit=AGENDA_ALL_DAY_EVENT_LIMIT),eventLimit&&this.dayGrid.limitRows(eventLimit)),isAuto||(scrollerHeight=this.computeScrollerHeight(totalHeight),this.scroller.setHeight(scrollerHeight),scrollbarWidths=this.scroller.getScrollbarWidths(),(scrollbarWidths.left||scrollbarWidths.right)&&(compensateScroll(this.noScrollRowEls,scrollbarWidths),scrollerHeight=this.computeScrollerHeight(totalHeight),this.scroller.setHeight(scrollerHeight)),this.scroller.lockOverflow(scrollbarWidths),this.timeGrid.getTotalSlatHeight()<scrollerHeight&&this.bottomRuleEl.show())},computeScrollerHeight:function(totalHeight){return totalHeight-subtractInnerElHeight(this.el,this.scroller.el)},computeInitialScroll:function(){var scrollTime=moment.duration(this.opt("scrollTime")),top=this.timeGrid.computeTimeTop(scrollTime);return top=Math.ceil(top),top&&top++,top},queryScroll:function(){return this.scroller.getScrollTop()},setScroll:function(top){this.scroller.setScrollTop(top)},prepareHits:function(){this.timeGrid.prepareHits(),this.dayGrid&&this.dayGrid.prepareHits()},releaseHits:function(){this.timeGrid.releaseHits(),this.dayGrid&&this.dayGrid.releaseHits()},queryHit:function(left,top){var hit=this.timeGrid.queryHit(left,top);return!hit&&this.dayGrid&&(hit=this.dayGrid.queryHit(left,top)),hit},getHitSpan:function(hit){return hit.component.getHitSpan(hit)},getHitEl:function(hit){return hit.component.getHitEl(hit)},renderEvents:function(events){var i,dayEvents=[],timedEvents=[];for(i=0;i<events.length;i++)events[i].allDay?dayEvents.push(events[i]):timedEvents.push(events[i]);this.timeGrid.renderEvents(timedEvents),this.dayGrid&&this.dayGrid.renderEvents(dayEvents),this.updateHeight()},getEventSegs:function(){return this.timeGrid.getEventSegs().concat(this.dayGrid?this.dayGrid.getEventSegs():[])},unrenderEvents:function(){this.timeGrid.unrenderEvents(),this.dayGrid&&this.dayGrid.unrenderEvents()},renderDrag:function(dropLocation,seg){return dropLocation.start.hasTime()?this.timeGrid.renderDrag(dropLocation,seg):this.dayGrid?this.dayGrid.renderDrag(dropLocation,seg):void 0},unrenderDrag:function(){this.timeGrid.unrenderDrag(),this.dayGrid&&this.dayGrid.unrenderDrag()},renderSelection:function(span){span.start.hasTime()||span.end.hasTime()?this.timeGrid.renderSelection(span):this.dayGrid&&this.dayGrid.renderSelection(span)},unrenderSelection:function(){this.timeGrid.unrenderSelection(),this.dayGrid&&this.dayGrid.unrenderSelection()}}),agendaTimeGridMethods={renderHeadIntroHtml:function(){var weekText,view=this.view;return view.opt("weekNumbers")?(weekText=this.start.format(view.opt("smallWeekFormat")),'<th class="fc-axis fc-week-number '+view.widgetHeaderClass+'" '+view.axisStyleAttr()+"><span>"+htmlEscape(weekText)+"</span></th>"):'<th class="fc-axis '+view.widgetHeaderClass+'" '+view.axisStyleAttr()+"></th>"},renderBgIntroHtml:function(){var view=this.view;return'<td class="fc-axis '+view.widgetContentClass+'" '+view.axisStyleAttr()+"></td>"},renderIntroHtml:function(){return'<td class="fc-axis" '+this.view.axisStyleAttr()+"></td>"}},agendaDayGridMethods={renderBgIntroHtml:function(){var view=this.view;return'<td class="fc-axis '+view.widgetContentClass+'" '+view.axisStyleAttr()+"><span>"+(view.opt("allDayHtml")||htmlEscape(view.opt("allDayText")))+"</span></td>"},renderIntroHtml:function(){return'<td class="fc-axis" '+this.view.axisStyleAttr()+"></td>"}},AGENDA_ALL_DAY_EVENT_LIMIT=5,AGENDA_STOCK_SUB_DURATIONS=[{hours:1},{minutes:30},{minutes:15},{seconds:30},{seconds:15}];return fcViews.agenda={class:AgendaView,defaults:{allDaySlot:!0,allDayText:"all-day",slotDuration:"00:30:00",minTime:"00:00:00",maxTime:"24:00:00",slotEventOverlap:!0}},fcViews.agendaDay={type:"agenda",duration:{days:1}},fcViews.agendaWeek={type:"agenda",duration:{weeks:1}},FC}),angular.module("ui.calendar",[]).constant("uiCalendarConfig",{calendars:{}}).controller("uiCalendarCtrl",["$scope","$locale",function($scope,$locale){var sources=$scope.eventSources,extraEventSignature=$scope.calendarWatchEvent?$scope.calendarWatchEvent:angular.noop,wrapFunctionWithScopeApply=function(functionToWrap){return function(){if($scope.$root.$$phase)return functionToWrap.apply(this,arguments);var args=arguments,that=this;return $scope.$root.$apply(function(){return functionToWrap.apply(that,args)})}},eventSerialId=1;this.eventFingerprint=function(e){e._id||(e._id=eventSerialId++);var extraSignature=extraEventSignature({event:e})||"",start=moment.isMoment(e.start)?e.start.unix():e.start?moment(e.start).unix():"",end=moment.isMoment(e.end)?e.end.unix():e.end?moment(e.end).unix():"";return[e._id,e.id||"",e.title||"",e.url||"",start,end,e.allDay||"",e.className||"",extraSignature].join("")};var sourceSerialId=1,sourceEventsSerialId=1;this.sourceFingerprint=function(source){var fp=""+(source.__id||(source.__id=sourceSerialId++)),events=angular.isObject(source)&&source.events;return events&&(fp=fp+"-"+(events.__id||(events.__id=sourceEventsSerialId++))),fp},this.allEvents=function(){return Array.prototype.concat.apply([],(sources||[]).reduce(function(previous,source){if(angular.isArray(source))previous.push(source);else if(angular.isObject(source)&&angular.isArray(source.events)){var extEvent=Object.keys(source).filter(function(key){return"_id"!==key&&"events"!==key});source.events.forEach(function(event){angular.extend(event,extEvent)}),previous.push(source.events)}return previous},[]))},this.changeWatcher=function(arraySource,tokenFn){var self,getTokens=function(){return((angular.isFunction(arraySource)?arraySource():arraySource)||[]).reduce(function(rslt,el){var token=tokenFn(el);return map[token]=el,rslt.push(token),rslt},[])},subtractAsSets=function(a,b){var obj=(b||[]).reduce(function(rslt,val){return rslt[val]=!0,rslt},Object.create(null));return(a||[]).filter(function(val){return!obj[val]})},map={},applyChanges=function(newTokens,oldTokens){var i,token,replacedTokens={},removedTokens=subtractAsSets(oldTokens,newTokens);for(i=0;i<removedTokens.length;i++){var removedToken=removedTokens[i],el=map[removedToken];delete map[removedToken];var newToken=tokenFn(el);newToken===removedToken?self.onRemoved(el):(replacedTokens[newToken]=removedToken,self.onChanged(el))}var addedTokens=subtractAsSets(newTokens,oldTokens);for(i=0;i<addedTokens.length;i++)token=addedTokens[i],replacedTokens[token]||self.onAdded(map[token])};return self={subscribe:function(scope,onArrayChanged){scope.$watch(getTokens,function(newTokens,oldTokens){!(onArrayChanged&&!1===onArrayChanged(newTokens,oldTokens))&&applyChanges(newTokens,oldTokens)},!0)},onAdded:angular.noop,onChanged:angular.noop,onRemoved:angular.noop}},this.getFullCalendarConfig=function(calendarSettings,uiCalendarConfig){var config={};return angular.extend(config,uiCalendarConfig),angular.extend(config,calendarSettings),angular.forEach(config,function(value,key){"function"==typeof value&&(config[key]=wrapFunctionWithScopeApply(config[key]))}),config},this.getLocaleConfig=function(fullCalendarConfig){if(!fullCalendarConfig.lang||fullCalendarConfig.useNgLocale){var tValues=function(data){return(Object.keys(data)||[]).reduce(function(rslt,el){return rslt.push(data[el]),rslt},[])},dtf=$locale.DATETIME_FORMATS;return{monthNames:tValues(dtf.MONTH),monthNamesShort:tValues(dtf.SHORTMONTH),dayNames:tValues(dtf.DAY),dayNamesShort:tValues(dtf.SHORTDAY)}}return{}}}]).directive("uiCalendar",["uiCalendarConfig",function(uiCalendarConfig){return{restrict:"A",scope:{eventSources:"=ngModel",calendarWatchEvent:"&"},controller:"uiCalendarCtrl",link:function(scope,elm,attrs,controller){function getOptions(){var calendarSettings=attrs.uiCalendar?scope.$parent.$eval(attrs.uiCalendar):{},fullCalendarConfig=controller.getFullCalendarConfig(calendarSettings,uiCalendarConfig),localeFullCalendarConfig=controller.getLocaleConfig(fullCalendarConfig);angular.extend(localeFullCalendarConfig,fullCalendarConfig),options={eventSources:sources},angular.extend(options,localeFullCalendarConfig),options.calendars=null;var options2={};for(var o in options)"eventSources"!==o&&(options2[o]=options[o]);return JSON.stringify(options2)}var calendar,sources=scope.eventSources,sourcesChanged=!1,eventSourcesWatcher=controller.changeWatcher(sources,controller.sourceFingerprint),eventsWatcher=controller.changeWatcher(controller.allEvents,controller.eventFingerprint),options=null;scope.destroyCalendar=function(){calendar&&calendar.fullCalendar&&calendar.fullCalendar("destroy"),calendar=attrs.calendar?uiCalendarConfig.calendars[attrs.calendar]=angular.element(elm).html(""):angular.element(elm).html("")},scope.initCalendar=function(){calendar||(calendar=angular.element(elm).html("")),calendar.fullCalendar(options),attrs.calendar&&(uiCalendarConfig.calendars[attrs.calendar]=calendar)},scope.$on("$destroy",function(){scope.destroyCalendar()}),eventSourcesWatcher.onAdded=function(source){calendar&&calendar.fullCalendar&&(calendar.fullCalendar(options),attrs.calendar&&(uiCalendarConfig.calendars[attrs.calendar]=calendar),calendar.fullCalendar("addEventSource",source),sourcesChanged=!0)},eventSourcesWatcher.onRemoved=function(source){calendar&&calendar.fullCalendar&&(calendar.fullCalendar("removeEventSource",source),sourcesChanged=!0)},eventSourcesWatcher.onChanged=function(){calendar&&calendar.fullCalendar&&(calendar.fullCalendar("refetchEvents"),sourcesChanged=!0)},eventsWatcher.onAdded=function(event){calendar&&calendar.fullCalendar&&calendar.fullCalendar("renderEvent",event,!!event.stick)},eventsWatcher.onRemoved=function(event){calendar&&calendar.fullCalendar&&calendar.fullCalendar("removeEvents",event._id)},eventsWatcher.onChanged=function(event){if(calendar&&calendar.fullCalendar)for(var clientEvents=calendar.fullCalendar("clientEvents",event._id),i=0;i<clientEvents.length;i++){var clientEvent=clientEvents[i];clientEvent=angular.extend(clientEvent,event),calendar.fullCalendar("updateEvent",clientEvent)}},eventSourcesWatcher.subscribe(scope),eventsWatcher.subscribe(scope,function(){if(!0===sourcesChanged)return sourcesChanged=!1,!1}),scope.$watch(getOptions,function(newValue,oldValue){newValue!==oldValue?(scope.destroyCalendar(),scope.initCalendar()):newValue&&angular.isUndefined(calendar)&&scope.initCalendar()})}}}]),function(f){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=f();else if("function"==typeof define&&define.amd)define([],f);else{var g;g="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,g.Chart=f()}}(function(){return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n||e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){},{}],2:[function(require,module,exports){function getRgba(string){if(string){var rgb=[0,0,0],a=1,match=string.match(/^#([a-fA-F0-9]{3})$/);if(match){match=match[1];for(var i=0;i<rgb.length;i++)rgb[i]=parseInt(match[i]+match[i],16)}else if(match=string.match(/^#([a-fA-F0-9]{6})$/)){match=match[1];for(var i=0;i<rgb.length;i++)rgb[i]=parseInt(match.slice(2*i,2*i+2),16)}else if(match=string.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)){for(var i=0;i<rgb.length;i++)rgb[i]=parseInt(match[i+1]);a=parseFloat(match[4])}else if(match=string.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)){for(var i=0;i<rgb.length;i++)rgb[i]=Math.round(2.55*parseFloat(match[i+1]));a=parseFloat(match[4])}else if(match=string.match(/(\w+)/)){if("transparent"==match[1])return[0,0,0,0];if(!(rgb=colorNames[match[1]]))return}for(var i=0;i<rgb.length;i++)rgb[i]=scale(rgb[i],0,255);return a=a||0==a?scale(a,0,1):1,rgb[3]=a,rgb}}function getHsla(string){if(string){var match=string.match(/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(match){var alpha=parseFloat(match[4]);return[scale(parseInt(match[1]),0,360),scale(parseFloat(match[2]),0,100),scale(parseFloat(match[3]),0,100),scale(isNaN(alpha)?1:alpha,0,1)]}}}function getHwb(string){if(string){var match=string.match(/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(match){var alpha=parseFloat(match[4]);return[scale(parseInt(match[1]),0,360),scale(parseFloat(match[2]),0,100),scale(parseFloat(match[3]),0,100),scale(isNaN(alpha)?1:alpha,0,1)]}}}function getRgb(string){var rgba=getRgba(string);return rgba&&rgba.slice(0,3)}function getHsl(string){var hsla=getHsla(string);return hsla&&hsla.slice(0,3)}function getAlpha(string){var vals=getRgba(string);return vals?vals[3]:(vals=getHsla(string))?vals[3]:(vals=getHwb(string))?vals[3]:void 0}function hexString(rgb){return"#"+hexDouble(rgb[0])+hexDouble(rgb[1])+hexDouble(rgb[2])}function rgbString(rgba,alpha){return alpha<1||rgba[3]&&rgba[3]<1?rgbaString(rgba,alpha):"rgb("+rgba[0]+", "+rgba[1]+", "+rgba[2]+")"}function rgbaString(rgba,alpha){return void 0===alpha&&(alpha=void 0!==rgba[3]?rgba[3]:1),"rgba("+rgba[0]+", "+rgba[1]+", "+rgba[2]+", "+alpha+")"}function percentString(rgba,alpha){return alpha<1||rgba[3]&&rgba[3]<1?percentaString(rgba,alpha):"rgb("+Math.round(rgba[0]/255*100)+"%, "+Math.round(rgba[1]/255*100)+"%, "+Math.round(rgba[2]/255*100)+"%)"}function percentaString(rgba,alpha){return"rgba("+Math.round(rgba[0]/255*100)+"%, "+Math.round(rgba[1]/255*100)+"%, "+Math.round(rgba[2]/255*100)+"%, "+(alpha||rgba[3]||1)+")"}function hslString(hsla,alpha){return alpha<1||hsla[3]&&hsla[3]<1?hslaString(hsla,alpha):"hsl("+hsla[0]+", "+hsla[1]+"%, "+hsla[2]+"%)"}function hslaString(hsla,alpha){return void 0===alpha&&(alpha=void 0!==hsla[3]?hsla[3]:1),"hsla("+hsla[0]+", "+hsla[1]+"%, "+hsla[2]+"%, "+alpha+")"}function hwbString(hwb,alpha){return void 0===alpha&&(alpha=void 0!==hwb[3]?hwb[3]:1),"hwb("+hwb[0]+", "+hwb[1]+"%, "+hwb[2]+"%"+(void 0!==alpha&&1!==alpha?", "+alpha:"")+")"}function keyword(rgb){return reverseNames[rgb.slice(0,3)]}function scale(num,min,max){return Math.min(Math.max(min,num),max)}function hexDouble(num){var str=num.toString(16).toUpperCase();return str.length<2?"0"+str:str}var colorNames=require(6);module.exports={getRgba:getRgba,getHsla:getHsla,getRgb:getRgb,getHsl:getHsl,getHwb:getHwb,getAlpha:getAlpha,hexString:hexString,rgbString:rgbString,rgbaString:rgbaString,percentString:percentString,percentaString:percentaString,hslString:hslString,hslaString:hslaString,hwbString:hwbString,keyword:keyword};var reverseNames={};for(var name in colorNames)reverseNames[colorNames[name]]=name},{6:6}],3:[function(require,module,exports){var convert=require(5),string=require(2),Color=function(obj){if(obj instanceof Color)return obj;if(!(this instanceof Color))return new Color(obj);this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1};var vals;if("string"==typeof obj)if(vals=string.getRgba(obj))this.setValues("rgb",vals);else if(vals=string.getHsla(obj))this.setValues("hsl",vals);else{if(!(vals=string.getHwb(obj)))throw new Error('Unable to parse color from string "'+obj+'"');this.setValues("hwb",vals)}else if("object"==typeof obj)if(vals=obj,void 0!==vals.r||void 0!==vals.red)this.setValues("rgb",vals);else if(void 0!==vals.l||void 0!==vals.lightness)this.setValues("hsl",vals);else if(void 0!==vals.v||void 0!==vals.value)this.setValues("hsv",vals);else if(void 0!==vals.w||void 0!==vals.whiteness)this.setValues("hwb",vals);else{if(void 0===vals.c&&void 0===vals.cyan)throw new Error("Unable to parse color from object "+JSON.stringify(obj));this.setValues("cmyk",vals)}};Color.prototype={rgb:function(){return this.setSpace("rgb",arguments)},hsl:function(){return this.setSpace("hsl",arguments)},hsv:function(){return this.setSpace("hsv",arguments)},hwb:function(){return this.setSpace("hwb",arguments)},cmyk:function(){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){var values=this.values;return 1!==values.alpha?values.hwb.concat([values.alpha]):values.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var values=this.values;return values.rgb.concat([values.alpha])},hslaArray:function(){var values=this.values;return values.hsl.concat([values.alpha])},alpha:function(val){return void 0===val?this.values.alpha:(this.setValues("alpha",val),this)},red:function(val){return this.setChannel("rgb",0,val)},green:function(val){return this.setChannel("rgb",1,val)},blue:function(val){return this.setChannel("rgb",2,val)},hue:function(val){return val&&(val%=360,val=val<0?360+val:val),this.setChannel("hsl",0,val)},saturation:function(val){return this.setChannel("hsl",1,val)},lightness:function(val){return this.setChannel("hsl",2,val)},saturationv:function(val){return this.setChannel("hsv",1,val)},whiteness:function(val){return this.setChannel("hwb",1,val)},blackness:function(val){return this.setChannel("hwb",2,val)},value:function(val){return this.setChannel("hsv",2,val)},cyan:function(val){return this.setChannel("cmyk",0,val)},magenta:function(val){return this.setChannel("cmyk",1,val)},yellow:function(val){return this.setChannel("cmyk",2,val)},black:function(val){return this.setChannel("cmyk",3,val)},hexString:function(){return string.hexString(this.values.rgb)},rgbString:function(){return string.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return string.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return string.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return string.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return string.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return string.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return string.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){var rgb=this.values.rgb;return rgb[0]<<16|rgb[1]<<8|rgb[2]},luminosity:function(){for(var rgb=this.values.rgb,lum=[],i=0;i<rgb.length;i++){var chan=rgb[i]/255;lum[i]=chan<=.03928?chan/12.92:Math.pow((chan+.055)/1.055,2.4)}return.2126*lum[0]+.7152*lum[1]+.0722*lum[2]},contrast:function(color2){var lum1=this.luminosity(),lum2=color2.luminosity();return lum1>lum2?(lum1+.05)/(lum2+.05):(lum2+.05)/(lum1+.05)},level:function(color2){var contrastRatio=this.contrast(color2);return contrastRatio>=7.1?"AAA":contrastRatio>=4.5?"AA":""},dark:function(){var rgb=this.values.rgb;return(299*rgb[0]+587*rgb[1]+114*rgb[2])/1e3<128},light:function(){return!this.dark()},negate:function(){for(var rgb=[],i=0;i<3;i++)rgb[i]=255-this.values.rgb[i];return this.setValues("rgb",rgb),this},lighten:function(ratio){var hsl=this.values.hsl;return hsl[2]+=hsl[2]*ratio,this.setValues("hsl",hsl),this},darken:function(ratio){var hsl=this.values.hsl;return hsl[2]-=hsl[2]*ratio,this.setValues("hsl",hsl),this},saturate:function(ratio){var hsl=this.values.hsl;return hsl[1]+=hsl[1]*ratio,this.setValues("hsl",hsl),this},desaturate:function(ratio){var hsl=this.values.hsl;return hsl[1]-=hsl[1]*ratio,this.setValues("hsl",hsl),this},whiten:function(ratio){var hwb=this.values.hwb;return hwb[1]+=hwb[1]*ratio,this.setValues("hwb",hwb),this},blacken:function(ratio){var hwb=this.values.hwb;return hwb[2]+=hwb[2]*ratio,this.setValues("hwb",hwb),this},greyscale:function(){var rgb=this.values.rgb,val=.3*rgb[0]+.59*rgb[1]+.11*rgb[2];return this.setValues("rgb",[val,val,val]),this},clearer:function(ratio){var alpha=this.values.alpha;return this.setValues("alpha",alpha-alpha*ratio),this},opaquer:function(ratio){var alpha=this.values.alpha;return this.setValues("alpha",alpha+alpha*ratio),this},rotate:function(degrees){var hsl=this.values.hsl,hue=(hsl[0]+degrees)%360;return hsl[0]=hue<0?360+hue:hue,this.setValues("hsl",hsl),this},mix:function(mixinColor,weight){var color1=this,color2=mixinColor,p=void 0===weight?.5:weight,w=2*p-1,a=color1.alpha()-color2.alpha(),w1=((w*a==-1?w:(w+a)/(1+w*a))+1)/2,w2=1-w1;return this.rgb(w1*color1.red()+w2*color2.red(),w1*color1.green()+w2*color2.green(),w1*color1.blue()+w2*color2.blue()).alpha(color1.alpha()*p+color2.alpha()*(1-p))},toJSON:function(){return this.rgb()},clone:function(){var value,type,result=new Color,source=this.values,target=result.values;for(var prop in source)source.hasOwnProperty(prop)&&(value=source[prop],type={}.toString.call(value),"[object Array]"===type?target[prop]=value.slice(0):"[object Number]"===type?target[prop]=value:console.error("unexpected color value:",value));return result}},Color.prototype.spaces={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},Color.prototype.maxes={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},Color.prototype.getValues=function(space){for(var values=this.values,vals={},i=0;i<space.length;i++)vals[space.charAt(i)]=values[space][i];return 1!==values.alpha&&(vals.a=values.alpha),vals},Color.prototype.setValues=function(space,vals){var i,values=this.values,spaces=this.spaces,maxes=this.maxes,alpha=1;if("alpha"===space)alpha=vals;else if(vals.length)values[space]=vals.slice(0,space.length),alpha=vals[space.length];else if(void 0!==vals[space.charAt(0)]){for(i=0;i<space.length;i++)values[space][i]=vals[space.charAt(i)];alpha=vals.a}else if(void 0!==vals[spaces[space][0]]){var chans=spaces[space];for(i=0;i<space.length;i++)values[space][i]=vals[chans[i]];alpha=vals.alpha}if(values.alpha=Math.max(0,Math.min(1,void 0===alpha?values.alpha:alpha)),"alpha"===space)return!1;var capped;for(i=0;i<space.length;i++)capped=Math.max(0,Math.min(maxes[space][i],values[space][i])),values[space][i]=Math.round(capped);for(var sname in spaces)sname!==space&&(values[sname]=convert[space][sname](values[space]));return!0},Color.prototype.setSpace=function(space,args){var vals=args[0];return void 0===vals?this.getValues(space):("number"==typeof vals&&(vals=Array.prototype.slice.call(args)),this.setValues(space,vals),this)},Color.prototype.setChannel=function(space,index,val){var svalues=this.values[space];return void 0===val?svalues[index]:val===svalues[index]?this:(svalues[index]=val,this.setValues(space,svalues),this)},"undefined"!=typeof window&&(window.Color=Color),module.exports=Color},{2:2,5:5}],4:[function(require,module,exports){function rgb2hsl(rgb){var h,s,l,r=rgb[0]/255,g=rgb[1]/255,b=rgb[2]/255,min=Math.min(r,g,b),max=Math.max(r,g,b),delta=max-min;return max==min?h=0:r==max?h=(g-b)/delta:g==max?h=2+(b-r)/delta:b==max&&(h=4+(r-g)/delta),h=Math.min(60*h,360),h<0&&(h+=360),l=(min+max)/2,s=max==min?0:l<=.5?delta/(max+min):delta/(2-max-min),[h,100*s,100*l]}function rgb2hsv(rgb){var h,s,v,r=rgb[0],g=rgb[1],b=rgb[2],min=Math.min(r,g,b),max=Math.max(r,g,b),delta=max-min;return s=0==max?0:delta/max*1e3/10,max==min?h=0:r==max?h=(g-b)/delta:g==max?h=2+(b-r)/delta:b==max&&(h=4+(r-g)/delta),h=Math.min(60*h,360),h<0&&(h+=360),v=max/255*1e3/10,[h,s,v]}function rgb2hwb(rgb){var r=rgb[0],g=rgb[1],b=rgb[2],h=rgb2hsl(rgb)[0],w=1/255*Math.min(r,Math.min(g,b)),b=1-1/255*Math.max(r,Math.max(g,b));return[h,100*w,100*b]}function rgb2cmyk(rgb){var c,m,y,k,r=rgb[0]/255,g=rgb[1]/255,b=rgb[2]/255;return k=Math.min(1-r,1-g,1-b),c=(1-r-k)/(1-k)||0,m=(1-g-k)/(1-k)||0,y=(1-b-k)/(1-k)||0,[100*c,100*m,100*y,100*k]}function rgb2keyword(rgb){return reverseKeywords[JSON.stringify(rgb)]}function rgb2xyz(rgb){var r=rgb[0]/255,g=rgb[1]/255,b=rgb[2]/255;return r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92,g=g>.04045?Math.pow((g+.055)/1.055,2.4):g/12.92,b=b>.04045?Math.pow((b+.055)/1.055,2.4):b/12.92,[100*(.4124*r+.3576*g+.1805*b),100*(.2126*r+.7152*g+.0722*b),100*(.0193*r+.1192*g+.9505*b)]}function rgb2lab(rgb){var l,a,b,xyz=rgb2xyz(rgb),x=xyz[0],y=xyz[1],z=xyz[2];return x/=95.047,y/=100,z/=108.883,x=x>.008856?Math.pow(x,1/3):7.787*x+16/116,y=y>.008856?Math.pow(y,1/3):7.787*y+16/116,z=z>.008856?Math.pow(z,1/3):7.787*z+16/116,l=116*y-16,a=500*(x-y),b=200*(y-z),[l,a,b]}function rgb2lch(args){return lab2lch(rgb2lab(args))}function hsl2rgb(hsl){var t1,t2,t3,rgb,val,h=hsl[0]/360,s=hsl[1]/100,l=hsl[2]/100;if(0==s)return val=255*l,[val,val,val];t2=l<.5?l*(1+s):l+s-l*s,t1=2*l-t2,rgb=[0,0,0];for(var i=0;i<3;i++)t3=h+1/3*-(i-1),t3<0&&t3++,t3>1&&t3--,val=6*t3<1?t1+6*(t2-t1)*t3:2*t3<1?t2:3*t3<2?t1+(t2-t1)*(2/3-t3)*6:t1,rgb[i]=255*val;return rgb}
function hsl2hsv(hsl){var sv,v,h=hsl[0],s=hsl[1]/100,l=hsl[2]/100;return 0===l?[0,0,0]:(l*=2,s*=l<=1?l:2-l,v=(l+s)/2,sv=2*s/(l+s),[h,100*sv,100*v])}function hsl2hwb(args){return rgb2hwb(hsl2rgb(args))}function hsl2cmyk(args){return rgb2cmyk(hsl2rgb(args))}function hsl2keyword(args){return rgb2keyword(hsl2rgb(args))}function hsv2rgb(hsv){var h=hsv[0]/60,s=hsv[1]/100,v=hsv[2]/100,hi=Math.floor(h)%6,f=h-Math.floor(h),p=255*v*(1-s),q=255*v*(1-s*f),t=255*v*(1-s*(1-f)),v=255*v;switch(hi){case 0:return[v,t,p];case 1:return[q,v,p];case 2:return[p,v,t];case 3:return[p,q,v];case 4:return[t,p,v];case 5:return[v,p,q]}}function hsv2hsl(hsv){var sl,l,h=hsv[0],s=hsv[1]/100,v=hsv[2]/100;return l=(2-s)*v,sl=s*v,sl/=l<=1?l:2-l,sl=sl||0,l/=2,[h,100*sl,100*l]}function hsv2hwb(args){return rgb2hwb(hsv2rgb(args))}function hsv2cmyk(args){return rgb2cmyk(hsv2rgb(args))}function hsv2keyword(args){return rgb2keyword(hsv2rgb(args))}function hwb2rgb(hwb){var i,v,f,n,h=hwb[0]/360,wh=hwb[1]/100,bl=hwb[2]/100,ratio=wh+bl;switch(ratio>1&&(wh/=ratio,bl/=ratio),i=Math.floor(6*h),v=1-bl,f=6*h-i,0!=(1&i)&&(f=1-f),n=wh+f*(v-wh),i){default:case 6:case 0:r=v,g=n,b=wh;break;case 1:r=n,g=v,b=wh;break;case 2:r=wh,g=v,b=n;break;case 3:r=wh,g=n,b=v;break;case 4:r=n,g=wh,b=v;break;case 5:r=v,g=wh,b=n}return[255*r,255*g,255*b]}function hwb2hsl(args){return rgb2hsl(hwb2rgb(args))}function hwb2hsv(args){return rgb2hsv(hwb2rgb(args))}function hwb2cmyk(args){return rgb2cmyk(hwb2rgb(args))}function hwb2keyword(args){return rgb2keyword(hwb2rgb(args))}function cmyk2rgb(cmyk){var r,g,b,c=cmyk[0]/100,m=cmyk[1]/100,y=cmyk[2]/100,k=cmyk[3]/100;return r=1-Math.min(1,c*(1-k)+k),g=1-Math.min(1,m*(1-k)+k),b=1-Math.min(1,y*(1-k)+k),[255*r,255*g,255*b]}function cmyk2hsl(args){return rgb2hsl(cmyk2rgb(args))}function cmyk2hsv(args){return rgb2hsv(cmyk2rgb(args))}function cmyk2hwb(args){return rgb2hwb(cmyk2rgb(args))}function cmyk2keyword(args){return rgb2keyword(cmyk2rgb(args))}function xyz2rgb(xyz){var r,g,b,x=xyz[0]/100,y=xyz[1]/100,z=xyz[2]/100;return r=3.2406*x+-1.5372*y+-.4986*z,g=-.9689*x+1.8758*y+.0415*z,b=.0557*x+-.204*y+1.057*z,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:r*=12.92,g=g>.0031308?1.055*Math.pow(g,1/2.4)-.055:g*=12.92,b=b>.0031308?1.055*Math.pow(b,1/2.4)-.055:b*=12.92,r=Math.min(Math.max(0,r),1),g=Math.min(Math.max(0,g),1),b=Math.min(Math.max(0,b),1),[255*r,255*g,255*b]}function xyz2lab(xyz){var l,a,b,x=xyz[0],y=xyz[1],z=xyz[2];return x/=95.047,y/=100,z/=108.883,x=x>.008856?Math.pow(x,1/3):7.787*x+16/116,y=y>.008856?Math.pow(y,1/3):7.787*y+16/116,z=z>.008856?Math.pow(z,1/3):7.787*z+16/116,l=116*y-16,a=500*(x-y),b=200*(y-z),[l,a,b]}function xyz2lch(args){return lab2lch(xyz2lab(args))}function lab2xyz(lab){var x,y,z,y2,l=lab[0],a=lab[1],b=lab[2];return l<=8?(y=100*l/903.3,y2=y/100*7.787+16/116):(y=100*Math.pow((l+16)/116,3),y2=Math.pow(y/100,1/3)),x=x/95.047<=.008856?x=95.047*(a/500+y2-16/116)/7.787:95.047*Math.pow(a/500+y2,3),z=z/108.883<=.008859?z=108.883*(y2-b/200-16/116)/7.787:108.883*Math.pow(y2-b/200,3),[x,y,z]}function lab2lch(lab){var hr,h,c,l=lab[0],a=lab[1],b=lab[2];return hr=Math.atan2(b,a),h=360*hr/2/Math.PI,h<0&&(h+=360),c=Math.sqrt(a*a+b*b),[l,c,h]}function lab2rgb(args){return xyz2rgb(lab2xyz(args))}function lch2lab(lch){var a,b,hr,l=lch[0],c=lch[1],h=lch[2];return hr=h/360*2*Math.PI,a=c*Math.cos(hr),b=c*Math.sin(hr),[l,a,b]}function lch2xyz(args){return lab2xyz(lch2lab(args))}function lch2rgb(args){return lab2rgb(lch2lab(args))}function keyword2rgb(keyword){return cssKeywords[keyword]}function keyword2hsl(args){return rgb2hsl(keyword2rgb(args))}function keyword2hsv(args){return rgb2hsv(keyword2rgb(args))}function keyword2hwb(args){return rgb2hwb(keyword2rgb(args))}function keyword2cmyk(args){return rgb2cmyk(keyword2rgb(args))}function keyword2lab(args){return rgb2lab(keyword2rgb(args))}function keyword2xyz(args){return rgb2xyz(keyword2rgb(args))}module.exports={rgb2hsl:rgb2hsl,rgb2hsv:rgb2hsv,rgb2hwb:rgb2hwb,rgb2cmyk:rgb2cmyk,rgb2keyword:rgb2keyword,rgb2xyz:rgb2xyz,rgb2lab:rgb2lab,rgb2lch:rgb2lch,hsl2rgb:hsl2rgb,hsl2hsv:hsl2hsv,hsl2hwb:hsl2hwb,hsl2cmyk:hsl2cmyk,hsl2keyword:hsl2keyword,hsv2rgb:hsv2rgb,hsv2hsl:hsv2hsl,hsv2hwb:hsv2hwb,hsv2cmyk:hsv2cmyk,hsv2keyword:hsv2keyword,hwb2rgb:hwb2rgb,hwb2hsl:hwb2hsl,hwb2hsv:hwb2hsv,hwb2cmyk:hwb2cmyk,hwb2keyword:hwb2keyword,cmyk2rgb:cmyk2rgb,cmyk2hsl:cmyk2hsl,cmyk2hsv:cmyk2hsv,cmyk2hwb:cmyk2hwb,cmyk2keyword:cmyk2keyword,keyword2rgb:keyword2rgb,keyword2hsl:keyword2hsl,keyword2hsv:keyword2hsv,keyword2hwb:keyword2hwb,keyword2cmyk:keyword2cmyk,keyword2lab:keyword2lab,keyword2xyz:keyword2xyz,xyz2rgb:xyz2rgb,xyz2lab:xyz2lab,xyz2lch:xyz2lch,lab2xyz:lab2xyz,lab2rgb:lab2rgb,lab2lch:lab2lch,lch2lab:lch2lab,lch2xyz:lch2xyz,lch2rgb:lch2rgb};var cssKeywords={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},reverseKeywords={};for(var key in cssKeywords)reverseKeywords[JSON.stringify(cssKeywords[key])]=key},{}],5:[function(require,module,exports){var conversions=require(4),convert=function(){return new Converter};for(var func in conversions){convert[func+"Raw"]=function(func){return function(arg){return"number"==typeof arg&&(arg=Array.prototype.slice.call(arguments)),conversions[func](arg)}}(func);var pair=/(\w+)2(\w+)/.exec(func),from=pair[1],to=pair[2];convert[from]=convert[from]||{},convert[from][to]=convert[func]=function(func){return function(arg){"number"==typeof arg&&(arg=Array.prototype.slice.call(arguments));var val=conversions[func](arg);if("string"==typeof val||void 0===val)return val;for(var i=0;i<val.length;i++)val[i]=Math.round(val[i]);return val}}(func)}var Converter=function(){this.convs={}};Converter.prototype.routeSpace=function(space,args){var values=args[0];return void 0===values?this.getValues(space):("number"==typeof values&&(values=Array.prototype.slice.call(args)),this.setValues(space,values))},Converter.prototype.setValues=function(space,values){return this.space=space,this.convs={},this.convs[space]=values,this},Converter.prototype.getValues=function(space){var vals=this.convs[space];if(!vals){var fspace=this.space,from=this.convs[fspace];vals=convert[fspace][space](from),this.convs[space]=vals}return vals},["rgb","hsl","hsv","cmyk","keyword"].forEach(function(space){Converter.prototype[space]=function(vals){return this.routeSpace(space,arguments)}}),module.exports=convert},{4:4}],6:[function(require,module,exports){module.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],7:[function(require,module,exports){var Chart=require(28)();require(26)(Chart),require(42)(Chart),require(22)(Chart),require(31)(Chart),require(25)(Chart),require(21)(Chart),require(23)(Chart),require(24)(Chart),require(29)(Chart),require(33)(Chart),require(34)(Chart),require(32)(Chart),require(35)(Chart),require(30)(Chart),require(27)(Chart),require(36)(Chart),require(37)(Chart),require(38)(Chart),require(39)(Chart),require(40)(Chart),require(45)(Chart),require(43)(Chart),require(44)(Chart),require(46)(Chart),require(47)(Chart),require(48)(Chart),require(15)(Chart),require(16)(Chart),require(17)(Chart),require(18)(Chart),require(19)(Chart),require(20)(Chart),require(8)(Chart),require(9)(Chart),require(10)(Chart),require(11)(Chart),require(12)(Chart),require(13)(Chart),require(14)(Chart),window.Chart=module.exports=Chart},{10:10,11:11,12:12,13:13,14:14,15:15,16:16,17:17,18:18,19:19,20:20,21:21,22:22,23:23,24:24,25:25,26:26,27:27,28:28,29:29,30:30,31:31,32:32,33:33,34:34,35:35,36:36,37:37,38:38,39:39,40:40,42:42,43:43,44:44,45:45,46:46,47:47,48:48,8:8,9:9}],8:[function(require,module,exports){"use strict";module.exports=function(Chart){Chart.Bar=function(context,config){return config.type="bar",new Chart(context,config)}}},{}],9:[function(require,module,exports){"use strict";module.exports=function(Chart){Chart.Bubble=function(context,config){return config.type="bubble",new Chart(context,config)}}},{}],10:[function(require,module,exports){"use strict";module.exports=function(Chart){Chart.Doughnut=function(context,config){return config.type="doughnut",new Chart(context,config)}}},{}],11:[function(require,module,exports){"use strict";module.exports=function(Chart){Chart.Line=function(context,config){return config.type="line",new Chart(context,config)}}},{}],12:[function(require,module,exports){"use strict";module.exports=function(Chart){Chart.PolarArea=function(context,config){return config.type="polarArea",new Chart(context,config)}}},{}],13:[function(require,module,exports){"use strict";module.exports=function(Chart){Chart.Radar=function(context,config){return config.type="radar",new Chart(context,config)}}},{}],14:[function(require,module,exports){"use strict";module.exports=function(Chart){var defaultConfig={hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-1"}],yAxes:[{type:"linear",position:"left",id:"y-axis-1"}]},tooltips:{callbacks:{title:function(){return""},label:function(tooltipItem){return"("+tooltipItem.xLabel+", "+tooltipItem.yLabel+")"}}}};Chart.defaults.scatter=defaultConfig,Chart.controllers.scatter=Chart.controllers.line,Chart.Scatter=function(context,config){return config.type="scatter",new Chart(context,config)}}},{}],15:[function(require,module,exports){"use strict";module.exports=function(Chart){var helpers=Chart.helpers;Chart.defaults.bar={hover:{mode:"label"},scales:{xAxes:[{type:"category",categoryPercentage:.8,barPercentage:.9,gridLines:{offsetGridLines:!0}}],yAxes:[{type:"linear"}]}},Chart.controllers.bar=Chart.DatasetController.extend({dataElementType:Chart.elements.Rectangle,initialize:function(chart,datasetIndex){Chart.DatasetController.prototype.initialize.call(this,chart,datasetIndex);var me=this,meta=me.getMeta(),dataset=me.getDataset();meta.stack=dataset.stack,meta.bar=!0},getStackCount:function(){var me=this,meta=me.getMeta(),yScale=me.getScaleForId(meta.yAxisID),stacks=[];return helpers.each(me.chart.data.datasets,function(dataset,datasetIndex){var dsMeta=me.chart.getDatasetMeta(datasetIndex);dsMeta.bar&&me.chart.isDatasetVisible(datasetIndex)&&(!1===yScale.options.stacked||!0===yScale.options.stacked&&-1===stacks.indexOf(dsMeta.stack)||void 0===yScale.options.stacked&&(void 0===dsMeta.stack||-1===stacks.indexOf(dsMeta.stack)))&&stacks.push(dsMeta.stack)},me),stacks.length},update:function(reset){var me=this;helpers.each(me.getMeta().data,function(rectangle,index){me.updateElement(rectangle,index,reset)},me)},updateElement:function(rectangle,index,reset){var me=this,meta=me.getMeta(),xScale=me.getScaleForId(meta.xAxisID),yScale=me.getScaleForId(meta.yAxisID),scaleBase=yScale.getBasePixel(),rectangleElementOptions=me.chart.options.elements.rectangle,custom=rectangle.custom||{},dataset=me.getDataset();rectangle._xScale=xScale,rectangle._yScale=yScale,rectangle._datasetIndex=me.index,rectangle._index=index;var ruler=me.getRuler(index);rectangle._model={x:me.calculateBarX(index,me.index,ruler),y:reset?scaleBase:me.calculateBarY(index,me.index),label:me.chart.data.labels[index],datasetLabel:dataset.label,horizontal:!1,base:reset?scaleBase:me.calculateBarBase(me.index,index),width:me.calculateBarWidth(ruler),backgroundColor:custom.backgroundColor?custom.backgroundColor:helpers.getValueAtIndexOrDefault(dataset.backgroundColor,index,rectangleElementOptions.backgroundColor),borderSkipped:custom.borderSkipped?custom.borderSkipped:rectangleElementOptions.borderSkipped,borderColor:custom.borderColor?custom.borderColor:helpers.getValueAtIndexOrDefault(dataset.borderColor,index,rectangleElementOptions.borderColor),borderWidth:custom.borderWidth?custom.borderWidth:helpers.getValueAtIndexOrDefault(dataset.borderWidth,index,rectangleElementOptions.borderWidth)},rectangle.pivot()},calculateBarBase:function(datasetIndex,index){var me=this,meta=me.getMeta(),yScale=me.getScaleForId(meta.yAxisID),base=yScale.getBaseValue(),original=base;if(!0===yScale.options.stacked||void 0===yScale.options.stacked&&void 0!==meta.stack){for(var chart=me.chart,datasets=chart.data.datasets,value=Number(datasets[datasetIndex].data[index]),i=0;i<datasetIndex;i++){var currentDs=datasets[i],currentDsMeta=chart.getDatasetMeta(i);if(currentDsMeta.bar&&currentDsMeta.yAxisID===yScale.id&&chart.isDatasetVisible(i)&&meta.stack===currentDsMeta.stack){var currentVal=Number(currentDs.data[index]);base+=value<0?Math.min(currentVal,original):Math.max(currentVal,original)}}return yScale.getPixelForValue(base)}return yScale.getBasePixel()},getRuler:function(){var me=this,meta=me.getMeta(),xScale=me.getScaleForId(meta.xAxisID),stackCount=me.getStackCount(),tickWidth=xScale.width/xScale.ticks.length,categoryWidth=tickWidth*xScale.options.categoryPercentage,categorySpacing=(tickWidth-tickWidth*xScale.options.categoryPercentage)/2,fullBarWidth=categoryWidth/stackCount;return{stackCount:stackCount,tickWidth:tickWidth,categoryWidth:categoryWidth,categorySpacing:categorySpacing,fullBarWidth:fullBarWidth,barWidth:fullBarWidth*xScale.options.barPercentage,barSpacing:fullBarWidth-fullBarWidth*xScale.options.barPercentage}},calculateBarWidth:function(ruler){var me=this,meta=me.getMeta(),xScale=me.getScaleForId(meta.xAxisID);return xScale.options.barThickness?xScale.options.barThickness:ruler.barWidth},getStackIndex:function(datasetIndex){var dsMeta,j,me=this,meta=me.chart.getDatasetMeta(datasetIndex),yScale=me.getScaleForId(meta.yAxisID),stacks=[meta.stack];for(j=0;j<datasetIndex;++j)dsMeta=this.chart.getDatasetMeta(j),dsMeta.bar&&this.chart.isDatasetVisible(j)&&(!1===yScale.options.stacked||!0===yScale.options.stacked&&-1===stacks.indexOf(dsMeta.stack)||void 0===yScale.options.stacked&&(void 0===dsMeta.stack||-1===stacks.indexOf(dsMeta.stack)))&&stacks.push(dsMeta.stack);return stacks.length-1},calculateBarX:function(index,datasetIndex,ruler){var me=this,meta=me.getMeta(),xScale=me.getScaleForId(meta.xAxisID),stackIndex=me.getStackIndex(datasetIndex),leftTick=xScale.getPixelForValue(null,index,datasetIndex,me.chart.isCombo);return(leftTick-=me.chart.isCombo?ruler.tickWidth/2:0)+ruler.barWidth/2+ruler.categorySpacing+ruler.barWidth*stackIndex+ruler.barSpacing/2+ruler.barSpacing*stackIndex},calculateBarY:function(index,datasetIndex){var me=this,meta=me.getMeta(),yScale=me.getScaleForId(meta.yAxisID),value=Number(me.getDataset().data[index]);if(yScale.options.stacked||void 0===yScale.options.stacked&&void 0!==meta.stack){for(var base=yScale.getBaseValue(),sumPos=base,sumNeg=base,i=0;i<datasetIndex;i++){var ds=me.chart.data.datasets[i],dsMeta=me.chart.getDatasetMeta(i);if(dsMeta.bar&&dsMeta.yAxisID===yScale.id&&me.chart.isDatasetVisible(i)&&meta.stack===dsMeta.stack){var stackedVal=Number(ds.data[index]);stackedVal<0?sumNeg+=stackedVal||0:sumPos+=stackedVal||0}}return value<0?yScale.getPixelForValue(sumNeg+value):yScale.getPixelForValue(sumPos+value)}return yScale.getPixelForValue(value)},draw:function(ease){var i,len,me=this,easingDecimal=ease||1,metaData=me.getMeta().data,dataset=me.getDataset();for(Chart.canvasHelpers.clipArea(me.chart.chart.ctx,me.chart.chartArea),i=0,len=metaData.length;i<len;++i){var d=dataset.data[i];null===d||void 0===d||isNaN(d)||metaData[i].transition(easingDecimal).draw()}Chart.canvasHelpers.unclipArea(me.chart.chart.ctx)},setHoverStyle:function(rectangle){var dataset=this.chart.data.datasets[rectangle._datasetIndex],index=rectangle._index,custom=rectangle.custom||{},model=rectangle._model;model.backgroundColor=custom.hoverBackgroundColor?custom.hoverBackgroundColor:helpers.getValueAtIndexOrDefault(dataset.hoverBackgroundColor,index,helpers.getHoverColor(model.backgroundColor)),model.borderColor=custom.hoverBorderColor?custom.hoverBorderColor:helpers.getValueAtIndexOrDefault(dataset.hoverBorderColor,index,helpers.getHoverColor(model.borderColor)),model.borderWidth=custom.hoverBorderWidth?custom.hoverBorderWidth:helpers.getValueAtIndexOrDefault(dataset.hoverBorderWidth,index,model.borderWidth)},removeHoverStyle:function(rectangle){var dataset=this.chart.data.datasets[rectangle._datasetIndex],index=rectangle._index,custom=rectangle.custom||{},model=rectangle._model,rectangleElementOptions=this.chart.options.elements.rectangle;model.backgroundColor=custom.backgroundColor?custom.backgroundColor:helpers.getValueAtIndexOrDefault(dataset.backgroundColor,index,rectangleElementOptions.backgroundColor),model.borderColor=custom.borderColor?custom.borderColor:helpers.getValueAtIndexOrDefault(dataset.borderColor,index,rectangleElementOptions.borderColor),model.borderWidth=custom.borderWidth?custom.borderWidth:helpers.getValueAtIndexOrDefault(dataset.borderWidth,index,rectangleElementOptions.borderWidth)}}),Chart.defaults.horizontalBar={hover:{mode:"label"},scales:{xAxes:[{type:"linear",position:"bottom"}],yAxes:[{position:"left",type:"category",categoryPercentage:.8,barPercentage:.9,gridLines:{offsetGridLines:!0}}]},elements:{rectangle:{borderSkipped:"left"}},tooltips:{callbacks:{title:function(tooltipItems,data){var title="";return tooltipItems.length>0&&(tooltipItems[0].yLabel?title=tooltipItems[0].yLabel:data.labels.length>0&&tooltipItems[0].index<data.labels.length&&(title=data.labels[tooltipItems[0].index])),title},label:function(tooltipItem,data){return(data.datasets[tooltipItem.datasetIndex].label||"")+": "+tooltipItem.xLabel}}}},Chart.controllers.horizontalBar=Chart.controllers.bar.extend({getStackCount:function(){var me=this,meta=me.getMeta(),xScale=me.getScaleForId(meta.xAxisID),stacks=[];return helpers.each(me.chart.data.datasets,function(dataset,datasetIndex){var dsMeta=me.chart.getDatasetMeta(datasetIndex);dsMeta.bar&&me.chart.isDatasetVisible(datasetIndex)&&(!1===xScale.options.stacked||!0===xScale.options.stacked&&-1===stacks.indexOf(dsMeta.stack)||void 0===xScale.options.stacked&&(void 0===dsMeta.stack||-1===stacks.indexOf(dsMeta.stack)))&&stacks.push(dsMeta.stack)},me),stacks.length},updateElement:function(rectangle,index,reset){var me=this,meta=me.getMeta(),xScale=me.getScaleForId(meta.xAxisID),yScale=me.getScaleForId(meta.yAxisID),scaleBase=xScale.getBasePixel(),custom=rectangle.custom||{},dataset=me.getDataset(),rectangleElementOptions=me.chart.options.elements.rectangle;rectangle._xScale=xScale,rectangle._yScale=yScale,rectangle._datasetIndex=me.index,rectangle._index=index;var ruler=me.getRuler(index);rectangle._model={x:reset?scaleBase:me.calculateBarX(index,me.index),y:me.calculateBarY(index,me.index,ruler),label:me.chart.data.labels[index],datasetLabel:dataset.label,horizontal:!0,base:reset?scaleBase:me.calculateBarBase(me.index,index),height:me.calculateBarHeight(ruler),backgroundColor:custom.backgroundColor?custom.backgroundColor:helpers.getValueAtIndexOrDefault(dataset.backgroundColor,index,rectangleElementOptions.backgroundColor),borderSkipped:custom.borderSkipped?custom.borderSkipped:rectangleElementOptions.borderSkipped,borderColor:custom.borderColor?custom.borderColor:helpers.getValueAtIndexOrDefault(dataset.borderColor,index,rectangleElementOptions.borderColor),borderWidth:custom.borderWidth?custom.borderWidth:helpers.getValueAtIndexOrDefault(dataset.borderWidth,index,rectangleElementOptions.borderWidth)},rectangle.pivot()},calculateBarBase:function(datasetIndex,index){var me=this,meta=me.getMeta(),xScale=me.getScaleForId(meta.xAxisID),base=xScale.getBaseValue(),originalBase=base;if(xScale.options.stacked||void 0===xScale.options.stacked&&void 0!==meta.stack){for(var chart=me.chart,datasets=chart.data.datasets,value=Number(datasets[datasetIndex].data[index]),i=0;i<datasetIndex;i++){var currentDs=datasets[i],currentDsMeta=chart.getDatasetMeta(i);if(currentDsMeta.bar&&currentDsMeta.xAxisID===xScale.id&&chart.isDatasetVisible(i)&&meta.stack===currentDsMeta.stack){var currentVal=Number(currentDs.data[index]);base+=value<0?Math.min(currentVal,originalBase):Math.max(currentVal,originalBase)}}return xScale.getPixelForValue(base)}return xScale.getBasePixel()},getRuler:function(){var me=this,meta=me.getMeta(),yScale=me.getScaleForId(meta.yAxisID),stackCount=me.getStackCount(),tickHeight=yScale.height/yScale.ticks.length,categoryHeight=tickHeight*yScale.options.categoryPercentage,categorySpacing=(tickHeight-tickHeight*yScale.options.categoryPercentage)/2,fullBarHeight=categoryHeight/stackCount;return{stackCount:stackCount,tickHeight:tickHeight,categoryHeight:categoryHeight,categorySpacing:categorySpacing,fullBarHeight:fullBarHeight,barHeight:fullBarHeight*yScale.options.barPercentage,barSpacing:fullBarHeight-fullBarHeight*yScale.options.barPercentage}},calculateBarHeight:function(ruler){var me=this,meta=me.getMeta(),yScale=me.getScaleForId(meta.yAxisID);return yScale.options.barThickness?yScale.options.barThickness:ruler.barHeight},getStackIndex:function(datasetIndex){var dsMeta,j,me=this,meta=me.chart.getDatasetMeta(datasetIndex),xScale=me.getScaleForId(meta.xAxisID),stacks=[meta.stack];for(j=0;j<datasetIndex;++j)dsMeta=this.chart.getDatasetMeta(j),dsMeta.bar&&this.chart.isDatasetVisible(j)&&(!1===xScale.options.stacked||!0===xScale.options.stacked&&-1===stacks.indexOf(dsMeta.stack)||void 0===xScale.options.stacked&&(void 0===dsMeta.stack||-1===stacks.indexOf(dsMeta.stack)))&&stacks.push(dsMeta.stack);return stacks.length-1},calculateBarX:function(index,datasetIndex){var me=this,meta=me.getMeta(),xScale=me.getScaleForId(meta.xAxisID),value=Number(me.getDataset().data[index]);if(xScale.options.stacked||void 0===xScale.options.stacked&&void 0!==meta.stack){for(var base=xScale.getBaseValue(),sumPos=base,sumNeg=base,i=0;i<datasetIndex;i++){var ds=me.chart.data.datasets[i],dsMeta=me.chart.getDatasetMeta(i);if(dsMeta.bar&&dsMeta.xAxisID===xScale.id&&me.chart.isDatasetVisible(i)&&meta.stack===dsMeta.stack){var stackedVal=Number(ds.data[index]);stackedVal<0?sumNeg+=stackedVal||0:sumPos+=stackedVal||0}}return value<0?xScale.getPixelForValue(sumNeg+value):xScale.getPixelForValue(sumPos+value)}return xScale.getPixelForValue(value)},calculateBarY:function(index,datasetIndex,ruler){var me=this,meta=me.getMeta(),yScale=me.getScaleForId(meta.yAxisID),stackIndex=me.getStackIndex(datasetIndex),topTick=yScale.getPixelForValue(null,index,datasetIndex,me.chart.isCombo);return(topTick-=me.chart.isCombo?ruler.tickHeight/2:0)+ruler.barHeight/2+ruler.categorySpacing+ruler.barHeight*stackIndex+ruler.barSpacing/2+ruler.barSpacing*stackIndex}})}},{}],16:[function(require,module,exports){"use strict";module.exports=function(Chart){var helpers=Chart.helpers;Chart.defaults.bubble={hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-0"}],yAxes:[{type:"linear",position:"left",id:"y-axis-0"}]},tooltips:{callbacks:{title:function(){return""},label:function(tooltipItem,data){var datasetLabel=data.datasets[tooltipItem.datasetIndex].label||"",dataPoint=data.datasets[tooltipItem.datasetIndex].data[tooltipItem.index];return datasetLabel+": ("+tooltipItem.xLabel+", "+tooltipItem.yLabel+", "+dataPoint.r+")"}}}},Chart.controllers.bubble=Chart.DatasetController.extend({dataElementType:Chart.elements.Point,update:function(reset){var me=this,meta=me.getMeta(),points=meta.data;helpers.each(points,function(point,index){me.updateElement(point,index,reset)})},updateElement:function(point,index,reset){var me=this,meta=me.getMeta(),xScale=me.getScaleForId(meta.xAxisID),yScale=me.getScaleForId(meta.yAxisID),custom=point.custom||{},dataset=me.getDataset(),data=dataset.data[index],pointElementOptions=me.chart.options.elements.point,dsIndex=me.index;helpers.extend(point,{_xScale:xScale,_yScale:yScale,_datasetIndex:dsIndex,_index:index,_model:{x:reset?xScale.getPixelForDecimal(.5):xScale.getPixelForValue("object"==typeof data?data:NaN,index,dsIndex,me.chart.isCombo),y:reset?yScale.getBasePixel():yScale.getPixelForValue(data,index,dsIndex),radius:reset?0:custom.radius?custom.radius:me.getRadius(data),hitRadius:custom.hitRadius?custom.hitRadius:helpers.getValueAtIndexOrDefault(dataset.hitRadius,index,pointElementOptions.hitRadius)}}),Chart.DatasetController.prototype.removeHoverStyle.call(me,point,pointElementOptions);var model=point._model;model.skip=custom.skip?custom.skip:isNaN(model.x)||isNaN(model.y),point.pivot()},getRadius:function(value){return value.r||this.chart.options.elements.point.radius},setHoverStyle:function(point){var me=this;Chart.DatasetController.prototype.setHoverStyle.call(me,point);var dataset=me.chart.data.datasets[point._datasetIndex],index=point._index,custom=point.custom||{};point._model.radius=custom.hoverRadius?custom.hoverRadius:helpers.getValueAtIndexOrDefault(dataset.hoverRadius,index,me.chart.options.elements.point.hoverRadius)+me.getRadius(dataset.data[index])},removeHoverStyle:function(point){var me=this;Chart.DatasetController.prototype.removeHoverStyle.call(me,point,me.chart.options.elements.point);var dataVal=me.chart.data.datasets[point._datasetIndex].data[point._index],custom=point.custom||{};point._model.radius=custom.radius?custom.radius:me.getRadius(dataVal)}})}},{}],17:[function(require,module,exports){"use strict";module.exports=function(Chart){var helpers=Chart.helpers,defaults=Chart.defaults;defaults.doughnut={animation:{animateRotate:!0,animateScale:!1},aspectRatio:1,hover:{mode:"single"},legendCallback:function(chart){var text=[];text.push('<ul class="'+chart.id+'-legend">');var data=chart.data,datasets=data.datasets,labels=data.labels
;if(datasets.length)for(var i=0;i<datasets[0].data.length;++i)text.push('<li><span style="background-color:'+datasets[0].backgroundColor[i]+'"></span>'),labels[i]&&text.push(labels[i]),text.push("</li>");return text.push("</ul>"),text.join("")},legend:{labels:{generateLabels:function(chart){var data=chart.data;return data.labels.length&&data.datasets.length?data.labels.map(function(label,i){var meta=chart.getDatasetMeta(0),ds=data.datasets[0],arc=meta.data[i],custom=arc&&arc.custom||{},getValueAtIndexOrDefault=helpers.getValueAtIndexOrDefault,arcOpts=chart.options.elements.arc;return{text:label,fillStyle:custom.backgroundColor?custom.backgroundColor:getValueAtIndexOrDefault(ds.backgroundColor,i,arcOpts.backgroundColor),strokeStyle:custom.borderColor?custom.borderColor:getValueAtIndexOrDefault(ds.borderColor,i,arcOpts.borderColor),lineWidth:custom.borderWidth?custom.borderWidth:getValueAtIndexOrDefault(ds.borderWidth,i,arcOpts.borderWidth),hidden:isNaN(ds.data[i])||meta.data[i].hidden,index:i}}):[]}},onClick:function(e,legendItem){var i,ilen,meta,index=legendItem.index,chart=this.chart;for(i=0,ilen=(chart.data.datasets||[]).length;i<ilen;++i)meta=chart.getDatasetMeta(i),meta.data[index]&&(meta.data[index].hidden=!meta.data[index].hidden);chart.update()}},cutoutPercentage:50,rotation:-.5*Math.PI,circumference:2*Math.PI,tooltips:{callbacks:{title:function(){return""},label:function(tooltipItem,data){var dataLabel=data.labels[tooltipItem.index],value=": "+data.datasets[tooltipItem.datasetIndex].data[tooltipItem.index];return helpers.isArray(dataLabel)?(dataLabel=dataLabel.slice(),dataLabel[0]+=value):dataLabel+=value,dataLabel}}}},defaults.pie=helpers.clone(defaults.doughnut),helpers.extend(defaults.pie,{cutoutPercentage:0}),Chart.controllers.doughnut=Chart.controllers.pie=Chart.DatasetController.extend({dataElementType:Chart.elements.Arc,linkScales:helpers.noop,getRingIndex:function(datasetIndex){for(var ringIndex=0,j=0;j<datasetIndex;++j)this.chart.isDatasetVisible(j)&&++ringIndex;return ringIndex},update:function(reset){var me=this,chart=me.chart,chartArea=chart.chartArea,opts=chart.options,arcOpts=opts.elements.arc,availableWidth=chartArea.right-chartArea.left-arcOpts.borderWidth,availableHeight=chartArea.bottom-chartArea.top-arcOpts.borderWidth,minSize=Math.min(availableWidth,availableHeight),offset={x:0,y:0},meta=me.getMeta(),cutoutPercentage=opts.cutoutPercentage,circumference=opts.circumference;if(circumference<2*Math.PI){var startAngle=opts.rotation%(2*Math.PI);startAngle+=2*Math.PI*(startAngle>=Math.PI?-1:startAngle<-Math.PI?1:0);var endAngle=startAngle+circumference,start={x:Math.cos(startAngle),y:Math.sin(startAngle)},end={x:Math.cos(endAngle),y:Math.sin(endAngle)},contains0=startAngle<=0&&0<=endAngle||startAngle<=2*Math.PI&&2*Math.PI<=endAngle,contains90=startAngle<=.5*Math.PI&&.5*Math.PI<=endAngle||startAngle<=2.5*Math.PI&&2.5*Math.PI<=endAngle,contains180=startAngle<=-Math.PI&&-Math.PI<=endAngle||startAngle<=Math.PI&&Math.PI<=endAngle,contains270=startAngle<=.5*-Math.PI&&.5*-Math.PI<=endAngle||startAngle<=1.5*Math.PI&&1.5*Math.PI<=endAngle,cutout=cutoutPercentage/100,min={x:contains180?-1:Math.min(start.x*(start.x<0?1:cutout),end.x*(end.x<0?1:cutout)),y:contains270?-1:Math.min(start.y*(start.y<0?1:cutout),end.y*(end.y<0?1:cutout))},max={x:contains0?1:Math.max(start.x*(start.x>0?1:cutout),end.x*(end.x>0?1:cutout)),y:contains90?1:Math.max(start.y*(start.y>0?1:cutout),end.y*(end.y>0?1:cutout))},size={width:.5*(max.x-min.x),height:.5*(max.y-min.y)};minSize=Math.min(availableWidth/size.width,availableHeight/size.height),offset={x:-.5*(max.x+min.x),y:-.5*(max.y+min.y)}}chart.borderWidth=me.getMaxBorderWidth(meta.data),chart.outerRadius=Math.max((minSize-chart.borderWidth)/2,0),chart.innerRadius=Math.max(cutoutPercentage?chart.outerRadius/100*cutoutPercentage:0,0),chart.radiusLength=(chart.outerRadius-chart.innerRadius)/chart.getVisibleDatasetCount(),chart.offsetX=offset.x*chart.outerRadius,chart.offsetY=offset.y*chart.outerRadius,meta.total=me.calculateTotal(),me.outerRadius=chart.outerRadius-chart.radiusLength*me.getRingIndex(me.index),me.innerRadius=Math.max(me.outerRadius-chart.radiusLength,0),helpers.each(meta.data,function(arc,index){me.updateElement(arc,index,reset)})},updateElement:function(arc,index,reset){var me=this,chart=me.chart,chartArea=chart.chartArea,opts=chart.options,animationOpts=opts.animation,centerX=(chartArea.left+chartArea.right)/2,centerY=(chartArea.top+chartArea.bottom)/2,startAngle=opts.rotation,endAngle=opts.rotation,dataset=me.getDataset(),circumference=reset&&animationOpts.animateRotate?0:arc.hidden?0:me.calculateCircumference(dataset.data[index])*(opts.circumference/(2*Math.PI)),innerRadius=reset&&animationOpts.animateScale?0:me.innerRadius,outerRadius=reset&&animationOpts.animateScale?0:me.outerRadius,valueAtIndexOrDefault=helpers.getValueAtIndexOrDefault;helpers.extend(arc,{_datasetIndex:me.index,_index:index,_model:{x:centerX+chart.offsetX,y:centerY+chart.offsetY,startAngle:startAngle,endAngle:endAngle,circumference:circumference,outerRadius:outerRadius,innerRadius:innerRadius,label:valueAtIndexOrDefault(dataset.label,index,chart.data.labels[index])}});var model=arc._model;this.removeHoverStyle(arc),reset&&animationOpts.animateRotate||(model.startAngle=0===index?opts.rotation:me.getMeta().data[index-1]._model.endAngle,model.endAngle=model.startAngle+model.circumference),arc.pivot()},removeHoverStyle:function(arc){Chart.DatasetController.prototype.removeHoverStyle.call(this,arc,this.chart.options.elements.arc)},calculateTotal:function(){var value,dataset=this.getDataset(),meta=this.getMeta(),total=0;return helpers.each(meta.data,function(element,index){value=dataset.data[index],isNaN(value)||element.hidden||(total+=Math.abs(value))}),total},calculateCircumference:function(value){var total=this.getMeta().total;return total>0&&!isNaN(value)?2*Math.PI*(value/total):0},getMaxBorderWidth:function(elements){for(var borderWidth,hoverWidth,max=0,index=this.index,length=elements.length,i=0;i<length;i++)borderWidth=elements[i]._model?elements[i]._model.borderWidth:0,hoverWidth=elements[i]._chart?elements[i]._chart.config.data.datasets[index].hoverBorderWidth:0,max=borderWidth>max?borderWidth:max,max=hoverWidth>max?hoverWidth:max;return max}})}},{}],18:[function(require,module,exports){"use strict";module.exports=function(Chart){function lineEnabled(dataset,options){return helpers.getValueOrDefault(dataset.showLine,options.showLines)}var helpers=Chart.helpers;Chart.defaults.line={showLines:!0,spanGaps:!1,hover:{mode:"label"},scales:{xAxes:[{type:"category",id:"x-axis-0"}],yAxes:[{type:"linear",id:"y-axis-0"}]}},Chart.controllers.line=Chart.DatasetController.extend({datasetElementType:Chart.elements.Line,dataElementType:Chart.elements.Point,update:function(reset){var i,ilen,custom,me=this,meta=me.getMeta(),line=meta.dataset,points=meta.data||[],options=me.chart.options,lineElementOptions=options.elements.line,scale=me.getScaleForId(meta.yAxisID),dataset=me.getDataset(),showLine=lineEnabled(dataset,options);for(showLine&&(custom=line.custom||{},void 0!==dataset.tension&&void 0===dataset.lineTension&&(dataset.lineTension=dataset.tension),line._scale=scale,line._datasetIndex=me.index,line._children=points,line._model={spanGaps:dataset.spanGaps?dataset.spanGaps:options.spanGaps,tension:custom.tension?custom.tension:helpers.getValueOrDefault(dataset.lineTension,lineElementOptions.tension),backgroundColor:custom.backgroundColor?custom.backgroundColor:dataset.backgroundColor||lineElementOptions.backgroundColor,borderWidth:custom.borderWidth?custom.borderWidth:dataset.borderWidth||lineElementOptions.borderWidth,borderColor:custom.borderColor?custom.borderColor:dataset.borderColor||lineElementOptions.borderColor,borderCapStyle:custom.borderCapStyle?custom.borderCapStyle:dataset.borderCapStyle||lineElementOptions.borderCapStyle,borderDash:custom.borderDash?custom.borderDash:dataset.borderDash||lineElementOptions.borderDash,borderDashOffset:custom.borderDashOffset?custom.borderDashOffset:dataset.borderDashOffset||lineElementOptions.borderDashOffset,borderJoinStyle:custom.borderJoinStyle?custom.borderJoinStyle:dataset.borderJoinStyle||lineElementOptions.borderJoinStyle,fill:custom.fill?custom.fill:void 0!==dataset.fill?dataset.fill:lineElementOptions.fill,steppedLine:custom.steppedLine?custom.steppedLine:helpers.getValueOrDefault(dataset.steppedLine,lineElementOptions.stepped),cubicInterpolationMode:custom.cubicInterpolationMode?custom.cubicInterpolationMode:helpers.getValueOrDefault(dataset.cubicInterpolationMode,lineElementOptions.cubicInterpolationMode),scaleTop:scale.top,scaleBottom:scale.bottom,scaleZero:scale.getBasePixel()},line.pivot()),i=0,ilen=points.length;i<ilen;++i)me.updateElement(points[i],i,reset);for(showLine&&0!==line._model.tension&&me.updateBezierControlPoints(),i=0,ilen=points.length;i<ilen;++i)points[i].pivot()},getPointBackgroundColor:function(point,index){var backgroundColor=this.chart.options.elements.point.backgroundColor,dataset=this.getDataset(),custom=point.custom||{};return custom.backgroundColor?backgroundColor=custom.backgroundColor:dataset.pointBackgroundColor?backgroundColor=helpers.getValueAtIndexOrDefault(dataset.pointBackgroundColor,index,backgroundColor):dataset.backgroundColor&&(backgroundColor=dataset.backgroundColor),backgroundColor},getPointBorderColor:function(point,index){var borderColor=this.chart.options.elements.point.borderColor,dataset=this.getDataset(),custom=point.custom||{};return custom.borderColor?borderColor=custom.borderColor:dataset.pointBorderColor?borderColor=helpers.getValueAtIndexOrDefault(dataset.pointBorderColor,index,borderColor):dataset.borderColor&&(borderColor=dataset.borderColor),borderColor},getPointBorderWidth:function(point,index){var borderWidth=this.chart.options.elements.point.borderWidth,dataset=this.getDataset(),custom=point.custom||{};return isNaN(custom.borderWidth)?isNaN(dataset.pointBorderWidth)?isNaN(dataset.borderWidth)||(borderWidth=dataset.borderWidth):borderWidth=helpers.getValueAtIndexOrDefault(dataset.pointBorderWidth,index,borderWidth):borderWidth=custom.borderWidth,borderWidth},updateElement:function(point,index,reset){var x,y,me=this,meta=me.getMeta(),custom=point.custom||{},dataset=me.getDataset(),datasetIndex=me.index,value=dataset.data[index],yScale=me.getScaleForId(meta.yAxisID),xScale=me.getScaleForId(meta.xAxisID),pointOptions=me.chart.options.elements.point,labels=me.chart.data.labels||[],includeOffset=1===labels.length||1===dataset.data.length||me.chart.isCombo;void 0!==dataset.radius&&void 0===dataset.pointRadius&&(dataset.pointRadius=dataset.radius),void 0!==dataset.hitRadius&&void 0===dataset.pointHitRadius&&(dataset.pointHitRadius=dataset.hitRadius),x=xScale.getPixelForValue("object"==typeof value?value:NaN,index,datasetIndex,includeOffset),y=reset?yScale.getBasePixel():me.calculatePointY(value,index,datasetIndex),point._xScale=xScale,point._yScale=yScale,point._datasetIndex=datasetIndex,point._index=index,point._model={x:x,y:y,skip:custom.skip||isNaN(x)||isNaN(y),radius:custom.radius||helpers.getValueAtIndexOrDefault(dataset.pointRadius,index,pointOptions.radius),pointStyle:custom.pointStyle||helpers.getValueAtIndexOrDefault(dataset.pointStyle,index,pointOptions.pointStyle),backgroundColor:me.getPointBackgroundColor(point,index),borderColor:me.getPointBorderColor(point,index),borderWidth:me.getPointBorderWidth(point,index),tension:meta.dataset._model?meta.dataset._model.tension:0,steppedLine:!!meta.dataset._model&&meta.dataset._model.steppedLine,hitRadius:custom.hitRadius||helpers.getValueAtIndexOrDefault(dataset.pointHitRadius,index,pointOptions.hitRadius)}},calculatePointY:function(value,index,datasetIndex){var i,ds,dsMeta,me=this,chart=me.chart,meta=me.getMeta(),yScale=me.getScaleForId(meta.yAxisID),sumPos=0,sumNeg=0;if(yScale.options.stacked){for(i=0;i<datasetIndex;i++)if(ds=chart.data.datasets[i],dsMeta=chart.getDatasetMeta(i),"line"===dsMeta.type&&dsMeta.yAxisID===yScale.id&&chart.isDatasetVisible(i)){var stackedRightValue=Number(yScale.getRightValue(ds.data[index]));stackedRightValue<0?sumNeg+=stackedRightValue||0:sumPos+=stackedRightValue||0}var rightValue=Number(yScale.getRightValue(value));return rightValue<0?yScale.getPixelForValue(sumNeg+rightValue):yScale.getPixelForValue(sumPos+rightValue)}return yScale.getPixelForValue(value)},updateBezierControlPoints:function(){function capControlPoint(pt,min,max){return Math.max(Math.min(pt,max),min)}var i,ilen,point,model,controlPoints,me=this,meta=me.getMeta(),area=me.chart.chartArea,points=meta.data||[];if(meta.dataset._model.spanGaps&&(points=points.filter(function(pt){return!pt._model.skip})),"monotone"===meta.dataset._model.cubicInterpolationMode)helpers.splineCurveMonotone(points);else for(i=0,ilen=points.length;i<ilen;++i)point=points[i],model=point._model,controlPoints=helpers.splineCurve(helpers.previousItem(points,i)._model,model,helpers.nextItem(points,i)._model,meta.dataset._model.tension),model.controlPointPreviousX=controlPoints.previous.x,model.controlPointPreviousY=controlPoints.previous.y,model.controlPointNextX=controlPoints.next.x,model.controlPointNextY=controlPoints.next.y;if(me.chart.options.elements.line.capBezierPoints)for(i=0,ilen=points.length;i<ilen;++i)model=points[i]._model,model.controlPointPreviousX=capControlPoint(model.controlPointPreviousX,area.left,area.right),model.controlPointPreviousY=capControlPoint(model.controlPointPreviousY,area.top,area.bottom),model.controlPointNextX=capControlPoint(model.controlPointNextX,area.left,area.right),model.controlPointNextY=capControlPoint(model.controlPointNextY,area.top,area.bottom)},draw:function(ease){var i,ilen,me=this,meta=me.getMeta(),points=meta.data||[],easingDecimal=ease||1;for(i=0,ilen=points.length;i<ilen;++i)points[i].transition(easingDecimal);for(Chart.canvasHelpers.clipArea(me.chart.chart.ctx,me.chart.chartArea),lineEnabled(me.getDataset(),me.chart.options)&&meta.dataset.transition(easingDecimal).draw(),Chart.canvasHelpers.unclipArea(me.chart.chart.ctx),i=0,ilen=points.length;i<ilen;++i)points[i].draw(me.chart.chartArea)},setHoverStyle:function(point){var dataset=this.chart.data.datasets[point._datasetIndex],index=point._index,custom=point.custom||{},model=point._model;model.radius=custom.hoverRadius||helpers.getValueAtIndexOrDefault(dataset.pointHoverRadius,index,this.chart.options.elements.point.hoverRadius),model.backgroundColor=custom.hoverBackgroundColor||helpers.getValueAtIndexOrDefault(dataset.pointHoverBackgroundColor,index,helpers.getHoverColor(model.backgroundColor)),model.borderColor=custom.hoverBorderColor||helpers.getValueAtIndexOrDefault(dataset.pointHoverBorderColor,index,helpers.getHoverColor(model.borderColor)),model.borderWidth=custom.hoverBorderWidth||helpers.getValueAtIndexOrDefault(dataset.pointHoverBorderWidth,index,model.borderWidth)},removeHoverStyle:function(point){var me=this,dataset=me.chart.data.datasets[point._datasetIndex],index=point._index,custom=point.custom||{},model=point._model;void 0!==dataset.radius&&void 0===dataset.pointRadius&&(dataset.pointRadius=dataset.radius),model.radius=custom.radius||helpers.getValueAtIndexOrDefault(dataset.pointRadius,index,me.chart.options.elements.point.radius),model.backgroundColor=me.getPointBackgroundColor(point,index),model.borderColor=me.getPointBorderColor(point,index),model.borderWidth=me.getPointBorderWidth(point,index)}})}},{}],19:[function(require,module,exports){"use strict";module.exports=function(Chart){var helpers=Chart.helpers;Chart.defaults.polarArea={scale:{type:"radialLinear",lineArc:!0,ticks:{beginAtZero:!0}},animation:{animateRotate:!0,animateScale:!0},startAngle:-.5*Math.PI,aspectRatio:1,legendCallback:function(chart){var text=[];text.push('<ul class="'+chart.id+'-legend">');var data=chart.data,datasets=data.datasets,labels=data.labels;if(datasets.length)for(var i=0;i<datasets[0].data.length;++i)text.push('<li><span style="background-color:'+datasets[0].backgroundColor[i]+'"></span>'),labels[i]&&text.push(labels[i]),text.push("</li>");return text.push("</ul>"),text.join("")},legend:{labels:{generateLabels:function(chart){var data=chart.data;return data.labels.length&&data.datasets.length?data.labels.map(function(label,i){var meta=chart.getDatasetMeta(0),ds=data.datasets[0],arc=meta.data[i],custom=arc.custom||{},getValueAtIndexOrDefault=helpers.getValueAtIndexOrDefault,arcOpts=chart.options.elements.arc;return{text:label,fillStyle:custom.backgroundColor?custom.backgroundColor:getValueAtIndexOrDefault(ds.backgroundColor,i,arcOpts.backgroundColor),strokeStyle:custom.borderColor?custom.borderColor:getValueAtIndexOrDefault(ds.borderColor,i,arcOpts.borderColor),lineWidth:custom.borderWidth?custom.borderWidth:getValueAtIndexOrDefault(ds.borderWidth,i,arcOpts.borderWidth),hidden:isNaN(ds.data[i])||meta.data[i].hidden,index:i}}):[]}},onClick:function(e,legendItem){var i,ilen,meta,index=legendItem.index,chart=this.chart;for(i=0,ilen=(chart.data.datasets||[]).length;i<ilen;++i)meta=chart.getDatasetMeta(i),meta.data[index].hidden=!meta.data[index].hidden;chart.update()}},tooltips:{callbacks:{title:function(){return""},label:function(tooltipItem,data){return data.labels[tooltipItem.index]+": "+tooltipItem.yLabel}}}},Chart.controllers.polarArea=Chart.DatasetController.extend({dataElementType:Chart.elements.Arc,linkScales:helpers.noop,update:function(reset){var me=this,chart=me.chart,chartArea=chart.chartArea,meta=me.getMeta(),opts=chart.options,arcOpts=opts.elements.arc,minSize=Math.min(chartArea.right-chartArea.left,chartArea.bottom-chartArea.top);chart.outerRadius=Math.max((minSize-arcOpts.borderWidth/2)/2,0),chart.innerRadius=Math.max(opts.cutoutPercentage?chart.outerRadius/100*opts.cutoutPercentage:1,0),chart.radiusLength=(chart.outerRadius-chart.innerRadius)/chart.getVisibleDatasetCount(),me.outerRadius=chart.outerRadius-chart.radiusLength*me.index,me.innerRadius=me.outerRadius-chart.radiusLength,meta.count=me.countVisibleElements(),helpers.each(meta.data,function(arc,index){me.updateElement(arc,index,reset)})},updateElement:function(arc,index,reset){for(var me=this,chart=me.chart,dataset=me.getDataset(),opts=chart.options,animationOpts=opts.animation,scale=chart.scale,getValueAtIndexOrDefault=helpers.getValueAtIndexOrDefault,labels=chart.data.labels,circumference=me.calculateCircumference(dataset.data[index]),centerX=scale.xCenter,centerY=scale.yCenter,visibleCount=0,meta=me.getMeta(),i=0;i<index;++i)isNaN(dataset.data[i])||meta.data[i].hidden||++visibleCount;var datasetStartAngle=opts.startAngle,distance=arc.hidden?0:scale.getDistanceFromCenterForValue(dataset.data[index]),startAngle=datasetStartAngle+circumference*visibleCount,endAngle=startAngle+(arc.hidden?0:circumference),resetRadius=animationOpts.animateScale?0:scale.getDistanceFromCenterForValue(dataset.data[index]);helpers.extend(arc,{_datasetIndex:me.index,_index:index,_scale:scale,_model:{x:centerX,y:centerY,innerRadius:0,outerRadius:reset?resetRadius:distance,startAngle:reset&&animationOpts.animateRotate?datasetStartAngle:startAngle,endAngle:reset&&animationOpts.animateRotate?datasetStartAngle:endAngle,label:getValueAtIndexOrDefault(labels,index,labels[index])}}),me.removeHoverStyle(arc),arc.pivot()},removeHoverStyle:function(arc){Chart.DatasetController.prototype.removeHoverStyle.call(this,arc,this.chart.options.elements.arc)},countVisibleElements:function(){var dataset=this.getDataset(),meta=this.getMeta(),count=0;return helpers.each(meta.data,function(element,index){isNaN(dataset.data[index])||element.hidden||count++}),count},calculateCircumference:function(value){var count=this.getMeta().count;return count>0&&!isNaN(value)?2*Math.PI/count:0}})}},{}],20:[function(require,module,exports){"use strict";module.exports=function(Chart){var helpers=Chart.helpers;Chart.defaults.radar={aspectRatio:1,scale:{type:"radialLinear"},elements:{line:{tension:0}}},Chart.controllers.radar=Chart.DatasetController.extend({datasetElementType:Chart.elements.Line,dataElementType:Chart.elements.Point,linkScales:helpers.noop,update:function(reset){var me=this,meta=me.getMeta(),line=meta.dataset,points=meta.data,custom=line.custom||{},dataset=me.getDataset(),lineElementOptions=me.chart.options.elements.line,scale=me.chart.scale;void 0!==dataset.tension&&void 0===dataset.lineTension&&(dataset.lineTension=dataset.tension),helpers.extend(meta.dataset,{_datasetIndex:me.index,_children:points,_loop:!0,_model:{tension:custom.tension?custom.tension:helpers.getValueOrDefault(dataset.lineTension,lineElementOptions.tension),backgroundColor:custom.backgroundColor?custom.backgroundColor:dataset.backgroundColor||lineElementOptions.backgroundColor,borderWidth:custom.borderWidth?custom.borderWidth:dataset.borderWidth||lineElementOptions.borderWidth,borderColor:custom.borderColor?custom.borderColor:dataset.borderColor||lineElementOptions.borderColor,fill:custom.fill?custom.fill:void 0!==dataset.fill?dataset.fill:lineElementOptions.fill,borderCapStyle:custom.borderCapStyle?custom.borderCapStyle:dataset.borderCapStyle||lineElementOptions.borderCapStyle,borderDash:custom.borderDash?custom.borderDash:dataset.borderDash||lineElementOptions.borderDash,borderDashOffset:custom.borderDashOffset?custom.borderDashOffset:dataset.borderDashOffset||lineElementOptions.borderDashOffset,borderJoinStyle:custom.borderJoinStyle?custom.borderJoinStyle:dataset.borderJoinStyle||lineElementOptions.borderJoinStyle,scaleTop:scale.top,scaleBottom:scale.bottom,scaleZero:scale.getBasePosition()}}),meta.dataset.pivot(),helpers.each(points,function(point,index){me.updateElement(point,index,reset)},me),me.updateBezierControlPoints()},updateElement:function(point,index,reset){var me=this,custom=point.custom||{},dataset=me.getDataset(),scale=me.chart.scale,pointElementOptions=me.chart.options.elements.point,pointPosition=scale.getPointPositionForValue(index,dataset.data[index]);helpers.extend(point,{_datasetIndex:me.index,_index:index,_scale:scale,_model:{x:reset?scale.xCenter:pointPosition.x,y:reset?scale.yCenter:pointPosition.y,tension:custom.tension?custom.tension:helpers.getValueOrDefault(dataset.lineTension,me.chart.options.elements.line.tension),radius:custom.radius?custom.radius:helpers.getValueAtIndexOrDefault(dataset.pointRadius,index,pointElementOptions.radius),backgroundColor:custom.backgroundColor?custom.backgroundColor:helpers.getValueAtIndexOrDefault(dataset.pointBackgroundColor,index,pointElementOptions.backgroundColor),borderColor:custom.borderColor?custom.borderColor:helpers.getValueAtIndexOrDefault(dataset.pointBorderColor,index,pointElementOptions.borderColor),borderWidth:custom.borderWidth?custom.borderWidth:helpers.getValueAtIndexOrDefault(dataset.pointBorderWidth,index,pointElementOptions.borderWidth),pointStyle:custom.pointStyle?custom.pointStyle:helpers.getValueAtIndexOrDefault(dataset.pointStyle,index,pointElementOptions.pointStyle),hitRadius:custom.hitRadius?custom.hitRadius:helpers.getValueAtIndexOrDefault(dataset.hitRadius,index,pointElementOptions.hitRadius)}}),point._model.skip=custom.skip?custom.skip:isNaN(point._model.x)||isNaN(point._model.y)},updateBezierControlPoints:function(){var chartArea=this.chart.chartArea,meta=this.getMeta();helpers.each(meta.data,function(point,index){var model=point._model,controlPoints=helpers.splineCurve(helpers.previousItem(meta.data,index,!0)._model,model,helpers.nextItem(meta.data,index,!0)._model,model.tension);model.controlPointPreviousX=Math.max(Math.min(controlPoints.previous.x,chartArea.right),chartArea.left),model.controlPointPreviousY=Math.max(Math.min(controlPoints.previous.y,chartArea.bottom),chartArea.top),model.controlPointNextX=Math.max(Math.min(controlPoints.next.x,chartArea.right),chartArea.left),model.controlPointNextY=Math.max(Math.min(controlPoints.next.y,chartArea.bottom),chartArea.top),point.pivot()})},draw:function(ease){var meta=this.getMeta(),easingDecimal=ease||1;helpers.each(meta.data,function(point){point.transition(easingDecimal)}),meta.dataset.transition(easingDecimal).draw(),helpers.each(meta.data,function(point){point.draw()})},setHoverStyle:function(point){var dataset=this.chart.data.datasets[point._datasetIndex],custom=point.custom||{},index=point._index,model=point._model;model.radius=custom.hoverRadius?custom.hoverRadius:helpers.getValueAtIndexOrDefault(dataset.pointHoverRadius,index,this.chart.options.elements.point.hoverRadius),model.backgroundColor=custom.hoverBackgroundColor?custom.hoverBackgroundColor:helpers.getValueAtIndexOrDefault(dataset.pointHoverBackgroundColor,index,helpers.getHoverColor(model.backgroundColor)),model.borderColor=custom.hoverBorderColor?custom.hoverBorderColor:helpers.getValueAtIndexOrDefault(dataset.pointHoverBorderColor,index,helpers.getHoverColor(model.borderColor)),model.borderWidth=custom.hoverBorderWidth?custom.hoverBorderWidth:helpers.getValueAtIndexOrDefault(dataset.pointHoverBorderWidth,index,model.borderWidth)},removeHoverStyle:function(point){var dataset=this.chart.data.datasets[point._datasetIndex],custom=point.custom||{},index=point._index,model=point._model,pointElementOptions=this.chart.options.elements.point;model.radius=custom.radius?custom.radius:helpers.getValueAtIndexOrDefault(dataset.radius,index,pointElementOptions.radius),model.backgroundColor=custom.backgroundColor?custom.backgroundColor:helpers.getValueAtIndexOrDefault(dataset.pointBackgroundColor,index,pointElementOptions.backgroundColor),model.borderColor=custom.borderColor?custom.borderColor:helpers.getValueAtIndexOrDefault(dataset.pointBorderColor,index,pointElementOptions.borderColor),model.borderWidth=custom.borderWidth?custom.borderWidth:helpers.getValueAtIndexOrDefault(dataset.pointBorderWidth,index,pointElementOptions.borderWidth)}})}},{}],21:[function(require,module,exports){"use strict";module.exports=function(Chart){var helpers=Chart.helpers;Chart.defaults.global.animation={duration:1e3,easing:"easeOutQuart",onProgress:helpers.noop,onComplete:helpers.noop},Chart.Animation=Chart.Element.extend({currentStep:null,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null}),Chart.animationService={frameDuration:17,animations:[],dropFrames:0,request:null,addAnimation:function(chartInstance,animationObject,duration,lazy){var me=this;lazy||(chartInstance.animating=!0);for(var index=0;index<me.animations.length;++index)if(me.animations[index].chartInstance===chartInstance)return void(me.animations[index].animationObject=animationObject);me.animations.push({chartInstance:chartInstance,animationObject:animationObject}),1===me.animations.length&&me.requestAnimationFrame()},cancelAnimation:function(chartInstance){var index=helpers.findIndex(this.animations,function(animationWrapper){return animationWrapper.chartInstance===chartInstance});-1!==index&&(this.animations.splice(index,1),chartInstance.animating=!1)},requestAnimationFrame:function(){var me=this;null===me.request&&(me.request=helpers.requestAnimFrame.call(window,function(){me.request=null,me.startDigest()}))},startDigest:function(){var me=this,startTime=Date.now(),framesToDrop=0;me.dropFrames>1&&(framesToDrop=Math.floor(me.dropFrames),me.dropFrames=me.dropFrames%1);for(var i=0;i<me.animations.length;)null===me.animations[i].animationObject.currentStep&&(me.animations[i].animationObject.currentStep=0),me.animations[i].animationObject.currentStep+=1+framesToDrop,me.animations[i].animationObject.currentStep>me.animations[i].animationObject.numSteps&&(me.animations[i].animationObject.currentStep=me.animations[i].animationObject.numSteps),me.animations[i].animationObject.render(me.animations[i].chartInstance,me.animations[i].animationObject),me.animations[i].animationObject.onAnimationProgress&&me.animations[i].animationObject.onAnimationProgress.call&&me.animations[i].animationObject.onAnimationProgress.call(me.animations[i].chartInstance,me.animations[i]),me.animations[i].animationObject.currentStep===me.animations[i].animationObject.numSteps?(me.animations[i].animationObject.onAnimationComplete&&me.animations[i].animationObject.onAnimationComplete.call&&me.animations[i].animationObject.onAnimationComplete.call(me.animations[i].chartInstance,me.animations[i]),me.animations[i].chartInstance.animating=!1,me.animations.splice(i,1)):++i;var endTime=Date.now(),dropFrames=(endTime-startTime)/me.frameDuration;me.dropFrames+=dropFrames,me.animations.length>0&&me.requestAnimationFrame()}}}},{}],22:[function(require,module,exports){"use strict";module.exports=function(Chart){var helpers=Chart.canvasHelpers={};helpers.drawPoint=function(ctx,pointStyle,radius,x,y){var type,edgeLength,xOffset,yOffset,height,size;if("object"==typeof pointStyle&&("[object HTMLImageElement]"===(type=pointStyle.toString())||"[object HTMLCanvasElement]"===type))return void ctx.drawImage(pointStyle,x-pointStyle.width/2,y-pointStyle.height/2);if(!(isNaN(radius)||radius<=0)){switch(pointStyle){default:ctx.beginPath(),ctx.arc(x,y,radius,0,2*Math.PI),ctx.closePath(),ctx.fill();break;case"triangle":ctx.beginPath(),edgeLength=3*radius/Math.sqrt(3),height=edgeLength*Math.sqrt(3)/2,ctx.moveTo(x-edgeLength/2,y+height/3),ctx.lineTo(x+edgeLength/2,y+height/3),ctx.lineTo(x,y-2*height/3),ctx.closePath(),ctx.fill();break;case"rect":size=1/Math.SQRT2*radius,ctx.beginPath(),ctx.fillRect(x-size,y-size,2*size,2*size),ctx.strokeRect(x-size,y-size,2*size,2*size);break;case"rectRounded":var offset=radius/Math.SQRT2,leftX=x-offset,topY=y-offset,sideSize=Math.SQRT2*radius;Chart.helpers.drawRoundedRectangle(ctx,leftX,topY,sideSize,sideSize,radius/2),ctx.fill();break;case"rectRot":size=1/Math.SQRT2*radius,ctx.beginPath(),ctx.moveTo(x-size,y),ctx.lineTo(x,y+size),ctx.lineTo(x+size,y),ctx.lineTo(x,y-size),ctx.closePath(),ctx.fill();break;case"cross":ctx.beginPath(),ctx.moveTo(x,y+radius),ctx.lineTo(x,y-radius),ctx.moveTo(x-radius,y),ctx.lineTo(x+radius,y),ctx.closePath();break;case"crossRot":ctx.beginPath(),xOffset=Math.cos(Math.PI/4)*radius,yOffset=Math.sin(Math.PI/4)*radius,ctx.moveTo(x-xOffset,y-yOffset),ctx.lineTo(x+xOffset,y+yOffset),ctx.moveTo(x-xOffset,y+yOffset),ctx.lineTo(x+xOffset,y-yOffset),ctx.closePath();break;case"star":ctx.beginPath(),ctx.moveTo(x,y+radius),ctx.lineTo(x,y-radius),ctx.moveTo(x-radius,y),ctx.lineTo(x+radius,y),xOffset=Math.cos(Math.PI/4)*radius,yOffset=Math.sin(Math.PI/4)*radius,ctx.moveTo(x-xOffset,y-yOffset),ctx.lineTo(x+xOffset,y+yOffset),ctx.moveTo(x-xOffset,y+yOffset),ctx.lineTo(x+xOffset,y-yOffset),ctx.closePath();break;case"line":ctx.beginPath(),ctx.moveTo(x-radius,y),ctx.lineTo(x+radius,y),ctx.closePath();break;case"dash":ctx.beginPath(),ctx.moveTo(x,y),ctx.lineTo(x+radius,y),ctx.closePath()}ctx.stroke()}},helpers.clipArea=function(ctx,clipArea){ctx.save(),ctx.beginPath(),ctx.rect(clipArea.left,clipArea.top,clipArea.right-clipArea.left,clipArea.bottom-clipArea.top),ctx.clip()},helpers.unclipArea=function(ctx){ctx.restore()}}},{}],23:[function(require,module,exports){"use strict";module.exports=function(Chart){function initConfig(config){config=config||{};var data=config.data=config.data||{};return data.datasets=data.datasets||[],data.labels=data.labels||[],config.options=helpers.configMerge(Chart.defaults.global,Chart.defaults[config.type],config.options||{}),config}function updateConfig(chart){var newOptions=chart.options;newOptions.scale?chart.scale.options=newOptions.scale:newOptions.scales&&newOptions.scales.xAxes.concat(newOptions.scales.yAxes).forEach(function(scaleOptions){chart.scales[scaleOptions.id].options=scaleOptions}),chart.tooltip._options=newOptions.tooltips}var helpers=Chart.helpers,plugins=Chart.plugins,platform=Chart.platform;Chart.types={},Chart.instances={},Chart.controllers={},Chart.Controller=function(item,config,instance){var me=this;config=initConfig(config);var context=platform.acquireContext(item,config),canvas=context&&context.canvas,height=canvas&&canvas.height,width=canvas&&canvas.width;return instance.ctx=context,instance.canvas=canvas,instance.config=config,
instance.width=width,instance.height=height,instance.aspectRatio=height?width/height:null,me.id=helpers.uid(),me.chart=instance,me.config=config,me.options=config.options,me._bufferedRender=!1,Chart.instances[me.id]=me,Object.defineProperty(me,"data",{get:function(){return me.config.data}}),context&&canvas?(me.initialize(),me.update(),me):(console.error("Failed to create chart: can't acquire context from the given item"),me)},helpers.extend(Chart.Controller.prototype,{initialize:function(){var me=this;return plugins.notify(me,"beforeInit"),helpers.retinaScale(me.chart),me.bindEvents(),me.options.responsive&&me.resize(!0),me.ensureScalesHaveIDs(),me.buildScales(),me.initToolTip(),plugins.notify(me,"afterInit"),me},clear:function(){return helpers.clear(this.chart),this},stop:function(){return Chart.animationService.cancelAnimation(this),this},resize:function(silent){var me=this,chart=me.chart,options=me.options,canvas=chart.canvas,aspectRatio=options.maintainAspectRatio&&chart.aspectRatio||null,newWidth=Math.floor(helpers.getMaximumWidth(canvas)),newHeight=Math.floor(aspectRatio?newWidth/aspectRatio:helpers.getMaximumHeight(canvas));if((chart.width!==newWidth||chart.height!==newHeight)&&(canvas.width=chart.width=newWidth,canvas.height=chart.height=newHeight,canvas.style.width=newWidth+"px",canvas.style.height=newHeight+"px",helpers.retinaScale(chart),!silent)){var newSize={width:newWidth,height:newHeight};plugins.notify(me,"resize",[newSize]),me.options.onResize&&me.options.onResize(me,newSize),me.stop(),me.update(me.options.responsiveAnimationDuration)}},ensureScalesHaveIDs:function(){var options=this.options,scalesOptions=options.scales||{},scaleOptions=options.scale;helpers.each(scalesOptions.xAxes,function(xAxisOptions,index){xAxisOptions.id=xAxisOptions.id||"x-axis-"+index}),helpers.each(scalesOptions.yAxes,function(yAxisOptions,index){yAxisOptions.id=yAxisOptions.id||"y-axis-"+index}),scaleOptions&&(scaleOptions.id=scaleOptions.id||"scale")},buildScales:function(){var me=this,options=me.options,scales=me.scales={},items=[];options.scales&&(items=items.concat((options.scales.xAxes||[]).map(function(xAxisOptions){return{options:xAxisOptions,dtype:"category"}}),(options.scales.yAxes||[]).map(function(yAxisOptions){return{options:yAxisOptions,dtype:"linear"}}))),options.scale&&items.push({options:options.scale,dtype:"radialLinear",isDefault:!0}),helpers.each(items,function(item){var scaleOptions=item.options,scaleType=helpers.getValueOrDefault(scaleOptions.type,item.dtype),scaleClass=Chart.scaleService.getScaleConstructor(scaleType);if(scaleClass){var scale=new scaleClass({id:scaleOptions.id,options:scaleOptions,ctx:me.chart.ctx,chart:me});scales[scale.id]=scale,item.isDefault&&(me.scale=scale)}}),Chart.scaleService.addScalesToLayout(this)},buildOrUpdateControllers:function(){var me=this,types=[],newControllers=[];if(helpers.each(me.data.datasets,function(dataset,datasetIndex){var meta=me.getDatasetMeta(datasetIndex);meta.type||(meta.type=dataset.type||me.config.type),types.push(meta.type),meta.controller?meta.controller.updateIndex(datasetIndex):(meta.controller=new Chart.controllers[meta.type](me,datasetIndex),newControllers.push(meta.controller))},me),types.length>1)for(var i=1;i<types.length;i++)if(types[i]!==types[i-1]){me.isCombo=!0;break}return newControllers},resetElements:function(){var me=this;helpers.each(me.data.datasets,function(dataset,datasetIndex){me.getDatasetMeta(datasetIndex).controller.reset()},me)},reset:function(){this.resetElements(),this.tooltip.initialize()},update:function(animationDuration,lazy){var me=this;if(updateConfig(me),!1!==plugins.notify(me,"beforeUpdate")){me.tooltip._data=me.data;var newControllers=me.buildOrUpdateControllers();helpers.each(me.data.datasets,function(dataset,datasetIndex){me.getDatasetMeta(datasetIndex).controller.buildOrUpdateElements()},me),me.updateLayout(),helpers.each(newControllers,function(controller){controller.reset()}),me.updateDatasets(),plugins.notify(me,"afterUpdate"),me._bufferedRender?me._bufferedRequest={lazy:lazy,duration:animationDuration}:me.render(animationDuration,lazy)}},updateLayout:function(){var me=this;!1!==plugins.notify(me,"beforeLayout")&&(Chart.layoutService.update(this,this.chart.width,this.chart.height),plugins.notify(me,"afterScaleUpdate"),plugins.notify(me,"afterLayout"))},updateDatasets:function(){var me=this;if(!1!==plugins.notify(me,"beforeDatasetsUpdate")){for(var i=0,ilen=me.data.datasets.length;i<ilen;++i)me.getDatasetMeta(i).controller.update();plugins.notify(me,"afterDatasetsUpdate")}},render:function(duration,lazy){var me=this;if(!1!==plugins.notify(me,"beforeRender")){var animationOptions=me.options.animation,onComplete=function(){plugins.notify(me,"afterRender");var callback=animationOptions&&animationOptions.onComplete;callback&&callback.call&&callback.call(me)};if(animationOptions&&(void 0!==duration&&0!==duration||void 0===duration&&0!==animationOptions.duration)){var animation=new Chart.Animation;animation.numSteps=(duration||animationOptions.duration)/16.66,animation.easing=animationOptions.easing,animation.render=function(chartInstance,animationObject){var easingFunction=helpers.easingEffects[animationObject.easing],stepDecimal=animationObject.currentStep/animationObject.numSteps,easeDecimal=easingFunction(stepDecimal);chartInstance.draw(easeDecimal,stepDecimal,animationObject.currentStep)},animation.onAnimationProgress=animationOptions.onProgress,animation.onAnimationComplete=onComplete,Chart.animationService.addAnimation(me,animation,duration,lazy)}else me.draw(),onComplete();return me}},draw:function(easingValue){var me=this;me.clear(),void 0!==easingValue&&null!==easingValue||(easingValue=1),!1!==plugins.notify(me,"beforeDraw",[easingValue])&&(helpers.each(me.boxes,function(box){box.draw(me.chartArea)},me),me.scale&&me.scale.draw(),me.drawDatasets(easingValue),me.tooltip.transition(easingValue).draw(),plugins.notify(me,"afterDraw",[easingValue]))},drawDatasets:function(easingValue){var me=this;!1!==plugins.notify(me,"beforeDatasetsDraw",[easingValue])&&(helpers.each(me.data.datasets,function(dataset,datasetIndex){me.isDatasetVisible(datasetIndex)&&me.getDatasetMeta(datasetIndex).controller.draw(easingValue)},me,!0),plugins.notify(me,"afterDatasetsDraw",[easingValue]))},getElementAtEvent:function(e){return Chart.Interaction.modes.single(this,e)},getElementsAtEvent:function(e){return Chart.Interaction.modes.label(this,e,{intersect:!0})},getElementsAtXAxis:function(e){return Chart.Interaction.modes["x-axis"](this,e,{intersect:!0})},getElementsAtEventForMode:function(e,mode,options){var method=Chart.Interaction.modes[mode];return"function"==typeof method?method(this,e,options):[]},getDatasetAtEvent:function(e){return Chart.Interaction.modes.dataset(this,e,{intersect:!0})},getDatasetMeta:function(datasetIndex){var me=this,dataset=me.data.datasets[datasetIndex];dataset._meta||(dataset._meta={});var meta=dataset._meta[me.id];return meta||(meta=dataset._meta[me.id]={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null}),meta},getVisibleDatasetCount:function(){for(var count=0,i=0,ilen=this.data.datasets.length;i<ilen;++i)this.isDatasetVisible(i)&&count++;return count},isDatasetVisible:function(datasetIndex){var meta=this.getDatasetMeta(datasetIndex);return"boolean"==typeof meta.hidden?!meta.hidden:!this.data.datasets[datasetIndex].hidden},generateLegend:function(){return this.options.legendCallback(this)},destroy:function(){var meta,i,ilen,me=this,canvas=me.chart.canvas;for(me.stop(),i=0,ilen=me.data.datasets.length;i<ilen;++i)meta=me.getDatasetMeta(i),meta.controller&&(meta.controller.destroy(),meta.controller=null);canvas&&(me.unbindEvents(),helpers.clear(me.chart),platform.releaseContext(me.chart.ctx),me.chart.canvas=null,me.chart.ctx=null),plugins.notify(me,"destroy"),delete Chart.instances[me.id]},toBase64Image:function(){return this.chart.canvas.toDataURL.apply(this.chart.canvas,arguments)},initToolTip:function(){var me=this;me.tooltip=new Chart.Tooltip({_chart:me.chart,_chartInstance:me,_data:me.data,_options:me.options.tooltips},me),me.tooltip.initialize()},bindEvents:function(){var me=this,listeners=me._listeners={},listener=function(){me.eventHandler.apply(me,arguments)};helpers.each(me.options.events,function(type){platform.addEventListener(me,type,listener),listeners[type]=listener}),me.options.responsive&&(listener=function(){me.resize()},platform.addEventListener(me,"resize",listener),listeners.resize=listener)},unbindEvents:function(){var me=this,listeners=me._listeners;listeners&&(delete me._listeners,helpers.each(listeners,function(listener,type){platform.removeEventListener(me,type,listener)}))},updateHoverStyle:function(elements,mode,enabled){var element,i,ilen,method=enabled?"setHoverStyle":"removeHoverStyle";for(i=0,ilen=elements.length;i<ilen;++i)(element=elements[i])&&this.getDatasetMeta(element._datasetIndex).controller[method](element)},eventHandler:function(e){var me=this,tooltip=me.tooltip;if(!1!==plugins.notify(me,"beforeEvent",[e])){me._bufferedRender=!0,me._bufferedRequest=null;var changed=me.handleEvent(e);changed|=tooltip&&tooltip.handleEvent(e),plugins.notify(me,"afterEvent",[e]);var bufferedRequest=me._bufferedRequest;return bufferedRequest?me.render(bufferedRequest.duration,bufferedRequest.lazy):changed&&!me.animating&&(me.stop(),me.render(me.options.hover.animationDuration,!0)),me._bufferedRender=!1,me._bufferedRequest=null,me}},handleEvent:function(e){var me=this,options=me.options||{},hoverOptions=options.hover,changed=!1;return me.lastActive=me.lastActive||[],"mouseout"===e.type?me.active=[]:me.active=me.getElementsAtEventForMode(e,hoverOptions.mode,hoverOptions),hoverOptions.onHover&&hoverOptions.onHover.call(me,e.native,me.active),"mouseup"!==e.type&&"click"!==e.type||options.onClick&&options.onClick.call(me,e.native,me.active),me.lastActive.length&&me.updateHoverStyle(me.lastActive,hoverOptions.mode,!1),me.active.length&&hoverOptions.mode&&me.updateHoverStyle(me.active,hoverOptions.mode,!0),changed=!helpers.arrayEquals(me.active,me.lastActive),me.lastActive=me.active,changed}})}},{}],24:[function(require,module,exports){"use strict";module.exports=function(Chart){function listenArrayEvents(array,listener){if(array._chartjs)return void array._chartjs.listeners.push(listener);Object.defineProperty(array,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[listener]}}),arrayEvents.forEach(function(key){var method="onData"+key.charAt(0).toUpperCase()+key.slice(1),base=array[key];Object.defineProperty(array,key,{configurable:!0,enumerable:!1,value:function(){var args=Array.prototype.slice.call(arguments),res=base.apply(this,args);return helpers.each(array._chartjs.listeners,function(object){"function"==typeof object[method]&&object[method].apply(object,args)}),res}})})}function unlistenArrayEvents(array,listener){var stub=array._chartjs;if(stub){var listeners=stub.listeners,index=listeners.indexOf(listener);-1!==index&&listeners.splice(index,1),listeners.length>0||(arrayEvents.forEach(function(key){delete array[key]}),delete array._chartjs)}}var helpers=Chart.helpers,arrayEvents=["push","pop","shift","splice","unshift"];Chart.DatasetController=function(chart,datasetIndex){this.initialize(chart,datasetIndex)},helpers.extend(Chart.DatasetController.prototype,{datasetElementType:null,dataElementType:null,initialize:function(chart,datasetIndex){var me=this;me.chart=chart,me.index=datasetIndex,me.linkScales(),me.addElements()},updateIndex:function(datasetIndex){this.index=datasetIndex},linkScales:function(){var me=this,meta=me.getMeta(),dataset=me.getDataset();null===meta.xAxisID&&(meta.xAxisID=dataset.xAxisID||me.chart.options.scales.xAxes[0].id),null===meta.yAxisID&&(meta.yAxisID=dataset.yAxisID||me.chart.options.scales.yAxes[0].id)},getDataset:function(){return this.chart.data.datasets[this.index]},getMeta:function(){return this.chart.getDatasetMeta(this.index)},getScaleForId:function(scaleID){return this.chart.scales[scaleID]},reset:function(){this.update(!0)},destroy:function(){this._data&&unlistenArrayEvents(this._data,this)},createMetaDataset:function(){var me=this,type=me.datasetElementType;return type&&new type({_chart:me.chart.chart,_datasetIndex:me.index})},createMetaData:function(index){var me=this,type=me.dataElementType;return type&&new type({_chart:me.chart.chart,_datasetIndex:me.index,_index:index})},addElements:function(){var i,ilen,me=this,meta=me.getMeta(),data=me.getDataset().data||[],metaData=meta.data;for(i=0,ilen=data.length;i<ilen;++i)metaData[i]=metaData[i]||me.createMetaData(i);meta.dataset=meta.dataset||me.createMetaDataset()},addElementAndReset:function(index){var element=this.createMetaData(index);this.getMeta().data.splice(index,0,element),this.updateElement(element,index,!0)},buildOrUpdateElements:function(){var me=this,dataset=me.getDataset(),data=dataset.data||(dataset.data=[]);me._data!==data&&(me._data&&unlistenArrayEvents(me._data,me),listenArrayEvents(data,me),me._data=data),me.resyncElements()},update:helpers.noop,draw:function(ease){var i,len,easingDecimal=ease||1,metaData=this.getMeta().data;for(i=0,len=metaData.length;i<len;++i)metaData[i].transition(easingDecimal).draw()},removeHoverStyle:function(element,elementOpts){var dataset=this.chart.data.datasets[element._datasetIndex],index=element._index,custom=element.custom||{},valueOrDefault=helpers.getValueAtIndexOrDefault,model=element._model;model.backgroundColor=custom.backgroundColor?custom.backgroundColor:valueOrDefault(dataset.backgroundColor,index,elementOpts.backgroundColor),model.borderColor=custom.borderColor?custom.borderColor:valueOrDefault(dataset.borderColor,index,elementOpts.borderColor),model.borderWidth=custom.borderWidth?custom.borderWidth:valueOrDefault(dataset.borderWidth,index,elementOpts.borderWidth)},setHoverStyle:function(element){var dataset=this.chart.data.datasets[element._datasetIndex],index=element._index,custom=element.custom||{},valueOrDefault=helpers.getValueAtIndexOrDefault,getHoverColor=helpers.getHoverColor,model=element._model;model.backgroundColor=custom.hoverBackgroundColor?custom.hoverBackgroundColor:valueOrDefault(dataset.hoverBackgroundColor,index,getHoverColor(model.backgroundColor)),model.borderColor=custom.hoverBorderColor?custom.hoverBorderColor:valueOrDefault(dataset.hoverBorderColor,index,getHoverColor(model.borderColor)),model.borderWidth=custom.hoverBorderWidth?custom.hoverBorderWidth:valueOrDefault(dataset.hoverBorderWidth,index,model.borderWidth)},resyncElements:function(){var me=this,meta=me.getMeta(),data=me.getDataset().data,numMeta=meta.data.length,numData=data.length;numData<numMeta?meta.data.splice(numData,numMeta-numData):numData>numMeta&&me.insertElements(numMeta,numData-numMeta)},insertElements:function(start,count){for(var i=0;i<count;++i)this.addElementAndReset(start+i)},onDataPush:function(){this.insertElements(this.getDataset().data.length-1,arguments.length)},onDataPop:function(){this.getMeta().data.pop()},onDataShift:function(){this.getMeta().data.shift()},onDataSplice:function(start,count){this.getMeta().data.splice(start,count),this.insertElements(start,arguments.length-2)},onDataUnshift:function(){this.insertElements(0,arguments.length)}}),Chart.DatasetController.extend=helpers.inherits}},{}],25:[function(require,module,exports){"use strict";module.exports=function(Chart){var helpers=Chart.helpers;Chart.elements={},Chart.Element=function(configuration){helpers.extend(this,configuration),this.initialize.apply(this,arguments)},helpers.extend(Chart.Element.prototype,{initialize:function(){this.hidden=!1},pivot:function(){var me=this;return me._view||(me._view=helpers.clone(me._model)),me._start=helpers.clone(me._view),me},transition:function(ease){var me=this;return me._view||(me._view=helpers.clone(me._model)),1===ease?(me._view=me._model,me._start=null,me):(me._start||me.pivot(),helpers.each(me._model,function(value,key){if("_"===key[0]);else if(me._view.hasOwnProperty(key))if(value===me._view[key]);else if("string"==typeof value)try{var color=helpers.color(me._model[key]).mix(helpers.color(me._start[key]),ease);me._view[key]=color.rgbString()}catch(err){me._view[key]=value}else if("number"==typeof value){var startVal=void 0!==me._start[key]&&!1===isNaN(me._start[key])?me._start[key]:0;me._view[key]=(me._model[key]-startVal)*ease+startVal}else me._view[key]=value;else"number"!=typeof value||isNaN(me._view[key])?me._view[key]=value:me._view[key]=value*ease},me),me)},tooltipPosition:function(){return{x:this._model.x,y:this._model.y}},hasValue:function(){return helpers.isNumber(this._model.x)&&helpers.isNumber(this._model.y)}}),Chart.Element.extend=helpers.inherits}},{}],26:[function(require,module,exports){"use strict";var color=require(3);module.exports=function(Chart){function parseMaxStyle(styleValue,node,parentProperty){var valueInPixels;return"string"==typeof styleValue?(valueInPixels=parseInt(styleValue,10),-1!==styleValue.indexOf("%")&&(valueInPixels=valueInPixels/100*node.parentNode[parentProperty])):valueInPixels=styleValue,valueInPixels}function isConstrainedValue(value){return void 0!==value&&null!==value&&"none"!==value}function getConstraintDimension(domNode,maxStyle,percentageProperty){var view=document.defaultView,parentNode=domNode.parentNode,constrainedNode=view.getComputedStyle(domNode)[maxStyle],constrainedContainer=view.getComputedStyle(parentNode)[maxStyle],hasCNode=isConstrainedValue(constrainedNode),hasCContainer=isConstrainedValue(constrainedContainer),infinity=Number.POSITIVE_INFINITY;return hasCNode||hasCContainer?Math.min(hasCNode?parseMaxStyle(constrainedNode,domNode,percentageProperty):infinity,hasCContainer?parseMaxStyle(constrainedContainer,parentNode,percentageProperty):infinity):"none"}var helpers=Chart.helpers={};helpers.each=function(loopable,callback,self,reverse){var i,len;if(helpers.isArray(loopable))if(len=loopable.length,reverse)for(i=len-1;i>=0;i--)callback.call(self,loopable[i],i);else for(i=0;i<len;i++)callback.call(self,loopable[i],i);else if("object"==typeof loopable){var keys=Object.keys(loopable);for(len=keys.length,i=0;i<len;i++)callback.call(self,loopable[keys[i]],keys[i])}},helpers.clone=function(obj){var objClone={};return helpers.each(obj,function(value,key){helpers.isArray(value)?objClone[key]=value.slice(0):objClone[key]="object"==typeof value&&null!==value?helpers.clone(value):value}),objClone},helpers.extend=function(base){for(var setFn=function(value,key){base[key]=value},i=1,ilen=arguments.length;i<ilen;i++)helpers.each(arguments[i],setFn);return base},helpers.configMerge=function(_base){var base=helpers.clone(_base);return helpers.each(Array.prototype.slice.call(arguments,1),function(extension){helpers.each(extension,function(value,key){var baseHasProperty=base.hasOwnProperty(key),baseVal=baseHasProperty?base[key]:{};"scales"===key?base[key]=helpers.scaleMerge(baseVal,value):"scale"===key?base[key]=helpers.configMerge(baseVal,Chart.scaleService.getScaleDefaults(value.type),value):!baseHasProperty||"object"!=typeof baseVal||helpers.isArray(baseVal)||null===baseVal||"object"!=typeof value||helpers.isArray(value)?base[key]=value:base[key]=helpers.configMerge(baseVal,value)})}),base},helpers.scaleMerge=function(_base,extension){var base=helpers.clone(_base);return helpers.each(extension,function(value,key){"xAxes"===key||"yAxes"===key?base.hasOwnProperty(key)?helpers.each(value,function(valueObj,index){var axisType=helpers.getValueOrDefault(valueObj.type,"xAxes"===key?"category":"linear"),axisDefaults=Chart.scaleService.getScaleDefaults(axisType);index>=base[key].length||!base[key][index].type?base[key].push(helpers.configMerge(axisDefaults,valueObj)):valueObj.type&&valueObj.type!==base[key][index].type?base[key][index]=helpers.configMerge(base[key][index],axisDefaults,valueObj):base[key][index]=helpers.configMerge(base[key][index],valueObj)}):(base[key]=[],helpers.each(value,function(valueObj){var axisType=helpers.getValueOrDefault(valueObj.type,"xAxes"===key?"category":"linear");base[key].push(helpers.configMerge(Chart.scaleService.getScaleDefaults(axisType),valueObj))})):base.hasOwnProperty(key)&&"object"==typeof base[key]&&null!==base[key]&&"object"==typeof value?base[key]=helpers.configMerge(base[key],value):base[key]=value}),base},helpers.getValueAtIndexOrDefault=function(value,index,defaultValue){return void 0===value||null===value?defaultValue:helpers.isArray(value)?index<value.length?value[index]:defaultValue:value},helpers.getValueOrDefault=function(value,defaultValue){return void 0===value?defaultValue:value},helpers.indexOf=Array.prototype.indexOf?function(array,item){return array.indexOf(item)}:function(array,item){for(var i=0,ilen=array.length;i<ilen;++i)if(array[i]===item)return i;return-1},helpers.where=function(collection,filterCallback){if(helpers.isArray(collection)&&Array.prototype.filter)return collection.filter(filterCallback);var filtered=[];return helpers.each(collection,function(item){filterCallback(item)&&filtered.push(item)}),filtered},helpers.findIndex=Array.prototype.findIndex?function(array,callback,scope){return array.findIndex(callback,scope)}:function(array,callback,scope){scope=void 0===scope?array:scope;for(var i=0,ilen=array.length;i<ilen;++i)if(callback.call(scope,array[i],i,array))return i;return-1},helpers.findNextWhere=function(arrayToSearch,filterCallback,startIndex){void 0!==startIndex&&null!==startIndex||(startIndex=-1);for(var i=startIndex+1;i<arrayToSearch.length;i++){var currentItem=arrayToSearch[i];if(filterCallback(currentItem))return currentItem}},helpers.findPreviousWhere=function(arrayToSearch,filterCallback,startIndex){void 0!==startIndex&&null!==startIndex||(startIndex=arrayToSearch.length);for(var i=startIndex-1;i>=0;i--){var currentItem=arrayToSearch[i];if(filterCallback(currentItem))return currentItem}},helpers.inherits=function(extensions){var me=this,ChartElement=extensions&&extensions.hasOwnProperty("constructor")?extensions.constructor:function(){return me.apply(this,arguments)},Surrogate=function(){this.constructor=ChartElement};return Surrogate.prototype=me.prototype,ChartElement.prototype=new Surrogate,ChartElement.extend=helpers.inherits,extensions&&helpers.extend(ChartElement.prototype,extensions),ChartElement.__super__=me.prototype,ChartElement},helpers.noop=function(){},helpers.uid=function(){var id=0;return function(){return id++}}(),helpers.isNumber=function(n){return!isNaN(parseFloat(n))&&isFinite(n)},helpers.almostEquals=function(x,y,epsilon){return Math.abs(x-y)<epsilon},helpers.almostWhole=function(x,epsilon){var rounded=Math.round(x);return rounded-epsilon<x&&rounded+epsilon>x},helpers.max=function(array){return array.reduce(function(max,value){return isNaN(value)?max:Math.max(max,value)},Number.NEGATIVE_INFINITY)},helpers.min=function(array){return array.reduce(function(min,value){return isNaN(value)?min:Math.min(min,value)},Number.POSITIVE_INFINITY)},helpers.sign=Math.sign?function(x){return Math.sign(x)}:function(x){return x=+x,0===x||isNaN(x)?x:x>0?1:-1},helpers.log10=Math.log10?function(x){return Math.log10(x)}:function(x){return Math.log(x)/Math.LN10},helpers.toRadians=function(degrees){return degrees*(Math.PI/180)},helpers.toDegrees=function(radians){return radians*(180/Math.PI)},helpers.getAngleFromPoint=function(centrePoint,anglePoint){var distanceFromXCenter=anglePoint.x-centrePoint.x,distanceFromYCenter=anglePoint.y-centrePoint.y,radialDistanceFromCenter=Math.sqrt(distanceFromXCenter*distanceFromXCenter+distanceFromYCenter*distanceFromYCenter),angle=Math.atan2(distanceFromYCenter,distanceFromXCenter);return angle<-.5*Math.PI&&(angle+=2*Math.PI),{angle:angle,distance:radialDistanceFromCenter}},helpers.distanceBetweenPoints=function(pt1,pt2){return Math.sqrt(Math.pow(pt2.x-pt1.x,2)+Math.pow(pt2.y-pt1.y,2))},helpers.aliasPixel=function(pixelWidth){return pixelWidth%2==0?0:.5},helpers.splineCurve=function(firstPoint,middlePoint,afterPoint,t){var previous=firstPoint.skip?middlePoint:firstPoint,current=middlePoint,next=afterPoint.skip?middlePoint:afterPoint,d01=Math.sqrt(Math.pow(current.x-previous.x,2)+Math.pow(current.y-previous.y,2)),d12=Math.sqrt(Math.pow(next.x-current.x,2)+Math.pow(next.y-current.y,2)),s01=d01/(d01+d12),s12=d12/(d01+d12);s01=isNaN(s01)?0:s01,s12=isNaN(s12)?0:s12;var fa=t*s01,fb=t*s12;return{previous:{x:current.x-fa*(next.x-previous.x),y:current.y-fa*(next.y-previous.y)},next:{x:current.x+fb*(next.x-previous.x),y:current.y+fb*(next.y-previous.y)}}},helpers.EPSILON=Number.EPSILON||1e-14,helpers.splineCurveMonotone=function(points){var i,pointBefore,pointCurrent,pointAfter,pointsWithTangents=(points||[]).map(function(point){return{model:point._model,deltaK:0,mK:0}}),pointsLen=pointsWithTangents.length;for(i=0;i<pointsLen;++i)if(pointCurrent=pointsWithTangents[i],!pointCurrent.model.skip){if(pointBefore=i>0?pointsWithTangents[i-1]:null,(pointAfter=i<pointsLen-1?pointsWithTangents[i+1]:null)&&!pointAfter.model.skip){var slopeDeltaX=pointAfter.model.x-pointCurrent.model.x;pointCurrent.deltaK=0!==slopeDeltaX?(pointAfter.model.y-pointCurrent.model.y)/slopeDeltaX:0}!pointBefore||pointBefore.model.skip?pointCurrent.mK=pointCurrent.deltaK:!pointAfter||pointAfter.model.skip?pointCurrent.mK=pointBefore.deltaK:this.sign(pointBefore.deltaK)!==this.sign(pointCurrent.deltaK)?pointCurrent.mK=0:pointCurrent.mK=(pointBefore.deltaK+pointCurrent.deltaK)/2}var alphaK,betaK,tauK,squaredMagnitude;for(i=0;i<pointsLen-1;++i)pointCurrent=pointsWithTangents[i],pointAfter=pointsWithTangents[i+1],pointCurrent.model.skip||pointAfter.model.skip||(helpers.almostEquals(pointCurrent.deltaK,0,this.EPSILON)?pointCurrent.mK=pointAfter.mK=0:(alphaK=pointCurrent.mK/pointCurrent.deltaK,betaK=pointAfter.mK/pointCurrent.deltaK,(squaredMagnitude=Math.pow(alphaK,2)+Math.pow(betaK,2))<=9||(tauK=3/Math.sqrt(squaredMagnitude),pointCurrent.mK=alphaK*tauK*pointCurrent.deltaK,pointAfter.mK=betaK*tauK*pointCurrent.deltaK)));var deltaX;for(i=0;i<pointsLen;++i)pointCurrent=pointsWithTangents[i],pointCurrent.model.skip||(pointBefore=i>0?pointsWithTangents[i-1]:null,pointAfter=i<pointsLen-1?pointsWithTangents[i+1]:null,pointBefore&&!pointBefore.model.skip&&(deltaX=(pointCurrent.model.x-pointBefore.model.x)/3,pointCurrent.model.controlPointPreviousX=pointCurrent.model.x-deltaX,pointCurrent.model.controlPointPreviousY=pointCurrent.model.y-deltaX*pointCurrent.mK),pointAfter&&!pointAfter.model.skip&&(deltaX=(pointAfter.model.x-pointCurrent.model.x)/3,pointCurrent.model.controlPointNextX=pointCurrent.model.x+deltaX,pointCurrent.model.controlPointNextY=pointCurrent.model.y+deltaX*pointCurrent.mK))},helpers.nextItem=function(collection,index,loop){return loop?index>=collection.length-1?collection[0]:collection[index+1]:index>=collection.length-1?collection[collection.length-1]:collection[index+1]},helpers.previousItem=function(collection,index,loop){return loop?index<=0?collection[collection.length-1]:collection[index-1]:index<=0?collection[0]:collection[index-1]},helpers.niceNum=function(range,round){var exponent=Math.floor(helpers.log10(range)),fraction=range/Math.pow(10,exponent);return(round?fraction<1.5?1:fraction<3?2:fraction<7?5:10:fraction<=1?1:fraction<=2?2:fraction<=5?5:10)*Math.pow(10,exponent)};var easingEffects=helpers.easingEffects={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return-1*t*(t-2)},easeInOutQuad:function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return 1*((t=t/1-1)*t*t+1)},easeInOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return-1*((t=t/1-1)*t*t*t-1)},easeInOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},easeInQuint:function(t){return 1*(t/=1)*t*t*t*t},easeOutQuint:function(t){return 1*((t=t/1-1)*t*t*t*t+1)},easeInOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},easeInSine:function(t){return-1*Math.cos(t/1*(Math.PI/2))+1},easeOutSine:function(t){return 1*Math.sin(t/1*(Math.PI/2))},easeInOutSine:function(t){return-.5*(Math.cos(Math.PI*t/1)-1)},easeInExpo:function(t){return 0===t?1:1*Math.pow(2,10*(t/1-1))},easeOutExpo:function(t){return 1===t?1:1*(1-Math.pow(2,-10*t/1))},easeInOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*--t))},easeInCirc:function(t){return t>=1?t:-1*(Math.sqrt(1-(t/=1)*t)-1)},easeOutCirc:function(t){return 1*Math.sqrt(1-(t=t/1-1)*t)},easeInOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInElastic:function(t){var s=1.70158,p=0,a=1;return 0===t?0:1==(t/=1)?1:(p||(p=.3),a<Math.abs(1)?(a=1,s=p/4):s=p/(2*Math.PI)*Math.asin(1/a),-a*Math.pow(2,10*(t-=1))*Math.sin((1*t-s)*(2*Math.PI)/p))},easeOutElastic:function(t){var s=1.70158,p=0,a=1;return 0===t?0:1==(t/=1)?1:(p||(p=.3),a<Math.abs(1)?(a=1,s=p/4):s=p/(2*Math.PI)*Math.asin(1/a),a*Math.pow(2,-10*t)*Math.sin((1*t-s)*(2*Math.PI)/p)+1)},easeInOutElastic:function(t){var s=1.70158,p=0,a=1;return 0===t?0:2==(t/=.5)?1:(p||(p=.3*1.5*1),a<Math.abs(1)?(a=1,s=p/4):s=p/(2*Math.PI)*Math.asin(1/a),t<1?a*Math.pow(2,10*(t-=1))*Math.sin((1*t-s)*(2*Math.PI)/p)*-.5:a*Math.pow(2,-10*(t-=1))*Math.sin((1*t-s)*(2*Math.PI)/p)*.5+1)},easeInBack:function(t){var s=1.70158;return 1*(t/=1)*t*((s+1)*t-s)},easeOutBack:function(t){var s=1.70158;return 1*((t=t/1-1)*t*((s+1)*t+s)+1)},easeInOutBack:function(t){var s=1.70158;return(t/=.5)<1?t*t*((1+(s*=1.525))*t-s)*.5:.5*((t-=2)*t*((1+(s*=1.525))*t+s)+2)},easeInBounce:function(t){return 1-easingEffects.easeOutBounce(1-t)},easeOutBounce:function(t){return(t/=1)<1/2.75?7.5625*t*t*1:t<2/2.75?1*(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?1*(7.5625*(t-=2.25/2.75)*t+.9375):1*(7.5625*(t-=2.625/2.75)*t+.984375)},easeInOutBounce:function(t){return t<.5?.5*easingEffects.easeInBounce(2*t):.5*easingEffects.easeOutBounce(2*t-1)+.5}};helpers.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback){return window.setTimeout(callback,1e3/60)}}(),helpers.getRelativePosition=function(evt,chart){var mouseX,mouseY,e=evt.originalEvent||evt,canvas=evt.currentTarget||evt.srcElement,boundingRect=canvas.getBoundingClientRect(),touches=e.touches;touches&&touches.length>0?(mouseX=touches[0].clientX,mouseY=touches[0].clientY):(mouseX=e.clientX,mouseY=e.clientY);var paddingLeft=parseFloat(helpers.getStyle(canvas,"padding-left")),paddingTop=parseFloat(helpers.getStyle(canvas,"padding-top")),paddingRight=parseFloat(helpers.getStyle(canvas,"padding-right")),paddingBottom=parseFloat(helpers.getStyle(canvas,"padding-bottom")),width=boundingRect.right-boundingRect.left-paddingLeft-paddingRight,height=boundingRect.bottom-boundingRect.top-paddingTop-paddingBottom;return mouseX=Math.round((mouseX-boundingRect.left-paddingLeft)/width*canvas.width/chart.currentDevicePixelRatio),mouseY=Math.round((mouseY-boundingRect.top-paddingTop)/height*canvas.height/chart.currentDevicePixelRatio),{x:mouseX,y:mouseY}},helpers.addEvent=function(node,eventType,method){node.addEventListener?node.addEventListener(eventType,method):node.attachEvent?node.attachEvent("on"+eventType,method):node["on"+eventType]=method},helpers.removeEvent=function(node,eventType,handler){node.removeEventListener?node.removeEventListener(eventType,handler,!1):node.detachEvent?node.detachEvent("on"+eventType,handler):node["on"+eventType]=helpers.noop},helpers.getConstraintWidth=function(domNode){return getConstraintDimension(domNode,"max-width","clientWidth")},helpers.getConstraintHeight=function(domNode){return getConstraintDimension(domNode,"max-height","clientHeight")},helpers.getMaximumWidth=function(domNode){
var container=domNode.parentNode,paddingLeft=parseInt(helpers.getStyle(container,"padding-left"),10),paddingRight=parseInt(helpers.getStyle(container,"padding-right"),10),w=container.clientWidth-paddingLeft-paddingRight,cw=helpers.getConstraintWidth(domNode);return isNaN(cw)?w:Math.min(w,cw)},helpers.getMaximumHeight=function(domNode){var container=domNode.parentNode,paddingTop=parseInt(helpers.getStyle(container,"padding-top"),10),paddingBottom=parseInt(helpers.getStyle(container,"padding-bottom"),10),h=container.clientHeight-paddingTop-paddingBottom,ch=helpers.getConstraintHeight(domNode);return isNaN(ch)?h:Math.min(h,ch)},helpers.getStyle=function(el,property){return el.currentStyle?el.currentStyle[property]:document.defaultView.getComputedStyle(el,null).getPropertyValue(property)},helpers.retinaScale=function(chart){var pixelRatio=chart.currentDevicePixelRatio=window.devicePixelRatio||1;if(1!==pixelRatio){var canvas=chart.canvas,height=chart.height,width=chart.width;canvas.height=height*pixelRatio,canvas.width=width*pixelRatio,chart.ctx.scale(pixelRatio,pixelRatio),canvas.style.height=height+"px",canvas.style.width=width+"px"}},helpers.clear=function(chart){chart.ctx.clearRect(0,0,chart.width,chart.height)},helpers.fontString=function(pixelSize,fontStyle,fontFamily){return fontStyle+" "+pixelSize+"px "+fontFamily},helpers.longestText=function(ctx,font,arrayOfThings,cache){cache=cache||{};var data=cache.data=cache.data||{},gc=cache.garbageCollect=cache.garbageCollect||[];cache.font!==font&&(data=cache.data={},gc=cache.garbageCollect=[],cache.font=font),ctx.font=font;var longest=0;helpers.each(arrayOfThings,function(thing){void 0!==thing&&null!==thing&&!0!==helpers.isArray(thing)?longest=helpers.measureText(ctx,data,gc,longest,thing):helpers.isArray(thing)&&helpers.each(thing,function(nestedThing){void 0===nestedThing||null===nestedThing||helpers.isArray(nestedThing)||(longest=helpers.measureText(ctx,data,gc,longest,nestedThing))})});var gcLen=gc.length/2;if(gcLen>arrayOfThings.length){for(var i=0;i<gcLen;i++)delete data[gc[i]];gc.splice(0,gcLen)}return longest},helpers.measureText=function(ctx,data,gc,longest,string){var textWidth=data[string];return textWidth||(textWidth=data[string]=ctx.measureText(string).width,gc.push(string)),textWidth>longest&&(longest=textWidth),longest},helpers.numberOfLabelLines=function(arrayOfThings){var numberOfLines=1;return helpers.each(arrayOfThings,function(thing){helpers.isArray(thing)&&thing.length>numberOfLines&&(numberOfLines=thing.length)}),numberOfLines},helpers.drawRoundedRectangle=function(ctx,x,y,width,height,radius){ctx.beginPath(),ctx.moveTo(x+radius,y),ctx.lineTo(x+width-radius,y),ctx.quadraticCurveTo(x+width,y,x+width,y+radius),ctx.lineTo(x+width,y+height-radius),ctx.quadraticCurveTo(x+width,y+height,x+width-radius,y+height),ctx.lineTo(x+radius,y+height),ctx.quadraticCurveTo(x,y+height,x,y+height-radius),ctx.lineTo(x,y+radius),ctx.quadraticCurveTo(x,y,x+radius,y),ctx.closePath()},helpers.color=function(c){return color?color(c instanceof CanvasGradient?Chart.defaults.global.defaultColor:c):(console.error("Color.js not found!"),c)},helpers.isArray=Array.isArray?function(obj){return Array.isArray(obj)}:function(obj){return"[object Array]"===Object.prototype.toString.call(obj)},helpers.arrayEquals=function(a0,a1){var i,ilen,v0,v1;if(!a0||!a1||a0.length!==a1.length)return!1;for(i=0,ilen=a0.length;i<ilen;++i)if(v0=a0[i],v1=a1[i],v0 instanceof Array&&v1 instanceof Array){if(!helpers.arrayEquals(v0,v1))return!1}else if(v0!==v1)return!1;return!0},helpers.callCallback=function(fn,args,_tArg){fn&&"function"==typeof fn.call&&fn.apply(_tArg,args)},helpers.getHoverColor=function(colorValue){return colorValue instanceof CanvasPattern?colorValue:helpers.color(colorValue).saturate(.5).darken(.1).rgbString()}}},{3:3}],27:[function(require,module,exports){"use strict";module.exports=function(Chart){function getRelativePosition(e,chart){return e.native?{x:e.x,y:e.y}:helpers.getRelativePosition(e,chart)}function parseVisibleItems(chart,handler){var meta,i,j,ilen,jlen,datasets=chart.data.datasets;for(i=0,ilen=datasets.length;i<ilen;++i)if(chart.isDatasetVisible(i))for(meta=chart.getDatasetMeta(i),j=0,jlen=meta.data.length;j<jlen;++j){var element=meta.data[j];element._view.skip||handler(element)}}function getIntersectItems(chart,position){var elements=[];return parseVisibleItems(chart,function(element){element.inRange(position.x,position.y)&&elements.push(element)}),elements}function getNearestItems(chart,position,intersect,distanceMetric){var minDistance=Number.POSITIVE_INFINITY,nearestItems=[];return distanceMetric||(distanceMetric=helpers.distanceBetweenPoints),parseVisibleItems(chart,function(element){if(!intersect||element.inRange(position.x,position.y)){var center=element.getCenterPoint(),distance=distanceMetric(position,center);distance<minDistance?(nearestItems=[element],minDistance=distance):distance===minDistance&&nearestItems.push(element)}}),nearestItems}function indexMode(chart,e,options){var position=getRelativePosition(e,chart.chart),distanceMetric=function(pt1,pt2){return Math.abs(pt1.x-pt2.x)},items=options.intersect?getIntersectItems(chart,position):getNearestItems(chart,position,!1,distanceMetric),elements=[];return items.length?(chart.data.datasets.forEach(function(dataset,datasetIndex){if(chart.isDatasetVisible(datasetIndex)){var meta=chart.getDatasetMeta(datasetIndex),element=meta.data[items[0]._index];element&&!element._view.skip&&elements.push(element)}}),elements):[]}var helpers=Chart.helpers;Chart.Interaction={modes:{single:function(chart,e){var position=getRelativePosition(e,chart.chart),elements=[];return parseVisibleItems(chart,function(element){if(element.inRange(position.x,position.y))return elements.push(element),elements}),elements.slice(0,1)},label:indexMode,index:indexMode,dataset:function(chart,e,options){var position=getRelativePosition(e,chart.chart),items=options.intersect?getIntersectItems(chart,position):getNearestItems(chart,position,!1);return items.length>0&&(items=chart.getDatasetMeta(items[0]._datasetIndex).data),items},"x-axis":function(chart,e){return indexMode(chart,e,!0)},point:function(chart,e){return getIntersectItems(chart,getRelativePosition(e,chart.chart))},nearest:function(chart,e,options){var position=getRelativePosition(e,chart.chart),nearestItems=getNearestItems(chart,position,options.intersect);return nearestItems.length>1&&nearestItems.sort(function(a,b){var sizeA=a.getArea(),sizeB=b.getArea(),ret=sizeA-sizeB;return 0===ret&&(ret=a._datasetIndex-b._datasetIndex),ret}),nearestItems.slice(0,1)},x:function(chart,e,options){var position=getRelativePosition(e,chart.chart),items=[],intersectsItem=!1;return parseVisibleItems(chart,function(element){element.inXRange(position.x)&&items.push(element),element.inRange(position.x,position.y)&&(intersectsItem=!0)}),options.intersect&&!intersectsItem&&(items=[]),items},y:function(chart,e,options){var position=getRelativePosition(e,chart.chart),items=[],intersectsItem=!1;return parseVisibleItems(chart,function(element){element.inYRange(position.y)&&items.push(element),element.inRange(position.x,position.y)&&(intersectsItem=!0)}),options.intersect&&!intersectsItem&&(items=[]),items}}}}},{}],28:[function(require,module,exports){"use strict";module.exports=function(){var Chart=function(item,config){return this.controller=new Chart.Controller(item,config,this),this.controller};return Chart.defaults={global:{responsive:!0,responsiveAnimationDuration:0,maintainAspectRatio:!0,events:["mousemove","mouseout","click","touchstart","touchmove"],hover:{onHover:null,mode:"nearest",intersect:!0,animationDuration:400},onClick:null,defaultColor:"rgba(0,0,0,0.1)",defaultFontColor:"#666",defaultFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",defaultFontSize:12,defaultFontStyle:"normal",showLines:!0,elements:{},legendCallback:function(chart){var text=[];text.push('<ul class="'+chart.id+'-legend">');for(var i=0;i<chart.data.datasets.length;i++)text.push('<li><span style="background-color:'+chart.data.datasets[i].backgroundColor+'"></span>'),chart.data.datasets[i].label&&text.push(chart.data.datasets[i].label),text.push("</li>");return text.push("</ul>"),text.join("")}}},Chart.Chart=Chart,Chart}},{}],29:[function(require,module,exports){"use strict";module.exports=function(Chart){var helpers=Chart.helpers;Chart.layoutService={defaults:{},addBox:function(chartInstance,box){chartInstance.boxes||(chartInstance.boxes=[]),chartInstance.boxes.push(box)},removeBox:function(chartInstance,box){chartInstance.boxes&&chartInstance.boxes.splice(chartInstance.boxes.indexOf(box),1)},update:function(chartInstance,width,height){function getMinimumBoxSize(box){var minSize,isHorizontal=box.isHorizontal();isHorizontal?(minSize=box.update(box.options.fullWidth?chartWidth:maxChartAreaWidth,horizontalBoxHeight),maxChartAreaHeight-=minSize.height):(minSize=box.update(verticalBoxWidth,chartAreaHeight),maxChartAreaWidth-=minSize.width),minBoxSizes.push({horizontal:isHorizontal,minSize:minSize,box:box})}function fitBox(box){var minBoxSize=helpers.findNextWhere(minBoxSizes,function(minBox){return minBox.box===box});if(minBoxSize)if(box.isHorizontal()){var scaleMargin={left:Math.max(totalLeftBoxesWidth,maxHorizontalLeftPadding),right:Math.max(totalRightBoxesWidth,maxHorizontalRightPadding),top:0,bottom:0};box.update(box.options.fullWidth?chartWidth:maxChartAreaWidth,chartHeight/2,scaleMargin)}else box.update(minBoxSize.minSize.width,maxChartAreaHeight)}function finalFitVerticalBox(box){var minBoxSize=helpers.findNextWhere(minBoxSizes,function(minSize){return minSize.box===box}),scaleMargin={left:0,right:0,top:totalTopBoxesHeight,bottom:totalBottomBoxesHeight};minBoxSize&&box.update(minBoxSize.minSize.width,maxChartAreaHeight,scaleMargin)}function placeBox(box){box.isHorizontal()?(box.left=box.options.fullWidth?leftPadding:totalLeftBoxesWidth,box.right=box.options.fullWidth?width-rightPadding:totalLeftBoxesWidth+maxChartAreaWidth,box.top=top,box.bottom=top+box.height,top=box.bottom):(box.left=left,box.right=left+box.width,box.top=totalTopBoxesHeight,box.bottom=totalTopBoxesHeight+maxChartAreaHeight,left=box.right)}if(chartInstance){var layoutOptions=chartInstance.options.layout,padding=layoutOptions?layoutOptions.padding:null,leftPadding=0,rightPadding=0,topPadding=0,bottomPadding=0;isNaN(padding)?(leftPadding=padding.left||0,rightPadding=padding.right||0,topPadding=padding.top||0,bottomPadding=padding.bottom||0):(leftPadding=padding,rightPadding=padding,topPadding=padding,bottomPadding=padding);var leftBoxes=helpers.where(chartInstance.boxes,function(box){return"left"===box.options.position}),rightBoxes=helpers.where(chartInstance.boxes,function(box){return"right"===box.options.position}),topBoxes=helpers.where(chartInstance.boxes,function(box){return"top"===box.options.position}),bottomBoxes=helpers.where(chartInstance.boxes,function(box){return"bottom"===box.options.position}),chartAreaBoxes=helpers.where(chartInstance.boxes,function(box){return"chartArea"===box.options.position});topBoxes.sort(function(a,b){return(b.options.fullWidth?1:0)-(a.options.fullWidth?1:0)}),bottomBoxes.sort(function(a,b){return(a.options.fullWidth?1:0)-(b.options.fullWidth?1:0)});var chartWidth=width-leftPadding-rightPadding,chartHeight=height-topPadding-bottomPadding,chartAreaWidth=chartWidth/2,chartAreaHeight=chartHeight/2,verticalBoxWidth=(width-chartAreaWidth)/(leftBoxes.length+rightBoxes.length),horizontalBoxHeight=(height-chartAreaHeight)/(topBoxes.length+bottomBoxes.length),maxChartAreaWidth=chartWidth,maxChartAreaHeight=chartHeight,minBoxSizes=[];helpers.each(leftBoxes.concat(rightBoxes,topBoxes,bottomBoxes),getMinimumBoxSize);var maxHorizontalLeftPadding=0,maxHorizontalRightPadding=0,maxVerticalTopPadding=0,maxVerticalBottomPadding=0;helpers.each(topBoxes.concat(bottomBoxes),function(horizontalBox){if(horizontalBox.getPadding){var boxPadding=horizontalBox.getPadding();maxHorizontalLeftPadding=Math.max(maxHorizontalLeftPadding,boxPadding.left),maxHorizontalRightPadding=Math.max(maxHorizontalRightPadding,boxPadding.right)}}),helpers.each(leftBoxes.concat(rightBoxes),function(verticalBox){if(verticalBox.getPadding){var boxPadding=verticalBox.getPadding();maxVerticalTopPadding=Math.max(maxVerticalTopPadding,boxPadding.top),maxVerticalBottomPadding=Math.max(maxVerticalBottomPadding,boxPadding.bottom)}});var totalLeftBoxesWidth=leftPadding,totalRightBoxesWidth=rightPadding,totalTopBoxesHeight=topPadding,totalBottomBoxesHeight=bottomPadding;helpers.each(leftBoxes.concat(rightBoxes),fitBox),helpers.each(leftBoxes,function(box){totalLeftBoxesWidth+=box.width}),helpers.each(rightBoxes,function(box){totalRightBoxesWidth+=box.width}),helpers.each(topBoxes.concat(bottomBoxes),fitBox),helpers.each(topBoxes,function(box){totalTopBoxesHeight+=box.height}),helpers.each(bottomBoxes,function(box){totalBottomBoxesHeight+=box.height}),helpers.each(leftBoxes.concat(rightBoxes),finalFitVerticalBox),totalLeftBoxesWidth=leftPadding,totalRightBoxesWidth=rightPadding,totalTopBoxesHeight=topPadding,totalBottomBoxesHeight=bottomPadding,helpers.each(leftBoxes,function(box){totalLeftBoxesWidth+=box.width}),helpers.each(rightBoxes,function(box){totalRightBoxesWidth+=box.width}),helpers.each(topBoxes,function(box){totalTopBoxesHeight+=box.height}),helpers.each(bottomBoxes,function(box){totalBottomBoxesHeight+=box.height});var leftPaddingAddition=Math.max(maxHorizontalLeftPadding-totalLeftBoxesWidth,0);totalLeftBoxesWidth+=leftPaddingAddition,totalRightBoxesWidth+=Math.max(maxHorizontalRightPadding-totalRightBoxesWidth,0);var topPaddingAddition=Math.max(maxVerticalTopPadding-totalTopBoxesHeight,0);totalTopBoxesHeight+=topPaddingAddition,totalBottomBoxesHeight+=Math.max(maxVerticalBottomPadding-totalBottomBoxesHeight,0);var newMaxChartAreaHeight=height-totalTopBoxesHeight-totalBottomBoxesHeight,newMaxChartAreaWidth=width-totalLeftBoxesWidth-totalRightBoxesWidth;newMaxChartAreaWidth===maxChartAreaWidth&&newMaxChartAreaHeight===maxChartAreaHeight||(helpers.each(leftBoxes,function(box){box.height=newMaxChartAreaHeight}),helpers.each(rightBoxes,function(box){box.height=newMaxChartAreaHeight}),helpers.each(topBoxes,function(box){box.options.fullWidth||(box.width=newMaxChartAreaWidth)}),helpers.each(bottomBoxes,function(box){box.options.fullWidth||(box.width=newMaxChartAreaWidth)}),maxChartAreaHeight=newMaxChartAreaHeight,maxChartAreaWidth=newMaxChartAreaWidth);var left=leftPadding+leftPaddingAddition,top=topPadding+topPaddingAddition;helpers.each(leftBoxes.concat(topBoxes),placeBox),left+=maxChartAreaWidth,top+=maxChartAreaHeight,helpers.each(rightBoxes,placeBox),helpers.each(bottomBoxes,placeBox),chartInstance.chartArea={left:totalLeftBoxesWidth,top:totalTopBoxesHeight,right:totalLeftBoxesWidth+maxChartAreaWidth,bottom:totalTopBoxesHeight+maxChartAreaHeight},helpers.each(chartAreaBoxes,function(box){box.left=chartInstance.chartArea.left,box.top=chartInstance.chartArea.top,box.right=chartInstance.chartArea.right,box.bottom=chartInstance.chartArea.bottom,box.update(maxChartAreaWidth,maxChartAreaHeight)})}}}}},{}],30:[function(require,module,exports){"use strict";module.exports=function(Chart){function getBoxWidth(labelOpts,fontSize){return labelOpts.usePointStyle?fontSize*Math.SQRT2:labelOpts.boxWidth}function createNewLegendAndAttach(chartInstance,legendOpts){var legend=new Chart.Legend({ctx:chartInstance.chart.ctx,options:legendOpts,chart:chartInstance});chartInstance.legend=legend,Chart.layoutService.addBox(chartInstance,legend)}var helpers=Chart.helpers,noop=helpers.noop;Chart.defaults.global.legend={display:!0,position:"top",fullWidth:!0,reverse:!1,onClick:function(e,legendItem){var index=legendItem.datasetIndex,ci=this.chart,meta=ci.getDatasetMeta(index);meta.hidden=null===meta.hidden?!ci.data.datasets[index].hidden:null,ci.update()},onHover:null,labels:{boxWidth:40,padding:10,generateLabels:function(chart){var data=chart.data;return helpers.isArray(data.datasets)?data.datasets.map(function(dataset,i){return{text:dataset.label,fillStyle:helpers.isArray(dataset.backgroundColor)?dataset.backgroundColor[0]:dataset.backgroundColor,hidden:!chart.isDatasetVisible(i),lineCap:dataset.borderCapStyle,lineDash:dataset.borderDash,lineDashOffset:dataset.borderDashOffset,lineJoin:dataset.borderJoinStyle,lineWidth:dataset.borderWidth,strokeStyle:dataset.borderColor,pointStyle:dataset.pointStyle,datasetIndex:i}},this):[]}}},Chart.Legend=Chart.Element.extend({initialize:function(config){helpers.extend(this,config),this.legendHitBoxes=[],this.doughnutMode=!1},beforeUpdate:noop,update:function(maxWidth,maxHeight,margins){var me=this;return me.beforeUpdate(),me.maxWidth=maxWidth,me.maxHeight=maxHeight,me.margins=margins,me.beforeSetDimensions(),me.setDimensions(),me.afterSetDimensions(),me.beforeBuildLabels(),me.buildLabels(),me.afterBuildLabels(),me.beforeFit(),me.fit(),me.afterFit(),me.afterUpdate(),me.minSize},afterUpdate:noop,beforeSetDimensions:noop,setDimensions:function(){var me=this;me.isHorizontal()?(me.width=me.maxWidth,me.left=0,me.right=me.width):(me.height=me.maxHeight,me.top=0,me.bottom=me.height),me.paddingLeft=0,me.paddingTop=0,me.paddingRight=0,me.paddingBottom=0,me.minSize={width:0,height:0}},afterSetDimensions:noop,beforeBuildLabels:noop,buildLabels:function(){var me=this,labelOpts=me.options.labels,legendItems=labelOpts.generateLabels.call(me,me.chart);labelOpts.filter&&(legendItems=legendItems.filter(function(item){return labelOpts.filter(item,me.chart.data)})),me.options.reverse&&legendItems.reverse(),me.legendItems=legendItems},afterBuildLabels:noop,beforeFit:noop,fit:function(){var me=this,opts=me.options,labelOpts=opts.labels,display=opts.display,ctx=me.ctx,globalDefault=Chart.defaults.global,itemOrDefault=helpers.getValueOrDefault,fontSize=itemOrDefault(labelOpts.fontSize,globalDefault.defaultFontSize),fontStyle=itemOrDefault(labelOpts.fontStyle,globalDefault.defaultFontStyle),fontFamily=itemOrDefault(labelOpts.fontFamily,globalDefault.defaultFontFamily),labelFont=helpers.fontString(fontSize,fontStyle,fontFamily),hitboxes=me.legendHitBoxes=[],minSize=me.minSize,isHorizontal=me.isHorizontal();if(isHorizontal?(minSize.width=me.maxWidth,minSize.height=display?10:0):(minSize.width=display?10:0,minSize.height=me.maxHeight),display)if(ctx.font=labelFont,isHorizontal){var lineWidths=me.lineWidths=[0],totalHeight=me.legendItems.length?fontSize+labelOpts.padding:0;ctx.textAlign="left",ctx.textBaseline="top",helpers.each(me.legendItems,function(legendItem,i){var boxWidth=getBoxWidth(labelOpts,fontSize),width=boxWidth+fontSize/2+ctx.measureText(legendItem.text).width;lineWidths[lineWidths.length-1]+width+labelOpts.padding>=me.width&&(totalHeight+=fontSize+labelOpts.padding,lineWidths[lineWidths.length]=me.left),hitboxes[i]={left:0,top:0,width:width,height:fontSize},lineWidths[lineWidths.length-1]+=width+labelOpts.padding}),minSize.height+=totalHeight}else{var vPadding=labelOpts.padding,columnWidths=me.columnWidths=[],totalWidth=labelOpts.padding,currentColWidth=0,currentColHeight=0,itemHeight=fontSize+vPadding;helpers.each(me.legendItems,function(legendItem,i){var boxWidth=getBoxWidth(labelOpts,fontSize),itemWidth=boxWidth+fontSize/2+ctx.measureText(legendItem.text).width;currentColHeight+itemHeight>minSize.height&&(totalWidth+=currentColWidth+labelOpts.padding,columnWidths.push(currentColWidth),currentColWidth=0,currentColHeight=0),currentColWidth=Math.max(currentColWidth,itemWidth),currentColHeight+=itemHeight,hitboxes[i]={left:0,top:0,width:itemWidth,height:fontSize}}),totalWidth+=currentColWidth,columnWidths.push(currentColWidth),minSize.width+=totalWidth}me.width=minSize.width,me.height=minSize.height},afterFit:noop,isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},draw:function(){var me=this,opts=me.options,labelOpts=opts.labels,globalDefault=Chart.defaults.global,lineDefault=globalDefault.elements.line,legendWidth=me.width,lineWidths=me.lineWidths;if(opts.display){var cursor,ctx=me.ctx,itemOrDefault=helpers.getValueOrDefault,fontColor=itemOrDefault(labelOpts.fontColor,globalDefault.defaultFontColor),fontSize=itemOrDefault(labelOpts.fontSize,globalDefault.defaultFontSize),fontStyle=itemOrDefault(labelOpts.fontStyle,globalDefault.defaultFontStyle),fontFamily=itemOrDefault(labelOpts.fontFamily,globalDefault.defaultFontFamily),labelFont=helpers.fontString(fontSize,fontStyle,fontFamily);ctx.textAlign="left",ctx.textBaseline="top",ctx.lineWidth=.5,ctx.strokeStyle=fontColor,ctx.fillStyle=fontColor,ctx.font=labelFont;var boxWidth=getBoxWidth(labelOpts,fontSize),hitboxes=me.legendHitBoxes,drawLegendBox=function(x,y,legendItem){if(!(isNaN(boxWidth)||boxWidth<=0)){ctx.save(),ctx.fillStyle=itemOrDefault(legendItem.fillStyle,globalDefault.defaultColor),ctx.lineCap=itemOrDefault(legendItem.lineCap,lineDefault.borderCapStyle),ctx.lineDashOffset=itemOrDefault(legendItem.lineDashOffset,lineDefault.borderDashOffset),ctx.lineJoin=itemOrDefault(legendItem.lineJoin,lineDefault.borderJoinStyle),ctx.lineWidth=itemOrDefault(legendItem.lineWidth,lineDefault.borderWidth),ctx.strokeStyle=itemOrDefault(legendItem.strokeStyle,globalDefault.defaultColor);var isLineWidthZero=0===itemOrDefault(legendItem.lineWidth,lineDefault.borderWidth);if(ctx.setLineDash&&ctx.setLineDash(itemOrDefault(legendItem.lineDash,lineDefault.borderDash)),opts.labels&&opts.labels.usePointStyle){var radius=fontSize*Math.SQRT2/2,offSet=radius/Math.SQRT2,centerX=x+offSet,centerY=y+offSet;Chart.canvasHelpers.drawPoint(ctx,legendItem.pointStyle,radius,centerX,centerY)}else isLineWidthZero||ctx.strokeRect(x,y,boxWidth,fontSize),ctx.fillRect(x,y,boxWidth,fontSize);ctx.restore()}},fillText=function(x,y,legendItem,textWidth){ctx.fillText(legendItem.text,boxWidth+fontSize/2+x,y),legendItem.hidden&&(ctx.beginPath(),ctx.lineWidth=2,ctx.moveTo(boxWidth+fontSize/2+x,y+fontSize/2),ctx.lineTo(boxWidth+fontSize/2+x+textWidth,y+fontSize/2),ctx.stroke())},isHorizontal=me.isHorizontal();cursor=isHorizontal?{x:me.left+(legendWidth-lineWidths[0])/2,y:me.top+labelOpts.padding,line:0}:{x:me.left+labelOpts.padding,y:me.top+labelOpts.padding,line:0};var itemHeight=fontSize+labelOpts.padding;helpers.each(me.legendItems,function(legendItem,i){var textWidth=ctx.measureText(legendItem.text).width,width=boxWidth+fontSize/2+textWidth,x=cursor.x,y=cursor.y;isHorizontal?x+width>=legendWidth&&(y=cursor.y+=itemHeight,cursor.line++,x=cursor.x=me.left+(legendWidth-lineWidths[cursor.line])/2):y+itemHeight>me.bottom&&(x=cursor.x=x+me.columnWidths[cursor.line]+labelOpts.padding,y=cursor.y=me.top+labelOpts.padding,cursor.line++),drawLegendBox(x,y,legendItem),hitboxes[i].left=x,hitboxes[i].top=y,fillText(x,y,legendItem,textWidth),isHorizontal?cursor.x+=width+labelOpts.padding:cursor.y+=itemHeight})}},handleEvent:function(e){var me=this,opts=me.options,type="mouseup"===e.type?"click":e.type,changed=!1;if("mousemove"===type){if(!opts.onHover)return}else{if("click"!==type)return;if(!opts.onClick)return}var x=e.x,y=e.y;if(x>=me.left&&x<=me.right&&y>=me.top&&y<=me.bottom)for(var lh=me.legendHitBoxes,i=0;i<lh.length;++i){var hitBox=lh[i];if(x>=hitBox.left&&x<=hitBox.left+hitBox.width&&y>=hitBox.top&&y<=hitBox.top+hitBox.height){if("click"===type){opts.onClick.call(me,e.native,me.legendItems[i]),changed=!0;break}if("mousemove"===type){opts.onHover.call(me,e.native,me.legendItems[i]),changed=!0;break}}}return changed}}),Chart.plugins.register({beforeInit:function(chartInstance){var legendOpts=chartInstance.options.legend;legendOpts&&createNewLegendAndAttach(chartInstance,legendOpts)},beforeUpdate:function(chartInstance){var legendOpts=chartInstance.options.legend;legendOpts?(legendOpts=helpers.configMerge(Chart.defaults.global.legend,legendOpts),chartInstance.legend?chartInstance.legend.options=legendOpts:createNewLegendAndAttach(chartInstance,legendOpts)):(Chart.layoutService.removeBox(chartInstance,chartInstance.legend),delete chartInstance.legend)},afterEvent:function(chartInstance,e){var legend=chartInstance.legend;legend&&legend.handleEvent(e)}})}},{}],31:[function(require,module,exports){"use strict";module.exports=function(Chart){var helpers=Chart.helpers;Chart.defaults.global.plugins={},Chart.plugins={_plugins:[],_cacheId:0,register:function(plugins){var p=this._plugins;[].concat(plugins).forEach(function(plugin){-1===p.indexOf(plugin)&&p.push(plugin)}),this._cacheId++},unregister:function(plugins){var p=this._plugins;[].concat(plugins).forEach(function(plugin){var idx=p.indexOf(plugin);-1!==idx&&p.splice(idx,1)}),this._cacheId++},clear:function(){this._plugins=[],this._cacheId++},count:function(){return this._plugins.length},getAll:function(){return this._plugins},notify:function(chart,hook,args){var i,descriptor,plugin,params,method,descriptors=this.descriptors(chart),ilen=descriptors.length;for(i=0;i<ilen;++i)if(descriptor=descriptors[i],plugin=descriptor.plugin,"function"==typeof(method=plugin[hook])&&(params=[chart].concat(args||[]),params.push(descriptor.options),!1===method.apply(plugin,params)))return!1;return!0},descriptors:function(chart){var cache=chart._plugins||(chart._plugins={});if(cache.id===this._cacheId)return cache.descriptors;var plugins=[],descriptors=[],config=chart&&chart.config||{},defaults=Chart.defaults.global.plugins,options=config.options&&config.options.plugins||{};return this._plugins.concat(config.plugins||[]).forEach(function(plugin){if(-1===plugins.indexOf(plugin)){var id=plugin.id,opts=options[id];!1!==opts&&(!0===opts&&(opts=helpers.clone(defaults[id])),plugins.push(plugin),descriptors.push({plugin:plugin,options:opts||{}}))}}),cache.descriptors=descriptors,cache.id=this._cacheId,descriptors}},Chart.pluginService=Chart.plugins,Chart.PluginBase=helpers.inherits({})}},{}],32:[function(require,module,exports){"use strict";module.exports=function(Chart){function computeTextSize(context,tick,font){return helpers.isArray(tick)?helpers.longestText(context,font,tick):context.measureText(tick).width}function parseFontOptions(options){var getValueOrDefault=helpers.getValueOrDefault,globalDefaults=Chart.defaults.global,size=getValueOrDefault(options.fontSize,globalDefaults.defaultFontSize),style=getValueOrDefault(options.fontStyle,globalDefaults.defaultFontStyle),family=getValueOrDefault(options.fontFamily,globalDefaults.defaultFontFamily);return{size:size,style:style,family:family,font:helpers.fontString(size,style,family)}}var helpers=Chart.helpers;Chart.defaults.scale={display:!0,position:"left",gridLines:{display:!0,color:"rgba(0, 0, 0, 0.1)",lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickMarkLength:10,zeroLineWidth:1,zeroLineColor:"rgba(0,0,0,0.25)",offsetGridLines:!1,borderDash:[],borderDashOffset:0},scaleLabel:{labelString:"",display:!1},ticks:{beginAtZero:!1,minRotation:0,maxRotation:50,mirror:!1,padding:0,reverse:!1,display:!0,autoSkip:!0,autoSkipPadding:0,labelOffset:0,callback:Chart.Ticks.formatters.values}},Chart.Scale=Chart.Element.extend({getPadding:function(){var me=this;return{left:me.paddingLeft||0,top:me.paddingTop||0,right:me.paddingRight||0,bottom:me.paddingBottom||0}},beforeUpdate:function(){helpers.callCallback(this.options.beforeUpdate,[this])},update:function(maxWidth,maxHeight,margins){var me=this;return me.beforeUpdate(),me.maxWidth=maxWidth,me.maxHeight=maxHeight,me.margins=helpers.extend({left:0,right:0,top:0,bottom:0},margins),me.longestTextCache=me.longestTextCache||{},me.beforeSetDimensions(),me.setDimensions(),me.afterSetDimensions(),me.beforeDataLimits(),me.determineDataLimits(),me.afterDataLimits(),me.beforeBuildTicks(),me.buildTicks(),me.afterBuildTicks(),me.beforeTickToLabelConversion(),me.convertTicksToLabels(),me.afterTickToLabelConversion(),me.beforeCalculateTickRotation(),me.calculateTickRotation(),me.afterCalculateTickRotation(),me.beforeFit(),me.fit(),me.afterFit(),me.afterUpdate(),me.minSize},afterUpdate:function(){helpers.callCallback(this.options.afterUpdate,[this])},beforeSetDimensions:function(){helpers.callCallback(this.options.beforeSetDimensions,[this])},setDimensions:function(){var me=this;me.isHorizontal()?(me.width=me.maxWidth,me.left=0,me.right=me.width):(me.height=me.maxHeight,me.top=0,me.bottom=me.height),me.paddingLeft=0,me.paddingTop=0,me.paddingRight=0,me.paddingBottom=0},afterSetDimensions:function(){helpers.callCallback(this.options.afterSetDimensions,[this])},beforeDataLimits:function(){helpers.callCallback(this.options.beforeDataLimits,[this])},determineDataLimits:helpers.noop,afterDataLimits:function(){helpers.callCallback(this.options.afterDataLimits,[this])},beforeBuildTicks:function(){helpers.callCallback(this.options.beforeBuildTicks,[this])},buildTicks:helpers.noop,afterBuildTicks:function(){helpers.callCallback(this.options.afterBuildTicks,[this])},beforeTickToLabelConversion:function(){helpers.callCallback(this.options.beforeTickToLabelConversion,[this])},convertTicksToLabels:function(){var me=this,tickOpts=me.options.ticks;me.ticks=me.ticks.map(tickOpts.userCallback||tickOpts.callback)},afterTickToLabelConversion:function(){helpers.callCallback(this.options.afterTickToLabelConversion,[this])},beforeCalculateTickRotation:function(){helpers.callCallback(this.options.beforeCalculateTickRotation,[this])},calculateTickRotation:function(){var me=this,context=me.ctx,tickOpts=me.options.ticks,tickFont=parseFontOptions(tickOpts);context.font=tickFont.font;var labelRotation=tickOpts.minRotation||0;if(me.options.display&&me.isHorizontal())for(var cosRotation,originalLabelWidth=helpers.longestText(context,tickFont.font,me.ticks,me.longestTextCache),labelWidth=originalLabelWidth,tickWidth=me.getPixelForTick(1)-me.getPixelForTick(0)-6;labelWidth>tickWidth&&labelRotation<tickOpts.maxRotation;){var angleRadians=helpers.toRadians(labelRotation);if(cosRotation=Math.cos(angleRadians),Math.sin(angleRadians)*originalLabelWidth>me.maxHeight){labelRotation--;break}labelRotation++,labelWidth=cosRotation*originalLabelWidth}me.labelRotation=labelRotation},afterCalculateTickRotation:function(){helpers.callCallback(this.options.afterCalculateTickRotation,[this])},beforeFit:function(){helpers.callCallback(this.options.beforeFit,[this])},fit:function(){var me=this,minSize=me.minSize={width:0,height:0},opts=me.options,tickOpts=opts.ticks,scaleLabelOpts=opts.scaleLabel,gridLineOpts=opts.gridLines,display=opts.display,isHorizontal=me.isHorizontal(),tickFont=parseFontOptions(tickOpts),scaleLabelFontSize=1.5*parseFontOptions(scaleLabelOpts).size,tickMarkLength=opts.gridLines.tickMarkLength;if(minSize.width=isHorizontal?me.isFullWidth()?me.maxWidth-me.margins.left-me.margins.right:me.maxWidth:display&&gridLineOpts.drawTicks?tickMarkLength:0,minSize.height=isHorizontal?display&&gridLineOpts.drawTicks?tickMarkLength:0:me.maxHeight,scaleLabelOpts.display&&display&&(isHorizontal?minSize.height+=scaleLabelFontSize:minSize.width+=scaleLabelFontSize),tickOpts.display&&display){var largestTextWidth=helpers.longestText(me.ctx,tickFont.font,me.ticks,me.longestTextCache),tallestLabelHeightInLines=helpers.numberOfLabelLines(me.ticks),lineSpace=.5*tickFont.size;if(isHorizontal){me.longestLabelWidth=largestTextWidth;var angleRadians=helpers.toRadians(me.labelRotation),cosRotation=Math.cos(angleRadians),sinRotation=Math.sin(angleRadians),labelHeight=sinRotation*largestTextWidth+tickFont.size*tallestLabelHeightInLines+lineSpace*tallestLabelHeightInLines;minSize.height=Math.min(me.maxHeight,minSize.height+labelHeight),me.ctx.font=tickFont.font;var firstTick=me.ticks[0],firstLabelWidth=computeTextSize(me.ctx,firstTick,tickFont.font),lastTick=me.ticks[me.ticks.length-1],lastLabelWidth=computeTextSize(me.ctx,lastTick,tickFont.font);0!==me.labelRotation?(me.paddingLeft="bottom"===opts.position?cosRotation*firstLabelWidth+3:cosRotation*lineSpace+3,me.paddingRight="bottom"===opts.position?cosRotation*lineSpace+3:cosRotation*lastLabelWidth+3):(me.paddingLeft=firstLabelWidth/2+3,me.paddingRight=lastLabelWidth/2+3)
}else tickOpts.mirror?largestTextWidth=0:largestTextWidth+=me.options.ticks.padding,minSize.width+=largestTextWidth,me.paddingTop=tickFont.size/2,me.paddingBottom=tickFont.size/2}me.handleMargins(),me.width=minSize.width,me.height=minSize.height},handleMargins:function(){var me=this;me.margins&&(me.paddingLeft=Math.max(me.paddingLeft-me.margins.left,0),me.paddingTop=Math.max(me.paddingTop-me.margins.top,0),me.paddingRight=Math.max(me.paddingRight-me.margins.right,0),me.paddingBottom=Math.max(me.paddingBottom-me.margins.bottom,0))},afterFit:function(){helpers.callCallback(this.options.afterFit,[this])},isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},isFullWidth:function(){return this.options.fullWidth},getRightValue:function(rawValue){return null===rawValue||void 0===rawValue?NaN:"number"!=typeof rawValue||isFinite(rawValue)?"object"==typeof rawValue?rawValue instanceof Date||rawValue.isValid?rawValue:this.getRightValue(this.isHorizontal()?rawValue.x:rawValue.y):rawValue:NaN},getLabelForIndex:helpers.noop,getPixelForValue:helpers.noop,getValueForPixel:helpers.noop,getPixelForTick:function(index,includeOffset){var me=this;if(me.isHorizontal()){var innerWidth=me.width-(me.paddingLeft+me.paddingRight),tickWidth=innerWidth/Math.max(me.ticks.length-(me.options.gridLines.offsetGridLines?0:1),1),pixel=tickWidth*index+me.paddingLeft;includeOffset&&(pixel+=tickWidth/2);var finalVal=me.left+Math.round(pixel);return finalVal+=me.isFullWidth()?me.margins.left:0}var innerHeight=me.height-(me.paddingTop+me.paddingBottom);return me.top+index*(innerHeight/(me.ticks.length-1))},getPixelForDecimal:function(decimal){var me=this;if(me.isHorizontal()){var innerWidth=me.width-(me.paddingLeft+me.paddingRight),valueOffset=innerWidth*decimal+me.paddingLeft,finalVal=me.left+Math.round(valueOffset);return finalVal+=me.isFullWidth()?me.margins.left:0}return me.top+decimal*me.height},getBasePixel:function(){return this.getPixelForValue(this.getBaseValue())},getBaseValue:function(){var me=this,min=me.min,max=me.max;return me.beginAtZero?0:min<0&&max<0?max:min>0&&max>0?min:0},draw:function(chartArea){var me=this,options=me.options;if(options.display){var skipRatio,maxTicks,context=me.ctx,globalDefaults=Chart.defaults.global,optionTicks=options.ticks,gridLines=options.gridLines,scaleLabel=options.scaleLabel,isRotated=0!==me.labelRotation,useAutoskipper=optionTicks.autoSkip,isHorizontal=me.isHorizontal();optionTicks.maxTicksLimit&&(maxTicks=optionTicks.maxTicksLimit);var tickFontColor=helpers.getValueOrDefault(optionTicks.fontColor,globalDefaults.defaultFontColor),tickFont=parseFontOptions(optionTicks),tl=gridLines.drawTicks?gridLines.tickMarkLength:0,borderDash=helpers.getValueOrDefault(gridLines.borderDash,globalDefaults.borderDash),borderDashOffset=helpers.getValueOrDefault(gridLines.borderDashOffset,globalDefaults.borderDashOffset),scaleLabelFontColor=helpers.getValueOrDefault(scaleLabel.fontColor,globalDefaults.defaultFontColor),scaleLabelFont=parseFontOptions(scaleLabel),labelRotationRadians=helpers.toRadians(me.labelRotation),cosRotation=Math.cos(labelRotationRadians),longestRotatedLabel=me.longestLabelWidth*cosRotation;context.fillStyle=tickFontColor;var itemsToDraw=[];if(isHorizontal){if(skipRatio=!1,isRotated&&(longestRotatedLabel/=2),(longestRotatedLabel+optionTicks.autoSkipPadding)*me.ticks.length>me.width-(me.paddingLeft+me.paddingRight)&&(skipRatio=1+Math.floor((longestRotatedLabel+optionTicks.autoSkipPadding)*me.ticks.length/(me.width-(me.paddingLeft+me.paddingRight)))),maxTicks&&me.ticks.length>maxTicks)for(;!skipRatio||me.ticks.length/(skipRatio||1)>maxTicks;)skipRatio||(skipRatio=1),skipRatio+=1;useAutoskipper||(skipRatio=!1)}var xTickStart="right"===options.position?me.left:me.right-tl,xTickEnd="right"===options.position?me.left+tl:me.right,yTickStart="bottom"===options.position?me.top:me.bottom-tl,yTickEnd="bottom"===options.position?me.top+tl:me.bottom;if(helpers.each(me.ticks,function(label,index){if(void 0!==label&&null!==label){var isLastTick=me.ticks.length===index+1;if((!(skipRatio>1&&index%skipRatio>0||index%skipRatio==0&&index+skipRatio>=me.ticks.length)||isLastTick)&&void 0!==label&&null!==label){var lineWidth,lineColor;index===(void 0!==me.zeroLineIndex?me.zeroLineIndex:0)?(lineWidth=gridLines.zeroLineWidth,lineColor=gridLines.zeroLineColor):(lineWidth=helpers.getValueAtIndexOrDefault(gridLines.lineWidth,index),lineColor=helpers.getValueAtIndexOrDefault(gridLines.color,index));var tx1,ty1,tx2,ty2,x1,y1,x2,y2,labelX,labelY,textAlign="middle",textBaseline="middle";if(isHorizontal){"bottom"===options.position?(textBaseline=isRotated?"middle":"top",textAlign=isRotated?"right":"center",labelY=me.top+tl):(textBaseline=isRotated?"middle":"bottom",textAlign=isRotated?"left":"center",labelY=me.bottom-tl);var xLineValue=me.getPixelForTick(index)+helpers.aliasPixel(lineWidth);labelX=me.getPixelForTick(index,gridLines.offsetGridLines)+optionTicks.labelOffset,tx1=tx2=x1=x2=xLineValue,ty1=yTickStart,ty2=yTickEnd,y1=chartArea.top,y2=chartArea.bottom}else{var labelXOffset,isLeft="left"===options.position,tickPadding=optionTicks.padding;optionTicks.mirror?(textAlign=isLeft?"left":"right",labelXOffset=tickPadding):(textAlign=isLeft?"right":"left",labelXOffset=tl+tickPadding),labelX=isLeft?me.right-labelXOffset:me.left+labelXOffset;var yLineValue=me.getPixelForTick(index);yLineValue+=helpers.aliasPixel(lineWidth),labelY=me.getPixelForTick(index,gridLines.offsetGridLines),tx1=xTickStart,tx2=xTickEnd,x1=chartArea.left,x2=chartArea.right,ty1=ty2=y1=y2=yLineValue}itemsToDraw.push({tx1:tx1,ty1:ty1,tx2:tx2,ty2:ty2,x1:x1,y1:y1,x2:x2,y2:y2,labelX:labelX,labelY:labelY,glWidth:lineWidth,glColor:lineColor,glBorderDash:borderDash,glBorderDashOffset:borderDashOffset,rotation:-1*labelRotationRadians,label:label,textBaseline:textBaseline,textAlign:textAlign})}}}),helpers.each(itemsToDraw,function(itemToDraw){if(gridLines.display&&(context.save(),context.lineWidth=itemToDraw.glWidth,context.strokeStyle=itemToDraw.glColor,context.setLineDash&&(context.setLineDash(itemToDraw.glBorderDash),context.lineDashOffset=itemToDraw.glBorderDashOffset),context.beginPath(),gridLines.drawTicks&&(context.moveTo(itemToDraw.tx1,itemToDraw.ty1),context.lineTo(itemToDraw.tx2,itemToDraw.ty2)),gridLines.drawOnChartArea&&(context.moveTo(itemToDraw.x1,itemToDraw.y1),context.lineTo(itemToDraw.x2,itemToDraw.y2)),context.stroke(),context.restore()),optionTicks.display){context.save(),context.translate(itemToDraw.labelX,itemToDraw.labelY),context.rotate(itemToDraw.rotation),context.font=tickFont.font,context.textBaseline=itemToDraw.textBaseline,context.textAlign=itemToDraw.textAlign;var label=itemToDraw.label;if(helpers.isArray(label))for(var i=0,y=0;i<label.length;++i)context.fillText(""+label[i],0,y),y+=1.5*tickFont.size;else context.fillText(label,0,0);context.restore()}}),scaleLabel.display){var scaleLabelX,scaleLabelY,rotation=0;if(isHorizontal)scaleLabelX=me.left+(me.right-me.left)/2,scaleLabelY="bottom"===options.position?me.bottom-scaleLabelFont.size/2:me.top+scaleLabelFont.size/2;else{var isLeft="left"===options.position;scaleLabelX=isLeft?me.left+scaleLabelFont.size/2:me.right-scaleLabelFont.size/2,scaleLabelY=me.top+(me.bottom-me.top)/2,rotation=isLeft?-.5*Math.PI:.5*Math.PI}context.save(),context.translate(scaleLabelX,scaleLabelY),context.rotate(rotation),context.textAlign="center",context.textBaseline="middle",context.fillStyle=scaleLabelFontColor,context.font=scaleLabelFont.font,context.fillText(scaleLabel.labelString,0,0),context.restore()}if(gridLines.drawBorder){context.lineWidth=helpers.getValueAtIndexOrDefault(gridLines.lineWidth,0),context.strokeStyle=helpers.getValueAtIndexOrDefault(gridLines.color,0);var x1=me.left,x2=me.right,y1=me.top,y2=me.bottom,aliasPixel=helpers.aliasPixel(context.lineWidth);isHorizontal?(y1=y2="top"===options.position?me.bottom:me.top,y1+=aliasPixel,y2+=aliasPixel):(x1=x2="left"===options.position?me.right:me.left,x1+=aliasPixel,x2+=aliasPixel),context.beginPath(),context.moveTo(x1,y1),context.lineTo(x2,y2),context.stroke()}}}})}},{}],33:[function(require,module,exports){"use strict";module.exports=function(Chart){var helpers=Chart.helpers;Chart.scaleService={constructors:{},defaults:{},registerScaleType:function(type,scaleConstructor,defaults){this.constructors[type]=scaleConstructor,this.defaults[type]=helpers.clone(defaults)},getScaleConstructor:function(type){return this.constructors.hasOwnProperty(type)?this.constructors[type]:void 0},getScaleDefaults:function(type){return this.defaults.hasOwnProperty(type)?helpers.scaleMerge(Chart.defaults.scale,this.defaults[type]):{}},updateScaleDefaults:function(type,additions){var defaults=this.defaults;defaults.hasOwnProperty(type)&&(defaults[type]=helpers.extend(defaults[type],additions))},addScalesToLayout:function(chartInstance){helpers.each(chartInstance.scales,function(scale){Chart.layoutService.addBox(chartInstance,scale)})}}}},{}],34:[function(require,module,exports){"use strict";module.exports=function(Chart){var helpers=Chart.helpers;Chart.Ticks={generators:{linear:function(generationOptions,dataRange){var spacing,ticks=[];if(generationOptions.stepSize&&generationOptions.stepSize>0)spacing=generationOptions.stepSize;else{var niceRange=helpers.niceNum(dataRange.max-dataRange.min,!1);spacing=helpers.niceNum(niceRange/(generationOptions.maxTicks-1),!0)}var niceMin=Math.floor(dataRange.min/spacing)*spacing,niceMax=Math.ceil(dataRange.max/spacing)*spacing;generationOptions.min&&generationOptions.max&&generationOptions.stepSize&&helpers.almostWhole((generationOptions.max-generationOptions.min)/generationOptions.stepSize,spacing/1e3)&&(niceMin=generationOptions.min,niceMax=generationOptions.max);var numSpaces=(niceMax-niceMin)/spacing;numSpaces=helpers.almostEquals(numSpaces,Math.round(numSpaces),spacing/1e3)?Math.round(numSpaces):Math.ceil(numSpaces),ticks.push(void 0!==generationOptions.min?generationOptions.min:niceMin);for(var j=1;j<numSpaces;++j)ticks.push(niceMin+j*spacing);return ticks.push(void 0!==generationOptions.max?generationOptions.max:niceMax),ticks},logarithmic:function(generationOptions,dataRange){var exp,significand,ticks=[],getValueOrDefault=helpers.getValueOrDefault,tickVal=getValueOrDefault(generationOptions.min,Math.pow(10,Math.floor(helpers.log10(dataRange.min)))),endExp=Math.floor(helpers.log10(dataRange.max)),endSignificand=Math.ceil(dataRange.max/Math.pow(10,endExp));0===tickVal?(exp=Math.floor(helpers.log10(dataRange.minNotZero)),significand=Math.floor(dataRange.minNotZero/Math.pow(10,exp)),ticks.push(tickVal),tickVal=significand*Math.pow(10,exp)):(exp=Math.floor(helpers.log10(tickVal)),significand=Math.floor(tickVal/Math.pow(10,exp)));do{ticks.push(tickVal),++significand,10===significand&&(significand=1,++exp),tickVal=significand*Math.pow(10,exp)}while(exp<endExp||exp===endExp&&significand<endSignificand);var lastTick=getValueOrDefault(generationOptions.max,tickVal);return ticks.push(lastTick),ticks}},formatters:{values:function(value){return helpers.isArray(value)?value:""+value},linear:function(tickValue,index,ticks){var delta=ticks.length>3?ticks[2]-ticks[1]:ticks[1]-ticks[0];Math.abs(delta)>1&&tickValue!==Math.floor(tickValue)&&(delta=tickValue-Math.floor(tickValue));var logDelta=helpers.log10(Math.abs(delta)),tickString="";if(0!==tickValue){var numDecimal=-1*Math.floor(logDelta);numDecimal=Math.max(Math.min(numDecimal,20),0),tickString=tickValue.toFixed(numDecimal)}else tickString="0";return tickString},logarithmic:function(tickValue,index,ticks){var remain=tickValue/Math.pow(10,Math.floor(helpers.log10(tickValue)));return 0===tickValue?"0":1===remain||2===remain||5===remain||0===index||index===ticks.length-1?tickValue.toExponential():""}}}}},{}],35:[function(require,module,exports){"use strict";module.exports=function(Chart){function createNewTitleBlockAndAttach(chartInstance,titleOpts){var title=new Chart.Title({ctx:chartInstance.chart.ctx,options:titleOpts,chart:chartInstance});chartInstance.titleBlock=title,Chart.layoutService.addBox(chartInstance,title)}var helpers=Chart.helpers;Chart.defaults.global.title={display:!1,position:"top",fullWidth:!0,fontStyle:"bold",padding:10,text:""};var noop=helpers.noop;Chart.Title=Chart.Element.extend({initialize:function(config){var me=this;helpers.extend(me,config),me.legendHitBoxes=[]},beforeUpdate:noop,update:function(maxWidth,maxHeight,margins){var me=this;return me.beforeUpdate(),me.maxWidth=maxWidth,me.maxHeight=maxHeight,me.margins=margins,me.beforeSetDimensions(),me.setDimensions(),me.afterSetDimensions(),me.beforeBuildLabels(),me.buildLabels(),me.afterBuildLabels(),me.beforeFit(),me.fit(),me.afterFit(),me.afterUpdate(),me.minSize},afterUpdate:noop,beforeSetDimensions:noop,setDimensions:function(){var me=this;me.isHorizontal()?(me.width=me.maxWidth,me.left=0,me.right=me.width):(me.height=me.maxHeight,me.top=0,me.bottom=me.height),me.paddingLeft=0,me.paddingTop=0,me.paddingRight=0,me.paddingBottom=0,me.minSize={width:0,height:0}},afterSetDimensions:noop,beforeBuildLabels:noop,buildLabels:noop,afterBuildLabels:noop,beforeFit:noop,fit:function(){var me=this,valueOrDefault=helpers.getValueOrDefault,opts=me.options,globalDefaults=Chart.defaults.global,display=opts.display,fontSize=valueOrDefault(opts.fontSize,globalDefaults.defaultFontSize),minSize=me.minSize;me.isHorizontal()?(minSize.width=me.maxWidth,minSize.height=display?fontSize+2*opts.padding:0):(minSize.width=display?fontSize+2*opts.padding:0,minSize.height=me.maxHeight),me.width=minSize.width,me.height=minSize.height},afterFit:noop,isHorizontal:function(){var pos=this.options.position;return"top"===pos||"bottom"===pos},draw:function(){var me=this,ctx=me.ctx,valueOrDefault=helpers.getValueOrDefault,opts=me.options,globalDefaults=Chart.defaults.global;if(opts.display){var titleX,titleY,maxWidth,fontSize=valueOrDefault(opts.fontSize,globalDefaults.defaultFontSize),fontStyle=valueOrDefault(opts.fontStyle,globalDefaults.defaultFontStyle),fontFamily=valueOrDefault(opts.fontFamily,globalDefaults.defaultFontFamily),titleFont=helpers.fontString(fontSize,fontStyle,fontFamily),rotation=0,top=me.top,left=me.left,bottom=me.bottom,right=me.right;ctx.fillStyle=valueOrDefault(opts.fontColor,globalDefaults.defaultFontColor),ctx.font=titleFont,me.isHorizontal()?(titleX=left+(right-left)/2,titleY=top+(bottom-top)/2,maxWidth=right-left):(titleX="left"===opts.position?left+fontSize/2:right-fontSize/2,titleY=top+(bottom-top)/2,maxWidth=bottom-top,rotation=Math.PI*("left"===opts.position?-.5:.5)),ctx.save(),ctx.translate(titleX,titleY),ctx.rotate(rotation),ctx.textAlign="center",ctx.textBaseline="middle",ctx.fillText(opts.text,0,0,maxWidth),ctx.restore()}}}),Chart.plugins.register({beforeInit:function(chartInstance){var titleOpts=chartInstance.options.title;titleOpts&&createNewTitleBlockAndAttach(chartInstance,titleOpts)},beforeUpdate:function(chartInstance){var titleOpts=chartInstance.options.title;titleOpts?(titleOpts=helpers.configMerge(Chart.defaults.global.title,titleOpts),chartInstance.titleBlock?chartInstance.titleBlock.options=titleOpts:createNewTitleBlockAndAttach(chartInstance,titleOpts)):(Chart.layoutService.removeBox(chartInstance,chartInstance.titleBlock),delete chartInstance.titleBlock)}})}},{}],36:[function(require,module,exports){"use strict";module.exports=function(Chart){function mergeOpacity(colorString,opacity){var color=helpers.color(colorString);return color.alpha(opacity*color.alpha()).rgbaString()}function pushOrConcat(base,toPush){return toPush&&(helpers.isArray(toPush)?Array.prototype.push.apply(base,toPush):base.push(toPush)),base}function createTooltipItem(element){var xScale=element._xScale,yScale=element._yScale||element._scale,index=element._index,datasetIndex=element._datasetIndex;return{xLabel:xScale?xScale.getLabelForIndex(index,datasetIndex):"",yLabel:yScale?yScale.getLabelForIndex(index,datasetIndex):"",index:index,datasetIndex:datasetIndex,x:element._model.x,y:element._model.y}}function getBaseModel(tooltipOpts){var globalDefaults=Chart.defaults.global,getValueOrDefault=helpers.getValueOrDefault;return{xPadding:tooltipOpts.xPadding,yPadding:tooltipOpts.yPadding,xAlign:tooltipOpts.xAlign,yAlign:tooltipOpts.yAlign,bodyFontColor:tooltipOpts.bodyFontColor,_bodyFontFamily:getValueOrDefault(tooltipOpts.bodyFontFamily,globalDefaults.defaultFontFamily),_bodyFontStyle:getValueOrDefault(tooltipOpts.bodyFontStyle,globalDefaults.defaultFontStyle),_bodyAlign:tooltipOpts.bodyAlign,bodyFontSize:getValueOrDefault(tooltipOpts.bodyFontSize,globalDefaults.defaultFontSize),bodySpacing:tooltipOpts.bodySpacing,titleFontColor:tooltipOpts.titleFontColor,_titleFontFamily:getValueOrDefault(tooltipOpts.titleFontFamily,globalDefaults.defaultFontFamily),_titleFontStyle:getValueOrDefault(tooltipOpts.titleFontStyle,globalDefaults.defaultFontStyle),titleFontSize:getValueOrDefault(tooltipOpts.titleFontSize,globalDefaults.defaultFontSize),_titleAlign:tooltipOpts.titleAlign,titleSpacing:tooltipOpts.titleSpacing,titleMarginBottom:tooltipOpts.titleMarginBottom,footerFontColor:tooltipOpts.footerFontColor,_footerFontFamily:getValueOrDefault(tooltipOpts.footerFontFamily,globalDefaults.defaultFontFamily),_footerFontStyle:getValueOrDefault(tooltipOpts.footerFontStyle,globalDefaults.defaultFontStyle),footerFontSize:getValueOrDefault(tooltipOpts.footerFontSize,globalDefaults.defaultFontSize),_footerAlign:tooltipOpts.footerAlign,footerSpacing:tooltipOpts.footerSpacing,footerMarginTop:tooltipOpts.footerMarginTop,caretSize:tooltipOpts.caretSize,cornerRadius:tooltipOpts.cornerRadius,backgroundColor:tooltipOpts.backgroundColor,opacity:0,legendColorBackground:tooltipOpts.multiKeyBackground,displayColors:tooltipOpts.displayColors}}function getTooltipSize(tooltip,model){var ctx=tooltip._chart.ctx,height=2*model.yPadding,width=0,body=model.body,combinedBodyLength=body.reduce(function(count,bodyItem){return count+bodyItem.before.length+bodyItem.lines.length+bodyItem.after.length},0);combinedBodyLength+=model.beforeBody.length+model.afterBody.length;var titleLineCount=model.title.length,footerLineCount=model.footer.length,titleFontSize=model.titleFontSize,bodyFontSize=model.bodyFontSize,footerFontSize=model.footerFontSize;height+=titleLineCount*titleFontSize,height+=titleLineCount?(titleLineCount-1)*model.titleSpacing:0,height+=titleLineCount?model.titleMarginBottom:0,height+=combinedBodyLength*bodyFontSize,height+=combinedBodyLength?(combinedBodyLength-1)*model.bodySpacing:0,height+=footerLineCount?model.footerMarginTop:0,height+=footerLineCount*footerFontSize,height+=footerLineCount?(footerLineCount-1)*model.footerSpacing:0;var widthPadding=0,maxLineWidth=function(line){width=Math.max(width,ctx.measureText(line).width+widthPadding)};return ctx.font=helpers.fontString(titleFontSize,model._titleFontStyle,model._titleFontFamily),helpers.each(model.title,maxLineWidth),ctx.font=helpers.fontString(bodyFontSize,model._bodyFontStyle,model._bodyFontFamily),helpers.each(model.beforeBody.concat(model.afterBody),maxLineWidth),widthPadding=model.displayColors?bodyFontSize+2:0,helpers.each(body,function(bodyItem){helpers.each(bodyItem.before,maxLineWidth),helpers.each(bodyItem.lines,maxLineWidth),helpers.each(bodyItem.after,maxLineWidth)}),widthPadding=0,ctx.font=helpers.fontString(footerFontSize,model._footerFontStyle,model._footerFontFamily),helpers.each(model.footer,maxLineWidth),width+=2*model.xPadding,{width:width,height:height}}function determineAlignment(tooltip,size){var model=tooltip._model,chart=tooltip._chart,chartArea=tooltip._chartInstance.chartArea,xAlign="center",yAlign="center";model.y<size.height?yAlign="top":model.y>chart.height-size.height&&(yAlign="bottom");var lf,rf,olf,orf,yf,midX=(chartArea.left+chartArea.right)/2,midY=(chartArea.top+chartArea.bottom)/2;"center"===yAlign?(lf=function(x){return x<=midX},rf=function(x){return x>midX}):(lf=function(x){return x<=size.width/2},rf=function(x){return x>=chart.width-size.width/2}),olf=function(x){return x+size.width>chart.width},orf=function(x){return x-size.width<0},yf=function(y){return y<=midY?"top":"bottom"},lf(model.x)?(xAlign="left",olf(model.x)&&(xAlign="center",yAlign=yf(model.y))):rf(model.x)&&(xAlign="right",orf(model.x)&&(xAlign="center",yAlign=yf(model.y)));var opts=tooltip._options;return{xAlign:opts.xAlign?opts.xAlign:xAlign,yAlign:opts.yAlign?opts.yAlign:yAlign}}function getBackgroundPoint(vm,size,alignment){var x=vm.x,y=vm.y,caretSize=vm.caretSize,caretPadding=vm.caretPadding,cornerRadius=vm.cornerRadius,xAlign=alignment.xAlign,yAlign=alignment.yAlign,paddingAndSize=caretSize+caretPadding,radiusAndPadding=cornerRadius+caretPadding;return"right"===xAlign?x-=size.width:"center"===xAlign&&(x-=size.width/2),"top"===yAlign?y+=paddingAndSize:y-="bottom"===yAlign?size.height+paddingAndSize:size.height/2,"center"===yAlign?"left"===xAlign?x+=paddingAndSize:"right"===xAlign&&(x-=paddingAndSize):"left"===xAlign?x-=radiusAndPadding:"right"===xAlign&&(x+=radiusAndPadding),{x:x,y:y}}var helpers=Chart.helpers;Chart.defaults.global.tooltips={enabled:!0,custom:null,mode:"nearest",position:"average",intersect:!0,backgroundColor:"rgba(0,0,0,0.8)",titleFontStyle:"bold",titleSpacing:2,titleMarginBottom:6,titleFontColor:"#fff",titleAlign:"left",bodySpacing:2,bodyFontColor:"#fff",bodyAlign:"left",footerFontStyle:"bold",footerSpacing:2,footerMarginTop:6,footerFontColor:"#fff",footerAlign:"left",yPadding:6,xPadding:6,caretSize:5,cornerRadius:6,multiKeyBackground:"#fff",displayColors:!0,callbacks:{beforeTitle:helpers.noop,title:function(tooltipItems,data){var title="",labels=data.labels,labelCount=labels?labels.length:0;if(tooltipItems.length>0){var item=tooltipItems[0];item.xLabel?title=item.xLabel:labelCount>0&&item.index<labelCount&&(title=labels[item.index])}return title},afterTitle:helpers.noop,beforeBody:helpers.noop,beforeLabel:helpers.noop,label:function(tooltipItem,data){return(data.datasets[tooltipItem.datasetIndex].label||"")+": "+tooltipItem.yLabel},labelColor:function(tooltipItem,chartInstance){var meta=chartInstance.getDatasetMeta(tooltipItem.datasetIndex),activeElement=meta.data[tooltipItem.index],view=activeElement._view;return{borderColor:view.borderColor,backgroundColor:view.backgroundColor}},afterLabel:helpers.noop,afterBody:helpers.noop,beforeFooter:helpers.noop,footer:helpers.noop,afterFooter:helpers.noop}},Chart.Tooltip=Chart.Element.extend({initialize:function(){this._model=getBaseModel(this._options)},getTitle:function(){var me=this,opts=me._options,callbacks=opts.callbacks,beforeTitle=callbacks.beforeTitle.apply(me,arguments),title=callbacks.title.apply(me,arguments),afterTitle=callbacks.afterTitle.apply(me,arguments),lines=[];return lines=pushOrConcat(lines,beforeTitle),lines=pushOrConcat(lines,title),lines=pushOrConcat(lines,afterTitle)},getBeforeBody:function(){var lines=this._options.callbacks.beforeBody.apply(this,arguments);return helpers.isArray(lines)?lines:void 0!==lines?[lines]:[]},getBody:function(tooltipItems,data){var me=this,callbacks=me._options.callbacks,bodyItems=[];return helpers.each(tooltipItems,function(tooltipItem){var bodyItem={before:[],lines:[],after:[]};pushOrConcat(bodyItem.before,callbacks.beforeLabel.call(me,tooltipItem,data)),pushOrConcat(bodyItem.lines,callbacks.label.call(me,tooltipItem,data)),pushOrConcat(bodyItem.after,callbacks.afterLabel.call(me,tooltipItem,data)),bodyItems.push(bodyItem)}),bodyItems},getAfterBody:function(){var lines=this._options.callbacks.afterBody.apply(this,arguments);return helpers.isArray(lines)?lines:void 0!==lines?[lines]:[]},getFooter:function(){var me=this,callbacks=me._options.callbacks,beforeFooter=callbacks.beforeFooter.apply(me,arguments),footer=callbacks.footer.apply(me,arguments),afterFooter=callbacks.afterFooter.apply(me,arguments),lines=[];return lines=pushOrConcat(lines,beforeFooter),lines=pushOrConcat(lines,footer),lines=pushOrConcat(lines,afterFooter)},update:function(changed){var i,len,me=this,opts=me._options,existingModel=me._model,model=me._model=getBaseModel(opts),active=me._active,data=me._data,chartInstance=me._chartInstance,alignment={xAlign:existingModel.xAlign,yAlign:existingModel.yAlign},backgroundPoint={x:existingModel.x,y:existingModel.y},tooltipSize={width:existingModel.width,height:existingModel.height},tooltipPosition={x:existingModel.caretX,y:existingModel.caretY};if(active.length){model.opacity=1;var labelColors=[];tooltipPosition=Chart.Tooltip.positioners[opts.position](active,me._eventPosition);var tooltipItems=[];for(i=0,len=active.length;i<len;++i)tooltipItems.push(createTooltipItem(active[i]));opts.filter&&(tooltipItems=tooltipItems.filter(function(a){return opts.filter(a,data)})),opts.itemSort&&(tooltipItems=tooltipItems.sort(function(a,b){return opts.itemSort(a,b,data)})),helpers.each(tooltipItems,function(tooltipItem){labelColors.push(opts.callbacks.labelColor.call(me,tooltipItem,chartInstance))}),model.title=me.getTitle(tooltipItems,data),model.beforeBody=me.getBeforeBody(tooltipItems,data),model.body=me.getBody(tooltipItems,data),model.afterBody=me.getAfterBody(tooltipItems,data),model.footer=me.getFooter(tooltipItems,data),model.x=Math.round(tooltipPosition.x),model.y=Math.round(tooltipPosition.y),model.caretPadding=helpers.getValueOrDefault(tooltipPosition.padding,2),model.labelColors=labelColors,model.dataPoints=tooltipItems,tooltipSize=getTooltipSize(this,model),alignment=determineAlignment(this,tooltipSize),backgroundPoint=getBackgroundPoint(model,tooltipSize,alignment)}else model.opacity=0;return model.xAlign=alignment.xAlign,model.yAlign=alignment.yAlign,model.x=backgroundPoint.x,model.y=backgroundPoint.y,model.width=tooltipSize.width,model.height=tooltipSize.height,model.caretX=tooltipPosition.x,model.caretY=tooltipPosition.y,me._model=model,changed&&opts.custom&&opts.custom.call(me,model),me},drawCaret:function(tooltipPoint,size,opacity){var x1,x2,x3,y1,y2,y3,vm=this._view,ctx=this._chart.ctx,caretSize=vm.caretSize,cornerRadius=vm.cornerRadius,xAlign=vm.xAlign,yAlign=vm.yAlign,ptX=tooltipPoint.x,ptY=tooltipPoint.y,width=size.width,height=size.height;"center"===yAlign?("left"===xAlign?(x1=ptX,x2=x1-caretSize,x3=x1):(x1=ptX+width,x2=x1+caretSize,x3=x1),y2=ptY+height/2,y1=y2-caretSize,y3=y2+caretSize):("left"===xAlign?(x1=ptX+cornerRadius,x2=x1+caretSize,x3=x2+caretSize):"right"===xAlign?(x1=ptX+width-cornerRadius,x2=x1-caretSize,x3=x2-caretSize):(x2=ptX+width/2,x1=x2-caretSize,x3=x2+caretSize),"top"===yAlign?(y1=ptY,y2=y1-caretSize,y3=y1):(y1=ptY+height,y2=y1+caretSize,y3=y1)),ctx.fillStyle=mergeOpacity(vm.backgroundColor,opacity),ctx.beginPath(),ctx.moveTo(x1,y1),ctx.lineTo(x2,y2),ctx.lineTo(x3,y3),ctx.closePath(),ctx.fill()},drawTitle:function(pt,vm,ctx,opacity){var title=vm.title;if(title.length){ctx.textAlign=vm._titleAlign,ctx.textBaseline="top";var titleFontSize=vm.titleFontSize,titleSpacing=vm.titleSpacing;ctx.fillStyle=mergeOpacity(vm.titleFontColor,opacity),ctx.font=helpers.fontString(titleFontSize,vm._titleFontStyle,vm._titleFontFamily);var i,len;for(i=0,len=title.length;i<len;++i)ctx.fillText(title[i],pt.x,pt.y),pt.y+=titleFontSize+titleSpacing,i+1===title.length&&(pt.y+=vm.titleMarginBottom-titleSpacing)}},drawBody:function(pt,vm,ctx,opacity){var bodyFontSize=vm.bodyFontSize,bodySpacing=vm.bodySpacing,body=vm.body;ctx.textAlign=vm._bodyAlign,ctx.textBaseline="top";var textColor=mergeOpacity(vm.bodyFontColor,opacity);ctx.fillStyle=textColor,ctx.font=helpers.fontString(bodyFontSize,vm._bodyFontStyle,vm._bodyFontFamily);var xLinePadding=0,fillLineOfText=function(line){ctx.fillText(line,pt.x+xLinePadding,pt.y),pt.y+=bodyFontSize+bodySpacing};helpers.each(vm.beforeBody,fillLineOfText);var drawColorBoxes=vm.displayColors;xLinePadding=drawColorBoxes?bodyFontSize+2:0,helpers.each(body,function(bodyItem,i){helpers.each(bodyItem.before,fillLineOfText),helpers.each(bodyItem.lines,function(line){drawColorBoxes&&(ctx.fillStyle=mergeOpacity(vm.legendColorBackground,opacity),ctx.fillRect(pt.x,pt.y,bodyFontSize,bodyFontSize),ctx.strokeStyle=mergeOpacity(vm.labelColors[i].borderColor,opacity),ctx.strokeRect(pt.x,pt.y,bodyFontSize,bodyFontSize),ctx.fillStyle=mergeOpacity(vm.labelColors[i].backgroundColor,opacity),ctx.fillRect(pt.x+1,pt.y+1,bodyFontSize-2,bodyFontSize-2),ctx.fillStyle=textColor),fillLineOfText(line)}),helpers.each(bodyItem.after,fillLineOfText)}),xLinePadding=0,helpers.each(vm.afterBody,fillLineOfText),pt.y-=bodySpacing},drawFooter:function(pt,vm,ctx,opacity){var footer=vm.footer;footer.length&&(pt.y+=vm.footerMarginTop,ctx.textAlign=vm._footerAlign,ctx.textBaseline="top",ctx.fillStyle=mergeOpacity(vm.footerFontColor,opacity),ctx.font=helpers.fontString(vm.footerFontSize,vm._footerFontStyle,vm._footerFontFamily),helpers.each(footer,function(line){ctx.fillText(line,pt.x,pt.y),pt.y+=vm.footerFontSize+vm.footerSpacing}))},drawBackground:function(pt,vm,ctx,tooltipSize,opacity){ctx.fillStyle=mergeOpacity(vm.backgroundColor,opacity),helpers.drawRoundedRectangle(ctx,pt.x,pt.y,tooltipSize.width,tooltipSize.height,vm.cornerRadius),ctx.fill()},draw:function(){var ctx=this._chart.ctx,vm=this._view;if(0!==vm.opacity){var tooltipSize={width:vm.width,height:vm.height},pt={x:vm.x,y:vm.y},opacity=Math.abs(vm.opacity<.001)?0:vm.opacity;this._options.enabled&&(this.drawBackground(pt,vm,ctx,tooltipSize,opacity),this.drawCaret(pt,tooltipSize,opacity),pt.x+=vm.xPadding,pt.y+=vm.yPadding,this.drawTitle(pt,vm,ctx,opacity),this.drawBody(pt,vm,ctx,opacity),this.drawFooter(pt,vm,ctx,opacity))}},handleEvent:function(e){var me=this,options=me._options,changed=!1;if(me._lastActive=me._lastActive||[],"mouseout"===e.type?me._active=[]:me._active=me._chartInstance.getElementsAtEventForMode(e,options.mode,options),changed=!helpers.arrayEquals(me._active,me._lastActive),me._lastActive=me._active,options.enabled||options.custom){me._eventPosition={x:e.x,y:e.y};var model=me._model;me.update(!0),me.pivot(),changed|=model.x!==me._model.x||model.y!==me._model.y}return changed}}),Chart.Tooltip.positioners={average:function(elements){if(!elements.length)return!1;var i,len,x=0,y=0,count=0;for(i=0,len=elements.length;i<len;++i){var el=elements[i];if(el&&el.hasValue()){var pos=el.tooltipPosition();x+=pos.x,y+=pos.y,++count}}return{x:Math.round(x/count),y:Math.round(y/count)}},nearest:function(elements,eventPosition){var nearestElement,i,len,x=eventPosition.x,y=eventPosition.y,minDistance=Number.POSITIVE_INFINITY;for(i=0,len=elements.length;i<len;++i){var el=elements[i];if(el&&el.hasValue()){var center=el.getCenterPoint(),d=helpers.distanceBetweenPoints(eventPosition,center);d<minDistance&&(minDistance=d,nearestElement=el)}}if(nearestElement){var tp=nearestElement.tooltipPosition();x=tp.x,y=tp.y}return{x:x,y:y}}}}},{}],37:[function(require,module,exports){"use strict";module.exports=function(Chart){var helpers=Chart.helpers,globalOpts=Chart.defaults.global;globalOpts.elements.arc={backgroundColor:globalOpts.defaultColor,borderColor:"#fff",borderWidth:2},Chart.elements.Arc=Chart.Element.extend({inLabelRange:function(mouseX){var vm=this._view;return!!vm&&Math.pow(mouseX-vm.x,2)<Math.pow(vm.radius+vm.hoverRadius,2)},inRange:function(chartX,chartY){var vm=this._view;if(vm){for(var pointRelativePosition=helpers.getAngleFromPoint(vm,{x:chartX,y:chartY}),angle=pointRelativePosition.angle,distance=pointRelativePosition.distance,startAngle=vm.startAngle,endAngle=vm.endAngle;endAngle<startAngle;)endAngle+=2*Math.PI;for(;angle>endAngle;)angle-=2*Math.PI;for(;angle<startAngle;)angle+=2*Math.PI;var betweenAngles=angle>=startAngle&&angle<=endAngle,withinRadius=distance>=vm.innerRadius&&distance<=vm.outerRadius;return betweenAngles&&withinRadius}return!1},getCenterPoint:function(){var vm=this._view,halfAngle=(vm.startAngle+vm.endAngle)/2,halfRadius=(vm.innerRadius+vm.outerRadius)/2;return{x:vm.x+Math.cos(halfAngle)*halfRadius,y:vm.y+Math.sin(halfAngle)*halfRadius}},getArea:function(){var vm=this._view
;return Math.PI*((vm.endAngle-vm.startAngle)/(2*Math.PI))*(Math.pow(vm.outerRadius,2)-Math.pow(vm.innerRadius,2))},tooltipPosition:function(){var vm=this._view,centreAngle=vm.startAngle+(vm.endAngle-vm.startAngle)/2,rangeFromCentre=(vm.outerRadius-vm.innerRadius)/2+vm.innerRadius;return{x:vm.x+Math.cos(centreAngle)*rangeFromCentre,y:vm.y+Math.sin(centreAngle)*rangeFromCentre}},draw:function(){var ctx=this._chart.ctx,vm=this._view,sA=vm.startAngle,eA=vm.endAngle;ctx.beginPath(),ctx.arc(vm.x,vm.y,vm.outerRadius,sA,eA),ctx.arc(vm.x,vm.y,vm.innerRadius,eA,sA,!0),ctx.closePath(),ctx.strokeStyle=vm.borderColor,ctx.lineWidth=vm.borderWidth,ctx.fillStyle=vm.backgroundColor,ctx.fill(),ctx.lineJoin="bevel",vm.borderWidth&&ctx.stroke()}})}},{}],38:[function(require,module,exports){"use strict";module.exports=function(Chart){var helpers=Chart.helpers,globalDefaults=Chart.defaults.global;Chart.defaults.global.elements.line={tension:.4,backgroundColor:globalDefaults.defaultColor,borderWidth:3,borderColor:globalDefaults.defaultColor,borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",capBezierPoints:!0,fill:!0},Chart.elements.Line=Chart.Element.extend({draw:function(){function lineToPoint(previousPoint,point){var pointVM=point._view;!0===point._view.steppedLine?(ctx.lineTo(pointVM.x,previousPoint._view.y),ctx.lineTo(pointVM.x,pointVM.y)):0===point._view.tension?ctx.lineTo(pointVM.x,pointVM.y):ctx.bezierCurveTo(previousPoint._view.controlPointNextX,previousPoint._view.controlPointNextY,pointVM.controlPointPreviousX,pointVM.controlPointPreviousY,pointVM.x,pointVM.y)}var me=this,vm=me._view,spanGaps=vm.spanGaps,fillPoint=vm.scaleZero,loop=me._loop;loop||("top"===vm.fill?fillPoint=vm.scaleTop:"bottom"===vm.fill&&(fillPoint=vm.scaleBottom));var ctx=me._chart.ctx;ctx.save();var points=me._children.slice(),lastDrawnIndex=-1;loop&&points.length&&points.push(points[0]);var index,current,previous,currentVM;if(points.length&&vm.fill){for(ctx.beginPath(),index=0;index<points.length;++index)current=points[index],previous=helpers.previousItem(points,index),currentVM=current._view,0===index?(loop?ctx.moveTo(fillPoint.x,fillPoint.y):ctx.moveTo(currentVM.x,fillPoint),currentVM.skip||(lastDrawnIndex=index,ctx.lineTo(currentVM.x,currentVM.y))):(previous=-1===lastDrawnIndex?previous:points[lastDrawnIndex],currentVM.skip?spanGaps||lastDrawnIndex!==index-1||(loop?ctx.lineTo(fillPoint.x,fillPoint.y):ctx.lineTo(previous._view.x,fillPoint)):(lastDrawnIndex!==index-1?spanGaps&&-1!==lastDrawnIndex?lineToPoint(previous,current):loop?ctx.lineTo(currentVM.x,currentVM.y):(ctx.lineTo(currentVM.x,fillPoint),ctx.lineTo(currentVM.x,currentVM.y)):lineToPoint(previous,current),lastDrawnIndex=index));loop||-1===lastDrawnIndex||ctx.lineTo(points[lastDrawnIndex]._view.x,fillPoint),ctx.fillStyle=vm.backgroundColor||globalDefaults.defaultColor,ctx.closePath(),ctx.fill()}var globalOptionLineElements=globalDefaults.elements.line;for(ctx.lineCap=vm.borderCapStyle||globalOptionLineElements.borderCapStyle,ctx.setLineDash&&ctx.setLineDash(vm.borderDash||globalOptionLineElements.borderDash),ctx.lineDashOffset=vm.borderDashOffset||globalOptionLineElements.borderDashOffset,ctx.lineJoin=vm.borderJoinStyle||globalOptionLineElements.borderJoinStyle,ctx.lineWidth=vm.borderWidth||globalOptionLineElements.borderWidth,ctx.strokeStyle=vm.borderColor||globalDefaults.defaultColor,ctx.beginPath(),lastDrawnIndex=-1,index=0;index<points.length;++index)current=points[index],previous=helpers.previousItem(points,index),currentVM=current._view,0===index?currentVM.skip||(ctx.moveTo(currentVM.x,currentVM.y),lastDrawnIndex=index):(previous=-1===lastDrawnIndex?previous:points[lastDrawnIndex],currentVM.skip||(lastDrawnIndex!==index-1&&!spanGaps||-1===lastDrawnIndex?ctx.moveTo(currentVM.x,currentVM.y):lineToPoint(previous,current),lastDrawnIndex=index));ctx.stroke(),ctx.restore()}})}},{}],39:[function(require,module,exports){"use strict";module.exports=function(Chart){function xRange(mouseX){var vm=this._view;return!!vm&&Math.pow(mouseX-vm.x,2)<Math.pow(vm.radius+vm.hitRadius,2)}function yRange(mouseY){var vm=this._view;return!!vm&&Math.pow(mouseY-vm.y,2)<Math.pow(vm.radius+vm.hitRadius,2)}var helpers=Chart.helpers,globalOpts=Chart.defaults.global,defaultColor=globalOpts.defaultColor;globalOpts.elements.point={radius:3,pointStyle:"circle",backgroundColor:defaultColor,borderWidth:1,borderColor:defaultColor,hitRadius:1,hoverRadius:4,hoverBorderWidth:1},Chart.elements.Point=Chart.Element.extend({inRange:function(mouseX,mouseY){var vm=this._view;return!!vm&&Math.pow(mouseX-vm.x,2)+Math.pow(mouseY-vm.y,2)<Math.pow(vm.hitRadius+vm.radius,2)},inLabelRange:xRange,inXRange:xRange,inYRange:yRange,getCenterPoint:function(){var vm=this._view;return{x:vm.x,y:vm.y}},getArea:function(){return Math.PI*Math.pow(this._view.radius,2)},tooltipPosition:function(){var vm=this._view;return{x:vm.x,y:vm.y,padding:vm.radius+vm.borderWidth}},draw:function(chartArea){var vm=this._view,model=this._model,ctx=this._chart.ctx,pointStyle=vm.pointStyle,radius=vm.radius,x=vm.x,y=vm.y,color=Chart.helpers.color,ratio=0;vm.skip||(ctx.strokeStyle=vm.borderColor||defaultColor,ctx.lineWidth=helpers.getValueOrDefault(vm.borderWidth,globalOpts.elements.point.borderWidth),ctx.fillStyle=vm.backgroundColor||defaultColor,void 0!==chartArea&&(model.x<chartArea.left||1.01*chartArea.right<model.x||model.y<chartArea.top||1.01*chartArea.bottom<model.y)&&(model.x<chartArea.left?ratio=(x-model.x)/(chartArea.left-model.x):1.01*chartArea.right<model.x?ratio=(model.x-x)/(model.x-chartArea.right):model.y<chartArea.top?ratio=(y-model.y)/(chartArea.top-model.y):1.01*chartArea.bottom<model.y&&(ratio=(model.y-y)/(model.y-chartArea.bottom)),ratio=Math.round(100*ratio)/100,ctx.strokeStyle=color(ctx.strokeStyle).alpha(ratio).rgbString(),ctx.fillStyle=color(ctx.fillStyle).alpha(ratio).rgbString()),Chart.canvasHelpers.drawPoint(ctx,pointStyle,radius,x,y))}})}},{}],40:[function(require,module,exports){"use strict";module.exports=function(Chart){function isVertical(bar){return void 0!==bar._view.width}function getBarBounds(bar){var x1,x2,y1,y2,vm=bar._view;if(isVertical(bar)){var halfWidth=vm.width/2;x1=vm.x-halfWidth,x2=vm.x+halfWidth,y1=Math.min(vm.y,vm.base),y2=Math.max(vm.y,vm.base)}else{var halfHeight=vm.height/2;x1=Math.min(vm.x,vm.base),x2=Math.max(vm.x,vm.base),y1=vm.y-halfHeight,y2=vm.y+halfHeight}return{left:x1,top:y1,right:x2,bottom:y2}}var globalOpts=Chart.defaults.global;globalOpts.elements.rectangle={backgroundColor:globalOpts.defaultColor,borderWidth:0,borderColor:globalOpts.defaultColor,borderSkipped:"bottom"},Chart.elements.Rectangle=Chart.Element.extend({draw:function(){function cornerAt(index){return corners[(startCorner+index)%4]}var left,right,top,bottom,signX,signY,borderSkipped,ctx=this._chart.ctx,vm=this._view,borderWidth=vm.borderWidth;if(vm.horizontal?(left=vm.base,right=vm.x,top=vm.y-vm.height/2,bottom=vm.y+vm.height/2,signX=right>left?1:-1,signY=1,borderSkipped=vm.borderSkipped||"left"):(left=vm.x-vm.width/2,right=vm.x+vm.width/2,top=vm.y,bottom=vm.base,signX=1,signY=bottom>top?1:-1,borderSkipped=vm.borderSkipped||"bottom"),borderWidth){var barSize=Math.min(Math.abs(left-right),Math.abs(top-bottom));borderWidth=borderWidth>barSize?barSize:borderWidth;var halfStroke=borderWidth/2,borderLeft=left+("left"!==borderSkipped?halfStroke*signX:0),borderRight=right+("right"!==borderSkipped?-halfStroke*signX:0),borderTop=top+("top"!==borderSkipped?halfStroke*signY:0),borderBottom=bottom+("bottom"!==borderSkipped?-halfStroke*signY:0);borderLeft!==borderRight&&(top=borderTop,bottom=borderBottom),borderTop!==borderBottom&&(left=borderLeft,right=borderRight)}ctx.beginPath(),ctx.fillStyle=vm.backgroundColor,ctx.strokeStyle=vm.borderColor,ctx.lineWidth=borderWidth;var corners=[[left,bottom],[left,top],[right,top],[right,bottom]],borders=["bottom","left","top","right"],startCorner=borders.indexOf(borderSkipped,0);-1===startCorner&&(startCorner=0);var corner=cornerAt(0);ctx.moveTo(corner[0],corner[1]);for(var i=1;i<4;i++)corner=cornerAt(i),ctx.lineTo(corner[0],corner[1]);ctx.fill(),borderWidth&&ctx.stroke()},height:function(){var vm=this._view;return vm.base-vm.y},inRange:function(mouseX,mouseY){var inRange=!1;if(this._view){var bounds=getBarBounds(this);inRange=mouseX>=bounds.left&&mouseX<=bounds.right&&mouseY>=bounds.top&&mouseY<=bounds.bottom}return inRange},inLabelRange:function(mouseX,mouseY){var me=this;if(!me._view)return!1;var bounds=getBarBounds(me);return isVertical(me)?mouseX>=bounds.left&&mouseX<=bounds.right:mouseY>=bounds.top&&mouseY<=bounds.bottom},inXRange:function(mouseX){var bounds=getBarBounds(this);return mouseX>=bounds.left&&mouseX<=bounds.right},inYRange:function(mouseY){var bounds=getBarBounds(this);return mouseY>=bounds.top&&mouseY<=bounds.bottom},getCenterPoint:function(){var x,y,vm=this._view;return isVertical(this)?(x=vm.x,y=(vm.y+vm.base)/2):(x=(vm.x+vm.base)/2,y=vm.y),{x:x,y:y}},getArea:function(){var vm=this._view;return vm.width*Math.abs(vm.y-vm.base)},tooltipPosition:function(){var vm=this._view;return{x:vm.x,y:vm.y}}})}},{}],41:[function(require,module,exports){"use strict";module.exports=function(Chart){function readUsedSize(element,property){var value=helpers.getStyle(element,property),matches=value&&value.match(/(\d+)px/);return matches?Number(matches[1]):void 0}function initCanvas(canvas,config){var style=canvas.style,renderHeight=canvas.getAttribute("height"),renderWidth=canvas.getAttribute("width");if(canvas._chartjs={initial:{height:renderHeight,width:renderWidth,style:{display:style.display,height:style.height,width:style.width}}},style.display=style.display||"block",null===renderWidth||""===renderWidth){var displayWidth=readUsedSize(canvas,"width");void 0!==displayWidth&&(canvas.width=displayWidth)}if(null===renderHeight||""===renderHeight)if(""===canvas.style.height)canvas.height=canvas.width/(config.options.aspectRatio||2);else{var displayHeight=readUsedSize(canvas,"height");void 0!==displayWidth&&(canvas.height=displayHeight)}return canvas}function createEvent(type,chart,x,y,native){return{type:type,chart:chart,native:native||null,x:void 0!==x?x:null,y:void 0!==y?y:null}}function fromNativeEvent(event,chart){var type=eventTypeMap[event.type]||event.type,pos=helpers.getRelativePosition(event,chart);return createEvent(type,chart,pos.x,pos.y,event)}function createResizer(handler){var iframe=document.createElement("iframe");return iframe.className="chartjs-hidden-iframe",iframe.style.cssText="display:block;overflow:hidden;border:0;margin:0;top:0;left:0;bottom:0;right:0;height:100%;width:100%;position:absolute;pointer-events:none;z-index:-1;",iframe.tabIndex=-1,helpers.addEvent(iframe,"load",function(){helpers.addEvent(iframe.contentWindow||iframe,"resize",handler),handler()}),iframe}function addResizeListener(node,listener,chart){var stub=node._chartjs={ticking:!1},notify=function(){stub.ticking||(stub.ticking=!0,helpers.requestAnimFrame.call(window,function(){if(stub.resizer)return stub.ticking=!1,listener(createEvent("resize",chart))}))};stub.resizer=createResizer(notify),node.insertBefore(stub.resizer,node.firstChild)}function removeResizeListener(node){if(node&&node._chartjs){var resizer=node._chartjs.resizer;resizer&&(resizer.parentNode.removeChild(resizer),node._chartjs.resizer=null),delete node._chartjs}}var helpers=Chart.helpers,eventTypeMap={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"};return{acquireContext:function(item,config){if("string"==typeof item?item=document.getElementById(item):item.length&&(item=item[0]),item&&item.canvas&&(item=item.canvas),item instanceof HTMLCanvasElement){var context=item.getContext&&item.getContext("2d");if(context instanceof CanvasRenderingContext2D)return initCanvas(item,config),context}return null},releaseContext:function(context){var canvas=context.canvas;if(canvas._chartjs){var initial=canvas._chartjs.initial;["height","width"].forEach(function(prop){var value=initial[prop];void 0===value||null===value?canvas.removeAttribute(prop):canvas.setAttribute(prop,value)}),helpers.each(initial.style||{},function(value,key){canvas.style[key]=value}),canvas.width=canvas.width,delete canvas._chartjs}},addEventListener:function(chart,type,listener){var canvas=chart.chart.canvas;if("resize"===type)return void addResizeListener(canvas.parentNode,listener,chart.chart);var stub=listener._chartjs||(listener._chartjs={}),proxies=stub.proxies||(stub.proxies={}),proxy=proxies[chart.id+"_"+type]=function(event){listener(fromNativeEvent(event,chart.chart))};helpers.addEvent(canvas,type,proxy)},removeEventListener:function(chart,type,listener){var canvas=chart.chart.canvas;if("resize"===type)return void removeResizeListener(canvas.parentNode);var stub=listener._chartjs||{},proxies=stub.proxies||{},proxy=proxies[chart.id+"_"+type];proxy&&helpers.removeEvent(canvas,type,proxy)}}}},{}],42:[function(require,module,exports){"use strict";var implementation=require(41);module.exports=function(Chart){Chart.platform={acquireContext:function(){},releaseContext:function(){},addEventListener:function(){},removeEventListener:function(){}},Chart.helpers.extend(Chart.platform,implementation(Chart))}},{41:41}],43:[function(require,module,exports){"use strict";module.exports=function(Chart){var helpers=Chart.helpers,defaultConfig={position:"bottom"},DatasetScale=Chart.Scale.extend({getLabels:function(){var data=this.chart.data;return(this.isHorizontal()?data.xLabels:data.yLabels)||data.labels},determineDataLimits:function(){var me=this,labels=me.getLabels();me.minIndex=0,me.maxIndex=labels.length-1;var findIndex;void 0!==me.options.ticks.min&&(findIndex=helpers.indexOf(labels,me.options.ticks.min),me.minIndex=-1!==findIndex?findIndex:me.minIndex),void 0!==me.options.ticks.max&&(findIndex=helpers.indexOf(labels,me.options.ticks.max),me.maxIndex=-1!==findIndex?findIndex:me.maxIndex),me.min=labels[me.minIndex],me.max=labels[me.maxIndex]},buildTicks:function(){var me=this,labels=me.getLabels();me.ticks=0===me.minIndex&&me.maxIndex===labels.length-1?labels:labels.slice(me.minIndex,me.maxIndex+1)},getLabelForIndex:function(index,datasetIndex){var me=this,data=me.chart.data,isHorizontal=me.isHorizontal();return data.yLabels&&!isHorizontal?me.getRightValue(data.datasets[datasetIndex].data[index]):me.ticks[index-me.minIndex]},getPixelForValue:function(value,index,datasetIndex,includeOffset){var me=this,offsetAmt=Math.max(me.maxIndex+1-me.minIndex-(me.options.gridLines.offsetGridLines?0:1),1);if(void 0!==value&&isNaN(index)){var labels=me.getLabels(),idx=labels.indexOf(value);index=-1!==idx?idx:index}if(me.isHorizontal()){var valueWidth=me.width/offsetAmt,widthOffset=valueWidth*(index-me.minIndex);return(me.options.gridLines.offsetGridLines&&includeOffset||me.maxIndex===me.minIndex&&includeOffset)&&(widthOffset+=valueWidth/2),me.left+Math.round(widthOffset)}var valueHeight=me.height/offsetAmt,heightOffset=valueHeight*(index-me.minIndex);return me.options.gridLines.offsetGridLines&&includeOffset&&(heightOffset+=valueHeight/2),me.top+Math.round(heightOffset)},getPixelForTick:function(index,includeOffset){return this.getPixelForValue(this.ticks[index],index+this.minIndex,null,includeOffset)},getValueForPixel:function(pixel){var me=this,offsetAmt=Math.max(me.ticks.length-(me.options.gridLines.offsetGridLines?0:1),1),horz=me.isHorizontal(),valueDimension=(horz?me.width:me.height)/offsetAmt;return pixel-=horz?me.left:me.top,me.options.gridLines.offsetGridLines&&(pixel-=valueDimension/2),pixel<=0?0:Math.round(pixel/valueDimension)},getBasePixel:function(){return this.bottom}});Chart.scaleService.registerScaleType("category",DatasetScale,defaultConfig)}},{}],44:[function(require,module,exports){"use strict";module.exports=function(Chart){var helpers=Chart.helpers,defaultConfig={position:"left",ticks:{callback:Chart.Ticks.formatters.linear}},LinearScale=Chart.LinearScaleBase.extend({determineDataLimits:function(){function IDMatches(meta){return isHorizontal?meta.xAxisID===me.id:meta.yAxisID===me.id}var me=this,opts=me.options,chart=me.chart,data=chart.data,datasets=data.datasets,isHorizontal=me.isHorizontal();me.min=null,me.max=null;var hasStacks=opts.stacked;if(void 0===hasStacks&&helpers.each(datasets,function(dataset,datasetIndex){if(!hasStacks){var meta=chart.getDatasetMeta(datasetIndex);chart.isDatasetVisible(datasetIndex)&&IDMatches(meta)&&void 0!==meta.stack&&(hasStacks=!0)}}),opts.stacked||hasStacks){var valuesPerStack={};helpers.each(datasets,function(dataset,datasetIndex){var meta=chart.getDatasetMeta(datasetIndex),key=[meta.type,void 0===opts.stacked&&void 0===meta.stack?datasetIndex:"",meta.stack].join(".");void 0===valuesPerStack[key]&&(valuesPerStack[key]={positiveValues:[],negativeValues:[]});var positiveValues=valuesPerStack[key].positiveValues,negativeValues=valuesPerStack[key].negativeValues;chart.isDatasetVisible(datasetIndex)&&IDMatches(meta)&&helpers.each(dataset.data,function(rawValue,index){var value=+me.getRightValue(rawValue);isNaN(value)||meta.data[index].hidden||(positiveValues[index]=positiveValues[index]||0,negativeValues[index]=negativeValues[index]||0,opts.relativePoints?positiveValues[index]=100:value<0?negativeValues[index]+=value:positiveValues[index]+=value)})}),helpers.each(valuesPerStack,function(valuesForType){var values=valuesForType.positiveValues.concat(valuesForType.negativeValues),minVal=helpers.min(values),maxVal=helpers.max(values);me.min=null===me.min?minVal:Math.min(me.min,minVal),me.max=null===me.max?maxVal:Math.max(me.max,maxVal)})}else helpers.each(datasets,function(dataset,datasetIndex){var meta=chart.getDatasetMeta(datasetIndex);chart.isDatasetVisible(datasetIndex)&&IDMatches(meta)&&helpers.each(dataset.data,function(rawValue,index){var value=+me.getRightValue(rawValue);isNaN(value)||meta.data[index].hidden||(null===me.min?me.min=value:value<me.min&&(me.min=value),null===me.max?me.max=value:value>me.max&&(me.max=value))})});this.handleTickRangeOptions()},getTickLimit:function(){var maxTicks,me=this,tickOpts=me.options.ticks;if(me.isHorizontal())maxTicks=Math.min(tickOpts.maxTicksLimit?tickOpts.maxTicksLimit:11,Math.ceil(me.width/50));else{var tickFontSize=helpers.getValueOrDefault(tickOpts.fontSize,Chart.defaults.global.defaultFontSize);maxTicks=Math.min(tickOpts.maxTicksLimit?tickOpts.maxTicksLimit:11,Math.ceil(me.height/(2*tickFontSize)))}return maxTicks},handleDirectionalChanges:function(){this.isHorizontal()||this.ticks.reverse()},getLabelForIndex:function(index,datasetIndex){return+this.getRightValue(this.chart.data.datasets[datasetIndex].data[index])},getPixelForValue:function(value){var pixel,me=this,start=me.start,rightValue=+me.getRightValue(value),range=me.end-start;return me.isHorizontal()?(pixel=me.left+me.width/range*(rightValue-start),Math.round(pixel)):(pixel=me.bottom-me.height/range*(rightValue-start),Math.round(pixel))},getValueForPixel:function(pixel){var me=this,isHorizontal=me.isHorizontal(),innerDimension=isHorizontal?me.width:me.height,offset=(isHorizontal?pixel-me.left:me.bottom-pixel)/innerDimension;return me.start+(me.end-me.start)*offset},getPixelForTick:function(index){return this.getPixelForValue(this.ticksAsNumbers[index])}});Chart.scaleService.registerScaleType("linear",LinearScale,defaultConfig)}},{}],45:[function(require,module,exports){"use strict";module.exports=function(Chart){var helpers=Chart.helpers,noop=helpers.noop;Chart.LinearScaleBase=Chart.Scale.extend({handleTickRangeOptions:function(){var me=this,opts=me.options,tickOpts=opts.ticks;if(tickOpts.beginAtZero){var minSign=helpers.sign(me.min),maxSign=helpers.sign(me.max);minSign<0&&maxSign<0?me.max=0:minSign>0&&maxSign>0&&(me.min=0)}void 0!==tickOpts.min?me.min=tickOpts.min:void 0!==tickOpts.suggestedMin&&(me.min=Math.min(me.min,tickOpts.suggestedMin)),void 0!==tickOpts.max?me.max=tickOpts.max:void 0!==tickOpts.suggestedMax&&(me.max=Math.max(me.max,tickOpts.suggestedMax)),me.min===me.max&&(me.max++,tickOpts.beginAtZero||me.min--)},getTickLimit:noop,handleDirectionalChanges:noop,buildTicks:function(){var me=this,opts=me.options,tickOpts=opts.ticks,maxTicks=me.getTickLimit();maxTicks=Math.max(2,maxTicks);var numericGeneratorOptions={maxTicks:maxTicks,min:tickOpts.min,max:tickOpts.max,stepSize:helpers.getValueOrDefault(tickOpts.fixedStepSize,tickOpts.stepSize)},ticks=me.ticks=Chart.Ticks.generators.linear(numericGeneratorOptions,me);me.handleDirectionalChanges(),me.max=helpers.max(ticks),me.min=helpers.min(ticks),tickOpts.reverse?(ticks.reverse(),me.start=me.max,me.end=me.min):(me.start=me.min,me.end=me.max)},convertTicksToLabels:function(){var me=this;me.ticksAsNumbers=me.ticks.slice(),me.zeroLineIndex=me.ticks.indexOf(0),Chart.Scale.prototype.convertTicksToLabels.call(me)}})}},{}],46:[function(require,module,exports){"use strict";module.exports=function(Chart){var helpers=Chart.helpers,defaultConfig={position:"left",ticks:{callback:Chart.Ticks.formatters.logarithmic}},LogarithmicScale=Chart.Scale.extend({determineDataLimits:function(){function IDMatches(meta){return isHorizontal?meta.xAxisID===me.id:meta.yAxisID===me.id}var me=this,opts=me.options,tickOpts=opts.ticks,chart=me.chart,data=chart.data,datasets=data.datasets,getValueOrDefault=helpers.getValueOrDefault,isHorizontal=me.isHorizontal();me.min=null,me.max=null,me.minNotZero=null;var hasStacks=opts.stacked;if(void 0===hasStacks&&helpers.each(datasets,function(dataset,datasetIndex){if(!hasStacks){var meta=chart.getDatasetMeta(datasetIndex);chart.isDatasetVisible(datasetIndex)&&IDMatches(meta)&&void 0!==meta.stack&&(hasStacks=!0)}}),opts.stacked||hasStacks){var valuesPerStack={};helpers.each(datasets,function(dataset,datasetIndex){var meta=chart.getDatasetMeta(datasetIndex),key=[meta.type,void 0===opts.stacked&&void 0===meta.stack?datasetIndex:"",meta.stack].join(".");chart.isDatasetVisible(datasetIndex)&&IDMatches(meta)&&(void 0===valuesPerStack[key]&&(valuesPerStack[key]=[]),helpers.each(dataset.data,function(rawValue,index){var values=valuesPerStack[key],value=+me.getRightValue(rawValue);isNaN(value)||meta.data[index].hidden||(values[index]=values[index]||0,opts.relativePoints?values[index]=100:values[index]+=value)}))}),helpers.each(valuesPerStack,function(valuesForType){var minVal=helpers.min(valuesForType),maxVal=helpers.max(valuesForType);me.min=null===me.min?minVal:Math.min(me.min,minVal),me.max=null===me.max?maxVal:Math.max(me.max,maxVal)})}else helpers.each(datasets,function(dataset,datasetIndex){var meta=chart.getDatasetMeta(datasetIndex);chart.isDatasetVisible(datasetIndex)&&IDMatches(meta)&&helpers.each(dataset.data,function(rawValue,index){var value=+me.getRightValue(rawValue);isNaN(value)||meta.data[index].hidden||(null===me.min?me.min=value:value<me.min&&(me.min=value),null===me.max?me.max=value:value>me.max&&(me.max=value),0!==value&&(null===me.minNotZero||value<me.minNotZero)&&(me.minNotZero=value))})});me.min=getValueOrDefault(tickOpts.min,me.min),me.max=getValueOrDefault(tickOpts.max,me.max),me.min===me.max&&(0!==me.min&&null!==me.min?(me.min=Math.pow(10,Math.floor(helpers.log10(me.min))-1),me.max=Math.pow(10,Math.floor(helpers.log10(me.max))+1)):(me.min=1,me.max=10))},buildTicks:function(){var me=this,opts=me.options,tickOpts=opts.ticks,generationOptions={min:tickOpts.min,max:tickOpts.max},ticks=me.ticks=Chart.Ticks.generators.logarithmic(generationOptions,me);me.isHorizontal()||ticks.reverse(),me.max=helpers.max(ticks),me.min=helpers.min(ticks),tickOpts.reverse?(ticks.reverse(),me.start=me.max,me.end=me.min):(me.start=me.min,me.end=me.max)},convertTicksToLabels:function(){this.tickValues=this.ticks.slice(),Chart.Scale.prototype.convertTicksToLabels.call(this)},getLabelForIndex:function(index,datasetIndex){return+this.getRightValue(this.chart.data.datasets[datasetIndex].data[index])},getPixelForTick:function(index){return this.getPixelForValue(this.tickValues[index])},getPixelForValue:function(value){var innerDimension,pixel,range,me=this,start=me.start,newVal=+me.getRightValue(value),opts=me.options,tickOpts=opts.ticks;return me.isHorizontal()?(range=helpers.log10(me.end)-helpers.log10(start),0===newVal?pixel=me.left:(innerDimension=me.width,pixel=me.left+innerDimension/range*(helpers.log10(newVal)-helpers.log10(start)))):(innerDimension=me.height,0!==start||tickOpts.reverse?0===me.end&&tickOpts.reverse?(range=helpers.log10(me.start)-helpers.log10(me.minNotZero),pixel=newVal===me.end?me.top:newVal===me.minNotZero?me.top+.02*innerDimension:me.top+.02*innerDimension+.98*innerDimension/range*(helpers.log10(newVal)-helpers.log10(me.minNotZero))):(range=helpers.log10(me.end)-helpers.log10(start),innerDimension=me.height,pixel=me.bottom-innerDimension/range*(helpers.log10(newVal)-helpers.log10(start))):(range=helpers.log10(me.end)-helpers.log10(me.minNotZero),pixel=newVal===start?me.bottom:newVal===me.minNotZero?me.bottom-.02*innerDimension:me.bottom-.02*innerDimension-.98*innerDimension/range*(helpers.log10(newVal)-helpers.log10(me.minNotZero)))),pixel},getValueForPixel:function(pixel){var value,innerDimension,me=this,range=helpers.log10(me.end)-helpers.log10(me.start);return me.isHorizontal()?(innerDimension=me.width,value=me.start*Math.pow(10,(pixel-me.left)*range/innerDimension)):(innerDimension=me.height,value=Math.pow(10,(me.bottom-pixel)*range/innerDimension)/me.start),value}});Chart.scaleService.registerScaleType("logarithmic",LogarithmicScale,defaultConfig)}},{}],47:[function(require,module,exports){"use strict";module.exports=function(Chart){function getValueCount(scale){return scale.options.lineArc?0:scale.chart.data.labels.length}function getPointLabelFontOptions(scale){var pointLabelOptions=scale.options.pointLabels,fontSize=helpers.getValueOrDefault(pointLabelOptions.fontSize,globalDefaults.defaultFontSize),fontStyle=helpers.getValueOrDefault(pointLabelOptions.fontStyle,globalDefaults.defaultFontStyle),fontFamily=helpers.getValueOrDefault(pointLabelOptions.fontFamily,globalDefaults.defaultFontFamily);return{size:fontSize,style:fontStyle,family:fontFamily,font:helpers.fontString(fontSize,fontStyle,fontFamily)}}function measureLabelSize(ctx,fontSize,label){return helpers.isArray(label)?{w:helpers.longestText(ctx,ctx.font,label),h:label.length*fontSize+1.5*(label.length-1)*fontSize}:{w:ctx.measureText(label).width,h:fontSize}}function determineLimits(angle,pos,size,min,max){return angle===min||angle===max?{start:pos-size/2,end:pos+size/2}:angle<min||angle>max?{start:pos-size-5,end:pos}:{start:pos,end:pos+size+5}}function fitWithPointLabels(scale){var i,textSize,pointPosition,plFont=getPointLabelFontOptions(scale),largestPossibleRadius=Math.min(scale.height/2,scale.width/2),furthestLimits={l:scale.width,r:0,t:scale.height,b:0},furthestAngles={};scale.ctx.font=plFont.font,scale._pointLabelSizes=[];var valueCount=getValueCount(scale);for(i=0;i<valueCount;i++){pointPosition=scale.getPointPosition(i,largestPossibleRadius),textSize=measureLabelSize(scale.ctx,plFont.size,scale.pointLabels[i]||""),scale._pointLabelSizes[i]=textSize;var angleRadians=scale.getIndexAngle(i),angle=helpers.toDegrees(angleRadians)%360,hLimits=determineLimits(angle,pointPosition.x,textSize.w,0,180),vLimits=determineLimits(angle,pointPosition.y,textSize.h,90,270);hLimits.start<furthestLimits.l&&(furthestLimits.l=hLimits.start,furthestAngles.l=angleRadians),hLimits.end>furthestLimits.r&&(furthestLimits.r=hLimits.end,furthestAngles.r=angleRadians),vLimits.start<furthestLimits.t&&(furthestLimits.t=vLimits.start,furthestAngles.t=angleRadians),vLimits.end>furthestLimits.b&&(furthestLimits.b=vLimits.end,furthestAngles.b=angleRadians)}scale.setReductions(largestPossibleRadius,furthestLimits,furthestAngles)}function fit(scale){var largestPossibleRadius=Math.min(scale.height/2,scale.width/2);scale.drawingArea=Math.round(largestPossibleRadius),scale.setCenterPoint(0,0,0,0)}function getTextAlignForAngle(angle){return 0===angle||180===angle?"center":angle<180?"left":"right"}function fillText(ctx,text,position,fontSize){if(helpers.isArray(text))for(var y=position.y,spacing=1.5*fontSize,i=0;i<text.length;++i)ctx.fillText(text[i],position.x,y),y+=spacing;else ctx.fillText(text,position.x,position.y)}function adjustPointPositionForLabelHeight(angle,textSize,position){90===angle||270===angle?position.y-=textSize.h/2:(angle>270||angle<90)&&(position.y-=textSize.h)}function drawPointLabels(scale){var ctx=scale.ctx,getValueOrDefault=helpers.getValueOrDefault,opts=scale.options,angleLineOpts=opts.angleLines,pointLabelOpts=opts.pointLabels;ctx.lineWidth=angleLineOpts.lineWidth,ctx.strokeStyle=angleLineOpts.color;var outerDistance=scale.getDistanceFromCenterForValue(opts.reverse?scale.min:scale.max),plFont=getPointLabelFontOptions(scale);ctx.textBaseline="top";for(var i=getValueCount(scale)-1;i>=0;i--){if(angleLineOpts.display){var outerPosition=scale.getPointPosition(i,outerDistance);ctx.beginPath(),ctx.moveTo(scale.xCenter,scale.yCenter),ctx.lineTo(outerPosition.x,outerPosition.y),ctx.stroke(),ctx.closePath()}var pointLabelPosition=scale.getPointPosition(i,outerDistance+5),pointLabelFontColor=getValueOrDefault(pointLabelOpts.fontColor,globalDefaults.defaultFontColor);ctx.font=plFont.font,ctx.fillStyle=pointLabelFontColor;var angleRadians=scale.getIndexAngle(i),angle=helpers.toDegrees(angleRadians);ctx.textAlign=getTextAlignForAngle(angle),adjustPointPositionForLabelHeight(angle,scale._pointLabelSizes[i],pointLabelPosition),fillText(ctx,scale.pointLabels[i]||"",pointLabelPosition,plFont.size)}}function drawRadiusLine(scale,gridLineOpts,radius,index){var ctx=scale.ctx;if(ctx.strokeStyle=helpers.getValueAtIndexOrDefault(gridLineOpts.color,index-1),ctx.lineWidth=helpers.getValueAtIndexOrDefault(gridLineOpts.lineWidth,index-1),scale.options.lineArc)ctx.beginPath(),ctx.arc(scale.xCenter,scale.yCenter,radius,0,2*Math.PI),ctx.closePath(),ctx.stroke();else{var valueCount=getValueCount(scale);if(0===valueCount)return;ctx.beginPath();var pointPosition=scale.getPointPosition(0,radius);ctx.moveTo(pointPosition.x,pointPosition.y);for(var i=1;i<valueCount;i++)pointPosition=scale.getPointPosition(i,radius),ctx.lineTo(pointPosition.x,pointPosition.y);ctx.closePath(),ctx.stroke()}}function numberOrZero(param){return helpers.isNumber(param)?param:0}var helpers=Chart.helpers,globalDefaults=Chart.defaults.global,defaultConfig={display:!0,animate:!0,lineArc:!1,position:"chartArea",angleLines:{display:!0,color:"rgba(0, 0, 0, 0.1)",lineWidth:1},ticks:{showLabelBackdrop:!0,backdropColor:"rgba(255,255,255,0.75)",backdropPaddingY:2,backdropPaddingX:2,callback:Chart.Ticks.formatters.linear},pointLabels:{fontSize:10,callback:function(label){return label}}},LinearRadialScale=Chart.LinearScaleBase.extend({setDimensions:function(){var me=this,opts=me.options,tickOpts=opts.ticks;me.width=me.maxWidth,me.height=me.maxHeight,me.xCenter=Math.round(me.width/2),me.yCenter=Math.round(me.height/2);var minSize=helpers.min([me.height,me.width]),tickFontSize=helpers.getValueOrDefault(tickOpts.fontSize,globalDefaults.defaultFontSize);me.drawingArea=opts.display?minSize/2-(tickFontSize/2+tickOpts.backdropPaddingY):minSize/2},determineDataLimits:function(){var me=this,chart=me.chart,min=Number.POSITIVE_INFINITY,max=Number.NEGATIVE_INFINITY;helpers.each(chart.data.datasets,function(dataset,datasetIndex){if(chart.isDatasetVisible(datasetIndex)){var meta=chart.getDatasetMeta(datasetIndex);helpers.each(dataset.data,function(rawValue,index){var value=+me.getRightValue(rawValue);isNaN(value)||meta.data[index].hidden||(min=Math.min(value,min),max=Math.max(value,max))})}}),me.min=min===Number.POSITIVE_INFINITY?0:min,me.max=max===Number.NEGATIVE_INFINITY?0:max,me.handleTickRangeOptions()},getTickLimit:function(){var tickOpts=this.options.ticks,tickFontSize=helpers.getValueOrDefault(tickOpts.fontSize,globalDefaults.defaultFontSize)
;return Math.min(tickOpts.maxTicksLimit?tickOpts.maxTicksLimit:11,Math.ceil(this.drawingArea/(1.5*tickFontSize)))},convertTicksToLabels:function(){var me=this;Chart.LinearScaleBase.prototype.convertTicksToLabels.call(me),me.pointLabels=me.chart.data.labels.map(me.options.pointLabels.callback,me)},getLabelForIndex:function(index,datasetIndex){return+this.getRightValue(this.chart.data.datasets[datasetIndex].data[index])},fit:function(){this.options.lineArc?fit(this):fitWithPointLabels(this)},setReductions:function(largestPossibleRadius,furthestLimits,furthestAngles){var me=this,radiusReductionLeft=furthestLimits.l/Math.sin(furthestAngles.l),radiusReductionRight=Math.max(furthestLimits.r-me.width,0)/Math.sin(furthestAngles.r),radiusReductionTop=-furthestLimits.t/Math.cos(furthestAngles.t),radiusReductionBottom=-Math.max(furthestLimits.b-me.height,0)/Math.cos(furthestAngles.b);radiusReductionLeft=numberOrZero(radiusReductionLeft),radiusReductionRight=numberOrZero(radiusReductionRight),radiusReductionTop=numberOrZero(radiusReductionTop),radiusReductionBottom=numberOrZero(radiusReductionBottom),me.drawingArea=Math.min(Math.round(largestPossibleRadius-(radiusReductionLeft+radiusReductionRight)/2),Math.round(largestPossibleRadius-(radiusReductionTop+radiusReductionBottom)/2)),me.setCenterPoint(radiusReductionLeft,radiusReductionRight,radiusReductionTop,radiusReductionBottom)},setCenterPoint:function(leftMovement,rightMovement,topMovement,bottomMovement){var me=this,maxRight=me.width-rightMovement-me.drawingArea,maxLeft=leftMovement+me.drawingArea,maxTop=topMovement+me.drawingArea,maxBottom=me.height-bottomMovement-me.drawingArea;me.xCenter=Math.round((maxLeft+maxRight)/2+me.left),me.yCenter=Math.round((maxTop+maxBottom)/2+me.top)},getIndexAngle:function(index){return index*(2*Math.PI/getValueCount(this))+(this.chart.options&&this.chart.options.startAngle?this.chart.options.startAngle:0)*Math.PI*2/360},getDistanceFromCenterForValue:function(value){var me=this;if(null===value)return 0;var scalingFactor=me.drawingArea/(me.max-me.min);return me.options.reverse?(me.max-value)*scalingFactor:(value-me.min)*scalingFactor},getPointPosition:function(index,distanceFromCenter){var me=this,thisAngle=me.getIndexAngle(index)-Math.PI/2;return{x:Math.round(Math.cos(thisAngle)*distanceFromCenter)+me.xCenter,y:Math.round(Math.sin(thisAngle)*distanceFromCenter)+me.yCenter}},getPointPositionForValue:function(index,value){return this.getPointPosition(index,this.getDistanceFromCenterForValue(value))},getBasePosition:function(){var me=this,min=me.min,max=me.max;return me.getPointPositionForValue(0,me.beginAtZero?0:min<0&&max<0?max:min>0&&max>0?min:0)},draw:function(){var me=this,opts=me.options,gridLineOpts=opts.gridLines,tickOpts=opts.ticks,getValueOrDefault=helpers.getValueOrDefault;if(opts.display){var ctx=me.ctx,tickFontSize=getValueOrDefault(tickOpts.fontSize,globalDefaults.defaultFontSize),tickFontStyle=getValueOrDefault(tickOpts.fontStyle,globalDefaults.defaultFontStyle),tickFontFamily=getValueOrDefault(tickOpts.fontFamily,globalDefaults.defaultFontFamily),tickLabelFont=helpers.fontString(tickFontSize,tickFontStyle,tickFontFamily);helpers.each(me.ticks,function(label,index){if(index>0||opts.reverse){var yCenterOffset=me.getDistanceFromCenterForValue(me.ticksAsNumbers[index]),yHeight=me.yCenter-yCenterOffset;if(gridLineOpts.display&&0!==index&&drawRadiusLine(me,gridLineOpts,yCenterOffset,index),tickOpts.display){var tickFontColor=getValueOrDefault(tickOpts.fontColor,globalDefaults.defaultFontColor);if(ctx.font=tickLabelFont,tickOpts.showLabelBackdrop){var labelWidth=ctx.measureText(label).width;ctx.fillStyle=tickOpts.backdropColor,ctx.fillRect(me.xCenter-labelWidth/2-tickOpts.backdropPaddingX,yHeight-tickFontSize/2-tickOpts.backdropPaddingY,labelWidth+2*tickOpts.backdropPaddingX,tickFontSize+2*tickOpts.backdropPaddingY)}ctx.textAlign="center",ctx.textBaseline="middle",ctx.fillStyle=tickFontColor,ctx.fillText(label,me.xCenter,yHeight)}}}),opts.lineArc||drawPointLabels(me)}}});Chart.scaleService.registerScaleType("radialLinear",LinearRadialScale,defaultConfig)}},{}],48:[function(require,module,exports){"use strict";var moment=require(1);moment="function"==typeof moment?moment:window.moment,module.exports=function(Chart){var helpers=Chart.helpers,time={units:[{name:"millisecond",steps:[1,2,5,10,20,50,100,250,500]},{name:"second",steps:[1,2,5,10,30]},{name:"minute",steps:[1,2,5,10,30]},{name:"hour",steps:[1,2,3,6,12]},{name:"day",steps:[1,2,5]},{name:"week",maxStep:4},{name:"month",maxStep:3},{name:"quarter",maxStep:4},{name:"year",maxStep:!1}]},defaultConfig={position:"bottom",time:{parser:!1,format:!1,unit:!1,round:!1,displayFormat:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm:ss a",hour:"MMM D, hA",day:"ll",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"}},ticks:{autoSkip:!1}},TimeScale=Chart.Scale.extend({initialize:function(){if(!moment)throw new Error("Chart.js - Moment.js could not be found! You must include it before Chart.js to use the time scale. Download at https://momentjs.com");Chart.Scale.prototype.initialize.call(this)},getLabelMoment:function(datasetIndex,index){return null===datasetIndex||null===index?null:void 0!==this.labelMoments[datasetIndex]?this.labelMoments[datasetIndex][index]:null},getLabelDiff:function(datasetIndex,index){var me=this;return null===datasetIndex||null===index?null:(void 0===me.labelDiffs&&me.buildLabelDiffs(),void 0!==me.labelDiffs[datasetIndex]?me.labelDiffs[datasetIndex][index]:null)},getMomentStartOf:function(tick){var me=this;return"week"===me.options.time.unit&&!1!==me.options.time.isoWeekday?tick.clone().startOf("isoWeek").isoWeekday(me.options.time.isoWeekday):tick.clone().startOf(me.tickUnit)},determineDataLimits:function(){var me=this;me.labelMoments=[];var scaleLabelMoments=[];me.chart.data.labels&&me.chart.data.labels.length>0?(helpers.each(me.chart.data.labels,function(label){var labelMoment=me.parseTime(label);labelMoment.isValid()&&(me.options.time.round&&labelMoment.startOf(me.options.time.round),scaleLabelMoments.push(labelMoment))},me),me.firstTick=moment.min.call(me,scaleLabelMoments),me.lastTick=moment.max.call(me,scaleLabelMoments)):(me.firstTick=null,me.lastTick=null),helpers.each(me.chart.data.datasets,function(dataset,datasetIndex){var momentsForDataset=[],datasetVisible=me.chart.isDatasetVisible(datasetIndex);"object"==typeof dataset.data[0]&&null!==dataset.data[0]?helpers.each(dataset.data,function(value){var labelMoment=me.parseTime(me.getRightValue(value));labelMoment.isValid()&&(me.options.time.round&&labelMoment.startOf(me.options.time.round),momentsForDataset.push(labelMoment),datasetVisible&&(me.firstTick=null!==me.firstTick?moment.min(me.firstTick,labelMoment):labelMoment,me.lastTick=null!==me.lastTick?moment.max(me.lastTick,labelMoment):labelMoment))},me):momentsForDataset=scaleLabelMoments,me.labelMoments.push(momentsForDataset)},me),me.options.time.min&&(me.firstTick=me.parseTime(me.options.time.min)),me.options.time.max&&(me.lastTick=me.parseTime(me.options.time.max)),me.firstTick=(me.firstTick||moment()).clone(),me.lastTick=(me.lastTick||moment()).clone()},buildLabelDiffs:function(){var me=this;me.labelDiffs=[];var scaleLabelDiffs=[];me.chart.data.labels&&me.chart.data.labels.length>0&&helpers.each(me.chart.data.labels,function(label){var labelMoment=me.parseTime(label);labelMoment.isValid()&&(me.options.time.round&&labelMoment.startOf(me.options.time.round),scaleLabelDiffs.push(labelMoment.diff(me.firstTick,me.tickUnit,!0)))},me),helpers.each(me.chart.data.datasets,function(dataset){var diffsForDataset=[];"object"==typeof dataset.data[0]&&null!==dataset.data[0]?helpers.each(dataset.data,function(value){var labelMoment=me.parseTime(me.getRightValue(value));labelMoment.isValid()&&(me.options.time.round&&labelMoment.startOf(me.options.time.round),diffsForDataset.push(labelMoment.diff(me.firstTick,me.tickUnit,!0)))},me):diffsForDataset=scaleLabelDiffs,me.labelDiffs.push(diffsForDataset)},me)},buildTicks:function(){var me=this;me.ctx.save();var tickFontSize=helpers.getValueOrDefault(me.options.ticks.fontSize,Chart.defaults.global.defaultFontSize),tickFontStyle=helpers.getValueOrDefault(me.options.ticks.fontStyle,Chart.defaults.global.defaultFontStyle),tickFontFamily=helpers.getValueOrDefault(me.options.ticks.fontFamily,Chart.defaults.global.defaultFontFamily),tickLabelFont=helpers.fontString(tickFontSize,tickFontStyle,tickFontFamily);if(me.ctx.font=tickLabelFont,me.ticks=[],me.unitScale=1,me.scaleSizeInUnits=0,me.options.time.unit)me.tickUnit=me.options.time.unit||"day",me.displayFormat=me.options.time.displayFormats[me.tickUnit],me.scaleSizeInUnits=me.lastTick.diff(me.firstTick,me.tickUnit,!0),me.unitScale=helpers.getValueOrDefault(me.options.time.unitStepSize,1);else{var innerWidth=me.isHorizontal()?me.width:me.height,tempFirstLabel=me.tickFormatFunction(me.firstTick,0,[]),tickLabelWidth=me.ctx.measureText(tempFirstLabel).width;tickLabelWidth=tickLabelWidth*Math.cos(helpers.toRadians(me.options.ticks.maxRotation))+tickFontSize*Math.sin(helpers.toRadians(me.options.ticks.maxRotation));var labelCapacity=innerWidth/tickLabelWidth;me.tickUnit=me.options.time.minUnit,me.scaleSizeInUnits=me.lastTick.diff(me.firstTick,me.tickUnit,!0),me.displayFormat=me.options.time.displayFormats[me.tickUnit];for(var unitDefinitionIndex=0,unitDefinition=time.units[unitDefinitionIndex];unitDefinitionIndex<time.units.length;){if(me.unitScale=1,helpers.isArray(unitDefinition.steps)&&Math.ceil(me.scaleSizeInUnits/labelCapacity)<helpers.max(unitDefinition.steps)){for(var idx=0;idx<unitDefinition.steps.length;++idx)if(unitDefinition.steps[idx]>=Math.ceil(me.scaleSizeInUnits/labelCapacity)){me.unitScale=helpers.getValueOrDefault(me.options.time.unitStepSize,unitDefinition.steps[idx]);break}break}if(!1===unitDefinition.maxStep||Math.ceil(me.scaleSizeInUnits/labelCapacity)<unitDefinition.maxStep){me.unitScale=helpers.getValueOrDefault(me.options.time.unitStepSize,Math.ceil(me.scaleSizeInUnits/labelCapacity));break}++unitDefinitionIndex,unitDefinition=time.units[unitDefinitionIndex],me.tickUnit=unitDefinition.name;var leadingUnitBuffer=me.firstTick.diff(me.getMomentStartOf(me.firstTick),me.tickUnit,!0),trailingUnitBuffer=me.getMomentStartOf(me.lastTick.clone().add(1,me.tickUnit)).diff(me.lastTick,me.tickUnit,!0);me.scaleSizeInUnits=me.lastTick.diff(me.firstTick,me.tickUnit,!0)+leadingUnitBuffer+trailingUnitBuffer,me.displayFormat=me.options.time.displayFormats[unitDefinition.name]}}var roundedStart;if(me.options.time.min?roundedStart=me.getMomentStartOf(me.firstTick):(me.firstTick=me.getMomentStartOf(me.firstTick),roundedStart=me.firstTick),!me.options.time.max){var roundedEnd=me.getMomentStartOf(me.lastTick),delta=roundedEnd.diff(me.lastTick,me.tickUnit,!0);delta<0?me.lastTick=me.getMomentStartOf(me.lastTick.add(1,me.tickUnit)):delta>=0&&(me.lastTick=roundedEnd),me.scaleSizeInUnits=me.lastTick.diff(me.firstTick,me.tickUnit,!0)}me.options.time.displayFormat&&(me.displayFormat=me.options.time.displayFormat),me.ticks.push(me.firstTick.clone());for(var i=me.unitScale;i<=me.scaleSizeInUnits;i+=me.unitScale){var newTick=roundedStart.clone().add(i,me.tickUnit);if(me.options.time.max&&newTick.diff(me.lastTick,me.tickUnit,!0)>=0)break;me.ticks.push(newTick)}0===me.ticks[me.ticks.length-1].diff(me.lastTick,me.tickUnit)&&0!==me.scaleSizeInUnits||(me.options.time.max?(me.ticks.push(me.lastTick.clone()),me.scaleSizeInUnits=me.lastTick.diff(me.ticks[0],me.tickUnit,!0)):(me.ticks.push(me.lastTick.clone()),me.scaleSizeInUnits=me.lastTick.diff(me.firstTick,me.tickUnit,!0))),me.ctx.restore(),me.labelDiffs=void 0},getLabelForIndex:function(index,datasetIndex){var me=this,label=me.chart.data.labels&&index<me.chart.data.labels.length?me.chart.data.labels[index]:"",value=me.chart.data.datasets[datasetIndex].data[index];return null!==value&&"object"==typeof value&&(label=me.getRightValue(value)),me.options.time.tooltipFormat&&(label=me.parseTime(label).format(me.options.time.tooltipFormat)),label},tickFormatFunction:function(tick,index,ticks){var formattedTick=tick.format(this.displayFormat),tickOpts=this.options.ticks,callback=helpers.getValueOrDefault(tickOpts.callback,tickOpts.userCallback);return callback?callback(formattedTick,index,ticks):formattedTick},convertTicksToLabels:function(){var me=this;me.tickMoments=me.ticks,me.ticks=me.ticks.map(me.tickFormatFunction,me)},getPixelForValue:function(value,index,datasetIndex){var me=this,offset=null;if(void 0!==index&&void 0!==datasetIndex&&(offset=me.getLabelDiff(datasetIndex,index)),null===offset&&(value&&value.isValid||(value=me.parseTime(me.getRightValue(value))),value&&value.isValid&&value.isValid()&&(offset=value.diff(me.firstTick,me.tickUnit,!0))),null!==offset){var decimal=0!==offset?offset/me.scaleSizeInUnits:offset;if(me.isHorizontal()){var valueOffset=me.width*decimal;return me.left+Math.round(valueOffset)}var heightOffset=me.height*decimal;return me.top+Math.round(heightOffset)}},getPixelForTick:function(index){return this.getPixelForValue(this.tickMoments[index],null,null)},getValueForPixel:function(pixel){var me=this,innerDimension=me.isHorizontal()?me.width:me.height,offset=(pixel-(me.isHorizontal()?me.left:me.top))/innerDimension;return offset*=me.scaleSizeInUnits,me.firstTick.clone().add(moment.duration(offset,me.tickUnit).asSeconds(),"seconds")},parseTime:function(label){var me=this;return"string"==typeof me.options.time.parser?moment(label,me.options.time.parser):"function"==typeof me.options.time.parser?me.options.time.parser(label):"function"==typeof label.getMonth||"number"==typeof label?moment(label):label.isValid&&label.isValid()?label:"string"!=typeof me.options.time.format&&me.options.time.format.call?(console.warn("options.time.format is deprecated and replaced by options.time.parser. See http://nnnick.github.io/Chart.js/docs-v2/#scales-time-scale"),me.options.time.format(label)):moment(label,me.options.time.format)}});Chart.scaleService.registerScaleType("time",TimeScale,defaultConfig)}},{1:1}]},{},[7])(7)}),function(factory){"use strict";if("object"==typeof exports)module.exports=factory("undefined"!=typeof angular?angular:require("angular"),"undefined"!=typeof Chart?Chart:require("chart.js"));else if("function"==typeof define&&define.amd)define(["angular","chart"],factory);else{if("undefined"==typeof angular)throw new Error("AngularJS framework needs to be included, see https://angularjs.org/");if("undefined"==typeof Chart)throw new Error("Chart.js library needs to be included, see http://jtblin.github.io/angular-chart.js/");factory(angular,Chart)}}(function(angular,Chart){"use strict";function ChartJsProvider(){var options={responsive:!0},ChartJs={Chart:Chart,getOptions:function(type){var typeOptions=type&&options[type]||{};return angular.extend({},options,typeOptions)}};this.setOptions=function(type,customOptions){customOptions?options[type]=angular.merge(options[type]||{},customOptions):(customOptions=type,options=angular.merge(options,customOptions)),angular.merge(ChartJs.Chart.defaults,options)},this.$get=function(){return ChartJs}}function ChartJsFactory(ChartJs,$timeout){function createChart(type,scope,elem){var options=getChartOptions(type,scope);if(hasData(scope)&&canDisplay(type,scope,elem,options)){var cvs=elem[0],ctx=cvs.getContext("2d");scope.chartGetColor=getChartColorFn(scope);var data=getChartData(type,scope);destroyChart(scope),scope.chart=new ChartJs.Chart(ctx,{type:type,data:data,options:options}),scope.$emit("chart-create",scope.chart),bindEvents(cvs,scope)}}function canUpdateChart(newVal,oldVal){return!!(newVal&&oldVal&&newVal.length&&oldVal.length)&&(Array.isArray(newVal[0])?newVal.length===oldVal.length&&newVal.every(function(element,index){return element.length===oldVal[index].length}):oldVal.reduce(sum,0)>0&&newVal.length===oldVal.length)}function sum(carry,val){return carry+val}function getEventHandler(scope,action,triggerOnlyOnChange){var lastState={point:void 0,points:void 0};return function(evt){var atEvent=scope.chart.getElementAtEvent||scope.chart.getPointAtEvent,atEvents=scope.chart.getElementsAtEvent||scope.chart.getPointsAtEvent;if(atEvents){var points=atEvents.call(scope.chart,evt),point=atEvent?atEvent.call(scope.chart,evt)[0]:void 0;!1!==triggerOnlyOnChange&&(angular.equals(lastState.points,points)||angular.equals(lastState.point,point))||(lastState.point=point,lastState.points=points,scope[action](points,evt,point))}}}function getColors(type,scope){for(var colors=angular.copy(scope.chartColors||ChartJs.getOptions(type).chartColors||Chart.defaults.global.colors),notEnoughColors=colors.length<scope.chartData.length;colors.length<scope.chartData.length;)colors.push(scope.chartGetColor());return notEnoughColors&&(scope.chartColors=colors),colors.map(convertColor)}function convertColor(color){return"string"==typeof color&&"r"===color[0]?getColor(rgbStringToRgb(color)):"string"==typeof color&&"#"===color[0]?getColor(hexToRgb(color.substr(1))):"object"==typeof color&&null!==color?color:getRandomColor()}function getRandomColor(){return getColor([getRandomInt(0,255),getRandomInt(0,255),getRandomInt(0,255)])}function getColor(color){var alpha=color[3]||1;return color=color.slice(0,3),{backgroundColor:rgba(color,.2),pointBackgroundColor:rgba(color,alpha),pointHoverBackgroundColor:rgba(color,.8),borderColor:rgba(color,alpha),pointBorderColor:"#fff",pointHoverBorderColor:rgba(color,alpha)}}function getRandomInt(min,max){return Math.floor(Math.random()*(max-min+1))+min}function rgba(color,alpha){return useExcanvas?"rgb("+color.join(",")+")":"rgba("+color.concat(alpha).join(",")+")"}function hexToRgb(hex){var bigint=parseInt(hex,16);return[bigint>>16&255,bigint>>8&255,255&bigint]}function rgbStringToRgb(color){var match=color.match(/^rgba?\(([\d,.]+)\)$/);if(!match)throw new Error("Cannot parse rgb value");return color=match[1].split(","),color.map(Number)}function hasData(scope){return scope.chartData&&scope.chartData.length}function getChartColorFn(scope){return"function"==typeof scope.chartGetColor?scope.chartGetColor:getRandomColor}function getChartData(type,scope){var colors=getColors(type,scope);return Array.isArray(scope.chartData[0])?getDataSets(scope.chartLabels,scope.chartData,scope.chartSeries||[],colors,scope.chartDatasetOverride):getData(scope.chartLabels,scope.chartData,colors,scope.chartDatasetOverride)}function getDataSets(labels,data,series,colors,datasetOverride){return{labels:labels,datasets:data.map(function(item,i){var dataset=angular.extend({},colors[i],{label:series[i],data:item});return datasetOverride&&datasetOverride.length>=i&&angular.merge(dataset,datasetOverride[i]),dataset})}}function getData(labels,data,colors,datasetOverride){var dataset={labels:labels,datasets:[{data:data,backgroundColor:colors.map(function(color){return color.pointBackgroundColor}),hoverBackgroundColor:colors.map(function(color){return color.backgroundColor})}]};return datasetOverride&&angular.merge(dataset.datasets[0],datasetOverride),dataset}function getChartOptions(type,scope){return angular.extend({},ChartJs.getOptions(type),scope.chartOptions)}function bindEvents(cvs,scope){cvs.onclick=scope.chartClick?getEventHandler(scope,"chartClick",!1):angular.noop,cvs.onmousemove=scope.chartHover?getEventHandler(scope,"chartHover",!0):angular.noop}function updateChart(values,scope){Array.isArray(scope.chartData[0])?scope.chart.data.datasets.forEach(function(dataset,i){dataset.data=values[i]}):scope.chart.data.datasets[0].data=values,scope.chart.update(),scope.$emit("chart-update",scope.chart)}function isEmpty(value){return!value||Array.isArray(value)&&!value.length||"object"==typeof value&&!Object.keys(value).length}function canDisplay(type,scope,elem,options){return!options.responsive||0!==elem[0].clientHeight||($timeout(function(){createChart(type,scope,elem)},50,!1),!1)}function destroyChart(scope){scope.chart&&(scope.chart.destroy(),scope.$emit("chart-destroy",scope.chart))}return function(type){return{restrict:"CA",scope:{chartGetColor:"=?",chartType:"=",chartData:"=?",chartLabels:"=?",chartOptions:"=?",chartSeries:"=?",chartColors:"=?",chartClick:"=?",chartHover:"=?",chartDatasetOverride:"=?"},link:function(scope,elem){function watchData(newVal,oldVal){if(!newVal||!newVal.length||Array.isArray(newVal[0])&&!newVal[0].length)return void destroyChart(scope);var chartType=type||scope.chartType;if(chartType)return scope.chart&&canUpdateChart(newVal,oldVal)?updateChart(newVal,scope):void createChart(chartType,scope,elem)}function watchOther(newVal,oldVal){if(!isEmpty(newVal)&&!angular.equals(newVal,oldVal)){var chartType=type||scope.chartType;chartType&&createChart(chartType,scope,elem)}}function watchType(newVal,oldVal){isEmpty(newVal)||angular.equals(newVal,oldVal)||createChart(newVal,scope,elem)}useExcanvas&&window.G_vmlCanvasManager.initElement(elem[0]),scope.$watch("chartData",watchData,!0),scope.$watch("chartSeries",watchOther,!0),scope.$watch("chartLabels",watchOther,!0),scope.$watch("chartOptions",watchOther,!0),scope.$watch("chartColors",watchOther,!0),scope.$watch("chartDatasetOverride",watchOther,!0),scope.$watch("chartType",watchType,!1),scope.$on("$destroy",function(){destroyChart(scope)}),scope.$on("$resize",function(){scope.chart&&scope.chart.resize()})}}}}Chart.defaults.global.multiTooltipTemplate="<%if (datasetLabel){%><%=datasetLabel%>: <%}%><%= value %>",Chart.defaults.global.tooltips.mode="label",Chart.defaults.global.elements.line.borderWidth=2,Chart.defaults.global.elements.rectangle.borderWidth=2,Chart.defaults.global.legend.display=!1,Chart.defaults.global.colors=["#97BBCD","#DCDCDC","#F7464A","#46BFBD","#FDB45C","#949FB1","#4D5360"];var useExcanvas="object"==typeof window.G_vmlCanvasManager&&null!==window.G_vmlCanvasManager&&"function"==typeof window.G_vmlCanvasManager.initElement;return useExcanvas&&(Chart.defaults.global.animation=!1),angular.module("chart.js",[]).provider("ChartJs",ChartJsProvider).factory("ChartJsFactory",["ChartJs","$timeout",ChartJsFactory]).directive("chartBase",["ChartJsFactory",function(ChartJsFactory){return new ChartJsFactory}]).directive("chartLine",["ChartJsFactory",function(ChartJsFactory){return new ChartJsFactory("line")}]).directive("chartBar",["ChartJsFactory",function(ChartJsFactory){return new ChartJsFactory("bar")}]).directive("chartHorizontalBar",["ChartJsFactory",function(ChartJsFactory){return new ChartJsFactory("horizontalBar")}]).directive("chartRadar",["ChartJsFactory",function(ChartJsFactory){return new ChartJsFactory("radar")}]).directive("chartDoughnut",["ChartJsFactory",function(ChartJsFactory){return new ChartJsFactory("doughnut")}]).directive("chartPie",["ChartJsFactory",function(ChartJsFactory){return new ChartJsFactory("pie")}]).directive("chartPolarArea",["ChartJsFactory",function(ChartJsFactory){return new ChartJsFactory("polarArea")}]).directive("chartBubble",["ChartJsFactory",function(ChartJsFactory){return new ChartJsFactory("bubble")}]).name}),function(){function d3_documentElement(node){return node&&(node.ownerDocument||node.document||node).documentElement}function d3_window(node){return node&&(node.ownerDocument&&node.ownerDocument.defaultView||node.document&&node||node.defaultView)}function d3_ascending(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function d3_number(x){return null===x?NaN:+x}function d3_numeric(x){return!isNaN(x)}function d3_bisector(compare){return{left:function(a,x,lo,hi){for(arguments.length<3&&(lo=0),arguments.length<4&&(hi=a.length);lo<hi;){var mid=lo+hi>>>1;compare(a[mid],x)<0?lo=mid+1:hi=mid}return lo},right:function(a,x,lo,hi){for(arguments.length<3&&(lo=0),arguments.length<4&&(hi=a.length);lo<hi;){var mid=lo+hi>>>1;compare(a[mid],x)>0?hi=mid:lo=mid+1}return lo}}}function d3_transposeLength(d){return d.length}function d3_range_integerScale(x){for(var k=1;x*k%1;)k*=10;return k}function d3_class(ctor,properties){for(var key in properties)Object.defineProperty(ctor.prototype,key,{value:properties[key],enumerable:!1})}function d3_Map(){this._=Object.create(null)}function d3_map_escape(key){return(key+="")===d3_map_proto||key[0]===d3_map_zero?d3_map_zero+key:key}function d3_map_unescape(key){return(key+="")[0]===d3_map_zero?key.slice(1):key}function d3_map_has(key){return d3_map_escape(key)in this._}function d3_map_remove(key){return(key=d3_map_escape(key))in this._&&delete this._[key]}function d3_map_keys(){var keys=[];for(var key in this._)keys.push(d3_map_unescape(key));return keys}function d3_map_size(){var size=0;for(var key in this._)++size;return size}function d3_map_empty(){for(var key in this._)return!1;return!0}function d3_Set(){this._=Object.create(null)}function d3_identity(d){return d}function d3_rebind(target,source,method){return function(){var value=method.apply(source,arguments);return value===source?target:value}}function d3_vendorSymbol(object,name){if(name in object)return name;name=name.charAt(0).toUpperCase()+name.slice(1);for(var i=0,n=d3_vendorPrefixes.length;i<n;++i){var prefixName=d3_vendorPrefixes[i]+name;if(prefixName in object)return prefixName}}function d3_noop(){}function d3_dispatch(){}function d3_dispatch_event(dispatch){function event(){for(var l,z=listeners,i=-1,n=z.length;++i<n;)(l=z[i].on)&&l.apply(this,arguments);return dispatch}var listeners=[],listenerByName=new d3_Map;return event.on=function(name,listener){var i,l=listenerByName.get(name);return arguments.length<2?l&&l.on:(l&&(l.on=null,listeners=listeners.slice(0,i=listeners.indexOf(l)).concat(listeners.slice(i+1)),listenerByName.remove(name)),listener&&listeners.push(listenerByName.set(name,{on:listener})),dispatch)},event}function d3_eventPreventDefault(){d3.event.preventDefault()}function d3_eventSource(){for(var s,e=d3.event;s=e.sourceEvent;)e=s;return e}function d3_eventDispatch(target){for(var dispatch=new d3_dispatch,i=0,n=arguments.length;++i<n;)dispatch[arguments[i]]=d3_dispatch_event(dispatch);return dispatch.of=function(thiz,argumentz){return function(e1){try{var e0=e1.sourceEvent=d3.event;e1.target=target,d3.event=e1,dispatch[e1.type].apply(thiz,argumentz)}finally{d3.event=e0}}},dispatch}function d3_selection(groups){return d3_subclass(groups,d3_selectionPrototype),groups}function d3_selection_selector(selector){return"function"==typeof selector?selector:function(){return d3_select(selector,this)}}function d3_selection_selectorAll(selector){return"function"==typeof selector?selector:function(){return d3_selectAll(selector,this)}}function d3_selection_attr(name,value){function attrNull(){this.removeAttribute(name)}function attrNullNS(){this.removeAttributeNS(name.space,name.local)}function attrConstant(){this.setAttribute(name,value)}function attrConstantNS(){this.setAttributeNS(name.space,name.local,value)}function attrFunction(){var x=value.apply(this,arguments);null==x?this.removeAttribute(name):this.setAttribute(name,x)}function attrFunctionNS(){var x=value.apply(this,arguments);null==x?this.removeAttributeNS(name.space,name.local):this.setAttributeNS(name.space,name.local,x)}return name=d3.ns.qualify(name),null==value?name.local?attrNullNS:attrNull:"function"==typeof value?name.local?attrFunctionNS:attrFunction:name.local?attrConstantNS:attrConstant}function d3_collapse(s){return s.trim().replace(/\s+/g," ")}function d3_selection_classedRe(name){return new RegExp("(?:^|\\s+)"+d3.requote(name)+"(?:\\s+|$)","g")}function d3_selection_classes(name){return(name+"").trim().split(/^|\s+/)}function d3_selection_classed(name,value){function classedConstant(){for(var i=-1;++i<n;)name[i](this,value)}function classedFunction(){for(var i=-1,x=value.apply(this,arguments);++i<n;)name[i](this,x)}name=d3_selection_classes(name).map(d3_selection_classedName);var n=name.length;return"function"==typeof value?classedFunction:classedConstant}function d3_selection_classedName(name){var re=d3_selection_classedRe(name);return function(node,value){if(c=node.classList)return value?c.add(name):c.remove(name);var c=node.getAttribute("class")||"";value?(re.lastIndex=0,re.test(c)||node.setAttribute("class",d3_collapse(c+" "+name))):node.setAttribute("class",d3_collapse(c.replace(re," ")))}}function d3_selection_style(name,value,priority){function styleNull(){this.style.removeProperty(name)}function styleConstant(){this.style.setProperty(name,value,priority)}function styleFunction(){var x=value.apply(this,arguments);null==x?this.style.removeProperty(name):this.style.setProperty(name,x,priority)}return null==value?styleNull:"function"==typeof value?styleFunction:styleConstant}function d3_selection_property(name,value){function propertyNull(){delete this[name]}function propertyConstant(){this[name]=value}function propertyFunction(){var x=value.apply(this,arguments);null==x?delete this[name]:this[name]=x}return null==value?propertyNull:"function"==typeof value?propertyFunction:propertyConstant}function d3_selection_creator(name){function create(){var document=this.ownerDocument,namespace=this.namespaceURI;return namespace===d3_nsXhtml&&document.documentElement.namespaceURI===d3_nsXhtml?document.createElement(name):document.createElementNS(namespace,name)}function createNS(){return this.ownerDocument.createElementNS(name.space,name.local)}return"function"==typeof name?name:(name=d3.ns.qualify(name)).local?createNS:create}function d3_selectionRemove(){var parent=this.parentNode;parent&&parent.removeChild(this)}function d3_selection_dataNode(data){return{__data__:data}}function d3_selection_filter(selector){return function(){return d3_selectMatches(this,selector)}}function d3_selection_sortComparator(comparator){return arguments.length||(comparator=d3_ascending),function(a,b){return a&&b?comparator(a.__data__,b.__data__):!a-!b}}function d3_selection_each(groups,callback){for(var j=0,m=groups.length;j<m;j++)for(var node,group=groups[j],i=0,n=group.length;i<n;i++)(node=group[i])&&callback(node,i,j);return groups}function d3_selection_enter(selection){return d3_subclass(selection,d3_selection_enterPrototype),selection}function d3_selection_enterInsertBefore(enter){var i0,j0;return function(d,i,j){var node,group=enter[j].update,n=group.length;for(j!=j0&&(j0=j,i0=0),i>=i0&&(i0=i+1);!(node=group[i0])&&++i0<n;);return node}}function d3_selection_on(type,listener,capture){function onRemove(){var l=this[name];l&&(this.removeEventListener(type,l,l.$),delete this[name])}function onAdd(){var l=wrap(listener,d3_array(arguments));onRemove.call(this),this.addEventListener(type,this[name]=l,l.$=capture),l._=listener}function removeAll(){var match,re=new RegExp("^__on([^.]+)"+d3.requote(type)+"$");for(var name in this)if(match=name.match(re)){var l=this[name];this.removeEventListener(match[1],l,l.$),delete this[name]}}var name="__on"+type,i=type.indexOf("."),wrap=d3_selection_onListener;i>0&&(type=type.slice(0,i));var filter=d3_selection_onFilters.get(type);return filter&&(type=filter,wrap=d3_selection_onFilter),i?listener?onAdd:onRemove:listener?d3_noop:removeAll}function d3_selection_onListener(listener,argumentz){return function(e){var o=d3.event;d3.event=e,argumentz[0]=this.__data__;try{listener.apply(this,argumentz)}finally{d3.event=o}}}function d3_selection_onFilter(listener,argumentz){var l=d3_selection_onListener(listener,argumentz);return function(e){var target=this,related=e.relatedTarget;related&&(related===target||8&related.compareDocumentPosition(target))||l.call(target,e)}}function d3_event_dragSuppress(node){var name=".dragsuppress-"+ ++d3_event_dragId,click="click"+name,w=d3.select(d3_window(node)).on("touchmove"+name,d3_eventPreventDefault).on("dragstart"+name,d3_eventPreventDefault).on("selectstart"+name,d3_eventPreventDefault);if(null==d3_event_dragSelect&&(d3_event_dragSelect=!("onselectstart"in node)&&d3_vendorSymbol(node.style,"userSelect")),d3_event_dragSelect){var style=d3_documentElement(node).style,select=style[d3_event_dragSelect];style[d3_event_dragSelect]="none"}return function(suppressClick){if(w.on(name,null),
d3_event_dragSelect&&(style[d3_event_dragSelect]=select),suppressClick){var off=function(){w.on(click,null)};w.on(click,function(){d3_eventPreventDefault(),off()},!0),setTimeout(off,0)}}}function d3_mousePoint(container,e){e.changedTouches&&(e=e.changedTouches[0]);var svg=container.ownerSVGElement||container;if(svg.createSVGPoint){var point=svg.createSVGPoint();if(d3_mouse_bug44083<0){var window=d3_window(container);if(window.scrollX||window.scrollY){svg=d3.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var ctm=svg[0][0].getScreenCTM();d3_mouse_bug44083=!(ctm.f||ctm.e),svg.remove()}}return d3_mouse_bug44083?(point.x=e.pageX,point.y=e.pageY):(point.x=e.clientX,point.y=e.clientY),point=point.matrixTransform(container.getScreenCTM().inverse()),[point.x,point.y]}var rect=container.getBoundingClientRect();return[e.clientX-rect.left-container.clientLeft,e.clientY-rect.top-container.clientTop]}function d3_behavior_dragTouchId(){return d3.event.changedTouches[0].identifier}function d3_sgn(x){return x>0?1:x<0?-1:0}function d3_cross2d(a,b,c){return(b[0]-a[0])*(c[1]-a[1])-(b[1]-a[1])*(c[0]-a[0])}function d3_acos(x){return x>1?0:x<-1?π:Math.acos(x)}function d3_asin(x){return x>1?halfπ:x<-1?-halfπ:Math.asin(x)}function d3_sinh(x){return((x=Math.exp(x))-1/x)/2}function d3_cosh(x){return((x=Math.exp(x))+1/x)/2}function d3_tanh(x){return((x=Math.exp(2*x))-1)/(x+1)}function d3_haversin(x){return(x=Math.sin(x/2))*x}function d3_color(){}function d3_hsl(h,s,l){return this instanceof d3_hsl?(this.h=+h,this.s=+s,void(this.l=+l)):arguments.length<2?h instanceof d3_hsl?new d3_hsl(h.h,h.s,h.l):d3_rgb_parse(""+h,d3_rgb_hsl,d3_hsl):new d3_hsl(h,s,l)}function d3_hsl_rgb(h,s,l){function v(h){return h>360?h-=360:h<0&&(h+=360),h<60?m1+(m2-m1)*h/60:h<180?m2:h<240?m1+(m2-m1)*(240-h)/60:m1}function vv(h){return Math.round(255*v(h))}var m1,m2;return h=isNaN(h)?0:(h%=360)<0?h+360:h,s=isNaN(s)?0:s<0?0:s>1?1:s,l=l<0?0:l>1?1:l,m2=l<=.5?l*(1+s):l+s-l*s,m1=2*l-m2,new d3_rgb(vv(h+120),vv(h),vv(h-120))}function d3_hcl(h,c,l){return this instanceof d3_hcl?(this.h=+h,this.c=+c,void(this.l=+l)):arguments.length<2?h instanceof d3_hcl?new d3_hcl(h.h,h.c,h.l):h instanceof d3_lab?d3_lab_hcl(h.l,h.a,h.b):d3_lab_hcl((h=d3_rgb_lab((h=d3.rgb(h)).r,h.g,h.b)).l,h.a,h.b):new d3_hcl(h,c,l)}function d3_hcl_lab(h,c,l){return isNaN(h)&&(h=0),isNaN(c)&&(c=0),new d3_lab(l,Math.cos(h*=d3_radians)*c,Math.sin(h)*c)}function d3_lab(l,a,b){return this instanceof d3_lab?(this.l=+l,this.a=+a,void(this.b=+b)):arguments.length<2?l instanceof d3_lab?new d3_lab(l.l,l.a,l.b):l instanceof d3_hcl?d3_hcl_lab(l.h,l.c,l.l):d3_rgb_lab((l=d3_rgb(l)).r,l.g,l.b):new d3_lab(l,a,b)}function d3_lab_rgb(l,a,b){var y=(l+16)/116,x=y+a/500,z=y-b/200;return x=d3_lab_xyz(x)*d3_lab_X,y=d3_lab_xyz(y)*d3_lab_Y,z=d3_lab_xyz(z)*d3_lab_Z,new d3_rgb(d3_xyz_rgb(3.2404542*x-1.5371385*y-.4985314*z),d3_xyz_rgb(-.969266*x+1.8760108*y+.041556*z),d3_xyz_rgb(.0556434*x-.2040259*y+1.0572252*z))}function d3_lab_hcl(l,a,b){return l>0?new d3_hcl(Math.atan2(b,a)*d3_degrees,Math.sqrt(a*a+b*b),l):new d3_hcl(NaN,NaN,l)}function d3_lab_xyz(x){return x>.206893034?x*x*x:(x-4/29)/7.787037}function d3_xyz_lab(x){return x>.008856?Math.pow(x,1/3):7.787037*x+4/29}function d3_xyz_rgb(r){return Math.round(255*(r<=.00304?12.92*r:1.055*Math.pow(r,1/2.4)-.055))}function d3_rgb(r,g,b){return this instanceof d3_rgb?(this.r=~~r,this.g=~~g,void(this.b=~~b)):arguments.length<2?r instanceof d3_rgb?new d3_rgb(r.r,r.g,r.b):d3_rgb_parse(""+r,d3_rgb,d3_hsl_rgb):new d3_rgb(r,g,b)}function d3_rgbNumber(value){return new d3_rgb(value>>16,value>>8&255,255&value)}function d3_rgbString(value){return d3_rgbNumber(value)+""}function d3_rgb_hex(v){return v<16?"0"+Math.max(0,v).toString(16):Math.min(255,v).toString(16)}function d3_rgb_parse(format,rgb,hsl){var m1,m2,color,r=0,g=0,b=0;if(m1=/([a-z]+)\((.*)\)/.exec(format=format.toLowerCase()))switch(m2=m1[2].split(","),m1[1]){case"hsl":return hsl(parseFloat(m2[0]),parseFloat(m2[1])/100,parseFloat(m2[2])/100);case"rgb":return rgb(d3_rgb_parseNumber(m2[0]),d3_rgb_parseNumber(m2[1]),d3_rgb_parseNumber(m2[2]))}return(color=d3_rgb_names.get(format))?rgb(color.r,color.g,color.b):(null==format||"#"!==format.charAt(0)||isNaN(color=parseInt(format.slice(1),16))||(4===format.length?(r=(3840&color)>>4,r|=r>>4,g=240&color,g|=g>>4,b=15&color,b|=b<<4):7===format.length&&(r=(16711680&color)>>16,g=(65280&color)>>8,b=255&color)),rgb(r,g,b))}function d3_rgb_hsl(r,g,b){var h,s,min=Math.min(r/=255,g/=255,b/=255),max=Math.max(r,g,b),d=max-min,l=(max+min)/2;return d?(s=l<.5?d/(max+min):d/(2-max-min),h=r==max?(g-b)/d+(g<b?6:0):g==max?(b-r)/d+2:(r-g)/d+4,h*=60):(h=NaN,s=l>0&&l<1?0:h),new d3_hsl(h,s,l)}function d3_rgb_lab(r,g,b){r=d3_rgb_xyz(r),g=d3_rgb_xyz(g),b=d3_rgb_xyz(b);var x=d3_xyz_lab((.4124564*r+.3575761*g+.1804375*b)/d3_lab_X),y=d3_xyz_lab((.2126729*r+.7151522*g+.072175*b)/d3_lab_Y);return d3_lab(116*y-16,500*(x-y),200*(y-d3_xyz_lab((.0193339*r+.119192*g+.9503041*b)/d3_lab_Z)))}function d3_rgb_xyz(r){return(r/=255)<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4)}function d3_rgb_parseNumber(c){var f=parseFloat(c);return"%"===c.charAt(c.length-1)?Math.round(2.55*f):f}function d3_functor(v){return"function"==typeof v?v:function(){return v}}function d3_xhrType(response){return function(url,mimeType,callback){return 2===arguments.length&&"function"==typeof mimeType&&(callback=mimeType,mimeType=null),d3_xhr(url,mimeType,response,callback)}}function d3_xhr(url,mimeType,response,callback){function respond(){var result,status=request.status;if(!status&&d3_xhrHasResponse(request)||status>=200&&status<300||304===status){try{result=response.call(xhr,request)}catch(e){return void dispatch.error.call(xhr,e)}dispatch.load.call(xhr,result)}else dispatch.error.call(xhr,request)}var xhr={},dispatch=d3.dispatch("beforesend","progress","load","error"),headers={},request=new XMLHttpRequest,responseType=null;return!this.XDomainRequest||"withCredentials"in request||!/^(http(s)?:)?\/\//.test(url)||(request=new XDomainRequest),"onload"in request?request.onload=request.onerror=respond:request.onreadystatechange=function(){request.readyState>3&&respond()},request.onprogress=function(event){var o=d3.event;d3.event=event;try{dispatch.progress.call(xhr,request)}finally{d3.event=o}},xhr.header=function(name,value){return name=(name+"").toLowerCase(),arguments.length<2?headers[name]:(null==value?delete headers[name]:headers[name]=value+"",xhr)},xhr.mimeType=function(value){return arguments.length?(mimeType=null==value?null:value+"",xhr):mimeType},xhr.responseType=function(value){return arguments.length?(responseType=value,xhr):responseType},xhr.response=function(value){return response=value,xhr},["get","post"].forEach(function(method){xhr[method]=function(){return xhr.send.apply(xhr,[method].concat(d3_array(arguments)))}}),xhr.send=function(method,data,callback){if(2===arguments.length&&"function"==typeof data&&(callback=data,data=null),request.open(method,url,!0),null==mimeType||"accept"in headers||(headers.accept=mimeType+",*/*"),request.setRequestHeader)for(var name in headers)request.setRequestHeader(name,headers[name]);return null!=mimeType&&request.overrideMimeType&&request.overrideMimeType(mimeType),null!=responseType&&(request.responseType=responseType),null!=callback&&xhr.on("error",callback).on("load",function(request){callback(null,request)}),dispatch.beforesend.call(xhr,request),request.send(null==data?null:data),xhr},xhr.abort=function(){return request.abort(),xhr},d3.rebind(xhr,dispatch,"on"),null==callback?xhr:xhr.get(d3_xhr_fixCallback(callback))}function d3_xhr_fixCallback(callback){return 1===callback.length?function(error,request){callback(null==error?request:null)}:callback}function d3_xhrHasResponse(request){var type=request.responseType;return type&&"text"!==type?request.response:request.responseText}function d3_timer(callback,delay,then){var n=arguments.length;n<2&&(delay=0),n<3&&(then=Date.now());var time=then+delay,timer={c:callback,t:time,n:null};return d3_timer_queueTail?d3_timer_queueTail.n=timer:d3_timer_queueHead=timer,d3_timer_queueTail=timer,d3_timer_interval||(d3_timer_timeout=clearTimeout(d3_timer_timeout),d3_timer_interval=1,d3_timer_frame(d3_timer_step)),timer}function d3_timer_step(){var now=d3_timer_mark(),delay=d3_timer_sweep()-now;delay>24?(isFinite(delay)&&(clearTimeout(d3_timer_timeout),d3_timer_timeout=setTimeout(d3_timer_step,delay)),d3_timer_interval=0):(d3_timer_interval=1,d3_timer_frame(d3_timer_step))}function d3_timer_mark(){for(var now=Date.now(),timer=d3_timer_queueHead;timer;)now>=timer.t&&timer.c(now-timer.t)&&(timer.c=null),timer=timer.n;return now}function d3_timer_sweep(){for(var t0,t1=d3_timer_queueHead,time=1/0;t1;)t1.c?(t1.t<time&&(time=t1.t),t1=(t0=t1).n):t1=t0?t0.n=t1.n:d3_timer_queueHead=t1.n;return d3_timer_queueTail=t0,time}function d3_format_precision(x,p){return p-(x?Math.ceil(Math.log(x)/Math.LN10):1)}function d3_formatPrefix(d,i){var k=Math.pow(10,3*abs(8-i));return{scale:i>8?function(d){return d/k}:function(d){return d*k},symbol:d}}function d3_locale_numberFormat(locale){var locale_decimal=locale.decimal,locale_thousands=locale.thousands,locale_grouping=locale.grouping,locale_currency=locale.currency,formatGroup=locale_grouping&&locale_thousands?function(value,width){for(var i=value.length,t=[],j=0,g=locale_grouping[0],length=0;i>0&&g>0&&(length+g+1>width&&(g=Math.max(1,width-length)),t.push(value.substring(i-=g,i+g)),!((length+=g+1)>width));)g=locale_grouping[j=(j+1)%locale_grouping.length];return t.reverse().join(locale_thousands)}:d3_identity;return function(specifier){var match=d3_format_re.exec(specifier),fill=match[1]||" ",align=match[2]||">",sign=match[3]||"-",symbol=match[4]||"",zfill=match[5],width=+match[6],comma=match[7],precision=match[8],type=match[9],scale=1,prefix="",suffix="",integer=!1,exponent=!0;switch(precision&&(precision=+precision.substring(1)),(zfill||"0"===fill&&"="===align)&&(zfill=fill="0",align="="),type){case"n":comma=!0,type="g";break;case"%":scale=100,suffix="%",type="f";break;case"p":scale=100,suffix="%",type="r";break;case"b":case"o":case"x":case"X":"#"===symbol&&(prefix="0"+type.toLowerCase());case"c":exponent=!1;case"d":integer=!0,precision=0;break;case"s":scale=-1,type="r"}"$"===symbol&&(prefix=locale_currency[0],suffix=locale_currency[1]),"r"!=type||precision||(type="g"),null!=precision&&("g"==type?precision=Math.max(1,Math.min(21,precision)):"e"!=type&&"f"!=type||(precision=Math.max(0,Math.min(20,precision)))),type=d3_format_types.get(type)||d3_format_typeDefault;var zcomma=zfill&&comma;return function(value){var fullSuffix=suffix;if(integer&&value%1)return"";var negative=value<0||0===value&&1/value<0?(value=-value,"-"):"-"===sign?"":sign;if(scale<0){var unit=d3.formatPrefix(value,precision);value=unit.scale(value),fullSuffix=unit.symbol+suffix}else value*=scale;value=type(value,precision);var before,after,i=value.lastIndexOf(".");if(i<0){var j=exponent?value.lastIndexOf("e"):-1;j<0?(before=value,after=""):(before=value.substring(0,j),after=value.substring(j))}else before=value.substring(0,i),after=locale_decimal+value.substring(i+1);!zfill&&comma&&(before=formatGroup(before,1/0));var length=prefix.length+before.length+after.length+(zcomma?0:negative.length),padding=length<width?new Array(length=width-length+1).join(fill):"";return zcomma&&(before=formatGroup(padding+before,padding.length?width-after.length:1/0)),negative+=prefix,value=before+after,("<"===align?negative+value+padding:">"===align?padding+negative+value:"^"===align?padding.substring(0,length>>=1)+negative+value+padding.substring(length):negative+(zcomma?value:padding+value))+fullSuffix}}}function d3_format_typeDefault(x){return x+""}function d3_date_utc(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function d3_time_interval(local,step,number){function round(date){var d0=local(date),d1=offset(d0,1);return date-d0<d1-date?d0:d1}function ceil(date){return step(date=local(new d3_date(date-1)),1),date}function offset(date,k){return step(date=new d3_date(+date),k),date}function range(t0,t1,dt){var time=ceil(t0),times=[];if(dt>1)for(;time<t1;)number(time)%dt||times.push(new Date(+time)),step(time,1);else for(;time<t1;)times.push(new Date(+time)),step(time,1);return times}function range_utc(t0,t1,dt){try{d3_date=d3_date_utc;var utc=new d3_date_utc;return utc._=t0,range(utc,t1,dt)}finally{d3_date=Date}}local.floor=local,local.round=round,local.ceil=ceil,local.offset=offset,local.range=range;var utc=local.utc=d3_time_interval_utc(local);return utc.floor=utc,utc.round=d3_time_interval_utc(round),utc.ceil=d3_time_interval_utc(ceil),utc.offset=d3_time_interval_utc(offset),utc.range=range_utc,local}function d3_time_interval_utc(method){return function(date,k){try{d3_date=d3_date_utc;var utc=new d3_date_utc;return utc._=date,method(utc,k)._}finally{d3_date=Date}}}function d3_locale_timeFormat(locale){function d3_time_format(template){function format(date){for(var c,p,f,string=[],i=-1,j=0;++i<n;)37===template.charCodeAt(i)&&(string.push(template.slice(j,i)),null!=(p=d3_time_formatPads[c=template.charAt(++i)])&&(c=template.charAt(++i)),(f=d3_time_formats[c])&&(c=f(date,null==p?"e"===c?" ":"0":p)),string.push(c),j=i+1);return string.push(template.slice(j,i)),string.join("")}var n=template.length;return format.parse=function(string){var d={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(d3_time_parse(d,template,string,0)!=string.length)return null;"p"in d&&(d.H=d.H%12+12*d.p);var localZ=null!=d.Z&&d3_date!==d3_date_utc,date=new(localZ?d3_date_utc:d3_date);return"j"in d?date.setFullYear(d.y,0,d.j):"W"in d||"U"in d?("w"in d||(d.w="W"in d?1:0),date.setFullYear(d.y,0,1),date.setFullYear(d.y,0,"W"in d?(d.w+6)%7+7*d.W-(date.getDay()+5)%7:d.w+7*d.U-(date.getDay()+6)%7)):date.setFullYear(d.y,d.m,d.d),date.setHours(d.H+(d.Z/100|0),d.M+d.Z%100,d.S,d.L),localZ?date._:date},format.toString=function(){return template},format}function d3_time_parse(date,template,string,j){for(var c,p,t,i=0,n=template.length,m=string.length;i<n;){if(j>=m)return-1;if(37===(c=template.charCodeAt(i++))){if(t=template.charAt(i++),!(p=d3_time_parsers[t in d3_time_formatPads?template.charAt(i++):t])||(j=p(date,string,j))<0)return-1}else if(c!=string.charCodeAt(j++))return-1}return j}function d3_time_parseWeekdayAbbrev(date,string,i){d3_time_dayAbbrevRe.lastIndex=0;var n=d3_time_dayAbbrevRe.exec(string.slice(i));return n?(date.w=d3_time_dayAbbrevLookup.get(n[0].toLowerCase()),i+n[0].length):-1}function d3_time_parseWeekday(date,string,i){d3_time_dayRe.lastIndex=0;var n=d3_time_dayRe.exec(string.slice(i));return n?(date.w=d3_time_dayLookup.get(n[0].toLowerCase()),i+n[0].length):-1}function d3_time_parseMonthAbbrev(date,string,i){d3_time_monthAbbrevRe.lastIndex=0;var n=d3_time_monthAbbrevRe.exec(string.slice(i));return n?(date.m=d3_time_monthAbbrevLookup.get(n[0].toLowerCase()),i+n[0].length):-1}function d3_time_parseMonth(date,string,i){d3_time_monthRe.lastIndex=0;var n=d3_time_monthRe.exec(string.slice(i));return n?(date.m=d3_time_monthLookup.get(n[0].toLowerCase()),i+n[0].length):-1}function d3_time_parseLocaleFull(date,string,i){return d3_time_parse(date,d3_time_formats.c.toString(),string,i)}function d3_time_parseLocaleDate(date,string,i){return d3_time_parse(date,d3_time_formats.x.toString(),string,i)}function d3_time_parseLocaleTime(date,string,i){return d3_time_parse(date,d3_time_formats.X.toString(),string,i)}function d3_time_parseAmPm(date,string,i){var n=d3_time_periodLookup.get(string.slice(i,i+=2).toLowerCase());return null==n?-1:(date.p=n,i)}var locale_dateTime=locale.dateTime,locale_date=locale.date,locale_time=locale.time,locale_periods=locale.periods,locale_days=locale.days,locale_shortDays=locale.shortDays,locale_months=locale.months,locale_shortMonths=locale.shortMonths;d3_time_format.utc=function(template){function format(date){try{d3_date=d3_date_utc;var utc=new d3_date;return utc._=date,local(utc)}finally{d3_date=Date}}var local=d3_time_format(template);return format.parse=function(string){try{d3_date=d3_date_utc;var date=local.parse(string);return date&&date._}finally{d3_date=Date}},format.toString=local.toString,format},d3_time_format.multi=d3_time_format.utc.multi=d3_time_formatMulti;var d3_time_periodLookup=d3.map(),d3_time_dayRe=d3_time_formatRe(locale_days),d3_time_dayLookup=d3_time_formatLookup(locale_days),d3_time_dayAbbrevRe=d3_time_formatRe(locale_shortDays),d3_time_dayAbbrevLookup=d3_time_formatLookup(locale_shortDays),d3_time_monthRe=d3_time_formatRe(locale_months),d3_time_monthLookup=d3_time_formatLookup(locale_months),d3_time_monthAbbrevRe=d3_time_formatRe(locale_shortMonths),d3_time_monthAbbrevLookup=d3_time_formatLookup(locale_shortMonths);locale_periods.forEach(function(p,i){d3_time_periodLookup.set(p.toLowerCase(),i)});var d3_time_formats={a:function(d){return locale_shortDays[d.getDay()]},A:function(d){return locale_days[d.getDay()]},b:function(d){return locale_shortMonths[d.getMonth()]},B:function(d){return locale_months[d.getMonth()]},c:d3_time_format(locale_dateTime),d:function(d,p){return d3_time_formatPad(d.getDate(),p,2)},e:function(d,p){return d3_time_formatPad(d.getDate(),p,2)},H:function(d,p){return d3_time_formatPad(d.getHours(),p,2)},I:function(d,p){return d3_time_formatPad(d.getHours()%12||12,p,2)},j:function(d,p){return d3_time_formatPad(1+d3_time.dayOfYear(d),p,3)},L:function(d,p){return d3_time_formatPad(d.getMilliseconds(),p,3)},m:function(d,p){return d3_time_formatPad(d.getMonth()+1,p,2)},M:function(d,p){return d3_time_formatPad(d.getMinutes(),p,2)},p:function(d){return locale_periods[+(d.getHours()>=12)]},S:function(d,p){return d3_time_formatPad(d.getSeconds(),p,2)},U:function(d,p){return d3_time_formatPad(d3_time.sundayOfYear(d),p,2)},w:function(d){return d.getDay()},W:function(d,p){return d3_time_formatPad(d3_time.mondayOfYear(d),p,2)},x:d3_time_format(locale_date),X:d3_time_format(locale_time),y:function(d,p){return d3_time_formatPad(d.getFullYear()%100,p,2)},Y:function(d,p){return d3_time_formatPad(d.getFullYear()%1e4,p,4)},Z:d3_time_zone,"%":function(){return"%"}},d3_time_parsers={a:d3_time_parseWeekdayAbbrev,A:d3_time_parseWeekday,b:d3_time_parseMonthAbbrev,B:d3_time_parseMonth,c:d3_time_parseLocaleFull,d:d3_time_parseDay,e:d3_time_parseDay,H:d3_time_parseHour24,I:d3_time_parseHour24,j:d3_time_parseDayOfYear,L:d3_time_parseMilliseconds,m:d3_time_parseMonthNumber,M:d3_time_parseMinutes,p:d3_time_parseAmPm,S:d3_time_parseSeconds,U:d3_time_parseWeekNumberSunday,w:d3_time_parseWeekdayNumber,W:d3_time_parseWeekNumberMonday,x:d3_time_parseLocaleDate,X:d3_time_parseLocaleTime,y:d3_time_parseYear,Y:d3_time_parseFullYear,Z:d3_time_parseZone,"%":d3_time_parseLiteralPercent};return d3_time_format}function d3_time_formatPad(value,fill,width){var sign=value<0?"-":"",string=(sign?-value:value)+"",length=string.length;return sign+(length<width?new Array(width-length+1).join(fill)+string:string)}function d3_time_formatRe(names){return new RegExp("^(?:"+names.map(d3.requote).join("|")+")","i")}function d3_time_formatLookup(names){for(var map=new d3_Map,i=-1,n=names.length;++i<n;)map.set(names[i].toLowerCase(),i);return map}function d3_time_parseWeekdayNumber(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i,i+1));return n?(date.w=+n[0],i+n[0].length):-1}function d3_time_parseWeekNumberSunday(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i));return n?(date.U=+n[0],i+n[0].length):-1}function d3_time_parseWeekNumberMonday(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i));return n?(date.W=+n[0],i+n[0].length):-1}function d3_time_parseFullYear(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i,i+4));return n?(date.y=+n[0],i+n[0].length):-1}function d3_time_parseYear(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i,i+2));return n?(date.y=d3_time_expandYear(+n[0]),i+n[0].length):-1}function d3_time_parseZone(date,string,i){return/^[+-]\d{4}$/.test(string=string.slice(i,i+5))?(date.Z=-string,i+5):-1}function d3_time_expandYear(d){return d+(d>68?1900:2e3)}function d3_time_parseMonthNumber(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i,i+2));return n?(date.m=n[0]-1,i+n[0].length):-1}function d3_time_parseDay(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i,i+2));return n?(date.d=+n[0],i+n[0].length):-1}function d3_time_parseDayOfYear(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i,i+3));return n?(date.j=+n[0],i+n[0].length):-1}function d3_time_parseHour24(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i,i+2));return n?(date.H=+n[0],i+n[0].length):-1}function d3_time_parseMinutes(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i,i+2));return n?(date.M=+n[0],i+n[0].length):-1}function d3_time_parseSeconds(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i,i+2));return n?(date.S=+n[0],i+n[0].length):-1}function d3_time_parseMilliseconds(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i,i+3));return n?(date.L=+n[0],i+n[0].length):-1}function d3_time_zone(d){var z=d.getTimezoneOffset(),zs=z>0?"-":"+",zh=abs(z)/60|0,zm=abs(z)%60;return zs+d3_time_formatPad(zh,"0",2)+d3_time_formatPad(zm,"0",2)}function d3_time_parseLiteralPercent(date,string,i){d3_time_percentRe.lastIndex=0;var n=d3_time_percentRe.exec(string.slice(i,i+1));return n?i+n[0].length:-1}function d3_time_formatMulti(formats){for(var n=formats.length,i=-1;++i<n;)formats[i][0]=this(formats[i][0]);return function(date){for(var i=0,f=formats[i];!f[1](date);)f=formats[++i];return f[0](date)}}function d3_adder(){}function d3_adderSum(a,b,o){var x=o.s=a+b,bv=x-a,av=x-bv;o.t=a-av+(b-bv)}function d3_geo_streamGeometry(geometry,listener){geometry&&d3_geo_streamGeometryType.hasOwnProperty(geometry.type)&&d3_geo_streamGeometryType[geometry.type](geometry,listener)}function d3_geo_streamLine(coordinates,listener,closed){var coordinate,i=-1,n=coordinates.length-closed;for(listener.lineStart();++i<n;)coordinate=coordinates[i],listener.point(coordinate[0],coordinate[1],coordinate[2]);listener.lineEnd()}function d3_geo_streamPolygon(coordinates,listener){var i=-1,n=coordinates.length;for(listener.polygonStart();++i<n;)d3_geo_streamLine(coordinates[i],listener,1);listener.polygonEnd()}function d3_geo_areaRingStart(){function nextPoint(λ,φ){λ*=d3_radians,φ=φ*d3_radians/2+π/4;var dλ=λ-λ0,sdλ=dλ>=0?1:-1,adλ=sdλ*dλ,cosφ=Math.cos(φ),sinφ=Math.sin(φ),k=sinφ0*sinφ,u=cosφ0*cosφ+k*Math.cos(adλ),v=k*sdλ*Math.sin(adλ);d3_geo_areaRingSum.add(Math.atan2(v,u)),λ0=λ,cosφ0=cosφ,sinφ0=sinφ}var λ00,φ00,λ0,cosφ0,sinφ0;d3_geo_area.point=function(λ,φ){d3_geo_area.point=nextPoint,λ0=(λ00=λ)*d3_radians,cosφ0=Math.cos(φ=(φ00=φ)*d3_radians/2+π/4),sinφ0=Math.sin(φ)},d3_geo_area.lineEnd=function(){nextPoint(λ00,φ00)}}function d3_geo_cartesian(spherical){var λ=spherical[0],φ=spherical[1],cosφ=Math.cos(φ);return[cosφ*Math.cos(λ),cosφ*Math.sin(λ),Math.sin(φ)]}function d3_geo_cartesianDot(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function d3_geo_cartesianCross(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function d3_geo_cartesianAdd(a,b){a[0]+=b[0],a[1]+=b[1],a[2]+=b[2]}function d3_geo_cartesianScale(vector,k){return[vector[0]*k,vector[1]*k,vector[2]*k]}function d3_geo_cartesianNormalize(d){var l=Math.sqrt(d[0]*d[0]+d[1]*d[1]+d[2]*d[2]);d[0]/=l,d[1]/=l,d[2]/=l}function d3_geo_spherical(cartesian){return[Math.atan2(cartesian[1],cartesian[0]),d3_asin(cartesian[2])]}function d3_geo_sphericalEqual(a,b){return abs(a[0]-b[0])<ε&&abs(a[1]-b[1])<ε}function d3_geo_centroidPoint(λ,φ){λ*=d3_radians;var cosφ=Math.cos(φ*=d3_radians);d3_geo_centroidPointXYZ(cosφ*Math.cos(λ),cosφ*Math.sin(λ),Math.sin(φ))}function d3_geo_centroidPointXYZ(x,y,z){++d3_geo_centroidW0,d3_geo_centroidX0+=(x-d3_geo_centroidX0)/d3_geo_centroidW0,d3_geo_centroidY0+=(y-d3_geo_centroidY0)/d3_geo_centroidW0,d3_geo_centroidZ0+=(z-d3_geo_centroidZ0)/d3_geo_centroidW0}function d3_geo_centroidLineStart(){function nextPoint(λ,φ){λ*=d3_radians;var cosφ=Math.cos(φ*=d3_radians),x=cosφ*Math.cos(λ),y=cosφ*Math.sin(λ),z=Math.sin(φ),w=Math.atan2(Math.sqrt((w=y0*z-z0*y)*w+(w=z0*x-x0*z)*w+(w=x0*y-y0*x)*w),x0*x+y0*y+z0*z);d3_geo_centroidW1+=w,d3_geo_centroidX1+=w*(x0+(x0=x)),d3_geo_centroidY1+=w*(y0+(y0=y)),d3_geo_centroidZ1+=w*(z0+(z0=z)),d3_geo_centroidPointXYZ(x0,y0,z0)}var x0,y0,z0;d3_geo_centroid.point=function(λ,φ){λ*=d3_radians;var cosφ=Math.cos(φ*=d3_radians);x0=cosφ*Math.cos(λ),y0=cosφ*Math.sin(λ),z0=Math.sin(φ),d3_geo_centroid.point=nextPoint,d3_geo_centroidPointXYZ(x0,y0,z0)}}function d3_geo_centroidLineEnd(){d3_geo_centroid.point=d3_geo_centroidPoint}function d3_geo_centroidRingStart(){function nextPoint(λ,φ){λ*=d3_radians;var cosφ=Math.cos(φ*=d3_radians),x=cosφ*Math.cos(λ),y=cosφ*Math.sin(λ),z=Math.sin(φ),cx=y0*z-z0*y,cy=z0*x-x0*z,cz=x0*y-y0*x,m=Math.sqrt(cx*cx+cy*cy+cz*cz),u=x0*x+y0*y+z0*z,v=m&&-d3_acos(u)/m,w=Math.atan2(m,u);d3_geo_centroidX2+=v*cx,d3_geo_centroidY2+=v*cy,d3_geo_centroidZ2+=v*cz,d3_geo_centroidW1+=w,d3_geo_centroidX1+=w*(x0+(x0=x)),d3_geo_centroidY1+=w*(y0+(y0=y)),d3_geo_centroidZ1+=w*(z0+(z0=z)),d3_geo_centroidPointXYZ(x0,y0,z0)}var λ00,φ00,x0,y0,z0;d3_geo_centroid.point=function(λ,φ){λ00=λ,φ00=φ,d3_geo_centroid.point=nextPoint,λ*=d3_radians;var cosφ=Math.cos(φ*=d3_radians);x0=cosφ*Math.cos(λ),y0=cosφ*Math.sin(λ),z0=Math.sin(φ),d3_geo_centroidPointXYZ(x0,y0,z0)},d3_geo_centroid.lineEnd=function(){nextPoint(λ00,φ00),d3_geo_centroid.lineEnd=d3_geo_centroidLineEnd,d3_geo_centroid.point=d3_geo_centroidPoint}}function d3_geo_compose(a,b){function compose(x,y){return x=a(x,y),b(x[0],x[1])}return a.invert&&b.invert&&(compose.invert=function(x,y){return(x=b.invert(x,y))&&a.invert(x[0],x[1])}),compose}function d3_true(){return!0}function d3_geo_clipPolygon(segments,compare,clipStartInside,interpolate,listener){var subject=[],clip=[];if(segments.forEach(function(segment){if(!((n=segment.length-1)<=0)){var n,p0=segment[0],p1=segment[n];if(d3_geo_sphericalEqual(p0,p1)){listener.lineStart();for(var i=0;i<n;++i)listener.point((p0=segment[i])[0],p0[1]);return void listener.lineEnd()}var a=new d3_geo_clipPolygonIntersection(p0,segment,null,!0),b=new d3_geo_clipPolygonIntersection(p0,null,a,!1);a.o=b,subject.push(a),clip.push(b),a=new d3_geo_clipPolygonIntersection(p1,segment,null,!1),b=new d3_geo_clipPolygonIntersection(p1,null,a,!0),a.o=b,subject.push(a),clip.push(b)}}),clip.sort(compare),d3_geo_clipPolygonLinkCircular(subject),d3_geo_clipPolygonLinkCircular(clip),subject.length){for(var i=0,entry=clipStartInside,n=clip.length;i<n;++i)clip[i].e=entry=!entry;for(var points,point,start=subject[0];;){for(var current=start,isSubject=!0;current.v;)if((current=current.n)===start)return;points=current.z,listener.lineStart();do{if(current.v=current.o.v=!0,current.e){if(isSubject)for(var i=0,n=points.length;i<n;++i)listener.point((point=points[i])[0],point[1]);else interpolate(current.x,current.n.x,1,listener);current=current.n}else{if(isSubject){points=current.p.z;for(var i=points.length-1;i>=0;--i)listener.point((point=points[i])[0],point[1])}else interpolate(current.x,current.p.x,-1,listener);current=current.p}current=current.o,points=current.z,isSubject=!isSubject}while(!current.v);listener.lineEnd()}}}function d3_geo_clipPolygonLinkCircular(array){if(n=array.length){for(var n,b,i=0,a=array[0];++i<n;)a.n=b=array[i],b.p=a,a=b;a.n=b=array[0],b.p=a}}function d3_geo_clipPolygonIntersection(point,points,other,entry){this.x=point,this.z=points,this.o=other,this.e=entry,this.v=!1,this.n=this.p=null}function d3_geo_clip(pointVisible,clipLine,interpolate,clipStart){return function(rotate,listener){function point(λ,φ){var point=rotate(λ,φ);pointVisible(λ=point[0],φ=point[1])&&listener.point(λ,φ)}function pointLine(λ,φ){var point=rotate(λ,φ);line.point(point[0],point[1])}function lineStart(){clip.point=pointLine,line.lineStart()}function lineEnd(){clip.point=point,line.lineEnd()}function pointRing(λ,φ){ring.push([λ,φ]);var point=rotate(λ,φ);ringListener.point(point[0],point[1])}function ringStart(){ringListener.lineStart(),ring=[]}function ringEnd(){pointRing(ring[0][0],ring[0][1]),ringListener.lineEnd();var segment,clean=ringListener.clean(),ringSegments=buffer.buffer(),n=ringSegments.length;if(ring.pop(),polygon.push(ring),ring=null,n)if(1&clean){segment=ringSegments[0];var point,n=segment.length-1,i=-1;if(n>0){for(polygonStarted||(listener.polygonStart(),polygonStarted=!0),listener.lineStart();++i<n;)listener.point((point=segment[i])[0],point[1]);listener.lineEnd()}}else n>1&&2&clean&&ringSegments.push(ringSegments.pop().concat(ringSegments.shift())),segments.push(ringSegments.filter(d3_geo_clipSegmentLength1))}var segments,polygon,ring,line=clipLine(listener),rotatedClipStart=rotate.invert(clipStart[0],clipStart[1]),clip={point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:function(){clip.point=pointRing,clip.lineStart=ringStart,clip.lineEnd=ringEnd,segments=[],polygon=[]},polygonEnd:function(){clip.point=point,clip.lineStart=lineStart,clip.lineEnd=lineEnd,segments=d3.merge(segments);var clipStartInside=d3_geo_pointInPolygon(rotatedClipStart,polygon);segments.length?(polygonStarted||(listener.polygonStart(),polygonStarted=!0),d3_geo_clipPolygon(segments,d3_geo_clipSort,clipStartInside,interpolate,listener)):clipStartInside&&(polygonStarted||(listener.polygonStart(),polygonStarted=!0),listener.lineStart(),interpolate(null,null,1,listener),listener.lineEnd()),polygonStarted&&(listener.polygonEnd(),polygonStarted=!1),segments=polygon=null},sphere:function(){listener.polygonStart(),listener.lineStart(),interpolate(null,null,1,listener),listener.lineEnd(),listener.polygonEnd()}},buffer=d3_geo_clipBufferListener(),ringListener=clipLine(buffer),polygonStarted=!1;return clip}}function d3_geo_clipSegmentLength1(segment){return segment.length>1}function d3_geo_clipBufferListener(){var line,lines=[];return{lineStart:function(){lines.push(line=[])},point:function(λ,φ){line.push([λ,φ])},lineEnd:d3_noop,buffer:function(){var buffer=lines;return lines=[],line=null,buffer},rejoin:function(){lines.length>1&&lines.push(lines.pop().concat(lines.shift()))}}}function d3_geo_clipSort(a,b){return((a=a.x)[0]<0?a[1]-halfπ-ε:halfπ-a[1])-((b=b.x)[0]<0?b[1]-halfπ-ε:halfπ-b[1])}function d3_geo_clipAntimeridianLine(listener){var clean,λ0=NaN,φ0=NaN,sλ0=NaN;return{lineStart:function(){listener.lineStart(),clean=1},point:function(λ1,φ1){var sλ1=λ1>0?π:-π,dλ=abs(λ1-λ0);abs(dλ-π)<ε?(listener.point(λ0,φ0=(φ0+φ1)/2>0?halfπ:-halfπ),listener.point(sλ0,φ0),listener.lineEnd(),listener.lineStart(),listener.point(sλ1,φ0),listener.point(λ1,φ0),clean=0):sλ0!==sλ1&&dλ>=π&&(abs(λ0-sλ0)<ε&&(λ0-=sλ0*ε),abs(λ1-sλ1)<ε&&(λ1-=sλ1*ε),φ0=d3_geo_clipAntimeridianIntersect(λ0,φ0,λ1,φ1),listener.point(sλ0,φ0),listener.lineEnd(),listener.lineStart(),listener.point(sλ1,φ0),clean=0),listener.point(λ0=λ1,φ0=φ1),sλ0=sλ1},lineEnd:function(){listener.lineEnd(),λ0=φ0=NaN},clean:function(){return 2-clean}}}function d3_geo_clipAntimeridianIntersect(λ0,φ0,λ1,φ1){var cosφ0,cosφ1,sinλ0_λ1=Math.sin(λ0-λ1);return abs(sinλ0_λ1)>ε?Math.atan((Math.sin(φ0)*(cosφ1=Math.cos(φ1))*Math.sin(λ1)-Math.sin(φ1)*(cosφ0=Math.cos(φ0))*Math.sin(λ0))/(cosφ0*cosφ1*sinλ0_λ1)):(φ0+φ1)/2}function d3_geo_clipAntimeridianInterpolate(from,to,direction,listener){var φ;if(null==from)φ=direction*halfπ,listener.point(-π,φ),listener.point(0,φ),listener.point(π,φ),listener.point(π,0),listener.point(π,-φ),listener.point(0,-φ),listener.point(-π,-φ),listener.point(-π,0),listener.point(-π,φ);else if(abs(from[0]-to[0])>ε){var s=from[0]<to[0]?π:-π;φ=direction*s/2,listener.point(-s,φ),listener.point(0,φ),listener.point(s,φ)
}else listener.point(to[0],to[1])}function d3_geo_pointInPolygon(point,polygon){var meridian=point[0],parallel=point[1],meridianNormal=[Math.sin(meridian),-Math.cos(meridian),0],polarAngle=0,winding=0;d3_geo_areaRingSum.reset();for(var i=0,n=polygon.length;i<n;++i){var ring=polygon[i],m=ring.length;if(m)for(var point0=ring[0],λ0=point0[0],φ0=point0[1]/2+π/4,sinφ0=Math.sin(φ0),cosφ0=Math.cos(φ0),j=1;;){j===m&&(j=0),point=ring[j];var λ=point[0],φ=point[1]/2+π/4,sinφ=Math.sin(φ),cosφ=Math.cos(φ),dλ=λ-λ0,sdλ=dλ>=0?1:-1,adλ=sdλ*dλ,antimeridian=adλ>π,k=sinφ0*sinφ;if(d3_geo_areaRingSum.add(Math.atan2(k*sdλ*Math.sin(adλ),cosφ0*cosφ+k*Math.cos(adλ))),polarAngle+=antimeridian?dλ+sdλ*τ:dλ,antimeridian^λ0>=meridian^λ>=meridian){var arc=d3_geo_cartesianCross(d3_geo_cartesian(point0),d3_geo_cartesian(point));d3_geo_cartesianNormalize(arc);var intersection=d3_geo_cartesianCross(meridianNormal,arc);d3_geo_cartesianNormalize(intersection);var φarc=(antimeridian^dλ>=0?-1:1)*d3_asin(intersection[2]);(parallel>φarc||parallel===φarc&&(arc[0]||arc[1]))&&(winding+=antimeridian^dλ>=0?1:-1)}if(!j++)break;λ0=λ,sinφ0=sinφ,cosφ0=cosφ,point0=point}}return(polarAngle<-ε||polarAngle<ε&&d3_geo_areaRingSum<-ε)^1&winding}function d3_geo_clipCircle(radius){function visible(λ,φ){return Math.cos(λ)*Math.cos(φ)>cr}function clipLine(listener){var point0,c0,v0,v00,clean;return{lineStart:function(){v00=v0=!1,clean=1},point:function(λ,φ){var point2,point1=[λ,φ],v=visible(λ,φ),c=smallRadius?v?0:code(λ,φ):v?code(λ+(λ<0?π:-π),φ):0;if(!point0&&(v00=v0=v)&&listener.lineStart(),v!==v0&&(point2=intersect(point0,point1),(d3_geo_sphericalEqual(point0,point2)||d3_geo_sphericalEqual(point1,point2))&&(point1[0]+=ε,point1[1]+=ε,v=visible(point1[0],point1[1]))),v!==v0)clean=0,v?(listener.lineStart(),point2=intersect(point1,point0),listener.point(point2[0],point2[1])):(point2=intersect(point0,point1),listener.point(point2[0],point2[1]),listener.lineEnd()),point0=point2;else if(notHemisphere&&point0&&smallRadius^v){var t;c&c0||!(t=intersect(point1,point0,!0))||(clean=0,smallRadius?(listener.lineStart(),listener.point(t[0][0],t[0][1]),listener.point(t[1][0],t[1][1]),listener.lineEnd()):(listener.point(t[1][0],t[1][1]),listener.lineEnd(),listener.lineStart(),listener.point(t[0][0],t[0][1])))}!v||point0&&d3_geo_sphericalEqual(point0,point1)||listener.point(point1[0],point1[1]),point0=point1,v0=v,c0=c},lineEnd:function(){v0&&listener.lineEnd(),point0=null},clean:function(){return clean|(v00&&v0)<<1}}}function intersect(a,b,two){var pa=d3_geo_cartesian(a),pb=d3_geo_cartesian(b),n1=[1,0,0],n2=d3_geo_cartesianCross(pa,pb),n2n2=d3_geo_cartesianDot(n2,n2),n1n2=n2[0],determinant=n2n2-n1n2*n1n2;if(!determinant)return!two&&a;var c1=cr*n2n2/determinant,c2=-cr*n1n2/determinant,n1xn2=d3_geo_cartesianCross(n1,n2),A=d3_geo_cartesianScale(n1,c1);d3_geo_cartesianAdd(A,d3_geo_cartesianScale(n2,c2));var u=n1xn2,w=d3_geo_cartesianDot(A,u),uu=d3_geo_cartesianDot(u,u),t2=w*w-uu*(d3_geo_cartesianDot(A,A)-1);if(!(t2<0)){var t=Math.sqrt(t2),q=d3_geo_cartesianScale(u,(-w-t)/uu);if(d3_geo_cartesianAdd(q,A),q=d3_geo_spherical(q),!two)return q;var z,λ0=a[0],λ1=b[0],φ0=a[1],φ1=b[1];λ1<λ0&&(z=λ0,λ0=λ1,λ1=z);var δλ=λ1-λ0,polar=abs(δλ-π)<ε,meridian=polar||δλ<ε;if(!polar&&φ1<φ0&&(z=φ0,φ0=φ1,φ1=z),meridian?polar?φ0+φ1>0^q[1]<(abs(q[0]-λ0)<ε?φ0:φ1):φ0<=q[1]&&q[1]<=φ1:δλ>π^(λ0<=q[0]&&q[0]<=λ1)){var q1=d3_geo_cartesianScale(u,(-w+t)/uu);return d3_geo_cartesianAdd(q1,A),[q,d3_geo_spherical(q1)]}}}function code(λ,φ){var r=smallRadius?radius:π-radius,code=0;return λ<-r?code|=1:λ>r&&(code|=2),φ<-r?code|=4:φ>r&&(code|=8),code}var cr=Math.cos(radius),smallRadius=cr>0,notHemisphere=abs(cr)>ε;return d3_geo_clip(visible,clipLine,d3_geo_circleInterpolate(radius,6*d3_radians),smallRadius?[0,-radius]:[-π,radius-π])}function d3_geom_clipLine(x0,y0,x1,y1){return function(line){var r,a=line.a,b=line.b,ax=a.x,ay=a.y,bx=b.x,by=b.y,t0=0,t1=1,dx=bx-ax,dy=by-ay;if(r=x0-ax,dx||!(r>0)){if(r/=dx,dx<0){if(r<t0)return;r<t1&&(t1=r)}else if(dx>0){if(r>t1)return;r>t0&&(t0=r)}if(r=x1-ax,dx||!(r<0)){if(r/=dx,dx<0){if(r>t1)return;r>t0&&(t0=r)}else if(dx>0){if(r<t0)return;r<t1&&(t1=r)}if(r=y0-ay,dy||!(r>0)){if(r/=dy,dy<0){if(r<t0)return;r<t1&&(t1=r)}else if(dy>0){if(r>t1)return;r>t0&&(t0=r)}if(r=y1-ay,dy||!(r<0)){if(r/=dy,dy<0){if(r>t1)return;r>t0&&(t0=r)}else if(dy>0){if(r<t0)return;r<t1&&(t1=r)}return t0>0&&(line.a={x:ax+t0*dx,y:ay+t0*dy}),t1<1&&(line.b={x:ax+t1*dx,y:ay+t1*dy}),line}}}}}}function d3_geo_clipExtent(x0,y0,x1,y1){function corner(p,direction){return abs(p[0]-x0)<ε?direction>0?0:3:abs(p[0]-x1)<ε?direction>0?2:1:abs(p[1]-y0)<ε?direction>0?1:0:direction>0?3:2}function compare(a,b){return comparePoints(a.x,b.x)}function comparePoints(a,b){var ca=corner(a,1),cb=corner(b,1);return ca!==cb?ca-cb:0===ca?b[1]-a[1]:1===ca?a[0]-b[0]:2===ca?a[1]-b[1]:b[0]-a[0]}return function(listener){function insidePolygon(p){for(var wn=0,n=polygon.length,y=p[1],i=0;i<n;++i)for(var b,j=1,v=polygon[i],m=v.length,a=v[0];j<m;++j)b=v[j],a[1]<=y?b[1]>y&&d3_cross2d(a,b,p)>0&&++wn:b[1]<=y&&d3_cross2d(a,b,p)<0&&--wn,a=b;return 0!==wn}function interpolate(from,to,direction,listener){var a=0,a1=0;if(null==from||(a=corner(from,direction))!==(a1=corner(to,direction))||comparePoints(from,to)<0^direction>0)do{listener.point(0===a||3===a?x0:x1,a>1?y1:y0)}while((a=(a+direction+4)%4)!==a1);else listener.point(to[0],to[1])}function pointVisible(x,y){return x0<=x&&x<=x1&&y0<=y&&y<=y1}function point(x,y){pointVisible(x,y)&&listener.point(x,y)}function lineStart(){clip.point=linePoint,polygon&&polygon.push(ring=[]),first=!0,v_=!1,x_=y_=NaN}function lineEnd(){segments&&(linePoint(x__,y__),v__&&v_&&bufferListener.rejoin(),segments.push(bufferListener.buffer())),clip.point=point,v_&&listener.lineEnd()}function linePoint(x,y){x=Math.max(-d3_geo_clipExtentMAX,Math.min(d3_geo_clipExtentMAX,x)),y=Math.max(-d3_geo_clipExtentMAX,Math.min(d3_geo_clipExtentMAX,y));var v=pointVisible(x,y);if(polygon&&ring.push([x,y]),first)x__=x,y__=y,v__=v,first=!1,v&&(listener.lineStart(),listener.point(x,y));else if(v&&v_)listener.point(x,y);else{var l={a:{x:x_,y:y_},b:{x:x,y:y}};clipLine(l)?(v_||(listener.lineStart(),listener.point(l.a.x,l.a.y)),listener.point(l.b.x,l.b.y),v||listener.lineEnd(),clean=!1):v&&(listener.lineStart(),listener.point(x,y),clean=!1)}x_=x,y_=y,v_=v}var segments,polygon,ring,x__,y__,v__,x_,y_,v_,first,clean,listener_=listener,bufferListener=d3_geo_clipBufferListener(),clipLine=d3_geom_clipLine(x0,y0,x1,y1),clip={point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:function(){listener=bufferListener,segments=[],polygon=[],clean=!0},polygonEnd:function(){listener=listener_,segments=d3.merge(segments);var clipStartInside=insidePolygon([x0,y1]),inside=clean&&clipStartInside,visible=segments.length;(inside||visible)&&(listener.polygonStart(),inside&&(listener.lineStart(),interpolate(null,null,1,listener),listener.lineEnd()),visible&&d3_geo_clipPolygon(segments,compare,clipStartInside,interpolate,listener),listener.polygonEnd()),segments=polygon=ring=null}};return clip}}function d3_geo_conic(projectAt){var φ0=0,φ1=π/3,m=d3_geo_projectionMutator(projectAt),p=m(φ0,φ1);return p.parallels=function(_){return arguments.length?m(φ0=_[0]*π/180,φ1=_[1]*π/180):[φ0/π*180,φ1/π*180]},p}function d3_geo_conicEqualArea(φ0,φ1){function forward(λ,φ){var ρ=Math.sqrt(C-2*n*Math.sin(φ))/n;return[ρ*Math.sin(λ*=n),ρ0-ρ*Math.cos(λ)]}var sinφ0=Math.sin(φ0),n=(sinφ0+Math.sin(φ1))/2,C=1+sinφ0*(2*n-sinφ0),ρ0=Math.sqrt(C)/n;return forward.invert=function(x,y){var ρ0_y=ρ0-y;return[Math.atan2(x,ρ0_y)/n,d3_asin((C-(x*x+ρ0_y*ρ0_y)*n*n)/(2*n))]},forward}function d3_geo_pathAreaRingStart(){function nextPoint(x,y){d3_geo_pathAreaPolygon+=y0*x-x0*y,x0=x,y0=y}var x00,y00,x0,y0;d3_geo_pathArea.point=function(x,y){d3_geo_pathArea.point=nextPoint,x00=x0=x,y00=y0=y},d3_geo_pathArea.lineEnd=function(){nextPoint(x00,y00)}}function d3_geo_pathBoundsPoint(x,y){x<d3_geo_pathBoundsX0&&(d3_geo_pathBoundsX0=x),x>d3_geo_pathBoundsX1&&(d3_geo_pathBoundsX1=x),y<d3_geo_pathBoundsY0&&(d3_geo_pathBoundsY0=y),y>d3_geo_pathBoundsY1&&(d3_geo_pathBoundsY1=y)}function d3_geo_pathBuffer(){function point(x,y){buffer.push("M",x,",",y,pointCircle)}function pointLineStart(x,y){buffer.push("M",x,",",y),stream.point=pointLine}function pointLine(x,y){buffer.push("L",x,",",y)}function lineEnd(){stream.point=point}function lineEndPolygon(){buffer.push("Z")}var pointCircle=d3_geo_pathBufferCircle(4.5),buffer=[],stream={point:point,lineStart:function(){stream.point=pointLineStart},lineEnd:lineEnd,polygonStart:function(){stream.lineEnd=lineEndPolygon},polygonEnd:function(){stream.lineEnd=lineEnd,stream.point=point},pointRadius:function(_){return pointCircle=d3_geo_pathBufferCircle(_),stream},result:function(){if(buffer.length){var result=buffer.join("");return buffer=[],result}}};return stream}function d3_geo_pathBufferCircle(radius){return"m0,"+radius+"a"+radius+","+radius+" 0 1,1 0,"+-2*radius+"a"+radius+","+radius+" 0 1,1 0,"+2*radius+"z"}function d3_geo_pathCentroidPoint(x,y){d3_geo_centroidX0+=x,d3_geo_centroidY0+=y,++d3_geo_centroidZ0}function d3_geo_pathCentroidLineStart(){function nextPoint(x,y){var dx=x-x0,dy=y-y0,z=Math.sqrt(dx*dx+dy*dy);d3_geo_centroidX1+=z*(x0+x)/2,d3_geo_centroidY1+=z*(y0+y)/2,d3_geo_centroidZ1+=z,d3_geo_pathCentroidPoint(x0=x,y0=y)}var x0,y0;d3_geo_pathCentroid.point=function(x,y){d3_geo_pathCentroid.point=nextPoint,d3_geo_pathCentroidPoint(x0=x,y0=y)}}function d3_geo_pathCentroidLineEnd(){d3_geo_pathCentroid.point=d3_geo_pathCentroidPoint}function d3_geo_pathCentroidRingStart(){function nextPoint(x,y){var dx=x-x0,dy=y-y0,z=Math.sqrt(dx*dx+dy*dy);d3_geo_centroidX1+=z*(x0+x)/2,d3_geo_centroidY1+=z*(y0+y)/2,d3_geo_centroidZ1+=z,z=y0*x-x0*y,d3_geo_centroidX2+=z*(x0+x),d3_geo_centroidY2+=z*(y0+y),d3_geo_centroidZ2+=3*z,d3_geo_pathCentroidPoint(x0=x,y0=y)}var x00,y00,x0,y0;d3_geo_pathCentroid.point=function(x,y){d3_geo_pathCentroid.point=nextPoint,d3_geo_pathCentroidPoint(x00=x0=x,y00=y0=y)},d3_geo_pathCentroid.lineEnd=function(){nextPoint(x00,y00)}}function d3_geo_pathContext(context){function point(x,y){context.moveTo(x+pointRadius,y),context.arc(x,y,pointRadius,0,τ)}function pointLineStart(x,y){context.moveTo(x,y),stream.point=pointLine}function pointLine(x,y){context.lineTo(x,y)}function lineEnd(){stream.point=point}function lineEndPolygon(){context.closePath()}var pointRadius=4.5,stream={point:point,lineStart:function(){stream.point=pointLineStart},lineEnd:lineEnd,polygonStart:function(){stream.lineEnd=lineEndPolygon},polygonEnd:function(){stream.lineEnd=lineEnd,stream.point=point},pointRadius:function(_){return pointRadius=_,stream},result:d3_noop};return stream}function d3_geo_resample(project){function resample(stream){return(maxDepth?resampleRecursive:resampleNone)(stream)}function resampleNone(stream){return d3_geo_transformPoint(stream,function(x,y){x=project(x,y),stream.point(x[0],x[1])})}function resampleRecursive(stream){function point(x,y){x=project(x,y),stream.point(x[0],x[1])}function lineStart(){x0=NaN,resample.point=linePoint,stream.lineStart()}function linePoint(λ,φ){var c=d3_geo_cartesian([λ,φ]),p=project(λ,φ);resampleLineTo(x0,y0,λ0,a0,b0,c0,x0=p[0],y0=p[1],λ0=λ,a0=c[0],b0=c[1],c0=c[2],maxDepth,stream),stream.point(x0,y0)}function lineEnd(){resample.point=point,stream.lineEnd()}function ringStart(){lineStart(),resample.point=ringPoint,resample.lineEnd=ringEnd}function ringPoint(λ,φ){linePoint(λ00=λ,φ00=φ),x00=x0,y00=y0,a00=a0,b00=b0,c00=c0,resample.point=linePoint}function ringEnd(){resampleLineTo(x0,y0,λ0,a0,b0,c0,x00,y00,λ00,a00,b00,c00,maxDepth,stream),resample.lineEnd=lineEnd,lineEnd()}var λ00,φ00,x00,y00,a00,b00,c00,λ0,x0,y0,a0,b0,c0,resample={point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:function(){stream.polygonStart(),resample.lineStart=ringStart},polygonEnd:function(){stream.polygonEnd(),resample.lineStart=lineStart}};return resample}function resampleLineTo(x0,y0,λ0,a0,b0,c0,x1,y1,λ1,a1,b1,c1,depth,stream){var dx=x1-x0,dy=y1-y0,d2=dx*dx+dy*dy;if(d2>4*δ2&&depth--){var a=a0+a1,b=b0+b1,c=c0+c1,m=Math.sqrt(a*a+b*b+c*c),φ2=Math.asin(c/=m),λ2=abs(abs(c)-1)<ε||abs(λ0-λ1)<ε?(λ0+λ1)/2:Math.atan2(b,a),p=project(λ2,φ2),x2=p[0],y2=p[1],dx2=x2-x0,dy2=y2-y0,dz=dy*dx2-dx*dy2;(dz*dz/d2>δ2||abs((dx*dx2+dy*dy2)/d2-.5)>.3||a0*a1+b0*b1+c0*c1<cosMinDistance)&&(resampleLineTo(x0,y0,λ0,a0,b0,c0,x2,y2,λ2,a/=m,b/=m,c,depth,stream),stream.point(x2,y2),resampleLineTo(x2,y2,λ2,a,b,c,x1,y1,λ1,a1,b1,c1,depth,stream))}}var δ2=.5,cosMinDistance=Math.cos(30*d3_radians),maxDepth=16;return resample.precision=function(_){return arguments.length?(maxDepth=(δ2=_*_)>0&&16,resample):Math.sqrt(δ2)},resample}function d3_geo_pathProjectStream(project){var resample=d3_geo_resample(function(x,y){return project([x*d3_degrees,y*d3_degrees])});return function(stream){return d3_geo_projectionRadians(resample(stream))}}function d3_geo_transform(stream){this.stream=stream}function d3_geo_transformPoint(stream,point){return{point:point,sphere:function(){stream.sphere()},lineStart:function(){stream.lineStart()},lineEnd:function(){stream.lineEnd()},polygonStart:function(){stream.polygonStart()},polygonEnd:function(){stream.polygonEnd()}}}function d3_geo_projection(project){return d3_geo_projectionMutator(function(){return project})()}function d3_geo_projectionMutator(projectAt){function projection(point){return point=projectRotate(point[0]*d3_radians,point[1]*d3_radians),[point[0]*k+δx,δy-point[1]*k]}function invert(point){return(point=projectRotate.invert((point[0]-δx)/k,(δy-point[1])/k))&&[point[0]*d3_degrees,point[1]*d3_degrees]}function reset(){projectRotate=d3_geo_compose(rotate=d3_geo_rotation(δλ,δφ,δγ),project);var center=project(λ,φ);return δx=x-center[0]*k,δy=y+center[1]*k,invalidate()}function invalidate(){return stream&&(stream.valid=!1,stream=null),projection}var project,rotate,projectRotate,δx,δy,stream,projectResample=d3_geo_resample(function(x,y){return x=project(x,y),[x[0]*k+δx,δy-x[1]*k]}),k=150,x=480,y=250,λ=0,φ=0,δλ=0,δφ=0,δγ=0,preclip=d3_geo_clipAntimeridian,postclip=d3_identity,clipAngle=null,clipExtent=null;return projection.stream=function(output){return stream&&(stream.valid=!1),stream=d3_geo_projectionRadians(preclip(rotate,projectResample(postclip(output)))),stream.valid=!0,stream},projection.clipAngle=function(_){return arguments.length?(preclip=null==_?(clipAngle=_,d3_geo_clipAntimeridian):d3_geo_clipCircle((clipAngle=+_)*d3_radians),invalidate()):clipAngle},projection.clipExtent=function(_){return arguments.length?(clipExtent=_,postclip=_?d3_geo_clipExtent(_[0][0],_[0][1],_[1][0],_[1][1]):d3_identity,invalidate()):clipExtent},projection.scale=function(_){return arguments.length?(k=+_,reset()):k},projection.translate=function(_){return arguments.length?(x=+_[0],y=+_[1],reset()):[x,y]},projection.center=function(_){return arguments.length?(λ=_[0]%360*d3_radians,φ=_[1]%360*d3_radians,reset()):[λ*d3_degrees,φ*d3_degrees]},projection.rotate=function(_){return arguments.length?(δλ=_[0]%360*d3_radians,δφ=_[1]%360*d3_radians,δγ=_.length>2?_[2]%360*d3_radians:0,reset()):[δλ*d3_degrees,δφ*d3_degrees,δγ*d3_degrees]},d3.rebind(projection,projectResample,"precision"),function(){return project=projectAt.apply(this,arguments),projection.invert=project.invert&&invert,reset()}}function d3_geo_projectionRadians(stream){return d3_geo_transformPoint(stream,function(x,y){stream.point(x*d3_radians,y*d3_radians)})}function d3_geo_equirectangular(λ,φ){return[λ,φ]}function d3_geo_identityRotation(λ,φ){return[λ>π?λ-τ:λ<-π?λ+τ:λ,φ]}function d3_geo_rotation(δλ,δφ,δγ){return δλ?δφ||δγ?d3_geo_compose(d3_geo_rotationλ(δλ),d3_geo_rotationφγ(δφ,δγ)):d3_geo_rotationλ(δλ):δφ||δγ?d3_geo_rotationφγ(δφ,δγ):d3_geo_identityRotation}function d3_geo_forwardRotationλ(δλ){return function(λ,φ){return λ+=δλ,[λ>π?λ-τ:λ<-π?λ+τ:λ,φ]}}function d3_geo_rotationλ(δλ){var rotation=d3_geo_forwardRotationλ(δλ);return rotation.invert=d3_geo_forwardRotationλ(-δλ),rotation}function d3_geo_rotationφγ(δφ,δγ){function rotation(λ,φ){var cosφ=Math.cos(φ),x=Math.cos(λ)*cosφ,y=Math.sin(λ)*cosφ,z=Math.sin(φ),k=z*cosδφ+x*sinδφ;return[Math.atan2(y*cosδγ-k*sinδγ,x*cosδφ-z*sinδφ),d3_asin(k*cosδγ+y*sinδγ)]}var cosδφ=Math.cos(δφ),sinδφ=Math.sin(δφ),cosδγ=Math.cos(δγ),sinδγ=Math.sin(δγ);return rotation.invert=function(λ,φ){var cosφ=Math.cos(φ),x=Math.cos(λ)*cosφ,y=Math.sin(λ)*cosφ,z=Math.sin(φ),k=z*cosδγ-y*sinδγ;return[Math.atan2(y*cosδγ+z*sinδγ,x*cosδφ+k*sinδφ),d3_asin(k*cosδφ-x*sinδφ)]},rotation}function d3_geo_circleInterpolate(radius,precision){var cr=Math.cos(radius),sr=Math.sin(radius);return function(from,to,direction,listener){var step=direction*precision;null!=from?(from=d3_geo_circleAngle(cr,from),to=d3_geo_circleAngle(cr,to),(direction>0?from<to:from>to)&&(from+=direction*τ)):(from=radius+direction*τ,to=radius-.5*step);for(var point,t=from;direction>0?t>to:t<to;t-=step)listener.point((point=d3_geo_spherical([cr,-sr*Math.cos(t),-sr*Math.sin(t)]))[0],point[1])}}function d3_geo_circleAngle(cr,point){var a=d3_geo_cartesian(point);a[0]-=cr,d3_geo_cartesianNormalize(a);var angle=d3_acos(-a[1]);return((-a[2]<0?-angle:angle)+2*Math.PI-ε)%(2*Math.PI)}function d3_geo_graticuleX(y0,y1,dy){var y=d3.range(y0,y1-ε,dy).concat(y1);return function(x){return y.map(function(y){return[x,y]})}}function d3_geo_graticuleY(x0,x1,dx){var x=d3.range(x0,x1-ε,dx).concat(x1);return function(y){return x.map(function(x){return[x,y]})}}function d3_source(d){return d.source}function d3_target(d){return d.target}function d3_geo_interpolate(x0,y0,x1,y1){var cy0=Math.cos(y0),sy0=Math.sin(y0),cy1=Math.cos(y1),sy1=Math.sin(y1),kx0=cy0*Math.cos(x0),ky0=cy0*Math.sin(x0),kx1=cy1*Math.cos(x1),ky1=cy1*Math.sin(x1),d=2*Math.asin(Math.sqrt(d3_haversin(y1-y0)+cy0*cy1*d3_haversin(x1-x0))),k=1/Math.sin(d),interpolate=d?function(t){var B=Math.sin(t*=d)*k,A=Math.sin(d-t)*k,x=A*kx0+B*kx1,y=A*ky0+B*ky1,z=A*sy0+B*sy1;return[Math.atan2(y,x)*d3_degrees,Math.atan2(z,Math.sqrt(x*x+y*y))*d3_degrees]}:function(){return[x0*d3_degrees,y0*d3_degrees]};return interpolate.distance=d,interpolate}function d3_geo_lengthLineStart(){function nextPoint(λ,φ){var sinφ=Math.sin(φ*=d3_radians),cosφ=Math.cos(φ),t=abs((λ*=d3_radians)-λ0),cosΔλ=Math.cos(t);d3_geo_lengthSum+=Math.atan2(Math.sqrt((t=cosφ*Math.sin(t))*t+(t=cosφ0*sinφ-sinφ0*cosφ*cosΔλ)*t),sinφ0*sinφ+cosφ0*cosφ*cosΔλ),λ0=λ,sinφ0=sinφ,cosφ0=cosφ}var λ0,sinφ0,cosφ0;d3_geo_length.point=function(λ,φ){λ0=λ*d3_radians,sinφ0=Math.sin(φ*=d3_radians),cosφ0=Math.cos(φ),d3_geo_length.point=nextPoint},d3_geo_length.lineEnd=function(){d3_geo_length.point=d3_geo_length.lineEnd=d3_noop}}function d3_geo_azimuthal(scale,angle){function azimuthal(λ,φ){var cosλ=Math.cos(λ),cosφ=Math.cos(φ),k=scale(cosλ*cosφ);return[k*cosφ*Math.sin(λ),k*Math.sin(φ)]}return azimuthal.invert=function(x,y){var ρ=Math.sqrt(x*x+y*y),c=angle(ρ),sinc=Math.sin(c),cosc=Math.cos(c);return[Math.atan2(x*sinc,ρ*cosc),Math.asin(ρ&&y*sinc/ρ)]},azimuthal}function d3_geo_conicConformal(φ0,φ1){function forward(λ,φ){F>0?φ<-halfπ+ε&&(φ=-halfπ+ε):φ>halfπ-ε&&(φ=halfπ-ε);var ρ=F/Math.pow(t(φ),n);return[ρ*Math.sin(n*λ),F-ρ*Math.cos(n*λ)]}var cosφ0=Math.cos(φ0),t=function(φ){return Math.tan(π/4+φ/2)},n=φ0===φ1?Math.sin(φ0):Math.log(cosφ0/Math.cos(φ1))/Math.log(t(φ1)/t(φ0)),F=cosφ0*Math.pow(t(φ0),n)/n;return n?(forward.invert=function(x,y){var ρ0_y=F-y,ρ=d3_sgn(n)*Math.sqrt(x*x+ρ0_y*ρ0_y);return[Math.atan2(x,ρ0_y)/n,2*Math.atan(Math.pow(F/ρ,1/n))-halfπ]},forward):d3_geo_mercator}function d3_geo_conicEquidistant(φ0,φ1){function forward(λ,φ){var ρ=G-φ;return[ρ*Math.sin(n*λ),G-ρ*Math.cos(n*λ)]}var cosφ0=Math.cos(φ0),n=φ0===φ1?Math.sin(φ0):(cosφ0-Math.cos(φ1))/(φ1-φ0),G=cosφ0/n+φ0;return abs(n)<ε?d3_geo_equirectangular:(forward.invert=function(x,y){var ρ0_y=G-y;return[Math.atan2(x,ρ0_y)/n,G-d3_sgn(n)*Math.sqrt(x*x+ρ0_y*ρ0_y)]},forward)}function d3_geo_mercator(λ,φ){return[λ,Math.log(Math.tan(π/4+φ/2))]}function d3_geo_mercatorProjection(project){var clipAuto,m=d3_geo_projection(project),scale=m.scale,translate=m.translate,clipExtent=m.clipExtent;return m.scale=function(){var v=scale.apply(m,arguments);return v===m?clipAuto?m.clipExtent(null):m:v},m.translate=function(){var v=translate.apply(m,arguments);return v===m?clipAuto?m.clipExtent(null):m:v},m.clipExtent=function(_){var v=clipExtent.apply(m,arguments);if(v===m){if(clipAuto=null==_){var k=π*scale(),t=translate();clipExtent([[t[0]-k,t[1]-k],[t[0]+k,t[1]+k]])}}else clipAuto&&(v=null);return v},m.clipExtent(null)}function d3_geo_transverseMercator(λ,φ){return[Math.log(Math.tan(π/4+φ/2)),-λ]}function d3_geom_pointX(d){return d[0]}function d3_geom_pointY(d){return d[1]}function d3_geom_hullUpper(points){for(var n=points.length,hull=[0,1],hs=2,i=2;i<n;i++){for(;hs>1&&d3_cross2d(points[hull[hs-2]],points[hull[hs-1]],points[i])<=0;)--hs;hull[hs++]=i}return hull.slice(0,hs)}function d3_geom_hullOrder(a,b){return a[0]-b[0]||a[1]-b[1]}function d3_geom_polygonInside(p,a,b){return(b[0]-a[0])*(p[1]-a[1])<(b[1]-a[1])*(p[0]-a[0])}function d3_geom_polygonIntersect(c,d,a,b){var x1=c[0],x3=a[0],x21=d[0]-x1,x43=b[0]-x3,y1=c[1],y3=a[1],y21=d[1]-y1,y43=b[1]-y3,ua=(x43*(y1-y3)-y43*(x1-x3))/(y43*x21-x43*y21);return[x1+ua*x21,y1+ua*y21]}function d3_geom_polygonClosed(coordinates){var a=coordinates[0],b=coordinates[coordinates.length-1];return!(a[0]-b[0]||a[1]-b[1])}function d3_geom_voronoiBeach(){d3_geom_voronoiRedBlackNode(this),this.edge=this.site=this.circle=null}function d3_geom_voronoiCreateBeach(site){var beach=d3_geom_voronoiBeachPool.pop()||new d3_geom_voronoiBeach;return beach.site=site,beach}function d3_geom_voronoiDetachBeach(beach){d3_geom_voronoiDetachCircle(beach),d3_geom_voronoiBeaches.remove(beach),d3_geom_voronoiBeachPool.push(beach),d3_geom_voronoiRedBlackNode(beach)}function d3_geom_voronoiRemoveBeach(beach){var circle=beach.circle,x=circle.x,y=circle.cy,vertex={x:x,y:y},previous=beach.P,next=beach.N,disappearing=[beach];d3_geom_voronoiDetachBeach(beach);for(var lArc=previous;lArc.circle&&abs(x-lArc.circle.x)<ε&&abs(y-lArc.circle.cy)<ε;)previous=lArc.P,disappearing.unshift(lArc),d3_geom_voronoiDetachBeach(lArc),lArc=previous;disappearing.unshift(lArc),d3_geom_voronoiDetachCircle(lArc);for(var rArc=next;rArc.circle&&abs(x-rArc.circle.x)<ε&&abs(y-rArc.circle.cy)<ε;)next=rArc.N,disappearing.push(rArc),d3_geom_voronoiDetachBeach(rArc),rArc=next;disappearing.push(rArc),d3_geom_voronoiDetachCircle(rArc);var iArc,nArcs=disappearing.length;for(iArc=1;iArc<nArcs;++iArc)rArc=disappearing[iArc],lArc=disappearing[iArc-1],d3_geom_voronoiSetEdgeEnd(rArc.edge,lArc.site,rArc.site,vertex);lArc=disappearing[0],rArc=disappearing[nArcs-1],rArc.edge=d3_geom_voronoiCreateEdge(lArc.site,rArc.site,null,vertex),d3_geom_voronoiAttachCircle(lArc),d3_geom_voronoiAttachCircle(rArc)}function d3_geom_voronoiAddBeach(site){for(var lArc,rArc,dxl,dxr,x=site.x,directrix=site.y,node=d3_geom_voronoiBeaches._;node;)if((dxl=d3_geom_voronoiLeftBreakPoint(node,directrix)-x)>ε)node=node.L;else{if(!((dxr=x-d3_geom_voronoiRightBreakPoint(node,directrix))>ε)){dxl>-ε?(lArc=node.P,rArc=node):dxr>-ε?(lArc=node,rArc=node.N):lArc=rArc=node;break}if(!node.R){lArc=node;break}node=node.R}var newArc=d3_geom_voronoiCreateBeach(site);if(d3_geom_voronoiBeaches.insert(lArc,newArc),lArc||rArc){if(lArc===rArc)return d3_geom_voronoiDetachCircle(lArc),rArc=d3_geom_voronoiCreateBeach(lArc.site),d3_geom_voronoiBeaches.insert(newArc,rArc),newArc.edge=rArc.edge=d3_geom_voronoiCreateEdge(lArc.site,newArc.site),d3_geom_voronoiAttachCircle(lArc),void d3_geom_voronoiAttachCircle(rArc);if(!rArc)return void(newArc.edge=d3_geom_voronoiCreateEdge(lArc.site,newArc.site));d3_geom_voronoiDetachCircle(lArc),d3_geom_voronoiDetachCircle(rArc);var lSite=lArc.site,ax=lSite.x,ay=lSite.y,bx=site.x-ax,by=site.y-ay,rSite=rArc.site,cx=rSite.x-ax,cy=rSite.y-ay,d=2*(bx*cy-by*cx),hb=bx*bx+by*by,hc=cx*cx+cy*cy,vertex={x:(cy*hb-by*hc)/d+ax,y:(bx*hc-cx*hb)/d+ay};d3_geom_voronoiSetEdgeEnd(rArc.edge,lSite,rSite,vertex),newArc.edge=d3_geom_voronoiCreateEdge(lSite,site,null,vertex),rArc.edge=d3_geom_voronoiCreateEdge(site,rSite,null,vertex),d3_geom_voronoiAttachCircle(lArc),d3_geom_voronoiAttachCircle(rArc)}}function d3_geom_voronoiLeftBreakPoint(arc,directrix){var site=arc.site,rfocx=site.x,rfocy=site.y,pby2=rfocy-directrix;if(!pby2)return rfocx;var lArc=arc.P;if(!lArc)return-1/0;site=lArc.site;var lfocx=site.x,lfocy=site.y,plby2=lfocy-directrix;if(!plby2)return lfocx;var hl=lfocx-rfocx,aby2=1/pby2-1/plby2,b=hl/plby2;return aby2?(-b+Math.sqrt(b*b-2*aby2*(hl*hl/(-2*plby2)-lfocy+plby2/2+rfocy-pby2/2)))/aby2+rfocx:(rfocx+lfocx)/2}function d3_geom_voronoiRightBreakPoint(arc,directrix){var rArc=arc.N;if(rArc)return d3_geom_voronoiLeftBreakPoint(rArc,directrix);var site=arc.site;return site.y===directrix?site.x:1/0}function d3_geom_voronoiCell(site){this.site=site,this.edges=[]}function d3_geom_voronoiCloseCells(extent){for(var x2,y2,x3,y3,cell,iHalfEdge,halfEdges,nHalfEdges,start,end,x0=extent[0][0],x1=extent[1][0],y0=extent[0][1],y1=extent[1][1],cells=d3_geom_voronoiCells,iCell=cells.length;iCell--;)if((cell=cells[iCell])&&cell.prepare())for(halfEdges=cell.edges,nHalfEdges=halfEdges.length,iHalfEdge=0;iHalfEdge<nHalfEdges;)end=halfEdges[iHalfEdge].end(),x3=end.x,y3=end.y,start=halfEdges[++iHalfEdge%nHalfEdges].start(),x2=start.x,y2=start.y,(abs(x3-x2)>ε||abs(y3-y2)>ε)&&(halfEdges.splice(iHalfEdge,0,new d3_geom_voronoiHalfEdge(d3_geom_voronoiCreateBorderEdge(cell.site,end,abs(x3-x0)<ε&&y1-y3>ε?{x:x0,y:abs(x2-x0)<ε?y2:y1}:abs(y3-y1)<ε&&x1-x3>ε?{x:abs(y2-y1)<ε?x2:x1,y:y1}:abs(x3-x1)<ε&&y3-y0>ε?{x:x1,y:abs(x2-x1)<ε?y2:y0}:abs(y3-y0)<ε&&x3-x0>ε?{x:abs(y2-y0)<ε?x2:x0,y:y0}:null),cell.site,null)),++nHalfEdges)}function d3_geom_voronoiHalfEdgeOrder(a,b){return b.angle-a.angle}function d3_geom_voronoiCircle(){d3_geom_voronoiRedBlackNode(this),this.x=this.y=this.arc=this.site=this.cy=null}function d3_geom_voronoiAttachCircle(arc){var lArc=arc.P,rArc=arc.N;if(lArc&&rArc){var lSite=lArc.site,cSite=arc.site,rSite=rArc.site;if(lSite!==rSite){var bx=cSite.x,by=cSite.y,ax=lSite.x-bx,ay=lSite.y-by,cx=rSite.x-bx,cy=rSite.y-by,d=2*(ax*cy-ay*cx);if(!(d>=-ε2)){var ha=ax*ax+ay*ay,hc=cx*cx+cy*cy,x=(cy*ha-ay*hc)/d,y=(ax*hc-cx*ha)/d,cy=y+by,circle=d3_geom_voronoiCirclePool.pop()||new d3_geom_voronoiCircle;circle.arc=arc,circle.site=cSite,circle.x=x+bx,circle.y=cy+Math.sqrt(x*x+y*y),circle.cy=cy,arc.circle=circle;for(var before=null,node=d3_geom_voronoiCircles._;node;)if(circle.y<node.y||circle.y===node.y&&circle.x<=node.x){if(!node.L){before=node.P;break}node=node.L}else{if(!node.R){before=node;break}node=node.R}d3_geom_voronoiCircles.insert(before,circle),before||(d3_geom_voronoiFirstCircle=circle)}}}}function d3_geom_voronoiDetachCircle(arc){var circle=arc.circle;circle&&(circle.P||(d3_geom_voronoiFirstCircle=circle.N),d3_geom_voronoiCircles.remove(circle),d3_geom_voronoiCirclePool.push(circle),d3_geom_voronoiRedBlackNode(circle),arc.circle=null)}function d3_geom_voronoiClipEdges(extent){for(var e,edges=d3_geom_voronoiEdges,clip=d3_geom_clipLine(extent[0][0],extent[0][1],extent[1][0],extent[1][1]),i=edges.length;i--;)e=edges[i],(!d3_geom_voronoiConnectEdge(e,extent)||!clip(e)||abs(e.a.x-e.b.x)<ε&&abs(e.a.y-e.b.y)<ε)&&(e.a=e.b=null,edges.splice(i,1))}function d3_geom_voronoiConnectEdge(edge,extent){var vb=edge.b;if(vb)return!0;var fm,fb,va=edge.a,x0=extent[0][0],x1=extent[1][0],y0=extent[0][1],y1=extent[1][1],lSite=edge.l,rSite=edge.r,lx=lSite.x,ly=lSite.y,rx=rSite.x,ry=rSite.y,fx=(lx+rx)/2,fy=(ly+ry)/2;if(ry===ly){if(fx<x0||fx>=x1)return;if(lx>rx){if(va){if(va.y>=y1)return}else va={x:fx,y:y0};vb={x:fx,y:y1}}else{if(va){if(va.y<y0)return}else va={x:fx,y:y1};vb={x:fx,y:y0}}}else if(fm=(lx-rx)/(ry-ly),fb=fy-fm*fx,fm<-1||fm>1)if(lx>rx){if(va){if(va.y>=y1)return}else va={x:(y0-fb)/fm,y:y0};vb={x:(y1-fb)/fm,y:y1}}else{if(va){if(va.y<y0)return}else va={x:(y1-fb)/fm,y:y1};vb={x:(y0-fb)/fm,y:y0}}else if(ly<ry){if(va){if(va.x>=x1)return}else va={x:x0,y:fm*x0+fb};vb={x:x1,y:fm*x1+fb}}else{if(va){if(va.x<x0)return}else va={x:x1,y:fm*x1+fb};vb={x:x0,y:fm*x0+fb}}return edge.a=va,edge.b=vb,!0}function d3_geom_voronoiEdge(lSite,rSite){this.l=lSite,this.r=rSite,this.a=this.b=null}function d3_geom_voronoiCreateEdge(lSite,rSite,va,vb){var edge=new d3_geom_voronoiEdge(lSite,rSite);return d3_geom_voronoiEdges.push(edge),va&&d3_geom_voronoiSetEdgeEnd(edge,lSite,rSite,va),vb&&d3_geom_voronoiSetEdgeEnd(edge,rSite,lSite,vb),d3_geom_voronoiCells[lSite.i].edges.push(new d3_geom_voronoiHalfEdge(edge,lSite,rSite)),d3_geom_voronoiCells[rSite.i].edges.push(new d3_geom_voronoiHalfEdge(edge,rSite,lSite)),edge}function d3_geom_voronoiCreateBorderEdge(lSite,va,vb){var edge=new d3_geom_voronoiEdge(lSite,null);return edge.a=va,edge.b=vb,d3_geom_voronoiEdges.push(edge),edge}function d3_geom_voronoiSetEdgeEnd(edge,lSite,rSite,vertex){edge.a||edge.b?edge.l===rSite?edge.b=vertex:edge.a=vertex:(edge.a=vertex,edge.l=lSite,edge.r=rSite)}function d3_geom_voronoiHalfEdge(edge,lSite,rSite){var va=edge.a,vb=edge.b;this.edge=edge,this.site=lSite,this.angle=rSite?Math.atan2(rSite.y-lSite.y,rSite.x-lSite.x):edge.l===lSite?Math.atan2(vb.x-va.x,va.y-vb.y):Math.atan2(va.x-vb.x,vb.y-va.y)}function d3_geom_voronoiRedBlackTree(){this._=null}function d3_geom_voronoiRedBlackNode(node){node.U=node.C=node.L=node.R=node.P=node.N=null}function d3_geom_voronoiRedBlackRotateLeft(tree,node){var p=node,q=node.R,parent=p.U;parent?parent.L===p?parent.L=q:parent.R=q:tree._=q,q.U=parent,p.U=q,p.R=q.L,p.R&&(p.R.U=p),q.L=p}function d3_geom_voronoiRedBlackRotateRight(tree,node){var p=node,q=node.L,parent=p.U;parent?parent.L===p?parent.L=q:parent.R=q:tree._=q,q.U=parent,p.U=q,p.L=q.R,p.L&&(p.L.U=p),q.R=p}function d3_geom_voronoiRedBlackFirst(node){for(;node.L;)node=node.L;return node}function d3_geom_voronoi(sites,bbox){var x0,y0,circle,site=sites.sort(d3_geom_voronoiVertexOrder).pop();for(d3_geom_voronoiEdges=[],d3_geom_voronoiCells=new Array(sites.length),d3_geom_voronoiBeaches=new d3_geom_voronoiRedBlackTree,d3_geom_voronoiCircles=new d3_geom_voronoiRedBlackTree;;)if(circle=d3_geom_voronoiFirstCircle,site&&(!circle||site.y<circle.y||site.y===circle.y&&site.x<circle.x))site.x===x0&&site.y===y0||(d3_geom_voronoiCells[site.i]=new d3_geom_voronoiCell(site),d3_geom_voronoiAddBeach(site),x0=site.x,y0=site.y),site=sites.pop();else{if(!circle)break;d3_geom_voronoiRemoveBeach(circle.arc)}bbox&&(d3_geom_voronoiClipEdges(bbox),d3_geom_voronoiCloseCells(bbox));var diagram={cells:d3_geom_voronoiCells,edges:d3_geom_voronoiEdges};return d3_geom_voronoiBeaches=d3_geom_voronoiCircles=d3_geom_voronoiEdges=d3_geom_voronoiCells=null,diagram}function d3_geom_voronoiVertexOrder(a,b){return b.y-a.y||b.x-a.x}function d3_geom_voronoiTriangleArea(a,b,c){return(a.x-c.x)*(b.y-a.y)-(a.x-b.x)*(c.y-a.y)}function d3_geom_quadtreeCompatX(d){return d.x}function d3_geom_quadtreeCompatY(d){return d.y}function d3_geom_quadtreeNode(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function d3_geom_quadtreeVisit(f,node,x1,y1,x2,y2){if(!f(node,x1,y1,x2,y2)){var sx=.5*(x1+x2),sy=.5*(y1+y2),children=node.nodes;children[0]&&d3_geom_quadtreeVisit(f,children[0],x1,y1,sx,sy),children[1]&&d3_geom_quadtreeVisit(f,children[1],sx,y1,x2,sy),children[2]&&d3_geom_quadtreeVisit(f,children[2],x1,sy,sx,y2),children[3]&&d3_geom_quadtreeVisit(f,children[3],sx,sy,x2,y2)}}function d3_geom_quadtreeFind(root,x,y,x0,y0,x3,y3){var closestPoint,minDistance2=1/0;return function find(node,x1,y1,x2,y2){if(!(x1>x3||y1>y3||x2<x0||y2<y0)){if(point=node.point){var point,dx=x-node.x,dy=y-node.y,distance2=dx*dx+dy*dy;if(distance2<minDistance2){var distance=Math.sqrt(minDistance2=distance2);x0=x-distance,y0=y-distance,x3=x+distance,y3=y+distance,closestPoint=point}}for(var children=node.nodes,xm=.5*(x1+x2),ym=.5*(y1+y2),right=x>=xm,below=y>=ym,i=below<<1|right,j=i+4;i<j;++i)if(node=children[3&i])switch(3&i){case 0:find(node,x1,y1,xm,ym);break;case 1:find(node,xm,y1,x2,ym);break;case 2:find(node,x1,ym,xm,y2);break;case 3:find(node,xm,ym,x2,y2)}}}(root,x0,y0,x3,y3),closestPoint}function d3_interpolateRgb(a,b){
a=d3.rgb(a),b=d3.rgb(b);var ar=a.r,ag=a.g,ab=a.b,br=b.r-ar,bg=b.g-ag,bb=b.b-ab;return function(t){return"#"+d3_rgb_hex(Math.round(ar+br*t))+d3_rgb_hex(Math.round(ag+bg*t))+d3_rgb_hex(Math.round(ab+bb*t))}}function d3_interpolateObject(a,b){var k,i={},c={};for(k in a)k in b?i[k]=d3_interpolate(a[k],b[k]):c[k]=a[k];for(k in b)k in a||(c[k]=b[k]);return function(t){for(k in i)c[k]=i[k](t);return c}}function d3_interpolateNumber(a,b){return a=+a,b=+b,function(t){return a*(1-t)+b*t}}function d3_interpolateString(a,b){var am,bm,bs,bi=d3_interpolate_numberA.lastIndex=d3_interpolate_numberB.lastIndex=0,i=-1,s=[],q=[];for(a+="",b+="";(am=d3_interpolate_numberA.exec(a))&&(bm=d3_interpolate_numberB.exec(b));)(bs=bm.index)>bi&&(bs=b.slice(bi,bs),s[i]?s[i]+=bs:s[++i]=bs),(am=am[0])===(bm=bm[0])?s[i]?s[i]+=bm:s[++i]=bm:(s[++i]=null,q.push({i:i,x:d3_interpolateNumber(am,bm)})),bi=d3_interpolate_numberB.lastIndex;return bi<b.length&&(bs=b.slice(bi),s[i]?s[i]+=bs:s[++i]=bs),s.length<2?q[0]?(b=q[0].x,function(t){return b(t)+""}):function(){return b}:(b=q.length,function(t){for(var o,i=0;i<b;++i)s[(o=q[i]).i]=o.x(t);return s.join("")})}function d3_interpolate(a,b){for(var f,i=d3.interpolators.length;--i>=0&&!(f=d3.interpolators[i](a,b)););return f}function d3_interpolateArray(a,b){var i,x=[],c=[],na=a.length,nb=b.length,n0=Math.min(a.length,b.length);for(i=0;i<n0;++i)x.push(d3_interpolate(a[i],b[i]));for(;i<na;++i)c[i]=a[i];for(;i<nb;++i)c[i]=b[i];return function(t){for(i=0;i<n0;++i)c[i]=x[i](t);return c}}function d3_ease_clamp(f){return function(t){return t<=0?0:t>=1?1:f(t)}}function d3_ease_reverse(f){return function(t){return 1-f(1-t)}}function d3_ease_reflect(f){return function(t){return.5*(t<.5?f(2*t):2-f(2-2*t))}}function d3_ease_quad(t){return t*t}function d3_ease_cubic(t){return t*t*t}function d3_ease_cubicInOut(t){if(t<=0)return 0;if(t>=1)return 1;var t2=t*t,t3=t2*t;return 4*(t<.5?t3:3*(t-t2)+t3-.75)}function d3_ease_poly(e){return function(t){return Math.pow(t,e)}}function d3_ease_sin(t){return 1-Math.cos(t*halfπ)}function d3_ease_exp(t){return Math.pow(2,10*(t-1))}function d3_ease_circle(t){return 1-Math.sqrt(1-t*t)}function d3_ease_elastic(a,p){var s;return arguments.length<2&&(p=.45),arguments.length?s=p/τ*Math.asin(1/a):(a=1,s=p/4),function(t){return 1+a*Math.pow(2,-10*t)*Math.sin((t-s)*τ/p)}}function d3_ease_back(s){return s||(s=1.70158),function(t){return t*t*((s+1)*t-s)}}function d3_ease_bounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function d3_interpolateHcl(a,b){a=d3.hcl(a),b=d3.hcl(b);var ah=a.h,ac=a.c,al=a.l,bh=b.h-ah,bc=b.c-ac,bl=b.l-al;return isNaN(bc)&&(bc=0,ac=isNaN(ac)?b.c:ac),isNaN(bh)?(bh=0,ah=isNaN(ah)?b.h:ah):bh>180?bh-=360:bh<-180&&(bh+=360),function(t){return d3_hcl_lab(ah+bh*t,ac+bc*t,al+bl*t)+""}}function d3_interpolateHsl(a,b){a=d3.hsl(a),b=d3.hsl(b);var ah=a.h,as=a.s,al=a.l,bh=b.h-ah,bs=b.s-as,bl=b.l-al;return isNaN(bs)&&(bs=0,as=isNaN(as)?b.s:as),isNaN(bh)?(bh=0,ah=isNaN(ah)?b.h:ah):bh>180?bh-=360:bh<-180&&(bh+=360),function(t){return d3_hsl_rgb(ah+bh*t,as+bs*t,al+bl*t)+""}}function d3_interpolateLab(a,b){a=d3.lab(a),b=d3.lab(b);var al=a.l,aa=a.a,ab=a.b,bl=b.l-al,ba=b.a-aa,bb=b.b-ab;return function(t){return d3_lab_rgb(al+bl*t,aa+ba*t,ab+bb*t)+""}}function d3_interpolateRound(a,b){return b-=a,function(t){return Math.round(a+b*t)}}function d3_transform(m){var r0=[m.a,m.b],r1=[m.c,m.d],kx=d3_transformNormalize(r0),kz=d3_transformDot(r0,r1),ky=d3_transformNormalize(d3_transformCombine(r1,r0,-kz))||0;r0[0]*r1[1]<r1[0]*r0[1]&&(r0[0]*=-1,r0[1]*=-1,kx*=-1,kz*=-1),this.rotate=(kx?Math.atan2(r0[1],r0[0]):Math.atan2(-r1[0],r1[1]))*d3_degrees,this.translate=[m.e,m.f],this.scale=[kx,ky],this.skew=ky?Math.atan2(kz,ky)*d3_degrees:0}function d3_transformDot(a,b){return a[0]*b[0]+a[1]*b[1]}function d3_transformNormalize(a){var k=Math.sqrt(d3_transformDot(a,a));return k&&(a[0]/=k,a[1]/=k),k}function d3_transformCombine(a,b,k){return a[0]+=k*b[0],a[1]+=k*b[1],a}function d3_interpolateTransformPop(s){return s.length?s.pop()+",":""}function d3_interpolateTranslate(ta,tb,s,q){if(ta[0]!==tb[0]||ta[1]!==tb[1]){var i=s.push("translate(",null,",",null,")");q.push({i:i-4,x:d3_interpolateNumber(ta[0],tb[0])},{i:i-2,x:d3_interpolateNumber(ta[1],tb[1])})}else(tb[0]||tb[1])&&s.push("translate("+tb+")")}function d3_interpolateRotate(ra,rb,s,q){ra!==rb?(ra-rb>180?rb+=360:rb-ra>180&&(ra+=360),q.push({i:s.push(d3_interpolateTransformPop(s)+"rotate(",null,")")-2,x:d3_interpolateNumber(ra,rb)})):rb&&s.push(d3_interpolateTransformPop(s)+"rotate("+rb+")")}function d3_interpolateSkew(wa,wb,s,q){wa!==wb?q.push({i:s.push(d3_interpolateTransformPop(s)+"skewX(",null,")")-2,x:d3_interpolateNumber(wa,wb)}):wb&&s.push(d3_interpolateTransformPop(s)+"skewX("+wb+")")}function d3_interpolateScale(ka,kb,s,q){if(ka[0]!==kb[0]||ka[1]!==kb[1]){var i=s.push(d3_interpolateTransformPop(s)+"scale(",null,",",null,")");q.push({i:i-4,x:d3_interpolateNumber(ka[0],kb[0])},{i:i-2,x:d3_interpolateNumber(ka[1],kb[1])})}else 1===kb[0]&&1===kb[1]||s.push(d3_interpolateTransformPop(s)+"scale("+kb+")")}function d3_interpolateTransform(a,b){var s=[],q=[];return a=d3.transform(a),b=d3.transform(b),d3_interpolateTranslate(a.translate,b.translate,s,q),d3_interpolateRotate(a.rotate,b.rotate,s,q),d3_interpolateSkew(a.skew,b.skew,s,q),d3_interpolateScale(a.scale,b.scale,s,q),a=b=null,function(t){for(var o,i=-1,n=q.length;++i<n;)s[(o=q[i]).i]=o.x(t);return s.join("")}}function d3_uninterpolateNumber(a,b){return b=(b-=a=+a)||1/b,function(x){return(x-a)/b}}function d3_uninterpolateClamp(a,b){return b=(b-=a=+a)||1/b,function(x){return Math.max(0,Math.min(1,(x-a)/b))}}function d3_layout_bundlePath(link){for(var start=link.source,end=link.target,lca=d3_layout_bundleLeastCommonAncestor(start,end),points=[start];start!==lca;)start=start.parent,points.push(start);for(var k=points.length;end!==lca;)points.splice(k,0,end),end=end.parent;return points}function d3_layout_bundleAncestors(node){for(var ancestors=[],parent=node.parent;null!=parent;)ancestors.push(node),node=parent,parent=parent.parent;return ancestors.push(node),ancestors}function d3_layout_bundleLeastCommonAncestor(a,b){if(a===b)return a;for(var aNodes=d3_layout_bundleAncestors(a),bNodes=d3_layout_bundleAncestors(b),aNode=aNodes.pop(),bNode=bNodes.pop(),sharedNode=null;aNode===bNode;)sharedNode=aNode,aNode=aNodes.pop(),bNode=bNodes.pop();return sharedNode}function d3_layout_forceDragstart(d){d.fixed|=2}function d3_layout_forceDragend(d){d.fixed&=-7}function d3_layout_forceMouseover(d){d.fixed|=4,d.px=d.x,d.py=d.y}function d3_layout_forceMouseout(d){d.fixed&=-5}function d3_layout_forceAccumulate(quad,alpha,charges){var cx=0,cy=0;if(quad.charge=0,!quad.leaf)for(var c,nodes=quad.nodes,n=nodes.length,i=-1;++i<n;)null!=(c=nodes[i])&&(d3_layout_forceAccumulate(c,alpha,charges),quad.charge+=c.charge,cx+=c.charge*c.cx,cy+=c.charge*c.cy);if(quad.point){quad.leaf||(quad.point.x+=Math.random()-.5,quad.point.y+=Math.random()-.5);var k=alpha*charges[quad.point.index];quad.charge+=quad.pointCharge=k,cx+=k*quad.point.x,cy+=k*quad.point.y}quad.cx=cx/quad.charge,quad.cy=cy/quad.charge}function d3_layout_hierarchyRebind(object,hierarchy){return d3.rebind(object,hierarchy,"sort","children","value"),object.nodes=object,object.links=d3_layout_hierarchyLinks,object}function d3_layout_hierarchyVisitBefore(node,callback){for(var nodes=[node];null!=(node=nodes.pop());)if(callback(node),(children=node.children)&&(n=children.length))for(var n,children;--n>=0;)nodes.push(children[n])}function d3_layout_hierarchyVisitAfter(node,callback){for(var nodes=[node],nodes2=[];null!=(node=nodes.pop());)if(nodes2.push(node),(children=node.children)&&(n=children.length))for(var n,children,i=-1;++i<n;)nodes.push(children[i]);for(;null!=(node=nodes2.pop());)callback(node)}function d3_layout_hierarchyChildren(d){return d.children}function d3_layout_hierarchyValue(d){return d.value}function d3_layout_hierarchySort(a,b){return b.value-a.value}function d3_layout_hierarchyLinks(nodes){return d3.merge(nodes.map(function(parent){return(parent.children||[]).map(function(child){return{source:parent,target:child}})}))}function d3_layout_stackX(d){return d.x}function d3_layout_stackY(d){return d.y}function d3_layout_stackOut(d,y0,y){d.y0=y0,d.y=y}function d3_layout_stackOrderDefault(data){return d3.range(data.length)}function d3_layout_stackOffsetZero(data){for(var j=-1,m=data[0].length,y0=[];++j<m;)y0[j]=0;return y0}function d3_layout_stackMaxIndex(array){for(var k,i=1,j=0,v=array[0][1],n=array.length;i<n;++i)(k=array[i][1])>v&&(j=i,v=k);return j}function d3_layout_stackReduceSum(d){return d.reduce(d3_layout_stackSum,0)}function d3_layout_stackSum(p,d){return p+d[1]}function d3_layout_histogramBinSturges(range,values){return d3_layout_histogramBinFixed(range,Math.ceil(Math.log(values.length)/Math.LN2+1))}function d3_layout_histogramBinFixed(range,n){for(var x=-1,b=+range[0],m=(range[1]-b)/n,f=[];++x<=n;)f[x]=m*x+b;return f}function d3_layout_histogramRange(values){return[d3.min(values),d3.max(values)]}function d3_layout_packSort(a,b){return a.value-b.value}function d3_layout_packInsert(a,b){var c=a._pack_next;a._pack_next=b,b._pack_prev=a,b._pack_next=c,c._pack_prev=b}function d3_layout_packSplice(a,b){a._pack_next=b,b._pack_prev=a}function d3_layout_packIntersects(a,b){var dx=b.x-a.x,dy=b.y-a.y,dr=a.r+b.r;return.999*dr*dr>dx*dx+dy*dy}function d3_layout_packSiblings(node){function bound(node){xMin=Math.min(node.x-node.r,xMin),xMax=Math.max(node.x+node.r,xMax),yMin=Math.min(node.y-node.r,yMin),yMax=Math.max(node.y+node.r,yMax)}if((nodes=node.children)&&(n=nodes.length)){var nodes,a,b,c,i,j,k,n,xMin=1/0,xMax=-1/0,yMin=1/0,yMax=-1/0;if(nodes.forEach(d3_layout_packLink),a=nodes[0],a.x=-a.r,a.y=0,bound(a),n>1&&(b=nodes[1],b.x=b.r,b.y=0,bound(b),n>2))for(c=nodes[2],d3_layout_packPlace(a,b,c),bound(c),d3_layout_packInsert(a,c),a._pack_prev=c,d3_layout_packInsert(c,b),b=a._pack_next,i=3;i<n;i++){d3_layout_packPlace(a,b,c=nodes[i]);var isect=0,s1=1,s2=1;for(j=b._pack_next;j!==b;j=j._pack_next,s1++)if(d3_layout_packIntersects(j,c)){isect=1;break}if(1==isect)for(k=a._pack_prev;k!==j._pack_prev&&!d3_layout_packIntersects(k,c);k=k._pack_prev,s2++);isect?(s1<s2||s1==s2&&b.r<a.r?d3_layout_packSplice(a,b=j):d3_layout_packSplice(a=k,b),i--):(d3_layout_packInsert(a,c),b=c,bound(c))}var cx=(xMin+xMax)/2,cy=(yMin+yMax)/2,cr=0;for(i=0;i<n;i++)c=nodes[i],c.x-=cx,c.y-=cy,cr=Math.max(cr,c.r+Math.sqrt(c.x*c.x+c.y*c.y));node.r=cr,nodes.forEach(d3_layout_packUnlink)}}function d3_layout_packLink(node){node._pack_next=node._pack_prev=node}function d3_layout_packUnlink(node){delete node._pack_next,delete node._pack_prev}function d3_layout_packTransform(node,x,y,k){var children=node.children;if(node.x=x+=k*node.x,node.y=y+=k*node.y,node.r*=k,children)for(var i=-1,n=children.length;++i<n;)d3_layout_packTransform(children[i],x,y,k)}function d3_layout_packPlace(a,b,c){var db=a.r+c.r,dx=b.x-a.x,dy=b.y-a.y;if(db&&(dx||dy)){var da=b.r+c.r,dc=dx*dx+dy*dy;da*=da,db*=db;var x=.5+(db-da)/(2*dc),y=Math.sqrt(Math.max(0,2*da*(db+dc)-(db-=dc)*db-da*da))/(2*dc);c.x=a.x+x*dx+y*dy,c.y=a.y+x*dy-y*dx}else c.x=a.x+db,c.y=a.y}function d3_layout_treeSeparation(a,b){return a.parent==b.parent?1:2}function d3_layout_treeLeft(v){var children=v.children;return children.length?children[0]:v.t}function d3_layout_treeRight(v){var n,children=v.children;return(n=children.length)?children[n-1]:v.t}function d3_layout_treeMove(wm,wp,shift){var change=shift/(wp.i-wm.i);wp.c-=change,wp.s+=shift,wm.c+=change,wp.z+=shift,wp.m+=shift}function d3_layout_treeShift(v){for(var w,shift=0,change=0,children=v.children,i=children.length;--i>=0;)w=children[i],w.z+=shift,w.m+=shift,shift+=w.s+(change+=w.c)}function d3_layout_treeAncestor(vim,v,ancestor){return vim.a.parent===v.parent?vim.a:ancestor}function d3_layout_clusterY(children){return 1+d3.max(children,function(child){return child.y})}function d3_layout_clusterX(children){return children.reduce(function(x,child){return x+child.x},0)/children.length}function d3_layout_clusterLeft(node){var children=node.children;return children&&children.length?d3_layout_clusterLeft(children[0]):node}function d3_layout_clusterRight(node){var n,children=node.children;return children&&(n=children.length)?d3_layout_clusterRight(children[n-1]):node}function d3_layout_treemapPadNull(node){return{x:node.x,y:node.y,dx:node.dx,dy:node.dy}}function d3_layout_treemapPad(node,padding){var x=node.x+padding[3],y=node.y+padding[0],dx=node.dx-padding[1]-padding[3],dy=node.dy-padding[0]-padding[2];return dx<0&&(x+=dx/2,dx=0),dy<0&&(y+=dy/2,dy=0),{x:x,y:y,dx:dx,dy:dy}}function d3_scaleExtent(domain){var start=domain[0],stop=domain[domain.length-1];return start<stop?[start,stop]:[stop,start]}function d3_scaleRange(scale){return scale.rangeExtent?scale.rangeExtent():d3_scaleExtent(scale.range())}function d3_scale_bilinear(domain,range,uninterpolate,interpolate){var u=uninterpolate(domain[0],domain[1]),i=interpolate(range[0],range[1]);return function(x){return i(u(x))}}function d3_scale_nice(domain,nice){var dx,i0=0,i1=domain.length-1,x0=domain[i0],x1=domain[i1];return x1<x0&&(dx=i0,i0=i1,i1=dx,dx=x0,x0=x1,x1=dx),domain[i0]=nice.floor(x0),domain[i1]=nice.ceil(x1),domain}function d3_scale_niceStep(step){return step?{floor:function(x){return Math.floor(x/step)*step},ceil:function(x){return Math.ceil(x/step)*step}}:d3_scale_niceIdentity}function d3_scale_polylinear(domain,range,uninterpolate,interpolate){var u=[],i=[],j=0,k=Math.min(domain.length,range.length)-1;for(domain[k]<domain[0]&&(domain=domain.slice().reverse(),range=range.slice().reverse());++j<=k;)u.push(uninterpolate(domain[j-1],domain[j])),i.push(interpolate(range[j-1],range[j]));return function(x){var j=d3.bisect(domain,x,1,k)-1;return i[j](u[j](x))}}function d3_scale_linear(domain,range,interpolate,clamp){function rescale(){var linear=Math.min(domain.length,range.length)>2?d3_scale_polylinear:d3_scale_bilinear,uninterpolate=clamp?d3_uninterpolateClamp:d3_uninterpolateNumber;return output=linear(domain,range,uninterpolate,interpolate),input=linear(range,domain,uninterpolate,d3_interpolate),scale}function scale(x){return output(x)}var output,input;return scale.invert=function(y){return input(y)},scale.domain=function(x){return arguments.length?(domain=x.map(Number),rescale()):domain},scale.range=function(x){return arguments.length?(range=x,rescale()):range},scale.rangeRound=function(x){return scale.range(x).interpolate(d3_interpolateRound)},scale.clamp=function(x){return arguments.length?(clamp=x,rescale()):clamp},scale.interpolate=function(x){return arguments.length?(interpolate=x,rescale()):interpolate},scale.ticks=function(m){return d3_scale_linearTicks(domain,m)},scale.tickFormat=function(m,format){return d3_scale_linearTickFormat(domain,m,format)},scale.nice=function(m){return d3_scale_linearNice(domain,m),rescale()},scale.copy=function(){return d3_scale_linear(domain,range,interpolate,clamp)},rescale()}function d3_scale_linearRebind(scale,linear){return d3.rebind(scale,linear,"range","rangeRound","interpolate","clamp")}function d3_scale_linearNice(domain,m){return d3_scale_nice(domain,d3_scale_niceStep(d3_scale_linearTickRange(domain,m)[2])),d3_scale_nice(domain,d3_scale_niceStep(d3_scale_linearTickRange(domain,m)[2])),domain}function d3_scale_linearTickRange(domain,m){null==m&&(m=10);var extent=d3_scaleExtent(domain),span=extent[1]-extent[0],step=Math.pow(10,Math.floor(Math.log(span/m)/Math.LN10)),err=m/span*step;return err<=.15?step*=10:err<=.35?step*=5:err<=.75&&(step*=2),extent[0]=Math.ceil(extent[0]/step)*step,extent[1]=Math.floor(extent[1]/step)*step+.5*step,extent[2]=step,extent}function d3_scale_linearTicks(domain,m){return d3.range.apply(d3,d3_scale_linearTickRange(domain,m))}function d3_scale_linearTickFormat(domain,m,format){var range=d3_scale_linearTickRange(domain,m);if(format){var match=d3_format_re.exec(format);if(match.shift(),"s"===match[8]){var prefix=d3.formatPrefix(Math.max(abs(range[0]),abs(range[1])));return match[7]||(match[7]="."+d3_scale_linearPrecision(prefix.scale(range[2]))),match[8]="f",format=d3.format(match.join("")),function(d){return format(prefix.scale(d))+prefix.symbol}}match[7]||(match[7]="."+d3_scale_linearFormatPrecision(match[8],range)),format=match.join("")}else format=",."+d3_scale_linearPrecision(range[2])+"f";return d3.format(format)}function d3_scale_linearPrecision(value){return-Math.floor(Math.log(value)/Math.LN10+.01)}function d3_scale_linearFormatPrecision(type,range){var p=d3_scale_linearPrecision(range[2]);return type in d3_scale_linearFormatSignificant?Math.abs(p-d3_scale_linearPrecision(Math.max(abs(range[0]),abs(range[1]))))+ +("e"!==type):p-2*("%"===type)}function d3_scale_log(linear,base,positive,domain){function log(x){return(positive?Math.log(x<0?0:x):-Math.log(x>0?0:-x))/Math.log(base)}function pow(x){return positive?Math.pow(base,x):-Math.pow(base,-x)}function scale(x){return linear(log(x))}return scale.invert=function(x){return pow(linear.invert(x))},scale.domain=function(x){return arguments.length?(positive=x[0]>=0,linear.domain((domain=x.map(Number)).map(log)),scale):domain},scale.base=function(_){return arguments.length?(base=+_,linear.domain(domain.map(log)),scale):base},scale.nice=function(){var niced=d3_scale_nice(domain.map(log),positive?Math:d3_scale_logNiceNegative);return linear.domain(niced),domain=niced.map(pow),scale},scale.ticks=function(){var extent=d3_scaleExtent(domain),ticks=[],u=extent[0],v=extent[1],i=Math.floor(log(u)),j=Math.ceil(log(v)),n=base%1?2:base;if(isFinite(j-i)){if(positive){for(;i<j;i++)for(var k=1;k<n;k++)ticks.push(pow(i)*k);ticks.push(pow(i))}else for(ticks.push(pow(i));i++<j;)for(var k=n-1;k>0;k--)ticks.push(pow(i)*k);for(i=0;ticks[i]<u;i++);for(j=ticks.length;ticks[j-1]>v;j--);ticks=ticks.slice(i,j)}return ticks},scale.tickFormat=function(n,format){if(!arguments.length)return d3_scale_logFormat;arguments.length<2?format=d3_scale_logFormat:"function"!=typeof format&&(format=d3.format(format));var k=Math.max(1,base*n/scale.ticks().length);return function(d){var i=d/pow(Math.round(log(d)));return i*base<base-.5&&(i*=base),i<=k?format(d):""}},scale.copy=function(){return d3_scale_log(linear.copy(),base,positive,domain)},d3_scale_linearRebind(scale,linear)}function d3_scale_pow(linear,exponent,domain){function scale(x){return linear(powp(x))}var powp=d3_scale_powPow(exponent),powb=d3_scale_powPow(1/exponent);return scale.invert=function(x){return powb(linear.invert(x))},scale.domain=function(x){return arguments.length?(linear.domain((domain=x.map(Number)).map(powp)),scale):domain},scale.ticks=function(m){return d3_scale_linearTicks(domain,m)},scale.tickFormat=function(m,format){return d3_scale_linearTickFormat(domain,m,format)},scale.nice=function(m){return scale.domain(d3_scale_linearNice(domain,m))},scale.exponent=function(x){return arguments.length?(powp=d3_scale_powPow(exponent=x),powb=d3_scale_powPow(1/exponent),linear.domain(domain.map(powp)),scale):exponent},scale.copy=function(){return d3_scale_pow(linear.copy(),exponent,domain)},d3_scale_linearRebind(scale,linear)}function d3_scale_powPow(e){return function(x){return x<0?-Math.pow(-x,e):Math.pow(x,e)}}function d3_scale_ordinal(domain,ranger){function scale(x){return range[((index.get(x)||("range"===ranger.t?index.set(x,domain.push(x)):NaN))-1)%range.length]}function steps(start,step){return d3.range(domain.length).map(function(i){return start+step*i})}var index,range,rangeBand;return scale.domain=function(x){if(!arguments.length)return domain;domain=[],index=new d3_Map;for(var xi,i=-1,n=x.length;++i<n;)index.has(xi=x[i])||index.set(xi,domain.push(xi));return scale[ranger.t].apply(scale,ranger.a)},scale.range=function(x){return arguments.length?(range=x,rangeBand=0,ranger={t:"range",a:arguments},scale):range},scale.rangePoints=function(x,padding){arguments.length<2&&(padding=0);var start=x[0],stop=x[1],step=domain.length<2?(start=(start+stop)/2,0):(stop-start)/(domain.length-1+padding);return range=steps(start+step*padding/2,step),rangeBand=0,ranger={t:"rangePoints",a:arguments},scale},scale.rangeRoundPoints=function(x,padding){arguments.length<2&&(padding=0);var start=x[0],stop=x[1],step=domain.length<2?(start=stop=Math.round((start+stop)/2),0):(stop-start)/(domain.length-1+padding)|0;return range=steps(start+Math.round(step*padding/2+(stop-start-(domain.length-1+padding)*step)/2),step),rangeBand=0,ranger={t:"rangeRoundPoints",a:arguments},scale},scale.rangeBands=function(x,padding,outerPadding){arguments.length<2&&(padding=0),arguments.length<3&&(outerPadding=padding);var reverse=x[1]<x[0],start=x[reverse-0],stop=x[1-reverse],step=(stop-start)/(domain.length-padding+2*outerPadding);return range=steps(start+step*outerPadding,step),reverse&&range.reverse(),rangeBand=step*(1-padding),ranger={t:"rangeBands",a:arguments},scale},scale.rangeRoundBands=function(x,padding,outerPadding){arguments.length<2&&(padding=0),arguments.length<3&&(outerPadding=padding);var reverse=x[1]<x[0],start=x[reverse-0],stop=x[1-reverse],step=Math.floor((stop-start)/(domain.length-padding+2*outerPadding));return range=steps(start+Math.round((stop-start-(domain.length-padding)*step)/2),step),reverse&&range.reverse(),rangeBand=Math.round(step*(1-padding)),ranger={t:"rangeRoundBands",a:arguments},scale},scale.rangeBand=function(){return rangeBand},scale.rangeExtent=function(){return d3_scaleExtent(ranger.a[0])},scale.copy=function(){return d3_scale_ordinal(domain,ranger)},scale.domain(domain)}function d3_scale_quantile(domain,range){function rescale(){var k=0,q=range.length;for(thresholds=[];++k<q;)thresholds[k-1]=d3.quantile(domain,k/q);return scale}function scale(x){if(!isNaN(x=+x))return range[d3.bisect(thresholds,x)]}var thresholds;return scale.domain=function(x){return arguments.length?(domain=x.map(d3_number).filter(d3_numeric).sort(d3_ascending),rescale()):domain},scale.range=function(x){return arguments.length?(range=x,rescale()):range},scale.quantiles=function(){return thresholds},scale.invertExtent=function(y){return y=range.indexOf(y),y<0?[NaN,NaN]:[y>0?thresholds[y-1]:domain[0],y<thresholds.length?thresholds[y]:domain[domain.length-1]]},scale.copy=function(){return d3_scale_quantile(domain,range)},rescale()}function d3_scale_quantize(x0,x1,range){function scale(x){return range[Math.max(0,Math.min(i,Math.floor(kx*(x-x0))))]}function rescale(){return kx=range.length/(x1-x0),i=range.length-1,scale}var kx,i;return scale.domain=function(x){return arguments.length?(x0=+x[0],x1=+x[x.length-1],rescale()):[x0,x1]},scale.range=function(x){return arguments.length?(range=x,rescale()):range},scale.invertExtent=function(y){return y=range.indexOf(y),y=y<0?NaN:y/kx+x0,[y,y+1/kx]},scale.copy=function(){return d3_scale_quantize(x0,x1,range)},rescale()}function d3_scale_threshold(domain,range){function scale(x){if(x<=x)return range[d3.bisect(domain,x)]}return scale.domain=function(_){return arguments.length?(domain=_,scale):domain},scale.range=function(_){return arguments.length?(range=_,scale):range},scale.invertExtent=function(y){return y=range.indexOf(y),[domain[y-1],domain[y]]},scale.copy=function(){return d3_scale_threshold(domain,range)},scale}function d3_scale_identity(domain){function identity(x){return+x}return identity.invert=identity,identity.domain=identity.range=function(x){return arguments.length?(domain=x.map(identity),identity):domain},identity.ticks=function(m){return d3_scale_linearTicks(domain,m)},identity.tickFormat=function(m,format){return d3_scale_linearTickFormat(domain,m,format)},identity.copy=function(){return d3_scale_identity(domain)},identity}function d3_zero(){return 0}function d3_svg_arcInnerRadius(d){return d.innerRadius}function d3_svg_arcOuterRadius(d){return d.outerRadius}function d3_svg_arcStartAngle(d){return d.startAngle}function d3_svg_arcEndAngle(d){return d.endAngle}function d3_svg_arcPadAngle(d){return d&&d.padAngle}function d3_svg_arcSweep(x0,y0,x1,y1){return(x0-x1)*y0-(y0-y1)*x0>0?0:1}function d3_svg_arcCornerTangents(p0,p1,r1,rc,cw){var x01=p0[0]-p1[0],y01=p0[1]-p1[1],lo=(cw?rc:-rc)/Math.sqrt(x01*x01+y01*y01),ox=lo*y01,oy=-lo*x01,x1=p0[0]+ox,y1=p0[1]+oy,x2=p1[0]+ox,y2=p1[1]+oy,x3=(x1+x2)/2,y3=(y1+y2)/2,dx=x2-x1,dy=y2-y1,d2=dx*dx+dy*dy,r=r1-rc,D=x1*y2-x2*y1,d=(dy<0?-1:1)*Math.sqrt(Math.max(0,r*r*d2-D*D)),cx0=(D*dy-dx*d)/d2,cy0=(-D*dx-dy*d)/d2,cx1=(D*dy+dx*d)/d2,cy1=(-D*dx+dy*d)/d2,dx0=cx0-x3,dy0=cy0-y3,dx1=cx1-x3,dy1=cy1-y3;return dx0*dx0+dy0*dy0>dx1*dx1+dy1*dy1&&(cx0=cx1,cy0=cy1),[[cx0-ox,cy0-oy],[cx0*r1/r,cy0*r1/r]]}function d3_svg_line(projection){function line(data){function segment(){segments.push("M",interpolate(projection(points),tension))}for(var d,segments=[],points=[],i=-1,n=data.length,fx=d3_functor(x),fy=d3_functor(y);++i<n;)defined.call(this,d=data[i],i)?points.push([+fx.call(this,d,i),+fy.call(this,d,i)]):points.length&&(segment(),points=[]);return points.length&&segment(),segments.length?segments.join(""):null}var x=d3_geom_pointX,y=d3_geom_pointY,defined=d3_true,interpolate=d3_svg_lineLinear,interpolateKey=interpolate.key,tension=.7;return line.x=function(_){return arguments.length?(x=_,line):x},line.y=function(_){return arguments.length?(y=_,line):y},line.defined=function(_){return arguments.length?(defined=_,line):defined},line.interpolate=function(_){return arguments.length?(interpolateKey="function"==typeof _?interpolate=_:(interpolate=d3_svg_lineInterpolators.get(_)||d3_svg_lineLinear).key,line):interpolateKey},line.tension=function(_){return arguments.length?(tension=_,line):tension},line}function d3_svg_lineLinear(points){return points.length>1?points.join("L"):points+"Z"}function d3_svg_lineLinearClosed(points){return points.join("L")+"Z"}function d3_svg_lineStep(points){for(var i=0,n=points.length,p=points[0],path=[p[0],",",p[1]];++i<n;)path.push("H",(p[0]+(p=points[i])[0])/2,"V",p[1]);return n>1&&path.push("H",p[0]),path.join("")}function d3_svg_lineStepBefore(points){for(var i=0,n=points.length,p=points[0],path=[p[0],",",p[1]];++i<n;)path.push("V",(p=points[i])[1],"H",p[0]);return path.join("")}function d3_svg_lineStepAfter(points){for(var i=0,n=points.length,p=points[0],path=[p[0],",",p[1]];++i<n;)path.push("H",(p=points[i])[0],"V",p[1]);return path.join("")}function d3_svg_lineCardinalOpen(points,tension){return points.length<4?d3_svg_lineLinear(points):points[1]+d3_svg_lineHermite(points.slice(1,-1),d3_svg_lineCardinalTangents(points,tension))}function d3_svg_lineCardinalClosed(points,tension){return points.length<3?d3_svg_lineLinearClosed(points):points[0]+d3_svg_lineHermite((points.push(points[0]),points),d3_svg_lineCardinalTangents([points[points.length-2]].concat(points,[points[1]]),tension))}function d3_svg_lineCardinal(points,tension){return points.length<3?d3_svg_lineLinear(points):points[0]+d3_svg_lineHermite(points,d3_svg_lineCardinalTangents(points,tension))}function d3_svg_lineHermite(points,tangents){if(tangents.length<1||points.length!=tangents.length&&points.length!=tangents.length+2)return d3_svg_lineLinear(points);var quad=points.length!=tangents.length,path="",p0=points[0],p=points[1],t0=tangents[0],t=t0,pi=1;if(quad&&(path+="Q"+(p[0]-2*t0[0]/3)+","+(p[1]-2*t0[1]/3)+","+p[0]+","+p[1],p0=points[1],pi=2),tangents.length>1){t=tangents[1],p=points[pi],pi++,path+="C"+(p0[0]+t0[0])+","+(p0[1]+t0[1])+","+(p[0]-t[0])+","+(p[1]-t[1])+","+p[0]+","+p[1];for(var i=2;i<tangents.length;i++,pi++)p=points[pi],t=tangents[i],path+="S"+(p[0]-t[0])+","+(p[1]-t[1])+","+p[0]+","+p[1]}if(quad){var lp=points[pi];path+="Q"+(p[0]+2*t[0]/3)+","+(p[1]+2*t[1]/3)+","+lp[0]+","+lp[1]}return path}function d3_svg_lineCardinalTangents(points,tension){for(var p0,tangents=[],a=(1-tension)/2,p1=points[0],p2=points[1],i=1,n=points.length;++i<n;)p0=p1,p1=p2,p2=points[i],tangents.push([a*(p2[0]-p0[0]),a*(p2[1]-p0[1])]);return tangents}function d3_svg_lineBasis(points){if(points.length<3)return d3_svg_lineLinear(points);var i=1,n=points.length,pi=points[0],x0=pi[0],y0=pi[1],px=[x0,x0,x0,(pi=points[1])[0]],py=[y0,y0,y0,pi[1]],path=[x0,",",y0,"L",d3_svg_lineDot4(d3_svg_lineBasisBezier3,px),",",d3_svg_lineDot4(d3_svg_lineBasisBezier3,py)];for(points.push(points[n-1]);++i<=n;)pi=points[i],px.shift(),px.push(pi[0]),py.shift(),py.push(pi[1]),d3_svg_lineBasisBezier(path,px,py);return points.pop(),path.push("L",pi),path.join("")}function d3_svg_lineBasisOpen(points){if(points.length<4)return d3_svg_lineLinear(points);for(var pi,path=[],i=-1,n=points.length,px=[0],py=[0];++i<3;)pi=points[i],px.push(pi[0]),py.push(pi[1]);for(path.push(d3_svg_lineDot4(d3_svg_lineBasisBezier3,px)+","+d3_svg_lineDot4(d3_svg_lineBasisBezier3,py)),--i;++i<n;)pi=points[i],px.shift(),px.push(pi[0]),py.shift(),py.push(pi[1]),d3_svg_lineBasisBezier(path,px,py);return path.join("")}function d3_svg_lineBasisClosed(points){for(var path,pi,i=-1,n=points.length,m=n+4,px=[],py=[];++i<4;)pi=points[i%n],px.push(pi[0]),py.push(pi[1]);for(path=[d3_svg_lineDot4(d3_svg_lineBasisBezier3,px),",",d3_svg_lineDot4(d3_svg_lineBasisBezier3,py)],--i;++i<m;)pi=points[i%n],px.shift(),px.push(pi[0]),py.shift(),py.push(pi[1]),d3_svg_lineBasisBezier(path,px,py);return path.join("")}function d3_svg_lineBundle(points,tension){var n=points.length-1;if(n)for(var p,t,x0=points[0][0],y0=points[0][1],dx=points[n][0]-x0,dy=points[n][1]-y0,i=-1;++i<=n;)p=points[i],t=i/n,p[0]=tension*p[0]+(1-tension)*(x0+t*dx),p[1]=tension*p[1]+(1-tension)*(y0+t*dy);return d3_svg_lineBasis(points)}function d3_svg_lineDot4(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}function d3_svg_lineBasisBezier(path,x,y){path.push("C",d3_svg_lineDot4(d3_svg_lineBasisBezier1,x),",",d3_svg_lineDot4(d3_svg_lineBasisBezier1,y),",",d3_svg_lineDot4(d3_svg_lineBasisBezier2,x),",",d3_svg_lineDot4(d3_svg_lineBasisBezier2,y),",",d3_svg_lineDot4(d3_svg_lineBasisBezier3,x),",",d3_svg_lineDot4(d3_svg_lineBasisBezier3,y))}function d3_svg_lineSlope(p0,p1){return(p1[1]-p0[1])/(p1[0]-p0[0])}function d3_svg_lineFiniteDifferences(points){for(var i=0,j=points.length-1,m=[],p0=points[0],p1=points[1],d=m[0]=d3_svg_lineSlope(p0,p1);++i<j;)m[i]=(d+(d=d3_svg_lineSlope(p0=p1,p1=points[i+1])))/2;return m[i]=d,m}function d3_svg_lineMonotoneTangents(points){for(var d,a,b,s,tangents=[],m=d3_svg_lineFiniteDifferences(points),i=-1,j=points.length-1;++i<j;)d=d3_svg_lineSlope(points[i],points[i+1]),abs(d)<ε?m[i]=m[i+1]=0:(a=m[i]/d,b=m[i+1]/d,(s=a*a+b*b)>9&&(s=3*d/Math.sqrt(s),m[i]=s*a,m[i+1]=s*b));for(i=-1;++i<=j;)s=(points[Math.min(j,i+1)][0]-points[Math.max(0,i-1)][0])/(6*(1+m[i]*m[i])),tangents.push([s||0,m[i]*s||0]);return tangents}function d3_svg_lineMonotone(points){return points.length<3?d3_svg_lineLinear(points):points[0]+d3_svg_lineHermite(points,d3_svg_lineMonotoneTangents(points))}function d3_svg_lineRadial(points){for(var point,r,a,i=-1,n=points.length;++i<n;)point=points[i],r=point[0],a=point[1]-halfπ,point[0]=r*Math.cos(a),point[1]=r*Math.sin(a);return points}function d3_svg_area(projection){function area(data){function segment(){segments.push("M",interpolate(projection(points1),tension),L,interpolateReverse(projection(points0.reverse()),tension),"Z")}for(var d,x,y,segments=[],points0=[],points1=[],i=-1,n=data.length,fx0=d3_functor(x0),fy0=d3_functor(y0),fx1=x0===x1?function(){return x}:d3_functor(x1),fy1=y0===y1?function(){return y}:d3_functor(y1);++i<n;)defined.call(this,d=data[i],i)?(points0.push([x=+fx0.call(this,d,i),y=+fy0.call(this,d,i)]),points1.push([+fx1.call(this,d,i),+fy1.call(this,d,i)])):points0.length&&(segment(),points0=[],points1=[]);return points0.length&&segment(),segments.length?segments.join(""):null}var x0=d3_geom_pointX,x1=d3_geom_pointX,y0=0,y1=d3_geom_pointY,defined=d3_true,interpolate=d3_svg_lineLinear,interpolateKey=interpolate.key,interpolateReverse=interpolate,L="L",tension=.7;return area.x=function(_){return arguments.length?(x0=x1=_,area):x1},area.x0=function(_){return arguments.length?(x0=_,area):x0},area.x1=function(_){return arguments.length?(x1=_,
area):x1},area.y=function(_){return arguments.length?(y0=y1=_,area):y1},area.y0=function(_){return arguments.length?(y0=_,area):y0},area.y1=function(_){return arguments.length?(y1=_,area):y1},area.defined=function(_){return arguments.length?(defined=_,area):defined},area.interpolate=function(_){return arguments.length?(interpolateKey="function"==typeof _?interpolate=_:(interpolate=d3_svg_lineInterpolators.get(_)||d3_svg_lineLinear).key,interpolateReverse=interpolate.reverse||interpolate,L=interpolate.closed?"M":"L",area):interpolateKey},area.tension=function(_){return arguments.length?(tension=_,area):tension},area}function d3_svg_chordRadius(d){return d.radius}function d3_svg_diagonalProjection(d){return[d.x,d.y]}function d3_svg_diagonalRadialProjection(projection){return function(){var d=projection.apply(this,arguments),r=d[0],a=d[1]-halfπ;return[r*Math.cos(a),r*Math.sin(a)]}}function d3_svg_symbolSize(){return 64}function d3_svg_symbolType(){return"circle"}function d3_svg_symbolCircle(size){var r=Math.sqrt(size/π);return"M0,"+r+"A"+r+","+r+" 0 1,1 0,"+-r+"A"+r+","+r+" 0 1,1 0,"+r+"Z"}function d3_selection_interruptNS(ns){return function(){var lock,activeId,active;(lock=this[ns])&&(active=lock[activeId=lock.active])&&(active.timer.c=null,active.timer.t=NaN,--lock.count?delete lock[activeId]:delete this[ns],lock.active+=.5,active.event&&active.event.interrupt.call(this,this.__data__,active.index))}}function d3_transition(groups,ns,id){return d3_subclass(groups,d3_transitionPrototype),groups.namespace=ns,groups.id=id,groups}function d3_transition_tween(groups,name,value,tween){var id=groups.id,ns=groups.namespace;return d3_selection_each(groups,"function"==typeof value?function(node,i,j){node[ns][id].tween.set(name,tween(value.call(node,node.__data__,i,j)))}:(value=tween(value),function(node){node[ns][id].tween.set(name,value)}))}function d3_transition_text(b){return null==b&&(b=""),function(){this.textContent=b}}function d3_transitionNamespace(name){return null==name?"__transition__":"__transition_"+name+"__"}function d3_transitionNode(node,i,ns,id,inherit){function schedule(elapsed){var delay=transition.delay;if(timer.t=delay+time,delay<=elapsed)return start(elapsed-delay);timer.c=start}function start(elapsed){var activeId=lock.active,active=lock[activeId];active&&(active.timer.c=null,active.timer.t=NaN,--lock.count,delete lock[activeId],active.event&&active.event.interrupt.call(node,node.__data__,active.index));for(var cancelId in lock)if(+cancelId<id){var cancel=lock[cancelId];cancel.timer.c=null,cancel.timer.t=NaN,--lock.count,delete lock[cancelId]}timer.c=tick,d3_timer(function(){return timer.c&&tick(elapsed||1)&&(timer.c=null,timer.t=NaN),1},0,time),lock.active=id,transition.event&&transition.event.start.call(node,node.__data__,i),tweens=[],transition.tween.forEach(function(key,value){(value=value.call(node,node.__data__,i))&&tweens.push(value)}),ease=transition.ease,duration=transition.duration}function tick(elapsed){for(var t=elapsed/duration,e=ease(t),n=tweens.length;n>0;)tweens[--n].call(node,e);if(t>=1)return transition.event&&transition.event.end.call(node,node.__data__,i),--lock.count?delete lock[id]:delete node[ns],1}var time,timer,duration,ease,tweens,lock=node[ns]||(node[ns]={active:0,count:0}),transition=lock[id];transition||(time=inherit.time,timer=d3_timer(schedule,0,time),transition=lock[id]={tween:new d3_Map,time:time,timer:timer,delay:inherit.delay,duration:inherit.duration,ease:inherit.ease,index:i},inherit=null,++lock.count)}function d3_svg_axisX(selection,x0,x1){selection.attr("transform",function(d){var v0=x0(d);return"translate("+(isFinite(v0)?v0:x1(d))+",0)"})}function d3_svg_axisY(selection,y0,y1){selection.attr("transform",function(d){var v0=y0(d);return"translate(0,"+(isFinite(v0)?v0:y1(d))+")"})}function d3_time_formatIsoNative(date){return date.toISOString()}function d3_time_scale(linear,methods,format){function scale(x){return linear(x)}function tickMethod(extent,count){var span=extent[1]-extent[0],target=span/count,i=d3.bisect(d3_time_scaleSteps,target);return i==d3_time_scaleSteps.length?[methods.year,d3_scale_linearTickRange(extent.map(function(d){return d/31536e6}),count)[2]]:i?methods[target/d3_time_scaleSteps[i-1]<d3_time_scaleSteps[i]/target?i-1:i]:[d3_time_scaleMilliseconds,d3_scale_linearTickRange(extent,count)[2]]}return scale.invert=function(x){return d3_time_scaleDate(linear.invert(x))},scale.domain=function(x){return arguments.length?(linear.domain(x),scale):linear.domain().map(d3_time_scaleDate)},scale.nice=function(interval,skip){function skipped(date){return!isNaN(date)&&!interval.range(date,d3_time_scaleDate(+date+1),skip).length}var domain=scale.domain(),extent=d3_scaleExtent(domain),method=null==interval?tickMethod(extent,10):"number"==typeof interval&&tickMethod(extent,interval);return method&&(interval=method[0],skip=method[1]),scale.domain(d3_scale_nice(domain,skip>1?{floor:function(date){for(;skipped(date=interval.floor(date));)date=d3_time_scaleDate(date-1);return date},ceil:function(date){for(;skipped(date=interval.ceil(date));)date=d3_time_scaleDate(+date+1);return date}}:interval))},scale.ticks=function(interval,skip){var extent=d3_scaleExtent(scale.domain()),method=null==interval?tickMethod(extent,10):"number"==typeof interval?tickMethod(extent,interval):!interval.range&&[{range:interval},skip];return method&&(interval=method[0],skip=method[1]),interval.range(extent[0],d3_time_scaleDate(+extent[1]+1),skip<1?1:skip)},scale.tickFormat=function(){return format},scale.copy=function(){return d3_time_scale(linear.copy(),methods,format)},d3_scale_linearRebind(scale,linear)}function d3_time_scaleDate(t){return new Date(t)}function d3_json(request){return JSON.parse(request.responseText)}function d3_html(request){var range=d3_document.createRange();return range.selectNode(d3_document.body),range.createContextualFragment(request.responseText)}var d3={version:"3.5.17"},d3_arraySlice=[].slice,d3_array=function(list){return d3_arraySlice.call(list)},d3_document=this.document;if(d3_document)try{d3_array(d3_document.documentElement.childNodes)[0].nodeType}catch(e){d3_array=function(list){for(var i=list.length,array=new Array(i);i--;)array[i]=list[i];return array}}if(Date.now||(Date.now=function(){return+new Date}),d3_document)try{d3_document.createElement("DIV").style.setProperty("opacity",0,"")}catch(error){var d3_element_prototype=this.Element.prototype,d3_element_setAttribute=d3_element_prototype.setAttribute,d3_element_setAttributeNS=d3_element_prototype.setAttributeNS,d3_style_prototype=this.CSSStyleDeclaration.prototype,d3_style_setProperty=d3_style_prototype.setProperty;d3_element_prototype.setAttribute=function(name,value){d3_element_setAttribute.call(this,name,value+"")},d3_element_prototype.setAttributeNS=function(space,local,value){d3_element_setAttributeNS.call(this,space,local,value+"")},d3_style_prototype.setProperty=function(name,value,priority){d3_style_setProperty.call(this,name,value+"",priority)}}d3.ascending=d3_ascending,d3.descending=function(a,b){return b<a?-1:b>a?1:b>=a?0:NaN},d3.min=function(array,f){var a,b,i=-1,n=array.length;if(1===arguments.length){for(;++i<n;)if(null!=(b=array[i])&&b>=b){a=b;break}for(;++i<n;)null!=(b=array[i])&&a>b&&(a=b)}else{for(;++i<n;)if(null!=(b=f.call(array,array[i],i))&&b>=b){a=b;break}for(;++i<n;)null!=(b=f.call(array,array[i],i))&&a>b&&(a=b)}return a},d3.max=function(array,f){var a,b,i=-1,n=array.length;if(1===arguments.length){for(;++i<n;)if(null!=(b=array[i])&&b>=b){a=b;break}for(;++i<n;)null!=(b=array[i])&&b>a&&(a=b)}else{for(;++i<n;)if(null!=(b=f.call(array,array[i],i))&&b>=b){a=b;break}for(;++i<n;)null!=(b=f.call(array,array[i],i))&&b>a&&(a=b)}return a},d3.extent=function(array,f){var a,b,c,i=-1,n=array.length;if(1===arguments.length){for(;++i<n;)if(null!=(b=array[i])&&b>=b){a=c=b;break}for(;++i<n;)null!=(b=array[i])&&(a>b&&(a=b),c<b&&(c=b))}else{for(;++i<n;)if(null!=(b=f.call(array,array[i],i))&&b>=b){a=c=b;break}for(;++i<n;)null!=(b=f.call(array,array[i],i))&&(a>b&&(a=b),c<b&&(c=b))}return[a,c]},d3.sum=function(array,f){var a,s=0,n=array.length,i=-1;if(1===arguments.length)for(;++i<n;)d3_numeric(a=+array[i])&&(s+=a);else for(;++i<n;)d3_numeric(a=+f.call(array,array[i],i))&&(s+=a);return s},d3.mean=function(array,f){var a,s=0,n=array.length,i=-1,j=n;if(1===arguments.length)for(;++i<n;)d3_numeric(a=d3_number(array[i]))?s+=a:--j;else for(;++i<n;)d3_numeric(a=d3_number(f.call(array,array[i],i)))?s+=a:--j;if(j)return s/j},d3.quantile=function(values,p){var H=(values.length-1)*p+1,h=Math.floor(H),v=+values[h-1],e=H-h;return e?v+e*(values[h]-v):v},d3.median=function(array,f){var a,numbers=[],n=array.length,i=-1;if(1===arguments.length)for(;++i<n;)d3_numeric(a=d3_number(array[i]))&&numbers.push(a);else for(;++i<n;)d3_numeric(a=d3_number(f.call(array,array[i],i)))&&numbers.push(a);if(numbers.length)return d3.quantile(numbers.sort(d3_ascending),.5)},d3.variance=function(array,f){var a,d,n=array.length,m=0,s=0,i=-1,j=0;if(1===arguments.length)for(;++i<n;)d3_numeric(a=d3_number(array[i]))&&(d=a-m,m+=d/++j,s+=d*(a-m));else for(;++i<n;)d3_numeric(a=d3_number(f.call(array,array[i],i)))&&(d=a-m,m+=d/++j,s+=d*(a-m));if(j>1)return s/(j-1)},d3.deviation=function(){var v=d3.variance.apply(this,arguments);return v?Math.sqrt(v):v};var d3_bisect=d3_bisector(d3_ascending);d3.bisectLeft=d3_bisect.left,d3.bisect=d3.bisectRight=d3_bisect.right,d3.bisector=function(f){return d3_bisector(1===f.length?function(d,x){return d3_ascending(f(d),x)}:f)},d3.shuffle=function(array,i0,i1){(m=arguments.length)<3&&(i1=array.length,m<2&&(i0=0));for(var t,i,m=i1-i0;m;)i=Math.random()*m--|0,t=array[m+i0],array[m+i0]=array[i+i0],array[i+i0]=t;return array},d3.permute=function(array,indexes){for(var i=indexes.length,permutes=new Array(i);i--;)permutes[i]=array[indexes[i]];return permutes},d3.pairs=function(array){for(var i=0,n=array.length-1,p1=array[0],pairs=new Array(n<0?0:n);i<n;)pairs[i]=[p1,p1=array[++i]];return pairs},d3.transpose=function(matrix){if(!(n=matrix.length))return[];for(var i=-1,m=d3.min(matrix,d3_transposeLength),transpose=new Array(m);++i<m;)for(var n,j=-1,row=transpose[i]=new Array(n);++j<n;)row[j]=matrix[j][i];return transpose},d3.zip=function(){return d3.transpose(arguments)},d3.keys=function(map){var keys=[];for(var key in map)keys.push(key);return keys},d3.values=function(map){var values=[];for(var key in map)values.push(map[key]);return values},d3.entries=function(map){var entries=[];for(var key in map)entries.push({key:key,value:map[key]});return entries},d3.merge=function(arrays){for(var m,merged,array,n=arrays.length,i=-1,j=0;++i<n;)j+=arrays[i].length;for(merged=new Array(j);--n>=0;)for(array=arrays[n],m=array.length;--m>=0;)merged[--j]=array[m];return merged};var abs=Math.abs;d3.range=function(start,stop,step){if(arguments.length<3&&(step=1,arguments.length<2&&(stop=start,start=0)),(stop-start)/step==1/0)throw new Error("infinite range");var j,range=[],k=d3_range_integerScale(abs(step)),i=-1;if(start*=k,stop*=k,step*=k,step<0)for(;(j=start+step*++i)>stop;)range.push(j/k);else for(;(j=start+step*++i)<stop;)range.push(j/k);return range},d3.map=function(object,f){var map=new d3_Map;if(object instanceof d3_Map)object.forEach(function(key,value){map.set(key,value)});else if(Array.isArray(object)){var o,i=-1,n=object.length;if(1===arguments.length)for(;++i<n;)map.set(i,object[i]);else for(;++i<n;)map.set(f.call(object,o=object[i],i),o)}else for(var key in object)map.set(key,object[key]);return map};var d3_map_proto="__proto__",d3_map_zero="\0";d3_class(d3_Map,{has:d3_map_has,get:function(key){return this._[d3_map_escape(key)]},set:function(key,value){return this._[d3_map_escape(key)]=value},remove:d3_map_remove,keys:d3_map_keys,values:function(){var values=[];for(var key in this._)values.push(this._[key]);return values},entries:function(){var entries=[];for(var key in this._)entries.push({key:d3_map_unescape(key),value:this._[key]});return entries},size:d3_map_size,empty:d3_map_empty,forEach:function(f){for(var key in this._)f.call(this,d3_map_unescape(key),this._[key])}}),d3.nest=function(){function map(mapType,array,depth){if(depth>=keys.length)return rollup?rollup.call(nest,array):sortValues?array.sort(sortValues):array;for(var keyValue,object,setter,values,i=-1,n=array.length,key=keys[depth++],valuesByKey=new d3_Map;++i<n;)(values=valuesByKey.get(keyValue=key(object=array[i])))?values.push(object):valuesByKey.set(keyValue,[object]);return mapType?(object=mapType(),setter=function(keyValue,values){object.set(keyValue,map(mapType,values,depth))}):(object={},setter=function(keyValue,values){object[keyValue]=map(mapType,values,depth)}),valuesByKey.forEach(setter),object}function entries(map,depth){if(depth>=keys.length)return map;var array=[],sortKey=sortKeys[depth++];return map.forEach(function(key,keyMap){array.push({key:key,values:entries(keyMap,depth)})}),sortKey?array.sort(function(a,b){return sortKey(a.key,b.key)}):array}var sortValues,rollup,nest={},keys=[],sortKeys=[];return nest.map=function(array,mapType){return map(mapType,array,0)},nest.entries=function(array){return entries(map(d3.map,array,0),0)},nest.key=function(d){return keys.push(d),nest},nest.sortKeys=function(order){return sortKeys[keys.length-1]=order,nest},nest.sortValues=function(order){return sortValues=order,nest},nest.rollup=function(f){return rollup=f,nest},nest},d3.set=function(array){var set=new d3_Set;if(array)for(var i=0,n=array.length;i<n;++i)set.add(array[i]);return set},d3_class(d3_Set,{has:d3_map_has,add:function(key){return this._[d3_map_escape(key+="")]=!0,key},remove:d3_map_remove,values:d3_map_keys,size:d3_map_size,empty:d3_map_empty,forEach:function(f){for(var key in this._)f.call(this,d3_map_unescape(key))}}),d3.behavior={},d3.rebind=function(target,source){for(var method,i=1,n=arguments.length;++i<n;)target[method=arguments[i]]=d3_rebind(target,source,source[method]);return target};var d3_vendorPrefixes=["webkit","ms","moz","Moz","o","O"];d3.dispatch=function(){for(var dispatch=new d3_dispatch,i=-1,n=arguments.length;++i<n;)dispatch[arguments[i]]=d3_dispatch_event(dispatch);return dispatch},d3_dispatch.prototype.on=function(type,listener){var i=type.indexOf("."),name="";if(i>=0&&(name=type.slice(i+1),type=type.slice(0,i)),type)return arguments.length<2?this[type].on(name):this[type].on(name,listener);if(2===arguments.length){if(null==listener)for(type in this)this.hasOwnProperty(type)&&this[type].on(name,null);return this}},d3.event=null,d3.requote=function(s){return s.replace(d3_requote_re,"\\$&")};var d3_requote_re=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,d3_subclass={}.__proto__?function(object,prototype){object.__proto__=prototype}:function(object,prototype){for(var property in prototype)object[property]=prototype[property]},d3_select=function(s,n){return n.querySelector(s)},d3_selectAll=function(s,n){return n.querySelectorAll(s)},d3_selectMatches=function(n,s){var d3_selectMatcher=n.matches||n[d3_vendorSymbol(n,"matchesSelector")];return(d3_selectMatches=function(n,s){return d3_selectMatcher.call(n,s)})(n,s)};"function"==typeof Sizzle&&(d3_select=function(s,n){return Sizzle(s,n)[0]||null},d3_selectAll=Sizzle,d3_selectMatches=Sizzle.matchesSelector),d3.selection=function(){return d3.select(d3_document.documentElement)};var d3_selectionPrototype=d3.selection.prototype=[];d3_selectionPrototype.select=function(selector){var subgroup,subnode,group,node,subgroups=[];selector=d3_selection_selector(selector);for(var j=-1,m=this.length;++j<m;){subgroups.push(subgroup=[]),subgroup.parentNode=(group=this[j]).parentNode;for(var i=-1,n=group.length;++i<n;)(node=group[i])?(subgroup.push(subnode=selector.call(node,node.__data__,i,j)),subnode&&"__data__"in node&&(subnode.__data__=node.__data__)):subgroup.push(null)}return d3_selection(subgroups)},d3_selectionPrototype.selectAll=function(selector){var subgroup,node,subgroups=[];selector=d3_selection_selectorAll(selector);for(var j=-1,m=this.length;++j<m;)for(var group=this[j],i=-1,n=group.length;++i<n;)(node=group[i])&&(subgroups.push(subgroup=d3_array(selector.call(node,node.__data__,i,j))),subgroup.parentNode=node);return d3_selection(subgroups)};var d3_nsXhtml="http://www.w3.org/1999/xhtml",d3_nsPrefix={svg:"http://www.w3.org/2000/svg",xhtml:d3_nsXhtml,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};d3.ns={prefix:d3_nsPrefix,qualify:function(name){var i=name.indexOf(":"),prefix=name;return i>=0&&"xmlns"!==(prefix=name.slice(0,i))&&(name=name.slice(i+1)),d3_nsPrefix.hasOwnProperty(prefix)?{space:d3_nsPrefix[prefix],local:name}:name}},d3_selectionPrototype.attr=function(name,value){if(arguments.length<2){if("string"==typeof name){var node=this.node();return name=d3.ns.qualify(name),name.local?node.getAttributeNS(name.space,name.local):node.getAttribute(name)}for(value in name)this.each(d3_selection_attr(value,name[value]));return this}return this.each(d3_selection_attr(name,value))},d3_selectionPrototype.classed=function(name,value){if(arguments.length<2){if("string"==typeof name){var node=this.node(),n=(name=d3_selection_classes(name)).length,i=-1;if(value=node.classList){for(;++i<n;)if(!value.contains(name[i]))return!1}else for(value=node.getAttribute("class");++i<n;)if(!d3_selection_classedRe(name[i]).test(value))return!1;return!0}for(value in name)this.each(d3_selection_classed(value,name[value]));return this}return this.each(d3_selection_classed(name,value))},d3_selectionPrototype.style=function(name,value,priority){var n=arguments.length;if(n<3){if("string"!=typeof name){n<2&&(value="");for(priority in name)this.each(d3_selection_style(priority,name[priority],value));return this}if(n<2){var node=this.node();return d3_window(node).getComputedStyle(node,null).getPropertyValue(name)}priority=""}return this.each(d3_selection_style(name,value,priority))},d3_selectionPrototype.property=function(name,value){if(arguments.length<2){if("string"==typeof name)return this.node()[name];for(value in name)this.each(d3_selection_property(value,name[value]));return this}return this.each(d3_selection_property(name,value))},d3_selectionPrototype.text=function(value){return arguments.length?this.each("function"==typeof value?function(){var v=value.apply(this,arguments);this.textContent=null==v?"":v}:null==value?function(){this.textContent=""}:function(){this.textContent=value}):this.node().textContent},d3_selectionPrototype.html=function(value){return arguments.length?this.each("function"==typeof value?function(){var v=value.apply(this,arguments);this.innerHTML=null==v?"":v}:null==value?function(){this.innerHTML=""}:function(){this.innerHTML=value}):this.node().innerHTML},d3_selectionPrototype.append=function(name){return name=d3_selection_creator(name),this.select(function(){return this.appendChild(name.apply(this,arguments))})},d3_selectionPrototype.insert=function(name,before){return name=d3_selection_creator(name),before=d3_selection_selector(before),this.select(function(){return this.insertBefore(name.apply(this,arguments),before.apply(this,arguments)||null)})},d3_selectionPrototype.remove=function(){return this.each(d3_selectionRemove)},d3_selectionPrototype.data=function(value,key){function bind(group,groupData){var i,node,nodeData,n=group.length,m=groupData.length,n0=Math.min(n,m),updateNodes=new Array(m),enterNodes=new Array(m),exitNodes=new Array(n);if(key){var keyValue,nodeByKeyValue=new d3_Map,keyValues=new Array(n);for(i=-1;++i<n;)(node=group[i])&&(nodeByKeyValue.has(keyValue=key.call(node,node.__data__,i))?exitNodes[i]=node:nodeByKeyValue.set(keyValue,node),keyValues[i]=keyValue);for(i=-1;++i<m;)(node=nodeByKeyValue.get(keyValue=key.call(groupData,nodeData=groupData[i],i)))?!0!==node&&(updateNodes[i]=node,node.__data__=nodeData):enterNodes[i]=d3_selection_dataNode(nodeData),nodeByKeyValue.set(keyValue,!0);for(i=-1;++i<n;)i in keyValues&&!0!==nodeByKeyValue.get(keyValues[i])&&(exitNodes[i]=group[i])}else{for(i=-1;++i<n0;)node=group[i],nodeData=groupData[i],node?(node.__data__=nodeData,updateNodes[i]=node):enterNodes[i]=d3_selection_dataNode(nodeData);for(;i<m;++i)enterNodes[i]=d3_selection_dataNode(groupData[i]);for(;i<n;++i)exitNodes[i]=group[i]}enterNodes.update=updateNodes,enterNodes.parentNode=updateNodes.parentNode=exitNodes.parentNode=group.parentNode,enter.push(enterNodes),update.push(updateNodes),exit.push(exitNodes)}var group,node,i=-1,n=this.length;if(!arguments.length){for(value=new Array(n=(group=this[0]).length);++i<n;)(node=group[i])&&(value[i]=node.__data__);return value}var enter=d3_selection_enter([]),update=d3_selection([]),exit=d3_selection([]);if("function"==typeof value)for(;++i<n;)bind(group=this[i],value.call(group,group.parentNode.__data__,i));else for(;++i<n;)bind(group=this[i],value);return update.enter=function(){return enter},update.exit=function(){return exit},update},d3_selectionPrototype.datum=function(value){return arguments.length?this.property("__data__",value):this.property("__data__")},d3_selectionPrototype.filter=function(filter){var subgroup,group,node,subgroups=[];"function"!=typeof filter&&(filter=d3_selection_filter(filter));for(var j=0,m=this.length;j<m;j++){subgroups.push(subgroup=[]),subgroup.parentNode=(group=this[j]).parentNode;for(var i=0,n=group.length;i<n;i++)(node=group[i])&&filter.call(node,node.__data__,i,j)&&subgroup.push(node)}return d3_selection(subgroups)},d3_selectionPrototype.order=function(){for(var j=-1,m=this.length;++j<m;)for(var node,group=this[j],i=group.length-1,next=group[i];--i>=0;)(node=group[i])&&(next&&next!==node.nextSibling&&next.parentNode.insertBefore(node,next),next=node);return this},d3_selectionPrototype.sort=function(comparator){comparator=d3_selection_sortComparator.apply(this,arguments);for(var j=-1,m=this.length;++j<m;)this[j].sort(comparator);return this.order()},d3_selectionPrototype.each=function(callback){return d3_selection_each(this,function(node,i,j){callback.call(node,node.__data__,i,j)})},d3_selectionPrototype.call=function(callback){var args=d3_array(arguments);return callback.apply(args[0]=this,args),this},d3_selectionPrototype.empty=function(){return!this.node()},d3_selectionPrototype.node=function(){for(var j=0,m=this.length;j<m;j++)for(var group=this[j],i=0,n=group.length;i<n;i++){var node=group[i];if(node)return node}return null},d3_selectionPrototype.size=function(){var n=0;return d3_selection_each(this,function(){++n}),n};var d3_selection_enterPrototype=[];d3.selection.enter=d3_selection_enter,d3.selection.enter.prototype=d3_selection_enterPrototype,d3_selection_enterPrototype.append=d3_selectionPrototype.append,d3_selection_enterPrototype.empty=d3_selectionPrototype.empty,d3_selection_enterPrototype.node=d3_selectionPrototype.node,d3_selection_enterPrototype.call=d3_selectionPrototype.call,d3_selection_enterPrototype.size=d3_selectionPrototype.size,d3_selection_enterPrototype.select=function(selector){for(var subgroup,subnode,upgroup,group,node,subgroups=[],j=-1,m=this.length;++j<m;){upgroup=(group=this[j]).update,subgroups.push(subgroup=[]),subgroup.parentNode=group.parentNode;for(var i=-1,n=group.length;++i<n;)(node=group[i])?(subgroup.push(upgroup[i]=subnode=selector.call(group.parentNode,node.__data__,i,j)),subnode.__data__=node.__data__):subgroup.push(null)}return d3_selection(subgroups)},d3_selection_enterPrototype.insert=function(name,before){return arguments.length<2&&(before=d3_selection_enterInsertBefore(this)),d3_selectionPrototype.insert.call(this,name,before)},d3.select=function(node){var group;return"string"==typeof node?(group=[d3_select(node,d3_document)],group.parentNode=d3_document.documentElement):(group=[node],group.parentNode=d3_documentElement(node)),d3_selection([group])},d3.selectAll=function(nodes){var group;return"string"==typeof nodes?(group=d3_array(d3_selectAll(nodes,d3_document)),group.parentNode=d3_document.documentElement):(group=d3_array(nodes),group.parentNode=null),d3_selection([group])},d3_selectionPrototype.on=function(type,listener,capture){var n=arguments.length;if(n<3){if("string"!=typeof type){n<2&&(listener=!1);for(capture in type)this.each(d3_selection_on(capture,type[capture],listener));return this}if(n<2)return(n=this.node()["__on"+type])&&n._;capture=!1}return this.each(d3_selection_on(type,listener,capture))};var d3_selection_onFilters=d3.map({mouseenter:"mouseover",mouseleave:"mouseout"});d3_document&&d3_selection_onFilters.forEach(function(k){"on"+k in d3_document&&d3_selection_onFilters.remove(k)});var d3_event_dragSelect,d3_event_dragId=0;d3.mouse=function(container){return d3_mousePoint(container,d3_eventSource())};var d3_mouse_bug44083=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;d3.touch=function(container,touches,identifier){if(arguments.length<3&&(identifier=touches,touches=d3_eventSource().changedTouches),touches)for(var touch,i=0,n=touches.length;i<n;++i)if((touch=touches[i]).identifier===identifier)return d3_mousePoint(container,touch)},d3.behavior.drag=function(){function drag(){this.on("mousedown.drag",mousedown).on("touchstart.drag",touchstart)}function dragstart(id,position,subject,move,end){return function(){function moved(){var dx,dy,position1=position(parent,dragId);position1&&(dx=position1[0]-position0[0],dy=position1[1]-position0[1],dragged|=dx|dy,position0=position1,dispatch({type:"drag",x:position1[0]+dragOffset[0],y:position1[1]+dragOffset[1],dx:dx,dy:dy}))}function ended(){position(parent,dragId)&&(dragSubject.on(move+dragName,null).on(end+dragName,null),dragRestore(dragged),dispatch({type:"dragend"}))}var dragOffset,that=this,target=d3.event.target.correspondingElement||d3.event.target,parent=that.parentNode,dispatch=event.of(that,arguments),dragged=0,dragId=id(),dragName=".drag"+(null==dragId?"":"-"+dragId),dragSubject=d3.select(subject(target)).on(move+dragName,moved).on(end+dragName,ended),dragRestore=d3_event_dragSuppress(target),position0=position(parent,dragId);origin?(dragOffset=origin.apply(that,arguments),dragOffset=[dragOffset.x-position0[0],dragOffset.y-position0[1]]):dragOffset=[0,0],dispatch({type:"dragstart"})}}var event=d3_eventDispatch(drag,"drag","dragstart","dragend"),origin=null,mousedown=dragstart(d3_noop,d3.mouse,d3_window,"mousemove","mouseup"),touchstart=dragstart(d3_behavior_dragTouchId,d3.touch,d3_identity,"touchmove","touchend");return drag.origin=function(x){return arguments.length?(origin=x,drag):origin},d3.rebind(drag,event,"on")},d3.touches=function(container,touches){return arguments.length<2&&(touches=d3_eventSource().touches),touches?d3_array(touches).map(function(touch){var point=d3_mousePoint(container,touch);return point.identifier=touch.identifier,point}):[]};var ε=1e-6,ε2=ε*ε,π=Math.PI,τ=2*π,τε=τ-ε,halfπ=π/2,d3_radians=π/180,d3_degrees=180/π,ρ=Math.SQRT2;d3.interpolateZoom=function(p0,p1){var i,S,ux0=p0[0],uy0=p0[1],w0=p0[2],ux1=p1[0],uy1=p1[1],w1=p1[2],dx=ux1-ux0,dy=uy1-uy0,d2=dx*dx+dy*dy;if(d2<ε2)S=Math.log(w1/w0)/ρ,i=function(t){return[ux0+t*dx,uy0+t*dy,w0*Math.exp(ρ*t*S)]};else{var d1=Math.sqrt(d2),b0=(w1*w1-w0*w0+4*d2)/(2*w0*2*d1),b1=(w1*w1-w0*w0-4*d2)/(2*w1*2*d1),r0=Math.log(Math.sqrt(b0*b0+1)-b0),r1=Math.log(Math.sqrt(b1*b1+1)-b1);S=(r1-r0)/ρ,i=function(t){var s=t*S,coshr0=d3_cosh(r0),u=w0/(2*d1)*(coshr0*d3_tanh(ρ*s+r0)-d3_sinh(r0));return[ux0+u*dx,uy0+u*dy,w0*coshr0/d3_cosh(ρ*s+r0)]}}return i.duration=1e3*S,i},d3.behavior.zoom=function(){function zoom(g){g.on(mousedown,mousedowned).on(d3_behavior_zoomWheel+".zoom",mousewheeled).on("dblclick.zoom",dblclicked).on(touchstart,touchstarted)}function location(p){return[(p[0]-view.x)/view.k,(p[1]-view.y)/view.k]}function point(l){return[l[0]*view.k+view.x,l[1]*view.k+view.y]}function scaleTo(s){view.k=Math.max(scaleExtent[0],Math.min(scaleExtent[1],s))}function translateTo(p,l){l=point(l),view.x+=p[0]-l[0],view.y+=p[1]-l[1]}function zoomTo(that,p,l,k){that.__chart__={x:view.x,y:view.y,k:view.k},scaleTo(Math.pow(2,k)),translateTo(center0=p,l),that=d3.select(that),duration>0&&(that=that.transition().duration(duration)),that.call(zoom.event)}function rescale(){x1&&x1.domain(x0.range().map(function(x){return(x-view.x)/view.k}).map(x0.invert)),y1&&y1.domain(y0.range().map(function(y){return(y-view.y)/view.k}).map(y0.invert))}function zoomstarted(dispatch){zooming++||dispatch({type:"zoomstart"})}function zoomed(dispatch){rescale(),dispatch({type:"zoom",scale:view.k,translate:[view.x,view.y]})}function zoomended(dispatch){--zooming||(dispatch({type:"zoomend"}),center0=null)}function mousedowned(){function moved(){dragged=1,translateTo(d3.mouse(that),location0),zoomed(dispatch)}function ended(){subject.on(mousemove,null).on(mouseup,null),dragRestore(dragged),zoomended(dispatch)}var that=this,dispatch=event.of(that,arguments),dragged=0,subject=d3.select(d3_window(that)).on(mousemove,moved).on(mouseup,ended),location0=location(d3.mouse(that)),dragRestore=d3_event_dragSuppress(that);d3_selection_interrupt.call(that),zoomstarted(dispatch)}function touchstarted(){function relocate(){var touches=d3.touches(that);return scale0=view.k,touches.forEach(function(t){t.identifier in locations0&&(locations0[t.identifier]=location(t))}),touches}function started(){var target=d3.event.target;d3.select(target).on(touchmove,moved).on(touchend,ended),targets.push(target);for(var changed=d3.event.changedTouches,i=0,n=changed.length;i<n;++i)locations0[changed[i].identifier]=null;var touches=relocate(),now=Date.now();if(1===touches.length){if(now-touchtime<500){var p=touches[0];zoomTo(that,p,locations0[p.identifier],Math.floor(Math.log(view.k)/Math.LN2)+1),d3_eventPreventDefault()}touchtime=now}else if(touches.length>1){var p=touches[0],q=touches[1],dx=p[0]-q[0],dy=p[1]-q[1];distance0=dx*dx+dy*dy}}function moved(){var p0,l0,p1,l1,touches=d3.touches(that);d3_selection_interrupt.call(that);for(var i=0,n=touches.length;i<n;++i,l1=null)if(p1=touches[i],l1=locations0[p1.identifier]){if(l0)break;p0=p1,l0=l1}if(l1){var distance1=(distance1=p1[0]-p0[0])*distance1+(distance1=p1[1]-p0[1])*distance1,scale1=distance0&&Math.sqrt(distance1/distance0);p0=[(p0[0]+p1[0])/2,(p0[1]+p1[1])/2],l0=[(l0[0]+l1[0])/2,(l0[1]+l1[1])/2],scaleTo(scale1*scale0)}touchtime=null,translateTo(p0,l0),zoomed(dispatch)}function ended(){if(d3.event.touches.length){for(var changed=d3.event.changedTouches,i=0,n=changed.length;i<n;++i)delete locations0[changed[i].identifier];for(var identifier in locations0)return void relocate()}d3.selectAll(targets).on(zoomName,null),subject.on(mousedown,mousedowned).on(touchstart,touchstarted),dragRestore(),zoomended(dispatch)}var scale0,that=this,dispatch=event.of(that,arguments),locations0={},distance0=0,zoomName=".zoom-"+d3.event.changedTouches[0].identifier,touchmove="touchmove"+zoomName,touchend="touchend"+zoomName,targets=[],subject=d3.select(that),dragRestore=d3_event_dragSuppress(that);started(),zoomstarted(dispatch),subject.on(mousedown,null).on(touchstart,started)}function mousewheeled(){var dispatch=event.of(this,arguments);mousewheelTimer?clearTimeout(mousewheelTimer):(d3_selection_interrupt.call(this),translate0=location(center0=center||d3.mouse(this)),zoomstarted(dispatch)),mousewheelTimer=setTimeout(function(){mousewheelTimer=null,zoomended(dispatch)},50),d3_eventPreventDefault(),scaleTo(Math.pow(2,.002*d3_behavior_zoomDelta())*view.k),translateTo(center0,translate0),zoomed(dispatch)}function dblclicked(){var p=d3.mouse(this),k=Math.log(view.k)/Math.LN2;zoomTo(this,p,location(p),d3.event.shiftKey?Math.ceil(k)-1:Math.floor(k)+1)}var translate0,center0,center,mousewheelTimer,touchtime,x0,x1,y0,y1,view={x:0,y:0,k:1},size=[960,500],scaleExtent=d3_behavior_zoomInfinity,duration=250,zooming=0,mousedown="mousedown.zoom",mousemove="mousemove.zoom",mouseup="mouseup.zoom",touchstart="touchstart.zoom",event=d3_eventDispatch(zoom,"zoomstart","zoom","zoomend");return d3_behavior_zoomWheel||(d3_behavior_zoomWheel="onwheel"in d3_document?(d3_behavior_zoomDelta=function(){return-d3.event.deltaY*(d3.event.deltaMode?120:1)},
"wheel"):"onmousewheel"in d3_document?(d3_behavior_zoomDelta=function(){return d3.event.wheelDelta},"mousewheel"):(d3_behavior_zoomDelta=function(){return-d3.event.detail},"MozMousePixelScroll")),zoom.event=function(g){g.each(function(){var dispatch=event.of(this,arguments),view1=view;d3_transitionInheritId?d3.select(this).transition().each("start.zoom",function(){view=this.__chart__||{x:0,y:0,k:1},zoomstarted(dispatch)}).tween("zoom:zoom",function(){var dx=size[0],dy=size[1],cx=center0?center0[0]:dx/2,cy=center0?center0[1]:dy/2,i=d3.interpolateZoom([(cx-view.x)/view.k,(cy-view.y)/view.k,dx/view.k],[(cx-view1.x)/view1.k,(cy-view1.y)/view1.k,dx/view1.k]);return function(t){var l=i(t),k=dx/l[2];this.__chart__=view={x:cx-l[0]*k,y:cy-l[1]*k,k:k},zoomed(dispatch)}}).each("interrupt.zoom",function(){zoomended(dispatch)}).each("end.zoom",function(){zoomended(dispatch)}):(this.__chart__=view,zoomstarted(dispatch),zoomed(dispatch),zoomended(dispatch))})},zoom.translate=function(_){return arguments.length?(view={x:+_[0],y:+_[1],k:view.k},rescale(),zoom):[view.x,view.y]},zoom.scale=function(_){return arguments.length?(view={x:view.x,y:view.y,k:null},scaleTo(+_),rescale(),zoom):view.k},zoom.scaleExtent=function(_){return arguments.length?(scaleExtent=null==_?d3_behavior_zoomInfinity:[+_[0],+_[1]],zoom):scaleExtent},zoom.center=function(_){return arguments.length?(center=_&&[+_[0],+_[1]],zoom):center},zoom.size=function(_){return arguments.length?(size=_&&[+_[0],+_[1]],zoom):size},zoom.duration=function(_){return arguments.length?(duration=+_,zoom):duration},zoom.x=function(z){return arguments.length?(x1=z,x0=z.copy(),view={x:0,y:0,k:1},zoom):x1},zoom.y=function(z){return arguments.length?(y1=z,y0=z.copy(),view={x:0,y:0,k:1},zoom):y1},d3.rebind(zoom,event,"on")};var d3_behavior_zoomDelta,d3_behavior_zoomWheel,d3_behavior_zoomInfinity=[0,1/0];d3.color=d3_color,d3_color.prototype.toString=function(){return this.rgb()+""},d3.hsl=d3_hsl;var d3_hslPrototype=d3_hsl.prototype=new d3_color;d3_hslPrototype.brighter=function(k){return k=Math.pow(.7,arguments.length?k:1),new d3_hsl(this.h,this.s,this.l/k)},d3_hslPrototype.darker=function(k){return k=Math.pow(.7,arguments.length?k:1),new d3_hsl(this.h,this.s,k*this.l)},d3_hslPrototype.rgb=function(){return d3_hsl_rgb(this.h,this.s,this.l)},d3.hcl=d3_hcl;var d3_hclPrototype=d3_hcl.prototype=new d3_color;d3_hclPrototype.brighter=function(k){return new d3_hcl(this.h,this.c,Math.min(100,this.l+d3_lab_K*(arguments.length?k:1)))},d3_hclPrototype.darker=function(k){return new d3_hcl(this.h,this.c,Math.max(0,this.l-d3_lab_K*(arguments.length?k:1)))},d3_hclPrototype.rgb=function(){return d3_hcl_lab(this.h,this.c,this.l).rgb()},d3.lab=d3_lab;var d3_lab_K=18,d3_lab_X=.95047,d3_lab_Y=1,d3_lab_Z=1.08883,d3_labPrototype=d3_lab.prototype=new d3_color;d3_labPrototype.brighter=function(k){return new d3_lab(Math.min(100,this.l+d3_lab_K*(arguments.length?k:1)),this.a,this.b)},d3_labPrototype.darker=function(k){return new d3_lab(Math.max(0,this.l-d3_lab_K*(arguments.length?k:1)),this.a,this.b)},d3_labPrototype.rgb=function(){return d3_lab_rgb(this.l,this.a,this.b)},d3.rgb=d3_rgb;var d3_rgbPrototype=d3_rgb.prototype=new d3_color;d3_rgbPrototype.brighter=function(k){k=Math.pow(.7,arguments.length?k:1);var r=this.r,g=this.g,b=this.b,i=30;return r||g||b?(r&&r<i&&(r=i),g&&g<i&&(g=i),b&&b<i&&(b=i),new d3_rgb(Math.min(255,r/k),Math.min(255,g/k),Math.min(255,b/k))):new d3_rgb(i,i,i)},d3_rgbPrototype.darker=function(k){return k=Math.pow(.7,arguments.length?k:1),new d3_rgb(k*this.r,k*this.g,k*this.b)},d3_rgbPrototype.hsl=function(){return d3_rgb_hsl(this.r,this.g,this.b)},d3_rgbPrototype.toString=function(){return"#"+d3_rgb_hex(this.r)+d3_rgb_hex(this.g)+d3_rgb_hex(this.b)};var d3_rgb_names=d3.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});d3_rgb_names.forEach(function(key,value){d3_rgb_names.set(key,d3_rgbNumber(value))}),d3.functor=d3_functor,d3.xhr=d3_xhrType(d3_identity),d3.dsv=function(delimiter,mimeType){function dsv(url,row,callback){arguments.length<3&&(callback=row,row=null);var xhr=d3_xhr(url,mimeType,null==row?response:typedResponse(row),callback);return xhr.row=function(_){return arguments.length?xhr.response(null==(row=_)?response:typedResponse(_)):row},xhr}function response(request){return dsv.parse(request.responseText)}function typedResponse(f){return function(request){return dsv.parse(request.responseText,f)}}function formatRow(row){return row.map(formatValue).join(delimiter)}function formatValue(text){return reFormat.test(text)?'"'+text.replace(/\"/g,'""')+'"':text}var reFormat=new RegExp('["'+delimiter+"\n]"),delimiterCode=delimiter.charCodeAt(0);return dsv.parse=function(text,f){var o;return dsv.parseRows(text,function(row,i){if(o)return o(row,i-1);var a=new Function("d","return {"+row.map(function(name,i){return JSON.stringify(name)+": d["+i+"]"}).join(",")+"}");o=f?function(row,i){return f(a(row),i)}:a})},dsv.parseRows=function(text,f){function token(){if(I>=N)return EOF;if(eol)return eol=!1,EOL;var j=I;if(34===text.charCodeAt(j)){for(var i=j;i++<N;)if(34===text.charCodeAt(i)){if(34!==text.charCodeAt(i+1))break;++i}I=i+2;var c=text.charCodeAt(i+1);return 13===c?(eol=!0,10===text.charCodeAt(i+2)&&++I):10===c&&(eol=!0),text.slice(j+1,i).replace(/""/g,'"')}for(;I<N;){var c=text.charCodeAt(I++),k=1;if(10===c)eol=!0;else if(13===c)eol=!0,10===text.charCodeAt(I)&&(++I,++k);else if(c!==delimiterCode)continue;return text.slice(j,I-k)}return text.slice(j)}for(var t,eol,EOL={},EOF={},rows=[],N=text.length,I=0,n=0;(t=token())!==EOF;){for(var a=[];t!==EOL&&t!==EOF;)a.push(t),t=token();f&&null==(a=f(a,n++))||rows.push(a)}return rows},dsv.format=function(rows){if(Array.isArray(rows[0]))return dsv.formatRows(rows);var fieldSet=new d3_Set,fields=[];return rows.forEach(function(row){for(var field in row)fieldSet.has(field)||fields.push(fieldSet.add(field))}),[fields.map(formatValue).join(delimiter)].concat(rows.map(function(row){return fields.map(function(field){return formatValue(row[field])}).join(delimiter)})).join("\n")},dsv.formatRows=function(rows){return rows.map(formatRow).join("\n")},dsv},d3.csv=d3.dsv(",","text/csv"),d3.tsv=d3.dsv("\t","text/tab-separated-values");var d3_timer_queueHead,d3_timer_queueTail,d3_timer_interval,d3_timer_timeout,d3_timer_frame=this[d3_vendorSymbol(this,"requestAnimationFrame")]||function(callback){setTimeout(callback,17)};d3.timer=function(){d3_timer.apply(this,arguments)},d3.timer.flush=function(){d3_timer_mark(),d3_timer_sweep()},d3.round=function(x,n){return n?Math.round(x*(n=Math.pow(10,n)))/n:Math.round(x)};var d3_formatPrefixes=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(d3_formatPrefix);d3.formatPrefix=function(value,precision){var i=0;return(value=+value)&&(value<0&&(value*=-1),precision&&(value=d3.round(value,d3_format_precision(value,precision))),i=1+Math.floor(1e-12+Math.log(value)/Math.LN10),i=Math.max(-24,Math.min(24,3*Math.floor((i-1)/3)))),d3_formatPrefixes[8+i/3]};var d3_format_re=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,d3_format_types=d3.map({b:function(x){return x.toString(2)},c:function(x){return String.fromCharCode(x)},o:function(x){return x.toString(8)},x:function(x){return x.toString(16)},X:function(x){return x.toString(16).toUpperCase()},g:function(x,p){return x.toPrecision(p)},e:function(x,p){return x.toExponential(p)},f:function(x,p){return x.toFixed(p)},r:function(x,p){return(x=d3.round(x,d3_format_precision(x,p))).toFixed(Math.max(0,Math.min(20,d3_format_precision(x*(1+1e-15),p))))}}),d3_time=d3.time={},d3_date=Date;d3_date_utc.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){d3_time_prototype.setUTCDate.apply(this._,arguments)},setDay:function(){d3_time_prototype.setUTCDay.apply(this._,arguments)},setFullYear:function(){d3_time_prototype.setUTCFullYear.apply(this._,arguments)},setHours:function(){d3_time_prototype.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){d3_time_prototype.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){d3_time_prototype.setUTCMinutes.apply(this._,arguments)},setMonth:function(){d3_time_prototype.setUTCMonth.apply(this._,arguments)},setSeconds:function(){d3_time_prototype.setUTCSeconds.apply(this._,arguments)},setTime:function(){d3_time_prototype.setTime.apply(this._,arguments)}};var d3_time_prototype=Date.prototype;d3_time.year=d3_time_interval(function(date){return date=d3_time.day(date),date.setMonth(0,1),date},function(date,offset){date.setFullYear(date.getFullYear()+offset)},function(date){return date.getFullYear()}),d3_time.years=d3_time.year.range,d3_time.years.utc=d3_time.year.utc.range,d3_time.day=d3_time_interval(function(date){var day=new d3_date(2e3,0);return day.setFullYear(date.getFullYear(),date.getMonth(),date.getDate()),day},function(date,offset){date.setDate(date.getDate()+offset)},function(date){return date.getDate()-1}),d3_time.days=d3_time.day.range,d3_time.days.utc=d3_time.day.utc.range,d3_time.dayOfYear=function(date){var year=d3_time.year(date);return Math.floor((date-year-6e4*(date.getTimezoneOffset()-year.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(day,i){i=7-i;var interval=d3_time[day]=d3_time_interval(function(date){return(date=d3_time.day(date)).setDate(date.getDate()-(date.getDay()+i)%7),date},function(date,offset){date.setDate(date.getDate()+7*Math.floor(offset))},function(date){var day=d3_time.year(date).getDay();return Math.floor((d3_time.dayOfYear(date)+(day+i)%7)/7)-(day!==i)});d3_time[day+"s"]=interval.range,d3_time[day+"s"].utc=interval.utc.range,d3_time[day+"OfYear"]=function(date){var day=d3_time.year(date).getDay();return Math.floor((d3_time.dayOfYear(date)+(day+i)%7)/7)}}),d3_time.week=d3_time.sunday,d3_time.weeks=d3_time.sunday.range,d3_time.weeks.utc=d3_time.sunday.utc.range,d3_time.weekOfYear=d3_time.sundayOfYear;var d3_time_formatPads={"-":"",_:" ",0:"0"},d3_time_numberRe=/^\s*\d+/,d3_time_percentRe=/^%/;d3.locale=function(locale){return{numberFormat:d3_locale_numberFormat(locale),timeFormat:d3_locale_timeFormat(locale)}};var d3_locale_enUS=d3.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});d3.format=d3_locale_enUS.numberFormat,d3.geo={},d3_adder.prototype={s:0,t:0,add:function(y){d3_adderSum(y,this.t,d3_adderTemp),d3_adderSum(d3_adderTemp.s,this.s,this),this.s?this.t+=d3_adderTemp.t:this.s=d3_adderTemp.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var d3_adderTemp=new d3_adder;d3.geo.stream=function(object,listener){object&&d3_geo_streamObjectType.hasOwnProperty(object.type)?d3_geo_streamObjectType[object.type](object,listener):d3_geo_streamGeometry(object,listener)};var d3_geo_streamObjectType={Feature:function(feature,listener){d3_geo_streamGeometry(feature.geometry,listener)},FeatureCollection:function(object,listener){for(var features=object.features,i=-1,n=features.length;++i<n;)d3_geo_streamGeometry(features[i].geometry,listener)}},d3_geo_streamGeometryType={Sphere:function(object,listener){listener.sphere()},Point:function(object,listener){object=object.coordinates,listener.point(object[0],object[1],object[2])},MultiPoint:function(object,listener){for(var coordinates=object.coordinates,i=-1,n=coordinates.length;++i<n;)object=coordinates[i],listener.point(object[0],object[1],object[2])},LineString:function(object,listener){d3_geo_streamLine(object.coordinates,listener,0)},MultiLineString:function(object,listener){for(var coordinates=object.coordinates,i=-1,n=coordinates.length;++i<n;)d3_geo_streamLine(coordinates[i],listener,0)},Polygon:function(object,listener){d3_geo_streamPolygon(object.coordinates,listener)},MultiPolygon:function(object,listener){for(var coordinates=object.coordinates,i=-1,n=coordinates.length;++i<n;)d3_geo_streamPolygon(coordinates[i],listener)},GeometryCollection:function(object,listener){for(var geometries=object.geometries,i=-1,n=geometries.length;++i<n;)d3_geo_streamGeometry(geometries[i],listener)}};d3.geo.area=function(object){return d3_geo_areaSum=0,d3.geo.stream(object,d3_geo_area),d3_geo_areaSum};var d3_geo_areaSum,d3_geo_areaRingSum=new d3_adder,d3_geo_area={sphere:function(){d3_geo_areaSum+=4*π},point:d3_noop,lineStart:d3_noop,lineEnd:d3_noop,polygonStart:function(){d3_geo_areaRingSum.reset(),d3_geo_area.lineStart=d3_geo_areaRingStart},polygonEnd:function(){var area=2*d3_geo_areaRingSum;d3_geo_areaSum+=area<0?4*π+area:area,d3_geo_area.lineStart=d3_geo_area.lineEnd=d3_geo_area.point=d3_noop}};d3.geo.bounds=function(){function point(λ,φ){ranges.push(range=[λ0=λ,λ1=λ]),φ<φ0&&(φ0=φ),φ>φ1&&(φ1=φ)}function linePoint(λ,φ){var p=d3_geo_cartesian([λ*d3_radians,φ*d3_radians]);if(p0){var normal=d3_geo_cartesianCross(p0,p),equatorial=[normal[1],-normal[0],0],inflection=d3_geo_cartesianCross(equatorial,normal);d3_geo_cartesianNormalize(inflection),inflection=d3_geo_spherical(inflection);var dλ=λ-λ_,s=dλ>0?1:-1,λi=inflection[0]*d3_degrees*s,antimeridian=abs(dλ)>180;if(antimeridian^(s*λ_<λi&&λi<s*λ)){var φi=inflection[1]*d3_degrees;φi>φ1&&(φ1=φi)}else if(λi=(λi+360)%360-180,antimeridian^(s*λ_<λi&&λi<s*λ)){var φi=-inflection[1]*d3_degrees;φi<φ0&&(φ0=φi)}else φ<φ0&&(φ0=φ),φ>φ1&&(φ1=φ);antimeridian?λ<λ_?angle(λ0,λ)>angle(λ0,λ1)&&(λ1=λ):angle(λ,λ1)>angle(λ0,λ1)&&(λ0=λ):λ1>=λ0?(λ<λ0&&(λ0=λ),λ>λ1&&(λ1=λ)):λ>λ_?angle(λ0,λ)>angle(λ0,λ1)&&(λ1=λ):angle(λ,λ1)>angle(λ0,λ1)&&(λ0=λ)}else point(λ,φ);p0=p,λ_=λ}function lineStart(){bound.point=linePoint}function lineEnd(){range[0]=λ0,range[1]=λ1,bound.point=point,p0=null}function ringPoint(λ,φ){if(p0){var dλ=λ-λ_;dλSum+=abs(dλ)>180?dλ+(dλ>0?360:-360):dλ}else λ__=λ,φ__=φ;d3_geo_area.point(λ,φ),linePoint(λ,φ)}function ringStart(){d3_geo_area.lineStart()}function ringEnd(){ringPoint(λ__,φ__),d3_geo_area.lineEnd(),abs(dλSum)>ε&&(λ0=-(λ1=180)),range[0]=λ0,range[1]=λ1,p0=null}function angle(λ0,λ1){return(λ1-=λ0)<0?λ1+360:λ1}function compareRanges(a,b){return a[0]-b[0]}function withinRange(x,range){return range[0]<=range[1]?range[0]<=x&&x<=range[1]:x<range[0]||range[1]<x}var λ0,φ0,λ1,φ1,λ_,λ__,φ__,p0,dλSum,ranges,range,bound={point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:function(){bound.point=ringPoint,bound.lineStart=ringStart,bound.lineEnd=ringEnd,dλSum=0,d3_geo_area.polygonStart()},polygonEnd:function(){d3_geo_area.polygonEnd(),bound.point=point,bound.lineStart=lineStart,bound.lineEnd=lineEnd,d3_geo_areaRingSum<0?(λ0=-(λ1=180),φ0=-(φ1=90)):dλSum>ε?φ1=90:dλSum<-ε&&(φ0=-90),range[0]=λ0,range[1]=λ1}};return function(feature){φ1=λ1=-(λ0=φ0=1/0),ranges=[],d3.geo.stream(feature,bound);var n=ranges.length;if(n){ranges.sort(compareRanges);for(var b,i=1,a=ranges[0],merged=[a];i<n;++i)b=ranges[i],withinRange(b[0],a)||withinRange(b[1],a)?(angle(a[0],b[1])>angle(a[0],a[1])&&(a[1]=b[1]),angle(b[0],a[1])>angle(a[0],a[1])&&(a[0]=b[0])):merged.push(a=b);for(var dλ,b,best=-1/0,n=merged.length-1,i=0,a=merged[n];i<=n;a=b,++i)b=merged[i],(dλ=angle(a[1],b[0]))>best&&(best=dλ,λ0=b[0],λ1=a[1])}return ranges=range=null,λ0===1/0||φ0===1/0?[[NaN,NaN],[NaN,NaN]]:[[λ0,φ0],[λ1,φ1]]}}(),d3.geo.centroid=function(object){d3_geo_centroidW0=d3_geo_centroidW1=d3_geo_centroidX0=d3_geo_centroidY0=d3_geo_centroidZ0=d3_geo_centroidX1=d3_geo_centroidY1=d3_geo_centroidZ1=d3_geo_centroidX2=d3_geo_centroidY2=d3_geo_centroidZ2=0,d3.geo.stream(object,d3_geo_centroid);var x=d3_geo_centroidX2,y=d3_geo_centroidY2,z=d3_geo_centroidZ2,m=x*x+y*y+z*z;return m<ε2&&(x=d3_geo_centroidX1,y=d3_geo_centroidY1,z=d3_geo_centroidZ1,d3_geo_centroidW1<ε&&(x=d3_geo_centroidX0,y=d3_geo_centroidY0,z=d3_geo_centroidZ0),(m=x*x+y*y+z*z)<ε2)?[NaN,NaN]:[Math.atan2(y,x)*d3_degrees,d3_asin(z/Math.sqrt(m))*d3_degrees]};var d3_geo_centroidW0,d3_geo_centroidW1,d3_geo_centroidX0,d3_geo_centroidY0,d3_geo_centroidZ0,d3_geo_centroidX1,d3_geo_centroidY1,d3_geo_centroidZ1,d3_geo_centroidX2,d3_geo_centroidY2,d3_geo_centroidZ2,d3_geo_centroid={sphere:d3_noop,point:d3_geo_centroidPoint,lineStart:d3_geo_centroidLineStart,lineEnd:d3_geo_centroidLineEnd,polygonStart:function(){d3_geo_centroid.lineStart=d3_geo_centroidRingStart},polygonEnd:function(){d3_geo_centroid.lineStart=d3_geo_centroidLineStart}},d3_geo_clipAntimeridian=d3_geo_clip(d3_true,d3_geo_clipAntimeridianLine,d3_geo_clipAntimeridianInterpolate,[-π,-π/2]),d3_geo_clipExtentMAX=1e9;d3.geo.clipExtent=function(){var x0,y0,x1,y1,stream,clip,clipExtent={stream:function(output){return stream&&(stream.valid=!1),stream=clip(output),stream.valid=!0,stream},extent:function(_){return arguments.length?(clip=d3_geo_clipExtent(x0=+_[0][0],y0=+_[0][1],x1=+_[1][0],y1=+_[1][1]),stream&&(stream.valid=!1,stream=null),clipExtent):[[x0,y0],[x1,y1]]}};return clipExtent.extent([[0,0],[960,500]])},(d3.geo.conicEqualArea=function(){return d3_geo_conic(d3_geo_conicEqualArea)}).raw=d3_geo_conicEqualArea,d3.geo.albers=function(){return d3.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},d3.geo.albersUsa=function(){function albersUsa(coordinates){var x=coordinates[0],y=coordinates[1];return point=null,lower48Point(x,y),point||(alaskaPoint(x,y),point)||hawaiiPoint(x,y),point}var point,lower48Point,alaskaPoint,hawaiiPoint,lower48=d3.geo.albers(),alaska=d3.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),hawaii=d3.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),pointStream={point:function(x,y){point=[x,y]}};return albersUsa.invert=function(coordinates){var k=lower48.scale(),t=lower48.translate(),x=(coordinates[0]-t[0])/k,y=(coordinates[1]-t[1])/k;return(y>=.12&&y<.234&&x>=-.425&&x<-.214?alaska:y>=.166&&y<.234&&x>=-.214&&x<-.115?hawaii:lower48).invert(coordinates)},albersUsa.stream=function(stream){var lower48Stream=lower48.stream(stream),alaskaStream=alaska.stream(stream),hawaiiStream=hawaii.stream(stream);return{point:function(x,y){lower48Stream.point(x,y),alaskaStream.point(x,y),hawaiiStream.point(x,y)},sphere:function(){lower48Stream.sphere(),alaskaStream.sphere(),hawaiiStream.sphere()},lineStart:function(){lower48Stream.lineStart(),alaskaStream.lineStart(),hawaiiStream.lineStart()},lineEnd:function(){lower48Stream.lineEnd(),alaskaStream.lineEnd(),hawaiiStream.lineEnd()},polygonStart:function(){lower48Stream.polygonStart(),alaskaStream.polygonStart(),hawaiiStream.polygonStart()},polygonEnd:function(){lower48Stream.polygonEnd(),alaskaStream.polygonEnd(),hawaiiStream.polygonEnd()}}},albersUsa.precision=function(_){return arguments.length?(lower48.precision(_),alaska.precision(_),hawaii.precision(_),albersUsa):lower48.precision()},albersUsa.scale=function(_){return arguments.length?(lower48.scale(_),alaska.scale(.35*_),hawaii.scale(_),albersUsa.translate(lower48.translate())):lower48.scale()},albersUsa.translate=function(_){if(!arguments.length)return lower48.translate();var k=lower48.scale(),x=+_[0],y=+_[1];return lower48Point=lower48.translate(_).clipExtent([[x-.455*k,y-.238*k],[x+.455*k,y+.238*k]]).stream(pointStream).point,alaskaPoint=alaska.translate([x-.307*k,y+.201*k]).clipExtent([[x-.425*k+ε,y+.12*k+ε],[x-.214*k-ε,y+.234*k-ε]]).stream(pointStream).point,hawaiiPoint=hawaii.translate([x-.205*k,y+.212*k]).clipExtent([[x-.214*k+ε,y+.166*k+ε],[x-.115*k-ε,y+.234*k-ε]]).stream(pointStream).point,albersUsa},albersUsa.scale(1070)};var d3_geo_pathAreaSum,d3_geo_pathAreaPolygon,d3_geo_pathBoundsX0,d3_geo_pathBoundsY0,d3_geo_pathBoundsX1,d3_geo_pathBoundsY1,d3_geo_pathArea={point:d3_noop,lineStart:d3_noop,lineEnd:d3_noop,polygonStart:function(){d3_geo_pathAreaPolygon=0,d3_geo_pathArea.lineStart=d3_geo_pathAreaRingStart},polygonEnd:function(){d3_geo_pathArea.lineStart=d3_geo_pathArea.lineEnd=d3_geo_pathArea.point=d3_noop,d3_geo_pathAreaSum+=abs(d3_geo_pathAreaPolygon/2)}},d3_geo_pathBounds={point:d3_geo_pathBoundsPoint,lineStart:d3_noop,lineEnd:d3_noop,polygonStart:d3_noop,polygonEnd:d3_noop},d3_geo_pathCentroid={point:d3_geo_pathCentroidPoint,lineStart:d3_geo_pathCentroidLineStart,lineEnd:d3_geo_pathCentroidLineEnd,polygonStart:function(){d3_geo_pathCentroid.lineStart=d3_geo_pathCentroidRingStart},polygonEnd:function(){d3_geo_pathCentroid.point=d3_geo_pathCentroidPoint,d3_geo_pathCentroid.lineStart=d3_geo_pathCentroidLineStart,d3_geo_pathCentroid.lineEnd=d3_geo_pathCentroidLineEnd}};d3.geo.path=function(){function path(object){return object&&("function"==typeof pointRadius&&contextStream.pointRadius(+pointRadius.apply(this,arguments)),cacheStream&&cacheStream.valid||(cacheStream=projectStream(contextStream)),d3.geo.stream(object,cacheStream)),contextStream.result()}function reset(){return cacheStream=null,path}var projection,context,projectStream,contextStream,cacheStream,pointRadius=4.5;return path.area=function(object){return d3_geo_pathAreaSum=0,d3.geo.stream(object,projectStream(d3_geo_pathArea)),d3_geo_pathAreaSum},path.centroid=function(object){return d3_geo_centroidX0=d3_geo_centroidY0=d3_geo_centroidZ0=d3_geo_centroidX1=d3_geo_centroidY1=d3_geo_centroidZ1=d3_geo_centroidX2=d3_geo_centroidY2=d3_geo_centroidZ2=0,d3.geo.stream(object,projectStream(d3_geo_pathCentroid)),d3_geo_centroidZ2?[d3_geo_centroidX2/d3_geo_centroidZ2,d3_geo_centroidY2/d3_geo_centroidZ2]:d3_geo_centroidZ1?[d3_geo_centroidX1/d3_geo_centroidZ1,d3_geo_centroidY1/d3_geo_centroidZ1]:d3_geo_centroidZ0?[d3_geo_centroidX0/d3_geo_centroidZ0,d3_geo_centroidY0/d3_geo_centroidZ0]:[NaN,NaN]},path.bounds=function(object){return d3_geo_pathBoundsX1=d3_geo_pathBoundsY1=-(d3_geo_pathBoundsX0=d3_geo_pathBoundsY0=1/0),d3.geo.stream(object,projectStream(d3_geo_pathBounds)),[[d3_geo_pathBoundsX0,d3_geo_pathBoundsY0],[d3_geo_pathBoundsX1,d3_geo_pathBoundsY1]]},path.projection=function(_){return arguments.length?(projectStream=(projection=_)?_.stream||d3_geo_pathProjectStream(_):d3_identity,reset()):projection},path.context=function(_){return arguments.length?(contextStream=null==(context=_)?new d3_geo_pathBuffer:new d3_geo_pathContext(_),"function"!=typeof pointRadius&&contextStream.pointRadius(pointRadius),reset()):context},path.pointRadius=function(_){return arguments.length?(pointRadius="function"==typeof _?_:(contextStream.pointRadius(+_),+_),path):pointRadius},path.projection(d3.geo.albersUsa()).context(null)},d3.geo.transform=function(methods){return{stream:function(stream){var transform=new d3_geo_transform(stream);for(var k in methods)transform[k]=methods[k];return transform}}},d3_geo_transform.prototype={point:function(x,y){this.stream.point(x,y)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},d3.geo.projection=d3_geo_projection,d3.geo.projectionMutator=d3_geo_projectionMutator,(d3.geo.equirectangular=function(){return d3_geo_projection(d3_geo_equirectangular)}).raw=d3_geo_equirectangular.invert=d3_geo_equirectangular,d3.geo.rotation=function(rotate){function forward(coordinates){return coordinates=rotate(coordinates[0]*d3_radians,coordinates[1]*d3_radians),coordinates[0]*=d3_degrees,coordinates[1]*=d3_degrees,coordinates}return rotate=d3_geo_rotation(rotate[0]%360*d3_radians,rotate[1]*d3_radians,rotate.length>2?rotate[2]*d3_radians:0),forward.invert=function(coordinates){return coordinates=rotate.invert(coordinates[0]*d3_radians,coordinates[1]*d3_radians),coordinates[0]*=d3_degrees,coordinates[1]*=d3_degrees,coordinates},forward},d3_geo_identityRotation.invert=d3_geo_equirectangular,d3.geo.circle=function(){function circle(){var center="function"==typeof origin?origin.apply(this,arguments):origin,rotate=d3_geo_rotation(-center[0]*d3_radians,-center[1]*d3_radians,0).invert,ring=[];return interpolate(null,null,1,{point:function(x,y){ring.push(x=rotate(x,y)),x[0]*=d3_degrees,x[1]*=d3_degrees}}),{type:"Polygon",coordinates:[ring]}}var angle,interpolate,origin=[0,0],precision=6;return circle.origin=function(x){return arguments.length?(origin=x,circle):origin},circle.angle=function(x){return arguments.length?(interpolate=d3_geo_circleInterpolate((angle=+x)*d3_radians,precision*d3_radians),circle):angle},circle.precision=function(_){return arguments.length?(interpolate=d3_geo_circleInterpolate(angle*d3_radians,(precision=+_)*d3_radians),circle):precision},circle.angle(90)},d3.geo.distance=function(a,b){var t,Δλ=(b[0]-a[0])*d3_radians,φ0=a[1]*d3_radians,φ1=b[1]*d3_radians,sinΔλ=Math.sin(Δλ),cosΔλ=Math.cos(Δλ),sinφ0=Math.sin(φ0),cosφ0=Math.cos(φ0),sinφ1=Math.sin(φ1),cosφ1=Math.cos(φ1);return Math.atan2(Math.sqrt((t=cosφ1*sinΔλ)*t+(t=cosφ0*sinφ1-sinφ0*cosφ1*cosΔλ)*t),sinφ0*sinφ1+cosφ0*cosφ1*cosΔλ)},d3.geo.graticule=function(){function graticule(){return{type:"MultiLineString",coordinates:lines()}}function lines(){return d3.range(Math.ceil(X0/DX)*DX,X1,DX).map(X).concat(d3.range(Math.ceil(Y0/DY)*DY,Y1,DY).map(Y)).concat(d3.range(Math.ceil(x0/dx)*dx,x1,dx).filter(function(x){return abs(x%DX)>ε}).map(x)).concat(d3.range(Math.ceil(y0/dy)*dy,y1,dy).filter(function(y){return abs(y%DY)>ε}).map(y))}var x1,x0,X1,X0,y1,y0,Y1,Y0,x,y,X,Y,dx=10,dy=dx,DX=90,DY=360,precision=2.5;return graticule.lines=function(){return lines().map(function(coordinates){return{type:"LineString",coordinates:coordinates}})},graticule.outline=function(){return{type:"Polygon",coordinates:[X(X0).concat(Y(Y1).slice(1),X(X1).reverse().slice(1),Y(Y0).reverse().slice(1))]}},graticule.extent=function(_){return arguments.length?graticule.majorExtent(_).minorExtent(_):graticule.minorExtent()},graticule.majorExtent=function(_){return arguments.length?(X0=+_[0][0],X1=+_[1][0],Y0=+_[0][1],Y1=+_[1][1],X0>X1&&(_=X0,X0=X1,X1=_),Y0>Y1&&(_=Y0,Y0=Y1,Y1=_),graticule.precision(precision)):[[X0,Y0],[X1,Y1]]},graticule.minorExtent=function(_){return arguments.length?(x0=+_[0][0],x1=+_[1][0],y0=+_[0][1],y1=+_[1][1],x0>x1&&(_=x0,x0=x1,x1=_),y0>y1&&(_=y0,y0=y1,y1=_),graticule.precision(precision)):[[x0,y0],[x1,y1]]},graticule.step=function(_){return arguments.length?graticule.majorStep(_).minorStep(_):graticule.minorStep()},graticule.majorStep=function(_){return arguments.length?(DX=+_[0],DY=+_[1],graticule):[DX,DY]},graticule.minorStep=function(_){return arguments.length?(dx=+_[0],dy=+_[1],graticule):[dx,dy]},graticule.precision=function(_){return arguments.length?(precision=+_,x=d3_geo_graticuleX(y0,y1,90),y=d3_geo_graticuleY(x0,x1,precision),X=d3_geo_graticuleX(Y0,Y1,90),Y=d3_geo_graticuleY(X0,X1,precision),graticule):precision},graticule.majorExtent([[-180,-90+ε],[180,90-ε]]).minorExtent([[-180,-80-ε],[180,80+ε]])},d3.geo.greatArc=function(){function greatArc(){return{type:"LineString",coordinates:[source_||source.apply(this,arguments),target_||target.apply(this,arguments)]}}var source_,target_,source=d3_source,target=d3_target;return greatArc.distance=function(){return d3.geo.distance(source_||source.apply(this,arguments),target_||target.apply(this,arguments))},greatArc.source=function(_){return arguments.length?(source=_,source_="function"==typeof _?null:_,greatArc):source},greatArc.target=function(_){return arguments.length?(target=_,target_="function"==typeof _?null:_,greatArc):target},greatArc.precision=function(){return arguments.length?greatArc:0},greatArc},d3.geo.interpolate=function(source,target){return d3_geo_interpolate(source[0]*d3_radians,source[1]*d3_radians,target[0]*d3_radians,target[1]*d3_radians)},d3.geo.length=function(object){return d3_geo_lengthSum=0,d3.geo.stream(object,d3_geo_length),d3_geo_lengthSum};var d3_geo_lengthSum,d3_geo_length={sphere:d3_noop,point:d3_noop,lineStart:d3_geo_lengthLineStart,lineEnd:d3_noop,polygonStart:d3_noop,polygonEnd:d3_noop},d3_geo_azimuthalEqualArea=d3_geo_azimuthal(function(cosλcosφ){return Math.sqrt(2/(1+cosλcosφ))},function(ρ){return 2*Math.asin(ρ/2)});(d3.geo.azimuthalEqualArea=function(){return d3_geo_projection(d3_geo_azimuthalEqualArea)}).raw=d3_geo_azimuthalEqualArea;var d3_geo_azimuthalEquidistant=d3_geo_azimuthal(function(cosλcosφ){var c=Math.acos(cosλcosφ);return c&&c/Math.sin(c)},d3_identity);(d3.geo.azimuthalEquidistant=function(){return d3_geo_projection(d3_geo_azimuthalEquidistant)}).raw=d3_geo_azimuthalEquidistant,(d3.geo.conicConformal=function(){return d3_geo_conic(d3_geo_conicConformal)}).raw=d3_geo_conicConformal,(d3.geo.conicEquidistant=function(){return d3_geo_conic(d3_geo_conicEquidistant)}).raw=d3_geo_conicEquidistant;var d3_geo_gnomonic=d3_geo_azimuthal(function(cosλcosφ){return 1/cosλcosφ},Math.atan);(d3.geo.gnomonic=function(){
return d3_geo_projection(d3_geo_gnomonic)}).raw=d3_geo_gnomonic,d3_geo_mercator.invert=function(x,y){return[x,2*Math.atan(Math.exp(y))-halfπ]},(d3.geo.mercator=function(){return d3_geo_mercatorProjection(d3_geo_mercator)}).raw=d3_geo_mercator;var d3_geo_orthographic=d3_geo_azimuthal(function(){return 1},Math.asin);(d3.geo.orthographic=function(){return d3_geo_projection(d3_geo_orthographic)}).raw=d3_geo_orthographic;var d3_geo_stereographic=d3_geo_azimuthal(function(cosλcosφ){return 1/(1+cosλcosφ)},function(ρ){return 2*Math.atan(ρ)});(d3.geo.stereographic=function(){return d3_geo_projection(d3_geo_stereographic)}).raw=d3_geo_stereographic,d3_geo_transverseMercator.invert=function(x,y){return[-y,2*Math.atan(Math.exp(x))-halfπ]},(d3.geo.transverseMercator=function(){var projection=d3_geo_mercatorProjection(d3_geo_transverseMercator),center=projection.center,rotate=projection.rotate;return projection.center=function(_){return _?center([-_[1],_[0]]):(_=center(),[_[1],-_[0]])},projection.rotate=function(_){return _?rotate([_[0],_[1],_.length>2?_[2]+90:90]):(_=rotate(),[_[0],_[1],_[2]-90])},rotate([0,0,90])}).raw=d3_geo_transverseMercator,d3.geom={},d3.geom.hull=function(vertices){function hull(data){if(data.length<3)return[];var i,fx=d3_functor(x),fy=d3_functor(y),n=data.length,points=[],flippedPoints=[];for(i=0;i<n;i++)points.push([+fx.call(this,data[i],i),+fy.call(this,data[i],i),i]);for(points.sort(d3_geom_hullOrder),i=0;i<n;i++)flippedPoints.push([points[i][0],-points[i][1]]);var upper=d3_geom_hullUpper(points),lower=d3_geom_hullUpper(flippedPoints),skipLeft=lower[0]===upper[0],skipRight=lower[lower.length-1]===upper[upper.length-1],polygon=[];for(i=upper.length-1;i>=0;--i)polygon.push(data[points[upper[i]][2]]);for(i=+skipLeft;i<lower.length-skipRight;++i)polygon.push(data[points[lower[i]][2]]);return polygon}var x=d3_geom_pointX,y=d3_geom_pointY;return arguments.length?hull(vertices):(hull.x=function(_){return arguments.length?(x=_,hull):x},hull.y=function(_){return arguments.length?(y=_,hull):y},hull)},d3.geom.polygon=function(coordinates){return d3_subclass(coordinates,d3_geom_polygonPrototype),coordinates};var d3_geom_polygonPrototype=d3.geom.polygon.prototype=[];d3_geom_polygonPrototype.area=function(){for(var a,i=-1,n=this.length,b=this[n-1],area=0;++i<n;)a=b,b=this[i],area+=a[1]*b[0]-a[0]*b[1];return.5*area},d3_geom_polygonPrototype.centroid=function(k){var a,c,i=-1,n=this.length,x=0,y=0,b=this[n-1];for(arguments.length||(k=-1/(6*this.area()));++i<n;)a=b,b=this[i],c=a[0]*b[1]-b[0]*a[1],x+=(a[0]+b[0])*c,y+=(a[1]+b[1])*c;return[x*k,y*k]},d3_geom_polygonPrototype.clip=function(subject){for(var input,j,m,b,c,d,closed=d3_geom_polygonClosed(subject),i=-1,n=this.length-d3_geom_polygonClosed(this),a=this[n-1];++i<n;){for(input=subject.slice(),subject.length=0,b=this[i],c=input[(m=input.length-closed)-1],j=-1;++j<m;)d=input[j],d3_geom_polygonInside(d,a,b)?(d3_geom_polygonInside(c,a,b)||subject.push(d3_geom_polygonIntersect(c,d,a,b)),subject.push(d)):d3_geom_polygonInside(c,a,b)&&subject.push(d3_geom_polygonIntersect(c,d,a,b)),c=d;closed&&subject.push(subject[0]),a=b}return subject};var d3_geom_voronoiEdges,d3_geom_voronoiCells,d3_geom_voronoiBeaches,d3_geom_voronoiFirstCircle,d3_geom_voronoiCircles,d3_geom_voronoiBeachPool=[],d3_geom_voronoiCirclePool=[];d3_geom_voronoiCell.prototype.prepare=function(){for(var edge,halfEdges=this.edges,iHalfEdge=halfEdges.length;iHalfEdge--;)edge=halfEdges[iHalfEdge].edge,edge.b&&edge.a||halfEdges.splice(iHalfEdge,1);return halfEdges.sort(d3_geom_voronoiHalfEdgeOrder),halfEdges.length},d3_geom_voronoiHalfEdge.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},d3_geom_voronoiRedBlackTree.prototype={insert:function(after,node){var parent,grandpa,uncle;if(after){if(node.P=after,node.N=after.N,after.N&&(after.N.P=node),after.N=node,after.R){for(after=after.R;after.L;)after=after.L;after.L=node}else after.R=node;parent=after}else this._?(after=d3_geom_voronoiRedBlackFirst(this._),node.P=null,node.N=after,after.P=after.L=node,parent=after):(node.P=node.N=null,this._=node,parent=null);for(node.L=node.R=null,node.U=parent,node.C=!0,after=node;parent&&parent.C;)grandpa=parent.U,parent===grandpa.L?(uncle=grandpa.R,uncle&&uncle.C?(parent.C=uncle.C=!1,grandpa.C=!0,after=grandpa):(after===parent.R&&(d3_geom_voronoiRedBlackRotateLeft(this,parent),after=parent,parent=after.U),parent.C=!1,grandpa.C=!0,d3_geom_voronoiRedBlackRotateRight(this,grandpa))):(uncle=grandpa.L,uncle&&uncle.C?(parent.C=uncle.C=!1,grandpa.C=!0,after=grandpa):(after===parent.L&&(d3_geom_voronoiRedBlackRotateRight(this,parent),after=parent,parent=after.U),parent.C=!1,grandpa.C=!0,d3_geom_voronoiRedBlackRotateLeft(this,grandpa))),parent=after.U;this._.C=!1},remove:function(node){node.N&&(node.N.P=node.P),node.P&&(node.P.N=node.N),node.N=node.P=null;var sibling,next,red,parent=node.U,left=node.L,right=node.R;if(next=left?right?d3_geom_voronoiRedBlackFirst(right):left:right,parent?parent.L===node?parent.L=next:parent.R=next:this._=next,left&&right?(red=next.C,next.C=node.C,next.L=left,left.U=next,next!==right?(parent=next.U,next.U=node.U,node=next.R,parent.L=node,next.R=right,right.U=next):(next.U=parent,parent=next,node=next.R)):(red=node.C,node=next),node&&(node.U=parent),!red){if(node&&node.C)return void(node.C=!1);do{if(node===this._)break;if(node===parent.L){if(sibling=parent.R,sibling.C&&(sibling.C=!1,parent.C=!0,d3_geom_voronoiRedBlackRotateLeft(this,parent),sibling=parent.R),sibling.L&&sibling.L.C||sibling.R&&sibling.R.C){sibling.R&&sibling.R.C||(sibling.L.C=!1,sibling.C=!0,d3_geom_voronoiRedBlackRotateRight(this,sibling),sibling=parent.R),sibling.C=parent.C,parent.C=sibling.R.C=!1,d3_geom_voronoiRedBlackRotateLeft(this,parent),node=this._;break}}else if(sibling=parent.L,sibling.C&&(sibling.C=!1,parent.C=!0,d3_geom_voronoiRedBlackRotateRight(this,parent),sibling=parent.L),sibling.L&&sibling.L.C||sibling.R&&sibling.R.C){sibling.L&&sibling.L.C||(sibling.R.C=!1,sibling.C=!0,d3_geom_voronoiRedBlackRotateLeft(this,sibling),sibling=parent.L),sibling.C=parent.C,parent.C=sibling.L.C=!1,d3_geom_voronoiRedBlackRotateRight(this,parent),node=this._;break}sibling.C=!0,node=parent,parent=parent.U}while(!node.C);node&&(node.C=!1)}}},d3.geom.voronoi=function(points){function voronoi(data){var polygons=new Array(data.length),x0=clipExtent[0][0],y0=clipExtent[0][1],x1=clipExtent[1][0],y1=clipExtent[1][1];return d3_geom_voronoi(sites(data),clipExtent).cells.forEach(function(cell,i){var edges=cell.edges,site=cell.site;(polygons[i]=edges.length?edges.map(function(e){var s=e.start();return[s.x,s.y]}):site.x>=x0&&site.x<=x1&&site.y>=y0&&site.y<=y1?[[x0,y1],[x1,y1],[x1,y0],[x0,y0]]:[]).point=data[i]}),polygons}function sites(data){return data.map(function(d,i){return{x:Math.round(fx(d,i)/ε)*ε,y:Math.round(fy(d,i)/ε)*ε,i:i}})}var x=d3_geom_pointX,y=d3_geom_pointY,fx=x,fy=y,clipExtent=d3_geom_voronoiClipExtent;return points?voronoi(points):(voronoi.links=function(data){return d3_geom_voronoi(sites(data)).edges.filter(function(edge){return edge.l&&edge.r}).map(function(edge){return{source:data[edge.l.i],target:data[edge.r.i]}})},voronoi.triangles=function(data){var triangles=[];return d3_geom_voronoi(sites(data)).cells.forEach(function(cell,i){for(var s0,site=cell.site,edges=cell.edges.sort(d3_geom_voronoiHalfEdgeOrder),j=-1,m=edges.length,e1=edges[m-1].edge,s1=e1.l===site?e1.r:e1.l;++j<m;)e1,s0=s1,e1=edges[j].edge,s1=e1.l===site?e1.r:e1.l,i<s0.i&&i<s1.i&&d3_geom_voronoiTriangleArea(site,s0,s1)<0&&triangles.push([data[i],data[s0.i],data[s1.i]])}),triangles},voronoi.x=function(_){return arguments.length?(fx=d3_functor(x=_),voronoi):x},voronoi.y=function(_){return arguments.length?(fy=d3_functor(y=_),voronoi):y},voronoi.clipExtent=function(_){return arguments.length?(clipExtent=null==_?d3_geom_voronoiClipExtent:_,voronoi):clipExtent===d3_geom_voronoiClipExtent?null:clipExtent},voronoi.size=function(_){return arguments.length?voronoi.clipExtent(_&&[[0,0],_]):clipExtent===d3_geom_voronoiClipExtent?null:clipExtent&&clipExtent[1]},voronoi)};var d3_geom_voronoiClipExtent=[[-1e6,-1e6],[1e6,1e6]];d3.geom.delaunay=function(vertices){return d3.geom.voronoi().triangles(vertices)},d3.geom.quadtree=function(points,x1,y1,x2,y2){function quadtree(data){function insert(n,d,x,y,x1,y1,x2,y2){if(!isNaN(x)&&!isNaN(y))if(n.leaf){var nx=n.x,ny=n.y;if(null!=nx)if(abs(nx-x)+abs(ny-y)<.01)insertChild(n,d,x,y,x1,y1,x2,y2);else{var nPoint=n.point;n.x=n.y=n.point=null,insertChild(n,nPoint,nx,ny,x1,y1,x2,y2),insertChild(n,d,x,y,x1,y1,x2,y2)}else n.x=x,n.y=y,n.point=d}else insertChild(n,d,x,y,x1,y1,x2,y2)}function insertChild(n,d,x,y,x1,y1,x2,y2){var xm=.5*(x1+x2),ym=.5*(y1+y2),right=x>=xm,below=y>=ym,i=below<<1|right;n.leaf=!1,n=n.nodes[i]||(n.nodes[i]=d3_geom_quadtreeNode()),right?x1=xm:x2=xm,below?y1=ym:y2=ym,insert(n,d,x,y,x1,y1,x2,y2)}var d,xs,ys,i,n,x1_,y1_,x2_,y2_,fx=d3_functor(x),fy=d3_functor(y);if(null!=x1)x1_=x1,y1_=y1,x2_=x2,y2_=y2;else if(x2_=y2_=-(x1_=y1_=1/0),xs=[],ys=[],n=data.length,compat)for(i=0;i<n;++i)d=data[i],d.x<x1_&&(x1_=d.x),d.y<y1_&&(y1_=d.y),d.x>x2_&&(x2_=d.x),d.y>y2_&&(y2_=d.y),xs.push(d.x),ys.push(d.y);else for(i=0;i<n;++i){var x_=+fx(d=data[i],i),y_=+fy(d,i);x_<x1_&&(x1_=x_),y_<y1_&&(y1_=y_),x_>x2_&&(x2_=x_),y_>y2_&&(y2_=y_),xs.push(x_),ys.push(y_)}var dx=x2_-x1_,dy=y2_-y1_;dx>dy?y2_=y1_+dx:x2_=x1_+dy;var root=d3_geom_quadtreeNode();if(root.add=function(d){insert(root,d,+fx(d,++i),+fy(d,i),x1_,y1_,x2_,y2_)},root.visit=function(f){d3_geom_quadtreeVisit(f,root,x1_,y1_,x2_,y2_)},root.find=function(point){return d3_geom_quadtreeFind(root,point[0],point[1],x1_,y1_,x2_,y2_)},i=-1,null==x1){for(;++i<n;)insert(root,data[i],xs[i],ys[i],x1_,y1_,x2_,y2_);--i}else data.forEach(root.add);return xs=ys=data=d=null,root}var compat,x=d3_geom_pointX,y=d3_geom_pointY;return(compat=arguments.length)?(x=d3_geom_quadtreeCompatX,y=d3_geom_quadtreeCompatY,3===compat&&(y2=y1,x2=x1,y1=x1=0),quadtree(points)):(quadtree.x=function(_){return arguments.length?(x=_,quadtree):x},quadtree.y=function(_){return arguments.length?(y=_,quadtree):y},quadtree.extent=function(_){return arguments.length?(null==_?x1=y1=x2=y2=null:(x1=+_[0][0],y1=+_[0][1],x2=+_[1][0],y2=+_[1][1]),quadtree):null==x1?null:[[x1,y1],[x2,y2]]},quadtree.size=function(_){return arguments.length?(null==_?x1=y1=x2=y2=null:(x1=y1=0,x2=+_[0],y2=+_[1]),quadtree):null==x1?null:[x2-x1,y2-y1]},quadtree)},d3.interpolateRgb=d3_interpolateRgb,d3.interpolateObject=d3_interpolateObject,d3.interpolateNumber=d3_interpolateNumber,d3.interpolateString=d3_interpolateString;var d3_interpolate_numberA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,d3_interpolate_numberB=new RegExp(d3_interpolate_numberA.source,"g");d3.interpolate=d3_interpolate,d3.interpolators=[function(a,b){var t=typeof b;return("string"===t?d3_rgb_names.has(b.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(b)?d3_interpolateRgb:d3_interpolateString:b instanceof d3_color?d3_interpolateRgb:Array.isArray(b)?d3_interpolateArray:"object"===t&&isNaN(b)?d3_interpolateObject:d3_interpolateNumber)(a,b)}],d3.interpolateArray=d3_interpolateArray;var d3_ease_default=function(){return d3_identity},d3_ease=d3.map({linear:d3_ease_default,poly:d3_ease_poly,quad:function(){return d3_ease_quad},cubic:function(){return d3_ease_cubic},sin:function(){return d3_ease_sin},exp:function(){return d3_ease_exp},circle:function(){return d3_ease_circle},elastic:d3_ease_elastic,back:d3_ease_back,bounce:function(){return d3_ease_bounce}}),d3_ease_mode=d3.map({in:d3_identity,out:d3_ease_reverse,"in-out":d3_ease_reflect,"out-in":function(f){return d3_ease_reflect(d3_ease_reverse(f))}});d3.ease=function(name){var i=name.indexOf("-"),t=i>=0?name.slice(0,i):name,m=i>=0?name.slice(i+1):"in";return t=d3_ease.get(t)||d3_ease_default,m=d3_ease_mode.get(m)||d3_identity,d3_ease_clamp(m(t.apply(null,d3_arraySlice.call(arguments,1))))},d3.interpolateHcl=d3_interpolateHcl,d3.interpolateHsl=d3_interpolateHsl,d3.interpolateLab=d3_interpolateLab,d3.interpolateRound=d3_interpolateRound,d3.transform=function(string){var g=d3_document.createElementNS(d3.ns.prefix.svg,"g");return(d3.transform=function(string){if(null!=string){g.setAttribute("transform",string);var t=g.transform.baseVal.consolidate()}return new d3_transform(t?t.matrix:d3_transformIdentity)})(string)},d3_transform.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var d3_transformIdentity={a:1,b:0,c:0,d:1,e:0,f:0};d3.interpolateTransform=d3_interpolateTransform,d3.layout={},d3.layout.bundle=function(){return function(links){for(var paths=[],i=-1,n=links.length;++i<n;)paths.push(d3_layout_bundlePath(links[i]));return paths}},d3.layout.chord=function(){function relayout(){var k,x,x0,i,j,subgroups={},groupSums=[],groupIndex=d3.range(n),subgroupIndex=[];for(chords=[],groups=[],k=0,i=-1;++i<n;){for(x=0,j=-1;++j<n;)x+=matrix[i][j];groupSums.push(x),subgroupIndex.push(d3.range(n)),k+=x}for(sortGroups&&groupIndex.sort(function(a,b){return sortGroups(groupSums[a],groupSums[b])}),sortSubgroups&&subgroupIndex.forEach(function(d,i){d.sort(function(a,b){return sortSubgroups(matrix[i][a],matrix[i][b])})}),k=(τ-padding*n)/k,x=0,i=-1;++i<n;){for(x0=x,j=-1;++j<n;){var di=groupIndex[i],dj=subgroupIndex[di][j],v=matrix[di][dj],a0=x,a1=x+=v*k;subgroups[di+"-"+dj]={index:di,subindex:dj,startAngle:a0,endAngle:a1,value:v}}groups[di]={index:di,startAngle:x0,endAngle:x,value:groupSums[di]},x+=padding}for(i=-1;++i<n;)for(j=i-1;++j<n;){var source=subgroups[i+"-"+j],target=subgroups[j+"-"+i];(source.value||target.value)&&chords.push(source.value<target.value?{source:target,target:source}:{source:source,target:target})}sortChords&&resort()}function resort(){chords.sort(function(a,b){return sortChords((a.source.value+a.target.value)/2,(b.source.value+b.target.value)/2)})}var chords,groups,matrix,n,sortGroups,sortSubgroups,sortChords,chord={},padding=0;return chord.matrix=function(x){return arguments.length?(n=(matrix=x)&&matrix.length,chords=groups=null,chord):matrix},chord.padding=function(x){return arguments.length?(padding=x,chords=groups=null,chord):padding},chord.sortGroups=function(x){return arguments.length?(sortGroups=x,chords=groups=null,chord):sortGroups},chord.sortSubgroups=function(x){return arguments.length?(sortSubgroups=x,chords=null,chord):sortSubgroups},chord.sortChords=function(x){return arguments.length?(sortChords=x,chords&&resort(),chord):sortChords},chord.chords=function(){return chords||relayout(),chords},chord.groups=function(){return groups||relayout(),groups},chord},d3.layout.force=function(){function repulse(node){return function(quad,x1,_,x2){if(quad.point!==node){var dx=quad.cx-node.x,dy=quad.cy-node.y,dw=x2-x1,dn=dx*dx+dy*dy;if(dw*dw/theta2<dn){if(dn<chargeDistance2){var k=quad.charge/dn;node.px-=dx*k,node.py-=dy*k}return!0}if(quad.point&&dn&&dn<chargeDistance2){var k=quad.pointCharge/dn;node.px-=dx*k,node.py-=dy*k}}return!quad.charge}}function dragmove(d){d.px=d3.event.x,d.py=d3.event.y,force.resume()}var timer,drag,alpha,distances,strengths,charges,force={},event=d3.dispatch("start","tick","end"),size=[1,1],friction=.9,linkDistance=d3_layout_forceLinkDistance,linkStrength=d3_layout_forceLinkStrength,charge=-30,chargeDistance2=d3_layout_forceChargeDistance2,gravity=.1,theta2=.64,nodes=[],links=[];return force.tick=function(){if((alpha*=.99)<.005)return timer=null,event.end({type:"end",alpha:alpha=0}),!0;var q,i,o,s,t,l,k,x,y,n=nodes.length,m=links.length;for(i=0;i<m;++i)o=links[i],s=o.source,t=o.target,x=t.x-s.x,y=t.y-s.y,(l=x*x+y*y)&&(l=alpha*strengths[i]*((l=Math.sqrt(l))-distances[i])/l,x*=l,y*=l,t.x-=x*(k=s.weight+t.weight?s.weight/(s.weight+t.weight):.5),t.y-=y*k,s.x+=x*(k=1-k),s.y+=y*k);if((k=alpha*gravity)&&(x=size[0]/2,y=size[1]/2,i=-1,k))for(;++i<n;)o=nodes[i],o.x+=(x-o.x)*k,o.y+=(y-o.y)*k;if(charge)for(d3_layout_forceAccumulate(q=d3.geom.quadtree(nodes),alpha,charges),i=-1;++i<n;)(o=nodes[i]).fixed||q.visit(repulse(o));for(i=-1;++i<n;)o=nodes[i],o.fixed?(o.x=o.px,o.y=o.py):(o.x-=(o.px-(o.px=o.x))*friction,o.y-=(o.py-(o.py=o.y))*friction);event.tick({type:"tick",alpha:alpha})},force.nodes=function(x){return arguments.length?(nodes=x,force):nodes},force.links=function(x){return arguments.length?(links=x,force):links},force.size=function(x){return arguments.length?(size=x,force):size},force.linkDistance=function(x){return arguments.length?(linkDistance="function"==typeof x?x:+x,force):linkDistance},force.distance=force.linkDistance,force.linkStrength=function(x){return arguments.length?(linkStrength="function"==typeof x?x:+x,force):linkStrength},force.friction=function(x){return arguments.length?(friction=+x,force):friction},force.charge=function(x){return arguments.length?(charge="function"==typeof x?x:+x,force):charge},force.chargeDistance=function(x){return arguments.length?(chargeDistance2=x*x,force):Math.sqrt(chargeDistance2)},force.gravity=function(x){return arguments.length?(gravity=+x,force):gravity},force.theta=function(x){return arguments.length?(theta2=x*x,force):Math.sqrt(theta2)},force.alpha=function(x){return arguments.length?(x=+x,alpha?x>0?alpha=x:(timer.c=null,timer.t=NaN,timer=null,event.end({type:"end",alpha:alpha=0})):x>0&&(event.start({type:"start",alpha:alpha=x}),timer=d3_timer(force.tick)),force):alpha},force.start=function(){function position(dimension,size){if(!neighbors){for(neighbors=new Array(n),j=0;j<n;++j)neighbors[j]=[];for(j=0;j<m;++j){var o=links[j];neighbors[o.source.index].push(o.target),neighbors[o.target.index].push(o.source)}}for(var x,candidates=neighbors[i],j=-1,l=candidates.length;++j<l;)if(!isNaN(x=candidates[j][dimension]))return x;return Math.random()*size}var i,neighbors,o,n=nodes.length,m=links.length,w=size[0],h=size[1];for(i=0;i<n;++i)(o=nodes[i]).index=i,o.weight=0;for(i=0;i<m;++i)o=links[i],"number"==typeof o.source&&(o.source=nodes[o.source]),"number"==typeof o.target&&(o.target=nodes[o.target]),++o.source.weight,++o.target.weight;for(i=0;i<n;++i)o=nodes[i],isNaN(o.x)&&(o.x=position("x",w)),isNaN(o.y)&&(o.y=position("y",h)),isNaN(o.px)&&(o.px=o.x),isNaN(o.py)&&(o.py=o.y);if(distances=[],"function"==typeof linkDistance)for(i=0;i<m;++i)distances[i]=+linkDistance.call(this,links[i],i);else for(i=0;i<m;++i)distances[i]=linkDistance;if(strengths=[],"function"==typeof linkStrength)for(i=0;i<m;++i)strengths[i]=+linkStrength.call(this,links[i],i);else for(i=0;i<m;++i)strengths[i]=linkStrength;if(charges=[],"function"==typeof charge)for(i=0;i<n;++i)charges[i]=+charge.call(this,nodes[i],i);else for(i=0;i<n;++i)charges[i]=charge;return force.resume()},force.resume=function(){return force.alpha(.1)},force.stop=function(){return force.alpha(0)},force.drag=function(){if(drag||(drag=d3.behavior.drag().origin(d3_identity).on("dragstart.force",d3_layout_forceDragstart).on("drag.force",dragmove).on("dragend.force",d3_layout_forceDragend)),!arguments.length)return drag;this.on("mouseover.force",d3_layout_forceMouseover).on("mouseout.force",d3_layout_forceMouseout).call(drag)},d3.rebind(force,event,"on")};var d3_layout_forceLinkDistance=20,d3_layout_forceLinkStrength=1,d3_layout_forceChargeDistance2=1/0;d3.layout.hierarchy=function(){function hierarchy(root){var node,stack=[root],nodes=[];for(root.depth=0;null!=(node=stack.pop());)if(nodes.push(node),(childs=children.call(hierarchy,node,node.depth))&&(n=childs.length)){for(var n,childs,child;--n>=0;)stack.push(child=childs[n]),child.parent=node,child.depth=node.depth+1;value&&(node.value=0),node.children=childs}else value&&(node.value=+value.call(hierarchy,node,node.depth)||0),delete node.children;return d3_layout_hierarchyVisitAfter(root,function(node){var childs,parent;sort&&(childs=node.children)&&childs.sort(sort),value&&(parent=node.parent)&&(parent.value+=node.value)}),nodes}var sort=d3_layout_hierarchySort,children=d3_layout_hierarchyChildren,value=d3_layout_hierarchyValue;return hierarchy.sort=function(x){return arguments.length?(sort=x,hierarchy):sort},hierarchy.children=function(x){return arguments.length?(children=x,hierarchy):children},hierarchy.value=function(x){return arguments.length?(value=x,hierarchy):value},hierarchy.revalue=function(root){return value&&(d3_layout_hierarchyVisitBefore(root,function(node){node.children&&(node.value=0)}),d3_layout_hierarchyVisitAfter(root,function(node){var parent;node.children||(node.value=+value.call(hierarchy,node,node.depth)||0),(parent=node.parent)&&(parent.value+=node.value)})),root},hierarchy},d3.layout.partition=function(){function position(node,x,dx,dy){var children=node.children;if(node.x=x,node.y=node.depth*dy,node.dx=dx,node.dy=dy,children&&(n=children.length)){var n,c,d,i=-1;for(dx=node.value?dx/node.value:0;++i<n;)position(c=children[i],x,d=c.value*dx,dy),x+=d}}function depth(node){var children=node.children,d=0;if(children&&(n=children.length))for(var n,i=-1;++i<n;)d=Math.max(d,depth(children[i]));return 1+d}function partition(d,i){var nodes=hierarchy.call(this,d,i);return position(nodes[0],0,size[0],size[1]/depth(nodes[0])),nodes}var hierarchy=d3.layout.hierarchy(),size=[1,1];return partition.size=function(x){return arguments.length?(size=x,partition):size},d3_layout_hierarchyRebind(partition,hierarchy)},d3.layout.pie=function(){function pie(data){var v,n=data.length,values=data.map(function(d,i){return+value.call(pie,d,i)}),a=+("function"==typeof startAngle?startAngle.apply(this,arguments):startAngle),da=("function"==typeof endAngle?endAngle.apply(this,arguments):endAngle)-a,p=Math.min(Math.abs(da)/n,+("function"==typeof padAngle?padAngle.apply(this,arguments):padAngle)),pa=p*(da<0?-1:1),sum=d3.sum(values),k=sum?(da-n*pa)/sum:0,index=d3.range(n),arcs=[];return null!=sort&&index.sort(sort===d3_layout_pieSortByValue?function(i,j){return values[j]-values[i]}:function(i,j){return sort(data[i],data[j])}),index.forEach(function(i){arcs[i]={data:data[i],value:v=values[i],startAngle:a,endAngle:a+=v*k+pa,padAngle:p}}),arcs}var value=Number,sort=d3_layout_pieSortByValue,startAngle=0,endAngle=τ,padAngle=0;return pie.value=function(_){return arguments.length?(value=_,pie):value},pie.sort=function(_){return arguments.length?(sort=_,pie):sort},pie.startAngle=function(_){return arguments.length?(startAngle=_,pie):startAngle},pie.endAngle=function(_){return arguments.length?(endAngle=_,pie):endAngle},pie.padAngle=function(_){return arguments.length?(padAngle=_,pie):padAngle},pie};var d3_layout_pieSortByValue={};d3.layout.stack=function(){function stack(data,index){if(!(n=data.length))return data;var series=data.map(function(d,i){return values.call(stack,d,i)}),points=series.map(function(d){return d.map(function(v,i){return[x.call(stack,v,i),y.call(stack,v,i)]})}),orders=order.call(stack,points,index);series=d3.permute(series,orders),points=d3.permute(points,orders);var n,i,j,o,offsets=offset.call(stack,points,index),m=series[0].length;for(j=0;j<m;++j)for(out.call(stack,series[0][j],o=offsets[j],points[0][j][1]),i=1;i<n;++i)out.call(stack,series[i][j],o+=points[i-1][j][1],points[i][j][1]);return data}var values=d3_identity,order=d3_layout_stackOrderDefault,offset=d3_layout_stackOffsetZero,out=d3_layout_stackOut,x=d3_layout_stackX,y=d3_layout_stackY;return stack.values=function(x){return arguments.length?(values=x,stack):values},stack.order=function(x){return arguments.length?(order="function"==typeof x?x:d3_layout_stackOrders.get(x)||d3_layout_stackOrderDefault,stack):order},stack.offset=function(x){return arguments.length?(offset="function"==typeof x?x:d3_layout_stackOffsets.get(x)||d3_layout_stackOffsetZero,stack):offset},stack.x=function(z){return arguments.length?(x=z,stack):x},stack.y=function(z){return arguments.length?(y=z,stack):y},stack.out=function(z){return arguments.length?(out=z,stack):out},stack};var d3_layout_stackOrders=d3.map({"inside-out":function(data){var i,j,n=data.length,max=data.map(d3_layout_stackMaxIndex),sums=data.map(d3_layout_stackReduceSum),index=d3.range(n).sort(function(a,b){return max[a]-max[b]}),top=0,bottom=0,tops=[],bottoms=[];for(i=0;i<n;++i)j=index[i],top<bottom?(top+=sums[j],tops.push(j)):(bottom+=sums[j],bottoms.push(j));return bottoms.reverse().concat(tops)},reverse:function(data){return d3.range(data.length).reverse()},default:d3_layout_stackOrderDefault}),d3_layout_stackOffsets=d3.map({silhouette:function(data){var i,j,o,n=data.length,m=data[0].length,sums=[],max=0,y0=[];for(j=0;j<m;++j){for(i=0,o=0;i<n;i++)o+=data[i][j][1];o>max&&(max=o),sums.push(o)}for(j=0;j<m;++j)y0[j]=(max-sums[j])/2;return y0},wiggle:function(data){var i,j,k,s1,s2,s3,dx,o,o0,n=data.length,x=data[0],m=x.length,y0=[];for(y0[0]=o=o0=0,j=1;j<m;++j){for(i=0,s1=0;i<n;++i)s1+=data[i][j][1];for(i=0,s2=0,dx=x[j][0]-x[j-1][0];i<n;++i){for(k=0,s3=(data[i][j][1]-data[i][j-1][1])/(2*dx);k<i;++k)s3+=(data[k][j][1]-data[k][j-1][1])/dx;s2+=s3*data[i][j][1]}y0[j]=o-=s1?s2/s1*dx:0,o<o0&&(o0=o)}for(j=0;j<m;++j)y0[j]-=o0;return y0},expand:function(data){var i,j,o,n=data.length,m=data[0].length,k=1/n,y0=[];for(j=0;j<m;++j){for(i=0,o=0;i<n;i++)o+=data[i][j][1];if(o)for(i=0;i<n;i++)data[i][j][1]/=o;else for(i=0;i<n;i++)data[i][j][1]=k}for(j=0;j<m;++j)y0[j]=0;return y0},zero:d3_layout_stackOffsetZero});d3.layout.histogram=function(){function histogram(data,i){for(var bin,x,bins=[],values=data.map(valuer,this),range=ranger.call(this,values,i),thresholds=binner.call(this,range,values,i),i=-1,n=values.length,m=thresholds.length-1,k=frequency?1:1/n;++i<m;)bin=bins[i]=[],bin.dx=thresholds[i+1]-(bin.x=thresholds[i]),bin.y=0;if(m>0)for(i=-1;++i<n;)(x=values[i])>=range[0]&&x<=range[1]&&(bin=bins[d3.bisect(thresholds,x,1,m)-1],bin.y+=k,bin.push(data[i]));return bins}var frequency=!0,valuer=Number,ranger=d3_layout_histogramRange,binner=d3_layout_histogramBinSturges;return histogram.value=function(x){return arguments.length?(valuer=x,histogram):valuer},histogram.range=function(x){return arguments.length?(ranger=d3_functor(x),histogram):ranger},histogram.bins=function(x){return arguments.length?(binner="number"==typeof x?function(range){return d3_layout_histogramBinFixed(range,x)}:d3_functor(x),histogram):binner},histogram.frequency=function(x){return arguments.length?(frequency=!!x,histogram):frequency},histogram},d3.layout.pack=function(){function pack(d,i){var nodes=hierarchy.call(this,d,i),root=nodes[0],w=size[0],h=size[1],r=null==radius?Math.sqrt:"function"==typeof radius?radius:function(){return radius};if(root.x=root.y=0,d3_layout_hierarchyVisitAfter(root,function(d){d.r=+r(d.value)}),d3_layout_hierarchyVisitAfter(root,d3_layout_packSiblings),padding){var dr=padding*(radius?1:Math.max(2*root.r/w,2*root.r/h))/2;d3_layout_hierarchyVisitAfter(root,function(d){d.r+=dr}),d3_layout_hierarchyVisitAfter(root,d3_layout_packSiblings),d3_layout_hierarchyVisitAfter(root,function(d){d.r-=dr})}return d3_layout_packTransform(root,w/2,h/2,radius?1:1/Math.max(2*root.r/w,2*root.r/h)),nodes}var radius,hierarchy=d3.layout.hierarchy().sort(d3_layout_packSort),padding=0,size=[1,1];return pack.size=function(_){return arguments.length?(size=_,pack):size},pack.radius=function(_){return arguments.length?(radius=null==_||"function"==typeof _?_:+_,pack):radius},pack.padding=function(_){return arguments.length?(padding=+_,pack):padding},d3_layout_hierarchyRebind(pack,hierarchy)},d3.layout.tree=function(){function tree(d,i){var nodes=hierarchy.call(this,d,i),root0=nodes[0],root1=wrapTree(root0);if(d3_layout_hierarchyVisitAfter(root1,firstWalk),root1.parent.m=-root1.z,d3_layout_hierarchyVisitBefore(root1,secondWalk),nodeSize)d3_layout_hierarchyVisitBefore(root0,sizeNode);else{var left=root0,right=root0,bottom=root0;d3_layout_hierarchyVisitBefore(root0,function(node){node.x<left.x&&(left=node),node.x>right.x&&(right=node),node.depth>bottom.depth&&(bottom=node)});var tx=separation(left,right)/2-left.x,kx=size[0]/(right.x+separation(right,left)/2+tx),ky=size[1]/(bottom.depth||1);d3_layout_hierarchyVisitBefore(root0,function(node){node.x=(node.x+tx)*kx,node.y=node.depth*ky})}return nodes}function wrapTree(root0){for(var node1,root1={A:null,children:[root0]},queue=[root1];null!=(node1=queue.pop());)for(var child,children=node1.children,i=0,n=children.length;i<n;++i)queue.push((children[i]=child={_:children[i],parent:node1,children:(child=children[i].children)&&child.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:i}).a=child);return root1.children[0]}function firstWalk(v){var children=v.children,siblings=v.parent.children,w=v.i?siblings[v.i-1]:null;if(children.length){d3_layout_treeShift(v);var midpoint=(children[0].z+children[children.length-1].z)/2;w?(v.z=w.z+separation(v._,w._),v.m=v.z-midpoint):v.z=midpoint}else w&&(v.z=w.z+separation(v._,w._));v.parent.A=apportion(v,w,v.parent.A||siblings[0])}function secondWalk(v){v._.x=v.z+v.parent.m,v.m+=v.parent.m}function apportion(v,w,ancestor){if(w){for(var shift,vip=v,vop=v,vim=w,vom=vip.parent.children[0],sip=vip.m,sop=vop.m,sim=vim.m,som=vom.m;vim=d3_layout_treeRight(vim),vip=d3_layout_treeLeft(vip),vim&&vip;)vom=d3_layout_treeLeft(vom),vop=d3_layout_treeRight(vop),vop.a=v,shift=vim.z+sim-vip.z-sip+separation(vim._,vip._),shift>0&&(d3_layout_treeMove(d3_layout_treeAncestor(vim,v,ancestor),v,shift),sip+=shift,sop+=shift),sim+=vim.m,sip+=vip.m,som+=vom.m,sop+=vop.m;vim&&!d3_layout_treeRight(vop)&&(vop.t=vim,vop.m+=sim-sop),vip&&!d3_layout_treeLeft(vom)&&(vom.t=vip,vom.m+=sip-som,ancestor=v)}return ancestor}function sizeNode(node){node.x*=size[0],node.y=node.depth*size[1]}var hierarchy=d3.layout.hierarchy().sort(null).value(null),separation=d3_layout_treeSeparation,size=[1,1],nodeSize=null;return tree.separation=function(x){return arguments.length?(separation=x,tree):separation},tree.size=function(x){return arguments.length?(nodeSize=null==(size=x)?sizeNode:null,tree):nodeSize?null:size},tree.nodeSize=function(x){return arguments.length?(nodeSize=null==(size=x)?null:sizeNode,tree):nodeSize?size:null},d3_layout_hierarchyRebind(tree,hierarchy)},d3.layout.cluster=function(){function cluster(d,i){var previousNode,nodes=hierarchy.call(this,d,i),root=nodes[0],x=0;d3_layout_hierarchyVisitAfter(root,function(node){var children=node.children;children&&children.length?(node.x=d3_layout_clusterX(children),node.y=d3_layout_clusterY(children)):(node.x=previousNode?x+=separation(node,previousNode):0,node.y=0,previousNode=node)});var left=d3_layout_clusterLeft(root),right=d3_layout_clusterRight(root),x0=left.x-separation(left,right)/2,x1=right.x+separation(right,left)/2;return d3_layout_hierarchyVisitAfter(root,nodeSize?function(node){node.x=(node.x-root.x)*size[0],node.y=(root.y-node.y)*size[1]}:function(node){node.x=(node.x-x0)/(x1-x0)*size[0],node.y=(1-(root.y?node.y/root.y:1))*size[1]}),nodes}var hierarchy=d3.layout.hierarchy().sort(null).value(null),separation=d3_layout_treeSeparation,size=[1,1],nodeSize=!1;return cluster.separation=function(x){return arguments.length?(separation=x,cluster):separation},cluster.size=function(x){return arguments.length?(nodeSize=null==(size=x),cluster):nodeSize?null:size},cluster.nodeSize=function(x){return arguments.length?(nodeSize=null!=(size=x),cluster):nodeSize?size:null},d3_layout_hierarchyRebind(cluster,hierarchy)},d3.layout.treemap=function(){function scale(children,k){for(var child,area,i=-1,n=children.length;++i<n;)area=(child=children[i]).value*(k<0?0:k),child.area=isNaN(area)||area<=0?0:area}function squarify(node){var children=node.children;if(children&&children.length){var child,score,n,rect=pad(node),row=[],remaining=children.slice(),best=1/0,u="slice"===mode?rect.dx:"dice"===mode?rect.dy:"slice-dice"===mode?1&node.depth?rect.dy:rect.dx:Math.min(rect.dx,rect.dy);for(scale(remaining,rect.dx*rect.dy/node.value),row.area=0;(n=remaining.length)>0;)row.push(child=remaining[n-1]),row.area+=child.area,"squarify"!==mode||(score=worst(row,u))<=best?(remaining.pop(),best=score):(row.area-=row.pop().area,position(row,u,rect,!1),u=Math.min(rect.dx,rect.dy),row.length=row.area=0,
best=1/0);row.length&&(position(row,u,rect,!0),row.length=row.area=0),children.forEach(squarify)}}function stickify(node){var children=node.children;if(children&&children.length){var child,rect=pad(node),remaining=children.slice(),row=[];for(scale(remaining,rect.dx*rect.dy/node.value),row.area=0;child=remaining.pop();)row.push(child),row.area+=child.area,null!=child.z&&(position(row,child.z?rect.dx:rect.dy,rect,!remaining.length),row.length=row.area=0);children.forEach(stickify)}}function worst(row,u){for(var r,s=row.area,rmax=0,rmin=1/0,i=-1,n=row.length;++i<n;)(r=row[i].area)&&(r<rmin&&(rmin=r),r>rmax&&(rmax=r));return s*=s,u*=u,s?Math.max(u*rmax*ratio/s,s/(u*rmin*ratio)):1/0}function position(row,u,rect,flush){var o,i=-1,n=row.length,x=rect.x,y=rect.y,v=u?round(row.area/u):0;if(u==rect.dx){for((flush||v>rect.dy)&&(v=rect.dy);++i<n;)o=row[i],o.x=x,o.y=y,o.dy=v,x+=o.dx=Math.min(rect.x+rect.dx-x,v?round(o.area/v):0);o.z=!0,o.dx+=rect.x+rect.dx-x,rect.y+=v,rect.dy-=v}else{for((flush||v>rect.dx)&&(v=rect.dx);++i<n;)o=row[i],o.x=x,o.y=y,o.dx=v,y+=o.dy=Math.min(rect.y+rect.dy-y,v?round(o.area/v):0);o.z=!1,o.dy+=rect.y+rect.dy-y,rect.x+=v,rect.dx-=v}}function treemap(d){var nodes=stickies||hierarchy(d),root=nodes[0];return root.x=root.y=0,root.value?(root.dx=size[0],root.dy=size[1]):root.dx=root.dy=0,stickies&&hierarchy.revalue(root),scale([root],root.dx*root.dy/root.value),(stickies?stickify:squarify)(root),sticky&&(stickies=nodes),nodes}var stickies,hierarchy=d3.layout.hierarchy(),round=Math.round,size=[1,1],padding=null,pad=d3_layout_treemapPadNull,sticky=!1,mode="squarify",ratio=.5*(1+Math.sqrt(5));return treemap.size=function(x){return arguments.length?(size=x,treemap):size},treemap.padding=function(x){function padFunction(node){var p=x.call(treemap,node,node.depth);return null==p?d3_layout_treemapPadNull(node):d3_layout_treemapPad(node,"number"==typeof p?[p,p,p,p]:p)}function padConstant(node){return d3_layout_treemapPad(node,x)}if(!arguments.length)return padding;var type;return pad=null==(padding=x)?d3_layout_treemapPadNull:"function"==(type=typeof x)?padFunction:"number"===type?(x=[x,x,x,x],padConstant):padConstant,treemap},treemap.round=function(x){return arguments.length?(round=x?Math.round:Number,treemap):round!=Number},treemap.sticky=function(x){return arguments.length?(sticky=x,stickies=null,treemap):sticky},treemap.ratio=function(x){return arguments.length?(ratio=x,treemap):ratio},treemap.mode=function(x){return arguments.length?(mode=x+"",treemap):mode},d3_layout_hierarchyRebind(treemap,hierarchy)},d3.random={normal:function(µ,σ){var n=arguments.length;return n<2&&(σ=1),n<1&&(µ=0),function(){var x,y,r;do{x=2*Math.random()-1,y=2*Math.random()-1,r=x*x+y*y}while(!r||r>1);return µ+σ*x*Math.sqrt(-2*Math.log(r)/r)}},logNormal:function(){var random=d3.random.normal.apply(d3,arguments);return function(){return Math.exp(random())}},bates:function(m){var random=d3.random.irwinHall(m);return function(){return random()/m}},irwinHall:function(m){return function(){for(var s=0,j=0;j<m;j++)s+=Math.random();return s}}},d3.scale={};var d3_scale_niceIdentity={floor:d3_identity,ceil:d3_identity};d3.scale.linear=function(){return d3_scale_linear([0,1],[0,1],d3_interpolate,!1)};var d3_scale_linearFormatSignificant={s:1,g:1,p:1,r:1,e:1};d3.scale.log=function(){return d3_scale_log(d3.scale.linear().domain([0,1]),10,!0,[1,10])};var d3_scale_logFormat=d3.format(".0e"),d3_scale_logNiceNegative={floor:function(x){return-Math.ceil(-x)},ceil:function(x){return-Math.floor(-x)}};d3.scale.pow=function(){return d3_scale_pow(d3.scale.linear(),1,[0,1])},d3.scale.sqrt=function(){return d3.scale.pow().exponent(.5)},d3.scale.ordinal=function(){return d3_scale_ordinal([],{t:"range",a:[[]]})},d3.scale.category10=function(){return d3.scale.ordinal().range(d3_category10)},d3.scale.category20=function(){return d3.scale.ordinal().range(d3_category20)},d3.scale.category20b=function(){return d3.scale.ordinal().range(d3_category20b)},d3.scale.category20c=function(){return d3.scale.ordinal().range(d3_category20c)};var d3_category10=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(d3_rgbString),d3_category20=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(d3_rgbString),d3_category20b=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(d3_rgbString),d3_category20c=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(d3_rgbString);d3.scale.quantile=function(){return d3_scale_quantile([],[])},d3.scale.quantize=function(){return d3_scale_quantize(0,1,[0,1])},d3.scale.threshold=function(){return d3_scale_threshold([.5],[0,1])},d3.scale.identity=function(){return d3_scale_identity([0,1])},d3.svg={},d3.svg.arc=function(){function arc(){var r0=Math.max(0,+innerRadius.apply(this,arguments)),r1=Math.max(0,+outerRadius.apply(this,arguments)),a0=startAngle.apply(this,arguments)-halfπ,a1=endAngle.apply(this,arguments)-halfπ,da=Math.abs(a1-a0),cw=a0>a1?0:1;if(r1<r0&&(rc=r1,r1=r0,r0=rc),da>=τε)return circleSegment(r1,cw)+(r0?circleSegment(r0,1-cw):"")+"Z";var rc,cr,rp,ap,x0,y0,x1,y1,x2,y2,x3,y3,p0=0,p1=0,path=[];if((ap=(+padAngle.apply(this,arguments)||0)/2)&&(rp=padRadius===d3_svg_arcAuto?Math.sqrt(r0*r0+r1*r1):+padRadius.apply(this,arguments),cw||(p1*=-1),r1&&(p1=d3_asin(rp/r1*Math.sin(ap))),r0&&(p0=d3_asin(rp/r0*Math.sin(ap)))),r1){x0=r1*Math.cos(a0+p1),y0=r1*Math.sin(a0+p1),x1=r1*Math.cos(a1-p1),y1=r1*Math.sin(a1-p1);var l1=Math.abs(a1-a0-2*p1)<=π?0:1;if(p1&&d3_svg_arcSweep(x0,y0,x1,y1)===cw^l1){var h1=(a0+a1)/2;x0=r1*Math.cos(h1),y0=r1*Math.sin(h1),x1=y1=null}}else x0=y0=0;if(r0){x2=r0*Math.cos(a1-p0),y2=r0*Math.sin(a1-p0),x3=r0*Math.cos(a0+p0),y3=r0*Math.sin(a0+p0);var l0=Math.abs(a0-a1+2*p0)<=π?0:1;if(p0&&d3_svg_arcSweep(x2,y2,x3,y3)===1-cw^l0){var h0=(a0+a1)/2;x2=r0*Math.cos(h0),y2=r0*Math.sin(h0),x3=y3=null}}else x2=y2=0;if(da>ε&&(rc=Math.min(Math.abs(r1-r0)/2,+cornerRadius.apply(this,arguments)))>.001){cr=r0<r1^cw?0:1;var rc1=rc,rc0=rc;if(da<π){var oc=null==x3?[x2,y2]:null==x1?[x0,y0]:d3_geom_polygonIntersect([x0,y0],[x3,y3],[x1,y1],[x2,y2]),ax=x0-oc[0],ay=y0-oc[1],bx=x1-oc[0],by=y1-oc[1],kc=1/Math.sin(Math.acos((ax*bx+ay*by)/(Math.sqrt(ax*ax+ay*ay)*Math.sqrt(bx*bx+by*by)))/2),lc=Math.sqrt(oc[0]*oc[0]+oc[1]*oc[1]);rc0=Math.min(rc,(r0-lc)/(kc-1)),rc1=Math.min(rc,(r1-lc)/(kc+1))}if(null!=x1){var t30=d3_svg_arcCornerTangents(null==x3?[x2,y2]:[x3,y3],[x0,y0],r1,rc1,cw),t12=d3_svg_arcCornerTangents([x1,y1],[x2,y2],r1,rc1,cw);rc===rc1?path.push("M",t30[0],"A",rc1,",",rc1," 0 0,",cr," ",t30[1],"A",r1,",",r1," 0 ",1-cw^d3_svg_arcSweep(t30[1][0],t30[1][1],t12[1][0],t12[1][1]),",",cw," ",t12[1],"A",rc1,",",rc1," 0 0,",cr," ",t12[0]):path.push("M",t30[0],"A",rc1,",",rc1," 0 1,",cr," ",t12[0])}else path.push("M",x0,",",y0);if(null!=x3){var t03=d3_svg_arcCornerTangents([x0,y0],[x3,y3],r0,-rc0,cw),t21=d3_svg_arcCornerTangents([x2,y2],null==x1?[x0,y0]:[x1,y1],r0,-rc0,cw);rc===rc0?path.push("L",t21[0],"A",rc0,",",rc0," 0 0,",cr," ",t21[1],"A",r0,",",r0," 0 ",cw^d3_svg_arcSweep(t21[1][0],t21[1][1],t03[1][0],t03[1][1]),",",1-cw," ",t03[1],"A",rc0,",",rc0," 0 0,",cr," ",t03[0]):path.push("L",t21[0],"A",rc0,",",rc0," 0 0,",cr," ",t03[0])}else path.push("L",x2,",",y2)}else path.push("M",x0,",",y0),null!=x1&&path.push("A",r1,",",r1," 0 ",l1,",",cw," ",x1,",",y1),path.push("L",x2,",",y2),null!=x3&&path.push("A",r0,",",r0," 0 ",l0,",",1-cw," ",x3,",",y3);return path.push("Z"),path.join("")}function circleSegment(r1,cw){return"M0,"+r1+"A"+r1+","+r1+" 0 1,"+cw+" 0,"+-r1+"A"+r1+","+r1+" 0 1,"+cw+" 0,"+r1}var innerRadius=d3_svg_arcInnerRadius,outerRadius=d3_svg_arcOuterRadius,cornerRadius=d3_zero,padRadius=d3_svg_arcAuto,startAngle=d3_svg_arcStartAngle,endAngle=d3_svg_arcEndAngle,padAngle=d3_svg_arcPadAngle;return arc.innerRadius=function(v){return arguments.length?(innerRadius=d3_functor(v),arc):innerRadius},arc.outerRadius=function(v){return arguments.length?(outerRadius=d3_functor(v),arc):outerRadius},arc.cornerRadius=function(v){return arguments.length?(cornerRadius=d3_functor(v),arc):cornerRadius},arc.padRadius=function(v){return arguments.length?(padRadius=v==d3_svg_arcAuto?d3_svg_arcAuto:d3_functor(v),arc):padRadius},arc.startAngle=function(v){return arguments.length?(startAngle=d3_functor(v),arc):startAngle},arc.endAngle=function(v){return arguments.length?(endAngle=d3_functor(v),arc):endAngle},arc.padAngle=function(v){return arguments.length?(padAngle=d3_functor(v),arc):padAngle},arc.centroid=function(){var r=(+innerRadius.apply(this,arguments)+ +outerRadius.apply(this,arguments))/2,a=(+startAngle.apply(this,arguments)+ +endAngle.apply(this,arguments))/2-halfπ;return[Math.cos(a)*r,Math.sin(a)*r]},arc};var d3_svg_arcAuto="auto";d3.svg.line=function(){return d3_svg_line(d3_identity)};var d3_svg_lineInterpolators=d3.map({linear:d3_svg_lineLinear,"linear-closed":d3_svg_lineLinearClosed,step:d3_svg_lineStep,"step-before":d3_svg_lineStepBefore,"step-after":d3_svg_lineStepAfter,basis:d3_svg_lineBasis,"basis-open":d3_svg_lineBasisOpen,"basis-closed":d3_svg_lineBasisClosed,bundle:d3_svg_lineBundle,cardinal:d3_svg_lineCardinal,"cardinal-open":d3_svg_lineCardinalOpen,"cardinal-closed":d3_svg_lineCardinalClosed,monotone:d3_svg_lineMonotone});d3_svg_lineInterpolators.forEach(function(key,value){value.key=key,value.closed=/-closed$/.test(key)});var d3_svg_lineBasisBezier1=[0,2/3,1/3,0],d3_svg_lineBasisBezier2=[0,1/3,2/3,0],d3_svg_lineBasisBezier3=[0,1/6,2/3,1/6];d3.svg.line.radial=function(){var line=d3_svg_line(d3_svg_lineRadial);return line.radius=line.x,delete line.x,line.angle=line.y,delete line.y,line},d3_svg_lineStepBefore.reverse=d3_svg_lineStepAfter,d3_svg_lineStepAfter.reverse=d3_svg_lineStepBefore,d3.svg.area=function(){return d3_svg_area(d3_identity)},d3.svg.area.radial=function(){var area=d3_svg_area(d3_svg_lineRadial);return area.radius=area.x,delete area.x,area.innerRadius=area.x0,delete area.x0,area.outerRadius=area.x1,delete area.x1,area.angle=area.y,delete area.y,area.startAngle=area.y0,delete area.y0,area.endAngle=area.y1,delete area.y1,area},d3.svg.chord=function(){function chord(d,i){var s=subgroup(this,source,d,i),t=subgroup(this,target,d,i);return"M"+s.p0+arc(s.r,s.p1,s.a1-s.a0)+(equals(s,t)?curve(s.r,s.p1,s.r,s.p0):curve(s.r,s.p1,t.r,t.p0)+arc(t.r,t.p1,t.a1-t.a0)+curve(t.r,t.p1,s.r,s.p0))+"Z"}function subgroup(self,f,d,i){var subgroup=f.call(self,d,i),r=radius.call(self,subgroup,i),a0=startAngle.call(self,subgroup,i)-halfπ,a1=endAngle.call(self,subgroup,i)-halfπ;return{r:r,a0:a0,a1:a1,p0:[r*Math.cos(a0),r*Math.sin(a0)],p1:[r*Math.cos(a1),r*Math.sin(a1)]}}function equals(a,b){return a.a0==b.a0&&a.a1==b.a1}function arc(r,p,a){return"A"+r+","+r+" 0 "+ +(a>π)+",1 "+p}function curve(r0,p0,r1,p1){return"Q 0,0 "+p1}var source=d3_source,target=d3_target,radius=d3_svg_chordRadius,startAngle=d3_svg_arcStartAngle,endAngle=d3_svg_arcEndAngle;return chord.radius=function(v){return arguments.length?(radius=d3_functor(v),chord):radius},chord.source=function(v){return arguments.length?(source=d3_functor(v),chord):source},chord.target=function(v){return arguments.length?(target=d3_functor(v),chord):target},chord.startAngle=function(v){return arguments.length?(startAngle=d3_functor(v),chord):startAngle},chord.endAngle=function(v){return arguments.length?(endAngle=d3_functor(v),chord):endAngle},chord},d3.svg.diagonal=function(){function diagonal(d,i){var p0=source.call(this,d,i),p3=target.call(this,d,i),m=(p0.y+p3.y)/2,p=[p0,{x:p0.x,y:m},{x:p3.x,y:m},p3];return p=p.map(projection),"M"+p[0]+"C"+p[1]+" "+p[2]+" "+p[3]}var source=d3_source,target=d3_target,projection=d3_svg_diagonalProjection;return diagonal.source=function(x){return arguments.length?(source=d3_functor(x),diagonal):source},diagonal.target=function(x){return arguments.length?(target=d3_functor(x),diagonal):target},diagonal.projection=function(x){return arguments.length?(projection=x,diagonal):projection},diagonal},d3.svg.diagonal.radial=function(){var diagonal=d3.svg.diagonal(),projection=d3_svg_diagonalProjection,projection_=diagonal.projection;return diagonal.projection=function(x){return arguments.length?projection_(d3_svg_diagonalRadialProjection(projection=x)):projection},diagonal},d3.svg.symbol=function(){function symbol(d,i){return(d3_svg_symbols.get(type.call(this,d,i))||d3_svg_symbolCircle)(size.call(this,d,i))}var type=d3_svg_symbolType,size=d3_svg_symbolSize;return symbol.type=function(x){return arguments.length?(type=d3_functor(x),symbol):type},symbol.size=function(x){return arguments.length?(size=d3_functor(x),symbol):size},symbol};var d3_svg_symbols=d3.map({circle:d3_svg_symbolCircle,cross:function(size){var r=Math.sqrt(size/5)/2;return"M"+-3*r+","+-r+"H"+-r+"V"+-3*r+"H"+r+"V"+-r+"H"+3*r+"V"+r+"H"+r+"V"+3*r+"H"+-r+"V"+r+"H"+-3*r+"Z"},diamond:function(size){var ry=Math.sqrt(size/(2*d3_svg_symbolTan30)),rx=ry*d3_svg_symbolTan30;return"M0,"+-ry+"L"+rx+",0 0,"+ry+" "+-rx+",0Z"},square:function(size){var r=Math.sqrt(size)/2;return"M"+-r+","+-r+"L"+r+","+-r+" "+r+","+r+" "+-r+","+r+"Z"},"triangle-down":function(size){var rx=Math.sqrt(size/d3_svg_symbolSqrt3),ry=rx*d3_svg_symbolSqrt3/2;return"M0,"+ry+"L"+rx+","+-ry+" "+-rx+","+-ry+"Z"},"triangle-up":function(size){var rx=Math.sqrt(size/d3_svg_symbolSqrt3),ry=rx*d3_svg_symbolSqrt3/2;return"M0,"+-ry+"L"+rx+","+ry+" "+-rx+","+ry+"Z"}});d3.svg.symbolTypes=d3_svg_symbols.keys();var d3_svg_symbolSqrt3=Math.sqrt(3),d3_svg_symbolTan30=Math.tan(30*d3_radians);d3_selectionPrototype.transition=function(name){for(var subgroup,node,id=d3_transitionInheritId||++d3_transitionId,ns=d3_transitionNamespace(name),subgroups=[],transition=d3_transitionInherit||{time:Date.now(),ease:d3_ease_cubicInOut,delay:0,duration:250},j=-1,m=this.length;++j<m;){subgroups.push(subgroup=[]);for(var group=this[j],i=-1,n=group.length;++i<n;)(node=group[i])&&d3_transitionNode(node,i,ns,id,transition),subgroup.push(node)}return d3_transition(subgroups,ns,id)},d3_selectionPrototype.interrupt=function(name){return this.each(null==name?d3_selection_interrupt:d3_selection_interruptNS(d3_transitionNamespace(name)))};var d3_transitionInheritId,d3_transitionInherit,d3_selection_interrupt=d3_selection_interruptNS(d3_transitionNamespace()),d3_transitionPrototype=[],d3_transitionId=0;d3_transitionPrototype.call=d3_selectionPrototype.call,d3_transitionPrototype.empty=d3_selectionPrototype.empty,d3_transitionPrototype.node=d3_selectionPrototype.node,d3_transitionPrototype.size=d3_selectionPrototype.size,d3.transition=function(selection,name){return selection&&selection.transition?d3_transitionInheritId?selection.transition(name):selection:d3.selection().transition(selection)},d3.transition.prototype=d3_transitionPrototype,d3_transitionPrototype.select=function(selector){var subgroup,subnode,node,id=this.id,ns=this.namespace,subgroups=[];selector=d3_selection_selector(selector);for(var j=-1,m=this.length;++j<m;){subgroups.push(subgroup=[]);for(var group=this[j],i=-1,n=group.length;++i<n;)(node=group[i])&&(subnode=selector.call(node,node.__data__,i,j))?("__data__"in node&&(subnode.__data__=node.__data__),d3_transitionNode(subnode,i,ns,id,node[ns][id]),subgroup.push(subnode)):subgroup.push(null)}return d3_transition(subgroups,ns,id)},d3_transitionPrototype.selectAll=function(selector){var subgroup,subnodes,node,subnode,transition,id=this.id,ns=this.namespace,subgroups=[];selector=d3_selection_selectorAll(selector);for(var j=-1,m=this.length;++j<m;)for(var group=this[j],i=-1,n=group.length;++i<n;)if(node=group[i]){transition=node[ns][id],subnodes=selector.call(node,node.__data__,i,j),subgroups.push(subgroup=[]);for(var k=-1,o=subnodes.length;++k<o;)(subnode=subnodes[k])&&d3_transitionNode(subnode,k,ns,id,transition),subgroup.push(subnode)}return d3_transition(subgroups,ns,id)},d3_transitionPrototype.filter=function(filter){var subgroup,group,node,subgroups=[];"function"!=typeof filter&&(filter=d3_selection_filter(filter));for(var j=0,m=this.length;j<m;j++){subgroups.push(subgroup=[]);for(var group=this[j],i=0,n=group.length;i<n;i++)(node=group[i])&&filter.call(node,node.__data__,i,j)&&subgroup.push(node)}return d3_transition(subgroups,this.namespace,this.id)},d3_transitionPrototype.tween=function(name,tween){var id=this.id,ns=this.namespace;return arguments.length<2?this.node()[ns][id].tween.get(name):d3_selection_each(this,null==tween?function(node){node[ns][id].tween.remove(name)}:function(node){node[ns][id].tween.set(name,tween)})},d3_transitionPrototype.attr=function(nameNS,value){function attrNull(){this.removeAttribute(name)}function attrNullNS(){this.removeAttributeNS(name.space,name.local)}function attrTween(b){return null==b?attrNull:(b+="",function(){var i,a=this.getAttribute(name);return a!==b&&(i=interpolate(a,b),function(t){this.setAttribute(name,i(t))})})}function attrTweenNS(b){return null==b?attrNullNS:(b+="",function(){var i,a=this.getAttributeNS(name.space,name.local);return a!==b&&(i=interpolate(a,b),function(t){this.setAttributeNS(name.space,name.local,i(t))})})}if(arguments.length<2){for(value in nameNS)this.attr(value,nameNS[value]);return this}var interpolate="transform"==nameNS?d3_interpolateTransform:d3_interpolate,name=d3.ns.qualify(nameNS);return d3_transition_tween(this,"attr."+nameNS,value,name.local?attrTweenNS:attrTween)},d3_transitionPrototype.attrTween=function(nameNS,tween){function attrTween(d,i){var f=tween.call(this,d,i,this.getAttribute(name));return f&&function(t){this.setAttribute(name,f(t))}}function attrTweenNS(d,i){var f=tween.call(this,d,i,this.getAttributeNS(name.space,name.local));return f&&function(t){this.setAttributeNS(name.space,name.local,f(t))}}var name=d3.ns.qualify(nameNS);return this.tween("attr."+nameNS,name.local?attrTweenNS:attrTween)},d3_transitionPrototype.style=function(name,value,priority){function styleNull(){this.style.removeProperty(name)}function styleString(b){return null==b?styleNull:(b+="",function(){var i,a=d3_window(this).getComputedStyle(this,null).getPropertyValue(name);return a!==b&&(i=d3_interpolate(a,b),function(t){this.style.setProperty(name,i(t),priority)})})}var n=arguments.length;if(n<3){if("string"!=typeof name){n<2&&(value="");for(priority in name)this.style(priority,name[priority],value);return this}priority=""}return d3_transition_tween(this,"style."+name,value,styleString)},d3_transitionPrototype.styleTween=function(name,tween,priority){function styleTween(d,i){var f=tween.call(this,d,i,d3_window(this).getComputedStyle(this,null).getPropertyValue(name));return f&&function(t){this.style.setProperty(name,f(t),priority)}}return arguments.length<3&&(priority=""),this.tween("style."+name,styleTween)},d3_transitionPrototype.text=function(value){return d3_transition_tween(this,"text",value,d3_transition_text)},d3_transitionPrototype.remove=function(){var ns=this.namespace;return this.each("end.transition",function(){var p;this[ns].count<2&&(p=this.parentNode)&&p.removeChild(this)})},d3_transitionPrototype.ease=function(value){var id=this.id,ns=this.namespace;return arguments.length<1?this.node()[ns][id].ease:("function"!=typeof value&&(value=d3.ease.apply(d3,arguments)),d3_selection_each(this,function(node){node[ns][id].ease=value}))},d3_transitionPrototype.delay=function(value){var id=this.id,ns=this.namespace;return arguments.length<1?this.node()[ns][id].delay:d3_selection_each(this,"function"==typeof value?function(node,i,j){node[ns][id].delay=+value.call(node,node.__data__,i,j)}:(value=+value,function(node){node[ns][id].delay=value}))},d3_transitionPrototype.duration=function(value){var id=this.id,ns=this.namespace;return arguments.length<1?this.node()[ns][id].duration:d3_selection_each(this,"function"==typeof value?function(node,i,j){node[ns][id].duration=Math.max(1,value.call(node,node.__data__,i,j))}:(value=Math.max(1,value),function(node){node[ns][id].duration=value}))},d3_transitionPrototype.each=function(type,listener){var id=this.id,ns=this.namespace;if(arguments.length<2){var inherit=d3_transitionInherit,inheritId=d3_transitionInheritId;try{d3_transitionInheritId=id,d3_selection_each(this,function(node,i,j){d3_transitionInherit=node[ns][id],type.call(node,node.__data__,i,j)})}finally{d3_transitionInherit=inherit,d3_transitionInheritId=inheritId}}else d3_selection_each(this,function(node){var transition=node[ns][id];(transition.event||(transition.event=d3.dispatch("start","end","interrupt"))).on(type,listener)});return this},d3_transitionPrototype.transition=function(){for(var subgroup,group,node,transition,id0=this.id,id1=++d3_transitionId,ns=this.namespace,subgroups=[],j=0,m=this.length;j<m;j++){subgroups.push(subgroup=[]);for(var group=this[j],i=0,n=group.length;i<n;i++)(node=group[i])&&(transition=node[ns][id0],d3_transitionNode(node,i,ns,id1,{time:transition.time,ease:transition.ease,delay:transition.delay+transition.duration,duration:transition.duration})),subgroup.push(node)}return d3_transition(subgroups,ns,id1)},d3.svg.axis=function(){function axis(g){g.each(function(){var tickTransform,g=d3.select(this),scale0=this.__chart__||scale,scale1=this.__chart__=scale.copy(),ticks=null==tickValues?scale1.ticks?scale1.ticks.apply(scale1,tickArguments_):scale1.domain():tickValues,tickFormat=null==tickFormat_?scale1.tickFormat?scale1.tickFormat.apply(scale1,tickArguments_):d3_identity:tickFormat_,tick=g.selectAll(".tick").data(ticks,scale1),tickEnter=tick.enter().insert("g",".domain").attr("class","tick").style("opacity",ε),tickExit=d3.transition(tick.exit()).style("opacity",ε).remove(),tickUpdate=d3.transition(tick.order()).style("opacity",1),tickSpacing=Math.max(innerTickSize,0)+tickPadding,range=d3_scaleRange(scale1),path=g.selectAll(".domain").data([0]),pathUpdate=(path.enter().append("path").attr("class","domain"),d3.transition(path));tickEnter.append("line"),tickEnter.append("text");var x1,x2,y1,y2,lineEnter=tickEnter.select("line"),lineUpdate=tickUpdate.select("line"),text=tick.select("text").text(tickFormat),textEnter=tickEnter.select("text"),textUpdate=tickUpdate.select("text"),sign="top"===orient||"left"===orient?-1:1;if("bottom"===orient||"top"===orient?(tickTransform=d3_svg_axisX,x1="x",y1="y",x2="x2",y2="y2",text.attr("dy",sign<0?"0em":".71em").style("text-anchor","middle"),pathUpdate.attr("d","M"+range[0]+","+sign*outerTickSize+"V0H"+range[1]+"V"+sign*outerTickSize)):(tickTransform=d3_svg_axisY,x1="y",y1="x",x2="y2",y2="x2",text.attr("dy",".32em").style("text-anchor",sign<0?"end":"start"),pathUpdate.attr("d","M"+sign*outerTickSize+","+range[0]+"H0V"+range[1]+"H"+sign*outerTickSize)),lineEnter.attr(y2,sign*innerTickSize),textEnter.attr(y1,sign*tickSpacing),lineUpdate.attr(x2,0).attr(y2,sign*innerTickSize),textUpdate.attr(x1,0).attr(y1,sign*tickSpacing),scale1.rangeBand){var x=scale1,dx=x.rangeBand()/2;scale0=scale1=function(d){return x(d)+dx}}else scale0.rangeBand?scale0=scale1:tickExit.call(tickTransform,scale1,scale0);tickEnter.call(tickTransform,scale0,scale1),tickUpdate.call(tickTransform,scale1,scale1)})}var tickFormat_,scale=d3.scale.linear(),orient=d3_svg_axisDefaultOrient,innerTickSize=6,outerTickSize=6,tickPadding=3,tickArguments_=[10],tickValues=null;return axis.scale=function(x){return arguments.length?(scale=x,axis):scale},axis.orient=function(x){return arguments.length?(orient=x in d3_svg_axisOrients?x+"":d3_svg_axisDefaultOrient,axis):orient},axis.ticks=function(){return arguments.length?(tickArguments_=d3_array(arguments),axis):tickArguments_},axis.tickValues=function(x){return arguments.length?(tickValues=x,axis):tickValues},axis.tickFormat=function(x){return arguments.length?(tickFormat_=x,axis):tickFormat_},axis.tickSize=function(x){var n=arguments.length;return n?(innerTickSize=+x,outerTickSize=+arguments[n-1],axis):innerTickSize},axis.innerTickSize=function(x){return arguments.length?(innerTickSize=+x,axis):innerTickSize},axis.outerTickSize=function(x){return arguments.length?(outerTickSize=+x,axis):outerTickSize},axis.tickPadding=function(x){return arguments.length?(tickPadding=+x,axis):tickPadding},axis.tickSubdivide=function(){return arguments.length&&axis},axis};var d3_svg_axisDefaultOrient="bottom",d3_svg_axisOrients={top:1,right:1,bottom:1,left:1};d3.svg.brush=function(){function brush(g){g.each(function(){var g=d3.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",brushstart).on("touchstart.brush",brushstart),background=g.selectAll(".background").data([0]);background.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),g.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var resize=g.selectAll(".resize").data(resizes,d3_identity);resize.exit().remove(),resize.enter().append("g").attr("class",function(d){return"resize "+d}).style("cursor",function(d){return d3_svg_brushCursor[d]}).append("rect").attr("x",function(d){return/[ew]$/.test(d)?-3:null}).attr("y",function(d){return/^[ns]/.test(d)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),resize.style("display",brush.empty()?"none":null);var range,gUpdate=d3.transition(g),backgroundUpdate=d3.transition(background);x&&(range=d3_scaleRange(x),backgroundUpdate.attr("x",range[0]).attr("width",range[1]-range[0]),redrawX(gUpdate)),y&&(range=d3_scaleRange(y),backgroundUpdate.attr("y",range[0]).attr("height",range[1]-range[0]),redrawY(gUpdate)),redraw(gUpdate)})}function redraw(g){g.selectAll(".resize").attr("transform",function(d){return"translate("+xExtent[+/e$/.test(d)]+","+yExtent[+/^s/.test(d)]+")"})}function redrawX(g){g.select(".extent").attr("x",xExtent[0]),g.selectAll(".extent,.n>rect,.s>rect").attr("width",xExtent[1]-xExtent[0])}function redrawY(g){g.select(".extent").attr("y",yExtent[0]),g.selectAll(".extent,.e>rect,.w>rect").attr("height",yExtent[1]-yExtent[0])}function brushstart(){function keydown(){32==d3.event.keyCode&&(dragging||(center=null,origin[0]-=xExtent[1],origin[1]-=yExtent[1],dragging=2),d3_eventPreventDefault())}function keyup(){32==d3.event.keyCode&&2==dragging&&(origin[0]+=xExtent[1],origin[1]+=yExtent[1],dragging=0,d3_eventPreventDefault())}function brushmove(){var point=d3.mouse(target),moved=!1;offset&&(point[0]+=offset[0],point[1]+=offset[1]),dragging||(d3.event.altKey?(center||(center=[(xExtent[0]+xExtent[1])/2,(yExtent[0]+yExtent[1])/2]),origin[0]=xExtent[+(point[0]<center[0])],origin[1]=yExtent[+(point[1]<center[1])]):center=null),resizingX&&move1(point,x,0)&&(redrawX(g),moved=!0),resizingY&&move1(point,y,1)&&(redrawY(g),moved=!0),moved&&(redraw(g),event_({type:"brush",mode:dragging?"move":"resize"}))}function move1(point,scale,i){var min,max,range=d3_scaleRange(scale),r0=range[0],r1=range[1],position=origin[i],extent=i?yExtent:xExtent,size=extent[1]-extent[0];if(dragging&&(r0-=position,r1-=size+position),min=(i?yClamp:xClamp)?Math.max(r0,Math.min(r1,point[i])):point[i],dragging?max=(min+=position)+size:(center&&(position=Math.max(r0,Math.min(r1,2*center[i]-min))),position<min?(max=min,min=position):max=position),extent[0]!=min||extent[1]!=max)return i?yExtentDomain=null:xExtentDomain=null,extent[0]=min,extent[1]=max,!0}function brushend(){brushmove(),g.style("pointer-events","all").selectAll(".resize").style("display",brush.empty()?"none":null),d3.select("body").style("cursor",null),w.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),dragRestore(),event_({type:"brushend"})}var center,offset,target=this,eventTarget=d3.select(d3.event.target),event_=event.of(target,arguments),g=d3.select(target),resizing=eventTarget.datum(),resizingX=!/^(n|s)$/.test(resizing)&&x,resizingY=!/^(e|w)$/.test(resizing)&&y,dragging=eventTarget.classed("extent"),dragRestore=d3_event_dragSuppress(target),origin=d3.mouse(target),w=d3.select(d3_window(target)).on("keydown.brush",keydown).on("keyup.brush",keyup);if(d3.event.changedTouches?w.on("touchmove.brush",brushmove).on("touchend.brush",brushend):w.on("mousemove.brush",brushmove).on("mouseup.brush",brushend),g.interrupt().selectAll("*").interrupt(),dragging)origin[0]=xExtent[0]-origin[0],origin[1]=yExtent[0]-origin[1];else if(resizing){var ex=+/w$/.test(resizing),ey=+/^n/.test(resizing);offset=[xExtent[1-ex]-origin[0],yExtent[1-ey]-origin[1]],origin[0]=xExtent[ex],origin[1]=yExtent[ey]}else d3.event.altKey&&(center=origin.slice());g.style("pointer-events","none").selectAll(".resize").style("display",null),d3.select("body").style("cursor",eventTarget.style("cursor")),event_({type:"brushstart"}),brushmove()}var xExtentDomain,yExtentDomain,event=d3_eventDispatch(brush,"brushstart","brush","brushend"),x=null,y=null,xExtent=[0,0],yExtent=[0,0],xClamp=!0,yClamp=!0,resizes=d3_svg_brushResizes[0];return brush.event=function(g){g.each(function(){var event_=event.of(this,arguments),extent1={x:xExtent,y:yExtent,i:xExtentDomain,j:yExtentDomain},extent0=this.__chart__||extent1;this.__chart__=extent1,d3_transitionInheritId?d3.select(this).transition().each("start.brush",function(){xExtentDomain=extent0.i,yExtentDomain=extent0.j,xExtent=extent0.x,yExtent=extent0.y,event_({type:"brushstart"})}).tween("brush:brush",function(){var xi=d3_interpolateArray(xExtent,extent1.x),yi=d3_interpolateArray(yExtent,extent1.y);return xExtentDomain=yExtentDomain=null,function(t){xExtent=extent1.x=xi(t),yExtent=extent1.y=yi(t),event_({type:"brush",mode:"resize"})}}).each("end.brush",function(){xExtentDomain=extent1.i,yExtentDomain=extent1.j,event_({type:"brush",mode:"resize"}),event_({type:"brushend"})}):(event_({type:"brushstart"}),event_({type:"brush",mode:"resize"}),event_({type:"brushend"}))})},brush.x=function(z){return arguments.length?(x=z,resizes=d3_svg_brushResizes[!x<<1|!y],brush):x},brush.y=function(z){return arguments.length?(y=z,resizes=d3_svg_brushResizes[!x<<1|!y],brush):y},brush.clamp=function(z){return arguments.length?(x&&y?(xClamp=!!z[0],yClamp=!!z[1]):x?xClamp=!!z:y&&(yClamp=!!z),brush):x&&y?[xClamp,yClamp]:x?xClamp:y?yClamp:null},brush.extent=function(z){var x0,x1,y0,y1,t;return arguments.length?(x&&(x0=z[0],x1=z[1],y&&(x0=x0[0],x1=x1[0]),xExtentDomain=[x0,x1],x.invert&&(x0=x(x0),x1=x(x1)),x1<x0&&(t=x0,x0=x1,x1=t),x0==xExtent[0]&&x1==xExtent[1]||(xExtent=[x0,x1])),y&&(y0=z[0],y1=z[1],x&&(y0=y0[1],y1=y1[1]),yExtentDomain=[y0,y1],y.invert&&(y0=y(y0),y1=y(y1)),y1<y0&&(t=y0,y0=y1,y1=t),y0==yExtent[0]&&y1==yExtent[1]||(yExtent=[y0,y1])),brush):(x&&(xExtentDomain?(x0=xExtentDomain[0],x1=xExtentDomain[1]):(x0=xExtent[0],x1=xExtent[1],x.invert&&(x0=x.invert(x0),x1=x.invert(x1)),x1<x0&&(t=x0,x0=x1,x1=t))),y&&(yExtentDomain?(y0=yExtentDomain[0],y1=yExtentDomain[1]):(y0=yExtent[0],y1=yExtent[1],y.invert&&(y0=y.invert(y0),y1=y.invert(y1)),y1<y0&&(t=y0,y0=y1,y1=t))),x&&y?[[x0,y0],[x1,y1]]:x?[x0,x1]:y&&[y0,y1])},brush.clear=function(){return brush.empty()||(xExtent=[0,0],yExtent=[0,0],xExtentDomain=yExtentDomain=null),brush},brush.empty=function(){return!!x&&xExtent[0]==xExtent[1]||!!y&&yExtent[0]==yExtent[1]},d3.rebind(brush,event,"on")};var d3_svg_brushCursor={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},d3_svg_brushResizes=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],d3_time_format=d3_time.format=d3_locale_enUS.timeFormat,d3_time_formatUtc=d3_time_format.utc,d3_time_formatIso=d3_time_formatUtc("%Y-%m-%dT%H:%M:%S.%LZ");d3_time_format.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?d3_time_formatIsoNative:d3_time_formatIso,d3_time_formatIsoNative.parse=function(string){var date=new Date(string);return isNaN(date)?null:date},
d3_time_formatIsoNative.toString=d3_time_formatIso.toString,d3_time.second=d3_time_interval(function(date){return new d3_date(1e3*Math.floor(date/1e3))},function(date,offset){date.setTime(date.getTime()+1e3*Math.floor(offset))},function(date){return date.getSeconds()}),d3_time.seconds=d3_time.second.range,d3_time.seconds.utc=d3_time.second.utc.range,d3_time.minute=d3_time_interval(function(date){return new d3_date(6e4*Math.floor(date/6e4))},function(date,offset){date.setTime(date.getTime()+6e4*Math.floor(offset))},function(date){return date.getMinutes()}),d3_time.minutes=d3_time.minute.range,d3_time.minutes.utc=d3_time.minute.utc.range,d3_time.hour=d3_time_interval(function(date){var timezone=date.getTimezoneOffset()/60;return new d3_date(36e5*(Math.floor(date/36e5-timezone)+timezone))},function(date,offset){date.setTime(date.getTime()+36e5*Math.floor(offset))},function(date){return date.getHours()}),d3_time.hours=d3_time.hour.range,d3_time.hours.utc=d3_time.hour.utc.range,d3_time.month=d3_time_interval(function(date){return date=d3_time.day(date),date.setDate(1),date},function(date,offset){date.setMonth(date.getMonth()+offset)},function(date){return date.getMonth()}),d3_time.months=d3_time.month.range,d3_time.months.utc=d3_time.month.utc.range;var d3_time_scaleSteps=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],d3_time_scaleLocalMethods=[[d3_time.second,1],[d3_time.second,5],[d3_time.second,15],[d3_time.second,30],[d3_time.minute,1],[d3_time.minute,5],[d3_time.minute,15],[d3_time.minute,30],[d3_time.hour,1],[d3_time.hour,3],[d3_time.hour,6],[d3_time.hour,12],[d3_time.day,1],[d3_time.day,2],[d3_time.week,1],[d3_time.month,1],[d3_time.month,3],[d3_time.year,1]],d3_time_scaleLocalFormat=d3_time_format.multi([[".%L",function(d){return d.getMilliseconds()}],[":%S",function(d){return d.getSeconds()}],["%I:%M",function(d){return d.getMinutes()}],["%I %p",function(d){return d.getHours()}],["%a %d",function(d){return d.getDay()&&1!=d.getDate()}],["%b %d",function(d){return 1!=d.getDate()}],["%B",function(d){return d.getMonth()}],["%Y",d3_true]]),d3_time_scaleMilliseconds={range:function(start,stop,step){return d3.range(Math.ceil(start/step)*step,+stop,step).map(d3_time_scaleDate)},floor:d3_identity,ceil:d3_identity};d3_time_scaleLocalMethods.year=d3_time.year,d3_time.scale=function(){return d3_time_scale(d3.scale.linear(),d3_time_scaleLocalMethods,d3_time_scaleLocalFormat)};var d3_time_scaleUtcMethods=d3_time_scaleLocalMethods.map(function(m){return[m[0].utc,m[1]]}),d3_time_scaleUtcFormat=d3_time_formatUtc.multi([[".%L",function(d){return d.getUTCMilliseconds()}],[":%S",function(d){return d.getUTCSeconds()}],["%I:%M",function(d){return d.getUTCMinutes()}],["%I %p",function(d){return d.getUTCHours()}],["%a %d",function(d){return d.getUTCDay()&&1!=d.getUTCDate()}],["%b %d",function(d){return 1!=d.getUTCDate()}],["%B",function(d){return d.getUTCMonth()}],["%Y",d3_true]]);d3_time_scaleUtcMethods.year=d3_time.year.utc,d3_time.scale.utc=function(){return d3_time_scale(d3.scale.linear(),d3_time_scaleUtcMethods,d3_time_scaleUtcFormat)},d3.text=d3_xhrType(function(request){return request.responseText}),d3.json=function(url,callback){return d3_xhr(url,"application/json",d3_json,callback)},d3.html=function(url,callback){return d3_xhr(url,"text/html",d3_html,callback)},d3.xml=d3_xhrType(function(request){return request.responseXML}),"function"==typeof define&&define.amd?(this.d3=d3,define(d3)):"object"==typeof module&&module.exports?module.exports=d3:this.d3=d3}(),function(window){"use strict";function API(owner){this.owner=owner}function Chart(config){var $$=this.internal=new ChartInternal(this);$$.loadConfig(config),$$.beforeInit(config),$$.init(),$$.afterInit(config),function bindThis(fn,target,argThis){Object.keys(fn).forEach(function(key){target[key]=fn[key].bind(argThis),Object.keys(fn[key]).length>0&&bindThis(fn[key],target[key],argThis)})}(c3_chart_fn,this,this)}function ChartInternal(api){var $$=this;$$.d3=window.d3?window.d3:"undefined"!=typeof require?require("d3"):void 0,$$.api=api,$$.config=$$.getDefaultConfig(),$$.data={},$$.cache={},$$.axes={}}function Axis(owner){API.call(this,owner)}function c3_axis(d3,params){function axisX(selection,x){selection.attr("transform",function(d){return"translate("+Math.ceil(x(d)+tickOffset)+", 0)"})}function axisY(selection,y){selection.attr("transform",function(d){return"translate(0,"+Math.ceil(y(d))+")"})}function scaleExtent(domain){var start=domain[0],stop=domain[domain.length-1];return start<stop?[start,stop]:[stop,start]}function generateTicks(scale){var i,domain,ticks=[];if(scale.ticks)return scale.ticks.apply(scale,tickArguments);for(domain=scale.domain(),i=Math.ceil(domain[0]);i<domain[1];i++)ticks.push(i);return ticks.length>0&&ticks[0]>0&&ticks.unshift(ticks[0]-(ticks[1]-ticks[0])),ticks}function copyScale(){var domain,newScale=scale.copy();return params.isCategory&&(domain=scale.domain(),newScale.domain([domain[0],domain[1]-1])),newScale}function textFormatted(v){var formatted=tickFormat?tickFormat(v):v;return void 0!==formatted?formatted:""}function getSizeFor1Char(tick){if(tickTextCharSize)return tickTextCharSize;var size={h:11.5,w:5.5};return tick.select("text").text(textFormatted).each(function(d){var box=this.getBoundingClientRect(),text=textFormatted(d),h=box.height,w=text?box.width/text.length:void 0;h&&w&&(size.h=h,size.w=w)}).text(""),tickTextCharSize=size,size}function transitionise(selection){return params.withoutTransition?selection:d3.transition(selection)}function axis(g){g.each(function(){function splitTickText(d,maxWidth){function split(splitted,text){spaceIndex=void 0;for(var i=1;i<text.length;i++)if(" "===text.charAt(i)&&(spaceIndex=i),subtext=text.substr(0,i+1),textWidth=sizeFor1Char.w*subtext.length,maxWidth<textWidth)return split(splitted.concat(text.substr(0,spaceIndex||i)),text.slice(spaceIndex?spaceIndex+1:i));return splitted.concat(text)}var subtext,spaceIndex,textWidth,tickText=textFormatted(d),splitted=[];return"[object Array]"===Object.prototype.toString.call(tickText)?tickText:((!maxWidth||maxWidth<=0)&&(maxWidth=isVertical?95:params.isCategory?Math.ceil(scale1(ticks[1])-scale1(ticks[0]))-12:110),split(splitted,tickText+""))}function tspanDy(d,i){var dy=sizeFor1Char.h;return 0===i&&(dy="left"===orient||"right"===orient?-((counts[d.index]-1)*(sizeFor1Char.h/2)-3):".71em"),dy}function tickSize(d){var tickPosition=scale(d)+(tickCentered?0:tickOffset);return range[0]<tickPosition&&tickPosition<range[1]?innerTickSize:0}var tickTransform,tickX,tickY,g=axis.g=d3.select(this),scale0=this.__chart__||scale,scale1=this.__chart__=copyScale(),ticks=tickValues||generateTicks(scale1),tick=g.selectAll(".tick").data(ticks,scale1),tickEnter=tick.enter().insert("g",".domain").attr("class","tick").style("opacity",1e-6),tickExit=tick.exit().remove(),tickUpdate=transitionise(tick).style("opacity",1),range=scale.rangeExtent?scale.rangeExtent():scaleExtent(scale.range()),path=g.selectAll(".domain").data([0]),pathUpdate=(path.enter().append("path").attr("class","domain"),transitionise(path));tickEnter.append("line"),tickEnter.append("text");var lineEnter=tickEnter.select("line"),lineUpdate=tickUpdate.select("line"),textEnter=tickEnter.select("text"),textUpdate=tickUpdate.select("text");params.isCategory?(tickOffset=Math.ceil((scale1(1)-scale1(0))/2),tickX=tickCentered?0:tickOffset,tickY=tickCentered?tickOffset:0):tickOffset=tickX=0;var text,tspan,sizeFor1Char=getSizeFor1Char(g.select(".tick")),counts=[],tickLength=Math.max(innerTickSize,0)+tickPadding,isVertical="left"===orient||"right"===orient;text=tick.select("text"),tspan=text.selectAll("tspan").data(function(d,i){var splitted=params.tickMultiline?splitTickText(d,params.tickWidth):[].concat(textFormatted(d));return counts[i]=splitted.length,splitted.map(function(s){return{index:i,splitted:s}})}),tspan.enter().append("tspan"),tspan.exit().remove(),tspan.text(function(d){return d.splitted});var rotate=params.tickTextRotate;switch(orient){case"bottom":tickTransform=axisX,lineEnter.attr("y2",innerTickSize),textEnter.attr("y",tickLength),lineUpdate.attr("x1",tickX).attr("x2",tickX).attr("y2",tickSize),textUpdate.attr("x",0).attr("y",function(rotate){return rotate?11.5-rotate/15*2.5*(rotate>0?1:-1):tickLength}(rotate)).style("text-anchor",function(rotate){return rotate?rotate>0?"start":"end":"middle"}(rotate)).attr("transform",function(rotate){return rotate?"rotate("+rotate+")":""}(rotate)),tspan.attr("x",0).attr("dy",tspanDy).attr("dx",function(rotate){return rotate?8*Math.sin(Math.PI*(rotate/180)):0}(rotate)),pathUpdate.attr("d","M"+range[0]+","+outerTickSize+"V0H"+range[1]+"V"+outerTickSize);break;case"top":tickTransform=axisX,lineEnter.attr("y2",-innerTickSize),textEnter.attr("y",-tickLength),lineUpdate.attr("x2",0).attr("y2",-innerTickSize),textUpdate.attr("x",0).attr("y",-tickLength),text.style("text-anchor","middle"),tspan.attr("x",0).attr("dy","0em"),pathUpdate.attr("d","M"+range[0]+","+-outerTickSize+"V0H"+range[1]+"V"+-outerTickSize);break;case"left":tickTransform=axisY,lineEnter.attr("x2",-innerTickSize),textEnter.attr("x",-tickLength),lineUpdate.attr("x2",-innerTickSize).attr("y1",tickY).attr("y2",tickY),textUpdate.attr("x",-tickLength).attr("y",tickOffset),text.style("text-anchor","end"),tspan.attr("x",-tickLength).attr("dy",tspanDy),pathUpdate.attr("d","M"+-outerTickSize+","+range[0]+"H0V"+range[1]+"H"+-outerTickSize);break;case"right":tickTransform=axisY,lineEnter.attr("x2",innerTickSize),textEnter.attr("x",tickLength),lineUpdate.attr("x2",innerTickSize).attr("y2",0),textUpdate.attr("x",tickLength).attr("y",0),text.style("text-anchor","start"),tspan.attr("x",tickLength).attr("dy",tspanDy),pathUpdate.attr("d","M"+outerTickSize+","+range[0]+"H0V"+range[1]+"H"+outerTickSize)}if(scale1.rangeBand){var x=scale1,dx=x.rangeBand()/2;scale0=scale1=function(d){return x(d)+dx}}else scale0.rangeBand?scale0=scale1:tickExit.call(tickTransform,scale1);tickEnter.call(tickTransform,scale0),tickUpdate.call(tickTransform,scale1)})}var outerTickSize,tickFormat,tickArguments,tickCentered,scale=d3.scale.linear(),orient="bottom",innerTickSize=6,tickPadding=3,tickValues=null,tickOffset=0,tickCulling=!0;return params=params||{},outerTickSize=params.withOuterTick?6:0,axis.scale=function(x){return arguments.length?(scale=x,axis):scale},axis.orient=function(x){return arguments.length?(orient=x in{top:1,right:1,bottom:1,left:1}?x+"":"bottom",axis):orient},axis.tickFormat=function(format){return arguments.length?(tickFormat=format,axis):tickFormat},axis.tickCentered=function(isCentered){return arguments.length?(tickCentered=isCentered,axis):tickCentered},axis.tickOffset=function(){return tickOffset},axis.tickInterval=function(){var interval,length;return params.isCategory?interval=2*tickOffset:(length=axis.g.select("path.domain").node().getTotalLength()-2*outerTickSize,interval=length/axis.g.selectAll("line").size()),interval===1/0?0:interval},axis.ticks=function(){return arguments.length?(tickArguments=arguments,axis):tickArguments},axis.tickCulling=function(culling){return arguments.length?(tickCulling=culling,axis):tickCulling},axis.tickValues=function(x){if("function"==typeof x)tickValues=function(){return x(scale.domain())};else{if(!arguments.length)return tickValues;tickValues=x}return axis},axis}var c3_chart_fn,c3_chart_internal_fn,c3={version:"0.4.11"};c3.generate=function(config){return new Chart(config)},c3.chart={fn:Chart.prototype,internal:{fn:ChartInternal.prototype,axis:{fn:Axis.prototype}}},c3_chart_fn=c3.chart.fn,c3_chart_internal_fn=c3.chart.internal.fn,c3.chart.internal.axis.fn,c3_chart_internal_fn.beforeInit=function(){},c3_chart_internal_fn.afterInit=function(){},c3_chart_internal_fn.init=function(){var $$=this,config=$$.config;if($$.initParams(),config.data_url)$$.convertUrlToData(config.data_url,config.data_mimeType,config.data_headers,config.data_keys,$$.initWithData);else if(config.data_json)$$.initWithData($$.convertJsonToData(config.data_json,config.data_keys));else if(config.data_rows)$$.initWithData($$.convertRowsToData(config.data_rows));else{if(!config.data_columns)throw Error("url or json or rows or columns is required.");$$.initWithData($$.convertColumnsToData(config.data_columns))}},c3_chart_internal_fn.initParams=function(){var $$=this,d3=$$.d3,config=$$.config;$$.clipId="c3-"+ +new Date+"-clip",$$.clipIdForXAxis=$$.clipId+"-xaxis",$$.clipIdForYAxis=$$.clipId+"-yaxis",$$.clipIdForGrid=$$.clipId+"-grid",$$.clipIdForSubchart=$$.clipId+"-subchart",$$.clipPath=$$.getClipPath($$.clipId),$$.clipPathForXAxis=$$.getClipPath($$.clipIdForXAxis),$$.clipPathForYAxis=$$.getClipPath($$.clipIdForYAxis),$$.clipPathForGrid=$$.getClipPath($$.clipIdForGrid),$$.clipPathForSubchart=$$.getClipPath($$.clipIdForSubchart),$$.dragStart=null,$$.dragging=!1,$$.flowing=!1,$$.cancelClick=!1,$$.mouseover=!1,$$.transiting=!1,$$.color=$$.generateColor(),$$.levelColor=$$.generateLevelColor(),$$.dataTimeFormat=config.data_xLocaltime?d3.time.format:d3.time.format.utc,$$.axisTimeFormat=config.axis_x_localtime?d3.time.format:d3.time.format.utc,$$.defaultAxisTimeFormat=$$.axisTimeFormat.multi([[".%L",function(d){return d.getMilliseconds()}],[":%S",function(d){return d.getSeconds()}],["%I:%M",function(d){return d.getMinutes()}],["%I %p",function(d){return d.getHours()}],["%-m/%-d",function(d){return d.getDay()&&1!==d.getDate()}],["%-m/%-d",function(d){return 1!==d.getDate()}],["%-m/%-d",function(d){return d.getMonth()}],["%Y/%-m/%-d",function(){return!0}]]),$$.hiddenTargetIds=[],$$.hiddenLegendIds=[],$$.focusedTargetIds=[],$$.defocusedTargetIds=[],$$.xOrient=config.axis_rotated?"left":"bottom",$$.yOrient=config.axis_rotated?config.axis_y_inner?"top":"bottom":config.axis_y_inner?"right":"left",$$.y2Orient=config.axis_rotated?config.axis_y2_inner?"bottom":"top":config.axis_y2_inner?"left":"right",$$.subXOrient=config.axis_rotated?"left":"bottom",$$.isLegendRight="right"===config.legend_position,$$.isLegendInset="inset"===config.legend_position,$$.isLegendTop="top-left"===config.legend_inset_anchor||"top-right"===config.legend_inset_anchor,$$.isLegendLeft="top-left"===config.legend_inset_anchor||"bottom-left"===config.legend_inset_anchor,$$.legendStep=0,$$.legendItemWidth=0,$$.legendItemHeight=0,$$.currentMaxTickWidths={x:0,y:0,y2:0},$$.rotated_padding_left=30,$$.rotated_padding_right=config.axis_rotated&&!config.axis_x_show?0:30,$$.rotated_padding_top=5,$$.withoutFadeIn={},$$.intervalForObserveInserted=void 0,$$.axes.subx=d3.selectAll([])},c3_chart_internal_fn.initChartElements=function(){this.initBar&&this.initBar(),this.initLine&&this.initLine(),this.initArc&&this.initArc(),this.initGauge&&this.initGauge(),this.initText&&this.initText()},c3_chart_internal_fn.initWithData=function(data){var defs,main,$$=this,d3=$$.d3,config=$$.config,binding=!0;$$.axis=new Axis($$),$$.initPie&&$$.initPie(),$$.initBrush&&$$.initBrush(),$$.initZoom&&$$.initZoom(),config.bindto?"function"==typeof config.bindto.node?$$.selectChart=config.bindto:$$.selectChart=d3.select(config.bindto):$$.selectChart=d3.selectAll([]),$$.selectChart.empty()&&($$.selectChart=d3.select(document.createElement("div")).style("opacity",0),$$.observeInserted($$.selectChart),binding=!1),$$.selectChart.html("").classed("c3",!0),$$.data.xs={},$$.data.targets=$$.convertDataToTargets(data),config.data_filter&&($$.data.targets=$$.data.targets.filter(config.data_filter)),config.data_hide&&$$.addHiddenTargetIds(!0===config.data_hide?$$.mapToIds($$.data.targets):config.data_hide),config.legend_hide&&$$.addHiddenLegendIds(!0===config.legend_hide?$$.mapToIds($$.data.targets):config.legend_hide),$$.hasType("gauge")&&(config.legend_show=!1),$$.updateSizes(),$$.updateScales(),$$.x.domain(d3.extent($$.getXDomain($$.data.targets))),$$.y.domain($$.getYDomain($$.data.targets,"y")),$$.y2.domain($$.getYDomain($$.data.targets,"y2")),$$.subX.domain($$.x.domain()),$$.subY.domain($$.y.domain()),$$.subY2.domain($$.y2.domain()),$$.orgXDomain=$$.x.domain(),$$.brush&&$$.brush.scale($$.subX),config.zoom_enabled&&$$.zoom.scale($$.x),$$.svg=$$.selectChart.append("svg").style("overflow","hidden").on("mouseenter",function(){return config.onmouseover.call($$)}).on("mouseleave",function(){return config.onmouseout.call($$)}),$$.config.svg_classname&&$$.svg.attr("class",$$.config.svg_classname),defs=$$.svg.append("defs"),$$.clipChart=$$.appendClip(defs,$$.clipId),$$.clipXAxis=$$.appendClip(defs,$$.clipIdForXAxis),$$.clipYAxis=$$.appendClip(defs,$$.clipIdForYAxis),$$.clipGrid=$$.appendClip(defs,$$.clipIdForGrid),$$.clipSubchart=$$.appendClip(defs,$$.clipIdForSubchart),$$.updateSvgSize(),main=$$.main=$$.svg.append("g").attr("transform",$$.getTranslate("main")),$$.initSubchart&&$$.initSubchart(),$$.initTooltip&&$$.initTooltip(),$$.initLegend&&$$.initLegend(),$$.initTitle&&$$.initTitle(),main.append("text").attr("class",CLASS.text+" "+CLASS.empty).attr("text-anchor","middle").attr("dominant-baseline","middle"),$$.initRegion(),$$.initGrid(),main.append("g").attr("clip-path",$$.clipPath).attr("class",CLASS.chart),config.grid_lines_front&&$$.initGridLines(),$$.initEventRect(),$$.initChartElements(),main.insert("rect",config.zoom_privileged?null:"g."+CLASS.regions).attr("class",CLASS.zoomRect).attr("width",$$.width).attr("height",$$.height).style("opacity",0).on("dblclick.zoom",null),config.axis_x_extent&&$$.brush.extent($$.getDefaultExtent()),$$.axis.init(),$$.updateTargets($$.data.targets),binding&&($$.updateDimension(),$$.config.oninit.call($$),$$.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1})),$$.bindResize(),$$.api.element=$$.selectChart.node()},c3_chart_internal_fn.smoothLines=function(el,type){var $$=this;"grid"===type&&el.each(function(){var g=$$.d3.select(this),x1=g.attr("x1"),x2=g.attr("x2"),y1=g.attr("y1"),y2=g.attr("y2");g.attr({x1:Math.ceil(x1),x2:Math.ceil(x2),y1:Math.ceil(y1),y2:Math.ceil(y2)})})},c3_chart_internal_fn.updateSizes=function(){var $$=this,config=$$.config,legendHeight=$$.legend?$$.getLegendHeight():0,legendWidth=$$.legend?$$.getLegendWidth():0,legendHeightForBottom=$$.isLegendRight||$$.isLegendInset?0:legendHeight,hasArc=$$.hasArcType(),xAxisHeight=config.axis_rotated||hasArc?0:$$.getHorizontalAxisHeight("x"),subchartHeight=config.subchart_show&&!hasArc?config.subchart_size_height+xAxisHeight:0;$$.currentWidth=$$.getCurrentWidth(),$$.currentHeight=$$.getCurrentHeight(),$$.margin=config.axis_rotated?{top:$$.getHorizontalAxisHeight("y2")+$$.getCurrentPaddingTop(),right:hasArc?0:$$.getCurrentPaddingRight(),bottom:$$.getHorizontalAxisHeight("y")+legendHeightForBottom+$$.getCurrentPaddingBottom(),left:subchartHeight+(hasArc?0:$$.getCurrentPaddingLeft())}:{top:4+$$.getCurrentPaddingTop(),right:hasArc?0:$$.getCurrentPaddingRight(),bottom:xAxisHeight+subchartHeight+legendHeightForBottom+$$.getCurrentPaddingBottom(),left:hasArc?0:$$.getCurrentPaddingLeft()},$$.margin2=config.axis_rotated?{top:$$.margin.top,right:NaN,bottom:20+legendHeightForBottom,left:$$.rotated_padding_left}:{top:$$.currentHeight-subchartHeight-legendHeightForBottom,right:NaN,bottom:xAxisHeight+legendHeightForBottom,left:$$.margin.left},$$.margin3={top:0,right:NaN,bottom:0,left:0},$$.updateSizeForLegend&&$$.updateSizeForLegend(legendHeight,legendWidth),$$.width=$$.currentWidth-$$.margin.left-$$.margin.right,$$.height=$$.currentHeight-$$.margin.top-$$.margin.bottom,$$.width<0&&($$.width=0),$$.height<0&&($$.height=0),$$.width2=config.axis_rotated?$$.margin.left-$$.rotated_padding_left-$$.rotated_padding_right:$$.width,$$.height2=config.axis_rotated?$$.height:$$.currentHeight-$$.margin2.top-$$.margin2.bottom,$$.width2<0&&($$.width2=0),$$.height2<0&&($$.height2=0),$$.arcWidth=$$.width-($$.isLegendRight?legendWidth+10:0),$$.arcHeight=$$.height-($$.isLegendRight?0:10),$$.hasType("gauge")&&!config.gauge_fullCircle&&($$.arcHeight+=$$.height-$$.getGaugeLabelHeight()),$$.updateRadius&&$$.updateRadius(),$$.isLegendRight&&hasArc&&($$.margin3.left=$$.arcWidth/2+1.1*$$.radiusExpanded)},c3_chart_internal_fn.updateTargets=function(targets){var $$=this;$$.updateTargetsForText(targets),$$.updateTargetsForBar(targets),$$.updateTargetsForLine(targets),$$.hasArcType()&&$$.updateTargetsForArc&&$$.updateTargetsForArc(targets),$$.updateTargetsForSubchart&&$$.updateTargetsForSubchart(targets),$$.showTargets()},c3_chart_internal_fn.showTargets=function(){var $$=this;$$.svg.selectAll("."+CLASS.target).filter(function(d){return $$.isTargetToShow(d.id)}).transition().duration($$.config.transition_duration).style("opacity",1)},c3_chart_internal_fn.redraw=function(options,transitions){var withY,withSubchart,withTransition,withTransitionForExit,withTransitionForAxis,withTransform,withUpdateXDomain,withUpdateOrgXDomain,withTrimXDomain,withLegend,withEventRect,withDimension,withUpdateXAxis,drawArea,drawBar,drawLine,xForText,yForText,duration,durationForExit,durationForAxis,waitForDraw,flow,tickValues,i,intervalForCulling,xDomainForZoom,cx,cy,$$=this,main=$$.main,d3=$$.d3,config=$$.config,areaIndices=$$.getShapeIndices($$.isAreaType),barIndices=$$.getShapeIndices($$.isBarType),lineIndices=$$.getShapeIndices($$.isLineType),hideAxis=$$.hasArcType(),targetsToShow=$$.filterTargetsToShow($$.data.targets),xv=$$.xv.bind($$);if(options=options||{},withY=getOption(options,"withY",!0),withSubchart=getOption(options,"withSubchart",!0),withTransition=getOption(options,"withTransition",!0),withTransform=getOption(options,"withTransform",!1),withUpdateXDomain=getOption(options,"withUpdateXDomain",!1),withUpdateOrgXDomain=getOption(options,"withUpdateOrgXDomain",!1),withTrimXDomain=getOption(options,"withTrimXDomain",!0),withUpdateXAxis=getOption(options,"withUpdateXAxis",withUpdateXDomain),withLegend=getOption(options,"withLegend",!1),withEventRect=getOption(options,"withEventRect",!0),withDimension=getOption(options,"withDimension",!0),withTransitionForExit=getOption(options,"withTransitionForExit",withTransition),withTransitionForAxis=getOption(options,"withTransitionForAxis",withTransition),duration=withTransition?config.transition_duration:0,durationForExit=withTransitionForExit?duration:0,durationForAxis=withTransitionForAxis?duration:0,transitions=transitions||$$.axis.generateTransitions(durationForAxis),withLegend&&config.legend_show?$$.updateLegend($$.mapToIds($$.data.targets),options,transitions):withDimension&&$$.updateDimension(!0),$$.isCategorized()&&0===targetsToShow.length&&$$.x.domain([0,$$.axes.x.selectAll(".tick").size()]),targetsToShow.length?($$.updateXDomain(targetsToShow,withUpdateXDomain,withUpdateOrgXDomain,withTrimXDomain),config.axis_x_tick_values||(tickValues=$$.axis.updateXAxisTickValues(targetsToShow))):($$.xAxis.tickValues([]),$$.subXAxis.tickValues([])),config.zoom_rescale&&!options.flow&&(xDomainForZoom=$$.x.orgDomain()),$$.y.domain($$.getYDomain(targetsToShow,"y",xDomainForZoom)),$$.y2.domain($$.getYDomain(targetsToShow,"y2",xDomainForZoom)),!config.axis_y_tick_values&&config.axis_y_tick_count&&$$.yAxis.tickValues($$.axis.generateTickValues($$.y.domain(),config.axis_y_tick_count)),!config.axis_y2_tick_values&&config.axis_y2_tick_count&&$$.y2Axis.tickValues($$.axis.generateTickValues($$.y2.domain(),config.axis_y2_tick_count)),$$.axis.redraw(transitions,hideAxis),$$.axis.updateLabels(withTransition),(withUpdateXDomain||withUpdateXAxis)&&targetsToShow.length)if(config.axis_x_tick_culling&&tickValues){for(i=1;i<tickValues.length;i++)if(tickValues.length/i<config.axis_x_tick_culling_max){intervalForCulling=i;break}$$.svg.selectAll("."+CLASS.axisX+" .tick text").each(function(e){var index=tickValues.indexOf(e);index>=0&&d3.select(this).style("display",index%intervalForCulling?"none":"block")})}else $$.svg.selectAll("."+CLASS.axisX+" .tick text").style("display","block");drawArea=$$.generateDrawArea?$$.generateDrawArea(areaIndices,!1):void 0,drawBar=$$.generateDrawBar?$$.generateDrawBar(barIndices):void 0,drawLine=$$.generateDrawLine?$$.generateDrawLine(lineIndices,!1):void 0,xForText=$$.generateXYForText(areaIndices,barIndices,lineIndices,!0),yForText=$$.generateXYForText(areaIndices,barIndices,lineIndices,!1),withY&&($$.subY.domain($$.getYDomain(targetsToShow,"y")),$$.subY2.domain($$.getYDomain(targetsToShow,"y2"))),$$.updateXgridFocus(),main.select("text."+CLASS.text+"."+CLASS.empty).attr("x",$$.width/2).attr("y",$$.height/2).text(config.data_empty_label_text).transition().style("opacity",targetsToShow.length?0:1),$$.updateGrid(duration),$$.updateRegion(duration),$$.updateBar(durationForExit),$$.updateLine(durationForExit),$$.updateArea(durationForExit),$$.updateCircle(),$$.hasDataLabel()&&$$.updateText(durationForExit),$$.redrawTitle&&$$.redrawTitle(),$$.redrawArc&&$$.redrawArc(duration,durationForExit,withTransform),$$.redrawSubchart&&$$.redrawSubchart(withSubchart,transitions,duration,durationForExit,areaIndices,barIndices,lineIndices),main.selectAll("."+CLASS.selectedCircles).filter($$.isBarType.bind($$)).selectAll("circle").remove(),config.interaction_enabled&&!options.flow&&withEventRect&&($$.redrawEventRect(),$$.updateZoom&&$$.updateZoom()),$$.updateCircleY(),cx=($$.config.axis_rotated?$$.circleY:$$.circleX).bind($$),cy=($$.config.axis_rotated?$$.circleX:$$.circleY).bind($$),options.flow&&(flow=$$.generateFlow({targets:targetsToShow,flow:options.flow,duration:options.flow.duration,drawBar:drawBar,drawLine:drawLine,drawArea:drawArea,cx:cx,cy:cy,xv:xv,xForText:xForText,yForText:yForText})),(duration||flow)&&$$.isTabVisible()?d3.transition().duration(duration).each(function(){var transitionsToWait=[];[$$.redrawBar(drawBar,!0),$$.redrawLine(drawLine,!0),$$.redrawArea(drawArea,!0),$$.redrawCircle(cx,cy,!0),$$.redrawText(xForText,yForText,options.flow,!0),$$.redrawRegion(!0),$$.redrawGrid(!0)].forEach(function(transitions){transitions.forEach(function(transition){transitionsToWait.push(transition)})}),waitForDraw=$$.generateWait(),transitionsToWait.forEach(function(t){waitForDraw.add(t)})}).call(waitForDraw,function(){flow&&flow(),config.onrendered&&config.onrendered.call($$)}):($$.redrawBar(drawBar),$$.redrawLine(drawLine),$$.redrawArea(drawArea),$$.redrawCircle(cx,cy),$$.redrawText(xForText,yForText,options.flow),$$.redrawRegion(),$$.redrawGrid(),config.onrendered&&config.onrendered.call($$)),$$.mapToIds($$.data.targets).forEach(function(id){$$.withoutFadeIn[id]=!0})},c3_chart_internal_fn.updateAndRedraw=function(options){var transitions,$$=this,config=$$.config;options=options||{},options.withTransition=getOption(options,"withTransition",!0),options.withTransform=getOption(options,"withTransform",!1),options.withLegend=getOption(options,"withLegend",!1),options.withUpdateXDomain=!0,options.withUpdateOrgXDomain=!0,options.withTransitionForExit=!1,options.withTransitionForTransform=getOption(options,"withTransitionForTransform",options.withTransition),$$.updateSizes(),options.withLegend&&config.legend_show||(transitions=$$.axis.generateTransitions(options.withTransitionForAxis?config.transition_duration:0),$$.updateScales(),$$.updateSvgSize(),$$.transformAll(options.withTransitionForTransform,transitions)),$$.redraw(options,transitions)},c3_chart_internal_fn.redrawWithoutRescale=function(){this.redraw({withY:!1,withSubchart:!1,withEventRect:!1,withTransitionForAxis:!1})},c3_chart_internal_fn.isTimeSeries=function(){return"timeseries"===this.config.axis_x_type},c3_chart_internal_fn.isCategorized=function(){return this.config.axis_x_type.indexOf("categor")>=0},c3_chart_internal_fn.isCustomX=function(){var $$=this,config=$$.config;return!$$.isTimeSeries()&&(config.data_x||notEmpty(config.data_xs))},c3_chart_internal_fn.isTimeSeriesY=function(){return"timeseries"===this.config.axis_y_type},c3_chart_internal_fn.getTranslate=function(target){var x,y,$$=this,config=$$.config;return"main"===target?(x=asHalfPixel($$.margin.left),y=asHalfPixel($$.margin.top)):"context"===target?(x=asHalfPixel($$.margin2.left),y=asHalfPixel($$.margin2.top)):"legend"===target?(x=$$.margin3.left,y=$$.margin3.top):"x"===target?(x=0,y=config.axis_rotated?0:$$.height):"y"===target?(x=0,y=config.axis_rotated?$$.height:0):"y2"===target?(x=config.axis_rotated?0:$$.width,y=config.axis_rotated?1:0):"subx"===target?(x=0,y=config.axis_rotated?0:$$.height2):"arc"===target&&(x=$$.arcWidth/2,y=$$.arcHeight/2),"translate("+x+","+y+")"},c3_chart_internal_fn.initialOpacity=function(d){return null!==d.value&&this.withoutFadeIn[d.id]?1:0},c3_chart_internal_fn.initialOpacityForCircle=function(d){return null!==d.value&&this.withoutFadeIn[d.id]?this.opacityForCircle(d):0},c3_chart_internal_fn.opacityForCircle=function(d){var opacity=this.config.point_show?1:0;return isValue(d.value)?this.isScatterType(d)?.5:opacity:0},c3_chart_internal_fn.opacityForText=function(){return this.hasDataLabel()?1:0},c3_chart_internal_fn.xx=function(d){return d?this.x(d.x):null},c3_chart_internal_fn.xv=function(d){var $$=this,value=d.value;return $$.isTimeSeries()?value=$$.parseDate(d.value):$$.isCategorized()&&"string"==typeof d.value&&(value=$$.config.axis_x_categories.indexOf(d.value)),Math.ceil($$.x(value))},c3_chart_internal_fn.yv=function(d){var $$=this,yScale=d.axis&&"y2"===d.axis?$$.y2:$$.y;return Math.ceil(yScale(d.value))},c3_chart_internal_fn.subxx=function(d){return d?this.subX(d.x):null},c3_chart_internal_fn.transformMain=function(withTransition,transitions){var xAxis,yAxis,y2Axis,$$=this;transitions&&transitions.axisX?xAxis=transitions.axisX:(xAxis=$$.main.select("."+CLASS.axisX),withTransition&&(xAxis=xAxis.transition())),transitions&&transitions.axisY?yAxis=transitions.axisY:(yAxis=$$.main.select("."+CLASS.axisY),withTransition&&(yAxis=yAxis.transition())),transitions&&transitions.axisY2?y2Axis=transitions.axisY2:(y2Axis=$$.main.select("."+CLASS.axisY2),withTransition&&(y2Axis=y2Axis.transition())),(withTransition?$$.main.transition():$$.main).attr("transform",$$.getTranslate("main")),xAxis.attr("transform",$$.getTranslate("x")),yAxis.attr("transform",$$.getTranslate("y")),y2Axis.attr("transform",$$.getTranslate("y2")),$$.main.select("."+CLASS.chartArcs).attr("transform",$$.getTranslate("arc"))},c3_chart_internal_fn.transformAll=function(withTransition,transitions){var $$=this;$$.transformMain(withTransition,transitions),$$.config.subchart_show&&$$.transformContext(withTransition,transitions),$$.legend&&$$.transformLegend(withTransition)},c3_chart_internal_fn.updateSvgSize=function(){var $$=this,brush=$$.svg.select(".c3-brush .background");$$.svg.attr("width",$$.currentWidth).attr("height",$$.currentHeight),$$.svg.selectAll(["#"+$$.clipId,"#"+$$.clipIdForGrid]).select("rect").attr("width",$$.width).attr("height",$$.height),$$.svg.select("#"+$$.clipIdForXAxis).select("rect").attr("x",$$.getXAxisClipX.bind($$)).attr("y",$$.getXAxisClipY.bind($$)).attr("width",$$.getXAxisClipWidth.bind($$)).attr("height",$$.getXAxisClipHeight.bind($$)),$$.svg.select("#"+$$.clipIdForYAxis).select("rect").attr("x",$$.getYAxisClipX.bind($$)).attr("y",$$.getYAxisClipY.bind($$)).attr("width",$$.getYAxisClipWidth.bind($$)).attr("height",$$.getYAxisClipHeight.bind($$)),$$.svg.select("#"+$$.clipIdForSubchart).select("rect").attr("width",$$.width).attr("height",brush.size()?brush.attr("height"):0),$$.svg.select("."+CLASS.zoomRect).attr("width",$$.width).attr("height",$$.height),$$.selectChart.style("max-height",$$.currentHeight+"px")},c3_chart_internal_fn.updateDimension=function(withoutAxis){var $$=this;withoutAxis||($$.config.axis_rotated?($$.axes.x.call($$.xAxis),$$.axes.subx.call($$.subXAxis)):($$.axes.y.call($$.yAxis),$$.axes.y2.call($$.y2Axis))),$$.updateSizes(),$$.updateScales(),$$.updateSvgSize(),$$.transformAll(!1)},c3_chart_internal_fn.observeInserted=function(selection){var observer,$$=this;if("undefined"==typeof MutationObserver)return void window.console.error("MutationObserver not defined.");observer=new MutationObserver(function(mutations){mutations.forEach(function(mutation){"childList"===mutation.type&&mutation.previousSibling&&(observer.disconnect(),
$$.intervalForObserveInserted=window.setInterval(function(){selection.node().parentNode&&(window.clearInterval($$.intervalForObserveInserted),$$.updateDimension(),$$.brush&&$$.brush.update(),$$.config.oninit.call($$),$$.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransition:!1,withTransitionForTransform:!1,withLegend:!0}),selection.transition().style("opacity",1))},10))})}),observer.observe(selection.node(),{attributes:!0,childList:!0,characterData:!0})},c3_chart_internal_fn.bindResize=function(){var $$=this,config=$$.config;if($$.resizeFunction=$$.generateResize(),$$.resizeFunction.add(function(){config.onresize.call($$)}),config.resize_auto&&$$.resizeFunction.add(function(){void 0!==$$.resizeTimeout&&window.clearTimeout($$.resizeTimeout),$$.resizeTimeout=window.setTimeout(function(){delete $$.resizeTimeout,$$.api.flush()},100)}),$$.resizeFunction.add(function(){config.onresized.call($$)}),window.attachEvent)window.attachEvent("onresize",$$.resizeFunction);else if(window.addEventListener)window.addEventListener("resize",$$.resizeFunction,!1);else{var wrapper=window.onresize;wrapper?wrapper.add&&wrapper.remove||(wrapper=$$.generateResize(),wrapper.add(window.onresize)):wrapper=$$.generateResize(),wrapper.add($$.resizeFunction),window.onresize=wrapper}},c3_chart_internal_fn.generateResize=function(){function callResizeFunctions(){resizeFunctions.forEach(function(f){f()})}var resizeFunctions=[];return callResizeFunctions.add=function(f){resizeFunctions.push(f)},callResizeFunctions.remove=function(f){for(var i=0;i<resizeFunctions.length;i++)if(resizeFunctions[i]===f){resizeFunctions.splice(i,1);break}},callResizeFunctions},c3_chart_internal_fn.endall=function(transition,callback){var n=0;transition.each(function(){++n}).each("end",function(){--n||callback.apply(this,arguments)})},c3_chart_internal_fn.generateWait=function(){var transitionsToWait=[],f=function(transition,callback){var timer=setInterval(function(){var done=0;transitionsToWait.forEach(function(t){if(t.empty())return void(done+=1);try{t.transition()}catch(e){done+=1}}),done===transitionsToWait.length&&(clearInterval(timer),callback&&callback())},10)};return f.add=function(transition){transitionsToWait.push(transition)},f},c3_chart_internal_fn.parseDate=function(date){var parsedDate,$$=this;return date instanceof Date?parsedDate=date:"string"==typeof date?parsedDate=$$.dataTimeFormat($$.config.data_xFormat).parse(date):"number"!=typeof date||isNaN(date)||(parsedDate=new Date(+date)),parsedDate&&!isNaN(+parsedDate)||window.console.error("Failed to parse x '"+date+"' to Date object"),parsedDate},c3_chart_internal_fn.isTabVisible=function(){var hidden;return void 0!==document.hidden?hidden="hidden":void 0!==document.mozHidden?hidden="mozHidden":void 0!==document.msHidden?hidden="msHidden":void 0!==document.webkitHidden&&(hidden="webkitHidden"),!document[hidden]},c3_chart_internal_fn.getDefaultConfig=function(){var config={bindto:"#chart",svg_classname:void 0,size_width:void 0,size_height:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,resize_auto:!0,zoom_enabled:!1,zoom_extent:void 0,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:function(){},zoom_onzoomstart:function(){},zoom_onzoomend:function(){},zoom_x_min:void 0,zoom_x_max:void 0,interaction_brighten:!0,interaction_enabled:!0,onmouseover:function(){},onmouseout:function(){},onresize:function(){},onresized:function(){},oninit:function(){},onrendered:function(){},transition_duration:350,data_x:void 0,data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_idConverter:function(id){return id},data_names:{},data_classes:{},data_groups:[],data_axes:{},data_type:void 0,data_types:{},data_labels:{},data_order:"desc",data_regions:{},data_color:void 0,data_colors:{},data_hide:!1,data_filter:void 0,data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function(){return!0},data_selection_multiple:!0,data_selection_draggable:!1,data_onclick:function(){},data_onmouseover:function(){},data_onmouseout:function(){},data_onselected:function(){},data_onunselected:function(){},data_url:void 0,data_headers:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:void 0,data_keys:void 0,data_empty_label_text:"",subchart_show:!1,subchart_size_height:60,subchart_axis_x_show:!0,subchart_onbrush:function(){},color_pattern:[],color_threshold:{},legend_show:!0,legend_hide:!1,legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_onclick:void 0,legend_item_onmouseover:void 0,legend_item_onmouseout:void 0,legend_equally:!1,legend_padding:0,legend_item_tile_width:10,legend_item_tile_height:10,axis_rotated:!1,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_count:void 0,axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_width:null,axis_x_max:void 0,axis_x_min:void 0,axis_x_padding:{},axis_x_height:void 0,axis_x_extent:void 0,axis_x_label:{},axis_y_show:!0,axis_y_type:void 0,axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:void 0,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_rotate:0,axis_y_tick_count:void 0,axis_y_tick_time_value:void 0,axis_y_tick_time_interval:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y2_show:!1,axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:void 0,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_count:void 0,axis_y2_padding:{},axis_y2_default:void 0,grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:10,grid_focus_show:!0,grid_lines_front:!0,point_show:!0,point_r:2.5,point_sensitivity:10,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_select_r:void 0,line_connectNull:!1,line_step_type:"step",bar_width:void 0,bar_width_ratio:.6,bar_width_max:void 0,bar_zerobased:!0,area_zerobased:!0,area_above:!1,pie_label_show:!0,pie_label_format:void 0,pie_label_threshold:.05,pie_label_ratio:void 0,pie_expand:{},pie_expand_duration:50,gauge_fullCircle:!1,gauge_label_show:!0,gauge_label_format:void 0,gauge_min:0,gauge_max:100,gauge_startingAngle:-1*Math.PI/2,gauge_units:void 0,gauge_width:void 0,gauge_expand:{},gauge_expand_duration:50,donut_label_show:!0,donut_label_format:void 0,donut_label_threshold:.05,donut_label_ratio:void 0,donut_width:void 0,donut_title:"",donut_expand:{},donut_expand_duration:50,spline_interpolation_type:"cardinal",regions:[],tooltip_show:!0,tooltip_grouped:!0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_position:void 0,tooltip_contents:function(d,defaultTitleFormat,defaultValueFormat,color){return this.getTooltipContent?this.getTooltipContent(d,defaultTitleFormat,defaultValueFormat,color):""},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"},tooltip_onshow:function(){},tooltip_onhide:function(){},title_text:void 0,title_padding:{top:0,right:0,bottom:0,left:0},title_position:"top-center"};return Object.keys(this.additionalConfig).forEach(function(key){config[key]=this.additionalConfig[key]},this),config},c3_chart_internal_fn.additionalConfig={},c3_chart_internal_fn.loadConfig=function(config){function find(){var key=keys.shift();return key&&target&&"object"==typeof target&&key in target?(target=target[key],find()):key?void 0:target}var target,keys,read,this_config=this.config;Object.keys(this_config).forEach(function(key){target=config,keys=key.split("_"),read=find(),isDefined(read)&&(this_config[key]=read)})},c3_chart_internal_fn.getScale=function(min,max,forTimeseries){return(forTimeseries?this.d3.time.scale():this.d3.scale.linear()).range([min,max])},c3_chart_internal_fn.getX=function(min,max,domain,offset){var key,$$=this,scale=$$.getScale(min,max,$$.isTimeSeries()),_scale=domain?scale.domain(domain):scale;$$.isCategorized()?(offset=offset||function(){return 0},scale=function(d,raw){var v=_scale(d)+offset(d);return raw?v:Math.ceil(v)}):scale=function(d,raw){var v=_scale(d);return raw?v:Math.ceil(v)};for(key in _scale)scale[key]=_scale[key];return scale.orgDomain=function(){return _scale.domain()},$$.isCategorized()&&(scale.domain=function(domain){return arguments.length?(_scale.domain(domain),scale):(domain=this.orgDomain(),[domain[0],domain[1]+1])}),scale},c3_chart_internal_fn.getY=function(min,max,domain){var scale=this.getScale(min,max,this.isTimeSeriesY());return domain&&scale.domain(domain),scale},c3_chart_internal_fn.getYScale=function(id){return"y2"===this.axis.getId(id)?this.y2:this.y},c3_chart_internal_fn.getSubYScale=function(id){return"y2"===this.axis.getId(id)?this.subY2:this.subY},c3_chart_internal_fn.updateScales=function(){var $$=this,config=$$.config,forInit=!$$.x;$$.xMin=config.axis_rotated?1:0,$$.xMax=config.axis_rotated?$$.height:$$.width,$$.yMin=config.axis_rotated?0:$$.height,$$.yMax=config.axis_rotated?$$.width:1,$$.subXMin=$$.xMin,$$.subXMax=$$.xMax,$$.subYMin=config.axis_rotated?0:$$.height2,$$.subYMax=config.axis_rotated?$$.width2:1,$$.x=$$.getX($$.xMin,$$.xMax,forInit?void 0:$$.x.orgDomain(),function(){return $$.xAxis.tickOffset()}),$$.y=$$.getY($$.yMin,$$.yMax,forInit?config.axis_y_default:$$.y.domain()),$$.y2=$$.getY($$.yMin,$$.yMax,forInit?config.axis_y2_default:$$.y2.domain()),$$.subX=$$.getX($$.xMin,$$.xMax,$$.orgXDomain,function(d){return d%1?0:$$.subXAxis.tickOffset()}),$$.subY=$$.getY($$.subYMin,$$.subYMax,forInit?config.axis_y_default:$$.subY.domain()),$$.subY2=$$.getY($$.subYMin,$$.subYMax,forInit?config.axis_y2_default:$$.subY2.domain()),$$.xAxisTickFormat=$$.axis.getXAxisTickFormat(),$$.xAxisTickValues=$$.axis.getXAxisTickValues(),$$.yAxisTickValues=$$.axis.getYAxisTickValues(),$$.y2AxisTickValues=$$.axis.getY2AxisTickValues(),$$.xAxis=$$.axis.getXAxis($$.x,$$.xOrient,$$.xAxisTickFormat,$$.xAxisTickValues,config.axis_x_tick_outer),$$.subXAxis=$$.axis.getXAxis($$.subX,$$.subXOrient,$$.xAxisTickFormat,$$.xAxisTickValues,config.axis_x_tick_outer),$$.yAxis=$$.axis.getYAxis($$.y,$$.yOrient,config.axis_y_tick_format,$$.yAxisTickValues,config.axis_y_tick_outer),$$.y2Axis=$$.axis.getYAxis($$.y2,$$.y2Orient,config.axis_y2_tick_format,$$.y2AxisTickValues,config.axis_y2_tick_outer),forInit||($$.brush&&$$.brush.scale($$.subX),config.zoom_enabled&&$$.zoom.scale($$.x)),$$.updateArc&&$$.updateArc()},c3_chart_internal_fn.getYDomainMin=function(targets){var j,k,baseId,idsInGroup,id,hasNegativeValue,$$=this,config=$$.config,ids=$$.mapToIds(targets),ys=$$.getValuesAsIdKeyed(targets);if(config.data_groups.length>0)for(hasNegativeValue=$$.hasNegativeValueInTargets(targets),j=0;j<config.data_groups.length;j++)if(idsInGroup=config.data_groups[j].filter(function(id){return ids.indexOf(id)>=0}),0!==idsInGroup.length)for(baseId=idsInGroup[0],hasNegativeValue&&ys[baseId]&&ys[baseId].forEach(function(v,i){ys[baseId][i]=v<0?v:0}),k=1;k<idsInGroup.length;k++)id=idsInGroup[k],ys[id]&&ys[id].forEach(function(v,i){$$.axis.getId(id)!==$$.axis.getId(baseId)||!ys[baseId]||hasNegativeValue&&+v>0||(ys[baseId][i]+=+v)});return $$.d3.min(Object.keys(ys).map(function(key){return $$.d3.min(ys[key])}))},c3_chart_internal_fn.getYDomainMax=function(targets){var j,k,baseId,idsInGroup,id,hasPositiveValue,$$=this,config=$$.config,ids=$$.mapToIds(targets),ys=$$.getValuesAsIdKeyed(targets);if(config.data_groups.length>0)for(hasPositiveValue=$$.hasPositiveValueInTargets(targets),j=0;j<config.data_groups.length;j++)if(idsInGroup=config.data_groups[j].filter(function(id){return ids.indexOf(id)>=0}),0!==idsInGroup.length)for(baseId=idsInGroup[0],hasPositiveValue&&ys[baseId]&&ys[baseId].forEach(function(v,i){ys[baseId][i]=v>0?v:0}),k=1;k<idsInGroup.length;k++)id=idsInGroup[k],ys[id]&&ys[id].forEach(function(v,i){$$.axis.getId(id)!==$$.axis.getId(baseId)||!ys[baseId]||hasPositiveValue&&+v<0||(ys[baseId][i]+=+v)});return $$.d3.max(Object.keys(ys).map(function(key){return $$.d3.max(ys[key])}))},c3_chart_internal_fn.getYDomain=function(targets,axisId,xDomain){var domain,domainLength,padding_top,padding_bottom,yDomainAbs,lengths,diff,ratio,isAllPositive,isAllNegative,$$=this,config=$$.config,targetsByAxisId=targets.filter(function(t){return $$.axis.getId(t.id)===axisId}),yTargets=xDomain?$$.filterByXDomain(targetsByAxisId,xDomain):targetsByAxisId,yMin="y2"===axisId?config.axis_y2_min:config.axis_y_min,yMax="y2"===axisId?config.axis_y2_max:config.axis_y_max,yDomainMin=$$.getYDomainMin(yTargets),yDomainMax=$$.getYDomainMax(yTargets),center="y2"===axisId?config.axis_y2_center:config.axis_y_center,isZeroBased=$$.hasType("bar",yTargets)&&config.bar_zerobased||$$.hasType("area",yTargets)&&config.area_zerobased,isInverted="y2"===axisId?config.axis_y2_inverted:config.axis_y_inverted,showHorizontalDataLabel=$$.hasDataLabel()&&config.axis_rotated,showVerticalDataLabel=$$.hasDataLabel()&&!config.axis_rotated;return yDomainMin=isValue(yMin)?yMin:isValue(yMax)?yDomainMin<yMax?yDomainMin:yMax-10:yDomainMin,yDomainMax=isValue(yMax)?yMax:isValue(yMin)?yMin<yDomainMax?yDomainMax:yMin+10:yDomainMax,0===yTargets.length?"y2"===axisId?$$.y2.domain():$$.y.domain():(isNaN(yDomainMin)&&(yDomainMin=0),isNaN(yDomainMax)&&(yDomainMax=yDomainMin),yDomainMin===yDomainMax&&(yDomainMin<0?yDomainMax=0:yDomainMin=0),isAllPositive=yDomainMin>=0&&yDomainMax>=0,isAllNegative=yDomainMin<=0&&yDomainMax<=0,(isValue(yMin)&&isAllPositive||isValue(yMax)&&isAllNegative)&&(isZeroBased=!1),isZeroBased&&(isAllPositive&&(yDomainMin=0),isAllNegative&&(yDomainMax=0)),domainLength=Math.abs(yDomainMax-yDomainMin),padding_top=padding_bottom=.1*domainLength,void 0!==center&&(yDomainAbs=Math.max(Math.abs(yDomainMin),Math.abs(yDomainMax)),yDomainMax=center+yDomainAbs,yDomainMin=center-yDomainAbs),showHorizontalDataLabel?(lengths=$$.getDataLabelLength(yDomainMin,yDomainMax,"width"),diff=diffDomain($$.y.range()),ratio=[lengths[0]/diff,lengths[1]/diff],padding_top+=domainLength*(ratio[1]/(1-ratio[0]-ratio[1])),padding_bottom+=domainLength*(ratio[0]/(1-ratio[0]-ratio[1]))):showVerticalDataLabel&&(lengths=$$.getDataLabelLength(yDomainMin,yDomainMax,"height"),padding_top+=$$.axis.convertPixelsToAxisPadding(lengths[1],domainLength),padding_bottom+=$$.axis.convertPixelsToAxisPadding(lengths[0],domainLength)),"y"===axisId&&notEmpty(config.axis_y_padding)&&(padding_top=$$.axis.getPadding(config.axis_y_padding,"top",padding_top,domainLength),padding_bottom=$$.axis.getPadding(config.axis_y_padding,"bottom",padding_bottom,domainLength)),"y2"===axisId&&notEmpty(config.axis_y2_padding)&&(padding_top=$$.axis.getPadding(config.axis_y2_padding,"top",padding_top,domainLength),padding_bottom=$$.axis.getPadding(config.axis_y2_padding,"bottom",padding_bottom,domainLength)),isZeroBased&&(isAllPositive&&(padding_bottom=yDomainMin),isAllNegative&&(padding_top=-yDomainMax)),domain=[yDomainMin-padding_bottom,yDomainMax+padding_top],isInverted?domain.reverse():domain)},c3_chart_internal_fn.getXDomainMin=function(targets){var $$=this,config=$$.config;return isDefined(config.axis_x_min)?$$.isTimeSeries()?this.parseDate(config.axis_x_min):config.axis_x_min:$$.d3.min(targets,function(t){return $$.d3.min(t.values,function(v){return v.x})})},c3_chart_internal_fn.getXDomainMax=function(targets){var $$=this,config=$$.config;return isDefined(config.axis_x_max)?$$.isTimeSeries()?this.parseDate(config.axis_x_max):config.axis_x_max:$$.d3.max(targets,function(t){return $$.d3.max(t.values,function(v){return v.x})})},c3_chart_internal_fn.getXDomainPadding=function(domain){var maxDataCount,padding,paddingLeft,paddingRight,$$=this,config=$$.config,diff=domain[1]-domain[0];return $$.isCategorized()?padding=0:$$.hasType("bar")?(maxDataCount=$$.getMaxDataCount(),padding=maxDataCount>1?diff/(maxDataCount-1)/2:.5):padding=.01*diff,"object"==typeof config.axis_x_padding&&notEmpty(config.axis_x_padding)?(paddingLeft=isValue(config.axis_x_padding.left)?config.axis_x_padding.left:padding,paddingRight=isValue(config.axis_x_padding.right)?config.axis_x_padding.right:padding):paddingLeft=paddingRight="number"==typeof config.axis_x_padding?config.axis_x_padding:padding,{left:paddingLeft,right:paddingRight}},c3_chart_internal_fn.getXDomain=function(targets){var $$=this,xDomain=[$$.getXDomainMin(targets),$$.getXDomainMax(targets)],firstX=xDomain[0],lastX=xDomain[1],padding=$$.getXDomainPadding(xDomain),min=0,max=0;return firstX-lastX!=0||$$.isCategorized()||($$.isTimeSeries()?(firstX=new Date(.5*firstX.getTime()),lastX=new Date(1.5*lastX.getTime())):(firstX=0===firstX?1:.5*firstX,lastX=0===lastX?-1:1.5*lastX)),(firstX||0===firstX)&&(min=$$.isTimeSeries()?new Date(firstX.getTime()-padding.left):firstX-padding.left),(lastX||0===lastX)&&(max=$$.isTimeSeries()?new Date(lastX.getTime()+padding.right):lastX+padding.right),[min,max]},c3_chart_internal_fn.updateXDomain=function(targets,withUpdateXDomain,withUpdateOrgXDomain,withTrim,domain){var $$=this,config=$$.config;return withUpdateOrgXDomain&&($$.x.domain(domain||$$.d3.extent($$.getXDomain(targets))),$$.orgXDomain=$$.x.domain(),config.zoom_enabled&&$$.zoom.scale($$.x).updateScaleExtent(),$$.subX.domain($$.x.domain()),$$.brush&&$$.brush.scale($$.subX)),withUpdateXDomain&&($$.x.domain(domain||(!$$.brush||$$.brush.empty()?$$.orgXDomain:$$.brush.extent())),config.zoom_enabled&&$$.zoom.scale($$.x).updateScaleExtent()),withTrim&&$$.x.domain($$.trimXDomain($$.x.orgDomain())),$$.x.domain()},c3_chart_internal_fn.trimXDomain=function(domain){var zoomDomain=this.getZoomDomain(),min=zoomDomain[0],max=zoomDomain[1];return domain[0]<=min&&(domain[1]=+domain[1]+(min-domain[0]),domain[0]=min),max<=domain[1]&&(domain[0]=+domain[0]-(domain[1]-max),domain[1]=max),domain},c3_chart_internal_fn.isX=function(key){var $$=this,config=$$.config;return config.data_x&&key===config.data_x||notEmpty(config.data_xs)&&hasValue(config.data_xs,key)},c3_chart_internal_fn.isNotX=function(key){return!this.isX(key)},c3_chart_internal_fn.getXKey=function(id){var $$=this,config=$$.config;return config.data_x?config.data_x:notEmpty(config.data_xs)?config.data_xs[id]:null},c3_chart_internal_fn.getXValuesOfXKey=function(key,targets){var xValues,$$=this;return(targets&&notEmpty(targets)?$$.mapToIds(targets):[]).forEach(function(id){$$.getXKey(id)===key&&(xValues=$$.data.xs[id])}),xValues},c3_chart_internal_fn.getIndexByX=function(x){var $$=this,data=$$.filterByX($$.data.targets,x);return data.length?data[0].index:null},c3_chart_internal_fn.getXValue=function(id,i){var $$=this;return id in $$.data.xs&&$$.data.xs[id]&&isValue($$.data.xs[id][i])?$$.data.xs[id][i]:i},c3_chart_internal_fn.getOtherTargetXs=function(){var $$=this,idsForX=Object.keys($$.data.xs);return idsForX.length?$$.data.xs[idsForX[0]]:null},c3_chart_internal_fn.getOtherTargetX=function(index){var xs=this.getOtherTargetXs();return xs&&index<xs.length?xs[index]:null},c3_chart_internal_fn.addXs=function(xs){var $$=this;Object.keys(xs).forEach(function(id){$$.config.data_xs[id]=xs[id]})},c3_chart_internal_fn.hasMultipleX=function(xs){return this.d3.set(Object.keys(xs).map(function(id){return xs[id]})).size()>1},c3_chart_internal_fn.isMultipleX=function(){return notEmpty(this.config.data_xs)||!this.config.data_xSort||this.hasType("scatter")},c3_chart_internal_fn.addName=function(data){var name,$$=this;return data&&(name=$$.config.data_names[data.id],data.name=void 0!==name?name:data.id),data},c3_chart_internal_fn.getValueOnIndex=function(values,index){var valueOnIndex=values.filter(function(v){return v.index===index});return valueOnIndex.length?valueOnIndex[0]:null},c3_chart_internal_fn.updateTargetX=function(targets,x){var $$=this;targets.forEach(function(t){t.values.forEach(function(v,i){v.x=$$.generateTargetX(x[i],t.id,i)}),$$.data.xs[t.id]=x})},c3_chart_internal_fn.updateTargetXs=function(targets,xs){var $$=this;targets.forEach(function(t){xs[t.id]&&$$.updateTargetX([t],xs[t.id])})},c3_chart_internal_fn.generateTargetX=function(rawX,id,index){var $$=this;return $$.isTimeSeries()?rawX?$$.parseDate(rawX):$$.parseDate($$.getXValue(id,index)):$$.isCustomX()&&!$$.isCategorized()?isValue(rawX)?+rawX:$$.getXValue(id,index):index},c3_chart_internal_fn.cloneTarget=function(target){return{id:target.id,id_org:target.id_org,values:target.values.map(function(d){return{x:d.x,value:d.value,id:d.id}})}},c3_chart_internal_fn.updateXs=function(){var $$=this;$$.data.targets.length&&($$.xs=[],$$.data.targets[0].values.forEach(function(v){$$.xs[v.index]=v.x}))},c3_chart_internal_fn.getPrevX=function(i){var x=this.xs[i-1];return void 0!==x?x:null},c3_chart_internal_fn.getNextX=function(i){var x=this.xs[i+1];return void 0!==x?x:null},c3_chart_internal_fn.getMaxDataCount=function(){var $$=this;return $$.d3.max($$.data.targets,function(t){return t.values.length})},c3_chart_internal_fn.getMaxDataCountTarget=function(targets){var maxTarget,length=targets.length,max=0;return length>1?targets.forEach(function(t){t.values.length>max&&(maxTarget=t,max=t.values.length)}):maxTarget=length?targets[0]:null,maxTarget},c3_chart_internal_fn.getEdgeX=function(targets){var $$=this;return targets.length?[$$.d3.min(targets,function(t){return t.values[0].x}),$$.d3.max(targets,function(t){return t.values[t.values.length-1].x})]:[0,0]},c3_chart_internal_fn.mapToIds=function(targets){return targets.map(function(d){return d.id})},c3_chart_internal_fn.mapToTargetIds=function(ids){var $$=this;return ids?[].concat(ids):$$.mapToIds($$.data.targets)},c3_chart_internal_fn.hasTarget=function(targets,id){var i,ids=this.mapToIds(targets);for(i=0;i<ids.length;i++)if(ids[i]===id)return!0;return!1},c3_chart_internal_fn.isTargetToShow=function(targetId){return this.hiddenTargetIds.indexOf(targetId)<0},c3_chart_internal_fn.isLegendToShow=function(targetId){return this.hiddenLegendIds.indexOf(targetId)<0},c3_chart_internal_fn.filterTargetsToShow=function(targets){var $$=this;return targets.filter(function(t){return $$.isTargetToShow(t.id)})},c3_chart_internal_fn.mapTargetsToUniqueXs=function(targets){var $$=this,xs=$$.d3.set($$.d3.merge(targets.map(function(t){return t.values.map(function(v){return+v.x})}))).values();return xs=$$.isTimeSeries()?xs.map(function(x){return new Date(+x)}):xs.map(function(x){return+x}),xs.sort(function(a,b){return a<b?-1:a>b?1:a>=b?0:NaN})},c3_chart_internal_fn.addHiddenTargetIds=function(targetIds){this.hiddenTargetIds=this.hiddenTargetIds.concat(targetIds)},c3_chart_internal_fn.removeHiddenTargetIds=function(targetIds){this.hiddenTargetIds=this.hiddenTargetIds.filter(function(id){return targetIds.indexOf(id)<0})},c3_chart_internal_fn.addHiddenLegendIds=function(targetIds){this.hiddenLegendIds=this.hiddenLegendIds.concat(targetIds)},c3_chart_internal_fn.removeHiddenLegendIds=function(targetIds){this.hiddenLegendIds=this.hiddenLegendIds.filter(function(id){return targetIds.indexOf(id)<0})},c3_chart_internal_fn.getValuesAsIdKeyed=function(targets){var ys={};return targets.forEach(function(t){ys[t.id]=[],t.values.forEach(function(v){ys[t.id].push(v.value)})}),ys},c3_chart_internal_fn.checkValueInTargets=function(targets,checker){var i,j,values,ids=Object.keys(targets);for(i=0;i<ids.length;i++)for(values=targets[ids[i]].values,j=0;j<values.length;j++)if(checker(values[j].value))return!0;return!1},c3_chart_internal_fn.hasNegativeValueInTargets=function(targets){return this.checkValueInTargets(targets,function(v){return v<0})},c3_chart_internal_fn.hasPositiveValueInTargets=function(targets){return this.checkValueInTargets(targets,function(v){return v>0})},c3_chart_internal_fn.isOrderDesc=function(){var config=this.config;return"string"==typeof config.data_order&&"desc"===config.data_order.toLowerCase()},c3_chart_internal_fn.isOrderAsc=function(){var config=this.config;return"string"==typeof config.data_order&&"asc"===config.data_order.toLowerCase()},c3_chart_internal_fn.orderTargets=function(targets){var $$=this,config=$$.config,orderAsc=$$.isOrderAsc(),orderDesc=$$.isOrderDesc();return orderAsc||orderDesc?targets.sort(function(t1,t2){var reducer=function(p,c){return p+Math.abs(c.value)},t1Sum=t1.values.reduce(reducer,0),t2Sum=t2.values.reduce(reducer,0);return orderAsc?t2Sum-t1Sum:t1Sum-t2Sum}):isFunction(config.data_order)&&targets.sort(config.data_order),targets},c3_chart_internal_fn.filterByX=function(targets,x){return this.d3.merge(targets.map(function(t){return t.values})).filter(function(v){return v.x-x==0})},c3_chart_internal_fn.filterRemoveNull=function(data){return data.filter(function(d){return isValue(d.value)})},c3_chart_internal_fn.filterByXDomain=function(targets,xDomain){return targets.map(function(t){return{id:t.id,id_org:t.id_org,values:t.values.filter(function(v){return xDomain[0]<=v.x&&v.x<=xDomain[1]})}})},c3_chart_internal_fn.hasDataLabel=function(){var config=this.config;return!("boolean"!=typeof config.data_labels||!config.data_labels)||!("object"!=typeof config.data_labels||!notEmpty(config.data_labels))},c3_chart_internal_fn.getDataLabelLength=function(min,max,key){var $$=this,lengths=[0,0];return $$.selectChart.select("svg").selectAll(".dummy").data([min,max]).enter().append("text").text(function(d){return $$.dataLabelFormat(d.id)(d)}).each(function(d,i){lengths[i]=1.3*this.getBoundingClientRect()[key]}).remove(),lengths},c3_chart_internal_fn.isNoneArc=function(d){return this.hasTarget(this.data.targets,d.id)},c3_chart_internal_fn.isArc=function(d){return"data"in d&&this.hasTarget(this.data.targets,d.data.id)},c3_chart_internal_fn.findSameXOfValues=function(values,index){var i,targetX=values[index].x,sames=[];for(i=index-1;i>=0&&targetX===values[i].x;i--)sames.push(values[i]);for(i=index;i<values.length&&targetX===values[i].x;i++)sames.push(values[i]);return sames},c3_chart_internal_fn.findClosestFromTargets=function(targets,pos){var candidates,$$=this;return candidates=targets.map(function(target){return $$.findClosest(target.values,pos)}),$$.findClosest(candidates,pos)},c3_chart_internal_fn.findClosest=function(values,pos){var closest,$$=this,minDist=$$.config.point_sensitivity;return values.filter(function(v){return v&&$$.isBarType(v.id)}).forEach(function(v){var shape=$$.main.select("."+CLASS.bars+$$.getTargetSelectorSuffix(v.id)+" ."+CLASS.bar+"-"+v.index).node();!closest&&$$.isWithinBar(shape)&&(closest=v)}),values.filter(function(v){return v&&!$$.isBarType(v.id)}).forEach(function(v){var d=$$.dist(v,pos);d<minDist&&(minDist=d,closest=v)}),closest},c3_chart_internal_fn.dist=function(data,pos){var $$=this,config=$$.config,xIndex=config.axis_rotated?1:0,yIndex=config.axis_rotated?0:1,y=$$.circleY(data,data.index),x=$$.x(data.x);return Math.sqrt(Math.pow(x-pos[xIndex],2)+Math.pow(y-pos[yIndex],2))},c3_chart_internal_fn.convertValuesToStep=function(values){var i,converted=[].concat(values);if(!this.isCategorized())return values;for(i=values.length+1;0<i;i--)converted[i]=converted[i-1];return converted[0]={x:converted[0].x-1,value:converted[0].value,id:converted[0].id},converted[values.length+1]={x:converted[values.length].x+1,value:converted[values.length].value,id:converted[values.length].id},converted},c3_chart_internal_fn.updateDataAttributes=function(name,attrs){var $$=this,config=$$.config,current=config["data_"+name];return void 0===attrs?current:(Object.keys(attrs).forEach(function(id){current[id]=attrs[id]}),$$.redraw({withLegend:!0}),current)},c3_chart_internal_fn.convertUrlToData=function(url,mimeType,headers,keys,done){var $$=this,type=mimeType||"csv",req=$$.d3.xhr(url);headers&&Object.keys(headers).forEach(function(header){req.header(header,headers[header])}),req.get(function(error,data){var d;if(!data)throw new Error(error.responseURL+" "+error.status+" ("+error.statusText+")");d="json"===type?$$.convertJsonToData(JSON.parse(data.response),keys):"tsv"===type?$$.convertTsvToData(data.response):$$.convertCsvToData(data.response),done.call($$,d)})},c3_chart_internal_fn.convertXsvToData=function(xsv,parser){var d,rows=parser.parseRows(xsv);return 1===rows.length?(d=[{}],rows[0].forEach(function(id){d[0][id]=null})):d=parser.parse(xsv),d},c3_chart_internal_fn.convertCsvToData=function(csv){return this.convertXsvToData(csv,this.d3.csv)},c3_chart_internal_fn.convertTsvToData=function(tsv){return this.convertXsvToData(tsv,this.d3.tsv)},c3_chart_internal_fn.convertJsonToData=function(json,keys){var targetKeys,data,$$=this,new_rows=[];return keys?(keys.x?(targetKeys=keys.value.concat(keys.x),$$.config.data_x=keys.x):targetKeys=keys.value,new_rows.push(targetKeys),json.forEach(function(o){var new_row=[];targetKeys.forEach(function(key){var v=$$.findValueInJson(o,key);isUndefined(v)&&(v=null),new_row.push(v)}),new_rows.push(new_row)}),data=$$.convertRowsToData(new_rows)):(Object.keys(json).forEach(function(key){new_rows.push([key].concat(json[key]))}),data=$$.convertColumnsToData(new_rows)),data},c3_chart_internal_fn.findValueInJson=function(object,path){path=path.replace(/\[(\w+)\]/g,".$1"),path=path.replace(/^\./,"");for(var pathArray=path.split("."),i=0;i<pathArray.length;++i){var k=pathArray[i];if(!(k in object))return;object=object[k]}return object},c3_chart_internal_fn.convertRowsToData=function(rows){var i,j,keys=rows[0],new_row={},new_rows=[];for(i=1;i<rows.length;i++){for(new_row={},j=0;j<rows[i].length;j++){if(isUndefined(rows[i][j]))throw new Error("Source data is missing a component at ("+i+","+j+")!");new_row[keys[j]]=rows[i][j]}new_rows.push(new_row)}return new_rows},c3_chart_internal_fn.convertColumnsToData=function(columns){var i,j,key,new_rows=[];for(i=0;i<columns.length;i++)for(key=columns[i][0],j=1;j<columns[i].length;j++){if(isUndefined(new_rows[j-1])&&(new_rows[j-1]={}),isUndefined(columns[i][j]))throw new Error("Source data is missing a component at ("+i+","+j+")!");new_rows[j-1][key]=columns[i][j]}return new_rows},c3_chart_internal_fn.convertDataToTargets=function(data,appendXs){var targets,$$=this,config=$$.config,ids=$$.d3.keys(data[0]).filter($$.isNotX,$$),xs=$$.d3.keys(data[0]).filter($$.isX,$$);return ids.forEach(function(id){var xKey=$$.getXKey(id);$$.isCustomX()||$$.isTimeSeries()?xs.indexOf(xKey)>=0?$$.data.xs[id]=(appendXs&&$$.data.xs[id]?$$.data.xs[id]:[]).concat(data.map(function(d){return d[xKey]}).filter(isValue).map(function(rawX,i){return $$.generateTargetX(rawX,id,i)})):config.data_x?$$.data.xs[id]=$$.getOtherTargetXs():notEmpty(config.data_xs)&&($$.data.xs[id]=$$.getXValuesOfXKey(xKey,$$.data.targets)):$$.data.xs[id]=data.map(function(d,i){return i})}),ids.forEach(function(id){if(!$$.data.xs[id])throw new Error('x is not defined for id = "'+id+'".')}),targets=ids.map(function(id,index){var convertedId=config.data_idConverter(id);return{id:convertedId,id_org:id,values:data.map(function(d,i){var x,xKey=$$.getXKey(id),rawX=d[xKey],value=null===d[id]||isNaN(d[id])?null:+d[id];return $$.isCustomX()&&$$.isCategorized()&&0===index&&!isUndefined(rawX)?(0===index&&0===i&&(config.axis_x_categories=[]),-1===(x=config.axis_x_categories.indexOf(rawX))&&(x=config.axis_x_categories.length,config.axis_x_categories.push(rawX))):x=$$.generateTargetX(rawX,id,i),(isUndefined(d[id])||$$.data.xs[id].length<=i)&&(x=void 0),{x:x,value:value,id:convertedId}}).filter(function(v){return isDefined(v.x)})}}),targets.forEach(function(t){var i;config.data_xSort&&(t.values=t.values.sort(function(v1,v2){return(v1.x||0===v1.x?v1.x:1/0)-(v2.x||0===v2.x?v2.x:1/0)})),i=0,t.values.forEach(function(v){v.index=i++}),$$.data.xs[t.id].sort(function(v1,v2){return v1-v2})}),$$.hasNegativeValue=$$.hasNegativeValueInTargets(targets),$$.hasPositiveValue=$$.hasPositiveValueInTargets(targets),config.data_type&&$$.setTargetType($$.mapToIds(targets).filter(function(id){return!(id in config.data_types)}),config.data_type),targets.forEach(function(d){$$.addCache(d.id_org,d)}),targets},
c3_chart_internal_fn.load=function(targets,args){var $$=this;targets&&(args.filter&&(targets=targets.filter(args.filter)),(args.type||args.types)&&targets.forEach(function(t){var type=args.types&&args.types[t.id]?args.types[t.id]:args.type;$$.setTargetType(t.id,type)}),$$.data.targets.forEach(function(d){for(var i=0;i<targets.length;i++)if(d.id===targets[i].id){d.values=targets[i].values,targets.splice(i,1);break}}),$$.data.targets=$$.data.targets.concat(targets)),$$.updateTargets($$.data.targets),$$.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),args.done&&args.done()},c3_chart_internal_fn.loadFromArgs=function(args){var $$=this;args.data?$$.load($$.convertDataToTargets(args.data),args):args.url?$$.convertUrlToData(args.url,args.mimeType,args.headers,args.keys,function(data){$$.load($$.convertDataToTargets(data),args)}):args.json?$$.load($$.convertDataToTargets($$.convertJsonToData(args.json,args.keys)),args):args.rows?$$.load($$.convertDataToTargets($$.convertRowsToData(args.rows)),args):args.columns?$$.load($$.convertDataToTargets($$.convertColumnsToData(args.columns)),args):$$.load(null,args)},c3_chart_internal_fn.unload=function(targetIds,done){var $$=this;if(done||(done=function(){}),!(targetIds=targetIds.filter(function(id){return $$.hasTarget($$.data.targets,id)}))||0===targetIds.length)return void done();$$.svg.selectAll(targetIds.map(function(id){return $$.selectorTarget(id)})).transition().style("opacity",0).remove().call($$.endall,done),targetIds.forEach(function(id){$$.withoutFadeIn[id]=!1,$$.legend&&$$.legend.selectAll("."+CLASS.legendItem+$$.getTargetSelectorSuffix(id)).remove(),$$.data.targets=$$.data.targets.filter(function(t){return t.id!==id})})},c3_chart_internal_fn.categoryName=function(i){var config=this.config;return i<config.axis_x_categories.length?config.axis_x_categories[i]:i},c3_chart_internal_fn.initEventRect=function(){this.main.select("."+CLASS.chart).append("g").attr("class",CLASS.eventRects).style("fill-opacity",0)},c3_chart_internal_fn.redrawEventRect=function(){var eventRectUpdate,maxDataCountTarget,$$=this,config=$$.config,isMultipleX=$$.isMultipleX(),eventRects=$$.main.select("."+CLASS.eventRects).style("cursor",config.zoom_enabled?config.axis_rotated?"ns-resize":"ew-resize":null).classed(CLASS.eventRectsMultiple,isMultipleX).classed(CLASS.eventRectsSingle,!isMultipleX);eventRects.selectAll("."+CLASS.eventRect).remove(),$$.eventRect=eventRects.selectAll("."+CLASS.eventRect),isMultipleX?(eventRectUpdate=$$.eventRect.data([0]),$$.generateEventRectsForMultipleXs(eventRectUpdate.enter()),$$.updateEventRect(eventRectUpdate)):(maxDataCountTarget=$$.getMaxDataCountTarget($$.data.targets),eventRects.datum(maxDataCountTarget?maxDataCountTarget.values:[]),$$.eventRect=eventRects.selectAll("."+CLASS.eventRect),eventRectUpdate=$$.eventRect.data(function(d){return d}),$$.generateEventRectsForSingleX(eventRectUpdate.enter()),$$.updateEventRect(eventRectUpdate),eventRectUpdate.exit().remove())},c3_chart_internal_fn.updateEventRect=function(eventRectUpdate){var x,y,w,h,rectW,rectX,$$=this,config=$$.config;eventRectUpdate=eventRectUpdate||$$.eventRect.data(function(d){return d}),$$.isMultipleX()?(x=0,y=0,w=$$.width,h=$$.height):(!$$.isCustomX()&&!$$.isTimeSeries()||$$.isCategorized()?(rectW=$$.getEventRectWidth(),rectX=function(d){return $$.x(d.x)-rectW/2}):($$.updateXs(),rectW=function(d){var prevX=$$.getPrevX(d.index),nextX=$$.getNextX(d.index);return null===prevX&&null===nextX?config.axis_rotated?$$.height:$$.width:(null===prevX&&(prevX=$$.x.domain()[0]),null===nextX&&(nextX=$$.x.domain()[1]),Math.max(0,($$.x(nextX)-$$.x(prevX))/2))},rectX=function(d){var prevX=$$.getPrevX(d.index),nextX=$$.getNextX(d.index),thisX=$$.data.xs[d.id][d.index];return null===prevX&&null===nextX?0:(null===prevX&&(prevX=$$.x.domain()[0]),($$.x(thisX)+$$.x(prevX))/2)}),x=config.axis_rotated?0:rectX,y=config.axis_rotated?rectX:0,w=config.axis_rotated?$$.width:rectW,h=config.axis_rotated?rectW:$$.height),eventRectUpdate.attr("class",$$.classEvent.bind($$)).attr("x",x).attr("y",y).attr("width",w).attr("height",h)},c3_chart_internal_fn.generateEventRectsForSingleX=function(eventRectEnter){var $$=this,d3=$$.d3,config=$$.config;eventRectEnter.append("rect").attr("class",$$.classEvent.bind($$)).style("cursor",config.data_selection_enabled&&config.data_selection_grouped?"pointer":null).on("mouseover",function(d){var index=d.index;$$.dragging||$$.flowing||$$.hasArcType()||(config.point_focus_expand_enabled&&$$.expandCircles(index,null,!0),$$.expandBars(index,null,!0),$$.main.selectAll("."+CLASS.shape+"-"+index).each(function(d){config.data_onmouseover.call($$.api,d)}))}).on("mouseout",function(d){var index=d.index;$$.config&&($$.hasArcType()||($$.hideXGridFocus(),$$.hideTooltip(),$$.unexpandCircles(),$$.unexpandBars(),$$.main.selectAll("."+CLASS.shape+"-"+index).each(function(d){config.data_onmouseout.call($$.api,d)})))}).on("mousemove",function(d){var selectedData,index=d.index,eventRect=$$.svg.select("."+CLASS.eventRect+"-"+index);$$.dragging||$$.flowing||$$.hasArcType()||($$.isStepType(d)&&"step-after"===$$.config.line_step_type&&d3.mouse(this)[0]<$$.x($$.getXValue(d.id,index))&&(index-=1),selectedData=$$.filterTargetsToShow($$.data.targets).map(function(t){return $$.addName($$.getValueOnIndex(t.values,index))}),config.tooltip_grouped&&($$.showTooltip(selectedData,this),$$.showXGridFocus(selectedData)),(!config.tooltip_grouped||config.data_selection_enabled&&!config.data_selection_grouped)&&$$.main.selectAll("."+CLASS.shape+"-"+index).each(function(){d3.select(this).classed(CLASS.EXPANDED,!0),config.data_selection_enabled&&eventRect.style("cursor",config.data_selection_grouped?"pointer":null),config.tooltip_grouped||($$.hideXGridFocus(),$$.hideTooltip(),config.data_selection_grouped||($$.unexpandCircles(index),$$.unexpandBars(index)))}).filter(function(d){return $$.isWithinShape(this,d)}).each(function(d){config.data_selection_enabled&&(config.data_selection_grouped||config.data_selection_isselectable(d))&&eventRect.style("cursor","pointer"),config.tooltip_grouped||($$.showTooltip([d],this),$$.showXGridFocus([d]),config.point_focus_expand_enabled&&$$.expandCircles(index,d.id,!0),$$.expandBars(index,d.id,!0))}))}).on("click",function(d){var index=d.index;if(!$$.hasArcType()&&$$.toggleShape){if($$.cancelClick)return void($$.cancelClick=!1);$$.isStepType(d)&&"step-after"===config.line_step_type&&d3.mouse(this)[0]<$$.x($$.getXValue(d.id,index))&&(index-=1),$$.main.selectAll("."+CLASS.shape+"-"+index).each(function(d){(config.data_selection_grouped||$$.isWithinShape(this,d))&&($$.toggleShape(this,d,index),$$.config.data_onclick.call($$.api,d,this))})}}).call(config.data_selection_draggable&&$$.drag?d3.behavior.drag().origin(Object).on("drag",function(){$$.drag(d3.mouse(this))}).on("dragstart",function(){$$.dragstart(d3.mouse(this))}).on("dragend",function(){$$.dragend()}):function(){})},c3_chart_internal_fn.generateEventRectsForMultipleXs=function(eventRectEnter){function mouseout(){$$.svg.select("."+CLASS.eventRect).style("cursor",null),$$.hideXGridFocus(),$$.hideTooltip(),$$.unexpandCircles(),$$.unexpandBars()}var $$=this,d3=$$.d3,config=$$.config;eventRectEnter.append("rect").attr("x",0).attr("y",0).attr("width",$$.width).attr("height",$$.height).attr("class",CLASS.eventRect).on("mouseout",function(){$$.config&&($$.hasArcType()||mouseout())}).on("mousemove",function(){var mouse,closest,sameXData,selectedData,targetsToShow=$$.filterTargetsToShow($$.data.targets);if(!$$.dragging&&!$$.hasArcType(targetsToShow)){if(mouse=d3.mouse(this),closest=$$.findClosestFromTargets(targetsToShow,mouse),!$$.mouseover||closest&&closest.id===$$.mouseover.id||(config.data_onmouseout.call($$.api,$$.mouseover),$$.mouseover=void 0),!closest)return void mouseout();sameXData=$$.isScatterType(closest)||!config.tooltip_grouped?[closest]:$$.filterByX(targetsToShow,closest.x),selectedData=sameXData.map(function(d){return $$.addName(d)}),$$.showTooltip(selectedData,this),config.point_focus_expand_enabled&&$$.expandCircles(closest.index,closest.id,!0),$$.expandBars(closest.index,closest.id,!0),$$.showXGridFocus(selectedData),($$.isBarType(closest.id)||$$.dist(closest,mouse)<config.point_sensitivity)&&($$.svg.select("."+CLASS.eventRect).style("cursor","pointer"),$$.mouseover||(config.data_onmouseover.call($$.api,closest),$$.mouseover=closest))}}).on("click",function(){var mouse,closest,targetsToShow=$$.filterTargetsToShow($$.data.targets);$$.hasArcType(targetsToShow)||(mouse=d3.mouse(this),(closest=$$.findClosestFromTargets(targetsToShow,mouse))&&($$.isBarType(closest.id)||$$.dist(closest,mouse)<config.point_sensitivity)&&$$.main.selectAll("."+CLASS.shapes+$$.getTargetSelectorSuffix(closest.id)).selectAll("."+CLASS.shape+"-"+closest.index).each(function(){(config.data_selection_grouped||$$.isWithinShape(this,closest))&&($$.toggleShape(this,closest,closest.index),$$.config.data_onclick.call($$.api,closest,this))}))}).call(config.data_selection_draggable&&$$.drag?d3.behavior.drag().origin(Object).on("drag",function(){$$.drag(d3.mouse(this))}).on("dragstart",function(){$$.dragstart(d3.mouse(this))}).on("dragend",function(){$$.dragend()}):function(){})},c3_chart_internal_fn.dispatchEvent=function(type,index,mouse){var $$=this,selector="."+CLASS.eventRect+($$.isMultipleX()?"":"-"+index),eventRect=$$.main.select(selector).node(),box=eventRect.getBoundingClientRect(),x=box.left+(mouse?mouse[0]:0),y=box.top+(mouse?mouse[1]:0),event=document.createEvent("MouseEvents");event.initMouseEvent(type,!0,!0,window,0,x,y,x,y,!1,!1,!1,!1,0,null),eventRect.dispatchEvent(event)},c3_chart_internal_fn.getCurrentWidth=function(){var $$=this,config=$$.config;return config.size_width?config.size_width:$$.getParentWidth()},c3_chart_internal_fn.getCurrentHeight=function(){var $$=this,config=$$.config,h=config.size_height?config.size_height:$$.getParentHeight();return h>0?h:320/($$.hasType("gauge")&&!config.gauge_fullCircle?2:1)},c3_chart_internal_fn.getCurrentPaddingTop=function(){var $$=this,config=$$.config,padding=isValue(config.padding_top)?config.padding_top:0;return $$.title&&$$.title.node()&&(padding+=$$.getTitlePadding()),padding},c3_chart_internal_fn.getCurrentPaddingBottom=function(){var config=this.config;return isValue(config.padding_bottom)?config.padding_bottom:0},c3_chart_internal_fn.getCurrentPaddingLeft=function(withoutRecompute){var $$=this,config=$$.config;return isValue(config.padding_left)?config.padding_left:config.axis_rotated?config.axis_x_show?Math.max(ceil10($$.getAxisWidthByAxisId("x",withoutRecompute)),40):1:!config.axis_y_show||config.axis_y_inner?$$.axis.getYAxisLabelPosition().isOuter?30:1:ceil10($$.getAxisWidthByAxisId("y",withoutRecompute))},c3_chart_internal_fn.getCurrentPaddingRight=function(){var $$=this,config=$$.config,legendWidthOnRight=$$.isLegendRight?$$.getLegendWidth()+20:0;return isValue(config.padding_right)?config.padding_right+1:config.axis_rotated?10+legendWidthOnRight:!config.axis_y2_show||config.axis_y2_inner?2+legendWidthOnRight+($$.axis.getY2AxisLabelPosition().isOuter?20:0):ceil10($$.getAxisWidthByAxisId("y2"))+legendWidthOnRight},c3_chart_internal_fn.getParentRectValue=function(key){for(var v,parent=this.selectChart.node();parent&&"BODY"!==parent.tagName;){try{v=parent.getBoundingClientRect()[key]}catch(e){"width"===key&&(v=parent.offsetWidth)}if(v)break;parent=parent.parentNode}return v},c3_chart_internal_fn.getParentWidth=function(){return this.getParentRectValue("width")},c3_chart_internal_fn.getParentHeight=function(){var h=this.selectChart.style("height");return h.indexOf("px")>0?+h.replace("px",""):0},c3_chart_internal_fn.getSvgLeft=function(withoutRecompute){var $$=this,config=$$.config,hasLeftAxisRect=config.axis_rotated||!config.axis_rotated&&!config.axis_y_inner,leftAxisClass=config.axis_rotated?CLASS.axisX:CLASS.axisY,leftAxis=$$.main.select("."+leftAxisClass).node(),svgRect=leftAxis&&hasLeftAxisRect?leftAxis.getBoundingClientRect():{right:0},chartRect=$$.selectChart.node().getBoundingClientRect(),hasArc=$$.hasArcType(),svgLeft=svgRect.right-chartRect.left-(hasArc?0:$$.getCurrentPaddingLeft(withoutRecompute));return svgLeft>0?svgLeft:0},c3_chart_internal_fn.getAxisWidthByAxisId=function(id,withoutRecompute){var $$=this,position=$$.axis.getLabelPositionById(id);return $$.axis.getMaxTickWidth(id,withoutRecompute)+(position.isInner?20:40)},c3_chart_internal_fn.getHorizontalAxisHeight=function(axisId){var $$=this,config=$$.config,h=30;return"x"!==axisId||config.axis_x_show?"x"===axisId&&config.axis_x_height?config.axis_x_height:"y"!==axisId||config.axis_y_show?"y2"!==axisId||config.axis_y2_show?("x"===axisId&&!config.axis_rotated&&config.axis_x_tick_rotate&&(h=30+$$.axis.getMaxTickWidth(axisId)*Math.cos(Math.PI*(90-config.axis_x_tick_rotate)/180)),"y"===axisId&&config.axis_rotated&&config.axis_y_tick_rotate&&(h=30+$$.axis.getMaxTickWidth(axisId)*Math.cos(Math.PI*(90-config.axis_y_tick_rotate)/180)),h+($$.axis.getLabelPositionById(axisId).isInner?0:10)+("y2"===axisId?-10:0)):$$.rotated_padding_top:!config.legend_show||$$.isLegendRight||$$.isLegendInset?1:10:8},c3_chart_internal_fn.getEventRectWidth=function(){return Math.max(0,this.xAxis.tickInterval())},c3_chart_internal_fn.getShapeIndices=function(typeFilter){var j,k,$$=this,config=$$.config,indices={},i=0;return $$.filterTargetsToShow($$.data.targets.filter(typeFilter,$$)).forEach(function(d){for(j=0;j<config.data_groups.length;j++)if(!(config.data_groups[j].indexOf(d.id)<0))for(k=0;k<config.data_groups[j].length;k++)if(config.data_groups[j][k]in indices){indices[d.id]=indices[config.data_groups[j][k]];break}isUndefined(indices[d.id])&&(indices[d.id]=i++)}),indices.__max__=i-1,indices},c3_chart_internal_fn.getShapeX=function(offset,targetsNum,indices,isSub){var $$=this,scale=isSub?$$.subX:$$.x;return function(d){var index=d.id in indices?indices[d.id]:0;return d.x||0===d.x?scale(d.x)-offset*(targetsNum/2-index):0}},c3_chart_internal_fn.getShapeY=function(isSub){var $$=this;return function(d){return(isSub?$$.getSubYScale(d.id):$$.getYScale(d.id))(d.value)}},c3_chart_internal_fn.getShapeOffset=function(typeFilter,indices,isSub){var $$=this,targets=$$.orderTargets($$.filterTargetsToShow($$.data.targets.filter(typeFilter,$$))),targetIds=targets.map(function(t){return t.id});return function(d,i){var scale=isSub?$$.getSubYScale(d.id):$$.getYScale(d.id),y0=scale(0),offset=y0;return targets.forEach(function(t){var values=$$.isStepType(d)?$$.convertValuesToStep(t.values):t.values;t.id!==d.id&&indices[t.id]===indices[d.id]&&targetIds.indexOf(t.id)<targetIds.indexOf(d.id)&&(void 0!==values[i]&&+values[i].x==+d.x||(i=-1,values.forEach(function(v,j){v.x===d.x&&(i=j)})),i in values&&values[i].value*d.value>=0&&(offset+=scale(values[i].value)-y0))}),offset}},c3_chart_internal_fn.isWithinShape=function(that,d){var isWithin,$$=this,shape=$$.d3.select(that);return $$.isTargetToShow(d.id)?"circle"===that.nodeName?isWithin=$$.isStepType(d)?$$.isWithinStep(that,$$.getYScale(d.id)(d.value)):$$.isWithinCircle(that,1.5*$$.pointSelectR(d)):"path"===that.nodeName&&(isWithin=!shape.classed(CLASS.bar)||$$.isWithinBar(that)):isWithin=!1,isWithin},c3_chart_internal_fn.getInterpolate=function(d){var $$=this,interpolation=$$.isInterpolationType($$.config.spline_interpolation_type)?$$.config.spline_interpolation_type:"cardinal";return $$.isSplineType(d)?interpolation:$$.isStepType(d)?$$.config.line_step_type:"linear"},c3_chart_internal_fn.initLine=function(){this.main.select("."+CLASS.chart).append("g").attr("class",CLASS.chartLines)},c3_chart_internal_fn.updateTargetsForLine=function(targets){var mainLineUpdate,mainLineEnter,$$=this,config=$$.config,classChartLine=$$.classChartLine.bind($$),classLines=$$.classLines.bind($$),classAreas=$$.classAreas.bind($$),classCircles=$$.classCircles.bind($$),classFocus=$$.classFocus.bind($$);mainLineUpdate=$$.main.select("."+CLASS.chartLines).selectAll("."+CLASS.chartLine).data(targets).attr("class",function(d){return classChartLine(d)+classFocus(d)}),mainLineEnter=mainLineUpdate.enter().append("g").attr("class",classChartLine).style("opacity",0).style("pointer-events","none"),mainLineEnter.append("g").attr("class",classLines),mainLineEnter.append("g").attr("class",classAreas),mainLineEnter.append("g").attr("class",function(d){return $$.generateClass(CLASS.selectedCircles,d.id)}),mainLineEnter.append("g").attr("class",classCircles).style("cursor",function(d){return config.data_selection_isselectable(d)?"pointer":null}),targets.forEach(function(t){$$.main.selectAll("."+CLASS.selectedCircles+$$.getTargetSelectorSuffix(t.id)).selectAll("."+CLASS.selectedCircle).each(function(d){d.value=t.values[d.index].value})})},c3_chart_internal_fn.updateLine=function(durationForExit){var $$=this;$$.mainLine=$$.main.selectAll("."+CLASS.lines).selectAll("."+CLASS.line).data($$.lineData.bind($$)),$$.mainLine.enter().append("path").attr("class",$$.classLine.bind($$)).style("stroke",$$.color),$$.mainLine.style("opacity",$$.initialOpacity.bind($$)).style("shape-rendering",function(d){return $$.isStepType(d)?"crispEdges":""}).attr("transform",null),$$.mainLine.exit().transition().duration(durationForExit).style("opacity",0).remove()},c3_chart_internal_fn.redrawLine=function(drawLine,withTransition){return[(withTransition?this.mainLine.transition(Math.random().toString()):this.mainLine).attr("d",drawLine).style("stroke",this.color).style("opacity",1)]},c3_chart_internal_fn.generateDrawLine=function(lineIndices,isSub){var $$=this,config=$$.config,line=$$.d3.svg.line(),getPoints=$$.generateGetLinePoints(lineIndices,isSub),yScaleGetter=isSub?$$.getSubYScale:$$.getYScale,xValue=function(d){return(isSub?$$.subxx:$$.xx).call($$,d)},yValue=function(d,i){return config.data_groups.length>0?getPoints(d,i)[0][1]:yScaleGetter.call($$,d.id)(d.value)};return line=config.axis_rotated?line.x(yValue).y(xValue):line.x(xValue).y(yValue),config.line_connectNull||(line=line.defined(function(d){return null!=d.value})),function(d){var path,values=config.line_connectNull?$$.filterRemoveNull(d.values):d.values,x=isSub?$$.x:$$.subX,y=yScaleGetter.call($$,d.id),x0=0,y0=0;return $$.isLineType(d)?config.data_regions[d.id]?path=$$.lineWithRegions(values,x,y,config.data_regions[d.id]):($$.isStepType(d)&&(values=$$.convertValuesToStep(values)),path=line.interpolate($$.getInterpolate(d))(values)):(values[0]&&(x0=x(values[0].x),y0=y(values[0].value)),path=config.axis_rotated?"M "+y0+" "+x0:"M "+x0+" "+y0),path||"M 0 0"}},c3_chart_internal_fn.generateGetLinePoints=function(lineIndices,isSub){var $$=this,config=$$.config,lineTargetsNum=lineIndices.__max__+1,x=$$.getShapeX(0,lineTargetsNum,lineIndices,!!isSub),y=$$.getShapeY(!!isSub),lineOffset=$$.getShapeOffset($$.isLineType,lineIndices,!!isSub),yScale=isSub?$$.getSubYScale:$$.getYScale;return function(d,i){var y0=yScale.call($$,d.id)(0),offset=lineOffset(d,i)||y0,posX=x(d),posY=y(d);return config.axis_rotated&&(0<d.value&&posY<y0||d.value<0&&y0<posY)&&(posY=y0),[[posX,posY-(y0-offset)],[posX,posY-(y0-offset)],[posX,posY-(y0-offset)],[posX,posY-(y0-offset)]]}},c3_chart_internal_fn.lineWithRegions=function(d,x,y,_regions){function generateM(points){return"M"+points[0][0]+" "+points[0][1]+" "+points[1][0]+" "+points[1][1]}var i,j,sWithRegion,xp,yp,dx,dy,dd,diff,diffx2,xValue,yValue,$$=this,config=$$.config,s="M",xOffset=$$.isCategorized()?.5:0,regions=[];if(isDefined(_regions))for(i=0;i<_regions.length;i++)regions[i]={},isUndefined(_regions[i].start)?regions[i].start=d[0].x:regions[i].start=$$.isTimeSeries()?$$.parseDate(_regions[i].start):_regions[i].start,isUndefined(_regions[i].end)?regions[i].end=d[d.length-1].x:regions[i].end=$$.isTimeSeries()?$$.parseDate(_regions[i].end):_regions[i].end;for(xValue=config.axis_rotated?function(d){return y(d.value)}:function(d){return x(d.x)},yValue=config.axis_rotated?function(d){return x(d.x)}:function(d){return y(d.value)},sWithRegion=$$.isTimeSeries()?function(d0,d1,j,diff){var points,x0=d0.x.getTime(),x_diff=d1.x-d0.x,xv0=new Date(x0+x_diff*j),xv1=new Date(x0+x_diff*(j+diff));return points=config.axis_rotated?[[y(yp(j)),x(xv0)],[y(yp(j+diff)),x(xv1)]]:[[x(xv0),y(yp(j))],[x(xv1),y(yp(j+diff))]],generateM(points)}:function(d0,d1,j,diff){var points;return points=config.axis_rotated?[[y(yp(j),!0),x(xp(j))],[y(yp(j+diff),!0),x(xp(j+diff))]]:[[x(xp(j),!0),y(yp(j))],[x(xp(j+diff),!0),y(yp(j+diff))]],generateM(points)},i=0;i<d.length;i++){if(isUndefined(regions)||!function(x,regions){var i;for(i=0;i<regions.length;i++)if(regions[i].start<x&&x<=regions[i].end)return!0;return!1}(d[i].x,regions))s+=" "+xValue(d[i])+" "+yValue(d[i]);else for(xp=$$.getScale(d[i-1].x+xOffset,d[i].x+xOffset,$$.isTimeSeries()),yp=$$.getScale(d[i-1].value,d[i].value),dx=x(d[i].x)-x(d[i-1].x),dy=y(d[i].value)-y(d[i-1].value),dd=Math.sqrt(Math.pow(dx,2)+Math.pow(dy,2)),diff=2/dd,diffx2=2*diff,j=diff;j<=1;j+=diffx2)s+=sWithRegion(d[i-1],d[i],j,diff);d[i].x}return s},c3_chart_internal_fn.updateArea=function(durationForExit){var $$=this,d3=$$.d3;$$.mainArea=$$.main.selectAll("."+CLASS.areas).selectAll("."+CLASS.area).data($$.lineData.bind($$)),$$.mainArea.enter().append("path").attr("class",$$.classArea.bind($$)).style("fill",$$.color).style("opacity",function(){return $$.orgAreaOpacity=+d3.select(this).style("opacity"),0}),$$.mainArea.style("opacity",$$.orgAreaOpacity),$$.mainArea.exit().transition().duration(durationForExit).style("opacity",0).remove()},c3_chart_internal_fn.redrawArea=function(drawArea,withTransition){return[(withTransition?this.mainArea.transition(Math.random().toString()):this.mainArea).attr("d",drawArea).style("fill",this.color).style("opacity",this.orgAreaOpacity)]},c3_chart_internal_fn.generateDrawArea=function(areaIndices,isSub){var $$=this,config=$$.config,area=$$.d3.svg.area(),getPoints=$$.generateGetAreaPoints(areaIndices,isSub),yScaleGetter=isSub?$$.getSubYScale:$$.getYScale,xValue=function(d){return(isSub?$$.subxx:$$.xx).call($$,d)},value0=function(d,i){return config.data_groups.length>0?getPoints(d,i)[0][1]:yScaleGetter.call($$,d.id)($$.getAreaBaseValue(d.id))},value1=function(d,i){return config.data_groups.length>0?getPoints(d,i)[1][1]:yScaleGetter.call($$,d.id)(d.value)};return area=config.axis_rotated?area.x0(value0).x1(value1).y(xValue):area.x(xValue).y0(config.area_above?0:value0).y1(value1),config.line_connectNull||(area=area.defined(function(d){return null!==d.value})),function(d){var path,values=config.line_connectNull?$$.filterRemoveNull(d.values):d.values,x0=0,y0=0;return $$.isAreaType(d)?($$.isStepType(d)&&(values=$$.convertValuesToStep(values)),path=area.interpolate($$.getInterpolate(d))(values)):(values[0]&&(x0=$$.x(values[0].x),y0=$$.getYScale(d.id)(values[0].value)),path=config.axis_rotated?"M "+y0+" "+x0:"M "+x0+" "+y0),path||"M 0 0"}},c3_chart_internal_fn.getAreaBaseValue=function(){return 0},c3_chart_internal_fn.generateGetAreaPoints=function(areaIndices,isSub){var $$=this,config=$$.config,areaTargetsNum=areaIndices.__max__+1,x=$$.getShapeX(0,areaTargetsNum,areaIndices,!!isSub),y=$$.getShapeY(!!isSub),areaOffset=$$.getShapeOffset($$.isAreaType,areaIndices,!!isSub),yScale=isSub?$$.getSubYScale:$$.getYScale;return function(d,i){var y0=yScale.call($$,d.id)(0),offset=areaOffset(d,i)||y0,posX=x(d),posY=y(d);return config.axis_rotated&&(0<d.value&&posY<y0||d.value<0&&y0<posY)&&(posY=y0),[[posX,offset],[posX,posY-(y0-offset)],[posX,posY-(y0-offset)],[posX,offset]]}},c3_chart_internal_fn.updateCircle=function(){var $$=this;$$.mainCircle=$$.main.selectAll("."+CLASS.circles).selectAll("."+CLASS.circle).data($$.lineOrScatterData.bind($$)),$$.mainCircle.enter().append("circle").attr("class",$$.classCircle.bind($$)).attr("r",$$.pointR.bind($$)).style("fill",$$.color),$$.mainCircle.style("opacity",$$.initialOpacityForCircle.bind($$)),$$.mainCircle.exit().remove()},c3_chart_internal_fn.redrawCircle=function(cx,cy,withTransition){var selectedCircles=this.main.selectAll("."+CLASS.selectedCircle);return[(withTransition?this.mainCircle.transition(Math.random().toString()):this.mainCircle).style("opacity",this.opacityForCircle.bind(this)).style("fill",this.color).attr("cx",cx).attr("cy",cy),(withTransition?selectedCircles.transition(Math.random().toString()):selectedCircles).attr("cx",cx).attr("cy",cy)]},c3_chart_internal_fn.circleX=function(d){return d.x||0===d.x?this.x(d.x):null},c3_chart_internal_fn.updateCircleY=function(){var lineIndices,getPoints,$$=this;$$.config.data_groups.length>0?(lineIndices=$$.getShapeIndices($$.isLineType),getPoints=$$.generateGetLinePoints(lineIndices),$$.circleY=function(d,i){return getPoints(d,i)[0][1]}):$$.circleY=function(d){return $$.getYScale(d.id)(d.value)}},c3_chart_internal_fn.getCircles=function(i,id){var $$=this;return(id?$$.main.selectAll("."+CLASS.circles+$$.getTargetSelectorSuffix(id)):$$.main).selectAll("."+CLASS.circle+(isValue(i)?"-"+i:""))},c3_chart_internal_fn.expandCircles=function(i,id,reset){var $$=this,r=$$.pointExpandedR.bind($$);reset&&$$.unexpandCircles(),$$.getCircles(i,id).classed(CLASS.EXPANDED,!0).attr("r",r)},c3_chart_internal_fn.unexpandCircles=function(i){var $$=this,r=$$.pointR.bind($$);$$.getCircles(i).filter(function(){return $$.d3.select(this).classed(CLASS.EXPANDED)}).classed(CLASS.EXPANDED,!1).attr("r",r)},c3_chart_internal_fn.pointR=function(d){var $$=this,config=$$.config;return $$.isStepType(d)?0:isFunction(config.point_r)?config.point_r(d):config.point_r},c3_chart_internal_fn.pointExpandedR=function(d){var $$=this,config=$$.config;return config.point_focus_expand_enabled?config.point_focus_expand_r?config.point_focus_expand_r:1.75*$$.pointR(d):$$.pointR(d)},c3_chart_internal_fn.pointSelectR=function(d){var $$=this,config=$$.config;return isFunction(config.point_select_r)?config.point_select_r(d):config.point_select_r?config.point_select_r:4*$$.pointR(d)},c3_chart_internal_fn.isWithinCircle=function(that,r){var d3=this.d3,mouse=d3.mouse(that),d3_this=d3.select(that),cx=+d3_this.attr("cx"),cy=+d3_this.attr("cy");return Math.sqrt(Math.pow(cx-mouse[0],2)+Math.pow(cy-mouse[1],2))<r},c3_chart_internal_fn.isWithinStep=function(that,y){return Math.abs(y-this.d3.mouse(that)[1])<30},c3_chart_internal_fn.initBar=function(){this.main.select("."+CLASS.chart).append("g").attr("class",CLASS.chartBars)},c3_chart_internal_fn.updateTargetsForBar=function(targets){var mainBarUpdate,mainBarEnter,$$=this,config=$$.config,classChartBar=$$.classChartBar.bind($$),classBars=$$.classBars.bind($$),classFocus=$$.classFocus.bind($$);mainBarUpdate=$$.main.select("."+CLASS.chartBars).selectAll("."+CLASS.chartBar).data(targets).attr("class",function(d){return classChartBar(d)+classFocus(d)}),mainBarEnter=mainBarUpdate.enter().append("g").attr("class",classChartBar).style("opacity",0).style("pointer-events","none"),mainBarEnter.append("g").attr("class",classBars).style("cursor",function(d){return config.data_selection_isselectable(d)?"pointer":null})},c3_chart_internal_fn.updateBar=function(durationForExit){var $$=this,barData=$$.barData.bind($$),classBar=$$.classBar.bind($$),initialOpacity=$$.initialOpacity.bind($$),color=function(d){return $$.color(d.id)};$$.mainBar=$$.main.selectAll("."+CLASS.bars).selectAll("."+CLASS.bar).data(barData),$$.mainBar.enter().append("path").attr("class",classBar).style("stroke",color).style("fill",color),$$.mainBar.style("opacity",initialOpacity),$$.mainBar.exit().transition().duration(durationForExit).style("opacity",0).remove()},c3_chart_internal_fn.redrawBar=function(drawBar,withTransition){return[(withTransition?this.mainBar.transition(Math.random().toString()):this.mainBar).attr("d",drawBar).style("fill",this.color).style("opacity",1)]},c3_chart_internal_fn.getBarW=function(axis,barTargetsNum){var $$=this,config=$$.config,w="number"==typeof config.bar_width?config.bar_width:barTargetsNum?axis.tickInterval()*config.bar_width_ratio/barTargetsNum:0;return config.bar_width_max&&w>config.bar_width_max?config.bar_width_max:w},c3_chart_internal_fn.getBars=function(i,id){var $$=this;return(id?$$.main.selectAll("."+CLASS.bars+$$.getTargetSelectorSuffix(id)):$$.main).selectAll("."+CLASS.bar+(isValue(i)?"-"+i:""))},c3_chart_internal_fn.expandBars=function(i,id,reset){var $$=this;reset&&$$.unexpandBars(),$$.getBars(i,id).classed(CLASS.EXPANDED,!0)},c3_chart_internal_fn.unexpandBars=function(i){this.getBars(i).classed(CLASS.EXPANDED,!1)},c3_chart_internal_fn.generateDrawBar=function(barIndices,isSub){var $$=this,config=$$.config,getPoints=$$.generateGetBarPoints(barIndices,isSub);return function(d,i){var points=getPoints(d,i),indexX=config.axis_rotated?1:0,indexY=config.axis_rotated?0:1;return"M "+points[0][indexX]+","+points[0][indexY]+" L"+points[1][indexX]+","+points[1][indexY]+" L"+points[2][indexX]+","+points[2][indexY]+" L"+points[3][indexX]+","+points[3][indexY]+" z"}},c3_chart_internal_fn.generateGetBarPoints=function(barIndices,isSub){var $$=this,axis=isSub?$$.subXAxis:$$.xAxis,barTargetsNum=barIndices.__max__+1,barW=$$.getBarW(axis,barTargetsNum),barX=$$.getShapeX(barW,barTargetsNum,barIndices,!!isSub),barY=$$.getShapeY(!!isSub),barOffset=$$.getShapeOffset($$.isBarType,barIndices,!!isSub),yScale=isSub?$$.getSubYScale:$$.getYScale;return function(d,i){var y0=yScale.call($$,d.id)(0),offset=barOffset(d,i)||y0,posX=barX(d),posY=barY(d);return $$.config.axis_rotated&&(0<d.value&&posY<y0||d.value<0&&y0<posY)&&(posY=y0),[[posX,offset],[posX,posY-(y0-offset)],[posX+barW,posY-(y0-offset)],[posX+barW,offset]]}},c3_chart_internal_fn.isWithinBar=function(that){var mouse=this.d3.mouse(that),box=that.getBoundingClientRect(),seg0=that.pathSegList.getItem(0),seg1=that.pathSegList.getItem(1),x=Math.min(seg0.x,seg1.x),y=Math.min(seg0.y,seg1.y),w=box.width,h=box.height,sx=x-2,ex=x+w+2,sy=y+h+2,ey=y-2;return sx<mouse[0]&&mouse[0]<ex&&ey<mouse[1]&&mouse[1]<sy},c3_chart_internal_fn.initText=function(){var $$=this;$$.main.select("."+CLASS.chart).append("g").attr("class",CLASS.chartTexts),$$.mainText=$$.d3.selectAll([])},c3_chart_internal_fn.updateTargetsForText=function(targets){var mainTextUpdate,mainTextEnter,$$=this,classChartText=$$.classChartText.bind($$),classTexts=$$.classTexts.bind($$),classFocus=$$.classFocus.bind($$);mainTextUpdate=$$.main.select("."+CLASS.chartTexts).selectAll("."+CLASS.chartText).data(targets).attr("class",function(d){return classChartText(d)+classFocus(d)}),mainTextEnter=mainTextUpdate.enter().append("g").attr("class",classChartText).style("opacity",0).style("pointer-events","none"),mainTextEnter.append("g").attr("class",classTexts)},c3_chart_internal_fn.updateText=function(durationForExit){var $$=this,config=$$.config,barOrLineData=$$.barOrLineData.bind($$),classText=$$.classText.bind($$);$$.mainText=$$.main.selectAll("."+CLASS.texts).selectAll("."+CLASS.text).data(barOrLineData),$$.mainText.enter().append("text").attr("class",classText).attr("text-anchor",function(d){return config.axis_rotated?d.value<0?"end":"start":"middle"}).style("stroke","none").style("fill",function(d){return $$.color(d)}).style("fill-opacity",0),$$.mainText.text(function(d,i,j){return $$.dataLabelFormat(d.id)(d.value,d.id,i,j)}),$$.mainText.exit().transition().duration(durationForExit).style("fill-opacity",0).remove()},c3_chart_internal_fn.redrawText=function(xForText,yForText,forFlow,withTransition){return[(withTransition?this.mainText.transition():this.mainText).attr("x",xForText).attr("y",yForText).style("fill",this.color).style("fill-opacity",forFlow?0:this.opacityForText.bind(this))]},c3_chart_internal_fn.getTextRect=function(text,cls,element){var rect,dummy=this.d3.select("body").append("div").classed("c3",!0),svg=dummy.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0),font=this.d3.select(element).style("font");return svg.selectAll(".dummy").data([text]).enter().append("text").classed(cls||"",!0).style("font",font).text(text).each(function(){rect=this.getBoundingClientRect()}),dummy.remove(),rect},
c3_chart_internal_fn.generateXYForText=function(areaIndices,barIndices,lineIndices,forX){var $$=this,getAreaPoints=$$.generateGetAreaPoints(areaIndices,!1),getBarPoints=$$.generateGetBarPoints(barIndices,!1),getLinePoints=$$.generateGetLinePoints(lineIndices,!1),getter=forX?$$.getXForText:$$.getYForText;return function(d,i){var getPoints=$$.isAreaType(d)?getAreaPoints:$$.isBarType(d)?getBarPoints:getLinePoints;return getter.call($$,getPoints(d,i),d,this)}},c3_chart_internal_fn.getXForText=function(points,d,textElement){var xPos,padding,$$=this,box=textElement.getBoundingClientRect();return $$.config.axis_rotated?(padding=$$.isBarType(d)?4:6,xPos=points[2][1]+padding*(d.value<0?-1:1)):xPos=$$.hasType("bar")?(points[2][0]+points[0][0])/2:points[0][0],null===d.value&&(xPos>$$.width?xPos=$$.width-box.width:xPos<0&&(xPos=4)),xPos},c3_chart_internal_fn.getYForText=function(points,d,textElement){var yPos,$$=this,box=textElement.getBoundingClientRect();return $$.config.axis_rotated?yPos=(points[0][0]+points[2][0]+.6*box.height)/2:(yPos=points[2][1],d.value<0||0===d.value&&!$$.hasPositiveValue?(yPos+=box.height,$$.isBarType(d)&&$$.isSafari()?yPos-=3:!$$.isBarType(d)&&$$.isChrome()&&(yPos+=3)):yPos+=$$.isBarType(d)?-3:-6),null!==d.value||$$.config.axis_rotated||(yPos<box.height?yPos=box.height:yPos>this.height&&(yPos=this.height-4)),yPos},c3_chart_internal_fn.setTargetType=function(targetIds,type){var $$=this,config=$$.config;$$.mapToTargetIds(targetIds).forEach(function(id){$$.withoutFadeIn[id]=type===config.data_types[id],config.data_types[id]=type}),targetIds||(config.data_type=type)},c3_chart_internal_fn.hasType=function(type,targets){var $$=this,types=$$.config.data_types,has=!1;return targets=targets||$$.data.targets,targets&&targets.length?targets.forEach(function(target){var t=types[target.id];(t&&t.indexOf(type)>=0||!t&&"line"===type)&&(has=!0)}):Object.keys(types).length?Object.keys(types).forEach(function(id){types[id]===type&&(has=!0)}):has=$$.config.data_type===type,has},c3_chart_internal_fn.hasArcType=function(targets){return this.hasType("pie",targets)||this.hasType("donut",targets)||this.hasType("gauge",targets)},c3_chart_internal_fn.isLineType=function(d){var config=this.config,id=isString(d)?d:d.id;return!config.data_types[id]||["line","spline","area","area-spline","step","area-step"].indexOf(config.data_types[id])>=0},c3_chart_internal_fn.isStepType=function(d){var id=isString(d)?d:d.id;return["step","area-step"].indexOf(this.config.data_types[id])>=0},c3_chart_internal_fn.isSplineType=function(d){var id=isString(d)?d:d.id;return["spline","area-spline"].indexOf(this.config.data_types[id])>=0},c3_chart_internal_fn.isAreaType=function(d){var id=isString(d)?d:d.id;return["area","area-spline","area-step"].indexOf(this.config.data_types[id])>=0},c3_chart_internal_fn.isBarType=function(d){var id=isString(d)?d:d.id;return"bar"===this.config.data_types[id]},c3_chart_internal_fn.isScatterType=function(d){var id=isString(d)?d:d.id;return"scatter"===this.config.data_types[id]},c3_chart_internal_fn.isPieType=function(d){var id=isString(d)?d:d.id;return"pie"===this.config.data_types[id]},c3_chart_internal_fn.isGaugeType=function(d){var id=isString(d)?d:d.id;return"gauge"===this.config.data_types[id]},c3_chart_internal_fn.isDonutType=function(d){var id=isString(d)?d:d.id;return"donut"===this.config.data_types[id]},c3_chart_internal_fn.isArcType=function(d){return this.isPieType(d)||this.isDonutType(d)||this.isGaugeType(d)},c3_chart_internal_fn.lineData=function(d){return this.isLineType(d)?[d]:[]},c3_chart_internal_fn.arcData=function(d){return this.isArcType(d.data)?[d]:[]},c3_chart_internal_fn.barData=function(d){return this.isBarType(d)?d.values:[]},c3_chart_internal_fn.lineOrScatterData=function(d){return this.isLineType(d)||this.isScatterType(d)?d.values:[]},c3_chart_internal_fn.barOrLineData=function(d){return this.isBarType(d)||this.isLineType(d)?d.values:[]},c3_chart_internal_fn.isInterpolationType=function(type){return["linear","linear-closed","basis","basis-open","basis-closed","bundle","cardinal","cardinal-open","cardinal-closed","monotone"].indexOf(type)>=0},c3_chart_internal_fn.initGrid=function(){var $$=this,config=$$.config,d3=$$.d3;$$.grid=$$.main.append("g").attr("clip-path",$$.clipPathForGrid).attr("class",CLASS.grid),config.grid_x_show&&$$.grid.append("g").attr("class",CLASS.xgrids),config.grid_y_show&&$$.grid.append("g").attr("class",CLASS.ygrids),config.grid_focus_show&&$$.grid.append("g").attr("class",CLASS.xgridFocus).append("line").attr("class",CLASS.xgridFocus),$$.xgrid=d3.selectAll([]),config.grid_lines_front||$$.initGridLines()},c3_chart_internal_fn.initGridLines=function(){var $$=this,d3=$$.d3;$$.gridLines=$$.main.append("g").attr("clip-path",$$.clipPathForGrid).attr("class",CLASS.grid+" "+CLASS.gridLines),$$.gridLines.append("g").attr("class",CLASS.xgridLines),$$.gridLines.append("g").attr("class",CLASS.ygridLines),$$.xgridLines=d3.selectAll([])},c3_chart_internal_fn.updateXGrid=function(withoutUpdate){var $$=this,config=$$.config,d3=$$.d3,xgridData=$$.generateGridData(config.grid_x_type,$$.x),tickOffset=$$.isCategorized()?$$.xAxis.tickOffset():0;$$.xgridAttr=config.axis_rotated?{x1:0,x2:$$.width,y1:function(d){return $$.x(d)-tickOffset},y2:function(d){return $$.x(d)-tickOffset}}:{x1:function(d){return $$.x(d)+tickOffset},x2:function(d){return $$.x(d)+tickOffset},y1:0,y2:$$.height},$$.xgrid=$$.main.select("."+CLASS.xgrids).selectAll("."+CLASS.xgrid).data(xgridData),$$.xgrid.enter().append("line").attr("class",CLASS.xgrid),withoutUpdate||$$.xgrid.attr($$.xgridAttr).style("opacity",function(){return+d3.select(this).attr(config.axis_rotated?"y1":"x1")===(config.axis_rotated?$$.height:0)?0:1}),$$.xgrid.exit().remove()},c3_chart_internal_fn.updateYGrid=function(){var $$=this,config=$$.config,gridValues=$$.yAxis.tickValues()||$$.y.ticks(config.grid_y_ticks);$$.ygrid=$$.main.select("."+CLASS.ygrids).selectAll("."+CLASS.ygrid).data(gridValues),$$.ygrid.enter().append("line").attr("class",CLASS.ygrid),$$.ygrid.attr("x1",config.axis_rotated?$$.y:0).attr("x2",config.axis_rotated?$$.y:$$.width).attr("y1",config.axis_rotated?0:$$.y).attr("y2",config.axis_rotated?$$.height:$$.y),$$.ygrid.exit().remove(),$$.smoothLines($$.ygrid,"grid")},c3_chart_internal_fn.gridTextAnchor=function(d){return d.position?d.position:"end"},c3_chart_internal_fn.gridTextDx=function(d){return"start"===d.position?4:"middle"===d.position?0:-4},c3_chart_internal_fn.xGridTextX=function(d){return"start"===d.position?-this.height:"middle"===d.position?-this.height/2:0},c3_chart_internal_fn.yGridTextX=function(d){return"start"===d.position?0:"middle"===d.position?this.width/2:this.width},c3_chart_internal_fn.updateGrid=function(duration){var xgridLine,ygridLine,yv,$$=this,main=$$.main,config=$$.config;$$.grid.style("visibility",$$.hasArcType()?"hidden":"visible"),main.select("line."+CLASS.xgridFocus).style("visibility","hidden"),config.grid_x_show&&$$.updateXGrid(),$$.xgridLines=main.select("."+CLASS.xgridLines).selectAll("."+CLASS.xgridLine).data(config.grid_x_lines),xgridLine=$$.xgridLines.enter().append("g").attr("class",function(d){return CLASS.xgridLine+(d.class?" "+d.class:"")}),xgridLine.append("line").style("opacity",0),xgridLine.append("text").attr("text-anchor",$$.gridTextAnchor).attr("transform",config.axis_rotated?"":"rotate(-90)").attr("dx",$$.gridTextDx).attr("dy",-5).style("opacity",0),$$.xgridLines.exit().transition().duration(duration).style("opacity",0).remove(),config.grid_y_show&&$$.updateYGrid(),$$.ygridLines=main.select("."+CLASS.ygridLines).selectAll("."+CLASS.ygridLine).data(config.grid_y_lines),ygridLine=$$.ygridLines.enter().append("g").attr("class",function(d){return CLASS.ygridLine+(d.class?" "+d.class:"")}),ygridLine.append("line").style("opacity",0),ygridLine.append("text").attr("text-anchor",$$.gridTextAnchor).attr("transform",config.axis_rotated?"rotate(-90)":"").attr("dx",$$.gridTextDx).attr("dy",-5).style("opacity",0),yv=$$.yv.bind($$),$$.ygridLines.select("line").transition().duration(duration).attr("x1",config.axis_rotated?yv:0).attr("x2",config.axis_rotated?yv:$$.width).attr("y1",config.axis_rotated?0:yv).attr("y2",config.axis_rotated?$$.height:yv).style("opacity",1),$$.ygridLines.select("text").transition().duration(duration).attr("x",config.axis_rotated?$$.xGridTextX.bind($$):$$.yGridTextX.bind($$)).attr("y",yv).text(function(d){return d.text}).style("opacity",1),$$.ygridLines.exit().transition().duration(duration).style("opacity",0).remove()},c3_chart_internal_fn.redrawGrid=function(withTransition){var $$=this,config=$$.config,xv=$$.xv.bind($$),lines=$$.xgridLines.select("line"),texts=$$.xgridLines.select("text");return[(withTransition?lines.transition():lines).attr("x1",config.axis_rotated?0:xv).attr("x2",config.axis_rotated?$$.width:xv).attr("y1",config.axis_rotated?xv:0).attr("y2",config.axis_rotated?xv:$$.height).style("opacity",1),(withTransition?texts.transition():texts).attr("x",config.axis_rotated?$$.yGridTextX.bind($$):$$.xGridTextX.bind($$)).attr("y",xv).text(function(d){return d.text}).style("opacity",1)]},c3_chart_internal_fn.showXGridFocus=function(selectedData){var $$=this,config=$$.config,dataToShow=selectedData.filter(function(d){return d&&isValue(d.value)}),focusEl=$$.main.selectAll("line."+CLASS.xgridFocus),xx=$$.xx.bind($$);config.tooltip_show&&($$.hasType("scatter")||$$.hasArcType()||(focusEl.style("visibility","visible").data([dataToShow[0]]).attr(config.axis_rotated?"y1":"x1",xx).attr(config.axis_rotated?"y2":"x2",xx),$$.smoothLines(focusEl,"grid")))},c3_chart_internal_fn.hideXGridFocus=function(){this.main.select("line."+CLASS.xgridFocus).style("visibility","hidden")},c3_chart_internal_fn.updateXgridFocus=function(){var $$=this,config=$$.config;$$.main.select("line."+CLASS.xgridFocus).attr("x1",config.axis_rotated?0:-10).attr("x2",config.axis_rotated?$$.width:-10).attr("y1",config.axis_rotated?-10:0).attr("y2",config.axis_rotated?-10:$$.height)},c3_chart_internal_fn.generateGridData=function(type,scale){var xDomain,firstYear,lastYear,i,$$=this,gridData=[],tickNum=$$.main.select("."+CLASS.axisX).selectAll(".tick").size();if("year"===type)for(xDomain=$$.getXDomain(),firstYear=xDomain[0].getFullYear(),lastYear=xDomain[1].getFullYear(),i=firstYear;i<=lastYear;i++)gridData.push(new Date(i+"-01-01 00:00:00"));else gridData=scale.ticks(10),gridData.length>tickNum&&(gridData=gridData.filter(function(d){return(""+d).indexOf(".")<0}));return gridData},c3_chart_internal_fn.getGridFilterToRemove=function(params){return params?function(line){var found=!1;return[].concat(params).forEach(function(param){("value"in param&&line.value===param.value||"class"in param&&line.class===param.class)&&(found=!0)}),found}:function(){return!0}},c3_chart_internal_fn.removeGridLines=function(params,forX){var $$=this,config=$$.config,toRemove=$$.getGridFilterToRemove(params),toShow=function(line){return!toRemove(line)},classLines=forX?CLASS.xgridLines:CLASS.ygridLines,classLine=forX?CLASS.xgridLine:CLASS.ygridLine;$$.main.select("."+classLines).selectAll("."+classLine).filter(toRemove).transition().duration(config.transition_duration).style("opacity",0).remove(),forX?config.grid_x_lines=config.grid_x_lines.filter(toShow):config.grid_y_lines=config.grid_y_lines.filter(toShow)},c3_chart_internal_fn.initTooltip=function(){var i,$$=this,config=$$.config;if($$.tooltip=$$.selectChart.style("position","relative").append("div").attr("class",CLASS.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none"),config.tooltip_init_show){if($$.isTimeSeries()&&isString(config.tooltip_init_x)){for(config.tooltip_init_x=$$.parseDate(config.tooltip_init_x),i=0;i<$$.data.targets[0].values.length&&$$.data.targets[0].values[i].x-config.tooltip_init_x!=0;i++);config.tooltip_init_x=i}$$.tooltip.html(config.tooltip_contents.call($$,$$.data.targets.map(function(d){return $$.addName(d.values[config.tooltip_init_x])}),$$.axis.getXAxisTickFormat(),$$.getYFormat($$.hasArcType()),$$.color)),$$.tooltip.style("top",config.tooltip_init_position.top).style("left",config.tooltip_init_position.left).style("display","block")}},c3_chart_internal_fn.getTooltipContent=function(d,defaultTitleFormat,defaultValueFormat,color){var text,i,title,value,name,bgcolor,$$=this,config=$$.config,titleFormat=config.tooltip_format_title||defaultTitleFormat,nameFormat=config.tooltip_format_name||function(name){return name},valueFormat=config.tooltip_format_value||defaultValueFormat,orderAsc=$$.isOrderAsc();if(0===config.data_groups.length)d.sort(function(a,b){var v1=a?a.value:null,v2=b?b.value:null;return orderAsc?v1-v2:v2-v1});else{var ids=$$.orderTargets($$.data.targets).map(function(i){return i.id});d.sort(function(a,b){var v1=a?a.value:null,v2=b?b.value:null;return v1>0&&v2>0&&(v1=a?ids.indexOf(a.id):null,v2=b?ids.indexOf(b.id):null),orderAsc?v1-v2:v2-v1})}for(i=0;i<d.length;i++)if(d[i]&&(d[i].value||0===d[i].value)&&(text||(title=sanitise(titleFormat?titleFormat(d[i].x):d[i].x),text="<table class='"+$$.CLASS.tooltip+"'>"+(title||0===title?"<tr><th colspan='2'>"+title+"</th></tr>":"")),void 0!==(value=sanitise(valueFormat(d[i].value,d[i].ratio,d[i].id,d[i].index,d))))){if(null===d[i].name)continue;name=sanitise(nameFormat(d[i].name,d[i].ratio,d[i].id,d[i].index)),bgcolor=$$.levelColor?$$.levelColor(d[i].value):color(d[i].id),text+="<tr class='"+$$.CLASS.tooltipName+"-"+$$.getTargetSelectorSuffix(d[i].id)+"'>",text+="<td class='name'><span style='background-color:"+bgcolor+"'></span>"+name+"</td>",text+="<td class='value'>"+value+"</td>",text+="</tr>"}return text+"</table>"},c3_chart_internal_fn.tooltipPosition=function(dataToShow,tWidth,tHeight,element){var svgLeft,tooltipLeft,tooltipRight,tooltipTop,chartRight,$$=this,config=$$.config,d3=$$.d3,forArc=$$.hasArcType(),mouse=d3.mouse(element);return forArc?(tooltipLeft=($$.width-($$.isLegendRight?$$.getLegendWidth():0))/2+mouse[0],tooltipTop=$$.height/2+mouse[1]+20):(svgLeft=$$.getSvgLeft(!0),config.axis_rotated?(tooltipLeft=svgLeft+mouse[0]+100,tooltipRight=tooltipLeft+tWidth,chartRight=$$.currentWidth-$$.getCurrentPaddingRight(),tooltipTop=$$.x(dataToShow[0].x)+20):(tooltipLeft=svgLeft+$$.getCurrentPaddingLeft(!0)+$$.x(dataToShow[0].x)+20,tooltipRight=tooltipLeft+tWidth,chartRight=svgLeft+$$.currentWidth-$$.getCurrentPaddingRight(),tooltipTop=mouse[1]+15),tooltipRight>chartRight&&(tooltipLeft-=tooltipRight-chartRight+20),tooltipTop+tHeight>$$.currentHeight&&(tooltipTop-=tHeight+30)),tooltipTop<0&&(tooltipTop=0),{top:tooltipTop,left:tooltipLeft}},c3_chart_internal_fn.showTooltip=function(selectedData,element){var tWidth,tHeight,position,$$=this,config=$$.config,forArc=$$.hasArcType(),dataToShow=selectedData.filter(function(d){return d&&isValue(d.value)}),positionFunction=config.tooltip_position||c3_chart_internal_fn.tooltipPosition;0!==dataToShow.length&&config.tooltip_show&&($$.tooltip.html(config.tooltip_contents.call($$,selectedData,$$.axis.getXAxisTickFormat(),$$.getYFormat(forArc),$$.color)).style("display","block"),tWidth=$$.tooltip.property("offsetWidth"),tHeight=$$.tooltip.property("offsetHeight"),position=positionFunction.call(this,dataToShow,tWidth,tHeight,element),$$.tooltip.style("top",position.top+"px").style("left",position.left+"px"))},c3_chart_internal_fn.hideTooltip=function(){this.tooltip.style("display","none")},c3_chart_internal_fn.initLegend=function(){var $$=this;if($$.legendItemTextBox={},$$.legendHasRendered=!1,$$.legend=$$.svg.append("g").attr("transform",$$.getTranslate("legend")),!$$.config.legend_show)return $$.legend.style("visibility","hidden"),void($$.hiddenLegendIds=$$.mapToIds($$.data.targets));$$.updateLegendWithDefaults()},c3_chart_internal_fn.updateLegendWithDefaults=function(){var $$=this;$$.updateLegend($$.mapToIds($$.data.targets),{withTransform:!1,withTransitionForTransform:!1,withTransition:!1})},c3_chart_internal_fn.updateSizeForLegend=function(legendHeight,legendWidth){var $$=this,config=$$.config,insetLegendPosition={top:$$.isLegendTop?$$.getCurrentPaddingTop()+config.legend_inset_y+5.5:$$.currentHeight-legendHeight-$$.getCurrentPaddingBottom()-config.legend_inset_y,left:$$.isLegendLeft?$$.getCurrentPaddingLeft()+config.legend_inset_x+.5:$$.currentWidth-legendWidth-$$.getCurrentPaddingRight()-config.legend_inset_x+.5};$$.margin3={top:$$.isLegendRight?0:$$.isLegendInset?insetLegendPosition.top:$$.currentHeight-legendHeight,right:NaN,bottom:0,left:$$.isLegendRight?$$.currentWidth-legendWidth:$$.isLegendInset?insetLegendPosition.left:0}},c3_chart_internal_fn.transformLegend=function(withTransition){var $$=this;(withTransition?$$.legend.transition():$$.legend).attr("transform",$$.getTranslate("legend"))},c3_chart_internal_fn.updateLegendStep=function(step){this.legendStep=step},c3_chart_internal_fn.updateLegendItemWidth=function(w){this.legendItemWidth=w},c3_chart_internal_fn.updateLegendItemHeight=function(h){this.legendItemHeight=h},c3_chart_internal_fn.getLegendWidth=function(){var $$=this;return $$.config.legend_show?$$.isLegendRight||$$.isLegendInset?$$.legendItemWidth*($$.legendStep+1):$$.currentWidth:0},c3_chart_internal_fn.getLegendHeight=function(){var $$=this,h=0;return $$.config.legend_show&&(h=$$.isLegendRight?$$.currentHeight:Math.max(20,$$.legendItemHeight)*($$.legendStep+1)),h},c3_chart_internal_fn.opacityForLegend=function(legendItem){return legendItem.classed(CLASS.legendItemHidden)?null:1},c3_chart_internal_fn.opacityForUnfocusedLegend=function(legendItem){return legendItem.classed(CLASS.legendItemHidden)?null:.3},c3_chart_internal_fn.toggleFocusLegend=function(targetIds,focus){var $$=this;targetIds=$$.mapToTargetIds(targetIds),$$.legend.selectAll("."+CLASS.legendItem).filter(function(id){return targetIds.indexOf(id)>=0}).classed(CLASS.legendItemFocused,focus).transition().duration(100).style("opacity",function(){return(focus?$$.opacityForLegend:$$.opacityForUnfocusedLegend).call($$,$$.d3.select(this))})},c3_chart_internal_fn.revertLegend=function(){var $$=this,d3=$$.d3;$$.legend.selectAll("."+CLASS.legendItem).classed(CLASS.legendItemFocused,!1).transition().duration(100).style("opacity",function(){return $$.opacityForLegend(d3.select(this))})},c3_chart_internal_fn.showLegend=function(targetIds){var $$=this,config=$$.config;config.legend_show||(config.legend_show=!0,$$.legend.style("visibility","visible"),$$.legendHasRendered||$$.updateLegendWithDefaults()),$$.removeHiddenLegendIds(targetIds),$$.legend.selectAll($$.selectorLegends(targetIds)).style("visibility","visible").transition().style("opacity",function(){return $$.opacityForLegend($$.d3.select(this))})},c3_chart_internal_fn.hideLegend=function(targetIds){var $$=this,config=$$.config;config.legend_show&&isEmpty(targetIds)&&(config.legend_show=!1,$$.legend.style("visibility","hidden")),$$.addHiddenLegendIds(targetIds),$$.legend.selectAll($$.selectorLegends(targetIds)).style("opacity",0).style("visibility","hidden")},c3_chart_internal_fn.clearLegendItemTextBoxCache=function(){this.legendItemTextBox={}},c3_chart_internal_fn.updateLegend=function(targetIds,options,transitions){function getTextBox(textElement,id){return $$.legendItemTextBox[id]||($$.legendItemTextBox[id]=$$.getTextRect(textElement.textContent,CLASS.legendItem,textElement)),$$.legendItemTextBox[id]}function updatePositions(textElement,id,index){function updateValues(id,withoutStep){withoutStep||(margin=(areaLength-totalLength-itemLength)/2)<posMin&&(margin=(areaLength-itemLength)/2,totalLength=0,step++),steps[id]=step,margins[step]=$$.isLegendInset?10:margin,offsets[id]=totalLength,totalLength+=itemLength}var margin,maxLength,reset=0===index,isLast=index===targetIds.length-1,box=getTextBox(textElement,id),itemWidth=box.width+tileWidth+(!isLast||$$.isLegendRight||$$.isLegendInset?paddingRight:0)+config.legend_padding,itemHeight=box.height+paddingTop,itemLength=$$.isLegendRight||$$.isLegendInset?itemHeight:itemWidth,areaLength=$$.isLegendRight||$$.isLegendInset?$$.getLegendHeight():$$.getLegendWidth();if(reset&&(totalLength=0,step=0,maxWidth=0,maxHeight=0),config.legend_show&&!$$.isLegendToShow(id))return void(widths[id]=heights[id]=steps[id]=offsets[id]=0);widths[id]=itemWidth,heights[id]=itemHeight,(!maxWidth||itemWidth>=maxWidth)&&(maxWidth=itemWidth),(!maxHeight||itemHeight>=maxHeight)&&(maxHeight=itemHeight),maxLength=$$.isLegendRight||$$.isLegendInset?maxHeight:maxWidth,config.legend_equally?(Object.keys(widths).forEach(function(id){widths[id]=maxWidth}),Object.keys(heights).forEach(function(id){heights[id]=maxHeight}),margin=(areaLength-maxLength*targetIds.length)/2,margin<posMin?(totalLength=0,step=0,targetIds.forEach(function(id){updateValues(id)})):updateValues(id,!0)):updateValues(id)}var xForLegend,xForLegendText,xForLegendRect,yForLegend,yForLegendText,yForLegendRect,x1ForLegendTile,x2ForLegendTile,yForLegendTile,l,withTransition,withTransitionForTransform,texts,rects,tiles,background,$$=this,config=$$.config,paddingTop=4,paddingRight=10,maxWidth=0,maxHeight=0,posMin=10,tileWidth=config.legend_item_tile_width+5,totalLength=0,offsets={},widths={},heights={},margins=[0],steps={},step=0;targetIds=targetIds.filter(function(id){return!isDefined(config.data_names[id])||null!==config.data_names[id]}),options=options||{},withTransition=getOption(options,"withTransition",!0),withTransitionForTransform=getOption(options,"withTransitionForTransform",!0),$$.isLegendInset&&(step=config.legend_inset_step?config.legend_inset_step:targetIds.length,$$.updateLegendStep(step)),$$.isLegendRight?(xForLegend=function(id){return maxWidth*steps[id]},yForLegend=function(id){return margins[steps[id]]+offsets[id]}):$$.isLegendInset?(xForLegend=function(id){return maxWidth*steps[id]+10},yForLegend=function(id){return margins[steps[id]]+offsets[id]}):(xForLegend=function(id){return margins[steps[id]]+offsets[id]},yForLegend=function(id){return maxHeight*steps[id]}),xForLegendText=function(id,i){return xForLegend(id,i)+4+config.legend_item_tile_width},yForLegendText=function(id,i){return yForLegend(id,i)+9},xForLegendRect=function(id,i){return xForLegend(id,i)},yForLegendRect=function(id,i){return yForLegend(id,i)-5},x1ForLegendTile=function(id,i){return xForLegend(id,i)-2},x2ForLegendTile=function(id,i){return xForLegend(id,i)-2+config.legend_item_tile_width},yForLegendTile=function(id,i){return yForLegend(id,i)+4},l=$$.legend.selectAll("."+CLASS.legendItem).data(targetIds).enter().append("g").attr("class",function(id){return $$.generateClass(CLASS.legendItem,id)}).style("visibility",function(id){return $$.isLegendToShow(id)?"visible":"hidden"}).style("cursor","pointer").on("click",function(id){config.legend_item_onclick?config.legend_item_onclick.call($$,id):$$.d3.event.altKey?($$.api.hide(),$$.api.show(id)):($$.api.toggle(id),$$.isTargetToShow(id)?$$.api.focus(id):$$.api.revert())}).on("mouseover",function(id){config.legend_item_onmouseover?config.legend_item_onmouseover.call($$,id):($$.d3.select(this).classed(CLASS.legendItemFocused,!0),!$$.transiting&&$$.isTargetToShow(id)&&$$.api.focus(id))}).on("mouseout",function(id){config.legend_item_onmouseout?config.legend_item_onmouseout.call($$,id):($$.d3.select(this).classed(CLASS.legendItemFocused,!1),$$.api.revert())}),l.append("text").text(function(id){return isDefined(config.data_names[id])?config.data_names[id]:id}).each(function(id,i){updatePositions(this,id,i)}).style("pointer-events","none").attr("x",$$.isLegendRight||$$.isLegendInset?xForLegendText:-200).attr("y",$$.isLegendRight||$$.isLegendInset?-200:yForLegendText),l.append("rect").attr("class",CLASS.legendItemEvent).style("fill-opacity",0).attr("x",$$.isLegendRight||$$.isLegendInset?xForLegendRect:-200).attr("y",$$.isLegendRight||$$.isLegendInset?-200:yForLegendRect),l.append("line").attr("class",CLASS.legendItemTile).style("stroke",$$.color).style("pointer-events","none").attr("x1",$$.isLegendRight||$$.isLegendInset?x1ForLegendTile:-200).attr("y1",$$.isLegendRight||$$.isLegendInset?-200:yForLegendTile).attr("x2",$$.isLegendRight||$$.isLegendInset?x2ForLegendTile:-200).attr("y2",$$.isLegendRight||$$.isLegendInset?-200:yForLegendTile).attr("stroke-width",config.legend_item_tile_height),background=$$.legend.select("."+CLASS.legendBackground+" rect"),$$.isLegendInset&&maxWidth>0&&0===background.size()&&(background=$$.legend.insert("g","."+CLASS.legendItem).attr("class",CLASS.legendBackground).append("rect")),texts=$$.legend.selectAll("text").data(targetIds).text(function(id){return isDefined(config.data_names[id])?config.data_names[id]:id}).each(function(id,i){updatePositions(this,id,i)}),(withTransition?texts.transition():texts).attr("x",xForLegendText).attr("y",yForLegendText),rects=$$.legend.selectAll("rect."+CLASS.legendItemEvent).data(targetIds),(withTransition?rects.transition():rects).attr("width",function(id){return widths[id]}).attr("height",function(id){return heights[id]}).attr("x",xForLegendRect).attr("y",yForLegendRect),tiles=$$.legend.selectAll("line."+CLASS.legendItemTile).data(targetIds),(withTransition?tiles.transition():tiles).style("stroke",$$.color).attr("x1",x1ForLegendTile).attr("y1",yForLegendTile).attr("x2",x2ForLegendTile).attr("y2",yForLegendTile),background&&(withTransition?background.transition():background).attr("height",$$.getLegendHeight()-12).attr("width",maxWidth*(step+1)+10),$$.legend.selectAll("."+CLASS.legendItem).classed(CLASS.legendItemHidden,function(id){return!$$.isTargetToShow(id)}),$$.updateLegendItemWidth(maxWidth),$$.updateLegendItemHeight(maxHeight),$$.updateLegendStep(step),$$.updateSizes(),$$.updateScales(),$$.updateSvgSize(),$$.transformAll(withTransitionForTransform,transitions),$$.legendHasRendered=!0},c3_chart_internal_fn.initTitle=function(){var $$=this;$$.title=$$.svg.append("text").text($$.config.title_text).attr("class",$$.CLASS.title)},c3_chart_internal_fn.redrawTitle=function(){var $$=this;$$.title.attr("x",$$.xForTitle.bind($$)).attr("y",$$.yForTitle.bind($$))},c3_chart_internal_fn.xForTitle=function(){var $$=this,config=$$.config,position=config.title_position||"left";return position.indexOf("right")>=0?$$.currentWidth-$$.getTextRect($$.title.node().textContent,$$.CLASS.title,$$.title.node()).width-config.title_padding.right:position.indexOf("center")>=0?($$.currentWidth-$$.getTextRect($$.title.node().textContent,$$.CLASS.title,$$.title.node()).width)/2:config.title_padding.left},c3_chart_internal_fn.yForTitle=function(){var $$=this;return $$.config.title_padding.top+$$.getTextRect($$.title.node().textContent,$$.CLASS.title,$$.title.node()).height},c3_chart_internal_fn.getTitlePadding=function(){var $$=this;return $$.yForTitle()+$$.config.title_padding.bottom},function(base,derived){if(Object.create)derived.prototype=Object.create(base.prototype);else{var f=function(){};f.prototype=base.prototype,derived.prototype=new f}derived.prototype.constructor=derived}(API,Axis),Axis.prototype.init=function(){var $$=this.owner,config=$$.config,main=$$.main;$$.axes.x=main.append("g").attr("class",CLASS.axis+" "+CLASS.axisX).attr("clip-path",$$.clipPathForXAxis).attr("transform",$$.getTranslate("x")).style("visibility",config.axis_x_show?"visible":"hidden"),$$.axes.x.append("text").attr("class",CLASS.axisXLabel).attr("transform",config.axis_rotated?"rotate(-90)":"").style("text-anchor",this.textAnchorForXAxisLabel.bind(this)),$$.axes.y=main.append("g").attr("class",CLASS.axis+" "+CLASS.axisY).attr("clip-path",config.axis_y_inner?"":$$.clipPathForYAxis).attr("transform",$$.getTranslate("y")).style("visibility",config.axis_y_show?"visible":"hidden"),$$.axes.y.append("text").attr("class",CLASS.axisYLabel).attr("transform",config.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForYAxisLabel.bind(this)),$$.axes.y2=main.append("g").attr("class",CLASS.axis+" "+CLASS.axisY2).attr("transform",$$.getTranslate("y2")).style("visibility",config.axis_y2_show?"visible":"hidden"),$$.axes.y2.append("text").attr("class",CLASS.axisY2Label).attr("transform",config.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForY2AxisLabel.bind(this))},Axis.prototype.getXAxis=function(scale,orient,tickFormat,tickValues,withOuterTick,withoutTransition,withoutRotateTickText){var $$=this.owner,config=$$.config,axisParams={isCategory:$$.isCategorized(),withOuterTick:withOuterTick,tickMultiline:config.axis_x_tick_multiline,tickWidth:config.axis_x_tick_width,tickTextRotate:withoutRotateTickText?0:config.axis_x_tick_rotate,withoutTransition:withoutTransition},axis=c3_axis($$.d3,axisParams).scale(scale).orient(orient);return $$.isTimeSeries()&&tickValues&&"function"!=typeof tickValues&&(tickValues=tickValues.map(function(v){return $$.parseDate(v)})),axis.tickFormat(tickFormat).tickValues(tickValues),$$.isCategorized()&&(axis.tickCentered(config.axis_x_tick_centered),isEmpty(config.axis_x_tick_culling)&&(config.axis_x_tick_culling=!1)),axis},Axis.prototype.updateXAxisTickValues=function(targets,axis){var tickValues,$$=this.owner,config=$$.config;return(config.axis_x_tick_fit||config.axis_x_tick_count)&&(tickValues=this.generateTickValues($$.mapTargetsToUniqueXs(targets),config.axis_x_tick_count,$$.isTimeSeries())),axis?axis.tickValues(tickValues):($$.xAxis.tickValues(tickValues),$$.subXAxis.tickValues(tickValues)),tickValues},Axis.prototype.getYAxis=function(scale,orient,tickFormat,tickValues,withOuterTick,withoutTransition,withoutRotateTickText){var $$=this.owner,config=$$.config,axisParams={withOuterTick:withOuterTick,withoutTransition:withoutTransition,tickTextRotate:withoutRotateTickText?0:config.axis_y_tick_rotate},axis=c3_axis($$.d3,axisParams).scale(scale).orient(orient).tickFormat(tickFormat);return $$.isTimeSeriesY()?axis.ticks($$.d3.time[config.axis_y_tick_time_value],config.axis_y_tick_time_interval):axis.tickValues(tickValues),axis},Axis.prototype.getId=function(id){var config=this.owner.config;return id in config.data_axes?config.data_axes[id]:"y"},Axis.prototype.getXAxisTickFormat=function(){var $$=this.owner,config=$$.config,format=$$.isTimeSeries()?$$.defaultAxisTimeFormat:$$.isCategorized()?$$.categoryName:function(v){return v<0?v.toFixed(0):v};return config.axis_x_tick_format&&(isFunction(config.axis_x_tick_format)?format=config.axis_x_tick_format:$$.isTimeSeries()&&(format=function(date){return date?$$.axisTimeFormat(config.axis_x_tick_format)(date):""})),isFunction(format)?function(v){return format.call($$,v)}:format},Axis.prototype.getTickValues=function(tickValues,axis){return tickValues||(axis?axis.tickValues():void 0)},Axis.prototype.getXAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_x_tick_values,this.owner.xAxis)},Axis.prototype.getYAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y_tick_values,this.owner.yAxis)},Axis.prototype.getY2AxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y2_tick_values,this.owner.y2Axis)},Axis.prototype.getLabelOptionByAxisId=function(axisId){var option,$$=this.owner,config=$$.config;return"y"===axisId?option=config.axis_y_label:"y2"===axisId?option=config.axis_y2_label:"x"===axisId&&(option=config.axis_x_label),option},Axis.prototype.getLabelText=function(axisId){var option=this.getLabelOptionByAxisId(axisId);return isString(option)?option:option?option.text:null},Axis.prototype.setLabelText=function(axisId,text){var $$=this.owner,config=$$.config,option=this.getLabelOptionByAxisId(axisId);isString(option)?"y"===axisId?config.axis_y_label=text:"y2"===axisId?config.axis_y2_label=text:"x"===axisId&&(config.axis_x_label=text):option&&(option.text=text)},Axis.prototype.getLabelPosition=function(axisId,defaultPosition){var option=this.getLabelOptionByAxisId(axisId),position=option&&"object"==typeof option&&option.position?option.position:defaultPosition;return{isInner:position.indexOf("inner")>=0,isOuter:position.indexOf("outer")>=0,isLeft:position.indexOf("left")>=0,isCenter:position.indexOf("center")>=0,isRight:position.indexOf("right")>=0,isTop:position.indexOf("top")>=0,
isMiddle:position.indexOf("middle")>=0,isBottom:position.indexOf("bottom")>=0}},Axis.prototype.getXAxisLabelPosition=function(){return this.getLabelPosition("x",this.owner.config.axis_rotated?"inner-top":"inner-right")},Axis.prototype.getYAxisLabelPosition=function(){return this.getLabelPosition("y",this.owner.config.axis_rotated?"inner-right":"inner-top")},Axis.prototype.getY2AxisLabelPosition=function(){return this.getLabelPosition("y2",this.owner.config.axis_rotated?"inner-right":"inner-top")},Axis.prototype.getLabelPositionById=function(id){return"y2"===id?this.getY2AxisLabelPosition():"y"===id?this.getYAxisLabelPosition():this.getXAxisLabelPosition()},Axis.prototype.textForXAxisLabel=function(){return this.getLabelText("x")},Axis.prototype.textForYAxisLabel=function(){return this.getLabelText("y")},Axis.prototype.textForY2AxisLabel=function(){return this.getLabelText("y2")},Axis.prototype.xForAxisLabel=function(forHorizontal,position){var $$=this.owner;return forHorizontal?position.isLeft?0:position.isCenter?$$.width/2:$$.width:position.isBottom?-$$.height:position.isMiddle?-$$.height/2:0},Axis.prototype.dxForAxisLabel=function(forHorizontal,position){return forHorizontal?position.isLeft?"0.5em":position.isRight?"-0.5em":"0":position.isTop?"-0.5em":position.isBottom?"0.5em":"0"},Axis.prototype.textAnchorForAxisLabel=function(forHorizontal,position){return forHorizontal?position.isLeft?"start":position.isCenter?"middle":"end":position.isBottom?"start":position.isMiddle?"middle":"end"},Axis.prototype.xForXAxisLabel=function(){return this.xForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},Axis.prototype.xForYAxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},Axis.prototype.xForY2AxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},Axis.prototype.dxForXAxisLabel=function(){return this.dxForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},Axis.prototype.dxForYAxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},Axis.prototype.dxForY2AxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},Axis.prototype.dyForXAxisLabel=function(){var $$=this.owner,config=$$.config,position=this.getXAxisLabelPosition();return config.axis_rotated?position.isInner?"1.2em":-25-this.getMaxTickWidth("x"):position.isInner?"-0.5em":config.axis_x_height?config.axis_x_height-10:"3em"},Axis.prototype.dyForYAxisLabel=function(){var $$=this.owner,position=this.getYAxisLabelPosition();return $$.config.axis_rotated?position.isInner?"-0.5em":"3em":position.isInner?"1.2em":-10-($$.config.axis_y_inner?0:this.getMaxTickWidth("y")+10)},Axis.prototype.dyForY2AxisLabel=function(){var $$=this.owner,position=this.getY2AxisLabelPosition();return $$.config.axis_rotated?position.isInner?"1.2em":"-2.2em":position.isInner?"-0.5em":15+($$.config.axis_y2_inner?0:this.getMaxTickWidth("y2")+15)},Axis.prototype.textAnchorForXAxisLabel=function(){var $$=this.owner;return this.textAnchorForAxisLabel(!$$.config.axis_rotated,this.getXAxisLabelPosition())},Axis.prototype.textAnchorForYAxisLabel=function(){var $$=this.owner;return this.textAnchorForAxisLabel($$.config.axis_rotated,this.getYAxisLabelPosition())},Axis.prototype.textAnchorForY2AxisLabel=function(){var $$=this.owner;return this.textAnchorForAxisLabel($$.config.axis_rotated,this.getY2AxisLabelPosition())},Axis.prototype.getMaxTickWidth=function(id,withoutRecompute){var targetsToShow,scale,axis,dummy,svg,$$=this.owner,config=$$.config,maxWidth=0;return withoutRecompute&&$$.currentMaxTickWidths[id]?$$.currentMaxTickWidths[id]:($$.svg&&(targetsToShow=$$.filterTargetsToShow($$.data.targets),"y"===id?(scale=$$.y.copy().domain($$.getYDomain(targetsToShow,"y")),axis=this.getYAxis(scale,$$.yOrient,config.axis_y_tick_format,$$.yAxisTickValues,!1,!0,!0)):"y2"===id?(scale=$$.y2.copy().domain($$.getYDomain(targetsToShow,"y2")),axis=this.getYAxis(scale,$$.y2Orient,config.axis_y2_tick_format,$$.y2AxisTickValues,!1,!0,!0)):(scale=$$.x.copy().domain($$.getXDomain(targetsToShow)),axis=this.getXAxis(scale,$$.xOrient,$$.xAxisTickFormat,$$.xAxisTickValues,!1,!0,!0),this.updateXAxisTickValues(targetsToShow,axis)),dummy=$$.d3.select("body").append("div").classed("c3",!0),svg=dummy.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0),svg.append("g").call(axis).each(function(){$$.d3.select(this).selectAll("text").each(function(){var box=this.getBoundingClientRect();maxWidth<box.width&&(maxWidth=box.width)}),dummy.remove()})),$$.currentMaxTickWidths[id]=maxWidth<=0?$$.currentMaxTickWidths[id]:maxWidth,$$.currentMaxTickWidths[id])},Axis.prototype.updateLabels=function(withTransition){var $$=this.owner,axisXLabel=$$.main.select("."+CLASS.axisX+" ."+CLASS.axisXLabel),axisYLabel=$$.main.select("."+CLASS.axisY+" ."+CLASS.axisYLabel),axisY2Label=$$.main.select("."+CLASS.axisY2+" ."+CLASS.axisY2Label);(withTransition?axisXLabel.transition():axisXLabel).attr("x",this.xForXAxisLabel.bind(this)).attr("dx",this.dxForXAxisLabel.bind(this)).attr("dy",this.dyForXAxisLabel.bind(this)).text(this.textForXAxisLabel.bind(this)),(withTransition?axisYLabel.transition():axisYLabel).attr("x",this.xForYAxisLabel.bind(this)).attr("dx",this.dxForYAxisLabel.bind(this)).attr("dy",this.dyForYAxisLabel.bind(this)).text(this.textForYAxisLabel.bind(this)),(withTransition?axisY2Label.transition():axisY2Label).attr("x",this.xForY2AxisLabel.bind(this)).attr("dx",this.dxForY2AxisLabel.bind(this)).attr("dy",this.dyForY2AxisLabel.bind(this)).text(this.textForY2AxisLabel.bind(this))},Axis.prototype.getPadding=function(padding,key,defaultValue,domainLength){var p="number"==typeof padding?padding:padding[key];return isValue(p)?"ratio"===padding.unit?padding[key]*domainLength:this.convertPixelsToAxisPadding(p,domainLength):defaultValue},Axis.prototype.convertPixelsToAxisPadding=function(pixels,domainLength){var $$=this.owner;return domainLength*(pixels/($$.config.axis_rotated?$$.width:$$.height))},Axis.prototype.generateTickValues=function(values,tickCount,forTimeSeries){var targetCount,start,end,count,interval,i,tickValue,tickValues=values;if(tickCount)if(1===(targetCount=isFunction(tickCount)?tickCount():tickCount))tickValues=[values[0]];else if(2===targetCount)tickValues=[values[0],values[values.length-1]];else if(targetCount>2){for(count=targetCount-2,start=values[0],end=values[values.length-1],interval=(end-start)/(count+1),tickValues=[start],i=0;i<count;i++)tickValue=+start+interval*(i+1),tickValues.push(forTimeSeries?new Date(tickValue):tickValue);tickValues.push(end)}return forTimeSeries||(tickValues=tickValues.sort(function(a,b){return a-b})),tickValues},Axis.prototype.generateTransitions=function(duration){var $$=this.owner,axes=$$.axes;return{axisX:duration?axes.x.transition().duration(duration):axes.x,axisY:duration?axes.y.transition().duration(duration):axes.y,axisY2:duration?axes.y2.transition().duration(duration):axes.y2,axisSubX:duration?axes.subx.transition().duration(duration):axes.subx}},Axis.prototype.redraw=function(transitions,isHidden){var $$=this.owner;$$.axes.x.style("opacity",isHidden?0:1),$$.axes.y.style("opacity",isHidden?0:1),$$.axes.y2.style("opacity",isHidden?0:1),$$.axes.subx.style("opacity",isHidden?0:1),transitions.axisX.call($$.xAxis),transitions.axisY.call($$.yAxis),transitions.axisY2.call($$.y2Axis),transitions.axisSubX.call($$.subXAxis)},c3_chart_internal_fn.getClipPath=function(id){return"url("+(window.navigator.appVersion.toLowerCase().indexOf("msie 9.")>=0?"":document.URL.split("#")[0])+"#"+id+")"},c3_chart_internal_fn.appendClip=function(parent,id){return parent.append("clipPath").attr("id",id).append("rect")},c3_chart_internal_fn.getAxisClipX=function(forHorizontal){var left=Math.max(30,this.margin.left);return forHorizontal?-(1+left):-(left-1)},c3_chart_internal_fn.getAxisClipY=function(forHorizontal){return forHorizontal?-20:-this.margin.top},c3_chart_internal_fn.getXAxisClipX=function(){var $$=this;return $$.getAxisClipX(!$$.config.axis_rotated)},c3_chart_internal_fn.getXAxisClipY=function(){var $$=this;return $$.getAxisClipY(!$$.config.axis_rotated)},c3_chart_internal_fn.getYAxisClipX=function(){var $$=this;return $$.config.axis_y_inner?-1:$$.getAxisClipX($$.config.axis_rotated)},c3_chart_internal_fn.getYAxisClipY=function(){var $$=this;return $$.getAxisClipY($$.config.axis_rotated)},c3_chart_internal_fn.getAxisClipWidth=function(forHorizontal){var $$=this,left=Math.max(30,$$.margin.left),right=Math.max(30,$$.margin.right);return forHorizontal?$$.width+2+left+right:$$.margin.left+20},c3_chart_internal_fn.getAxisClipHeight=function(forHorizontal){return(forHorizontal?this.margin.bottom:this.margin.top+this.height)+20},c3_chart_internal_fn.getXAxisClipWidth=function(){var $$=this;return $$.getAxisClipWidth(!$$.config.axis_rotated)},c3_chart_internal_fn.getXAxisClipHeight=function(){var $$=this;return $$.getAxisClipHeight(!$$.config.axis_rotated)},c3_chart_internal_fn.getYAxisClipWidth=function(){var $$=this;return $$.getAxisClipWidth($$.config.axis_rotated)+($$.config.axis_y_inner?20:0)},c3_chart_internal_fn.getYAxisClipHeight=function(){var $$=this;return $$.getAxisClipHeight($$.config.axis_rotated)},c3_chart_internal_fn.initPie=function(){var $$=this,d3=$$.d3,config=$$.config;$$.pie=d3.layout.pie().value(function(d){return d.values.reduce(function(a,b){return a+b.value},0)}),config.data_order||$$.pie.sort(null)},c3_chart_internal_fn.updateRadius=function(){var $$=this,config=$$.config,w=config.gauge_width||config.donut_width;$$.radiusExpanded=Math.min($$.arcWidth,$$.arcHeight)/2,$$.radius=.95*$$.radiusExpanded,$$.innerRadiusRatio=w?($$.radius-w)/$$.radius:.6,$$.innerRadius=$$.hasType("donut")||$$.hasType("gauge")?$$.radius*$$.innerRadiusRatio:0},c3_chart_internal_fn.updateArc=function(){var $$=this;$$.svgArc=$$.getSvgArc(),$$.svgArcExpanded=$$.getSvgArcExpanded(),$$.svgArcExpandedSub=$$.getSvgArcExpanded(.98)},c3_chart_internal_fn.updateAngle=function(d){var gMin,gMax,gTic,gValue,$$=this,config=$$.config,found=!1,index=0;return config?($$.pie($$.filterTargetsToShow($$.data.targets)).forEach(function(t){found||t.data.id!==d.data.id||(found=!0,d=t,d.index=index),index++}),isNaN(d.startAngle)&&(d.startAngle=0),isNaN(d.endAngle)&&(d.endAngle=d.startAngle),$$.isGaugeType(d.data)&&(gMin=config.gauge_min,gMax=config.gauge_max,gTic=Math.PI*(config.gauge_fullCircle?2:1)/(gMax-gMin),gValue=d.value<gMin?0:d.value<gMax?d.value-gMin:gMax-gMin,d.startAngle=config.gauge_startingAngle,d.endAngle=d.startAngle+gTic*gValue),found?d:null):null},c3_chart_internal_fn.getSvgArc=function(){var $$=this,arc=$$.d3.svg.arc().outerRadius($$.radius).innerRadius($$.innerRadius),newArc=function(d,withoutUpdate){var updated;return withoutUpdate?arc(d):(updated=$$.updateAngle(d),updated?arc(updated):"M 0 0")};return newArc.centroid=arc.centroid,newArc},c3_chart_internal_fn.getSvgArcExpanded=function(rate){var $$=this,arc=$$.d3.svg.arc().outerRadius($$.radiusExpanded*(rate||1)).innerRadius($$.innerRadius);return function(d){var updated=$$.updateAngle(d);return updated?arc(updated):"M 0 0"}},c3_chart_internal_fn.getArc=function(d,withoutUpdate,force){return force||this.isArcType(d.data)?this.svgArc(d,withoutUpdate):"M 0 0"},c3_chart_internal_fn.transformForArcLabel=function(d){var c,x,y,h,ratio,$$=this,config=$$.config,updated=$$.updateAngle(d),translate="";return updated&&!$$.hasType("gauge")&&(c=this.svgArc.centroid(updated),x=isNaN(c[0])?0:c[0],y=isNaN(c[1])?0:c[1],h=Math.sqrt(x*x+y*y),ratio=$$.hasType("donut")&&config.donut_label_ratio?isFunction(config.donut_label_ratio)?config.donut_label_ratio(d,$$.radius,h):config.donut_label_ratio:$$.hasType("pie")&&config.pie_label_ratio?isFunction(config.pie_label_ratio)?config.pie_label_ratio(d,$$.radius,h):config.pie_label_ratio:$$.radius&&h?(36/$$.radius>.375?1.175-36/$$.radius:.8)*$$.radius/h:0,translate="translate("+x*ratio+","+y*ratio+")"),translate},c3_chart_internal_fn.getArcRatio=function(d){var $$=this,config=$$.config,whole=Math.PI*($$.hasType("gauge")&&!config.gauge_fullCircle?1:2);return d?(d.endAngle-d.startAngle)/whole:null},c3_chart_internal_fn.convertToArcData=function(d){return this.addName({id:d.data.id,value:d.value,ratio:this.getArcRatio(d),index:d.index})},c3_chart_internal_fn.textForArcLabel=function(d){var updated,value,ratio,id,format,$$=this;return $$.shouldShowArcLabel()?(updated=$$.updateAngle(d),value=updated?updated.value:null,ratio=$$.getArcRatio(updated),id=d.data.id,$$.hasType("gauge")||$$.meetsArcLabelThreshold(ratio)?(format=$$.getArcLabelFormat(),format?format(value,ratio,id):$$.defaultArcValueFormat(value,ratio)):""):""},c3_chart_internal_fn.expandArc=function(targetIds){var interval,$$=this;if($$.transiting)return void(interval=window.setInterval(function(){$$.transiting||(window.clearInterval(interval),$$.legend.selectAll(".c3-legend-item-focused").size()>0&&$$.expandArc(targetIds))},10));targetIds=$$.mapToTargetIds(targetIds),$$.svg.selectAll($$.selectorTargets(targetIds,"."+CLASS.chartArc)).each(function(d){$$.shouldExpand(d.data.id)&&$$.d3.select(this).selectAll("path").transition().duration($$.expandDuration(d.data.id)).attr("d",$$.svgArcExpanded).transition().duration(2*$$.expandDuration(d.data.id)).attr("d",$$.svgArcExpandedSub).each(function(d){$$.isDonutType(d.data)})})},c3_chart_internal_fn.unexpandArc=function(targetIds){var $$=this;$$.transiting||(targetIds=$$.mapToTargetIds(targetIds),$$.svg.selectAll($$.selectorTargets(targetIds,"."+CLASS.chartArc)).selectAll("path").transition().duration(function(d){return $$.expandDuration(d.data.id)}).attr("d",$$.svgArc),$$.svg.selectAll("."+CLASS.arc).style("opacity",1))},c3_chart_internal_fn.expandDuration=function(id){var $$=this,config=$$.config;return $$.isDonutType(id)?config.donut_expand_duration:$$.isGaugeType(id)?config.gauge_expand_duration:$$.isPieType(id)?config.pie_expand_duration:50},c3_chart_internal_fn.shouldExpand=function(id){var $$=this,config=$$.config;return $$.isDonutType(id)&&config.donut_expand||$$.isGaugeType(id)&&config.gauge_expand||$$.isPieType(id)&&config.pie_expand},c3_chart_internal_fn.shouldShowArcLabel=function(){var $$=this,config=$$.config,shouldShow=!0;return $$.hasType("donut")?shouldShow=config.donut_label_show:$$.hasType("pie")&&(shouldShow=config.pie_label_show),shouldShow},c3_chart_internal_fn.meetsArcLabelThreshold=function(ratio){var $$=this,config=$$.config;return ratio>=($$.hasType("donut")?config.donut_label_threshold:config.pie_label_threshold)},c3_chart_internal_fn.getArcLabelFormat=function(){var $$=this,config=$$.config,format=config.pie_label_format;return $$.hasType("gauge")?format=config.gauge_label_format:$$.hasType("donut")&&(format=config.donut_label_format),format},c3_chart_internal_fn.getArcTitle=function(){var $$=this;return $$.hasType("donut")?$$.config.donut_title:""},c3_chart_internal_fn.updateTargetsForArc=function(targets){var mainPieUpdate,mainPieEnter,$$=this,main=$$.main,classChartArc=$$.classChartArc.bind($$),classArcs=$$.classArcs.bind($$),classFocus=$$.classFocus.bind($$);mainPieUpdate=main.select("."+CLASS.chartArcs).selectAll("."+CLASS.chartArc).data($$.pie(targets)).attr("class",function(d){return classChartArc(d)+classFocus(d.data)}),mainPieEnter=mainPieUpdate.enter().append("g").attr("class",classChartArc),mainPieEnter.append("g").attr("class",classArcs),mainPieEnter.append("text").attr("dy",$$.hasType("gauge")?"-.1em":".35em").style("opacity",0).style("text-anchor","middle").style("pointer-events","none")},c3_chart_internal_fn.initArc=function(){var $$=this;$$.arcs=$$.main.select("."+CLASS.chart).append("g").attr("class",CLASS.chartArcs).attr("transform",$$.getTranslate("arc")),$$.arcs.append("text").attr("class",CLASS.chartArcsTitle).style("text-anchor","middle").text($$.getArcTitle())},c3_chart_internal_fn.redrawArc=function(duration,durationForExit,withTransform){var mainArc,$$=this,d3=$$.d3,config=$$.config,main=$$.main;mainArc=main.selectAll("."+CLASS.arcs).selectAll("."+CLASS.arc).data($$.arcData.bind($$)),mainArc.enter().append("path").attr("class",$$.classArc.bind($$)).style("fill",function(d){return $$.color(d.data)}).style("cursor",function(d){return config.interaction_enabled&&config.data_selection_isselectable(d)?"pointer":null}).style("opacity",0).each(function(d){$$.isGaugeType(d.data)&&(d.startAngle=d.endAngle=config.gauge_startingAngle),this._current=d}),mainArc.attr("transform",function(d){return!$$.isGaugeType(d.data)&&withTransform?"scale(0)":""}).style("opacity",function(d){return d===this._current?0:1}).on("mouseover",config.interaction_enabled?function(d){var updated,arcData;$$.transiting||(updated=$$.updateAngle(d))&&(arcData=$$.convertToArcData(updated),$$.expandArc(updated.data.id),$$.api.focus(updated.data.id),$$.toggleFocusLegend(updated.data.id,!0),$$.config.data_onmouseover(arcData,this))}:null).on("mousemove",config.interaction_enabled?function(d){var arcData,selectedData,updated=$$.updateAngle(d);updated&&(arcData=$$.convertToArcData(updated),selectedData=[arcData],$$.showTooltip(selectedData,this))}:null).on("mouseout",config.interaction_enabled?function(d){var updated,arcData;$$.transiting||(updated=$$.updateAngle(d))&&(arcData=$$.convertToArcData(updated),$$.unexpandArc(updated.data.id),$$.api.revert(),$$.revertLegend(),$$.hideTooltip(),$$.config.data_onmouseout(arcData,this))}:null).on("click",config.interaction_enabled?function(d,i){var arcData,updated=$$.updateAngle(d);updated&&(arcData=$$.convertToArcData(updated),$$.toggleShape&&$$.toggleShape(this,arcData,i),$$.config.data_onclick.call($$.api,arcData,this))}:null).each(function(){$$.transiting=!0}).transition().duration(duration).attrTween("d",function(d){var interpolate,updated=$$.updateAngle(d);return updated?(isNaN(this._current.startAngle)&&(this._current.startAngle=0),isNaN(this._current.endAngle)&&(this._current.endAngle=this._current.startAngle),interpolate=d3.interpolate(this._current,updated),this._current=interpolate(0),function(t){var interpolated=interpolate(t);return interpolated.data=d.data,$$.getArc(interpolated,!0)}):function(){return"M 0 0"}}).attr("transform",withTransform?"scale(1)":"").style("fill",function(d){return $$.levelColor?$$.levelColor(d.data.values[0].value):$$.color(d.data.id)}).style("opacity",1).call($$.endall,function(){$$.transiting=!1}),mainArc.exit().transition().duration(durationForExit).style("opacity",0).remove(),main.selectAll("."+CLASS.chartArc).select("text").style("opacity",0).attr("class",function(d){return $$.isGaugeType(d.data)?CLASS.gaugeValue:""}).text($$.textForArcLabel.bind($$)).attr("transform",$$.transformForArcLabel.bind($$)).style("font-size",function(d){return $$.isGaugeType(d.data)?Math.round($$.radius/5)+"px":""}).transition().duration(duration).style("opacity",function(d){return $$.isTargetToShow(d.data.id)&&$$.isArcType(d.data)?1:0}),main.select("."+CLASS.chartArcsTitle).style("opacity",$$.hasType("donut")||$$.hasType("gauge")?1:0),$$.hasType("gauge")&&($$.arcs.select("."+CLASS.chartArcsBackground).attr("d",function(){var d={data:[{value:config.gauge_max}],startAngle:config.gauge_startingAngle,endAngle:-1*config.gauge_startingAngle};return $$.getArc(d,!0,!0)}),$$.arcs.select("."+CLASS.chartArcsGaugeUnit).attr("dy",".75em").text(config.gauge_label_show?config.gauge_units:""),$$.arcs.select("."+CLASS.chartArcsGaugeMin).attr("dx",-1*($$.innerRadius+($$.radius-$$.innerRadius)/(config.gauge_fullCircle?1:2))+"px").attr("dy","1.2em").text(config.gauge_label_show?config.gauge_min:""),$$.arcs.select("."+CLASS.chartArcsGaugeMax).attr("dx",$$.innerRadius+($$.radius-$$.innerRadius)/(config.gauge_fullCircle?1:2)+"px").attr("dy","1.2em").text(config.gauge_label_show?config.gauge_max:""))},c3_chart_internal_fn.initGauge=function(){var arcs=this.arcs;this.hasType("gauge")&&(arcs.append("path").attr("class",CLASS.chartArcsBackground),arcs.append("text").attr("class",CLASS.chartArcsGaugeUnit).style("text-anchor","middle").style("pointer-events","none"),arcs.append("text").attr("class",CLASS.chartArcsGaugeMin).style("text-anchor","middle").style("pointer-events","none"),arcs.append("text").attr("class",CLASS.chartArcsGaugeMax).style("text-anchor","middle").style("pointer-events","none"))},c3_chart_internal_fn.getGaugeLabelHeight=function(){return this.config.gauge_label_show?20:0},c3_chart_internal_fn.initRegion=function(){var $$=this;$$.region=$$.main.append("g").attr("clip-path",$$.clipPath).attr("class",CLASS.regions)},c3_chart_internal_fn.updateRegion=function(duration){var $$=this,config=$$.config;$$.region.style("visibility",$$.hasArcType()?"hidden":"visible"),$$.mainRegion=$$.main.select("."+CLASS.regions).selectAll("."+CLASS.region).data(config.regions),$$.mainRegion.enter().append("g").append("rect").style("fill-opacity",0),$$.mainRegion.attr("class",$$.classRegion.bind($$)),$$.mainRegion.exit().transition().duration(duration).style("opacity",0).remove()},c3_chart_internal_fn.redrawRegion=function(withTransition){var $$=this,regions=$$.mainRegion.selectAll("rect").each(function(){var parentData=$$.d3.select(this.parentNode).datum();$$.d3.select(this).datum(parentData)}),x=$$.regionX.bind($$),y=$$.regionY.bind($$),w=$$.regionWidth.bind($$),h=$$.regionHeight.bind($$);return[(withTransition?regions.transition():regions).attr("x",x).attr("y",y).attr("width",w).attr("height",h).style("fill-opacity",function(d){return isValue(d.opacity)?d.opacity:.1})]},c3_chart_internal_fn.regionX=function(d){var $$=this,config=$$.config,yScale="y"===d.axis?$$.y:$$.y2;return"y"===d.axis||"y2"===d.axis?config.axis_rotated&&"start"in d?yScale(d.start):0:config.axis_rotated?0:"start"in d?$$.x($$.isTimeSeries()?$$.parseDate(d.start):d.start):0},c3_chart_internal_fn.regionY=function(d){var $$=this,config=$$.config,yScale="y"===d.axis?$$.y:$$.y2;return"y"===d.axis||"y2"===d.axis?config.axis_rotated?0:"end"in d?yScale(d.end):0:config.axis_rotated&&"start"in d?$$.x($$.isTimeSeries()?$$.parseDate(d.start):d.start):0},c3_chart_internal_fn.regionWidth=function(d){var end,$$=this,config=$$.config,start=$$.regionX(d),yScale="y"===d.axis?$$.y:$$.y2;return end="y"===d.axis||"y2"===d.axis?config.axis_rotated&&"end"in d?yScale(d.end):$$.width:config.axis_rotated?$$.width:"end"in d?$$.x($$.isTimeSeries()?$$.parseDate(d.end):d.end):$$.width,end<start?0:end-start},c3_chart_internal_fn.regionHeight=function(d){var end,$$=this,config=$$.config,start=this.regionY(d),yScale="y"===d.axis?$$.y:$$.y2;return end="y"===d.axis||"y2"===d.axis?config.axis_rotated?$$.height:"start"in d?yScale(d.start):$$.height:config.axis_rotated&&"end"in d?$$.x($$.isTimeSeries()?$$.parseDate(d.end):d.end):$$.height,end<start?0:end-start},c3_chart_internal_fn.isRegionOnX=function(d){return!d.axis||"x"===d.axis},c3_chart_internal_fn.drag=function(mouse){var sx,sy,mx,my,minX,maxX,minY,maxY,$$=this,config=$$.config,main=$$.main,d3=$$.d3;$$.hasArcType()||config.data_selection_enabled&&(config.zoom_enabled&&!$$.zoom.altDomain||config.data_selection_multiple&&(sx=$$.dragStart[0],sy=$$.dragStart[1],mx=mouse[0],my=mouse[1],minX=Math.min(sx,mx),maxX=Math.max(sx,mx),minY=config.data_selection_grouped?$$.margin.top:Math.min(sy,my),maxY=config.data_selection_grouped?$$.height:Math.max(sy,my),main.select("."+CLASS.dragarea).attr("x",minX).attr("y",minY).attr("width",maxX-minX).attr("height",maxY-minY),main.selectAll("."+CLASS.shapes).selectAll("."+CLASS.shape).filter(function(d){return config.data_selection_isselectable(d)}).each(function(d,i){var _x,_y,_w,_h,toggle,box,shape=d3.select(this),isSelected=shape.classed(CLASS.SELECTED),isIncluded=shape.classed(CLASS.INCLUDED),isWithin=!1;if(shape.classed(CLASS.circle))_x=1*shape.attr("cx"),_y=1*shape.attr("cy"),toggle=$$.togglePoint,isWithin=minX<_x&&_x<maxX&&minY<_y&&_y<maxY;else{if(!shape.classed(CLASS.bar))return;box=getPathBox(this),_x=box.x,_y=box.y,_w=box.width,_h=box.height,toggle=$$.togglePath,isWithin=!(maxX<_x||_x+_w<minX||maxY<_y||_y+_h<minY)}isWithin^isIncluded&&(shape.classed(CLASS.INCLUDED,!isIncluded),shape.classed(CLASS.SELECTED,!isSelected),toggle.call($$,!isSelected,shape,d,i))})))},c3_chart_internal_fn.dragstart=function(mouse){var $$=this,config=$$.config;$$.hasArcType()||config.data_selection_enabled&&($$.dragStart=mouse,$$.main.select("."+CLASS.chart).append("rect").attr("class",CLASS.dragarea).style("opacity",.1),$$.dragging=!0)},c3_chart_internal_fn.dragend=function(){var $$=this,config=$$.config;$$.hasArcType()||config.data_selection_enabled&&($$.main.select("."+CLASS.dragarea).transition().duration(100).style("opacity",0).remove(),$$.main.selectAll("."+CLASS.shape).classed(CLASS.INCLUDED,!1),$$.dragging=!1)},c3_chart_internal_fn.selectPoint=function(target,d,i){var $$=this,config=$$.config,cx=(config.axis_rotated?$$.circleY:$$.circleX).bind($$),cy=(config.axis_rotated?$$.circleX:$$.circleY).bind($$),r=$$.pointSelectR.bind($$);config.data_onselected.call($$.api,d,target.node()),$$.main.select("."+CLASS.selectedCircles+$$.getTargetSelectorSuffix(d.id)).selectAll("."+CLASS.selectedCircle+"-"+i).data([d]).enter().append("circle").attr("class",function(){return $$.generateClass(CLASS.selectedCircle,i)}).attr("cx",cx).attr("cy",cy).attr("stroke",function(){return $$.color(d)}).attr("r",function(d){return 1.4*$$.pointSelectR(d)}).transition().duration(100).attr("r",r)},c3_chart_internal_fn.unselectPoint=function(target,d,i){var $$=this;$$.config.data_onunselected.call($$.api,d,target.node()),$$.main.select("."+CLASS.selectedCircles+$$.getTargetSelectorSuffix(d.id)).selectAll("."+CLASS.selectedCircle+"-"+i).transition().duration(100).attr("r",0).remove()},c3_chart_internal_fn.togglePoint=function(selected,target,d,i){selected?this.selectPoint(target,d,i):this.unselectPoint(target,d,i)},c3_chart_internal_fn.selectPath=function(target,d){var $$=this;$$.config.data_onselected.call($$,d,target.node()),$$.config.interaction_brighten&&target.transition().duration(100).style("fill",function(){return $$.d3.rgb($$.color(d)).brighter(.75)})},c3_chart_internal_fn.unselectPath=function(target,d){var $$=this;$$.config.data_onunselected.call($$,d,target.node()),$$.config.interaction_brighten&&target.transition().duration(100).style("fill",function(){return $$.color(d)})},c3_chart_internal_fn.togglePath=function(selected,target,d,i){selected?this.selectPath(target,d,i):this.unselectPath(target,d,i)},c3_chart_internal_fn.getToggle=function(that,d){var toggle,$$=this;return"circle"===that.nodeName?toggle=$$.isStepType(d)?function(){}:$$.togglePoint:"path"===that.nodeName&&(toggle=$$.togglePath),toggle},c3_chart_internal_fn.toggleShape=function(that,d,i){var $$=this,d3=$$.d3,config=$$.config,shape=d3.select(that),isSelected=shape.classed(CLASS.SELECTED),toggle=$$.getToggle(that,d).bind($$);config.data_selection_enabled&&config.data_selection_isselectable(d)&&(config.data_selection_multiple||$$.main.selectAll("."+CLASS.shapes+(config.data_selection_grouped?$$.getTargetSelectorSuffix(d.id):"")).selectAll("."+CLASS.shape).each(function(d,i){var shape=d3.select(this);shape.classed(CLASS.SELECTED)&&toggle(!1,shape.classed(CLASS.SELECTED,!1),d,i)}),shape.classed(CLASS.SELECTED,!isSelected),toggle(!isSelected,shape,d,i))},c3_chart_internal_fn.initBrush=function(){var $$=this,d3=$$.d3;$$.brush=d3.svg.brush().on("brush",function(){$$.redrawForBrush()}),$$.brush.update=function(){return $$.context&&$$.context.select("."+CLASS.brush).call(this),this},$$.brush.scale=function(scale){return $$.config.axis_rotated?this.y(scale):this.x(scale)}},c3_chart_internal_fn.initSubchart=function(){var $$=this,config=$$.config,context=$$.context=$$.svg.append("g").attr("transform",$$.getTranslate("context")),visibility=config.subchart_show?"visible":"hidden";context.style("visibility",visibility),context.append("g").attr("clip-path",$$.clipPathForSubchart).attr("class",CLASS.chart),context.select("."+CLASS.chart).append("g").attr("class",CLASS.chartBars),context.select("."+CLASS.chart).append("g").attr("class",CLASS.chartLines),context.append("g").attr("clip-path",$$.clipPath).attr("class",CLASS.brush).call($$.brush),$$.axes.subx=context.append("g").attr("class",CLASS.axisX).attr("transform",$$.getTranslate("subx")).attr("clip-path",config.axis_rotated?"":$$.clipPathForXAxis).style("visibility",config.subchart_axis_x_show?visibility:"hidden")},c3_chart_internal_fn.updateTargetsForSubchart=function(targets){var contextLineEnter,contextLineUpdate,contextBarEnter,contextBarUpdate,$$=this,context=$$.context,config=$$.config,classChartBar=$$.classChartBar.bind($$),classBars=$$.classBars.bind($$),classChartLine=$$.classChartLine.bind($$),classLines=$$.classLines.bind($$),classAreas=$$.classAreas.bind($$);config.subchart_show&&(contextBarUpdate=context.select("."+CLASS.chartBars).selectAll("."+CLASS.chartBar).data(targets).attr("class",classChartBar),contextBarEnter=contextBarUpdate.enter().append("g").style("opacity",0).attr("class",classChartBar),contextBarEnter.append("g").attr("class",classBars),contextLineUpdate=context.select("."+CLASS.chartLines).selectAll("."+CLASS.chartLine).data(targets).attr("class",classChartLine),contextLineEnter=contextLineUpdate.enter().append("g").style("opacity",0).attr("class",classChartLine),contextLineEnter.append("g").attr("class",classLines),contextLineEnter.append("g").attr("class",classAreas),context.selectAll("."+CLASS.brush+" rect").attr(config.axis_rotated?"width":"height",config.axis_rotated?$$.width2:$$.height2))},c3_chart_internal_fn.updateBarForSubchart=function(durationForExit){var $$=this;$$.contextBar=$$.context.selectAll("."+CLASS.bars).selectAll("."+CLASS.bar).data($$.barData.bind($$)),$$.contextBar.enter().append("path").attr("class",$$.classBar.bind($$)).style("stroke","none").style("fill",$$.color),$$.contextBar.style("opacity",$$.initialOpacity.bind($$)),$$.contextBar.exit().transition().duration(durationForExit).style("opacity",0).remove()},c3_chart_internal_fn.redrawBarForSubchart=function(drawBarOnSub,withTransition,duration){(withTransition?this.contextBar.transition(Math.random().toString()).duration(duration):this.contextBar).attr("d",drawBarOnSub).style("opacity",1)},c3_chart_internal_fn.updateLineForSubchart=function(durationForExit){var $$=this;$$.contextLine=$$.context.selectAll("."+CLASS.lines).selectAll("."+CLASS.line).data($$.lineData.bind($$)),$$.contextLine.enter().append("path").attr("class",$$.classLine.bind($$)).style("stroke",$$.color),$$.contextLine.style("opacity",$$.initialOpacity.bind($$)),$$.contextLine.exit().transition().duration(durationForExit).style("opacity",0).remove()},c3_chart_internal_fn.redrawLineForSubchart=function(drawLineOnSub,withTransition,duration){(withTransition?this.contextLine.transition(Math.random().toString()).duration(duration):this.contextLine).attr("d",drawLineOnSub).style("opacity",1)},c3_chart_internal_fn.updateAreaForSubchart=function(durationForExit){var $$=this,d3=$$.d3;$$.contextArea=$$.context.selectAll("."+CLASS.areas).selectAll("."+CLASS.area).data($$.lineData.bind($$)),$$.contextArea.enter().append("path").attr("class",$$.classArea.bind($$)).style("fill",$$.color).style("opacity",function(){return $$.orgAreaOpacity=+d3.select(this).style("opacity"),0}),$$.contextArea.style("opacity",0),$$.contextArea.exit().transition().duration(durationForExit).style("opacity",0).remove()},c3_chart_internal_fn.redrawAreaForSubchart=function(drawAreaOnSub,withTransition,duration){(withTransition?this.contextArea.transition(Math.random().toString()).duration(duration):this.contextArea).attr("d",drawAreaOnSub).style("fill",this.color).style("opacity",this.orgAreaOpacity)},c3_chart_internal_fn.redrawSubchart=function(withSubchart,transitions,duration,durationForExit,areaIndices,barIndices,lineIndices){var drawAreaOnSub,drawBarOnSub,drawLineOnSub,$$=this,d3=$$.d3,config=$$.config
;$$.context.style("visibility",config.subchart_show?"visible":"hidden"),config.subchart_show&&(d3.event&&"zoom"===d3.event.type&&$$.brush.extent($$.x.orgDomain()).update(),withSubchart&&($$.brush.empty()||$$.brush.extent($$.x.orgDomain()).update(),drawAreaOnSub=$$.generateDrawArea(areaIndices,!0),drawBarOnSub=$$.generateDrawBar(barIndices,!0),drawLineOnSub=$$.generateDrawLine(lineIndices,!0),$$.updateBarForSubchart(duration),$$.updateLineForSubchart(duration),$$.updateAreaForSubchart(duration),$$.redrawBarForSubchart(drawBarOnSub,duration,duration),$$.redrawLineForSubchart(drawLineOnSub,duration,duration),$$.redrawAreaForSubchart(drawAreaOnSub,duration,duration)))},c3_chart_internal_fn.redrawForBrush=function(){var $$=this,x=$$.x;$$.redraw({withTransition:!1,withY:$$.config.zoom_rescale,withSubchart:!1,withUpdateXDomain:!0,withDimension:!1}),$$.config.subchart_onbrush.call($$.api,x.orgDomain())},c3_chart_internal_fn.transformContext=function(withTransition,transitions){var subXAxis,$$=this;transitions&&transitions.axisSubX?subXAxis=transitions.axisSubX:(subXAxis=$$.context.select("."+CLASS.axisX),withTransition&&(subXAxis=subXAxis.transition())),$$.context.attr("transform",$$.getTranslate("context")),subXAxis.attr("transform",$$.getTranslate("subx"))},c3_chart_internal_fn.getDefaultExtent=function(){var $$=this,config=$$.config,extent=isFunction(config.axis_x_extent)?config.axis_x_extent($$.getXDomain($$.data.targets)):config.axis_x_extent;return $$.isTimeSeries()&&(extent=[$$.parseDate(extent[0]),$$.parseDate(extent[1])]),extent},c3_chart_internal_fn.initZoom=function(){var startEvent,$$=this,d3=$$.d3,config=$$.config;$$.zoom=d3.behavior.zoom().on("zoomstart",function(){startEvent=d3.event.sourceEvent,$$.zoom.altDomain=d3.event.sourceEvent.altKey?$$.x.orgDomain():null,config.zoom_onzoomstart.call($$.api,d3.event.sourceEvent)}).on("zoom",function(){$$.redrawForZoom.call($$)}).on("zoomend",function(){var event=d3.event.sourceEvent;event&&startEvent.clientX===event.clientX&&startEvent.clientY===event.clientY||($$.redrawEventRect(),$$.updateZoom(),config.zoom_onzoomend.call($$.api,$$.x.orgDomain()))}),$$.zoom.scale=function(scale){return config.axis_rotated?this.y(scale):this.x(scale)},$$.zoom.orgScaleExtent=function(){var extent=config.zoom_extent?config.zoom_extent:[1,10];return[extent[0],Math.max($$.getMaxDataCount()/extent[1],extent[1])]},$$.zoom.updateScaleExtent=function(){var ratio=diffDomain($$.x.orgDomain())/diffDomain($$.getZoomDomain()),extent=this.orgScaleExtent();return this.scaleExtent([extent[0]*ratio,extent[1]*ratio]),this}},c3_chart_internal_fn.getZoomDomain=function(){var $$=this,config=$$.config,d3=$$.d3;return[d3.min([$$.orgXDomain[0],config.zoom_x_min]),d3.max([$$.orgXDomain[1],config.zoom_x_max])]},c3_chart_internal_fn.updateZoom=function(){var $$=this,z=$$.config.zoom_enabled?$$.zoom:function(){};$$.main.select("."+CLASS.zoomRect).call(z).on("dblclick.zoom",null),$$.main.selectAll("."+CLASS.eventRect).call(z).on("dblclick.zoom",null)},c3_chart_internal_fn.redrawForZoom=function(){var $$=this,d3=$$.d3,config=$$.config,zoom=$$.zoom,x=$$.x;if(config.zoom_enabled&&0!==$$.filterTargetsToShow($$.data.targets).length){if("mousemove"===d3.event.sourceEvent.type&&zoom.altDomain)return x.domain(zoom.altDomain),void zoom.scale(x).updateScaleExtent();$$.isCategorized()&&x.orgDomain()[0]===$$.orgXDomain[0]&&x.domain([$$.orgXDomain[0]-1e-10,x.orgDomain()[1]]),$$.redraw({withTransition:!1,withY:config.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1}),"mousemove"===d3.event.sourceEvent.type&&($$.cancelClick=!0),config.zoom_onzoom.call($$.api,x.orgDomain())}},c3_chart_internal_fn.generateColor=function(){var $$=this,config=$$.config,d3=$$.d3,colors=config.data_colors,pattern=notEmpty(config.color_pattern)?config.color_pattern:d3.scale.category10().range(),callback=config.data_color,ids=[];return function(d){var color,id=d.id||d.data&&d.data.id||d;return colors[id]instanceof Function?color=colors[id](d):colors[id]?color=colors[id]:(ids.indexOf(id)<0&&ids.push(id),color=pattern[ids.indexOf(id)%pattern.length],colors[id]=color),callback instanceof Function?callback(color,d):color}},c3_chart_internal_fn.generateLevelColor=function(){var $$=this,config=$$.config,colors=config.color_pattern,threshold=config.color_threshold,asValue="value"===threshold.unit,values=threshold.values&&threshold.values.length?threshold.values:[],max=threshold.max||100;return notEmpty(config.color_threshold)?function(value){var i,color=colors[colors.length-1];for(i=0;i<values.length;i++)if((asValue?value:100*value/max)<values[i]){color=colors[i];break}return color}:null},c3_chart_internal_fn.getYFormat=function(forArc){var $$=this,formatForY=forArc&&!$$.hasType("gauge")?$$.defaultArcValueFormat:$$.yFormat,formatForY2=forArc&&!$$.hasType("gauge")?$$.defaultArcValueFormat:$$.y2Format;return function(v,ratio,id){return("y2"===$$.axis.getId(id)?formatForY2:formatForY).call($$,v,ratio)}},c3_chart_internal_fn.yFormat=function(v){var $$=this,config=$$.config;return(config.axis_y_tick_format?config.axis_y_tick_format:$$.defaultValueFormat)(v)},c3_chart_internal_fn.y2Format=function(v){var $$=this,config=$$.config;return(config.axis_y2_tick_format?config.axis_y2_tick_format:$$.defaultValueFormat)(v)},c3_chart_internal_fn.defaultValueFormat=function(v){return isValue(v)?+v:""},c3_chart_internal_fn.defaultArcValueFormat=function(v,ratio){return(100*ratio).toFixed(1)+"%"},c3_chart_internal_fn.dataLabelFormat=function(targetId){var $$=this,data_labels=$$.config.data_labels,defaultFormat=function(v){return isValue(v)?+v:""};return"function"==typeof data_labels.format?data_labels.format:"object"==typeof data_labels.format?data_labels.format[targetId]?!0===data_labels.format[targetId]?defaultFormat:data_labels.format[targetId]:function(){return""}:defaultFormat},c3_chart_internal_fn.hasCaches=function(ids){for(var i=0;i<ids.length;i++)if(!(ids[i]in this.cache))return!1;return!0},c3_chart_internal_fn.addCache=function(id,target){this.cache[id]=this.cloneTarget(target)},c3_chart_internal_fn.getCaches=function(ids){var i,targets=[];for(i=0;i<ids.length;i++)ids[i]in this.cache&&targets.push(this.cloneTarget(this.cache[ids[i]]));return targets};var CLASS=c3_chart_internal_fn.CLASS={target:"c3-target",chart:"c3-chart",chartLine:"c3-chart-line",chartLines:"c3-chart-lines",chartBar:"c3-chart-bar",chartBars:"c3-chart-bars",chartText:"c3-chart-text",chartTexts:"c3-chart-texts",chartArc:"c3-chart-arc",chartArcs:"c3-chart-arcs",chartArcsTitle:"c3-chart-arcs-title",chartArcsBackground:"c3-chart-arcs-background",chartArcsGaugeUnit:"c3-chart-arcs-gauge-unit",chartArcsGaugeMax:"c3-chart-arcs-gauge-max",chartArcsGaugeMin:"c3-chart-arcs-gauge-min",selectedCircle:"c3-selected-circle",selectedCircles:"c3-selected-circles",eventRect:"c3-event-rect",eventRects:"c3-event-rects",eventRectsSingle:"c3-event-rects-single",eventRectsMultiple:"c3-event-rects-multiple",zoomRect:"c3-zoom-rect",brush:"c3-brush",focused:"c3-focused",defocused:"c3-defocused",region:"c3-region",regions:"c3-regions",title:"c3-title",tooltipContainer:"c3-tooltip-container",tooltip:"c3-tooltip",tooltipName:"c3-tooltip-name",shape:"c3-shape",shapes:"c3-shapes",line:"c3-line",lines:"c3-lines",bar:"c3-bar",bars:"c3-bars",circle:"c3-circle",circles:"c3-circles",arc:"c3-arc",arcs:"c3-arcs",area:"c3-area",areas:"c3-areas",empty:"c3-empty",text:"c3-text",texts:"c3-texts",gaugeValue:"c3-gauge-value",grid:"c3-grid",gridLines:"c3-grid-lines",xgrid:"c3-xgrid",xgrids:"c3-xgrids",xgridLine:"c3-xgrid-line",xgridLines:"c3-xgrid-lines",xgridFocus:"c3-xgrid-focus",ygrid:"c3-ygrid",ygrids:"c3-ygrids",ygridLine:"c3-ygrid-line",ygridLines:"c3-ygrid-lines",axis:"c3-axis",axisX:"c3-axis-x",axisXLabel:"c3-axis-x-label",axisY:"c3-axis-y",axisYLabel:"c3-axis-y-label",axisY2:"c3-axis-y2",axisY2Label:"c3-axis-y2-label",legendBackground:"c3-legend-background",legendItem:"c3-legend-item",legendItemEvent:"c3-legend-item-event",legendItemTile:"c3-legend-item-tile",legendItemHidden:"c3-legend-item-hidden",legendItemFocused:"c3-legend-item-focused",dragarea:"c3-dragarea",EXPANDED:"_expanded_",SELECTED:"_selected_",INCLUDED:"_included_"};c3_chart_internal_fn.generateClass=function(prefix,targetId){return" "+prefix+" "+prefix+this.getTargetSelectorSuffix(targetId)},c3_chart_internal_fn.classText=function(d){return this.generateClass(CLASS.text,d.index)},c3_chart_internal_fn.classTexts=function(d){return this.generateClass(CLASS.texts,d.id)},c3_chart_internal_fn.classShape=function(d){return this.generateClass(CLASS.shape,d.index)},c3_chart_internal_fn.classShapes=function(d){return this.generateClass(CLASS.shapes,d.id)},c3_chart_internal_fn.classLine=function(d){return this.classShape(d)+this.generateClass(CLASS.line,d.id)},c3_chart_internal_fn.classLines=function(d){return this.classShapes(d)+this.generateClass(CLASS.lines,d.id)},c3_chart_internal_fn.classCircle=function(d){return this.classShape(d)+this.generateClass(CLASS.circle,d.index)},c3_chart_internal_fn.classCircles=function(d){return this.classShapes(d)+this.generateClass(CLASS.circles,d.id)},c3_chart_internal_fn.classBar=function(d){return this.classShape(d)+this.generateClass(CLASS.bar,d.index)},c3_chart_internal_fn.classBars=function(d){return this.classShapes(d)+this.generateClass(CLASS.bars,d.id)},c3_chart_internal_fn.classArc=function(d){return this.classShape(d.data)+this.generateClass(CLASS.arc,d.data.id)},c3_chart_internal_fn.classArcs=function(d){return this.classShapes(d.data)+this.generateClass(CLASS.arcs,d.data.id)},c3_chart_internal_fn.classArea=function(d){return this.classShape(d)+this.generateClass(CLASS.area,d.id)},c3_chart_internal_fn.classAreas=function(d){return this.classShapes(d)+this.generateClass(CLASS.areas,d.id)},c3_chart_internal_fn.classRegion=function(d,i){return this.generateClass(CLASS.region,i)+" "+("class"in d?d.class:"")},c3_chart_internal_fn.classEvent=function(d){return this.generateClass(CLASS.eventRect,d.index)},c3_chart_internal_fn.classTarget=function(id){var $$=this,additionalClassSuffix=$$.config.data_classes[id],additionalClass="";return additionalClassSuffix&&(additionalClass=" "+CLASS.target+"-"+additionalClassSuffix),$$.generateClass(CLASS.target,id)+additionalClass},c3_chart_internal_fn.classFocus=function(d){return this.classFocused(d)+this.classDefocused(d)},c3_chart_internal_fn.classFocused=function(d){return" "+(this.focusedTargetIds.indexOf(d.id)>=0?CLASS.focused:"")},c3_chart_internal_fn.classDefocused=function(d){return" "+(this.defocusedTargetIds.indexOf(d.id)>=0?CLASS.defocused:"")},c3_chart_internal_fn.classChartText=function(d){return CLASS.chartText+this.classTarget(d.id)},c3_chart_internal_fn.classChartLine=function(d){return CLASS.chartLine+this.classTarget(d.id)},c3_chart_internal_fn.classChartBar=function(d){return CLASS.chartBar+this.classTarget(d.id)},c3_chart_internal_fn.classChartArc=function(d){return CLASS.chartArc+this.classTarget(d.data.id)},c3_chart_internal_fn.getTargetSelectorSuffix=function(targetId){return targetId||0===targetId?("-"+targetId).replace(/[\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\]/g,"-"):""},c3_chart_internal_fn.selectorTarget=function(id,prefix){return(prefix||"")+"."+CLASS.target+this.getTargetSelectorSuffix(id)},c3_chart_internal_fn.selectorTargets=function(ids,prefix){var $$=this;return ids=ids||[],ids.length?ids.map(function(id){return $$.selectorTarget(id,prefix)}):null},c3_chart_internal_fn.selectorLegend=function(id){return"."+CLASS.legendItem+this.getTargetSelectorSuffix(id)},c3_chart_internal_fn.selectorLegends=function(ids){var $$=this;return ids&&ids.length?ids.map(function(id){return $$.selectorLegend(id)}):null};var isValue=c3_chart_internal_fn.isValue=function(v){return v||0===v},isFunction=c3_chart_internal_fn.isFunction=function(o){return"function"==typeof o},isString=c3_chart_internal_fn.isString=function(o){return"string"==typeof o},isUndefined=c3_chart_internal_fn.isUndefined=function(v){return void 0===v},isDefined=c3_chart_internal_fn.isDefined=function(v){return void 0!==v},ceil10=c3_chart_internal_fn.ceil10=function(v){return 10*Math.ceil(v/10)},asHalfPixel=c3_chart_internal_fn.asHalfPixel=function(n){return Math.ceil(n)+.5},diffDomain=c3_chart_internal_fn.diffDomain=function(d){return d[1]-d[0]},isEmpty=c3_chart_internal_fn.isEmpty=function(o){return void 0===o||null===o||isString(o)&&0===o.length||"object"==typeof o&&0===Object.keys(o).length},notEmpty=c3_chart_internal_fn.notEmpty=function(o){return!c3_chart_internal_fn.isEmpty(o)},getOption=c3_chart_internal_fn.getOption=function(options,key,defaultValue){return isDefined(options[key])?options[key]:defaultValue},hasValue=c3_chart_internal_fn.hasValue=function(dict,value){var found=!1;return Object.keys(dict).forEach(function(key){dict[key]===value&&(found=!0)}),found},sanitise=c3_chart_internal_fn.sanitise=function(str){return"string"==typeof str?str.replace(/</g,"&lt;").replace(/>/g,"&gt;"):str},getPathBox=c3_chart_internal_fn.getPathBox=function(path){var box=path.getBoundingClientRect(),items=[path.pathSegList.getItem(0),path.pathSegList.getItem(1)];return{x:items[0].x,y:Math.min(items[0].y,items[1].y),width:box.width,height:box.height}};c3_chart_fn.focus=function(targetIds){var candidates,$$=this.internal;targetIds=$$.mapToTargetIds(targetIds),candidates=$$.svg.selectAll($$.selectorTargets(targetIds.filter($$.isTargetToShow,$$))),this.revert(),this.defocus(),candidates.classed(CLASS.focused,!0).classed(CLASS.defocused,!1),$$.hasArcType()&&$$.expandArc(targetIds),$$.toggleFocusLegend(targetIds,!0),$$.focusedTargetIds=targetIds,$$.defocusedTargetIds=$$.defocusedTargetIds.filter(function(id){return targetIds.indexOf(id)<0})},c3_chart_fn.defocus=function(targetIds){var candidates,$$=this.internal;targetIds=$$.mapToTargetIds(targetIds),candidates=$$.svg.selectAll($$.selectorTargets(targetIds.filter($$.isTargetToShow,$$))),candidates.classed(CLASS.focused,!1).classed(CLASS.defocused,!0),$$.hasArcType()&&$$.unexpandArc(targetIds),$$.toggleFocusLegend(targetIds,!1),$$.focusedTargetIds=$$.focusedTargetIds.filter(function(id){return targetIds.indexOf(id)<0}),$$.defocusedTargetIds=targetIds},c3_chart_fn.revert=function(targetIds){var candidates,$$=this.internal;targetIds=$$.mapToTargetIds(targetIds),candidates=$$.svg.selectAll($$.selectorTargets(targetIds)),candidates.classed(CLASS.focused,!1).classed(CLASS.defocused,!1),$$.hasArcType()&&$$.unexpandArc(targetIds),$$.config.legend_show&&($$.showLegend(targetIds.filter($$.isLegendToShow.bind($$))),$$.legend.selectAll($$.selectorLegends(targetIds)).filter(function(){return $$.d3.select(this).classed(CLASS.legendItemFocused)}).classed(CLASS.legendItemFocused,!1)),$$.focusedTargetIds=[],$$.defocusedTargetIds=[]},c3_chart_fn.show=function(targetIds,options){var targets,$$=this.internal;targetIds=$$.mapToTargetIds(targetIds),options=options||{},$$.removeHiddenTargetIds(targetIds),targets=$$.svg.selectAll($$.selectorTargets(targetIds)),targets.transition().style("opacity",1,"important").call($$.endall,function(){targets.style("opacity",null).style("opacity",1)}),options.withLegend&&$$.showLegend(targetIds),$$.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},c3_chart_fn.hide=function(targetIds,options){var targets,$$=this.internal;targetIds=$$.mapToTargetIds(targetIds),options=options||{},$$.addHiddenTargetIds(targetIds),targets=$$.svg.selectAll($$.selectorTargets(targetIds)),targets.transition().style("opacity",0,"important").call($$.endall,function(){targets.style("opacity",null).style("opacity",0)}),options.withLegend&&$$.hideLegend(targetIds),$$.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},c3_chart_fn.toggle=function(targetIds,options){var that=this,$$=this.internal;$$.mapToTargetIds(targetIds).forEach(function(targetId){$$.isTargetToShow(targetId)?that.hide(targetId,options):that.show(targetId,options)})},c3_chart_fn.zoom=function(domain){var $$=this.internal;return domain&&($$.isTimeSeries()&&(domain=domain.map(function(x){return $$.parseDate(x)})),$$.brush.extent(domain),$$.redraw({withUpdateXDomain:!0,withY:$$.config.zoom_rescale}),$$.config.zoom_onzoom.call(this,$$.x.orgDomain())),$$.brush.extent()},c3_chart_fn.zoom.enable=function(enabled){var $$=this.internal;$$.config.zoom_enabled=enabled,$$.updateAndRedraw()},c3_chart_fn.unzoom=function(){var $$=this.internal;$$.brush.clear().update(),$$.redraw({withUpdateXDomain:!0})},c3_chart_fn.zoom.max=function(max){var $$=this.internal,config=$$.config,d3=$$.d3;if(0!==max&&!max)return config.zoom_x_max;config.zoom_x_max=d3.max([$$.orgXDomain[1],max])},c3_chart_fn.zoom.min=function(min){var $$=this.internal,config=$$.config,d3=$$.d3;if(0!==min&&!min)return config.zoom_x_min;config.zoom_x_min=d3.min([$$.orgXDomain[0],min])},c3_chart_fn.zoom.range=function(range){if(!arguments.length)return{max:this.domain.max(),min:this.domain.min()};isDefined(range.max)&&this.domain.max(range.max),isDefined(range.min)&&this.domain.min(range.min)},c3_chart_fn.load=function(args){var $$=this.internal,config=$$.config;if(args.xs&&$$.addXs(args.xs),"names"in args&&c3_chart_fn.data.names.bind(this)(args.names),"classes"in args&&Object.keys(args.classes).forEach(function(id){config.data_classes[id]=args.classes[id]}),"categories"in args&&$$.isCategorized()&&(config.axis_x_categories=args.categories),"axes"in args&&Object.keys(args.axes).forEach(function(id){config.data_axes[id]=args.axes[id]}),"colors"in args&&Object.keys(args.colors).forEach(function(id){config.data_colors[id]=args.colors[id]}),"cacheIds"in args&&$$.hasCaches(args.cacheIds))return void $$.load($$.getCaches(args.cacheIds),args.done);"unload"in args?$$.unload($$.mapToTargetIds("boolean"==typeof args.unload&&args.unload?null:args.unload),function(){$$.loadFromArgs(args)}):$$.loadFromArgs(args)},c3_chart_fn.unload=function(args){var $$=this.internal;args=args||{},args instanceof Array?args={ids:args}:"string"==typeof args&&(args={ids:[args]}),$$.unload($$.mapToTargetIds(args.ids),function(){$$.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),args.done&&args.done()})},c3_chart_fn.flow=function(args){var targets,data,domain,baseTarget,baseValue,diff,to,$$=this.internal,notfoundIds=[],orgDataCount=$$.getMaxDataCount(),length=0,tail=0;if(args.json)data=$$.convertJsonToData(args.json,args.keys);else if(args.rows)data=$$.convertRowsToData(args.rows);else{if(!args.columns)return;data=$$.convertColumnsToData(args.columns)}targets=$$.convertDataToTargets(data,!0),$$.data.targets.forEach(function(t){var i,j,found=!1;for(i=0;i<targets.length;i++)if(t.id===targets[i].id){for(found=!0,t.values[t.values.length-1]&&(tail=t.values[t.values.length-1].index+1),length=targets[i].values.length,j=0;j<length;j++)targets[i].values[j].index=tail+j,$$.isTimeSeries()||(targets[i].values[j].x=tail+j);t.values=t.values.concat(targets[i].values),targets.splice(i,1);break}found||notfoundIds.push(t.id)}),$$.data.targets.forEach(function(t){var i,j;for(i=0;i<notfoundIds.length;i++)if(t.id===notfoundIds[i])for(tail=t.values[t.values.length-1].index+1,j=0;j<length;j++)t.values.push({id:t.id,index:tail+j,x:$$.isTimeSeries()?$$.getOtherTargetX(tail+j):tail+j,value:null})}),$$.data.targets.length&&targets.forEach(function(t){var i,missing=[];for(i=$$.data.targets[0].values[0].index;i<tail;i++)missing.push({id:t.id,index:i,x:$$.isTimeSeries()?$$.getOtherTargetX(i):i,value:null});t.values.forEach(function(v){v.index+=tail,$$.isTimeSeries()||(v.x+=tail)}),t.values=missing.concat(t.values)}),$$.data.targets=$$.data.targets.concat(targets),$$.getMaxDataCount(),baseTarget=$$.data.targets[0],baseValue=baseTarget.values[0],isDefined(args.to)?(length=0,to=$$.isTimeSeries()?$$.parseDate(args.to):args.to,baseTarget.values.forEach(function(v){v.x<to&&length++})):isDefined(args.length)&&(length=args.length),orgDataCount?1===orgDataCount&&$$.isTimeSeries()&&(diff=(baseTarget.values[baseTarget.values.length-1].x-baseValue.x)/2,domain=[new Date(+baseValue.x-diff),new Date(+baseValue.x+diff)],$$.updateXDomain(null,!0,!0,!1,domain)):(diff=$$.isTimeSeries()?baseTarget.values.length>1?baseTarget.values[baseTarget.values.length-1].x-baseValue.x:baseValue.x-$$.getXDomain($$.data.targets)[0]:1,domain=[baseValue.x-diff,baseValue.x],$$.updateXDomain(null,!0,!0,!1,domain)),$$.updateTargets($$.data.targets),$$.redraw({flow:{index:baseValue.index,length:length,duration:isValue(args.duration)?args.duration:$$.config.transition_duration,done:args.done,orgDataCount:orgDataCount},withLegend:!0,withTransition:orgDataCount>1,withTrimXDomain:!1,withUpdateXAxis:!0})},c3_chart_internal_fn.generateFlow=function(args){var $$=this,config=$$.config,d3=$$.d3;return function(){var translateX,transform,domain,targets=args.targets,flow=args.flow,drawBar=args.drawBar,drawLine=args.drawLine,drawArea=args.drawArea,cx=args.cx,cy=args.cy,xv=args.xv,xForText=args.xForText,yForText=args.yForText,duration=args.duration,scaleX=1,flowIndex=flow.index,flowLength=flow.length,flowStart=$$.getValueOnIndex($$.data.targets[0].values,flowIndex),flowEnd=$$.getValueOnIndex($$.data.targets[0].values,flowIndex+flowLength),orgDomain=$$.x.domain(),durationForFlow=flow.duration||duration,done=flow.done||function(){},wait=$$.generateWait(),xgrid=$$.xgrid||d3.selectAll([]),xgridLines=$$.xgridLines||d3.selectAll([]),mainRegion=$$.mainRegion||d3.selectAll([]),mainText=$$.mainText||d3.selectAll([]),mainBar=$$.mainBar||d3.selectAll([]),mainLine=$$.mainLine||d3.selectAll([]),mainArea=$$.mainArea||d3.selectAll([]),mainCircle=$$.mainCircle||d3.selectAll([]);$$.flowing=!0,$$.data.targets.forEach(function(d){d.values.splice(0,flowLength)}),domain=$$.updateXDomain(targets,!0,!0),$$.updateXGrid&&$$.updateXGrid(!0),flow.orgDataCount?translateX=1===flow.orgDataCount||(flowStart&&flowStart.x)===(flowEnd&&flowEnd.x)?$$.x(orgDomain[0])-$$.x(domain[0]):$$.isTimeSeries()?$$.x(orgDomain[0])-$$.x(domain[0]):$$.x(flowStart.x)-$$.x(flowEnd.x):1!==$$.data.targets[0].values.length?translateX=$$.x(orgDomain[0])-$$.x(domain[0]):$$.isTimeSeries()?(flowStart=$$.getValueOnIndex($$.data.targets[0].values,0),flowEnd=$$.getValueOnIndex($$.data.targets[0].values,$$.data.targets[0].values.length-1),translateX=$$.x(flowStart.x)-$$.x(flowEnd.x)):translateX=diffDomain(domain)/2,scaleX=diffDomain(orgDomain)/diffDomain(domain),transform="translate("+translateX+",0) scale("+scaleX+",1)",$$.hideXGridFocus(),d3.transition().ease("linear").duration(durationForFlow).each(function(){wait.add($$.axes.x.transition().call($$.xAxis)),wait.add(mainBar.transition().attr("transform",transform)),wait.add(mainLine.transition().attr("transform",transform)),wait.add(mainArea.transition().attr("transform",transform)),wait.add(mainCircle.transition().attr("transform",transform)),wait.add(mainText.transition().attr("transform",transform)),wait.add(mainRegion.filter($$.isRegionOnX).transition().attr("transform",transform)),wait.add(xgrid.transition().attr("transform",transform)),wait.add(xgridLines.transition().attr("transform",transform))}).call(wait,function(){var i,shapes=[],texts=[],eventRects=[];if(flowLength){for(i=0;i<flowLength;i++)shapes.push("."+CLASS.shape+"-"+(flowIndex+i)),texts.push("."+CLASS.text+"-"+(flowIndex+i)),eventRects.push("."+CLASS.eventRect+"-"+(flowIndex+i));$$.svg.selectAll("."+CLASS.shapes).selectAll(shapes).remove(),$$.svg.selectAll("."+CLASS.texts).selectAll(texts).remove(),$$.svg.selectAll("."+CLASS.eventRects).selectAll(eventRects).remove(),$$.svg.select("."+CLASS.xgrid).remove()}xgrid.attr("transform",null).attr($$.xgridAttr),xgridLines.attr("transform",null),xgridLines.select("line").attr("x1",config.axis_rotated?0:xv).attr("x2",config.axis_rotated?$$.width:xv),xgridLines.select("text").attr("x",config.axis_rotated?$$.width:0).attr("y",xv),mainBar.attr("transform",null).attr("d",drawBar),mainLine.attr("transform",null).attr("d",drawLine),mainArea.attr("transform",null).attr("d",drawArea),mainCircle.attr("transform",null).attr("cx",cx).attr("cy",cy),mainText.attr("transform",null).attr("x",xForText).attr("y",yForText).style("fill-opacity",$$.opacityForText.bind($$)),mainRegion.attr("transform",null),mainRegion.select("rect").filter($$.isRegionOnX).attr("x",$$.regionX.bind($$)).attr("width",$$.regionWidth.bind($$)),config.interaction_enabled&&$$.redrawEventRect(),done(),$$.flowing=!1})}},c3_chart_fn.selected=function(targetId){var $$=this.internal,d3=$$.d3;return d3.merge($$.main.selectAll("."+CLASS.shapes+$$.getTargetSelectorSuffix(targetId)).selectAll("."+CLASS.shape).filter(function(){return d3.select(this).classed(CLASS.SELECTED)}).map(function(d){return d.map(function(d){var data=d.__data__;return data.data?data.data:data})}))},c3_chart_fn.select=function(ids,indices,resetOther){var $$=this.internal,d3=$$.d3,config=$$.config;config.data_selection_enabled&&$$.main.selectAll("."+CLASS.shapes).selectAll("."+CLASS.shape).each(function(d,i){var shape=d3.select(this),id=d.data?d.data.id:d.id,toggle=$$.getToggle(this,d).bind($$),isTargetId=config.data_selection_grouped||!ids||ids.indexOf(id)>=0,isTargetIndex=!indices||indices.indexOf(i)>=0,isSelected=shape.classed(CLASS.SELECTED);shape.classed(CLASS.line)||shape.classed(CLASS.area)||(isTargetId&&isTargetIndex?config.data_selection_isselectable(d)&&!isSelected&&toggle(!0,shape.classed(CLASS.SELECTED,!0),d,i):isDefined(resetOther)&&resetOther&&isSelected&&toggle(!1,shape.classed(CLASS.SELECTED,!1),d,i))})},c3_chart_fn.unselect=function(ids,indices){var $$=this.internal,d3=$$.d3,config=$$.config;config.data_selection_enabled&&$$.main.selectAll("."+CLASS.shapes).selectAll("."+CLASS.shape).each(function(d,i){var shape=d3.select(this),id=d.data?d.data.id:d.id,toggle=$$.getToggle(this,d).bind($$),isTargetId=config.data_selection_grouped||!ids||ids.indexOf(id)>=0,isTargetIndex=!indices||indices.indexOf(i)>=0,isSelected=shape.classed(CLASS.SELECTED);shape.classed(CLASS.line)||shape.classed(CLASS.area)||isTargetId&&isTargetIndex&&config.data_selection_isselectable(d)&&isSelected&&toggle(!1,shape.classed(CLASS.SELECTED,!1),d,i)})},c3_chart_fn.transform=function(type,targetIds){var $$=this.internal,options=["pie","donut"].indexOf(type)>=0?{withTransform:!0}:null;$$.transformTo(targetIds,type,options)},c3_chart_internal_fn.transformTo=function(targetIds,type,optionsForRedraw){var $$=this,withTransitionForAxis=!$$.hasArcType(),options=optionsForRedraw||{withTransitionForAxis:withTransitionForAxis};options.withTransitionForTransform=!1,$$.transiting=!1,$$.setTargetType(targetIds,type),$$.updateTargets($$.data.targets),$$.updateAndRedraw(options)},c3_chart_fn.groups=function(groups){var $$=this.internal,config=$$.config;return isUndefined(groups)?config.data_groups:(config.data_groups=groups,$$.redraw(),config.data_groups)},c3_chart_fn.xgrids=function(grids){var $$=this.internal,config=$$.config;return grids?(config.grid_x_lines=grids,$$.redrawWithoutRescale(),config.grid_x_lines):config.grid_x_lines},c3_chart_fn.xgrids.add=function(grids){var $$=this.internal;return this.xgrids($$.config.grid_x_lines.concat(grids||[]))},c3_chart_fn.xgrids.remove=function(params){this.internal.removeGridLines(params,!0)},c3_chart_fn.ygrids=function(grids){var $$=this.internal,config=$$.config;return grids?(config.grid_y_lines=grids,$$.redrawWithoutRescale(),config.grid_y_lines):config.grid_y_lines},c3_chart_fn.ygrids.add=function(grids){var $$=this.internal;return this.ygrids($$.config.grid_y_lines.concat(grids||[]))},c3_chart_fn.ygrids.remove=function(params){this.internal.removeGridLines(params,!1)},c3_chart_fn.regions=function(regions){var $$=this.internal,config=$$.config;return regions?(config.regions=regions,$$.redrawWithoutRescale(),config.regions):config.regions},c3_chart_fn.regions.add=function(regions){var $$=this.internal,config=$$.config;return regions?(config.regions=config.regions.concat(regions),$$.redrawWithoutRescale(),config.regions):config.regions},c3_chart_fn.regions.remove=function(options){var duration,classes,regions,$$=this.internal,config=$$.config;return options=options||{},duration=$$.getOption(options,"duration",config.transition_duration),classes=$$.getOption(options,"classes",[CLASS.region]),regions=$$.main.select("."+CLASS.regions).selectAll(classes.map(function(c){return"."+c})),(duration?regions.transition().duration(duration):regions).style("opacity",0).remove(),config.regions=config.regions.filter(function(region){var found=!1;return!region.class||(region.class.split(" ").forEach(function(c){classes.indexOf(c)>=0&&(found=!0)}),!found)}),config.regions},c3_chart_fn.data=function(targetIds){var targets=this.internal.data.targets;return void 0===targetIds?targets:targets.filter(function(t){return[].concat(targetIds).indexOf(t.id)>=0})},c3_chart_fn.data.shown=function(targetIds){return this.internal.filterTargetsToShow(this.data(targetIds))},c3_chart_fn.data.values=function(targetId){var targets,values=null;return targetId&&(targets=this.data(targetId),values=targets[0]?targets[0].values.map(function(d){return d.value}):null),values},c3_chart_fn.data.names=function(names){return this.internal.clearLegendItemTextBoxCache(),this.internal.updateDataAttributes("names",names)},c3_chart_fn.data.colors=function(colors){return this.internal.updateDataAttributes("colors",colors)},c3_chart_fn.data.axes=function(axes){return this.internal.updateDataAttributes("axes",axes)},c3_chart_fn.category=function(i,category){var $$=this.internal,config=$$.config;return arguments.length>1&&(config.axis_x_categories[i]=category,$$.redraw()),config.axis_x_categories[i]},c3_chart_fn.categories=function(categories){var $$=this.internal,config=$$.config;return arguments.length?(config.axis_x_categories=categories,$$.redraw(),config.axis_x_categories):config.axis_x_categories},c3_chart_fn.color=function(id){return this.internal.color(id)},c3_chart_fn.x=function(x){var $$=this.internal;return arguments.length&&($$.updateTargetX($$.data.targets,x),$$.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),$$.data.xs},c3_chart_fn.xs=function(xs){var $$=this.internal;return arguments.length&&($$.updateTargetXs($$.data.targets,xs),$$.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),$$.data.xs},c3_chart_fn.axis=function(){},c3_chart_fn.axis.labels=function(labels){var $$=this.internal;arguments.length&&(Object.keys(labels).forEach(function(axisId){$$.axis.setLabelText(axisId,labels[axisId])}),$$.axis.updateLabels())},c3_chart_fn.axis.max=function(max){var $$=this.internal,config=$$.config;if(!arguments.length)return{x:config.axis_x_max,y:config.axis_y_max,y2:config.axis_y2_max};"object"==typeof max?(isValue(max.x)&&(config.axis_x_max=max.x),isValue(max.y)&&(config.axis_y_max=max.y),isValue(max.y2)&&(config.axis_y2_max=max.y2)):config.axis_y_max=config.axis_y2_max=max,$$.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})},c3_chart_fn.axis.min=function(min){var $$=this.internal,config=$$.config;if(!arguments.length)return{x:config.axis_x_min,y:config.axis_y_min,y2:config.axis_y2_min};"object"==typeof min?(isValue(min.x)&&(config.axis_x_min=min.x),isValue(min.y)&&(config.axis_y_min=min.y),isValue(min.y2)&&(config.axis_y2_min=min.y2)):config.axis_y_min=config.axis_y2_min=min,$$.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})},c3_chart_fn.axis.range=function(range){if(!arguments.length)return{max:this.axis.max(),min:this.axis.min()};isDefined(range.max)&&this.axis.max(range.max),isDefined(range.min)&&this.axis.min(range.min)},c3_chart_fn.legend=function(){},c3_chart_fn.legend.show=function(targetIds){var $$=this.internal;$$.showLegend($$.mapToTargetIds(targetIds)),$$.updateAndRedraw({withLegend:!0})},c3_chart_fn.legend.hide=function(targetIds){var $$=this.internal;$$.hideLegend($$.mapToTargetIds(targetIds)),$$.updateAndRedraw({withLegend:!0})},c3_chart_fn.resize=function(size){var $$=this.internal,config=$$.config;config.size_width=size?size.width:null,config.size_height=size?size.height:null,this.flush()},c3_chart_fn.flush=function(){this.internal.updateAndRedraw({withLegend:!0,
withTransition:!1,withTransitionForTransform:!1})},c3_chart_fn.destroy=function(){var $$=this.internal;if(window.clearInterval($$.intervalForObserveInserted),void 0!==$$.resizeTimeout&&window.clearTimeout($$.resizeTimeout),window.detachEvent)window.detachEvent("onresize",$$.resizeFunction);else if(window.removeEventListener)window.removeEventListener("resize",$$.resizeFunction);else{var wrapper=window.onresize;wrapper&&wrapper.add&&wrapper.remove&&wrapper.remove($$.resizeFunction)}return $$.selectChart.classed("c3",!1).html(""),Object.keys($$).forEach(function(key){$$[key]=null}),null},c3_chart_fn.tooltip=function(){},c3_chart_fn.tooltip.show=function(args){var index,mouse,$$=this.internal;args.mouse&&(mouse=args.mouse),args.data?$$.isMultipleX()?(mouse=[$$.x(args.data.x),$$.getYScale(args.data.id)(args.data.value)],index=null):index=isValue(args.data.index)?args.data.index:$$.getIndexByX(args.data.x):void 0!==args.x?index=$$.getIndexByX(args.x):void 0!==args.index&&(index=args.index),$$.dispatchEvent("mouseover",index,mouse),$$.dispatchEvent("mousemove",index,mouse),$$.config.tooltip_onshow.call($$,args.data)},c3_chart_fn.tooltip.hide=function(){this.internal.dispatchEvent("mouseout",0),this.internal.config.tooltip_onhide.call(this)};var tickTextCharSize;c3_chart_internal_fn.isSafari=function(){var ua=window.navigator.userAgent;return ua.indexOf("Safari")>=0&&ua.indexOf("Chrome")<0},c3_chart_internal_fn.isChrome=function(){return window.navigator.userAgent.indexOf("Chrome")>=0},Function.prototype.bind||(Function.prototype.bind=function(oThis){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var aArgs=Array.prototype.slice.call(arguments,1),fToBind=this,fNOP=function(){},fBound=function(){return fToBind.apply(this instanceof fNOP?this:oThis,aArgs.concat(Array.prototype.slice.call(arguments)))};return fNOP.prototype=this.prototype,fBound.prototype=new fNOP,fBound}),function(){"SVGPathSeg"in window||(window.SVGPathSeg=function(type,typeAsLetter,owningPathSegList){this.pathSegType=type,this.pathSegTypeAsLetter=typeAsLetter,this._owningPathSegList=owningPathSegList},SVGPathSeg.PATHSEG_UNKNOWN=0,SVGPathSeg.PATHSEG_CLOSEPATH=1,SVGPathSeg.PATHSEG_MOVETO_ABS=2,SVGPathSeg.PATHSEG_MOVETO_REL=3,SVGPathSeg.PATHSEG_LINETO_ABS=4,SVGPathSeg.PATHSEG_LINETO_REL=5,SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS=6,SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL=7,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS=8,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL=9,SVGPathSeg.PATHSEG_ARC_ABS=10,SVGPathSeg.PATHSEG_ARC_REL=11,SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS=12,SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL=13,SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS=14,SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL=15,SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS=16,SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL=17,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS=18,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL=19,SVGPathSeg.prototype._segmentChanged=function(){this._owningPathSegList&&this._owningPathSegList.segmentChanged(this)},window.SVGPathSegClosePath=function(owningPathSegList){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CLOSEPATH,"z",owningPathSegList)},SVGPathSegClosePath.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegClosePath.prototype.toString=function(){return"[object SVGPathSegClosePath]"},SVGPathSegClosePath.prototype._asPathString=function(){return this.pathSegTypeAsLetter},SVGPathSegClosePath.prototype.clone=function(){return new SVGPathSegClosePath(void 0)},window.SVGPathSegMovetoAbs=function(owningPathSegList,x,y){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_MOVETO_ABS,"M",owningPathSegList),this._x=x,this._y=y},SVGPathSegMovetoAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegMovetoAbs.prototype.toString=function(){return"[object SVGPathSegMovetoAbs]"},SVGPathSegMovetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegMovetoAbs.prototype.clone=function(){return new SVGPathSegMovetoAbs(void 0,this._x,this._y)},Object.defineProperty(SVGPathSegMovetoAbs.prototype,"x",{get:function(){return this._x},set:function(x){this._x=x,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegMovetoAbs.prototype,"y",{get:function(){return this._y},set:function(y){this._y=y,this._segmentChanged()},enumerable:!0}),window.SVGPathSegMovetoRel=function(owningPathSegList,x,y){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_MOVETO_REL,"m",owningPathSegList),this._x=x,this._y=y},SVGPathSegMovetoRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegMovetoRel.prototype.toString=function(){return"[object SVGPathSegMovetoRel]"},SVGPathSegMovetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegMovetoRel.prototype.clone=function(){return new SVGPathSegMovetoRel(void 0,this._x,this._y)},Object.defineProperty(SVGPathSegMovetoRel.prototype,"x",{get:function(){return this._x},set:function(x){this._x=x,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegMovetoRel.prototype,"y",{get:function(){return this._y},set:function(y){this._y=y,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoAbs=function(owningPathSegList,x,y){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_ABS,"L",owningPathSegList),this._x=x,this._y=y},SVGPathSegLinetoAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoAbs.prototype.toString=function(){return"[object SVGPathSegLinetoAbs]"},SVGPathSegLinetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegLinetoAbs.prototype.clone=function(){return new SVGPathSegLinetoAbs(void 0,this._x,this._y)},Object.defineProperty(SVGPathSegLinetoAbs.prototype,"x",{get:function(){return this._x},set:function(x){this._x=x,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegLinetoAbs.prototype,"y",{get:function(){return this._y},set:function(y){this._y=y,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoRel=function(owningPathSegList,x,y){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_REL,"l",owningPathSegList),this._x=x,this._y=y},SVGPathSegLinetoRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoRel.prototype.toString=function(){return"[object SVGPathSegLinetoRel]"},SVGPathSegLinetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegLinetoRel.prototype.clone=function(){return new SVGPathSegLinetoRel(void 0,this._x,this._y)},Object.defineProperty(SVGPathSegLinetoRel.prototype,"x",{get:function(){return this._x},set:function(x){this._x=x,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegLinetoRel.prototype,"y",{get:function(){return this._y},set:function(y){this._y=y,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicAbs=function(owningPathSegList,x,y,x1,y1,x2,y2){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS,"C",owningPathSegList),this._x=x,this._y=y,this._x1=x1,this._y1=y1,this._x2=x2,this._y2=y2},SVGPathSegCurvetoCubicAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoCubicAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicAbs]"},SVGPathSegCurvetoCubicAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},SVGPathSegCurvetoCubicAbs.prototype.clone=function(){return new SVGPathSegCurvetoCubicAbs(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"x",{get:function(){return this._x},set:function(x){this._x=x,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"y",{get:function(){return this._y},set:function(y){this._y=y,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"x1",{get:function(){return this._x1},set:function(x1){this._x1=x1,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"y1",{get:function(){return this._y1},set:function(y1){this._y1=y1,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"x2",{get:function(){return this._x2},set:function(x2){this._x2=x2,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"y2",{get:function(){return this._y2},set:function(y2){this._y2=y2,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicRel=function(owningPathSegList,x,y,x1,y1,x2,y2){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL,"c",owningPathSegList),this._x=x,this._y=y,this._x1=x1,this._y1=y1,this._x2=x2,this._y2=y2},SVGPathSegCurvetoCubicRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoCubicRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicRel]"},SVGPathSegCurvetoCubicRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},SVGPathSegCurvetoCubicRel.prototype.clone=function(){return new SVGPathSegCurvetoCubicRel(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"x",{get:function(){return this._x},set:function(x){this._x=x,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"y",{get:function(){return this._y},set:function(y){this._y=y,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"x1",{get:function(){return this._x1},set:function(x1){this._x1=x1,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"y1",{get:function(){return this._y1},set:function(y1){this._y1=y1,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"x2",{get:function(){return this._x2},set:function(x2){this._x2=x2,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"y2",{get:function(){return this._y2},set:function(y2){this._y2=y2,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticAbs=function(owningPathSegList,x,y,x1,y1){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS,"Q",owningPathSegList),this._x=x,this._y=y,this._x1=x1,this._y1=y1},SVGPathSegCurvetoQuadraticAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoQuadraticAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticAbs]"},SVGPathSegCurvetoQuadraticAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},SVGPathSegCurvetoQuadraticAbs.prototype.clone=function(){return new SVGPathSegCurvetoQuadraticAbs(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(SVGPathSegCurvetoQuadraticAbs.prototype,"x",{get:function(){return this._x},set:function(x){this._x=x,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticAbs.prototype,"y",{get:function(){return this._y},set:function(y){this._y=y,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticAbs.prototype,"x1",{get:function(){return this._x1},set:function(x1){this._x1=x1,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticAbs.prototype,"y1",{get:function(){return this._y1},set:function(y1){this._y1=y1,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticRel=function(owningPathSegList,x,y,x1,y1){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL,"q",owningPathSegList),this._x=x,this._y=y,this._x1=x1,this._y1=y1},SVGPathSegCurvetoQuadraticRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoQuadraticRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticRel]"},SVGPathSegCurvetoQuadraticRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},SVGPathSegCurvetoQuadraticRel.prototype.clone=function(){return new SVGPathSegCurvetoQuadraticRel(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(SVGPathSegCurvetoQuadraticRel.prototype,"x",{get:function(){return this._x},set:function(x){this._x=x,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticRel.prototype,"y",{get:function(){return this._y},set:function(y){this._y=y,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticRel.prototype,"x1",{get:function(){return this._x1},set:function(x1){this._x1=x1,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticRel.prototype,"y1",{get:function(){return this._y1},set:function(y1){this._y1=y1,this._segmentChanged()},enumerable:!0}),window.SVGPathSegArcAbs=function(owningPathSegList,x,y,r1,r2,angle,largeArcFlag,sweepFlag){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_ARC_ABS,"A",owningPathSegList),this._x=x,this._y=y,this._r1=r1,this._r2=r2,this._angle=angle,this._largeArcFlag=largeArcFlag,this._sweepFlag=sweepFlag},SVGPathSegArcAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegArcAbs.prototype.toString=function(){return"[object SVGPathSegArcAbs]"},SVGPathSegArcAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},SVGPathSegArcAbs.prototype.clone=function(){return new SVGPathSegArcAbs(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(SVGPathSegArcAbs.prototype,"x",{get:function(){return this._x},set:function(x){this._x=x,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"y",{get:function(){return this._y},set:function(y){this._y=y,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"r1",{get:function(){return this._r1},set:function(r1){this._r1=r1,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"r2",{get:function(){return this._r2},set:function(r2){this._r2=r2,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"angle",{get:function(){return this._angle},set:function(angle){this._angle=angle,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(largeArcFlag){this._largeArcFlag=largeArcFlag,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(sweepFlag){this._sweepFlag=sweepFlag,this._segmentChanged()},enumerable:!0}),window.SVGPathSegArcRel=function(owningPathSegList,x,y,r1,r2,angle,largeArcFlag,sweepFlag){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_ARC_REL,"a",owningPathSegList),this._x=x,this._y=y,this._r1=r1,this._r2=r2,this._angle=angle,this._largeArcFlag=largeArcFlag,this._sweepFlag=sweepFlag},SVGPathSegArcRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegArcRel.prototype.toString=function(){return"[object SVGPathSegArcRel]"},SVGPathSegArcRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},SVGPathSegArcRel.prototype.clone=function(){return new SVGPathSegArcRel(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(SVGPathSegArcRel.prototype,"x",{get:function(){return this._x},set:function(x){this._x=x,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"y",{get:function(){return this._y},set:function(y){this._y=y,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"r1",{get:function(){return this._r1},set:function(r1){this._r1=r1,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"r2",{get:function(){return this._r2},set:function(r2){this._r2=r2,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"angle",{get:function(){return this._angle},set:function(angle){this._angle=angle,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(largeArcFlag){this._largeArcFlag=largeArcFlag,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(sweepFlag){this._sweepFlag=sweepFlag,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoHorizontalAbs=function(owningPathSegList,x){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS,"H",owningPathSegList),this._x=x},SVGPathSegLinetoHorizontalAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoHorizontalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalAbs]"},SVGPathSegLinetoHorizontalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},SVGPathSegLinetoHorizontalAbs.prototype.clone=function(){return new SVGPathSegLinetoHorizontalAbs(void 0,this._x)},Object.defineProperty(SVGPathSegLinetoHorizontalAbs.prototype,"x",{get:function(){return this._x},set:function(x){this._x=x,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoHorizontalRel=function(owningPathSegList,x){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL,"h",owningPathSegList),this._x=x},SVGPathSegLinetoHorizontalRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoHorizontalRel.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalRel]"},SVGPathSegLinetoHorizontalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},SVGPathSegLinetoHorizontalRel.prototype.clone=function(){return new SVGPathSegLinetoHorizontalRel(void 0,this._x)},Object.defineProperty(SVGPathSegLinetoHorizontalRel.prototype,"x",{get:function(){return this._x},set:function(x){this._x=x,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoVerticalAbs=function(owningPathSegList,y){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS,"V",owningPathSegList),this._y=y},SVGPathSegLinetoVerticalAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoVerticalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalAbs]"},SVGPathSegLinetoVerticalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},SVGPathSegLinetoVerticalAbs.prototype.clone=function(){return new SVGPathSegLinetoVerticalAbs(void 0,this._y)},Object.defineProperty(SVGPathSegLinetoVerticalAbs.prototype,"y",{get:function(){return this._y},set:function(y){this._y=y,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoVerticalRel=function(owningPathSegList,y){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL,"v",owningPathSegList),this._y=y},SVGPathSegLinetoVerticalRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoVerticalRel.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalRel]"},SVGPathSegLinetoVerticalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},SVGPathSegLinetoVerticalRel.prototype.clone=function(){return new SVGPathSegLinetoVerticalRel(void 0,this._y)},Object.defineProperty(SVGPathSegLinetoVerticalRel.prototype,"y",{get:function(){return this._y},set:function(y){this._y=y,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicSmoothAbs=function(owningPathSegList,x,y,x2,y2){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS,"S",owningPathSegList),this._x=x,this._y=y,this._x2=x2,this._y2=y2},SVGPathSegCurvetoCubicSmoothAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoCubicSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothAbs]"},SVGPathSegCurvetoCubicSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},SVGPathSegCurvetoCubicSmoothAbs.prototype.clone=function(){return new SVGPathSegCurvetoCubicSmoothAbs(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(SVGPathSegCurvetoCubicSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(x){this._x=x,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(y){this._y=y,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothAbs.prototype,"x2",{get:function(){return this._x2},set:function(x2){this._x2=x2,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothAbs.prototype,"y2",{get:function(){return this._y2},set:function(y2){this._y2=y2,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicSmoothRel=function(owningPathSegList,x,y,x2,y2){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL,"s",owningPathSegList),this._x=x,this._y=y,this._x2=x2,this._y2=y2},SVGPathSegCurvetoCubicSmoothRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoCubicSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothRel]"},SVGPathSegCurvetoCubicSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},SVGPathSegCurvetoCubicSmoothRel.prototype.clone=function(){return new SVGPathSegCurvetoCubicSmoothRel(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(SVGPathSegCurvetoCubicSmoothRel.prototype,"x",{get:function(){return this._x},set:function(x){this._x=x,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothRel.prototype,"y",{get:function(){return this._y},set:function(y){this._y=y,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothRel.prototype,"x2",{get:function(){return this._x2},set:function(x2){this._x2=x2,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothRel.prototype,"y2",{get:function(){return this._y2},set:function(y2){this._y2=y2,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticSmoothAbs=function(owningPathSegList,x,y){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS,"T",owningPathSegList),this._x=x,this._y=y},SVGPathSegCurvetoQuadraticSmoothAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoQuadraticSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothAbs]"},SVGPathSegCurvetoQuadraticSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegCurvetoQuadraticSmoothAbs.prototype.clone=function(){return new SVGPathSegCurvetoQuadraticSmoothAbs(void 0,this._x,this._y)},Object.defineProperty(SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(x){this._x=x,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(y){this._y=y,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticSmoothRel=function(owningPathSegList,x,y){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL,"t",owningPathSegList),this._x=x,this._y=y},SVGPathSegCurvetoQuadraticSmoothRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoQuadraticSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothRel]"},SVGPathSegCurvetoQuadraticSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegCurvetoQuadraticSmoothRel.prototype.clone=function(){return new SVGPathSegCurvetoQuadraticSmoothRel(void 0,this._x,this._y)},Object.defineProperty(SVGPathSegCurvetoQuadraticSmoothRel.prototype,"x",{get:function(){return this._x},set:function(x){this._x=x,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticSmoothRel.prototype,"y",{get:function(){return this._y},set:function(y){this._y=y,this._segmentChanged()},enumerable:!0}),SVGPathElement.prototype.createSVGPathSegClosePath=function(){return new SVGPathSegClosePath(void 0)},SVGPathElement.prototype.createSVGPathSegMovetoAbs=function(x,y){return new SVGPathSegMovetoAbs(void 0,x,y)},SVGPathElement.prototype.createSVGPathSegMovetoRel=function(x,y){return new SVGPathSegMovetoRel(void 0,x,y)},SVGPathElement.prototype.createSVGPathSegLinetoAbs=function(x,y){return new SVGPathSegLinetoAbs(void 0,x,y)},SVGPathElement.prototype.createSVGPathSegLinetoRel=function(x,y){return new SVGPathSegLinetoRel(void 0,x,y)},SVGPathElement.prototype.createSVGPathSegCurvetoCubicAbs=function(x,y,x1,y1,x2,y2){return new SVGPathSegCurvetoCubicAbs(void 0,x,y,x1,y1,x2,y2)},SVGPathElement.prototype.createSVGPathSegCurvetoCubicRel=function(x,y,x1,y1,x2,y2){return new SVGPathSegCurvetoCubicRel(void 0,x,y,x1,y1,x2,y2)},SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticAbs=function(x,y,x1,y1){return new SVGPathSegCurvetoQuadraticAbs(void 0,x,y,x1,y1)},SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticRel=function(x,y,x1,y1){return new SVGPathSegCurvetoQuadraticRel(void 0,x,y,x1,y1)},SVGPathElement.prototype.createSVGPathSegArcAbs=function(x,y,r1,r2,angle,largeArcFlag,sweepFlag){return new SVGPathSegArcAbs(void 0,x,y,r1,r2,angle,largeArcFlag,sweepFlag)},SVGPathElement.prototype.createSVGPathSegArcRel=function(x,y,r1,r2,angle,largeArcFlag,sweepFlag){return new SVGPathSegArcRel(void 0,x,y,r1,r2,angle,largeArcFlag,sweepFlag)},SVGPathElement.prototype.createSVGPathSegLinetoHorizontalAbs=function(x){return new SVGPathSegLinetoHorizontalAbs(void 0,x)},SVGPathElement.prototype.createSVGPathSegLinetoHorizontalRel=function(x){return new SVGPathSegLinetoHorizontalRel(void 0,x)},SVGPathElement.prototype.createSVGPathSegLinetoVerticalAbs=function(y){return new SVGPathSegLinetoVerticalAbs(void 0,y)},SVGPathElement.prototype.createSVGPathSegLinetoVerticalRel=function(y){return new SVGPathSegLinetoVerticalRel(void 0,y)},SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothAbs=function(x,y,x2,y2){return new SVGPathSegCurvetoCubicSmoothAbs(void 0,x,y,x2,y2)},SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothRel=function(x,y,x2,y2){return new SVGPathSegCurvetoCubicSmoothRel(void 0,x,y,x2,y2)},SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothAbs=function(x,y){return new SVGPathSegCurvetoQuadraticSmoothAbs(void 0,x,y)},SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothRel=function(x,y){return new SVGPathSegCurvetoQuadraticSmoothRel(void 0,x,y)}),"SVGPathSegList"in window||(window.SVGPathSegList=function(pathElement){this._pathElement=pathElement,this._list=this._parsePath(this._pathElement.getAttribute("d")),this._mutationObserverConfig={attributes:!0,attributeFilter:["d"]},this._pathElementMutationObserver=new MutationObserver(this._updateListFromPathMutations.bind(this)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},Object.defineProperty(SVGPathSegList.prototype,"numberOfItems",{get:function(){return this._checkPathSynchronizedToList(),this._list.length},enumerable:!0}),Object.defineProperty(SVGPathElement.prototype,"pathSegList",{get:function(){return this._pathSegList||(this._pathSegList=new SVGPathSegList(this)),this._pathSegList},enumerable:!0}),Object.defineProperty(SVGPathElement.prototype,"normalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(SVGPathElement.prototype,"animatedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(SVGPathElement.prototype,"animatedNormalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),SVGPathSegList.prototype._checkPathSynchronizedToList=function(){this._updateListFromPathMutations(this._pathElementMutationObserver.takeRecords())},SVGPathSegList.prototype._updateListFromPathMutations=function(mutationRecords){if(this._pathElement){var hasPathMutations=!1;mutationRecords.forEach(function(record){"d"==record.attributeName&&(hasPathMutations=!0)}),hasPathMutations&&(this._list=this._parsePath(this._pathElement.getAttribute("d")))}},SVGPathSegList.prototype._writeListToPath=function(){this._pathElementMutationObserver.disconnect(),this._pathElement.setAttribute("d",SVGPathSegList._pathSegArrayAsString(this._list)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},SVGPathSegList.prototype.segmentChanged=function(pathSeg){this._writeListToPath()},SVGPathSegList.prototype.clear=function(){this._checkPathSynchronizedToList(),this._list.forEach(function(pathSeg){pathSeg._owningPathSegList=null}),this._list=[],this._writeListToPath()},SVGPathSegList.prototype.initialize=function(newItem){return this._checkPathSynchronizedToList(),this._list=[newItem],newItem._owningPathSegList=this,this._writeListToPath(),newItem},SVGPathSegList.prototype._checkValidIndex=function(index){if(isNaN(index)||index<0||index>=this.numberOfItems)throw"INDEX_SIZE_ERR"},SVGPathSegList.prototype.getItem=function(index){return this._checkPathSynchronizedToList(),this._checkValidIndex(index),this._list[index]},SVGPathSegList.prototype.insertItemBefore=function(newItem,index){return this._checkPathSynchronizedToList(),index>this.numberOfItems&&(index=this.numberOfItems),newItem._owningPathSegList&&(newItem=newItem.clone()),this._list.splice(index,0,newItem),newItem._owningPathSegList=this,this._writeListToPath(),newItem},SVGPathSegList.prototype.replaceItem=function(newItem,index){return this._checkPathSynchronizedToList(),newItem._owningPathSegList&&(newItem=newItem.clone()),this._checkValidIndex(index),this._list[index]=newItem,newItem._owningPathSegList=this,this._writeListToPath(),newItem},SVGPathSegList.prototype.removeItem=function(index){this._checkPathSynchronizedToList(),this._checkValidIndex(index);var item=this._list[index];return this._list.splice(index,1),this._writeListToPath(),item},SVGPathSegList.prototype.appendItem=function(newItem){return this._checkPathSynchronizedToList(),newItem._owningPathSegList&&(newItem=newItem.clone()),this._list.push(newItem),newItem._owningPathSegList=this,this._writeListToPath(),newItem},SVGPathSegList._pathSegArrayAsString=function(pathSegArray){var string="",first=!0;return pathSegArray.forEach(function(pathSeg){first?(first=!1,string+=pathSeg._asPathString()):string+=" "+pathSeg._asPathString()}),string},SVGPathSegList.prototype._parsePath=function(string){if(!string||0==string.length)return[];var owningPathSegList=this,Builder=function(){this.pathSegList=[]};Builder.prototype.appendSegment=function(pathSeg){this.pathSegList.push(pathSeg)};var Source=function(string){this._string=string,this._currentIndex=0,this._endIndex=this._string.length,this._previousCommand=SVGPathSeg.PATHSEG_UNKNOWN,this._skipOptionalSpaces()};Source.prototype._isCurrentSpace=function(){var character=this._string[this._currentIndex];return character<=" "&&(" "==character||"\n"==character||"\t"==character||"\r"==character||"\f"==character)},Source.prototype._skipOptionalSpaces=function(){for(;this._currentIndex<this._endIndex&&this._isCurrentSpace();)this._currentIndex++;return this._currentIndex<this._endIndex},Source.prototype._skipOptionalSpacesOrDelimiter=function(){
return!(this._currentIndex<this._endIndex&&!this._isCurrentSpace()&&","!=this._string.charAt(this._currentIndex))&&(this._skipOptionalSpaces()&&this._currentIndex<this._endIndex&&","==this._string.charAt(this._currentIndex)&&(this._currentIndex++,this._skipOptionalSpaces()),this._currentIndex<this._endIndex)},Source.prototype.hasMoreData=function(){return this._currentIndex<this._endIndex},Source.prototype.peekSegmentType=function(){var lookahead=this._string[this._currentIndex];return this._pathSegTypeFromChar(lookahead)},Source.prototype._pathSegTypeFromChar=function(lookahead){switch(lookahead){case"Z":case"z":return SVGPathSeg.PATHSEG_CLOSEPATH;case"M":return SVGPathSeg.PATHSEG_MOVETO_ABS;case"m":return SVGPathSeg.PATHSEG_MOVETO_REL;case"L":return SVGPathSeg.PATHSEG_LINETO_ABS;case"l":return SVGPathSeg.PATHSEG_LINETO_REL;case"C":return SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS;case"c":return SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL;case"Q":return SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS;case"q":return SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL;case"A":return SVGPathSeg.PATHSEG_ARC_ABS;case"a":return SVGPathSeg.PATHSEG_ARC_REL;case"H":return SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS;case"h":return SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL;case"V":return SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS;case"v":return SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL;case"S":return SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS;case"s":return SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL;case"T":return SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS;case"t":return SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL;default:return SVGPathSeg.PATHSEG_UNKNOWN}},Source.prototype._nextCommandHelper=function(lookahead,previousCommand){return("+"==lookahead||"-"==lookahead||"."==lookahead||lookahead>="0"&&lookahead<="9")&&previousCommand!=SVGPathSeg.PATHSEG_CLOSEPATH?previousCommand==SVGPathSeg.PATHSEG_MOVETO_ABS?SVGPathSeg.PATHSEG_LINETO_ABS:previousCommand==SVGPathSeg.PATHSEG_MOVETO_REL?SVGPathSeg.PATHSEG_LINETO_REL:previousCommand:SVGPathSeg.PATHSEG_UNKNOWN},Source.prototype.initialCommandIsMoveTo=function(){if(!this.hasMoreData())return!0;var command=this.peekSegmentType();return command==SVGPathSeg.PATHSEG_MOVETO_ABS||command==SVGPathSeg.PATHSEG_MOVETO_REL},Source.prototype._parseNumber=function(){var exponent=0,integer=0,frac=1,decimal=0,sign=1,expsign=1,startIndex=this._currentIndex;if(this._skipOptionalSpaces(),this._currentIndex<this._endIndex&&"+"==this._string.charAt(this._currentIndex)?this._currentIndex++:this._currentIndex<this._endIndex&&"-"==this._string.charAt(this._currentIndex)&&(this._currentIndex++,sign=-1),!(this._currentIndex==this._endIndex||(this._string.charAt(this._currentIndex)<"0"||this._string.charAt(this._currentIndex)>"9")&&"."!=this._string.charAt(this._currentIndex))){for(var startIntPartIndex=this._currentIndex;this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)>="0"&&this._string.charAt(this._currentIndex)<="9";)this._currentIndex++;if(this._currentIndex!=startIntPartIndex)for(var scanIntPartIndex=this._currentIndex-1,multiplier=1;scanIntPartIndex>=startIntPartIndex;)integer+=multiplier*(this._string.charAt(scanIntPartIndex--)-"0"),multiplier*=10;if(this._currentIndex<this._endIndex&&"."==this._string.charAt(this._currentIndex)){if(++this._currentIndex>=this._endIndex||this._string.charAt(this._currentIndex)<"0"||this._string.charAt(this._currentIndex)>"9")return;for(;this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)>="0"&&this._string.charAt(this._currentIndex)<="9";)decimal+=(this._string.charAt(this._currentIndex++)-"0")*(frac*=.1)}if(this._currentIndex!=startIndex&&this._currentIndex+1<this._endIndex&&("e"==this._string.charAt(this._currentIndex)||"E"==this._string.charAt(this._currentIndex))&&"x"!=this._string.charAt(this._currentIndex+1)&&"m"!=this._string.charAt(this._currentIndex+1)){if(this._currentIndex++,"+"==this._string.charAt(this._currentIndex)?this._currentIndex++:"-"==this._string.charAt(this._currentIndex)&&(this._currentIndex++,expsign=-1),this._currentIndex>=this._endIndex||this._string.charAt(this._currentIndex)<"0"||this._string.charAt(this._currentIndex)>"9")return;for(;this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)>="0"&&this._string.charAt(this._currentIndex)<="9";)exponent*=10,exponent+=this._string.charAt(this._currentIndex)-"0",this._currentIndex++}var number=integer+decimal;if(number*=sign,exponent&&(number*=Math.pow(10,expsign*exponent)),startIndex!=this._currentIndex)return this._skipOptionalSpacesOrDelimiter(),number}},Source.prototype._parseArcFlag=function(){if(!(this._currentIndex>=this._endIndex)){var flag=!1,flagChar=this._string.charAt(this._currentIndex++);if("0"==flagChar)flag=!1;else{if("1"!=flagChar)return;flag=!0}return this._skipOptionalSpacesOrDelimiter(),flag}},Source.prototype.parseSegment=function(){var lookahead=this._string[this._currentIndex],command=this._pathSegTypeFromChar(lookahead);if(command==SVGPathSeg.PATHSEG_UNKNOWN){if(this._previousCommand==SVGPathSeg.PATHSEG_UNKNOWN)return null;if((command=this._nextCommandHelper(lookahead,this._previousCommand))==SVGPathSeg.PATHSEG_UNKNOWN)return null}else this._currentIndex++;switch(this._previousCommand=command,command){case SVGPathSeg.PATHSEG_MOVETO_REL:return new SVGPathSegMovetoRel(owningPathSegList,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_MOVETO_ABS:return new SVGPathSegMovetoAbs(owningPathSegList,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_REL:return new SVGPathSegLinetoRel(owningPathSegList,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_ABS:return new SVGPathSegLinetoAbs(owningPathSegList,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL:return new SVGPathSegLinetoHorizontalRel(owningPathSegList,this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS:return new SVGPathSegLinetoHorizontalAbs(owningPathSegList,this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL:return new SVGPathSegLinetoVerticalRel(owningPathSegList,this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS:return new SVGPathSegLinetoVerticalAbs(owningPathSegList,this._parseNumber());case SVGPathSeg.PATHSEG_CLOSEPATH:return this._skipOptionalSpaces(),new SVGPathSegClosePath(owningPathSegList);case SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL:var points={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegCurvetoCubicRel(owningPathSegList,points.x,points.y,points.x1,points.y1,points.x2,points.y2);case SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS:var points={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegCurvetoCubicAbs(owningPathSegList,points.x,points.y,points.x1,points.y1,points.x2,points.y2);case SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL:var points={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegCurvetoCubicSmoothRel(owningPathSegList,points.x,points.y,points.x2,points.y2);case SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS:var points={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegCurvetoCubicSmoothAbs(owningPathSegList,points.x,points.y,points.x2,points.y2);case SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL:var points={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegCurvetoQuadraticRel(owningPathSegList,points.x,points.y,points.x1,points.y1);case SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS:var points={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegCurvetoQuadraticAbs(owningPathSegList,points.x,points.y,points.x1,points.y1);case SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL:return new SVGPathSegCurvetoQuadraticSmoothRel(owningPathSegList,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS:return new SVGPathSegCurvetoQuadraticSmoothAbs(owningPathSegList,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_ARC_REL:var points={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegArcRel(owningPathSegList,points.x,points.y,points.x1,points.y1,points.arcAngle,points.arcLarge,points.arcSweep);case SVGPathSeg.PATHSEG_ARC_ABS:var points={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegArcAbs(owningPathSegList,points.x,points.y,points.x1,points.y1,points.arcAngle,points.arcLarge,points.arcSweep);default:throw"Unknown path seg type."}};var builder=new Builder,source=new Source(string);if(!source.initialCommandIsMoveTo())return[];for(;source.hasMoreData();){var pathSeg=source.parseSegment();if(!pathSeg)return[];builder.appendSegment(pathSeg)}return builder.pathSegList})}(),"function"==typeof define&&define.amd?define("c3",["d3"],function(){return c3}):"undefined"!=typeof exports&&"undefined"!=typeof module?module.exports=c3:window.c3=c3}(window),angular.module("gridshore.c3js.chart",[]),angular.module("gridshore.c3js.chart").directive("chartAxes",ChartAxes),angular.module("gridshore.c3js.chart").directive("chartAxis",ChartAxis),angular.module("gridshore.c3js.chart").directive("chartAxisX",ChartAxisX),angular.module("gridshore.c3js.chart").directive("chartAxisXTick",ChartAxisXTick),angular.module("gridshore.c3js.chart").directive("chartAxisY",ChartAxisY),angular.module("gridshore.c3js.chart").directive("chartAxisYTick",ChartAxisYTick),angular.module("gridshore.c3js.chart").directive("chartBar",ChartBar),angular.module("gridshore.c3js.chart").directive("c3chart",["$timeout",function(a){return C3Chart(a)}]),angular.module("gridshore.c3js.chart").directive("chartColors",ChartColors),angular.module("gridshore.c3js.chart").directive("chartColumn",ChartColumn),angular.module("gridshore.c3js.chart").controller("ChartController",ChartController),ChartController.$inject=["$scope","$timeout"],angular.module("gridshore.c3js.chart").directive("chartDonut",ChartDonut),angular.module("gridshore.c3js.chart").directive("chartEvents",ChartEvents),angular.module("gridshore.c3js.chart").directive("chartGauge",ChartGauge),angular.module("gridshore.c3js.chart").directive("chartGrid",ChartGrid),angular.module("gridshore.c3js.chart").directive("chartGridOptional",ChartGridOptional),angular.module("gridshore.c3js.chart").directive("chartGroup",ChartGroup),angular.module("gridshore.c3js.chart").directive("chartLegend",ChartLegend),angular.module("gridshore.c3js.chart").directive("chartLine",ChartLine),angular.module("gridshore.c3js.chart").directive("chartPie",ChartPie),angular.module("gridshore.c3js.chart").directive("chartPoints",ChartPoints),angular.module("gridshore.c3js.chart").directive("chartRegion",ChartRegion),angular.module("gridshore.c3js.chart").directive("selection",Selection),angular.module("gridshore.c3js.chart").directive("chartSize",ChartSize),angular.module("gridshore.c3js.chart").directive("chartTooltip",ChartTooltip),function(){"use strict";angular.module("angular-loading-bar",["cfp.loadingBarInterceptor"]),angular.module("chieffancypants.loadingBar",["cfp.loadingBarInterceptor"]),angular.module("cfp.loadingBarInterceptor",["cfp.loadingBar"]).config(["$httpProvider",function($httpProvider){var interceptor=["$q","$cacheFactory","$timeout","$rootScope","$log","cfpLoadingBar",function($q,$cacheFactory,$timeout,$rootScope,$log,cfpLoadingBar){function setComplete(){$timeout.cancel(startTimeout),cfpLoadingBar.complete(),reqsCompleted=0,reqsTotal=0}function isCached(config){var cache,defaultCache=$cacheFactory.get("$http"),defaults=$httpProvider.defaults;!config.cache&&!defaults.cache||!1===config.cache||"GET"!==config.method&&"JSONP"!==config.method||(cache=angular.isObject(config.cache)?config.cache:angular.isObject(defaults.cache)?defaults.cache:defaultCache);var cached=void 0!==cache&&void 0!==cache.get(config.url);return void 0!==config.cached&&cached!==config.cached?config.cached:(config.cached=cached,cached)}var startTimeout,reqsTotal=0,reqsCompleted=0,latencyThreshold=cfpLoadingBar.latencyThreshold;return{request:function(config){return config.ignoreLoadingBar||isCached(config)||($rootScope.$broadcast("cfpLoadingBar:loading",{url:config.url}),0===reqsTotal&&(startTimeout=$timeout(function(){cfpLoadingBar.start()},latencyThreshold)),reqsTotal++,cfpLoadingBar.set(reqsCompleted/reqsTotal)),config},response:function(response){return response&&response.config?(response.config.ignoreLoadingBar||isCached(response.config)||(reqsCompleted++,$rootScope.$broadcast("cfpLoadingBar:loaded",{url:response.config.url,result:response}),reqsCompleted>=reqsTotal?setComplete():cfpLoadingBar.set(reqsCompleted/reqsTotal)),response):($log.error("Broken interceptor detected: Config object not supplied in response:\n https://github.com/chieffancypants/angular-loading-bar/pull/50"),response)},responseError:function(rejection){return rejection&&rejection.config?(rejection.config.ignoreLoadingBar||isCached(rejection.config)||(reqsCompleted++,$rootScope.$broadcast("cfpLoadingBar:loaded",{url:rejection.config.url,result:rejection}),reqsCompleted>=reqsTotal?setComplete():cfpLoadingBar.set(reqsCompleted/reqsTotal)),$q.reject(rejection)):($log.error("Broken interceptor detected: Config object not supplied in rejection:\n https://github.com/chieffancypants/angular-loading-bar/pull/50"),$q.reject(rejection))}}}];$httpProvider.interceptors.push(interceptor)}]),angular.module("cfp.loadingBar",[]).provider("cfpLoadingBar",function(){this.autoIncrement=!0,this.includeSpinner=!0,this.includeBar=!0,this.latencyThreshold=100,this.startSize=.02,this.parentSelector="body",this.spinnerTemplate='<div id="loading-bar-spinner"><div class="spinner-icon"></div></div>',this.loadingBarTemplate='<div id="loading-bar"><div class="bar"><div class="peg"></div></div></div>',this.$get=["$injector","$document","$timeout","$rootScope",function($injector,$document,$timeout,$rootScope){function _start(){if($animate||($animate=$injector.get("$animate")),$timeout.cancel(completeTimeout),!started){var document=$document[0],parent=document.querySelector?document.querySelector($parentSelector):$document.find($parentSelector)[0];parent||(parent=document.getElementsByTagName("body")[0]);var $parent=angular.element(parent),$after=parent.lastChild&&angular.element(parent.lastChild);$rootScope.$broadcast("cfpLoadingBar:started"),started=!0,includeBar&&$animate.enter(loadingBarContainer,$parent,$after),includeSpinner&&$animate.enter(spinner,$parent,loadingBarContainer),_set(startSize)}}function _set(n){if(started){var pct=100*n+"%";loadingBar.css("width",pct),status=n,autoIncrement&&($timeout.cancel(incTimeout),incTimeout=$timeout(function(){_inc()},250))}}function _inc(){if(!(_status()>=1)){var rnd=0,stat=_status();rnd=stat>=0&&stat<.25?(3*Math.random()+3)/100:stat>=.25&&stat<.65?3*Math.random()/100:stat>=.65&&stat<.9?2*Math.random()/100:stat>=.9&&stat<.99?.005:0;_set(_status()+rnd)}}function _status(){return status}function _completeAnimation(){status=0,started=!1}function _complete(){$animate||($animate=$injector.get("$animate")),$rootScope.$broadcast("cfpLoadingBar:completed"),_set(1),$timeout.cancel(completeTimeout),completeTimeout=$timeout(function(){var promise=$animate.leave(loadingBarContainer,_completeAnimation);promise&&promise.then&&promise.then(_completeAnimation),$animate.leave(spinner)},500)}var $animate,incTimeout,completeTimeout,$parentSelector=this.parentSelector,loadingBarContainer=angular.element(this.loadingBarTemplate),loadingBar=loadingBarContainer.find("div").eq(0),spinner=angular.element(this.spinnerTemplate),started=!1,status=0,autoIncrement=this.autoIncrement,includeSpinner=this.includeSpinner,includeBar=this.includeBar,startSize=this.startSize;return{start:_start,set:_set,status:_status,inc:_inc,complete:_complete,autoIncrement:this.autoIncrement,includeSpinner:this.includeSpinner,latencyThreshold:this.latencyThreshold,parentSelector:this.parentSelector,startSize:this.startSize}}]})}(),angular.module("angular-growl",[]),angular.module("angular-growl").directive("growl",[function(){"use strict";return{restrict:"A",templateUrl:"templates/growl/growl.html",replace:!1,scope:{reference:"@",inline:"=",limitMessages:"="},controller:["$scope","$interval","growl","growlMessages",function($scope,$interval,growl,growlMessages){$scope.referenceId=$scope.reference||0,growlMessages.initDirective($scope.referenceId,$scope.limitMessages),$scope.growlMessages=growlMessages,$scope.inlineMessage=angular.isDefined($scope.inline)?$scope.inline:growl.inlineMessages(),$scope.$watch("limitMessages",function(limitMessages){var directive=growlMessages.directives[$scope.referenceId];angular.isUndefined(limitMessages)||angular.isUndefined(directive)||(directive.limitMessages=limitMessages)}),$scope.stopTimeoutClose=function(message){message.clickToClose||(angular.forEach(message.promises,function(promise){$interval.cancel(promise)}),message.close?growlMessages.deleteMessage(message):message.close=!0)},$scope.alertClasses=function(message){return{"alert-success":"success"===message.severity,"alert-error":"error"===message.severity,"alert-danger":"error"===message.severity,"alert-info":"info"===message.severity,"alert-warning":"warning"===message.severity,icon:!1===message.disableIcons,"alert-dismissable":!message.disableCloseButton}},$scope.showCountDown=function(message){return!message.disableCountDown&&message.ttl>0},$scope.wrapperClasses=function(){var classes={};return classes["growl-fixed"]=!$scope.inlineMessage,classes[growl.position()]=!0,classes},$scope.computeTitle=function(message){return{success:"Success",error:"Error",info:"Information",warn:"Warning"}[message.severity]}}]}}]),angular.module("angular-growl").run(["$templateCache",function($templateCache){"use strict";void 0===$templateCache.get("templates/growl/growl.html")&&$templateCache.put("templates/growl/growl.html",'<div class="growl-container" ng-class="wrapperClasses()"><div class="growl-item alert" ng-repeat="message in growlMessages.directives[referenceId].messages" ng-class="alertClasses(message)" ng-click="stopTimeoutClose(message)"><button type="button" class="close" data-dismiss="alert" aria-hidden="true" ng-click="growlMessages.deleteMessage(message)" ng-show="!message.disableCloseButton">&times;</button><button type="button" class="close" aria-hidden="true" ng-show="showCountDown(message)">{{message.countdown}}</button><h4 class="growl-title" ng-show="message.title" ng-bind="message.title"></h4><div class="growl-message" ng-bind-html="message.text"></div></div></div>')}]),angular.module("angular-growl").provider("growl",function(){"use strict";var _ttl={success:null,error:null,warning:null,info:null},_messagesKey="messages",_messageTextKey="text",_messageTitleKey="title",_messageSeverityKey="severity",_messageTTLKey="ttl",_onlyUniqueMessages=!0,_messageVariableKey="variables",_inline=!1,_position="top-right",_disableCloseButton=!1,_disableIcons=!1,_reverseOrder=!1,_disableCountDown=!1,_translateMessages=!0;this.globalTimeToLive=function(ttl){if("object"==typeof ttl)for(var k in ttl)ttl.hasOwnProperty(k)&&(_ttl[k]=ttl[k]);else for(var severity in _ttl)_ttl.hasOwnProperty(severity)&&(_ttl[severity]=ttl);return this},this.globalTranslateMessages=function(translateMessages){return _translateMessages=translateMessages,this},this.globalDisableCloseButton=function(disableCloseButton){return _disableCloseButton=disableCloseButton,this},this.globalDisableIcons=function(disableIcons){return _disableIcons=disableIcons,this},this.globalReversedOrder=function(reverseOrder){return _reverseOrder=reverseOrder,this},this.globalDisableCountDown=function(countDown){return _disableCountDown=countDown,this},this.messageVariableKey=function(messageVariableKey){return _messageVariableKey=messageVariableKey,this},this.globalInlineMessages=function(inline){return _inline=inline,this},this.globalPosition=function(position){return _position=position,this},this.messagesKey=function(messagesKey){return _messagesKey=messagesKey,this},this.messageTextKey=function(messageTextKey){return _messageTextKey=messageTextKey,this},this.messageTitleKey=function(messageTitleKey){return _messageTitleKey=messageTitleKey,this},this.messageSeverityKey=function(messageSeverityKey){return _messageSeverityKey=messageSeverityKey,this},this.messageTTLKey=function(messageTTLKey){return _messageTTLKey=messageTTLKey,this},this.onlyUniqueMessages=function(onlyUniqueMessages){return _onlyUniqueMessages=onlyUniqueMessages,this},this.serverMessagesInterceptor=["$q","growl",function($q,growl){function checkResponse(response){void 0!==response&&response.data&&response.data[_messagesKey]&&response.data[_messagesKey].length>0&&growl.addServerMessages(response.data[_messagesKey])}return{response:function(response){return checkResponse(response),response},responseError:function(rejection){return checkResponse(rejection),$q.reject(rejection)}}}],this.$get=["$rootScope","$interpolate","$sce","$filter","$interval","growlMessages",function($rootScope,$interpolate,$sce,$filter,$interval,growlMessages){function broadcastMessage(message){if(translate&&message.translateMessage)message.text=translate(message.text,message.variables)||message.text,message.title=translate(message.title)||message.title;else{var polation=$interpolate(message.text);message.text=polation(message.variables)}var addedMessage=growlMessages.addMessage(message);return $rootScope.$broadcast("growlMessage",message),$interval(function(){},0,1),addedMessage}function sendMessage(text,config,severity){var message,_config=config||{};return message={text:text,title:_config.title,severity:severity,ttl:_config.ttl||_ttl[severity],variables:_config.variables||{},disableCloseButton:void 0===_config.disableCloseButton?_disableCloseButton:_config.disableCloseButton,disableIcons:void 0===_config.disableIcons?_disableIcons:_config.disableIcons,disableCountDown:void 0===_config.disableCountDown?_disableCountDown:_config.disableCountDown,position:_config.position||_position,referenceId:_config.referenceId||0,translateMessage:void 0===_config.translateMessage?_translateMessages:_config.translateMessage,destroy:function(){growlMessages.deleteMessage(message)},setText:function(newText){message.text=$sce.trustAsHtml(String(newText))},onclose:_config.onclose,onopen:_config.onopen},broadcastMessage(message)}function warning(text,config){return sendMessage(text,config,"warning")}function error(text,config){return sendMessage(text,config,"error")}function info(text,config){return sendMessage(text,config,"info")}function success(text,config){return sendMessage(text,config,"success")}function general(text,config,severity){return severity=(severity||"error").toLowerCase(),sendMessage(text,config,severity)}function addServerMessages(messages){if(messages&&messages.length){var i,message,severity,length;for(length=messages.length,i=0;i<length;i++)if(message=messages[i],message[_messageTextKey]){severity=(message[_messageSeverityKey]||"error").toLowerCase();var config={};config.variables=message[_messageVariableKey]||{},config.title=message[_messageTitleKey],message[_messageTTLKey]&&(config.ttl=message[_messageTTLKey]),sendMessage(message[_messageTextKey],config,severity)}}}function onlyUnique(){return _onlyUniqueMessages}function reverseOrder(){return _reverseOrder}function inlineMessages(){return _inline}function position(){return _position}var translate;growlMessages.onlyUnique=_onlyUniqueMessages,growlMessages.reverseOrder=_reverseOrder;try{translate=$filter("translate")}catch(e){}return{warning:warning,error:error,info:info,success:success,general:general,addServerMessages:addServerMessages,onlyUnique:onlyUnique,reverseOrder:reverseOrder,inlineMessages:inlineMessages,position:position}}]}),angular.module("angular-growl").service("growlMessages",["$sce","$interval",function($sce,$interval){"use strict";function preLoad(referenceId){return preloadDirectives[referenceId]?preloadDirectives[referenceId]:preloadDirectives[referenceId]={messages:[]}}function directiveForRefId(referenceId){var refId=referenceId||0;return self.directives[refId]||preloadDirectives[refId]}var self=this;this.directives={};var preloadDirectives={};this.initDirective=function(referenceId,limitMessages){return preloadDirectives[referenceId]?(this.directives[referenceId]=preloadDirectives[referenceId],this.directives[referenceId].limitMessages=limitMessages):this.directives[referenceId]={messages:[],limitMessages:limitMessages},this.directives[referenceId]},this.getAllMessages=function(referenceId){referenceId=referenceId||0;return directiveForRefId(referenceId)?directiveForRefId(referenceId).messages:[]},this.destroyAllMessages=function(referenceId){for(var messages=this.getAllMessages(referenceId),i=messages.length-1;i>=0;i--)messages[i].destroy();var directive=directiveForRefId(referenceId);directive&&(directive.messages=[])},this.addMessage=function(message){var directive,messages,found,msgText;if(directive=this.directives[message.referenceId]?this.directives[message.referenceId]:preLoad(message.referenceId),messages=directive.messages,!this.onlyUnique||(angular.forEach(messages,function(msg){msgText=$sce.getTrustedHtml(msg.text),message.text===msgText&&message.severity===msg.severity&&message.title===msg.title&&(found=!0)}),!found)){if(message.text=$sce.trustAsHtml(String(message.text)),message.ttl&&-1!==message.ttl&&(message.countdown=message.ttl/1e3,message.promises=[],message.close=!1,message.countdownFunction=function(){message.countdown>1?(message.countdown--,message.promises.push($interval(message.countdownFunction,1e3,1,1))):message.countdown--}),angular.isDefined(directive.limitMessages)){var diff=messages.length-(directive.limitMessages-1);diff>0&&messages.splice(directive.limitMessages-1,diff)}if(this.reverseOrder?messages.unshift(message):messages.push(message),"function"==typeof message.onopen&&message.onopen(),message.ttl&&-1!==message.ttl){var self=this;message.promises.push($interval(angular.bind(this,function(){self.deleteMessage(message)}),message.ttl,1,1)),message.promises.push($interval(message.countdownFunction,1e3,1,1))}return message}},this.deleteMessage=function(message){var messages=this.getAllMessages(message.referenceId),index=-1;for(var i in messages)messages.hasOwnProperty(i)&&(index=messages[i]===message?i:index);index>-1&&(messages[index].close=!0,messages.splice(index,1)),"function"==typeof message.onclose&&message.onclose()}}]),function(){angular.module("growlNotifications.config",[]).value("growlNotifications.config",{debug:!0}),angular.module("growlNotifications.directives",[]),angular.module("growlNotifications.filters",[]),angular.module("growlNotifications.services",[]),angular.module("growlNotifications",["growlNotifications.config","growlNotifications.directives","growlNotifications.filters","growlNotifications.services"])}(),function(){function growlNotificationDirective(growlNotifications,$animate,$interval){var defaults={ttl:growlNotifications.options.ttl||5e3};return{restrict:"AE",scope:!0,controller:growlNotificationController,controllerAs:"$growlNotification",link:function(scope,iElem,iAttrs,ctrl){var options=angular.extend({},defaults,scope.$eval(iAttrs.growlNotificationOptions));iAttrs.ttl&&(options.ttl=scope.$eval(iAttrs.ttl)),$animate.move(iElem,growlNotifications.element),iAttrs.onOpen&&scope.$eval(iAttrs.onOpen),ctrl.timer=$interval(function(){$animate.leave(iElem),iAttrs.onClose&&scope.$eval(iAttrs.onClose)},options.ttl,1)}}}function growlNotificationController($element,$animate,$attrs,$scope,$interval){this.timer=null,this.remove=function(){$animate.leave($element),this.timer&&($interval.cancel(this.timer),$attrs.onClose&&$scope.$eval($attrs.onClose))}}growlNotificationDirective.$inject=["growlNotifications","$animate","$interval"],growlNotificationController.$inject=["$element","$animate","$attrs","$scope","$interval"],angular.module("growlNotifications.directives").directive("growlNotification",growlNotificationDirective)}(),function(){function growlNotificationsDirective(growlNotifications){return{restrict:"AE",link:function(scope,iElem,iAttrs){growlNotifications.element=iElem}}}growlNotificationsDirective.$inject=["growlNotifications"],angular.module("growlNotifications.directives").directive("growlNotifications",growlNotificationsDirective)}(),function(){function growlNotificationsProvider(){var options={ttl:5e3};this.setOptions=function(newOptions){return angular.extend(options,newOptions),this},this.ttl=function(ttl){return angular.isDefined(ttl)?(options.ttl=ttl,this):options.ttl},this.$get=function(){function GrowlNotifications(){this.options=options,this.element=null}return new GrowlNotifications}}angular.module("growlNotifications.services").provider("growlNotifications",growlNotificationsProvider)}(),function(window,angular){"use strict";function $$CookieWriter($document,$log,$browser){function buildCookieString(name,value,options){var path,expires;options=options||{},expires=options.expires,path=angular.isDefined(options.path)?options.path:cookiePath,angular.isUndefined(value)&&(expires="Thu, 01 Jan 1970 00:00:00 GMT",value=""),angular.isString(expires)&&(expires=new Date(expires));var str=encodeURIComponent(name)+"="+encodeURIComponent(value);str+=path?";path="+path:"",str+=options.domain?";domain="+options.domain:"",str+=expires?";expires="+expires.toUTCString():"",str+=options.secure?";secure":"";var cookieLength=str.length+1;return cookieLength>4096&&$log.warn("Cookie '"+name+"' possibly not set or overflowed because it was too large ("+cookieLength+" > 4096 bytes)!"),str}var cookiePath=$browser.baseHref(),rawDocument=$document[0];return function(name,value,options){rawDocument.cookie=buildCookieString(name,value,options)}}angular.module("ngCookies",["ng"]).info({angularVersion:"1.6.4"}).provider("$cookies",[function(){function calcOptions(options){return options?angular.extend({},defaults,options):defaults}var defaults=this.defaults={};this.$get=["$$cookieReader","$$cookieWriter",function($$cookieReader,$$cookieWriter){return{get:function(key){return $$cookieReader()[key]},getObject:function(key){var value=this.get(key);return value?angular.fromJson(value):value},getAll:function(){return $$cookieReader()},put:function(key,value,options){$$cookieWriter(key,value,calcOptions(options))},putObject:function(key,value,options){this.put(key,angular.toJson(value),options)},remove:function(key,options){$$cookieWriter(key,void 0,calcOptions(options))}}}]}]),angular.module("ngCookies").factory("$cookieStore",["$cookies",function($cookies){return{get:function(key){return $cookies.getObject(key)},put:function(key,value){$cookies.putObject(key,value)},remove:function(key){$cookies.remove(key)}}}]),$$CookieWriter.$inject=["$document","$log","$browser"],angular.module("ngCookies").provider("$$cookieWriter",function(){this.$get=$$CookieWriter})}(window,window.angular),function(window,angular){var isDefined=angular.isDefined,isUndefined=angular.isUndefined,isNumber=angular.isNumber,isObject=angular.isObject,isArray=angular.isArray,isString=angular.isString,extend=angular.extend,toJson=angular.toJson;angular.module("LocalStorageModule",[]).provider("localStorageService",function(){this.prefix="ls",this.storageType="localStorage",this.cookie={expiry:30,path:"/",secure:!1},this.defaultToCookie=!0,this.notify={setItem:!0,removeItem:!1},this.setPrefix=function(prefix){return this.prefix=prefix,this},
this.setStorageType=function(storageType){return this.storageType=storageType,this},this.setDefaultToCookie=function(shouldDefault){return this.defaultToCookie=!!shouldDefault,this},this.setStorageCookie=function(exp,path,secure){return this.cookie.expiry=exp,this.cookie.path=path,this.cookie.secure=secure,this},this.setStorageCookieDomain=function(domain){return this.cookie.domain=domain,this},this.setNotify=function(itemSet,itemRemove){return this.notify={setItem:itemSet,removeItem:itemRemove},this},this.$get=["$rootScope","$window","$document","$parse","$timeout",function($rootScope,$window,$document,$parse,$timeout){function handleStorageChangeCallback(e){if(e||(e=$window.event),notify.setItem&&isString(e.key)&&isKeyPrefixOurs(e.key)){var key=underiveQualifiedKey(e.key);$timeout(function(){$rootScope.$broadcast("LocalStorageModule.notification.changed",{key:key,newvalue:e.newValue,storageType:self.storageType})})}}var webStorage,self=this,prefix=self.prefix,cookie=self.cookie,notify=self.notify,storageType=self.storageType;$document?$document[0]&&($document=$document[0]):$document=document,"."!==prefix.substr(-1)&&(prefix=prefix?prefix+".":"");var deriveQualifiedKey=function(key){return prefix+key},underiveQualifiedKey=function(key){return key.replace(new RegExp("^"+prefix,"g"),"")},isKeyPrefixOurs=function(key){return 0===key.indexOf(prefix)},checkSupport=function(){try{var supported=storageType in $window&&null!==$window[storageType],key=deriveQualifiedKey("__"+Math.round(1e7*Math.random()));return supported&&(webStorage=$window[storageType],webStorage.setItem(key,""),webStorage.removeItem(key)),supported}catch(e){return self.defaultToCookie&&(storageType="cookie"),$rootScope.$broadcast("LocalStorageModule.notification.error",e.message),!1}},browserSupportsLocalStorage=checkSupport(),addToLocalStorage=function(key,value,type){if(setStorageType(type),value=isUndefined(value)?null:toJson(value),!browserSupportsLocalStorage&&self.defaultToCookie||"cookie"===self.storageType)return browserSupportsLocalStorage||$rootScope.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),notify.setItem&&$rootScope.$broadcast("LocalStorageModule.notification.setitem",{key:key,newvalue:value,storageType:"cookie"}),addToCookies(key,value);try{webStorage&&webStorage.setItem(deriveQualifiedKey(key),value),notify.setItem&&$rootScope.$broadcast("LocalStorageModule.notification.setitem",{key:key,newvalue:value,storageType:self.storageType})}catch(e){return $rootScope.$broadcast("LocalStorageModule.notification.error",e.message),addToCookies(key,value)}return!0},getFromLocalStorage=function(key,type){if(setStorageType(type),!browserSupportsLocalStorage&&self.defaultToCookie||"cookie"===self.storageType)return browserSupportsLocalStorage||$rootScope.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),getFromCookies(key);var item=webStorage?webStorage.getItem(deriveQualifiedKey(key)):null;if(!item||"null"===item)return null;try{return JSON.parse(item)}catch(e){return item}},removeFromLocalStorage=function(){var consumed=0;arguments.length>=1&&("localStorage"===arguments[arguments.length-1]||"sessionStorage"===arguments[arguments.length-1])&&(consumed=1,setStorageType(arguments[arguments.length-1]));var i,key;for(i=0;i<arguments.length-consumed;i++)if(key=arguments[i],!browserSupportsLocalStorage&&self.defaultToCookie||"cookie"===self.storageType)browserSupportsLocalStorage||$rootScope.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),notify.removeItem&&$rootScope.$broadcast("LocalStorageModule.notification.removeitem",{key:key,storageType:"cookie"}),removeFromCookies(key);else try{webStorage.removeItem(deriveQualifiedKey(key)),notify.removeItem&&$rootScope.$broadcast("LocalStorageModule.notification.removeitem",{key:key,storageType:self.storageType})}catch(e){$rootScope.$broadcast("LocalStorageModule.notification.error",e.message),removeFromCookies(key)}},getKeysForLocalStorage=function(type){if(setStorageType(type),!browserSupportsLocalStorage)return $rootScope.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),[];var prefixLength=prefix.length,keys=[];for(var key in webStorage)if(key.substr(0,prefixLength)===prefix)try{keys.push(key.substr(prefixLength))}catch(e){return $rootScope.$broadcast("LocalStorageModule.notification.error",e.Description),[]}return keys},clearAllFromLocalStorage=function(regularExpression,type){setStorageType(type);var prefixRegex=prefix?new RegExp("^"+prefix):new RegExp,testRegex=regularExpression?new RegExp(regularExpression):new RegExp;if(!browserSupportsLocalStorage&&self.defaultToCookie||"cookie"===self.storageType)return browserSupportsLocalStorage||$rootScope.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),clearAllFromCookies();if(!browserSupportsLocalStorage&&!self.defaultToCookie)return!1;var prefixLength=prefix.length;for(var key in webStorage)if(prefixRegex.test(key)&&testRegex.test(key.substr(prefixLength)))try{removeFromLocalStorage(key.substr(prefixLength))}catch(e){return $rootScope.$broadcast("LocalStorageModule.notification.error",e.message),clearAllFromCookies()}return!0},browserSupportsCookies=function(){try{return $window.navigator.cookieEnabled||"cookie"in $document&&($document.cookie.length>0||($document.cookie="test").indexOf.call($document.cookie,"test")>-1)}catch(e){return $rootScope.$broadcast("LocalStorageModule.notification.error",e.message),!1}}(),addToCookies=function(key,value,daysToExpiry,secure){if(isUndefined(value))return!1;if((isArray(value)||isObject(value))&&(value=toJson(value)),!browserSupportsCookies)return $rootScope.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED"),!1;try{var expiry="",expiryDate=new Date,cookieDomain="";if(null===value?(expiryDate.setTime(expiryDate.getTime()+-864e5),expiry="; expires="+expiryDate.toGMTString(),value=""):isNumber(daysToExpiry)&&0!==daysToExpiry?(expiryDate.setTime(expiryDate.getTime()+24*daysToExpiry*60*60*1e3),expiry="; expires="+expiryDate.toGMTString()):0!==cookie.expiry&&(expiryDate.setTime(expiryDate.getTime()+24*cookie.expiry*60*60*1e3),expiry="; expires="+expiryDate.toGMTString()),key){var cookiePath="; path="+cookie.path;cookie.domain&&(cookieDomain="; domain="+cookie.domain),"boolean"==typeof secure?!0===secure&&(cookieDomain+="; secure"):!0===cookie.secure&&(cookieDomain+="; secure"),$document.cookie=deriveQualifiedKey(key)+"="+encodeURIComponent(value)+expiry+cookiePath+cookieDomain}}catch(e){return $rootScope.$broadcast("LocalStorageModule.notification.error",e.message),!1}return!0},getFromCookies=function(key){if(!browserSupportsCookies)return $rootScope.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED"),!1;for(var cookies=$document.cookie&&$document.cookie.split(";")||[],i=0;i<cookies.length;i++){for(var thisCookie=cookies[i];" "===thisCookie.charAt(0);)thisCookie=thisCookie.substring(1,thisCookie.length);if(0===thisCookie.indexOf(deriveQualifiedKey(key)+"=")){var storedValues=decodeURIComponent(thisCookie.substring(prefix.length+key.length+1,thisCookie.length));try{var parsedValue=JSON.parse(storedValues);return"number"==typeof parsedValue?storedValues:parsedValue}catch(e){return storedValues}}}return null},removeFromCookies=function(key){addToCookies(key,null)},clearAllFromCookies=function(){for(var thisCookie=null,prefixLength=prefix.length,cookies=$document.cookie.split(";"),i=0;i<cookies.length;i++){for(thisCookie=cookies[i];" "===thisCookie.charAt(0);)thisCookie=thisCookie.substring(1,thisCookie.length);var key=thisCookie.substring(prefixLength,thisCookie.indexOf("="));removeFromCookies(key)}},getStorageType=function(){return storageType},setStorageType=function(type){return type&&storageType!==type&&(storageType=type,browserSupportsLocalStorage=checkSupport()),browserSupportsLocalStorage},bindToScope=function(scope,key,def,lsKey,type){lsKey=lsKey||key;var value=getFromLocalStorage(lsKey,type);return null===value&&isDefined(def)?value=def:isObject(value)&&isObject(def)&&(value=extend(value,def)),$parse(key).assign(scope,value),scope.$watch(key,function(newVal){addToLocalStorage(lsKey,newVal,type)},isObject(scope[key]))};return browserSupportsLocalStorage&&($window.addEventListener?($window.addEventListener("storage",handleStorageChangeCallback,!1),$rootScope.$on("$destroy",function(){$window.removeEventListener("storage",handleStorageChangeCallback)})):$window.attachEvent&&($window.attachEvent("onstorage",handleStorageChangeCallback),$rootScope.$on("$destroy",function(){$window.detachEvent("onstorage",handleStorageChangeCallback)}))),{isSupported:browserSupportsLocalStorage,getStorageType:getStorageType,setStorageType:setStorageType,set:addToLocalStorage,add:addToLocalStorage,get:getFromLocalStorage,keys:getKeysForLocalStorage,remove:removeFromLocalStorage,clearAll:clearAllFromLocalStorage,bind:bindToScope,deriveKey:deriveQualifiedKey,underiveKey:underiveQualifiedKey,length:function(type){setStorageType(type);for(var count=0,storage=$window[storageType],i=0;i<storage.length;i++)0===storage.key(i).indexOf(prefix)&&count++;return count},defaultToCookie:this.defaultToCookie,cookie:{isSupported:browserSupportsCookies,set:addToCookies,add:addToCookies,get:getFromCookies,remove:removeFromCookies,clearAll:clearAllFromCookies}}}]})}(window,window.angular),function(){"use strict";angular.module("ui.grid.i18n",[]),angular.module("ui.grid",["ui.grid.i18n"])}(),function(){"use strict";angular.module("ui.grid").constant("uiGridConstants",{LOG_DEBUG_MESSAGES:!0,LOG_WARN_MESSAGES:!0,LOG_ERROR_MESSAGES:!0,CUSTOM_FILTERS:/CUSTOM_FILTERS/g,COL_FIELD:/COL_FIELD/g,MODEL_COL_FIELD:/MODEL_COL_FIELD/g,TOOLTIP:/title=\"TOOLTIP\"/g,DISPLAY_CELL_TEMPLATE:/DISPLAY_CELL_TEMPLATE/g,TEMPLATE_REGEXP:/<.+>/,FUNC_REGEXP:/(\([^)]*\))?$/,DOT_REGEXP:/\./g,APOS_REGEXP:/'/g,BRACKET_REGEXP:/^(.*)((?:\s*\[\s*\d+\s*\]\s*)|(?:\s*\[\s*"(?:[^"\\]|\\.)*"\s*\]\s*)|(?:\s*\[\s*'(?:[^'\\]|\\.)*'\s*\]\s*))(.*)$/,COL_CLASS_PREFIX:"ui-grid-col",ENTITY_BINDING:"$$this",events:{GRID_SCROLL:"uiGridScroll",COLUMN_MENU_SHOWN:"uiGridColMenuShown",ITEM_DRAGGING:"uiGridItemDragStart",COLUMN_HEADER_CLICK:"uiGridColumnHeaderClick"},keymap:{TAB:9,STRG:17,CAPSLOCK:20,CTRL:17,CTRLRIGHT:18,CTRLR:18,SHIFT:16,RETURN:13,ENTER:13,BACKSPACE:8,BCKSP:8,ALT:18,ALTR:17,ALTRIGHT:17,SPACE:32,WIN:91,MAC:91,FN:null,PG_UP:33,PG_DOWN:34,UP:38,DOWN:40,LEFT:37,RIGHT:39,ESC:27,DEL:46,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123},ASC:"asc",DESC:"desc",filter:{STARTS_WITH:2,ENDS_WITH:4,EXACT:8,CONTAINS:16,GREATER_THAN:32,GREATER_THAN_OR_EQUAL:64,LESS_THAN:128,LESS_THAN_OR_EQUAL:256,NOT_EQUAL:512,SELECT:"select",INPUT:"input"},aggregationTypes:{sum:2,count:4,avg:8,min:16,max:32},CURRENCY_SYMBOLS:["ƒ","$","£","$","¤","¥","៛","₩","₱","฿","₫"],scrollDirection:{UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right",NONE:"none"},dataChange:{ALL:"all",EDIT:"edit",ROW:"row",COLUMN:"column",OPTIONS:"options"},scrollbars:{NEVER:0,ALWAYS:1}})}(),angular.module("ui.grid").directive("uiGridCell",["$compile","$parse","gridUtil","uiGridConstants",function($compile,$parse,gridUtil,uiGridConstants){return{priority:0,scope:!1,require:"?^uiGrid",compile:function(){return{pre:function($scope,$elm,$attrs,uiGridCtrl){if(uiGridCtrl&&$scope.col.compiledElementFn)!function(){(0,$scope.col.compiledElementFn)($scope,function(clonedElement,scope){$elm.append(clonedElement)})}();else if(uiGridCtrl&&!$scope.col.compiledElementFn)$scope.col.getCompiledElementFn().then(function(compiledElementFn){compiledElementFn($scope,function(clonedElement,scope){$elm.append(clonedElement)})});else{var html=$scope.col.cellTemplate.replace(uiGridConstants.MODEL_COL_FIELD,"row.entity."+gridUtil.preEval($scope.col.field)).replace(uiGridConstants.COL_FIELD,"grid.getCellValue(row, col)"),cellElement=$compile(html)($scope);$elm.append(cellElement)}},post:function($scope,$elm,$attrs,uiGridCtrl){var initColClass=$scope.col.getColClass(!1);$elm.addClass(initColClass);var classAdded,updateClass=function(grid){var contents=$elm;classAdded&&(contents.removeClass(classAdded),classAdded=null),classAdded=angular.isFunction($scope.col.cellClass)?$scope.col.cellClass($scope.grid,$scope.row,$scope.col,$scope.rowRenderIndex,$scope.colRenderIndex):$scope.col.cellClass,contents.addClass(classAdded)};$scope.col.cellClass&&updateClass();var dataChangeDereg=$scope.grid.registerDataChangeCallback(updateClass,[uiGridConstants.dataChange.COLUMN,uiGridConstants.dataChange.EDIT]),cellChangeFunction=function(n,o){if(n!==o){(classAdded||$scope.col.cellClass)&&updateClass();var newColClass=$scope.col.getColClass(!1);newColClass!==initColClass&&($elm.removeClass(initColClass),$elm.addClass(newColClass),initColClass=newColClass)}},rowWatchDereg=$scope.$watch("row",cellChangeFunction),deregisterFunction=function(){dataChangeDereg(),rowWatchDereg()};$scope.$on("$destroy",deregisterFunction),$elm.on("$destroy",deregisterFunction)}}}}}]),function(){angular.module("ui.grid").service("uiGridColumnMenuService",["i18nService","uiGridConstants","gridUtil",function(i18nService,uiGridConstants,gridUtil){var service={initialize:function($scope,uiGridCtrl){$scope.grid=uiGridCtrl.grid,uiGridCtrl.columnMenuScope=$scope,$scope.menuShown=!1},setColMenuItemWatch:function($scope){var deregFunction=$scope.$watch("col.menuItems",function(n){void 0!==n&&n&&angular.isArray(n)?(n.forEach(function(item){void 0!==item.context&&item.context||(item.context={}),item.context.col=$scope.col}),$scope.menuItems=$scope.defaultMenuItems.concat(n)):$scope.menuItems=$scope.defaultMenuItems});$scope.$on("$destroy",deregFunction)},sortable:function($scope){return!!($scope.grid.options.enableSorting&&void 0!==$scope.col&&$scope.col&&$scope.col.enableSorting)},isActiveSort:function($scope,direction){return void 0!==$scope.col&&void 0!==$scope.col.sort&&void 0!==$scope.col.sort.direction&&$scope.col.sort.direction===direction},suppressRemoveSort:function($scope){return!(!$scope.col||!$scope.col.suppressRemoveSort)},hideable:function($scope){return void 0===$scope.col||!$scope.col||!$scope.col.colDef||!1!==$scope.col.colDef.enableHiding},getDefaultMenuItems:function($scope){return[{title:i18nService.getSafeText("sort.ascending"),icon:"ui-grid-icon-sort-alt-up",action:function($event){$event.stopPropagation(),$scope.sortColumn($event,uiGridConstants.ASC)},shown:function(){return service.sortable($scope)},active:function(){return service.isActiveSort($scope,uiGridConstants.ASC)}},{title:i18nService.getSafeText("sort.descending"),icon:"ui-grid-icon-sort-alt-down",action:function($event){$event.stopPropagation(),$scope.sortColumn($event,uiGridConstants.DESC)},shown:function(){return service.sortable($scope)},active:function(){return service.isActiveSort($scope,uiGridConstants.DESC)}},{title:i18nService.getSafeText("sort.remove"),icon:"ui-grid-icon-cancel",action:function($event){$event.stopPropagation(),$scope.unsortColumn()},shown:function(){return service.sortable($scope)&&void 0!==$scope.col&&void 0!==$scope.col.sort&&void 0!==$scope.col.sort.direction&&null!==$scope.col.sort.direction&&!service.suppressRemoveSort($scope)}},{title:i18nService.getSafeText("column.hide"),icon:"ui-grid-icon-cancel",shown:function(){return service.hideable($scope)},action:function($event){$event.stopPropagation(),$scope.hideColumn()}}]},getColumnElementPosition:function($scope,column,$columnElement){var positionData={};return positionData.left=$columnElement[0].offsetLeft,positionData.top=$columnElement[0].offsetTop,positionData.parentLeft=$columnElement[0].offsetParent.offsetLeft,positionData.offset=0,column.grid.options.offsetLeft&&(positionData.offset=column.grid.options.offsetLeft),positionData.height=gridUtil.elementHeight($columnElement,!0),positionData.width=gridUtil.elementWidth($columnElement,!0),positionData},repositionMenu:function($scope,column,positionData,$elm,$columnElement){var menu=$elm[0].querySelectorAll(".ui-grid-menu"),renderContainerElm=gridUtil.closestElm($columnElement,".ui-grid-render-container"),renderContainerOffset=renderContainerElm.getBoundingClientRect().left-$scope.grid.element[0].getBoundingClientRect().left,containerScrollLeft=renderContainerElm.querySelectorAll(".ui-grid-viewport")[0].scrollLeft,myWidth=column.lastMenuWidth?column.lastMenuWidth:$scope.lastMenuWidth?$scope.lastMenuWidth:170,paddingRight=column.lastMenuPaddingRight?column.lastMenuPaddingRight:$scope.lastMenuPaddingRight?$scope.lastMenuPaddingRight:10;if(0!==menu.length){var mid=menu[0].querySelectorAll(".ui-grid-menu-mid");0===mid.length||angular.element(mid).hasClass("ng-hide")||(myWidth=gridUtil.elementWidth(menu,!0),$scope.lastMenuWidth=myWidth,column.lastMenuWidth=myWidth,paddingRight=parseInt(gridUtil.getStyles(angular.element(menu)[0]).paddingRight,10),$scope.lastMenuPaddingRight=paddingRight,column.lastMenuPaddingRight=paddingRight)}var left=positionData.left+renderContainerOffset-containerScrollLeft+positionData.parentLeft+positionData.width-myWidth+paddingRight;left<positionData.offset&&(left=positionData.offset),$elm.css("left",left+"px"),$elm.css("top",positionData.top+positionData.height+"px")}};return service}]).directive("uiGridColumnMenu",["$timeout","gridUtil","uiGridConstants","uiGridColumnMenuService","$document",function($timeout,gridUtil,uiGridConstants,uiGridColumnMenuService,$document){return{priority:0,scope:!0,require:"^uiGrid",templateUrl:"ui-grid/uiGridColumnMenu",replace:!0,link:function($scope,$elm,$attrs,uiGridCtrl){uiGridColumnMenuService.initialize($scope,uiGridCtrl),$scope.defaultMenuItems=uiGridColumnMenuService.getDefaultMenuItems($scope),$scope.menuItems=$scope.defaultMenuItems,uiGridColumnMenuService.setColMenuItemWatch($scope),$scope.showMenu=function(column,$columnElement,event){$scope.col=column;var colElementPosition=uiGridColumnMenuService.getColumnElementPosition($scope,column,$columnElement);$scope.menuShown?($scope.colElement=$columnElement,$scope.colElementPosition=colElementPosition,$scope.hideThenShow=!0,$scope.$broadcast("hide-menu",{originalEvent:event})):($scope.menuShown=!0,uiGridColumnMenuService.repositionMenu($scope,column,colElementPosition,$elm,$columnElement),$scope.colElement=$columnElement,$scope.colElementPosition=colElementPosition,$scope.$broadcast("show-menu",{originalEvent:event}))},$scope.hideMenu=function(broadcastTrigger){$scope.menuShown=!1,broadcastTrigger||$scope.$broadcast("hide-menu")},$scope.$on("menu-hidden",function(){$scope.hideThenShow?(delete $scope.hideThenShow,uiGridColumnMenuService.repositionMenu($scope,$scope.col,$scope.colElementPosition,$elm,$scope.colElement),$scope.$broadcast("show-menu"),$scope.menuShown=!0):($scope.hideMenu(!0),$scope.col&&gridUtil.focus.bySelector($document,".ui-grid-header-cell."+$scope.col.getColClass()+" .ui-grid-column-menu-button",$scope.col.grid,!1))}),$scope.$on("menu-shown",function(){$timeout(function(){uiGridColumnMenuService.repositionMenu($scope,$scope.col,$scope.colElementPosition,$elm,$scope.colElement),gridUtil.focus.bySelector($document,".ui-grid-menu-items .ui-grid-menu-item",!0),delete $scope.colElementPosition,delete $scope.columnElement},200)}),$scope.sortColumn=function(event,dir){event.stopPropagation(),$scope.grid.sortColumn($scope.col,dir,!0).then(function(){$scope.grid.refresh(),$scope.hideMenu()})},$scope.unsortColumn=function(){$scope.col.unsort(),$scope.grid.refresh(),$scope.hideMenu()};var setFocusOnHideColumn=function(){$timeout(function(){var thisIndex,focusToGridMenu=function(){return gridUtil.focus.byId("grid-menu",$scope.grid)};$scope.grid.columns.some(function(element,index){if(angular.equals(element,$scope.col))return thisIndex=index,!0});var previousVisibleCol;if($scope.grid.columns.some(function(element,index){if(!element.visible)return!1;if(index<thisIndex)previousVisibleCol=element;else{if(index>thisIndex&&!previousVisibleCol)return previousVisibleCol=element,!0;if(index>thisIndex&&previousVisibleCol)return!0}}),previousVisibleCol){var colClass=previousVisibleCol.getColClass();gridUtil.focus.bySelector($document,".ui-grid-header-cell."+colClass+" .ui-grid-header-cell-primary-focus",!0).then(angular.noop,function(reason){if("canceled"!==reason)return focusToGridMenu()})}else focusToGridMenu()})};$scope.hideColumn=function(){$scope.col.colDef.visible=!1,$scope.col.visible=!1,$scope.grid.queueGridRefresh(),$scope.hideMenu(),$scope.grid.api.core.notifyDataChange(uiGridConstants.dataChange.COLUMN),$scope.grid.api.core.raise.columnVisibilityChanged($scope.col),setFocusOnHideColumn()}},controller:["$scope",function($scope){var self=this;$scope.$watch("menuItems",function(n){self.menuItems=n})}]}}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridFilter",["$compile","$templateCache","i18nService","gridUtil",function($compile,$templateCache,i18nService,gridUtil){return{compile:function(){return{pre:function($scope,$elm,$attrs,controllers){$scope.col.updateFilters=function(filterable){if($elm.children().remove(),filterable){var template=$scope.col.filterHeaderTemplate;$elm.append($compile(template)($scope))}},$scope.$on("$destroy",function(){delete $scope.col.updateFilters})},post:function($scope,$elm,$attrs,controllers){$scope.aria=i18nService.getSafeText("headerCell.aria"),$scope.removeFilter=function(colFilter,index){colFilter.term=null,gridUtil.focus.bySelector($elm,".ui-grid-filter-input-"+index)}}}}}}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridFooterCell",["$timeout","gridUtil","uiGridConstants","$compile",function($timeout,gridUtil,uiGridConstants,$compile){return{priority:0,scope:{col:"=",row:"=",renderIndex:"="},replace:!0,require:"^uiGrid",compile:function(tElement,tAttrs,transclude){return{pre:function($scope,$elm,$attrs,uiGridCtrl){var cellFooter=$compile($scope.col.footerCellTemplate)($scope);$elm.append(cellFooter)},post:function($scope,$elm,$attrs,uiGridCtrl){$scope.grid=uiGridCtrl.grid;var initColClass=$scope.col.getColClass(!1);$elm.addClass(initColClass);var classAdded,updateClass=function(grid){var contents=$elm;classAdded&&(contents.removeClass(classAdded),classAdded=null),classAdded=angular.isFunction($scope.col.footerCellClass)?$scope.col.footerCellClass($scope.grid,$scope.row,$scope.col,$scope.rowRenderIndex,$scope.colRenderIndex):$scope.col.footerCellClass,contents.addClass(classAdded)};$scope.col.footerCellClass&&updateClass(),$scope.col.updateAggregationValue();var dataChangeDereg=$scope.grid.registerDataChangeCallback(updateClass,[uiGridConstants.dataChange.COLUMN]);$scope.grid.api.core.on.rowsRendered($scope,$scope.col.updateAggregationValue),$scope.grid.api.core.on.rowsRendered($scope,updateClass),$scope.$on("$destroy",dataChangeDereg)}}}}}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridFooter",["$templateCache","$compile","uiGridConstants","gridUtil","$timeout",function($templateCache,$compile,uiGridConstants,gridUtil,$timeout){return{restrict:"EA",replace:!0,require:["^uiGrid","^uiGridRenderContainer"],scope:!0,compile:function($elm,$attrs){return{pre:function($scope,$elm,$attrs,controllers){var uiGridCtrl=controllers[0],containerCtrl=controllers[1];$scope.grid=uiGridCtrl.grid,$scope.colContainer=containerCtrl.colContainer,containerCtrl.footer=$elm;var footerTemplate=$scope.grid.options.footerTemplate;gridUtil.getTemplate(footerTemplate).then(function(contents){var template=angular.element(contents),newElm=$compile(template)($scope);if($elm.append(newElm),containerCtrl){var footerViewport=$elm[0].getElementsByClassName("ui-grid-footer-viewport")[0];footerViewport&&(containerCtrl.footerViewport=footerViewport)}})},post:function($scope,$elm,$attrs,controllers){var uiGridCtrl=controllers[0],containerCtrl=controllers[1];uiGridCtrl.grid;gridUtil.disableAnimations($elm),containerCtrl.footer=$elm;var footerViewport=$elm[0].getElementsByClassName("ui-grid-footer-viewport")[0];footerViewport&&(containerCtrl.footerViewport=footerViewport)}}}}}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridGridFooter",["$templateCache","$compile","uiGridConstants","gridUtil","$timeout",function($templateCache,$compile,uiGridConstants,gridUtil,$timeout){return{restrict:"EA",replace:!0,require:"^uiGrid",scope:!0,compile:function($elm,$attrs){return{pre:function($scope,$elm,$attrs,uiGridCtrl){$scope.grid=uiGridCtrl.grid;var footerTemplate=$scope.grid.options.gridFooterTemplate;gridUtil.getTemplate(footerTemplate).then(function(contents){var template=angular.element(contents),newElm=$compile(template)($scope);$elm.append(newElm)})},post:function($scope,$elm,$attrs,controllers){}}}}}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridGroupPanel",["$compile","uiGridConstants","gridUtil",function($compile,uiGridConstants,gridUtil){return{restrict:"EA",replace:!0,require:"?^uiGrid",scope:!1,compile:function($elm,$attrs){return{pre:function($scope,$elm,$attrs,uiGridCtrl){var groupPanelTemplate=$scope.grid.options.groupPanelTemplate||"ui-grid/ui-grid-group-panel";gridUtil.getTemplate(groupPanelTemplate).then(function(contents){var template=angular.element(contents),newElm=$compile(template)($scope);$elm.append(newElm)})},post:function($scope,$elm,$attrs,uiGridCtrl){$elm.bind("$destroy",function(){})}}}}}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridHeaderCell",["$compile","$timeout","$window","$document","gridUtil","uiGridConstants","ScrollEvent","i18nService",function($compile,$timeout,$window,$document,gridUtil,uiGridConstants,ScrollEvent,i18nService){return{priority:0,scope:{col:"=",row:"=",renderIndex:"="},require:["^uiGrid","^uiGridRenderContainer"],replace:!0,compile:function(){return{pre:function($scope,$elm,$attrs){var cellHeader=$compile($scope.col.headerCellTemplate)($scope);$elm.append(cellHeader)},post:function($scope,$elm,$attrs,controllers){var uiGridCtrl=controllers[0],renderContainerCtrl=controllers[1];$scope.i18n={headerCell:i18nService.getSafeText("headerCell"),sort:i18nService.getSafeText("sort")},$scope.isSortPriorityVisible=function(){return angular.isNumber($scope.col.sort.priority)&&$scope.grid.columns.some(function(element,index){return angular.isNumber(element.sort.priority)&&element!==$scope.col})},$scope.getSortDirectionAriaLabel=function(){var col=$scope.col,sortDirectionText=col.sort.direction===uiGridConstants.ASC?$scope.i18n.sort.ascending:col.sort.direction===uiGridConstants.DESC?$scope.i18n.sort.descending:$scope.i18n.sort.none,label=sortDirectionText;return $scope.isSortPriorityVisible()&&(label=label+". "+$scope.i18n.headerCell.priority+" "+col.sort.priority),label},$scope.grid=uiGridCtrl.grid,$scope.renderContainer=uiGridCtrl.grid.renderContainers[renderContainerCtrl.containerId];var initColClass=$scope.col.getColClass(!1);$elm.addClass(initColClass),$scope.menuShown=!1,$scope.asc=uiGridConstants.ASC,$scope.desc=uiGridConstants.DESC;var classAdded,previousMouseX,$contentsElm=(angular.element($elm[0].querySelectorAll(".ui-grid-header-cell-menu")),angular.element($elm[0].querySelectorAll(".ui-grid-cell-contents"))),filterDeregisters=[];$scope.downFn=function(event){event.stopPropagation(),void 0!==event.originalEvent&&void 0!==event.originalEvent&&(event=event.originalEvent),event.button&&0!==event.button||(previousMouseX=event.pageX,$scope.mousedownStartTime=(new Date).getTime(),$scope.mousedownTimeout=$timeout(function(){},500),$scope.mousedownTimeout.then(function(){$scope.colMenu&&uiGridCtrl.columnMenuScope.showMenu($scope.col,$elm,event)}),uiGridCtrl.fireEvent(uiGridConstants.events.COLUMN_HEADER_CLICK,{event:event,columnName:$scope.col.colDef.name}),$scope.offAllEvents(),"touchstart"===event.type?($document.on("touchend",$scope.upFn),$document.on("touchmove",$scope.moveFn)):"mousedown"===event.type&&($document.on("mouseup",$scope.upFn),$document.on("mousemove",$scope.moveFn)))},$scope.upFn=function(event){event.stopPropagation(),$timeout.cancel($scope.mousedownTimeout),$scope.offAllEvents(),$scope.onDownEvents(event.type),(new Date).getTime()-$scope.mousedownStartTime>500||$scope.sortable&&$scope.handleClick(event)},$scope.moveFn=function(event){0!=event.pageX-previousMouseX&&($timeout.cancel($scope.mousedownTimeout),$scope.offAllEvents(),$scope.onDownEvents(event.type))},$scope.clickFn=function(event){event.stopPropagation(),$contentsElm.off("click",$scope.clickFn)},$scope.offAllEvents=function(){$contentsElm.off("touchstart",$scope.downFn),$contentsElm.off("mousedown",$scope.downFn),$document.off("touchend",$scope.upFn),$document.off("mouseup",$scope.upFn),$document.off("touchmove",$scope.moveFn),$document.off("mousemove",$scope.moveFn),$contentsElm.off("click",$scope.clickFn)},$scope.onDownEvents=function(type){switch(type){case"touchmove":case"touchend":$contentsElm.on("click",$scope.clickFn),$contentsElm.on("touchstart",$scope.downFn),$timeout(function(){$contentsElm.on("mousedown",$scope.downFn)},500);break;case"mousemove":case"mouseup":$contentsElm.on("click",$scope.clickFn),$contentsElm.on("mousedown",$scope.downFn),$timeout(function(){$contentsElm.on("touchstart",$scope.downFn)},500);break;default:$contentsElm.on("click",$scope.clickFn),$contentsElm.on("touchstart",$scope.downFn),$contentsElm.on("mousedown",$scope.downFn)}};var updateHeaderOptions=function(grid){var contents=$elm;classAdded&&(contents.removeClass(classAdded),classAdded=null),classAdded=angular.isFunction($scope.col.headerCellClass)?$scope.col.headerCellClass($scope.grid,$scope.row,$scope.col,$scope.rowRenderIndex,$scope.colRenderIndex):$scope.col.headerCellClass,contents.addClass(classAdded),$timeout(function(){var rightMostContainer=$scope.grid.renderContainers.right?$scope.grid.renderContainers.right:$scope.grid.renderContainers.body;$scope.isLastCol=$scope.col===rightMostContainer.visibleColumnCache[rightMostContainer.visibleColumnCache.length-1]}),uiGridCtrl.grid.options.enableSorting&&$scope.col.enableSorting?$scope.sortable=!0:$scope.sortable=!1;var oldFilterable=$scope.filterable;uiGridCtrl.grid.options.enableFiltering&&$scope.col.enableFiltering?$scope.filterable=!0:$scope.filterable=!1,oldFilterable!==$scope.filterable&&(void 0!==$scope.col.updateFilters&&$scope.col.updateFilters($scope.filterable),$scope.filterable?($scope.col.filters.forEach(function(filter,i){filterDeregisters.push($scope.$watch("col.filters["+i+"].term",function(n,o){n!==o&&(uiGridCtrl.grid.api.core.raise.filterChanged(),uiGridCtrl.grid.api.core.notifyDataChange(uiGridConstants.dataChange.COLUMN),uiGridCtrl.grid.queueGridRefresh())}))}),$scope.$on("$destroy",function(){filterDeregisters.forEach(function(filterDeregister){filterDeregister()})})):filterDeregisters.forEach(function(filterDeregister){filterDeregister()})),$scope.col.grid.options&&!1!==$scope.col.grid.options.enableColumnMenus&&$scope.col.colDef&&!1!==$scope.col.colDef.enableColumnMenu?$scope.colMenu=!0:$scope.colMenu=!1,$scope.offAllEvents(),($scope.sortable||$scope.colMenu)&&($scope.onDownEvents(),$scope.$on("$destroy",function(){$scope.offAllEvents()}))};updateHeaderOptions();var dataChangeDereg=$scope.grid.registerDataChangeCallback(updateHeaderOptions,[uiGridConstants.dataChange.COLUMN]);$scope.$on("$destroy",dataChangeDereg),$scope.handleClick=function(event){var add=!1;event.shiftKey&&(add=!0),uiGridCtrl.grid.sortColumn($scope.col,add).then(function(){uiGridCtrl.columnMenuScope&&uiGridCtrl.columnMenuScope.hideMenu(),uiGridCtrl.grid.refresh()})},$scope.toggleMenu=function(event){event.stopPropagation(),uiGridCtrl.columnMenuScope.menuShown&&uiGridCtrl.columnMenuScope.col===$scope.col?uiGridCtrl.columnMenuScope.hideMenu():uiGridCtrl.columnMenuScope.showMenu($scope.col,$elm)}}}}}}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridHeader",["$templateCache","$compile","uiGridConstants","gridUtil","$timeout","ScrollEvent",function($templateCache,$compile,uiGridConstants,gridUtil,$timeout,ScrollEvent){return{
restrict:"EA",replace:!0,require:["^uiGrid","^uiGridRenderContainer"],scope:!0,compile:function($elm,$attrs){return{pre:function($scope,$elm,$attrs,controllers){function updateHeaderReferences(){containerCtrl.header=containerCtrl.colContainer.header=$elm;var headerCanvases=$elm[0].getElementsByClassName("ui-grid-header-canvas");headerCanvases.length>0?containerCtrl.headerCanvas=containerCtrl.colContainer.headerCanvas=headerCanvases[0]:containerCtrl.headerCanvas=null}function scrollHandler(evt){if(!uiGridCtrl.grid.isScrollingHorizontally){var newScrollLeft=gridUtil.normalizeScrollLeft(containerCtrl.headerViewport,uiGridCtrl.grid),horizScrollPercentage=containerCtrl.colContainer.scrollHorizontal(newScrollLeft),scrollEvent=new ScrollEvent(uiGridCtrl.grid,null,containerCtrl.colContainer,ScrollEvent.Sources.ViewPortScroll);scrollEvent.newScrollLeft=newScrollLeft,horizScrollPercentage>-1&&(scrollEvent.x={percentage:horizScrollPercentage}),uiGridCtrl.grid.scrollContainers(null,scrollEvent)}}var uiGridCtrl=controllers[0],containerCtrl=controllers[1];$scope.grid=uiGridCtrl.grid,$scope.colContainer=containerCtrl.colContainer,updateHeaderReferences();var headerTemplate;headerTemplate=$scope.grid.options.showHeader?$scope.grid.options.headerTemplate?$scope.grid.options.headerTemplate:"ui-grid/ui-grid-header":"ui-grid/ui-grid-no-header",gridUtil.getTemplate(headerTemplate).then(function(contents){var template=angular.element(contents),newElm=$compile(template)($scope);if($elm.replaceWith(newElm),$elm=newElm,updateHeaderReferences(),containerCtrl){var headerViewport=$elm[0].getElementsByClassName("ui-grid-header-viewport")[0];headerViewport&&(containerCtrl.headerViewport=headerViewport,angular.element(headerViewport).on("scroll",scrollHandler),$scope.$on("$destroy",function(){angular.element(headerViewport).off("scroll",scrollHandler)}))}$scope.grid.queueRefresh()})},post:function($scope,$elm,$attrs,controllers){function updateColumnWidths(){var columnCache=containerCtrl.colContainer.visibleColumnCache,ret="",canvasWidth=0;return columnCache.forEach(function(column){ret+=column.getColClassDefinition(),canvasWidth+=column.drawnWidth}),containerCtrl.colContainer.canvasWidth=canvasWidth,ret}var uiGridCtrl=controllers[0],containerCtrl=controllers[1];uiGridCtrl.grid;gridUtil.disableAnimations($elm),containerCtrl.header=$elm;var headerViewport=$elm[0].getElementsByClassName("ui-grid-header-viewport")[0];headerViewport&&(containerCtrl.headerViewport=headerViewport),uiGridCtrl&&uiGridCtrl.grid.registerStyleComputation({priority:15,func:updateColumnWidths})}}}}}])}(),function(){angular.module("ui.grid").service("uiGridGridMenuService",["gridUtil","i18nService","uiGridConstants",function(gridUtil,i18nService,uiGridConstants){var service={initialize:function($scope,grid){grid.gridMenuScope=$scope,$scope.grid=grid,$scope.registeredMenuItems=[],$scope.$on("$destroy",function(){$scope.grid&&$scope.grid.gridMenuScope&&($scope.grid.gridMenuScope=null),$scope.grid&&($scope.grid=null),$scope.registeredMenuItems&&($scope.registeredMenuItems=null)}),$scope.registeredMenuItems=[],grid.api.registerMethod("core","addToGridMenu",service.addToGridMenu),grid.api.registerMethod("core","removeFromGridMenu",service.removeFromGridMenu)},addToGridMenu:function(grid,menuItems){angular.isArray(menuItems)?grid.gridMenuScope?(grid.gridMenuScope.registeredMenuItems=grid.gridMenuScope.registeredMenuItems?grid.gridMenuScope.registeredMenuItems:[],grid.gridMenuScope.registeredMenuItems=grid.gridMenuScope.registeredMenuItems.concat(menuItems)):gridUtil.logError("Asked to addToGridMenu, but gridMenuScope not present.  Timing issue?  Please log issue with ui-grid"):gridUtil.logError("addToGridMenu: menuItems must be an array, and is not, not adding any items")},removeFromGridMenu:function(grid,id){var foundIndex=-1;grid&&grid.gridMenuScope&&grid.gridMenuScope.registeredMenuItems.forEach(function(value,index){value.id===id&&(foundIndex>-1?gridUtil.logError("removeFromGridMenu: found multiple items with the same id, removing only the last"):foundIndex=index)}),foundIndex>-1&&grid.gridMenuScope.registeredMenuItems.splice(foundIndex,1)},getMenuItems:function($scope){var menuItems=[];$scope.grid.options.gridMenuCustomItems&&(angular.isArray($scope.grid.options.gridMenuCustomItems)?menuItems=menuItems.concat($scope.grid.options.gridMenuCustomItems):gridUtil.logError("gridOptions.gridMenuCustomItems must be an array, and is not"));var clearFilters=[{title:i18nService.getSafeText("gridMenu.clearAllFilters"),action:function($event){$scope.grid.clearAllFilters(void 0,!0,void 0)},shown:function(){return $scope.grid.options.enableFiltering},order:100}];return menuItems=menuItems.concat(clearFilters),menuItems=menuItems.concat($scope.registeredMenuItems),!1!==$scope.grid.options.gridMenuShowHideColumns&&(menuItems=menuItems.concat(service.showHideColumns($scope))),menuItems.sort(function(a,b){return a.order-b.order}),menuItems},showHideColumns:function($scope){var showHideColumns=[];return $scope.grid.options.columnDefs&&0!==$scope.grid.options.columnDefs.length&&0!==$scope.grid.columns.length?(showHideColumns.push({title:i18nService.getSafeText("gridMenu.columns"),order:300}),$scope.grid.options.gridMenuTitleFilter=$scope.grid.options.gridMenuTitleFilter?$scope.grid.options.gridMenuTitleFilter:function(title){return title},$scope.grid.options.columnDefs.forEach(function(colDef,index){if(!1!==colDef.enableHiding){var menuItem={icon:"ui-grid-icon-ok",action:function($event){$event.stopPropagation(),service.toggleColumnVisibility(this.context.gridCol)},shown:function(){return!0===this.context.gridCol.colDef.visible||void 0===this.context.gridCol.colDef.visible},context:{gridCol:$scope.grid.getColumn(colDef.name||colDef.field)},leaveOpen:!0,order:301+2*index};service.setMenuItemTitle(menuItem,colDef,$scope.grid),showHideColumns.push(menuItem),menuItem={icon:"ui-grid-icon-cancel",action:function($event){$event.stopPropagation(),service.toggleColumnVisibility(this.context.gridCol)},shown:function(){return!(!0===this.context.gridCol.colDef.visible||void 0===this.context.gridCol.colDef.visible)},context:{gridCol:$scope.grid.getColumn(colDef.name||colDef.field)},leaveOpen:!0,order:301+2*index+1},service.setMenuItemTitle(menuItem,colDef,$scope.grid),showHideColumns.push(menuItem)}}),showHideColumns):showHideColumns},setMenuItemTitle:function(menuItem,colDef,grid){var title=grid.options.gridMenuTitleFilter(colDef.displayName||gridUtil.readableColumnName(colDef.name)||colDef.field);"string"==typeof title?menuItem.title=title:title.then?(menuItem.title="",title.then(function(successValue){menuItem.title=successValue},function(errorValue){menuItem.title=errorValue})):(gridUtil.logError("Expected gridMenuTitleFilter to return a string or a promise, it has returned neither, bad config"),menuItem.title="badconfig")},toggleColumnVisibility:function(gridCol){gridCol.colDef.visible=!(!0===gridCol.colDef.visible||void 0===gridCol.colDef.visible),gridCol.grid.refresh(),gridCol.grid.api.core.notifyDataChange(uiGridConstants.dataChange.COLUMN),gridCol.grid.api.core.raise.columnVisibilityChanged(gridCol)}};return service}]).directive("uiGridMenuButton",["gridUtil","uiGridConstants","uiGridGridMenuService","i18nService",function(gridUtil,uiGridConstants,uiGridGridMenuService,i18nService){return{priority:0,scope:!0,require:["^uiGrid"],templateUrl:"ui-grid/ui-grid-menu-button",replace:!0,link:function($scope,$elm,$attrs,controllers){var uiGridCtrl=controllers[0];$scope.i18n={aria:i18nService.getSafeText("gridMenu.aria")},uiGridGridMenuService.initialize($scope,uiGridCtrl.grid),$scope.shown=!1,$scope.toggleMenu=function(){$scope.shown?($scope.$broadcast("hide-menu"),$scope.shown=!1):($scope.menuItems=uiGridGridMenuService.getMenuItems($scope),$scope.$broadcast("show-menu"),$scope.shown=!0)},$scope.$on("menu-hidden",function(){$scope.shown=!1,gridUtil.focus.bySelector($elm,".ui-grid-icon-container")})}}}])}(),function(){angular.module("ui.grid").directive("uiGridMenu",["$compile","$timeout","$window","$document","gridUtil","uiGridConstants","i18nService",function($compile,$timeout,$window,$document,gridUtil,uiGridConstants,i18nService){return{priority:0,scope:{menuItems:"=",autoHide:"=?"},require:"?^uiGrid",templateUrl:"ui-grid/uiGridMenu",replace:!1,link:function($scope,$elm,$attrs,uiGridCtrl){$scope.dynamicStyles="";var setupHeightStyle=function(gridHeight){var gridMenuMaxHeight=gridHeight-uiGridCtrl.grid.headerHeight-20;$scope.dynamicStyles=[".grid"+uiGridCtrl.grid.id+" .ui-grid-menu-mid {","max-height: "+gridMenuMaxHeight+"px;","}"].join(" ")};uiGridCtrl&&(setupHeightStyle(uiGridCtrl.grid.gridHeight),uiGridCtrl.grid.api.core.on.gridDimensionChanged($scope,function(oldGridHeight,oldGridWidth,newGridHeight,newGridWidth){setupHeightStyle(newGridHeight)})),$scope.i18n={close:i18nService.getSafeText("columnMenu.close")},$scope.showMenu=function(event,args){$scope.shown?$scope.shownMid||($scope.shownMid=!0,$scope.$emit("menu-shown")):($scope.shown=!0,$timeout(function(){$scope.shownMid=!0,$scope.$emit("menu-shown")}));var docEventType="click";args&&args.originalEvent&&args.originalEvent.type&&"touchstart"===args.originalEvent.type&&(docEventType=args.originalEvent.type),angular.element(document).off("click touchstart",applyHideMenu),$elm.off("keyup",checkKeyUp),$elm.off("keydown",checkKeyDown),$timeout(function(){angular.element(document).on(docEventType,applyHideMenu),$elm.on("keyup",checkKeyUp),$elm.on("keydown",checkKeyDown)}),gridUtil.focus.bySelector($elm,"button[type=button]",!0)},$scope.hideMenu=function(event){$scope.shown&&($scope.shownMid=!1,$timeout(function(){$scope.shownMid||($scope.shown=!1,$scope.$emit("menu-hidden"))},200)),angular.element(document).off("click touchstart",applyHideMenu),$elm.off("keyup",checkKeyUp),$elm.off("keydown",checkKeyDown)},$scope.$on("hide-menu",function(event,args){$scope.hideMenu(event,args)}),$scope.$on("show-menu",function(event,args){$scope.showMenu(event,args)});var applyHideMenu=function(){$scope.shown&&$scope.$apply(function(){$scope.hideMenu()})},checkKeyUp=function(event){27===event.keyCode&&$scope.hideMenu()},checkKeyDown=function(event){var setFocus=function(elm){return elm.focus(),event.preventDefault(),!1};if(9===event.keyCode){var firstMenuItem,lastMenuItem,menuItemButtons=$elm[0].querySelectorAll("button:not(.ng-hide)");menuItemButtons.length>0&&(firstMenuItem=menuItemButtons[0],lastMenuItem=menuItemButtons[menuItemButtons.length-1],event.target!==lastMenuItem||event.shiftKey?event.target===firstMenuItem&&event.shiftKey&&setFocus(lastMenuItem):setFocus(firstMenuItem))}};void 0!==$scope.autoHide&&void 0!==$scope.autoHide||($scope.autoHide=!0),$scope.autoHide&&angular.element($window).on("resize",applyHideMenu),$scope.$on("$destroy",function(){angular.element(document).off("click touchstart",applyHideMenu)}),$scope.$on("$destroy",function(){angular.element($window).off("resize",applyHideMenu)}),uiGridCtrl&&$scope.$on("$destroy",uiGridCtrl.grid.api.core.on.scrollBegin($scope,applyHideMenu)),$scope.$on("$destroy",$scope.$on(uiGridConstants.events.ITEM_DRAGGING,applyHideMenu))}}}]).directive("uiGridMenuItem",["gridUtil","$compile","i18nService",function(gridUtil,$compile,i18nService){return{priority:0,scope:{name:"=",active:"=",action:"=",icon:"=",shown:"=",context:"=",templateUrl:"=",leaveOpen:"=",screenReaderOnly:"="},require:["?^uiGrid"],templateUrl:"ui-grid/uiGridMenuItem",replace:!1,compile:function(){return{pre:function($scope,$elm){$scope.templateUrl&&gridUtil.getTemplate($scope.templateUrl).then(function(contents){var template=angular.element(contents),newElm=$compile(template)($scope);$elm.replaceWith(newElm)})},post:function($scope,$elm,$attrs,controllers){var uiGridCtrl=controllers[0];void 0!==$scope.shown&&null!==$scope.shown||($scope.shown=function(){return!0}),$scope.itemShown=function(){var context={};return $scope.context&&(context.context=$scope.context),void 0!==uiGridCtrl&&uiGridCtrl&&(context.grid=uiGridCtrl.grid),$scope.shown.call(context)},$scope.itemAction=function($event,title){if($event.stopPropagation(),"function"==typeof $scope.action){var context={};$scope.context&&(context.context=$scope.context),void 0!==uiGridCtrl&&uiGridCtrl&&(context.grid=uiGridCtrl.grid),$scope.action.call(context,$event,title),$scope.leaveOpen?gridUtil.focus.bySelector(angular.element(gridUtil.closestElm($elm,".ui-grid-menu-items")),"button[type=button]",!0):$scope.$emit("hide-menu")}},$scope.i18n=i18nService.get()}}}}}])}(),function(){"use strict";var oneBinders=angular.module("ui.grid");angular.forEach([{tag:"Src",method:"attr"},{tag:"Text",method:"text"},{tag:"Href",method:"attr"},{tag:"Class",method:"addClass"},{tag:"Html",method:"html"},{tag:"Alt",method:"attr"},{tag:"Style",method:"css"},{tag:"Value",method:"attr"},{tag:"Id",method:"attr"},{tag:"Id",directiveName:"IdGrid",method:"attr",appendGridId:!0},{tag:"Title",method:"attr"},{tag:"Label",method:"attr",aria:!0},{tag:"Labelledby",method:"attr",aria:!0},{tag:"Labelledby",directiveName:"LabelledbyGrid",appendGridId:!0,method:"attr",aria:!0},{tag:"Describedby",method:"attr",aria:!0},{tag:"Describedby",directiveName:"DescribedbyGrid",appendGridId:!0,method:"attr",aria:!0}],function(v){var directiveName=(v.aria?"uiGridOneBindAria":"uiGridOneBind")+(v.directiveName?v.directiveName:v.tag);oneBinders.directive(directiveName,["gridUtil",function(gridUtil){return{restrict:"A",require:["?uiGrid","?^uiGrid"],link:function(scope,iElement,iAttrs,controllers){var appendGridId=function(val){var grid;if(scope.grid)grid=scope.grid;else if(scope.col&&scope.col.grid)grid=scope.col.grid;else if(!controllers.some(function(controller){if(controller&&controller.grid)return grid=controller.grid,!0}))throw gridUtil.logError("["+directiveName+"] A valid grid could not be found to bind id. Are you using this directive within the correct scope? Trying to generate id: [gridID]-"+val),new Error("No valid grid could be found");if(grid){new RegExp(grid.id.toString()).test(val)||(val=grid.id.toString()+"-"+val)}return val},rmWatcher=scope.$watch(iAttrs[directiveName],function(newV){if(newV){if(v.appendGridId){var newIdString=null;angular.forEach(newV.split(" "),function(s){newIdString=(newIdString?newIdString+" ":"")+appendGridId(s)}),newV=newIdString}switch(v.method){case"attr":v.aria?iElement[v.method]("aria-"+v.tag.toLowerCase(),newV):iElement[v.method](v.tag.toLowerCase(),newV);break;case"addClass":if(angular.isObject(newV)&&!angular.isArray(newV)){var results=[],nonNullFound=!1;if(angular.forEach(newV,function(value,index){null!==value&&void 0!==value&&(nonNullFound=!0,value&&results.push(index))}),!nonNullFound)return;newV=results}if(!newV)return;iElement.addClass(angular.isArray(newV)?newV.join(" "):newV);break;default:iElement[v.method](newV)}rmWatcher()}},!0)}}}])})}(),function(){"use strict";var module=angular.module("ui.grid");module.directive("uiGridRenderContainer",["$timeout","$document","uiGridConstants","gridUtil","ScrollEvent",function($timeout,$document,uiGridConstants,gridUtil,ScrollEvent){return{replace:!0,transclude:!0,templateUrl:"ui-grid/uiGridRenderContainer",require:["^uiGrid","uiGridRenderContainer"],scope:{containerId:"=",rowContainerName:"=",colContainerName:"=",bindScrollHorizontal:"=",bindScrollVertical:"=",enableVerticalScrollbar:"=",enableHorizontalScrollbar:"="},controller:"uiGridRenderContainer as RenderContainer",compile:function(){return{pre:function($scope,$elm,$attrs,controllers){var uiGridCtrl=controllers[0],containerCtrl=controllers[1],grid=$scope.grid=uiGridCtrl.grid;if(!$scope.rowContainerName)throw"No row render container name specified";if(!$scope.colContainerName)throw"No column render container name specified";if(!grid.renderContainers[$scope.rowContainerName])throw"Row render container '"+$scope.rowContainerName+"' is not registered.";if(!grid.renderContainers[$scope.colContainerName])throw"Column render container '"+$scope.colContainerName+"' is not registered.";var rowContainer=$scope.rowContainer=grid.renderContainers[$scope.rowContainerName],colContainer=$scope.colContainer=grid.renderContainers[$scope.colContainerName];containerCtrl.containerId=$scope.containerId,containerCtrl.rowContainer=rowContainer,containerCtrl.colContainer=colContainer},post:function($scope,$elm,$attrs,controllers){function update(){var ret="",canvasWidth=colContainer.canvasWidth,viewportWidth=colContainer.getViewportWidth(),canvasHeight=rowContainer.getCanvasHeight(),viewportHeight=rowContainer.getViewportHeight();colContainer.needsHScrollbarPlaceholder()&&(viewportHeight-=grid.scrollbarHeight);var headerViewportWidth,footerViewportWidth;return headerViewportWidth=footerViewportWidth=colContainer.getHeaderViewportWidth(),ret+="\n .grid"+uiGridCtrl.grid.id+" .ui-grid-render-container-"+$scope.containerId+" .ui-grid-canvas { width: "+canvasWidth+"px; height: "+canvasHeight+"px; }",ret+="\n .grid"+uiGridCtrl.grid.id+" .ui-grid-render-container-"+$scope.containerId+" .ui-grid-header-canvas { width: "+(canvasWidth+grid.scrollbarWidth)+"px; }",renderContainer.explicitHeaderCanvasHeight?ret+="\n .grid"+uiGridCtrl.grid.id+" .ui-grid-render-container-"+$scope.containerId+" .ui-grid-header-canvas { height: "+renderContainer.explicitHeaderCanvasHeight+"px; }":ret+="\n .grid"+uiGridCtrl.grid.id+" .ui-grid-render-container-"+$scope.containerId+" .ui-grid-header-canvas { height: inherit; }",ret+="\n .grid"+uiGridCtrl.grid.id+" .ui-grid-render-container-"+$scope.containerId+" .ui-grid-viewport { width: "+viewportWidth+"px; height: "+viewportHeight+"px; }",ret+="\n .grid"+uiGridCtrl.grid.id+" .ui-grid-render-container-"+$scope.containerId+" .ui-grid-header-viewport { width: "+headerViewportWidth+"px; }",ret+="\n .grid"+uiGridCtrl.grid.id+" .ui-grid-render-container-"+$scope.containerId+" .ui-grid-footer-canvas { width: "+(canvasWidth+grid.scrollbarWidth)+"px; }",ret+="\n .grid"+uiGridCtrl.grid.id+" .ui-grid-render-container-"+$scope.containerId+" .ui-grid-footer-viewport { width: "+footerViewportWidth+"px; }"}var uiGridCtrl=controllers[0],containerCtrl=controllers[1],grid=uiGridCtrl.grid,rowContainer=containerCtrl.rowContainer,colContainer=containerCtrl.colContainer,scrollTop=null,scrollLeft=null,renderContainer=grid.renderContainers[$scope.containerId];$elm.addClass("ui-grid-render-container-"+$scope.containerId),gridUtil.on.mousewheel($elm,function(event){var scrollEvent=new ScrollEvent(grid,rowContainer,colContainer,ScrollEvent.Sources.RenderContainerMouseWheel);if(0!==event.deltaY){var scrollYAmount=-1*event.deltaY*event.deltaFactor;scrollTop=containerCtrl.viewport[0].scrollTop,scrollEvent.verticalScrollLength=rowContainer.getVerticalScrollLength();var scrollYPercentage=(scrollTop+scrollYAmount)/scrollEvent.verticalScrollLength;scrollYPercentage>=1&&scrollTop<scrollEvent.verticalScrollLength&&(containerCtrl.viewport[0].scrollTop=scrollEvent.verticalScrollLength),scrollYPercentage<0?scrollYPercentage=0:scrollYPercentage>1&&(scrollYPercentage=1),scrollEvent.y={percentage:scrollYPercentage,pixels:scrollYAmount}}if(0!==event.deltaX){var scrollXAmount=event.deltaX*event.deltaFactor;scrollLeft=gridUtil.normalizeScrollLeft(containerCtrl.viewport,grid),scrollEvent.horizontalScrollLength=colContainer.getCanvasWidth()-colContainer.getViewportWidth();var scrollXPercentage=(scrollLeft+scrollXAmount)/scrollEvent.horizontalScrollLength;scrollXPercentage<0?scrollXPercentage=0:scrollXPercentage>1&&(scrollXPercentage=1),scrollEvent.x={percentage:scrollXPercentage,pixels:scrollXAmount}}0!==event.deltaY&&(scrollEvent.atTop(scrollTop)||scrollEvent.atBottom(scrollTop))||0!==event.deltaX&&(scrollEvent.atLeft(scrollLeft)||scrollEvent.atRight(scrollLeft))||(event.preventDefault(),event.stopPropagation(),scrollEvent.fireThrottledScrollingEvent("",scrollEvent))}),$elm.bind("$destroy",function(){$elm.unbind("keydown"),["touchstart","touchmove","touchend","keydown","wheel","mousewheel","DomMouseScroll","MozMousePixelScroll"].forEach(function(eventName){$elm.unbind(eventName)})}),uiGridCtrl.grid.registerStyleComputation({priority:6,func:update})}}}}}]),module.controller("uiGridRenderContainer",["$scope","gridUtil",function($scope,gridUtil){}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridRow",["gridUtil",function(gridUtil){return{replace:!0,require:["^uiGrid","^uiGridRenderContainer"],scope:{row:"=uiGridRow",rowRenderIndex:"="},compile:function(){return{pre:function($scope,$elm,$attrs,controllers){function compileTemplate(){$scope.row.getRowTemplateFn.then(function(compiledElementFn){var newScope=$scope.$new();compiledElementFn(newScope,function(newElm,scope){clonedElement&&(clonedElement.remove(),cloneScope.$destroy()),$elm.empty().append(newElm),clonedElement=newElm,cloneScope=newScope})})}var uiGridCtrl=controllers[0],containerCtrl=controllers[1];uiGridCtrl.grid;$scope.grid=uiGridCtrl.grid,$scope.colContainer=containerCtrl.colContainer;var clonedElement,cloneScope;compileTemplate(),$scope.$watch("row.getRowTemplateFn",function(newFunc,oldFunc){newFunc!==oldFunc&&compileTemplate()})},post:function($scope,$elm,$attrs,controllers){}}}}}])}(),function(){angular.module("ui.grid").directive("uiGridStyle",["gridUtil","$interpolate",function(gridUtil,$interpolate){return{link:function($scope,$elm,$attrs,uiGridCtrl){var interpolateFn=$interpolate($elm.text(),!0);interpolateFn&&$scope.$watch(interpolateFn,function(value){$elm.text(value)})}}}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridViewport",["gridUtil","ScrollEvent","uiGridConstants","$log",function(gridUtil,ScrollEvent,uiGridConstants,$log){return{replace:!0,scope:{},controllerAs:"Viewport",templateUrl:"ui-grid/uiGridViewport",require:["^uiGrid","^uiGridRenderContainer"],link:function($scope,$elm,$attrs,controllers){function scrollHandler(evt){var newScrollTop=$elm[0].scrollTop,newScrollLeft=gridUtil.normalizeScrollLeft($elm,grid),vertScrollPercentage=rowContainer.scrollVertical(newScrollTop),horizScrollPercentage=colContainer.scrollHorizontal(newScrollLeft),scrollEvent=new ScrollEvent(grid,rowContainer,colContainer,ScrollEvent.Sources.ViewPortScroll);scrollEvent.newScrollLeft=newScrollLeft,scrollEvent.newScrollTop=newScrollTop,horizScrollPercentage>-1&&(scrollEvent.x={percentage:horizScrollPercentage}),vertScrollPercentage>-1&&(scrollEvent.y={percentage:vertScrollPercentage}),grid.scrollContainers($scope.$parent.containerId,scrollEvent)}function syncVerticalScroll(scrollEvent){containerCtrl.prevScrollArgs=scrollEvent;var newScrollTop=scrollEvent.getNewScrollTop(rowContainer,containerCtrl.viewport);$elm[0].scrollTop=newScrollTop}function syncHorizontalScroll(scrollEvent){containerCtrl.prevScrollArgs=scrollEvent;var newScrollLeft=scrollEvent.getNewScrollLeft(colContainer,containerCtrl.viewport);$elm[0].scrollLeft=gridUtil.denormalizeScrollLeft(containerCtrl.viewport,newScrollLeft,grid)}function syncHorizontalHeader(scrollEvent){var newScrollLeft=scrollEvent.getNewScrollLeft(colContainer,containerCtrl.viewport);containerCtrl.headerViewport&&(containerCtrl.headerViewport.scrollLeft=gridUtil.denormalizeScrollLeft(containerCtrl.viewport,newScrollLeft,grid))}function syncHorizontalFooter(scrollEvent){var newScrollLeft=scrollEvent.getNewScrollLeft(colContainer,containerCtrl.viewport);containerCtrl.footerViewport&&(containerCtrl.footerViewport.scrollLeft=gridUtil.denormalizeScrollLeft(containerCtrl.viewport,newScrollLeft,grid))}var uiGridCtrl=controllers[0],containerCtrl=controllers[1];$scope.containerCtrl=containerCtrl;var rowContainer=containerCtrl.rowContainer,colContainer=containerCtrl.colContainer,grid=uiGridCtrl.grid;$scope.grid=uiGridCtrl.grid,$scope.rowContainer=containerCtrl.rowContainer,$scope.colContainer=containerCtrl.colContainer,containerCtrl.viewport=$elm,$elm.on("scroll",scrollHandler);$scope.$parent.bindScrollVertical&&grid.addVerticalScrollSync($scope.$parent.containerId,syncVerticalScroll),$scope.$parent.bindScrollHorizontal&&(grid.addHorizontalScrollSync($scope.$parent.containerId,syncHorizontalScroll),grid.addHorizontalScrollSync($scope.$parent.containerId+"header",syncHorizontalHeader),grid.addHorizontalScrollSync($scope.$parent.containerId+"footer",syncHorizontalFooter))},controller:["$scope",function($scope){this.rowStyle=function(index){var rowContainer=$scope.rowContainer,colContainer=$scope.colContainer,styles={};if(0===index&&0!==rowContainer.currentTopRow){var hiddenRowWidth=rowContainer.currentTopRow*rowContainer.grid.options.rowHeight;styles["margin-top"]=hiddenRowWidth+"px"}return 0!==colContainer.currentFirstColumn&&(colContainer.grid.isRTL()?styles["margin-right"]=colContainer.columnOffset+"px":styles["margin-left"]=colContainer.columnOffset+"px"),styles}}]}}])}(),function(){angular.module("ui.grid").directive("uiGridVisible",function(){return function($scope,$elm,$attr){$scope.$watch($attr.uiGridVisible,function(visible){$elm[visible?"removeClass":"addClass"]("ui-grid-invisible")})}})}(),function(){"use strict";function uiGridDirective($compile,$templateCache,$timeout,$window,gridUtil,uiGridConstants){return{templateUrl:"ui-grid/ui-grid",scope:{uiGrid:"="},replace:!0,transclude:!0,controller:"uiGridController",compile:function(){return{post:function($scope,$elm,$attrs,uiGridCtrl){function checkSize(){$elm[0].offsetWidth<=0&&sizeChecks<maxSizeChecks?(setTimeout(checkSize,sizeCheckInterval),sizeChecks++):$timeout(init)}function init(){grid.gridWidth=$scope.gridWidth=gridUtil.elementWidth($elm),grid.canvasWidth=uiGridCtrl.grid.gridWidth,grid.gridHeight=$scope.gridHeight=gridUtil.elementHeight($elm),grid.gridHeight<=grid.options.rowHeight&&grid.options.enableMinHeightCheck&&autoAdjustHeight(),grid.refreshCanvas(!0)}function autoAdjustHeight(){var contentHeight=grid.options.minRowsToShow*grid.options.rowHeight,headerHeight=grid.options.showHeader?grid.options.headerRowHeight:0,footerHeight=grid.calcFooterHeight(),scrollbarHeight=0;grid.options.enableHorizontalScrollbar===uiGridConstants.scrollbars.ALWAYS&&(scrollbarHeight=gridUtil.getScrollbarWidth());var maxNumberOfFilters=0;if(angular.forEach(grid.options.columnDefs,function(col){col.hasOwnProperty("filter")?maxNumberOfFilters<1&&(maxNumberOfFilters=1):col.hasOwnProperty("filters")&&maxNumberOfFilters<col.filters.length&&(maxNumberOfFilters=col.filters.length)}),grid.options.enableFiltering&&!maxNumberOfFilters){grid.options.columnDefs.length&&grid.options.columnDefs.every(function(col){return!1===col.enableFiltering})||(maxNumberOfFilters=1)}var filterHeight=maxNumberOfFilters*headerHeight,newHeight=headerHeight+contentHeight+footerHeight+scrollbarHeight+filterHeight;$elm.css("height",newHeight+"px"),grid.gridHeight=$scope.gridHeight=gridUtil.elementHeight($elm)}function gridResize($event){grid.gridWidth=$scope.gridWidth=gridUtil.elementWidth($elm),grid.gridHeight=$scope.gridHeight=gridUtil.elementHeight($elm),grid.refreshCanvas(!0)}var grid=uiGridCtrl.grid;uiGridCtrl.scrollbars=[],grid.element=$elm;var sizeCheckInterval=100,maxSizeChecks=20,sizeChecks=0;!function(){angular.element($window).on("resize",gridResize),$elm.on("$destroy",function(){angular.element($window).off("resize",gridResize)}),$scope.$watch(function(){return grid.hasLeftContainer()},function(newValue,oldValue){newValue!==oldValue&&grid.refreshCanvas(!0)}),$scope.$watch(function(){return grid.hasRightContainer()},function(newValue,oldValue){newValue!==oldValue&&grid.refreshCanvas(!0)})}(),init(),grid.renderingComplete(),checkSize()}}}}}angular.module("ui.grid").controller("uiGridController",["$scope","$element","$attrs","gridUtil","$q","uiGridConstants","$templateCache","gridClassFactory","$timeout","$parse","$compile",function($scope,$elm,$attrs,gridUtil,$q,uiGridConstants,$templateCache,gridClassFactory,$timeout,$parse,$compile){function columnDefsWatchFunction(n,o){n&&n!==o&&(self.grid.options.columnDefs=$scope.uiGrid.columnDefs,self.grid.buildColumns({orderByColumnDefs:!0}).then(function(){self.grid.preCompileCellTemplates(),self.grid.callDataChangeCallbacks(uiGridConstants.dataChange.COLUMN)}))}function dataWatchFunction(newData){var promises=[];if(self.grid.options.fastWatch&&(newData=angular.isString($scope.uiGrid.data)?self.grid.appScope[$scope.uiGrid.data]:$scope.uiGrid.data),mostRecentData=newData,newData){var hasColumns=self.grid.columns.length>(self.grid.rowHeaderColumns?self.grid.rowHeaderColumns.length:0);!hasColumns&&!$attrs.uiGridColumns&&0===self.grid.options.columnDefs.length&&newData.length>0&&self.grid.buildColumnDefsFromData(newData),!hasColumns&&(self.grid.options.columnDefs.length>0||newData.length>0)&&promises.push(self.grid.buildColumns().then(function(){self.grid.preCompileCellTemplates()})),$q.all(promises).then(function(){self.grid.modifyRows(mostRecentData).then(function(){self.grid.redrawInPlace(!0),$scope.$evalAsync(function(){self.grid.refreshCanvas(!0),self.grid.callDataChangeCallbacks(uiGridConstants.dataChange.ROW)})})})}}var self=this;self.grid=gridClassFactory.createGrid($scope.uiGrid),self.grid.appScope=self.grid.appScope||$scope.$parent,$elm.addClass("grid"+self.grid.id),self.grid.rtl="rtl"===gridUtil.getStyles($elm[0]).direction,$scope.grid=self.grid,$attrs.uiGridColumns&&$attrs.$observe("uiGridColumns",function(value){self.grid.options.columnDefs=value,self.grid.buildColumns().then(function(){self.grid.preCompileCellTemplates(),self.grid.refreshCanvas(!0)})});var deregFunctions=[];self.grid.options.fastWatch?(self.uiGrid=$scope.uiGrid,angular.isString($scope.uiGrid.data)?(deregFunctions.push($scope.$parent.$watch($scope.uiGrid.data,dataWatchFunction)),deregFunctions.push($scope.$parent.$watch(function(){return self.grid.appScope[$scope.uiGrid.data]?self.grid.appScope[$scope.uiGrid.data].length:void 0},dataWatchFunction))):(deregFunctions.push($scope.$parent.$watch(function(){return $scope.uiGrid.data},dataWatchFunction)),deregFunctions.push($scope.$parent.$watch(function(){return $scope.uiGrid.data.length},function(){dataWatchFunction($scope.uiGrid.data)}))),deregFunctions.push($scope.$parent.$watch(function(){return $scope.uiGrid.columnDefs},columnDefsWatchFunction)),deregFunctions.push($scope.$parent.$watch(function(){return $scope.uiGrid.columnDefs.length},function(){columnDefsWatchFunction($scope.uiGrid.columnDefs)}))):(angular.isString($scope.uiGrid.data)?deregFunctions.push($scope.$parent.$watchCollection($scope.uiGrid.data,dataWatchFunction)):deregFunctions.push($scope.$parent.$watchCollection(function(){return $scope.uiGrid.data},dataWatchFunction)),deregFunctions.push($scope.$parent.$watchCollection(function(){return $scope.uiGrid.columnDefs},columnDefsWatchFunction)));var mostRecentData,styleWatchDereg=$scope.$watch(function(){return self.grid.styleComputations},function(){self.grid.refreshCanvas(!0)});$scope.$on("$destroy",function(){deregFunctions.forEach(function(deregFn){deregFn()}),styleWatchDereg()}),self.fireEvent=function(eventName,args){void 0!==args&&void 0!==args||(args={}),void 0!==args.grid&&void 0!==args.grid||(args.grid=self.grid),$scope.$broadcast(eventName,args)},self.innerCompile=function(elm){$compile(elm)($scope)}}]),angular.module("ui.grid").directive("uiGrid",uiGridDirective),uiGridDirective.$inject=["$compile","$templateCache","$timeout","$window","gridUtil","uiGridConstants"]}(),function(){"use strict";angular.module("ui.grid").directive("uiGridPinnedContainer",["gridUtil",function(gridUtil){return{restrict:"EA",replace:!0,template:'<div class="ui-grid-pinned-container"><div ui-grid-render-container container-id="side" row-container-name="\'body\'" col-container-name="side" bind-scroll-vertical="true" class="{{ side }} ui-grid-render-container-{{ side }}"></div></div>',scope:{side:"=uiGridPinnedContainer"},require:"^uiGrid",compile:function(){return{post:function($scope,$elm,$attrs,uiGridCtrl){function monkeyPatchedGetViewportWidth(){var self=this,viewportWidth=0;self.visibleColumnCache.forEach(function(column){viewportWidth+=column.drawnWidth});var adjustment=self.getViewportAdjustment()
;return viewportWidth+=adjustment.width}function updateContainerWidth(){if("left"===$scope.side||"right"===$scope.side){for(var cols=grid.renderContainers[$scope.side].visibleColumnCache,width=0,i=0;i<cols.length;i++){var col=cols[i];width+=col.drawnWidth||col.width||0}return width}}function updateContainerDimensions(){var ret="";return"left"!==$scope.side&&"right"!==$scope.side||(myWidth=updateContainerWidth(),$elm.attr("style",null),ret+=".grid"+grid.id+" .ui-grid-pinned-container-"+$scope.side+", .grid"+grid.id+" .ui-grid-pinned-container-"+$scope.side+" .ui-grid-render-container-"+$scope.side+" .ui-grid-viewport { width: "+myWidth+"px; } "),ret}var grid=uiGridCtrl.grid,myWidth=0;$elm.addClass("ui-grid-pinned-container-"+$scope.side),"left"!==$scope.side&&"right"!==$scope.side||(grid.renderContainers[$scope.side].getViewportWidth=monkeyPatchedGetViewportWidth),grid.renderContainers.body.registerViewportAdjuster(function(adjustment){return myWidth=updateContainerWidth(),adjustment.width-=myWidth,adjustment.side=$scope.side,adjustment}),grid.registerStyleComputation({priority:15,func:updateContainerDimensions})}}}}}])}(),function(){angular.module("ui.grid").factory("Grid",["$q","$compile","$parse","gridUtil","uiGridConstants","GridOptions","GridColumn","GridRow","GridApi","rowSorter","rowSearcher","GridRenderContainer","$timeout","ScrollEvent",function($q,$compile,$parse,gridUtil,uiGridConstants,GridOptions,GridColumn,GridRow,GridApi,rowSorter,rowSearcher,GridRenderContainer,$timeout,ScrollEvent){function RowHashMap(){}var Grid=function(options){function vertical(scrollEvent){self.isScrollingVertically=!1,self.api.core.raise.scrollEnd(scrollEvent),self.scrollDirection=uiGridConstants.scrollDirection.NONE}function horizontal(scrollEvent){self.isScrollingHorizontally=!1,self.api.core.raise.scrollEnd(scrollEvent),self.scrollDirection=uiGridConstants.scrollDirection.NONE}var self=this;if(void 0===options||void 0===options.id||!options.id)throw new Error("No ID provided. An ID must be given when creating a grid.");if(!/^[_a-zA-Z0-9-]+$/.test(options.id))throw new Error("Grid id '"+options.id+'" is invalid. It must follow CSS selector syntax rules.');self.id=options.id,delete options.id,self.options=GridOptions.initialize(options),self.appScope=self.options.appScopeProvider,self.headerHeight=self.options.headerRowHeight,self.footerHeight=self.calcFooterHeight(),self.columnFooterHeight=self.calcColumnFooterHeight(),self.rtl=!1,self.gridHeight=0,self.gridWidth=0,self.columnBuilders=[],self.rowBuilders=[],self.rowsProcessors=[],self.columnsProcessors=[],self.styleComputations=[],self.viewportAdjusters=[],self.rowHeaderColumns=[],self.dataChangeCallbacks={},self.verticalScrollSyncCallBackFns={},self.horizontalScrollSyncCallBackFns={},self.renderContainers={},self.renderContainers.body=new GridRenderContainer("body",self),self.cellValueGetterCache={},self.getRowTemplateFn=null,self.rows=[],self.columns=[],self.isScrollingVertically=!1,self.isScrollingHorizontally=!1,self.scrollDirection=uiGridConstants.scrollDirection.NONE,self.disableScrolling=!1;var debouncedVertical=gridUtil.debounce(vertical,self.options.scrollDebounce),debouncedVerticalMinDelay=gridUtil.debounce(vertical,0),debouncedHorizontal=gridUtil.debounce(horizontal,self.options.scrollDebounce),debouncedHorizontalMinDelay=gridUtil.debounce(horizontal,0);self.flagScrollingVertically=function(scrollEvent){self.isScrollingVertically||self.isScrollingHorizontally||self.api.core.raise.scrollBegin(scrollEvent),self.isScrollingVertically=!0,0!==self.options.scrollDebounce&&scrollEvent.withDelay?debouncedVertical(scrollEvent):debouncedVerticalMinDelay(scrollEvent)},self.flagScrollingHorizontally=function(scrollEvent){self.isScrollingVertically||self.isScrollingHorizontally||self.api.core.raise.scrollBegin(scrollEvent),self.isScrollingHorizontally=!0,0!==self.options.scrollDebounce&&scrollEvent.withDelay?debouncedHorizontal(scrollEvent):debouncedHorizontalMinDelay(scrollEvent)},self.scrollbarHeight=0,self.scrollbarWidth=0,self.options.enableHorizontalScrollbar===uiGridConstants.scrollbars.ALWAYS&&(self.scrollbarHeight=gridUtil.getScrollbarWidth()),self.options.enableVerticalScrollbar===uiGridConstants.scrollbars.ALWAYS&&(self.scrollbarWidth=gridUtil.getScrollbarWidth()),self.api=new GridApi(self),self.api.registerMethod("core","refresh",this.refresh),self.api.registerMethod("core","queueGridRefresh",this.queueGridRefresh),self.api.registerMethod("core","refreshRows",this.refreshRows),self.api.registerMethod("core","queueRefresh",this.queueRefresh),self.api.registerMethod("core","handleWindowResize",this.handleWindowResize),self.api.registerMethod("core","addRowHeaderColumn",this.addRowHeaderColumn),self.api.registerMethod("core","scrollToIfNecessary",function(gridRow,gridCol){return self.scrollToIfNecessary(gridRow,gridCol)}),self.api.registerMethod("core","scrollTo",function(rowEntity,colDef){return self.scrollTo(rowEntity,colDef)}),self.api.registerMethod("core","registerRowsProcessor",this.registerRowsProcessor),self.api.registerMethod("core","registerColumnsProcessor",this.registerColumnsProcessor),self.api.registerMethod("core","sortHandleNulls",rowSorter.handleNulls),self.api.registerEvent("core","sortChanged"),self.api.registerEvent("core","columnVisibilityChanged"),self.api.registerMethod("core","notifyDataChange",this.notifyDataChange),self.api.registerMethod("core","clearAllFilters",this.clearAllFilters),self.registerDataChangeCallback(self.columnRefreshCallback,[uiGridConstants.dataChange.COLUMN]),self.registerDataChangeCallback(self.processRowsCallback,[uiGridConstants.dataChange.EDIT]),self.registerDataChangeCallback(self.updateFooterHeightCallback,[uiGridConstants.dataChange.OPTIONS]),self.registerStyleComputation({priority:10,func:self.getFooterStyles})};Grid.prototype.calcFooterHeight=function(){if(!this.hasFooter())return 0;var height=0;return this.options.showGridFooter&&(height+=this.options.gridFooterHeight),height+=this.calcColumnFooterHeight()},Grid.prototype.calcColumnFooterHeight=function(){var height=0;return this.options.showColumnFooter&&(height+=this.options.columnFooterHeight),height},Grid.prototype.getFooterStyles=function(){var style=".grid"+this.id+" .ui-grid-footer-aggregates-row { height: "+this.options.columnFooterHeight+"px; }";return style+=" .grid"+this.id+" .ui-grid-footer-info { height: "+this.options.gridFooterHeight+"px; }"},Grid.prototype.hasFooter=function(){return this.options.showGridFooter||this.options.showColumnFooter},Grid.prototype.isRTL=function(){return this.rtl},Grid.prototype.registerColumnBuilder=function(columnBuilder){this.columnBuilders.push(columnBuilder)},Grid.prototype.buildColumnDefsFromData=function(dataRows){this.options.columnDefs=gridUtil.getColumnsFromData(dataRows,this.options.excludeProperties)},Grid.prototype.registerRowBuilder=function(rowBuilder){this.rowBuilders.push(rowBuilder)},Grid.prototype.registerDataChangeCallback=function(callback,types,_this){var uid=gridUtil.nextUid();types||(types=[uiGridConstants.dataChange.ALL]),Array.isArray(types)||gridUtil.logError("Expected types to be an array or null in registerDataChangeCallback, value passed was: "+types),this.dataChangeCallbacks[uid]={callback:callback,types:types,_this:_this};var self=this;return function(){delete self.dataChangeCallbacks[uid]}},Grid.prototype.callDataChangeCallbacks=function(type,options){angular.forEach(this.dataChangeCallbacks,function(callback,uid){-1===callback.types.indexOf(uiGridConstants.dataChange.ALL)&&-1===callback.types.indexOf(type)&&type!==uiGridConstants.dataChange.ALL||(callback._this?callback.callback.apply(callback._this,this):callback.callback(this))},this)},Grid.prototype.notifyDataChange=function(type){var constants=uiGridConstants.dataChange;type===constants.ALL||type===constants.COLUMN||type===constants.EDIT||type===constants.ROW||type===constants.OPTIONS?this.callDataChangeCallbacks(type):gridUtil.logError("Notified of a data change, but the type was not recognised, so no action taken, type was: "+type)},Grid.prototype.columnRefreshCallback=function(grid){grid.buildColumns(),grid.queueGridRefresh()},Grid.prototype.processRowsCallback=function(grid){grid.queueGridRefresh()},Grid.prototype.updateFooterHeightCallback=function(grid){grid.footerHeight=grid.calcFooterHeight(),grid.columnFooterHeight=grid.calcColumnFooterHeight()},Grid.prototype.getColumn=function(name){var columns=this.columns.filter(function(column){return column.colDef.name===name});return columns.length>0?columns[0]:null},Grid.prototype.getColDef=function(name){var colDefs=this.options.columnDefs.filter(function(colDef){return colDef.name===name});return colDefs.length>0?colDefs[0]:null},Grid.prototype.assignTypes=function(){var self=this;self.options.columnDefs.forEach(function(colDef,index){if(!colDef.type){var col=new GridColumn(colDef,index,self),firstRow=self.rows.length>0?self.rows[0]:null;colDef.type=firstRow?gridUtil.guessType(self.getCellValue(firstRow,col)):"string"}})},Grid.prototype.isRowHeaderColumn=function(column){return-1!==this.rowHeaderColumns.indexOf(column)},Grid.prototype.addRowHeaderColumn=function(colDef,order){var self=this;void 0===order&&(order=0);var rowHeaderCol=new GridColumn(colDef,gridUtil.nextUid(),self);rowHeaderCol.isRowHeader=!0,self.isRTL()?(self.createRightContainer(),rowHeaderCol.renderContainer="right"):(self.createLeftContainer(),rowHeaderCol.renderContainer="left"),self.columnBuilders[0](colDef,rowHeaderCol,self.options).then(function(){rowHeaderCol.enableFiltering=!1,rowHeaderCol.enableSorting=!1,rowHeaderCol.enableHiding=!1,rowHeaderCol.headerPriority=order,self.rowHeaderColumns.push(rowHeaderCol),self.rowHeaderColumns=self.rowHeaderColumns.sort(function(a,b){return a.headerPriority-b.headerPriority}),self.buildColumns().then(function(){self.preCompileCellTemplates(),self.queueGridRefresh()})})},Grid.prototype.getOnlyDataColumns=function(){var self=this,cols=[];return self.columns.forEach(function(col){-1===self.rowHeaderColumns.indexOf(col)&&cols.push(col)}),cols},Grid.prototype.buildColumns=function(opts){var options={orderByColumnDefs:!1};angular.extend(options,opts);var i,self=this,builderPromises=[],headerOffset=self.rowHeaderColumns.length;for(i=0;i<self.columns.length;i++)self.getColDef(self.columns[i].name)||(self.columns.splice(i,1),i--);for(var j=self.rowHeaderColumns.length-1;j>=0;j--)self.columns.unshift(self.rowHeaderColumns[j]);if(self.options.columnDefs.forEach(function(colDef,index){self.preprocessColDef(colDef);var col=self.getColumn(colDef.name);col?col.updateColumnDef(colDef,!1):(col=new GridColumn(colDef,gridUtil.nextUid(),self),self.columns.splice(index+headerOffset,0,col)),self.columnBuilders.forEach(function(builder){builderPromises.push(builder.call(self,colDef,col,self.options))})}),options.orderByColumnDefs){var columnCache=self.columns.slice(0),len=Math.min(self.options.columnDefs.length,self.columns.length);for(i=0;i<len;i++)self.columns[i+headerOffset].name!==self.options.columnDefs[i].name?columnCache[i+headerOffset]=self.getColumn(self.options.columnDefs[i].name):columnCache[i+headerOffset]=self.columns[i+headerOffset];self.columns.length=0,Array.prototype.splice.apply(self.columns,[0,0].concat(columnCache))}return $q.all(builderPromises).then(function(){self.rows.length>0&&self.assignTypes()})},Grid.prototype.preCompileCellTemplate=function(col){var self=this,html=col.cellTemplate.replace(uiGridConstants.MODEL_COL_FIELD,self.getQualifiedColField(col));html=html.replace(uiGridConstants.COL_FIELD,"grid.getCellValue(row, col)");var compiledElementFn=$compile(html);col.compiledElementFn=compiledElementFn,col.compiledElementFnDefer&&col.compiledElementFnDefer.resolve(col.compiledElementFn)},Grid.prototype.preCompileCellTemplates=function(){var self=this;self.columns.forEach(function(col){col.cellTemplate?self.preCompileCellTemplate(col):col.cellTemplatePromise&&col.cellTemplatePromise.then(function(){self.preCompileCellTemplate(col)})})},Grid.prototype.getQualifiedColField=function(col){return col.field===uiGridConstants.ENTITY_BINDING?"row.entity":gridUtil.preEval("row.entity."+col.field)},Grid.prototype.createLeftContainer=function(){this.hasLeftContainer()||(this.renderContainers.left=new GridRenderContainer("left",this,{disableColumnOffset:!0}))},Grid.prototype.createRightContainer=function(){this.hasRightContainer()||(this.renderContainers.right=new GridRenderContainer("right",this,{disableColumnOffset:!0}))},Grid.prototype.hasLeftContainer=function(){return void 0!==this.renderContainers.left},Grid.prototype.hasRightContainer=function(){return void 0!==this.renderContainers.right},Grid.prototype.preprocessColDef=function(colDef){var self=this;if(!colDef.field&&!colDef.name)throw new Error("colDef.name or colDef.field property is required");if(void 0===colDef.name&&void 0!==colDef.field){for(var newName=colDef.field,counter=2;self.getColumn(newName);)newName=colDef.field+counter.toString(),counter++;colDef.name=newName}},Grid.prototype.newInN=function(o,n,oAccessor,nAccessor){for(var self=this,t=[],i=0;i<n.length;i++){for(var nV=nAccessor?n[i][nAccessor]:n[i],found=!1,j=0;j<o.length;j++){var oV=oAccessor?o[j][oAccessor]:o[j];if(self.options.rowEquality(nV,oV)){found=!0;break}}found||t.push(nV)}return t},Grid.prototype.getRow=function(rowEntity,lookInRows){var self=this;lookInRows=void 0===lookInRows?self.rows:lookInRows;var rows=lookInRows.filter(function(row){return self.options.rowEquality(row.entity,rowEntity)});return rows.length>0?rows[0]:null},Grid.prototype.modifyRows=function(newRawData){var self=this,oldRows=self.rows.slice(0),oldRowHash=self.rowHashMap||self.createRowHashMap();self.rowHashMap=self.createRowHashMap(),self.rows.length=0,newRawData.forEach(function(newEntity,i){var newRow;newRow=self.options.enableRowHashing?oldRowHash.get(newEntity):self.getRow(newEntity,oldRows),newRow||(newRow=self.processRowBuilders(new GridRow(newEntity,i,self))),self.rows.push(newRow),self.rowHashMap.put(newEntity,newRow)}),self.assignTypes();var p1=$q.when(self.processRowsProcessors(self.rows)).then(function(renderableRows){return self.setVisibleRows(renderableRows)}),p2=$q.when(self.processColumnsProcessors(self.columns)).then(function(renderableColumns){return self.setVisibleColumns(renderableColumns)});return $q.all([p1,p2])},Grid.prototype.addRows=function(newRawData){for(var self=this,existingRowCount=self.rows.length,i=0;i<newRawData.length;i++){var newRow=self.processRowBuilders(new GridRow(newRawData[i],i+existingRowCount,self));if(self.options.enableRowHashing){var found=self.rowHashMap.get(newRow.entity);found&&(found.row=newRow)}self.rows.push(newRow)}},Grid.prototype.processRowBuilders=function(gridRow){var self=this;return self.rowBuilders.forEach(function(builder){builder.call(self,gridRow,self.options)}),gridRow},Grid.prototype.registerStyleComputation=function(styleComputationInfo){this.styleComputations.push(styleComputationInfo)},Grid.prototype.registerRowsProcessor=function(processor,priority){if(!angular.isFunction(processor))throw"Attempt to register non-function rows processor: "+processor;this.rowsProcessors.push({processor:processor,priority:priority}),this.rowsProcessors.sort(function(a,b){return a.priority-b.priority})},Grid.prototype.removeRowsProcessor=function(processor){var idx=-1;this.rowsProcessors.forEach(function(rowsProcessor,index){rowsProcessor.processor===processor&&(idx=index)}),-1!==idx&&this.rowsProcessors.splice(idx,1)},Grid.prototype.processRowsProcessors=function(renderableRows){function startProcessor(i,renderedRowsToProcess){var processor=self.rowsProcessors[i].processor;return $q.when(processor.call(self,renderedRowsToProcess,self.columns)).then(function(processedRows){if(!processedRows)throw"Processor at index "+i+" did not return a set of renderable rows";if(!angular.isArray(processedRows))throw"Processor at index "+i+" did not return an array";if(++i<=self.rowsProcessors.length-1)return startProcessor(i,processedRows);finished.resolve(processedRows)})}var self=this,myRenderableRows=renderableRows.slice(0);if(0===self.rowsProcessors.length)return $q.when(myRenderableRows);var finished=$q.defer();return startProcessor(0,myRenderableRows),finished.promise},Grid.prototype.setVisibleRows=function(rows){var self=this;for(var i in self.renderContainers){var container=self.renderContainers[i];container.canvasHeightShouldUpdate=!0,void 0===container.visibleRowCache?container.visibleRowCache=[]:container.visibleRowCache.length=0}for(var ri=0;ri<rows.length;ri++){var row=rows[ri],targetContainer=void 0!==row.renderContainer&&row.renderContainer?row.renderContainer:"body";row.visible&&self.renderContainers[targetContainer].visibleRowCache.push(row)}self.api.core.raise.rowsVisibleChanged(this.api),self.api.core.raise.rowsRendered(this.api)},Grid.prototype.registerColumnsProcessor=function(processor,priority){if(!angular.isFunction(processor))throw"Attempt to register non-function rows processor: "+processor;this.columnsProcessors.push({processor:processor,priority:priority}),this.columnsProcessors.sort(function(a,b){return a.priority-b.priority})},Grid.prototype.removeColumnsProcessor=function(processor){var idx=this.columnsProcessors.indexOf(processor);void 0!==idx&&void 0!==idx&&this.columnsProcessors.splice(idx,1)},Grid.prototype.processColumnsProcessors=function(renderableColumns){function startProcessor(i,renderedColumnsToProcess){var processor=self.columnsProcessors[i].processor;return $q.when(processor.call(self,renderedColumnsToProcess,self.rows)).then(function(processedColumns){if(!processedColumns)throw"Processor at index "+i+" did not return a set of renderable rows";if(!angular.isArray(processedColumns))throw"Processor at index "+i+" did not return an array";if(++i<=self.columnsProcessors.length-1)return startProcessor(i,myRenderableColumns);finished.resolve(myRenderableColumns)})}var self=this,myRenderableColumns=renderableColumns.slice(0);if(0===self.columnsProcessors.length)return $q.when(myRenderableColumns);var finished=$q.defer();return startProcessor(0,myRenderableColumns),finished.promise},Grid.prototype.setVisibleColumns=function(columns){var self=this;for(var i in self.renderContainers){self.renderContainers[i].visibleColumnCache.length=0}for(var ci=0;ci<columns.length;ci++){var column=columns[ci];column.visible&&(void 0!==column.renderContainer&&column.renderContainer?self.renderContainers[column.renderContainer].visibleColumnCache.push(column):self.renderContainers.body.visibleColumnCache.push(column))}},Grid.prototype.handleWindowResize=function($event){var self=this;return self.gridWidth=gridUtil.elementWidth(self.element),self.gridHeight=gridUtil.elementHeight(self.element),self.queueRefresh()},Grid.prototype.queueRefresh=function(){var self=this;return self.refreshCanceller&&$timeout.cancel(self.refreshCanceller),self.refreshCanceller=$timeout(function(){self.refreshCanvas(!0)}),self.refreshCanceller.then(function(){self.refreshCanceller=null}),self.refreshCanceller},Grid.prototype.queueGridRefresh=function(){var self=this;return self.gridRefreshCanceller&&$timeout.cancel(self.gridRefreshCanceller),self.gridRefreshCanceller=$timeout(function(){self.refresh(!0)}),self.gridRefreshCanceller.then(function(){self.gridRefreshCanceller=null}),self.gridRefreshCanceller},Grid.prototype.updateCanvasHeight=function(){var self=this;for(var containerId in self.renderContainers)if(self.renderContainers.hasOwnProperty(containerId)){var container=self.renderContainers[containerId];container.canvasHeightShouldUpdate=!0}},Grid.prototype.buildStyles=function(){var self=this;self.customStyles="",self.styleComputations.sort(function(a,b){return null===a.priority?1:null===b.priority?-1:null===a.priority&&null===b.priority?0:a.priority-b.priority}).forEach(function(compInfo){var ret=compInfo.func.call(self);angular.isString(ret)&&(self.customStyles+="\n"+ret)})},Grid.prototype.minColumnsToRender=function(){var self=this,viewport=this.getViewportWidth(),min=0,totalWidth=0;return self.columns.forEach(function(col,i){if(totalWidth<viewport)totalWidth+=col.drawnWidth,min++;else{for(var currWidth=0,j=i;j>=i-min;j--)currWidth+=self.columns[j].drawnWidth;currWidth<viewport&&min++}}),min},Grid.prototype.getBodyHeight=function(){return this.getViewportHeight()},Grid.prototype.getViewportHeight=function(){var self=this,viewPortHeight=this.gridHeight-this.headerHeight-this.footerHeight;return viewPortHeight+=self.getViewportAdjustment().height},Grid.prototype.getViewportWidth=function(){var self=this,viewPortWidth=this.gridWidth;return viewPortWidth+=self.getViewportAdjustment().width},Grid.prototype.getHeaderViewportWidth=function(){return this.getViewportWidth()},Grid.prototype.addVerticalScrollSync=function(containerId,callBackFn){this.verticalScrollSyncCallBackFns[containerId]=callBackFn},Grid.prototype.addHorizontalScrollSync=function(containerId,callBackFn){this.horizontalScrollSyncCallBackFns[containerId]=callBackFn},Grid.prototype.scrollContainers=function(sourceContainerId,scrollEvent){if(scrollEvent.y){var verts=["body","left","right"];this.flagScrollingVertically(scrollEvent),"body"===sourceContainerId?verts=["left","right"]:"left"===sourceContainerId?verts=["body","right"]:"right"===sourceContainerId&&(verts=["body","left"]);for(var i=0;i<verts.length;i++){var id=verts[i];this.verticalScrollSyncCallBackFns[id]&&this.verticalScrollSyncCallBackFns[id](scrollEvent)}}if(scrollEvent.x){var horizs=["body","bodyheader","bodyfooter"];this.flagScrollingHorizontally(scrollEvent),"body"===sourceContainerId&&(horizs=["bodyheader","bodyfooter"]);for(var j=0;j<horizs.length;j++){var idh=horizs[j];this.horizontalScrollSyncCallBackFns[idh]&&this.horizontalScrollSyncCallBackFns[idh](scrollEvent)}}},Grid.prototype.registerViewportAdjuster=function(func){this.viewportAdjusters.push(func)},Grid.prototype.removeViewportAdjuster=function(func){var idx=this.viewportAdjusters.indexOf(func);void 0!==idx&&void 0!==idx&&this.viewportAdjusters.splice(idx,1)},Grid.prototype.getViewportAdjustment=function(){var self=this,adjustment={height:0,width:0};return self.viewportAdjusters.forEach(function(func){adjustment=func.call(this,adjustment)}),adjustment},Grid.prototype.getVisibleRowCount=function(){return this.renderContainers.body.visibleRowCache.length},Grid.prototype.getVisibleRows=function(){return this.renderContainers.body.visibleRowCache},Grid.prototype.getVisibleColumnCount=function(){return this.renderContainers.body.visibleColumnCache.length},Grid.prototype.searchRows=function(renderableRows){return rowSearcher.search(this,renderableRows,this.columns)},Grid.prototype.sortByColumn=function(renderableRows){return rowSorter.sort(this,renderableRows,this.columns)},Grid.prototype.getCellValue=function(row,col){return void 0!==row.entity["$$"+col.uid]?row.entity["$$"+col.uid].rendered:this.options.flatEntityAccess&&void 0!==col.field?row.entity[col.field]:(col.cellValueGetterCache||(col.cellValueGetterCache=$parse(row.getEntityQualifiedColField(col))),col.cellValueGetterCache(row))},Grid.prototype.getCellDisplayValue=function(row,col){if(!col.cellDisplayGetterCache){var custom_filter=col.cellFilter?" | "+col.cellFilter:"";void 0!==row.entity["$$"+col.uid]?col.cellDisplayGetterCache=$parse(row.entity["$$"+col.uid].rendered+custom_filter):this.options.flatEntityAccess&&void 0!==col.field?col.cellDisplayGetterCache=$parse(row.entity[col.field]+custom_filter):col.cellDisplayGetterCache=$parse(row.getEntityQualifiedColField(col)+custom_filter)}return col.cellDisplayGetterCache(row)},Grid.prototype.getNextColumnSortPriority=function(){var self=this,p=0;return self.columns.forEach(function(col){col.sort&&void 0!==col.sort.priority&&col.sort.priority>=p&&(p=col.sort.priority+1)}),p},Grid.prototype.resetColumnSorting=function(excludeCol){this.columns.forEach(function(col){col===excludeCol||col.suppressRemoveSort||(col.sort={})})},Grid.prototype.getColumnSorting=function(){var myCols,self=this,sortedCols=[];return myCols=self.columns.slice(0),myCols.sort(rowSorter.prioritySort).forEach(function(col){col.sort&&void 0!==col.sort.direction&&col.sort.direction&&(col.sort.direction===uiGridConstants.ASC||col.sort.direction===uiGridConstants.DESC)&&sortedCols.push(col)}),sortedCols},Grid.prototype.sortColumn=function(column,directionOrAdd,add){var self=this,direction=null;if(void 0===column||!column)throw new Error("No column parameter provided");if("boolean"==typeof directionOrAdd?add=directionOrAdd:direction=directionOrAdd,add?void 0===column.sort.priority&&(column.sort.priority=self.getNextColumnSortPriority()):(self.resetColumnSorting(column),column.sort.priority=void 0,column.sort.priority=self.getNextColumnSortPriority()),direction)column.sort.direction=direction;else{var i=column.sortDirectionCycle.indexOf(column.sort.direction?column.sort.direction:null);i=(i+1)%column.sortDirectionCycle.length,column.colDef&&column.suppressRemoveSort&&!column.sortDirectionCycle[i]&&(i=(i+1)%column.sortDirectionCycle.length),column.sortDirectionCycle[i]?column.sort.direction=column.sortDirectionCycle[i]:removeSortOfColumn(column,self)}return self.api.core.raise.sortChanged(self,self.getColumnSorting()),$q.when(column)};var removeSortOfColumn=function(column,grid){grid.columns.forEach(function(col){col.sort&&void 0!==col.sort.priority&&col.sort.priority>column.sort.priority&&(col.sort.priority-=1)}),column.sort={}};return Grid.prototype.renderingComplete=function(){angular.isFunction(this.options.onRegisterApi)&&this.options.onRegisterApi(this.api),this.api.core.raise.renderingComplete(this.api)},Grid.prototype.createRowHashMap=function(){var self=this,hashMap=new RowHashMap;return hashMap.grid=self,hashMap},Grid.prototype.refresh=function(rowsAltered){var self=this,p1=self.processRowsProcessors(self.rows).then(function(renderableRows){self.setVisibleRows(renderableRows)}),p2=self.processColumnsProcessors(self.columns).then(function(renderableColumns){self.setVisibleColumns(renderableColumns)});return $q.all([p1,p2]).then(function(){self.redrawInPlace(rowsAltered),self.refreshCanvas(!0)})},Grid.prototype.refreshRows=function(){var self=this;return self.processRowsProcessors(self.rows).then(function(renderableRows){self.setVisibleRows(renderableRows),self.redrawInPlace(),self.refreshCanvas(!0)})},Grid.prototype.refreshCanvas=function(buildStyles){var self=this;buildStyles&&self.buildStyles();var p=$q.defer(),containerHeadersToRecalc=[];for(var containerId in self.renderContainers)if(self.renderContainers.hasOwnProperty(containerId)){var container=self.renderContainers[containerId];if(null===container.canvasWidth||isNaN(container.canvasWidth))continue;(container.header||container.headerCanvas)&&(container.explicitHeaderHeight=container.explicitHeaderHeight||null,container.explicitHeaderCanvasHeight=container.explicitHeaderCanvasHeight||null,containerHeadersToRecalc.push(container))}return containerHeadersToRecalc.length>0?(buildStyles&&self.buildStyles(),$timeout(function(){var i,container,rebuildStyles=!1,maxHeaderHeight=0,maxHeaderCanvasHeight=0,getHeight=function(oldVal,newVal){return oldVal!==newVal&&(rebuildStyles=!0),newVal};for(i=0;i<containerHeadersToRecalc.length;i++)if(container=containerHeadersToRecalc[i],null!==container.canvasWidth&&!isNaN(container.canvasWidth)){if(container.header){var headerHeight=container.headerHeight=getHeight(container.headerHeight,parseInt(gridUtil.outerElementHeight(container.header),10)),topBorder=gridUtil.getBorderSize(container.header,"top"),bottomBorder=gridUtil.getBorderSize(container.header,"bottom"),innerHeaderHeight=parseInt(headerHeight-topBorder-bottomBorder,10);innerHeaderHeight=innerHeaderHeight<0?0:innerHeaderHeight,container.innerHeaderHeight=innerHeaderHeight,!container.explicitHeaderHeight&&innerHeaderHeight>maxHeaderHeight&&(maxHeaderHeight=innerHeaderHeight)}if(container.headerCanvas){var headerCanvasHeight=container.headerCanvasHeight=getHeight(container.headerCanvasHeight,parseInt(gridUtil.outerElementHeight(container.headerCanvas),10));!container.explicitHeaderCanvasHeight&&headerCanvasHeight>maxHeaderCanvasHeight&&(maxHeaderCanvasHeight=headerCanvasHeight)}}for(i=0;i<containerHeadersToRecalc.length;i++)container=containerHeadersToRecalc[i],maxHeaderHeight>0&&void 0!==container.headerHeight&&null!==container.headerHeight&&(container.explicitHeaderHeight||container.headerHeight<maxHeaderHeight)&&(container.explicitHeaderHeight=getHeight(container.explicitHeaderHeight,maxHeaderHeight)),maxHeaderCanvasHeight>0&&void 0!==container.headerCanvasHeight&&null!==container.headerCanvasHeight&&(container.explicitHeaderCanvasHeight||container.headerCanvasHeight<maxHeaderCanvasHeight)&&(container.explicitHeaderCanvasHeight=getHeight(container.explicitHeaderCanvasHeight,maxHeaderCanvasHeight));buildStyles&&rebuildStyles&&self.buildStyles(),p.resolve()})):$timeout(function(){p.resolve()}),p.promise},Grid.prototype.redrawInPlace=function(rowsAdded){var self=this;for(var i in self.renderContainers){var container=self.renderContainers[i];rowsAdded?(container.adjustRows(container.prevScrollTop,null),container.adjustColumns(container.prevScrollLeft,null)):(container.adjustRows(null,container.prevScrolltopPercentage),container.adjustColumns(null,container.prevScrollleftPercentage))}},Grid.prototype.hasLeftContainerColumns=function(){return this.hasLeftContainer()&&this.renderContainers.left.renderedColumns.length>0},Grid.prototype.hasRightContainerColumns=function(){return this.hasRightContainer()&&this.renderContainers.right.renderedColumns.length>0},Grid.prototype.scrollToIfNecessary=function(gridRow,gridCol){var self=this,scrollEvent=new ScrollEvent(self,"uiGrid.scrollToIfNecessary"),visRowCache=self.renderContainers.body.visibleRowCache,visColCache=self.renderContainers.body.visibleColumnCache,topBound=self.renderContainers.body.prevScrollTop+self.headerHeight;topBound=topBound<0?0:topBound;var leftBound=self.renderContainers.body.prevScrollLeft,bottomBound=self.renderContainers.body.prevScrollTop+self.gridHeight-self.renderContainers.body.headerHeight-self.footerHeight-self.scrollbarWidth,rightBound=self.renderContainers.body.prevScrollLeft+Math.ceil(self.renderContainers.body.getViewportWidth());if(null!==gridRow){var seekRowIndex=visRowCache.indexOf(gridRow),scrollLength=self.renderContainers.body.getCanvasHeight()-self.renderContainers.body.getViewportHeight(),pixelsToSeeRow=seekRowIndex*self.options.rowHeight+self.headerHeight;pixelsToSeeRow=pixelsToSeeRow<0?0:pixelsToSeeRow;var scrollPixels,percentage;pixelsToSeeRow<topBound?(scrollPixels=self.renderContainers.body.prevScrollTop-(topBound-pixelsToSeeRow),percentage=scrollPixels/scrollLength,scrollEvent.y={percentage:percentage}):pixelsToSeeRow>bottomBound&&(scrollPixels=pixelsToSeeRow-bottomBound+self.renderContainers.body.prevScrollTop,percentage=scrollPixels/scrollLength,scrollEvent.y={percentage:percentage})}if(null!==gridCol){for(var seekColumnIndex=visColCache.indexOf(gridCol),horizScrollLength=self.renderContainers.body.getCanvasWidth()-self.renderContainers.body.getViewportWidth(),columnLeftEdge=0,i=0;i<seekColumnIndex;i++){columnLeftEdge+=visColCache[i].drawnWidth}columnLeftEdge=columnLeftEdge<0?0:columnLeftEdge;var columnRightEdge=columnLeftEdge+gridCol.drawnWidth;columnRightEdge=columnRightEdge<0?0:columnRightEdge;var horizScrollPixels,horizPercentage;columnLeftEdge<leftBound?(horizScrollPixels=self.renderContainers.body.prevScrollLeft-(leftBound-columnLeftEdge),horizPercentage=horizScrollPixels/horizScrollLength,horizPercentage=horizPercentage>1?1:horizPercentage,scrollEvent.x={percentage:horizPercentage}):columnRightEdge>rightBound&&(horizScrollPixels=columnRightEdge-rightBound+self.renderContainers.body.prevScrollLeft,horizPercentage=horizScrollPixels/horizScrollLength,horizPercentage=horizPercentage>1?1:horizPercentage,scrollEvent.x={percentage:horizPercentage})}var deferred=$q.defer();if(scrollEvent.y||scrollEvent.x){
scrollEvent.withDelay=!1,self.scrollContainers("",scrollEvent);var dereg=self.api.core.on.scrollEnd(null,function(){deferred.resolve(scrollEvent),dereg()})}else deferred.resolve();return deferred.promise},Grid.prototype.scrollTo=function(rowEntity,colDef){var gridRow=null,gridCol=null;return null!==rowEntity&&void 0!==rowEntity&&(gridRow=this.getRow(rowEntity)),null!==colDef&&void 0!==colDef&&(gridCol=this.getColumn(colDef.name?colDef.name:colDef.field)),this.scrollToIfNecessary(gridRow,gridCol)},Grid.prototype.clearAllFilters=function(refreshRows,clearConditions,clearFlags){if(void 0===refreshRows&&(refreshRows=!0),void 0===clearConditions&&(clearConditions=!1),void 0===clearFlags&&(clearFlags=!1),this.columns.forEach(function(column){column.filters.forEach(function(filter){filter.term=void 0,clearConditions&&(filter.condition=void 0),clearFlags&&(filter.flags=void 0)})}),refreshRows)return this.refreshRows()},RowHashMap.prototype={put:function(key,value){this[this.grid.options.rowIdentity(key)]=value},get:function(key){return this[this.grid.options.rowIdentity(key)]},remove:function(key){var value=this[key=this.grid.options.rowIdentity(key)];return delete this[key],value}},Grid}])}(),function(){angular.module("ui.grid").factory("GridApi",["$q","$rootScope","gridUtil","uiGridConstants","GridRow","uiGridGridMenuService",function($q,$rootScope,gridUtil,uiGridConstants,GridRow,uiGridGridMenuService){function registerEventWithAngular(eventId,handler,grid,_this){return $rootScope.$on(eventId,function(event){var args=Array.prototype.slice.call(arguments);args.splice(0,1),handler.apply(_this||grid.api,args)})}var GridApi=function(grid){this.grid=grid,this.listeners=[],this.registerEvent("core","renderingComplete"),this.registerEvent("core","filterChanged"),this.registerMethod("core","setRowInvisible",GridRow.prototype.setRowInvisible),this.registerMethod("core","clearRowInvisible",GridRow.prototype.clearRowInvisible),this.registerMethod("core","getVisibleRows",this.grid.getVisibleRows),this.registerEvent("core","rowsVisibleChanged"),this.registerEvent("core","rowsRendered"),this.registerEvent("core","scrollBegin"),this.registerEvent("core","scrollEnd"),this.registerEvent("core","canvasHeightChanged"),this.registerEvent("core","gridDimensionChanged")};return GridApi.prototype.suppressEvents=function(listenerFuncs,callBackFn){var self=this,listeners=angular.isArray(listenerFuncs)?listenerFuncs:[listenerFuncs],foundListeners=self.listeners.filter(function(listener){return listeners.some(function(l){return listener.handler===l})});foundListeners.forEach(function(l){l.dereg()}),callBackFn(),foundListeners.forEach(function(l){l.dereg=registerEventWithAngular(l.eventId,l.handler,self.grid,l._this)})},GridApi.prototype.registerEvent=function(featureName,eventName){var self=this;self[featureName]||(self[featureName]={});var feature=self[featureName];feature.on||(feature.on={},feature.raise={});var eventId=self.grid.id+featureName+eventName;feature.raise[eventName]=function(){$rootScope.$emit.apply($rootScope,[eventId].concat(Array.prototype.slice.call(arguments)))},feature.on[eventName]=function(scope,handler,_this){if(null!==scope&&void 0===scope.$on)return void gridUtil.logError("asked to listen on "+featureName+".on."+eventName+" but scope wasn't passed in the input parameters.  It is legitimate to pass null, but you've passed something else, so you probably forgot to provide scope rather than did it deliberately, not registering");var deregAngularOn=registerEventWithAngular(eventId,handler,self.grid,_this),listener={handler:handler,dereg:deregAngularOn,eventId:eventId,scope:scope,_this:_this};self.listeners.push(listener);var removeListener=function(){listener.dereg();var index=self.listeners.indexOf(listener);self.listeners.splice(index,1)};return scope&&scope.$on("$destroy",function(){removeListener()}),removeListener}},GridApi.prototype.registerEventsFromObject=function(eventObjectMap){var self=this,features=[];angular.forEach(eventObjectMap,function(featProp,featPropName){var feature={name:featPropName,events:[]};angular.forEach(featProp,function(prop,propName){feature.events.push(propName)}),features.push(feature)}),features.forEach(function(feature){feature.events.forEach(function(event){self.registerEvent(feature.name,event)})})},GridApi.prototype.registerMethod=function(featureName,methodName,callBackFn,_this){this[featureName]||(this[featureName]={}),this[featureName][methodName]=gridUtil.createBoundedWrapper(_this||this.grid,callBackFn)},GridApi.prototype.registerMethodsFromObject=function(methodMap,_this){var self=this,features=[];angular.forEach(methodMap,function(featProp,featPropName){var feature={name:featPropName,methods:[]};angular.forEach(featProp,function(prop,propName){feature.methods.push({name:propName,fn:prop})}),features.push(feature)}),features.forEach(function(feature){feature.methods.forEach(function(method){self.registerMethod(feature.name,method.name,method.fn,_this)})})},GridApi}])}(),function(){angular.module("ui.grid").factory("GridColumn",["gridUtil","uiGridConstants","i18nService",function(gridUtil,uiGridConstants,i18nService){function GridColumn(colDef,uid,grid){var self=this;self.grid=grid,self.uid=uid,self.updateColumnDef(colDef,!0),self.aggregationValue=void 0,self.updateAggregationValue=function(){if(!self.aggregationType)return void(self.aggregationValue=void 0);var result=0,visibleRows=self.grid.getVisibleRows(),cellValues=function(){var values=[];return visibleRows.forEach(function(row){var cellValue=self.grid.getCellValue(row,self),cellNumber=Number(cellValue);isNaN(cellNumber)||values.push(cellNumber)}),values};angular.isFunction(self.aggregationType)?self.aggregationValue=self.aggregationType(visibleRows,self):self.aggregationType===uiGridConstants.aggregationTypes.count?self.aggregationValue=self.grid.getVisibleRowCount():self.aggregationType===uiGridConstants.aggregationTypes.sum?(cellValues().forEach(function(value){result+=value}),self.aggregationValue=result):self.aggregationType===uiGridConstants.aggregationTypes.avg?(cellValues().forEach(function(value){result+=value}),result/=cellValues().length,self.aggregationValue=result):self.aggregationType===uiGridConstants.aggregationTypes.min?self.aggregationValue=Math.min.apply(null,cellValues()):self.aggregationType===uiGridConstants.aggregationTypes.max?self.aggregationValue=Math.max.apply(null,cellValues()):self.aggregationValue=" "},this.getAggregationValue=function(){return self.aggregationValue}}return GridColumn.prototype.hideColumn=function(){this.colDef.visible=!1},GridColumn.prototype.setPropertyOrDefault=function(colDef,propName,defaultValue){var self=this;void 0!==colDef[propName]&&colDef[propName]?self[propName]=colDef[propName]:void 0!==self[propName]?self[propName]=self[propName]:self[propName]=defaultValue||{}},GridColumn.prototype.updateColumnDef=function(colDef,isNew){var self=this;if(self.colDef=colDef,void 0===colDef.name)throw new Error("colDef.name is required for column at index "+self.grid.options.columnDefs.indexOf(colDef));if(self.displayName=void 0===colDef.displayName?gridUtil.readableColumnName(colDef.name):colDef.displayName,!angular.isNumber(self.width)||!self.hasCustomWidth||colDef.allowCustomWidthOverride){var colDefWidth=colDef.width,parseErrorMsg="Cannot parse column width '"+colDefWidth+"' for column named '"+colDef.name+"'";if(self.hasCustomWidth=!1,angular.isString(colDefWidth)||angular.isNumber(colDefWidth))if(angular.isString(colDefWidth))if(gridUtil.endsWith(colDefWidth,"%")){var percentStr=colDefWidth.replace(/%/g,""),percent=parseInt(percentStr,10);if(isNaN(percent))throw new Error(parseErrorMsg);self.width=colDefWidth}else if(colDefWidth.match(/^(\d+)$/))self.width=parseInt(colDefWidth.match(/^(\d+)$/)[1],10);else{if(!colDefWidth.match(/^\*+$/))throw new Error(parseErrorMsg);self.width=colDefWidth}else self.width=colDefWidth;else self.width="*"}["minWidth","maxWidth"].forEach(function(name){var minOrMaxWidth=colDef[name],parseErrorMsg="Cannot parse column "+name+" '"+minOrMaxWidth+"' for column named '"+colDef.name+"'";if(angular.isString(minOrMaxWidth)||angular.isNumber(minOrMaxWidth))if(angular.isString(minOrMaxWidth)){if(!minOrMaxWidth.match(/^(\d+)$/))throw new Error(parseErrorMsg);self[name]=parseInt(minOrMaxWidth.match(/^(\d+)$/)[1],10)}else self[name]=minOrMaxWidth;else self[name]="minWidth"===name?30:9e3}),self.field=void 0===colDef.field?colDef.name:colDef.field,"string"!=typeof self.field&&gridUtil.logError("Field is not a string, this is likely to break the code, Field is: "+self.field),self.name=colDef.name,self.displayName=void 0===colDef.displayName?gridUtil.readableColumnName(colDef.name):colDef.displayName,self.aggregationType=angular.isDefined(colDef.aggregationType)?colDef.aggregationType:null,self.footerCellTemplate=angular.isDefined(colDef.footerCellTemplate)?colDef.footerCellTemplate:null,void 0===colDef.cellTooltip||!1===colDef.cellTooltip?self.cellTooltip=!1:!0===colDef.cellTooltip?self.cellTooltip=function(row,col){return self.grid.getCellValue(row,col)}:"function"==typeof colDef.cellTooltip?self.cellTooltip=colDef.cellTooltip:self.cellTooltip=function(row,col){return col.colDef.cellTooltip},void 0===colDef.headerTooltip||!1===colDef.headerTooltip?self.headerTooltip=!1:!0===colDef.headerTooltip?self.headerTooltip=function(col){return col.displayName}:"function"==typeof colDef.headerTooltip?self.headerTooltip=colDef.headerTooltip:self.headerTooltip=function(col){return col.colDef.headerTooltip},self.footerCellClass=colDef.footerCellClass,self.cellClass=colDef.cellClass,self.headerCellClass=colDef.headerCellClass,self.cellFilter=colDef.cellFilter?colDef.cellFilter:"",self.sortCellFiltered=!!colDef.sortCellFiltered,self.filterCellFiltered=!!colDef.filterCellFiltered,self.headerCellFilter=colDef.headerCellFilter?colDef.headerCellFilter:"",self.footerCellFilter=colDef.footerCellFilter?colDef.footerCellFilter:"",self.visible=gridUtil.isNullOrUndefined(colDef.visible)||colDef.visible,self.headerClass=colDef.headerClass,self.enableSorting=void 0===colDef.enableSorting||colDef.enableSorting,self.sortingAlgorithm=colDef.sortingAlgorithm,self.sortDirectionCycle=void 0!==colDef.sortDirectionCycle?colDef.sortDirectionCycle:[null,uiGridConstants.ASC,uiGridConstants.DESC],void 0===self.suppressRemoveSort&&(self.suppressRemoveSort=void 0!==colDef.suppressRemoveSort&&colDef.suppressRemoveSort),self.enableFiltering=void 0===colDef.enableFiltering||colDef.enableFiltering,self.setPropertyOrDefault(colDef,"menuItems",[]),isNew&&self.setPropertyOrDefault(colDef,"sort");var defaultFilters=[];colDef.filter?defaultFilters.push(colDef.filter):colDef.filters?defaultFilters=colDef.filters:defaultFilters.push({}),isNew?(self.setPropertyOrDefault(colDef,"filter"),self.setPropertyOrDefault(colDef,"filters",defaultFilters)):self.filters.length===defaultFilters.length&&self.filters.forEach(function(filter,index){void 0!==defaultFilters[index].placeholder&&(filter.placeholder=defaultFilters[index].placeholder),void 0!==defaultFilters[index].ariaLabel&&(filter.ariaLabel=defaultFilters[index].ariaLabel),void 0!==defaultFilters[index].flags&&(filter.flags=defaultFilters[index].flags),void 0!==defaultFilters[index].type&&(filter.type=defaultFilters[index].type),void 0!==defaultFilters[index].selectOptions&&(filter.selectOptions=defaultFilters[index].selectOptions)})},GridColumn.prototype.unsort=function(){this.sort={},this.grid.api.core.raise.sortChanged(this.grid,this.grid.getColumnSorting())},GridColumn.prototype.getColClass=function(prefixDot){var cls=uiGridConstants.COL_CLASS_PREFIX+this.uid;return prefixDot?"."+cls:cls},GridColumn.prototype.isPinnedLeft=function(){return"left"===this.renderContainer},GridColumn.prototype.isPinnedRight=function(){return"right"===this.renderContainer},GridColumn.prototype.getColClassDefinition=function(){return" .grid"+this.grid.id+" "+this.getColClass(!0)+" { min-width: "+this.drawnWidth+"px; max-width: "+this.drawnWidth+"px; }"},GridColumn.prototype.getRenderContainer=function(){var self=this,containerId=self.renderContainer;return null!==containerId&&""!==containerId&&void 0!==containerId||(containerId="body"),self.grid.renderContainers[containerId]},GridColumn.prototype.showColumn=function(){this.colDef.visible=!0},GridColumn.prototype.getAggregationText=function(){var self=this;if(self.colDef.aggregationHideLabel)return"";if(self.colDef.aggregationLabel)return self.colDef.aggregationLabel;switch(self.colDef.aggregationType){case uiGridConstants.aggregationTypes.count:return i18nService.getSafeText("aggregation.count");case uiGridConstants.aggregationTypes.sum:return i18nService.getSafeText("aggregation.sum");case uiGridConstants.aggregationTypes.avg:return i18nService.getSafeText("aggregation.avg");case uiGridConstants.aggregationTypes.min:return i18nService.getSafeText("aggregation.min");case uiGridConstants.aggregationTypes.max:return i18nService.getSafeText("aggregation.max");default:return""}},GridColumn.prototype.getCellTemplate=function(){return this.cellTemplatePromise},GridColumn.prototype.getCompiledElementFn=function(){return this.compiledElementFnDefer.promise},GridColumn}])}(),function(){angular.module("ui.grid").factory("GridOptions",["gridUtil","uiGridConstants",function(gridUtil,uiGridConstants){return{initialize:function(baseOptions){return baseOptions.onRegisterApi=baseOptions.onRegisterApi||angular.noop(),baseOptions.data=baseOptions.data||[],baseOptions.columnDefs=baseOptions.columnDefs||[],baseOptions.excludeProperties=baseOptions.excludeProperties||["$$hashKey"],baseOptions.enableRowHashing=!1!==baseOptions.enableRowHashing,baseOptions.rowIdentity=baseOptions.rowIdentity||function(row){return gridUtil.hashKey(row)},baseOptions.getRowIdentity=baseOptions.getRowIdentity||function(row){return row.$$hashKey},baseOptions.flatEntityAccess=!0===baseOptions.flatEntityAccess,baseOptions.showHeader=void 0===baseOptions.showHeader||baseOptions.showHeader,baseOptions.showHeader?baseOptions.headerRowHeight=void 0!==baseOptions.headerRowHeight?baseOptions.headerRowHeight:30:baseOptions.headerRowHeight=0,baseOptions.rowHeight=baseOptions.rowHeight||30,baseOptions.minRowsToShow=void 0!==baseOptions.minRowsToShow?baseOptions.minRowsToShow:10,baseOptions.showGridFooter=!0===baseOptions.showGridFooter,baseOptions.showColumnFooter=!0===baseOptions.showColumnFooter,baseOptions.columnFooterHeight=void 0!==baseOptions.columnFooterHeight?baseOptions.columnFooterHeight:30,baseOptions.gridFooterHeight=void 0!==baseOptions.gridFooterHeight?baseOptions.gridFooterHeight:30,baseOptions.columnWidth=void 0!==baseOptions.columnWidth?baseOptions.columnWidth:50,baseOptions.maxVisibleColumnCount=void 0!==baseOptions.maxVisibleColumnCount?baseOptions.maxVisibleColumnCount:200,baseOptions.virtualizationThreshold=void 0!==baseOptions.virtualizationThreshold?baseOptions.virtualizationThreshold:20,baseOptions.columnVirtualizationThreshold=void 0!==baseOptions.columnVirtualizationThreshold?baseOptions.columnVirtualizationThreshold:10,baseOptions.excessRows=void 0!==baseOptions.excessRows?baseOptions.excessRows:4,baseOptions.scrollThreshold=void 0!==baseOptions.scrollThreshold?baseOptions.scrollThreshold:4,baseOptions.excessColumns=void 0!==baseOptions.excessColumns?baseOptions.excessColumns:4,baseOptions.horizontalScrollThreshold=void 0!==baseOptions.horizontalScrollThreshold?baseOptions.horizontalScrollThreshold:2,baseOptions.aggregationCalcThrottle=void 0!==baseOptions.aggregationCalcThrottle?baseOptions.aggregationCalcThrottle:500,baseOptions.wheelScrollThrottle=void 0!==baseOptions.wheelScrollThrottle?baseOptions.wheelScrollThrottle:70,baseOptions.scrollDebounce=void 0!==baseOptions.scrollDebounce?baseOptions.scrollDebounce:300,baseOptions.enableSorting=!1!==baseOptions.enableSorting,baseOptions.enableFiltering=!0===baseOptions.enableFiltering,baseOptions.enableColumnMenus=!1!==baseOptions.enableColumnMenus,baseOptions.enableVerticalScrollbar=void 0!==baseOptions.enableVerticalScrollbar?baseOptions.enableVerticalScrollbar:uiGridConstants.scrollbars.ALWAYS,baseOptions.enableHorizontalScrollbar=void 0!==baseOptions.enableHorizontalScrollbar?baseOptions.enableHorizontalScrollbar:uiGridConstants.scrollbars.ALWAYS,baseOptions.enableMinHeightCheck=!1!==baseOptions.enableMinHeightCheck,baseOptions.minimumColumnSize=void 0!==baseOptions.minimumColumnSize?baseOptions.minimumColumnSize:10,baseOptions.rowEquality=baseOptions.rowEquality||function(entityA,entityB){return entityA===entityB},baseOptions.headerTemplate=baseOptions.headerTemplate||null,baseOptions.footerTemplate=baseOptions.footerTemplate||"ui-grid/ui-grid-footer",baseOptions.gridFooterTemplate=baseOptions.gridFooterTemplate||"ui-grid/ui-grid-grid-footer",baseOptions.rowTemplate=baseOptions.rowTemplate||"ui-grid/ui-grid-row",baseOptions.appScopeProvider=baseOptions.appScopeProvider||null,baseOptions}}}])}(),function(){angular.module("ui.grid").factory("GridRenderContainer",["gridUtil","uiGridConstants",function(gridUtil,uiGridConstants){function GridRenderContainer(name,grid,options){var self=this;self.name=name,self.grid=grid,self.visibleRowCache=[],self.visibleColumnCache=[],self.renderedRows=[],self.renderedColumns=[],self.prevScrollTop=0,self.prevScrolltopPercentage=0,self.prevRowScrollIndex=0,self.prevScrollLeft=0,self.prevScrollleftPercentage=0,self.prevColumnScrollIndex=0,self.columnStyles="",self.viewportAdjusters=[],self.hasHScrollbar=!1,self.hasVScrollbar=!1,self.canvasHeightShouldUpdate=!0,self.$$canvasHeight=0,options&&angular.isObject(options)&&angular.extend(self,options),grid.registerStyleComputation({priority:5,func:function(){return self.updateColumnWidths(),self.columnStyles}})}return GridRenderContainer.prototype.reset=function(){this.visibleColumnCache.length=0,this.visibleRowCache.length=0,this.renderedRows.length=0,this.renderedColumns.length=0},GridRenderContainer.prototype.containsColumn=function(col){return-1!==this.visibleColumnCache.indexOf(col)},GridRenderContainer.prototype.minRowsToRender=function(){for(var self=this,minRows=0,rowAddedHeight=0,viewPortHeight=self.getViewportHeight(),i=self.visibleRowCache.length-1;rowAddedHeight<viewPortHeight&&i>=0;i--)rowAddedHeight+=self.visibleRowCache[i].height,minRows++;return minRows},GridRenderContainer.prototype.minColumnsToRender=function(){for(var self=this,viewportWidth=this.getViewportWidth(),min=0,totalWidth=0,i=0;i<self.visibleColumnCache.length;i++){var col=self.visibleColumnCache[i];if(totalWidth<viewportWidth)totalWidth+=col.drawnWidth?col.drawnWidth:0,min++;else{for(var currWidth=0,j=i;j>=i-min;j--)currWidth+=self.visibleColumnCache[j].drawnWidth?self.visibleColumnCache[j].drawnWidth:0;currWidth<viewportWidth&&min++}}return min},GridRenderContainer.prototype.getVisibleRowCount=function(){return this.visibleRowCache.length},GridRenderContainer.prototype.registerViewportAdjuster=function(func){this.viewportAdjusters.push(func)},GridRenderContainer.prototype.removeViewportAdjuster=function(func){var idx=this.viewportAdjusters.indexOf(func);idx>-1&&this.viewportAdjusters.splice(idx,1)},GridRenderContainer.prototype.getViewportAdjustment=function(){var self=this,adjustment={height:0,width:0};return self.viewportAdjusters.forEach(function(func){adjustment=func.call(this,adjustment)}),adjustment},GridRenderContainer.prototype.getMargin=function(side){var self=this,amount=0;return self.viewportAdjusters.forEach(function(func){var adjustment=func.call(this,{height:0,width:0});adjustment.side&&adjustment.side===side&&(amount+=-1*adjustment.width)}),amount},GridRenderContainer.prototype.getViewportHeight=function(){var self=this,headerHeight=self.headerHeight?self.headerHeight:self.grid.headerHeight,viewPortHeight=self.grid.gridHeight-headerHeight-self.grid.footerHeight;return viewPortHeight+=self.getViewportAdjustment().height},GridRenderContainer.prototype.getViewportWidth=function(){var self=this,viewportWidth=self.grid.gridWidth;return viewportWidth+=self.getViewportAdjustment().width},GridRenderContainer.prototype.getHeaderViewportWidth=function(){return this.getViewportWidth()},GridRenderContainer.prototype.getCanvasHeight=function(){var self=this;if(!self.canvasHeightShouldUpdate)return self.$$canvasHeight;var oldCanvasHeight=self.$$canvasHeight;return self.$$canvasHeight=0,self.visibleRowCache.forEach(function(row){self.$$canvasHeight+=row.height}),self.canvasHeightShouldUpdate=!1,self.grid.api.core.raise.canvasHeightChanged(oldCanvasHeight,self.$$canvasHeight),self.$$canvasHeight},GridRenderContainer.prototype.getVerticalScrollLength=function(){return this.getCanvasHeight()-this.getViewportHeight()+this.grid.scrollbarHeight},GridRenderContainer.prototype.getHorizontalScrollLength=function(){return this.getCanvasWidth()-this.getViewportWidth()+this.grid.scrollbarWidth},GridRenderContainer.prototype.getCanvasWidth=function(){return this.canvasWidth},GridRenderContainer.prototype.setRenderedRows=function(newRows){this.renderedRows.length=newRows.length;for(var i=0;i<newRows.length;i++)this.renderedRows[i]=newRows[i]},GridRenderContainer.prototype.setRenderedColumns=function(newColumns){this.renderedColumns.length=newColumns.length;for(var i=0;i<newColumns.length;i++)this.renderedColumns[i]=newColumns[i];this.updateColumnOffset()},GridRenderContainer.prototype.updateColumnOffset=function(){for(var hiddenColumnsWidth=0,i=0;i<this.currentFirstColumn;i++)hiddenColumnsWidth+=this.visibleColumnCache[i].drawnWidth;this.columnOffset=hiddenColumnsWidth},GridRenderContainer.prototype.scrollVertical=function(newScrollTop){var vertScrollPercentage=-1;if(newScrollTop!==this.prevScrollTop){var yDiff=newScrollTop-this.prevScrollTop;yDiff>0&&(this.grid.scrollDirection=uiGridConstants.scrollDirection.DOWN),yDiff<0&&(this.grid.scrollDirection=uiGridConstants.scrollDirection.UP);return vertScrollPercentage=newScrollTop/this.getVerticalScrollLength(),vertScrollPercentage>1&&(vertScrollPercentage=1),vertScrollPercentage<0&&(vertScrollPercentage=0),this.adjustScrollVertical(newScrollTop,vertScrollPercentage),vertScrollPercentage}},GridRenderContainer.prototype.scrollHorizontal=function(newScrollLeft){var horizScrollPercentage=-1;if(newScrollLeft!==this.prevScrollLeft){var xDiff=newScrollLeft-this.prevScrollLeft;xDiff>0&&(this.grid.scrollDirection=uiGridConstants.scrollDirection.RIGHT),xDiff<0&&(this.grid.scrollDirection=uiGridConstants.scrollDirection.LEFT);var horizScrollLength=this.getHorizontalScrollLength();return horizScrollPercentage=0!==horizScrollLength?newScrollLeft/horizScrollLength:0,this.adjustScrollHorizontal(newScrollLeft,horizScrollPercentage),horizScrollPercentage}},GridRenderContainer.prototype.adjustScrollVertical=function(scrollTop,scrollPercentage,force){(this.prevScrollTop!==scrollTop||force)&&(void 0!==scrollTop&&void 0!==scrollTop&&null!==scrollTop||(scrollTop=(this.getCanvasHeight()-this.getViewportHeight())*scrollPercentage),this.adjustRows(scrollTop,scrollPercentage,!1),this.prevScrollTop=scrollTop,this.prevScrolltopPercentage=scrollPercentage,this.grid.queueRefresh())},GridRenderContainer.prototype.adjustScrollHorizontal=function(scrollLeft,scrollPercentage,force){(this.prevScrollLeft!==scrollLeft||force)&&(void 0!==scrollLeft&&void 0!==scrollLeft&&null!==scrollLeft||(scrollLeft=(this.getCanvasWidth()-this.getViewportWidth())*scrollPercentage),this.adjustColumns(scrollLeft,scrollPercentage),this.prevScrollLeft=scrollLeft,this.prevScrollleftPercentage=scrollPercentage,this.grid.queueRefresh())},GridRenderContainer.prototype.adjustRows=function(scrollTop,scrollPercentage,postDataLoaded){var self=this,minRows=self.minRowsToRender(),rowCache=self.visibleRowCache,maxRowIndex=rowCache.length-minRows;void 0!==scrollPercentage&&null!==scrollPercentage||!scrollTop||(scrollPercentage=scrollTop/self.getVerticalScrollLength());var rowIndex=Math.ceil(Math.min(maxRowIndex,maxRowIndex*scrollPercentage));rowIndex>maxRowIndex&&(rowIndex=maxRowIndex);var newRange=[];if(rowCache.length>self.grid.options.virtualizationThreshold){if(void 0!==scrollTop&&null!==scrollTop){if(!self.grid.suppressParentScrollDown&&self.prevScrollTop<scrollTop&&rowIndex<self.prevRowScrollIndex+self.grid.options.scrollThreshold&&rowIndex<maxRowIndex)return;if(!self.grid.suppressParentScrollUp&&self.prevScrollTop>scrollTop&&rowIndex>self.prevRowScrollIndex-self.grid.options.scrollThreshold&&rowIndex<maxRowIndex)return}var rangeStart={},rangeEnd={};rangeStart=Math.max(0,rowIndex-self.grid.options.excessRows),rangeEnd=Math.min(rowCache.length,rowIndex+minRows+self.grid.options.excessRows),newRange=[rangeStart,rangeEnd]}else{var maxLen=self.visibleRowCache.length;newRange=[0,Math.max(maxLen,minRows+self.grid.options.excessRows)]}self.updateViewableRowRange(newRange),self.prevRowScrollIndex=rowIndex},GridRenderContainer.prototype.adjustColumns=function(scrollLeft,scrollPercentage){var self=this,minCols=self.minColumnsToRender(),columnCache=self.visibleColumnCache,maxColumnIndex=columnCache.length-minCols;void 0!==scrollPercentage&&null!==scrollPercentage||!scrollLeft||(scrollPercentage=scrollLeft/self.getHorizontalScrollLength());var colIndex=Math.ceil(Math.min(maxColumnIndex,maxColumnIndex*scrollPercentage));colIndex>maxColumnIndex&&(colIndex=maxColumnIndex);var newRange=[];if(columnCache.length>self.grid.options.columnVirtualizationThreshold&&self.getCanvasWidth()>self.getViewportWidth()){newRange=[Math.max(0,colIndex-self.grid.options.excessColumns),Math.min(columnCache.length,colIndex+minCols+self.grid.options.excessColumns)]}else{var maxLen=self.visibleColumnCache.length;newRange=[0,Math.max(maxLen,minCols+self.grid.options.excessColumns)]}self.updateViewableColumnRange(newRange),self.prevColumnScrollIndex=colIndex},GridRenderContainer.prototype.updateViewableRowRange=function(renderedRange){var rowArr=this.visibleRowCache.slice(renderedRange[0],renderedRange[1]);this.currentTopRow=renderedRange[0],this.setRenderedRows(rowArr)},GridRenderContainer.prototype.updateViewableColumnRange=function(renderedRange){var columnArr=this.visibleColumnCache.slice(renderedRange[0],renderedRange[1]);this.currentFirstColumn=renderedRange[0],this.setRenderedColumns(columnArr)},GridRenderContainer.prototype.headerCellWrapperStyle=function(){var self=this;if(0!==self.currentFirstColumn){var offset=self.columnOffset;return self.grid.isRTL()?{"margin-right":offset+"px"}:{"margin-left":offset+"px"}}return null},GridRenderContainer.prototype.updateColumnWidths=function(){var self=this,asterisksArray=[],asteriskNum=0,usedWidthSum=0,ret="",availableWidth=self.grid.getViewportWidth()-self.grid.scrollbarWidth,columnCache=[];angular.forEach(self.grid.renderContainers,function(container,name){columnCache=columnCache.concat(container.visibleColumnCache)}),columnCache.forEach(function(column,i){var width=0;column.visible&&(angular.isNumber(column.width)?(width=parseInt(column.width,10),usedWidthSum+=width,column.drawnWidth=width):gridUtil.endsWith(column.width,"%")?(width=parseInt(parseInt(column.width.replace(/%/g,""),10)/100*availableWidth),width>column.maxWidth&&(width=column.maxWidth),width<column.minWidth&&(width=column.minWidth),usedWidthSum+=width,column.drawnWidth=width):angular.isString(column.width)&&-1!==column.width.indexOf("*")&&(asteriskNum+=column.width.length,asterisksArray.push(column)))});var remainingWidth=availableWidth-usedWidthSum;if(asterisksArray.length>0){var asteriskVal=remainingWidth/asteriskNum;asterisksArray.forEach(function(column){var width=parseInt(column.width.length*asteriskVal,10);width>column.maxWidth&&(width=column.maxWidth),width<column.minWidth&&(width=column.minWidth),usedWidthSum+=width,column.drawnWidth=width})}for(var processColumnUpwards=function(column){column.drawnWidth<column.maxWidth&&leftoverWidth>0&&(column.drawnWidth++,usedWidthSum++,leftoverWidth--,columnsToChange=!0)},leftoverWidth=availableWidth-usedWidthSum,columnsToChange=!0;leftoverWidth>0&&columnsToChange;)columnsToChange=!1,asterisksArray.forEach(processColumnUpwards);var processColumnDownwards=function(column){column.drawnWidth>column.minWidth&&excessWidth>0&&(column.drawnWidth--,usedWidthSum--,excessWidth--,columnsToChange=!0)},excessWidth=usedWidthSum-availableWidth;for(columnsToChange=!0;excessWidth>0&&columnsToChange;)columnsToChange=!1,asterisksArray.forEach(processColumnDownwards);var canvasWidth=0;self.visibleColumnCache.forEach(function(column){column.visible&&(canvasWidth+=column.drawnWidth)}),columnCache.forEach(function(column){ret+=column.getColClassDefinition()}),self.canvasWidth=canvasWidth,this.columnStyles=ret},GridRenderContainer.prototype.needsHScrollbarPlaceholder=function(){return this.grid.options.enableHorizontalScrollbar&&!this.hasHScrollbar&&!this.grid.disableScrolling},GridRenderContainer.prototype.getViewportStyle=function(){var self=this,styles={};return self.hasHScrollbar=!1,self.hasVScrollbar=!1,self.grid.disableScrolling?(styles["overflow-x"]="hidden",styles["overflow-y"]="hidden",styles):("body"===self.name?(self.hasHScrollbar=self.grid.options.enableHorizontalScrollbar!==uiGridConstants.scrollbars.NEVER,self.grid.isRTL()?self.grid.hasLeftContainerColumns()||(self.hasVScrollbar=self.grid.options.enableVerticalScrollbar!==uiGridConstants.scrollbars.NEVER):self.grid.hasRightContainerColumns()||(self.hasVScrollbar=self.grid.options.enableVerticalScrollbar!==uiGridConstants.scrollbars.NEVER)):"left"===self.name?self.hasVScrollbar=!!self.grid.isRTL()&&self.grid.options.enableVerticalScrollbar!==uiGridConstants.scrollbars.NEVER:self.hasVScrollbar=!self.grid.isRTL()&&self.grid.options.enableVerticalScrollbar!==uiGridConstants.scrollbars.NEVER,styles["overflow-x"]=self.hasHScrollbar?"scroll":"hidden",styles["overflow-y"]=self.hasVScrollbar?"scroll":"hidden",styles)},GridRenderContainer}])}(),function(){angular.module("ui.grid").factory("GridRow",["gridUtil","uiGridConstants",function(gridUtil,uiGridConstants){function GridRow(entity,index,grid){this.grid=grid,this.entity=entity,this.uid=gridUtil.nextUid(),this.visible=!0,this.$$height=grid.options.rowHeight}return Object.defineProperty(GridRow.prototype,"height",{get:function(){return this.$$height},set:function(height){height!==this.$$height&&(this.grid.updateCanvasHeight(),this.$$height=height)}}),GridRow.prototype.getQualifiedColField=function(col){return"row."+this.getEntityQualifiedColField(col)},GridRow.prototype.getEntityQualifiedColField=function(col){return col.field===uiGridConstants.ENTITY_BINDING?"entity":gridUtil.preEval("entity."+col.field)},GridRow.prototype.setRowInvisible=function(row){row&&row.setThisRowInvisible&&row.setThisRowInvisible("user")},GridRow.prototype.clearRowInvisible=function(row){row&&row.clearThisRowInvisible&&row.clearThisRowInvisible("user")},GridRow.prototype.setThisRowInvisible=function(reason,fromRowsProcessor){this.invisibleReason||(this.invisibleReason={}),this.invisibleReason[reason]=!0,this.evaluateRowVisibility(fromRowsProcessor)},GridRow.prototype.clearThisRowInvisible=function(reason,fromRowsProcessor){void 0!==this.invisibleReason&&delete this.invisibleReason[reason],this.evaluateRowVisibility(fromRowsProcessor)},GridRow.prototype.evaluateRowVisibility=function(fromRowProcessor){var newVisibility=!0;void 0!==this.invisibleReason&&angular.forEach(this.invisibleReason,function(value,key){value&&(newVisibility=!1)}),void 0!==this.visible&&this.visible===newVisibility||(this.visible=newVisibility,fromRowProcessor||(this.grid.queueGridRefresh(),this.grid.api.core.raise.rowsVisibleChanged(this)))},GridRow}])}(),function(){"use strict";angular.module("ui.grid").factory("GridRowColumn",["$parse","$filter",function($parse,$filter){var GridRowColumn=function GridRowColumn(row,col){if(!(this instanceof GridRowColumn))throw"Using GridRowColumn as a function insead of as a constructor. Must be called with `new` keyword";this.row=row,this.col=col};return GridRowColumn.prototype.getIntersectionValueRaw=function(){
return $parse(this.row.getEntityQualifiedColField(this.col))(this.row)},GridRowColumn}])}(),function(){angular.module("ui.grid").factory("ScrollEvent",["gridUtil",function(gridUtil){function ScrollEvent(grid,sourceRowContainer,sourceColContainer,source){var self=this;if(!grid)throw new Error("grid argument is required");self.grid=grid,self.source=source,self.withDelay=!0,self.sourceRowContainer=sourceRowContainer,self.sourceColContainer=sourceColContainer,self.newScrollLeft=null,self.newScrollTop=null,self.x=null,self.y=null,self.verticalScrollLength=-9999999,self.horizontalScrollLength=-999999,self.fireThrottledScrollingEvent=gridUtil.throttle(function(sourceContainerId){self.grid.scrollContainers(sourceContainerId,self)},self.grid.options.wheelScrollThrottle,{trailing:!0})}return ScrollEvent.prototype.getNewScrollLeft=function(colContainer,viewport){var self=this;if(!self.newScrollLeft){var scrollXPercentage,scrollWidth=colContainer.getCanvasWidth()-colContainer.getViewportWidth(),oldScrollLeft=gridUtil.normalizeScrollLeft(viewport,self.grid);if(void 0!==self.x.percentage&&void 0!==self.x.percentage)scrollXPercentage=self.x.percentage;else{if(void 0===self.x.pixels||void 0===self.x.pixels)throw new Error("No percentage or pixel value provided for scroll event X axis");scrollXPercentage=self.x.percentage=(oldScrollLeft+self.x.pixels)/scrollWidth}return Math.max(0,scrollXPercentage*scrollWidth)}return self.newScrollLeft},ScrollEvent.prototype.getNewScrollTop=function(rowContainer,viewport){var self=this;if(!self.newScrollTop){var scrollYPercentage,scrollLength=rowContainer.getVerticalScrollLength(),oldScrollTop=viewport[0].scrollTop;if(void 0!==self.y.percentage&&void 0!==self.y.percentage)scrollYPercentage=self.y.percentage;else{if(void 0===self.y.pixels||void 0===self.y.pixels)throw new Error("No percentage or pixel value provided for scroll event Y axis");scrollYPercentage=self.y.percentage=(oldScrollTop+self.y.pixels)/scrollLength}return Math.max(0,scrollYPercentage*scrollLength)}return self.newScrollTop},ScrollEvent.prototype.atTop=function(scrollTop){return this.y&&(0===this.y.percentage||this.verticalScrollLength<0)&&0===scrollTop},ScrollEvent.prototype.atBottom=function(scrollTop){return this.y&&(1===this.y.percentage||0===this.verticalScrollLength)&&scrollTop>0},ScrollEvent.prototype.atLeft=function(scrollLeft){return this.x&&(0===this.x.percentage||this.horizontalScrollLength<0)&&0===scrollLeft},ScrollEvent.prototype.atRight=function(scrollLeft){return this.x&&(1===this.x.percentage||0===this.horizontalScrollLength)&&scrollLeft>0},ScrollEvent.Sources={ViewPortScroll:"ViewPortScroll",RenderContainerMouseWheel:"RenderContainerMouseWheel",RenderContainerTouchMove:"RenderContainerTouchMove",Other:99},ScrollEvent}])}(),function(){"use strict";angular.module("ui.grid").service("gridClassFactory",["gridUtil","$q","$compile","$templateCache","uiGridConstants","Grid","GridColumn","GridRow",function(gridUtil,$q,$compile,$templateCache,uiGridConstants,Grid,GridColumn,GridRow){var service={createGrid:function(options){options=void 0!==options?options:{},options.id=gridUtil.newId();var grid=new Grid(options);if(grid.options.rowTemplate){var rowTemplateFnPromise=$q.defer();grid.getRowTemplateFn=rowTemplateFnPromise.promise,gridUtil.getTemplate(grid.options.rowTemplate).then(function(template){var rowTemplateFn=$compile(template);rowTemplateFnPromise.resolve(rowTemplateFn)},function(res){throw new Error("Couldn't fetch/use row template '"+grid.options.rowTemplate+"'")})}return grid.registerColumnBuilder(service.defaultColumnBuilder),grid.registerRowBuilder(service.rowTemplateAssigner),grid.registerRowsProcessor(function(rows){return rows.forEach(function(row){row.evaluateRowVisibility(!0)},50),rows}),grid.registerColumnsProcessor(function(columns){return columns.forEach(function(column){column.visible=!angular.isDefined(column.colDef.visible)||column.colDef.visible}),columns},50),grid.registerRowsProcessor(grid.searchRows,100),grid.options.externalSort&&angular.isFunction(grid.options.externalSort)?grid.registerRowsProcessor(grid.options.externalSort,200):grid.registerRowsProcessor(grid.sortByColumn,200),grid},defaultColumnBuilder:function(colDef,col,gridOptions){var templateGetPromises=[],processTemplate=function(templateType,providedType,defaultTemplate,filterType,tooltipType){colDef[templateType]?col[providedType]=colDef[templateType]:col[providedType]=defaultTemplate,templateGetPromises.push(gridUtil.getTemplate(col[providedType]).then(function(template){angular.isFunction(template)&&(template=template());var tooltipCall="cellTooltip"===tooltipType?"col.cellTooltip(row,col)":"col.headerTooltip(col)";tooltipType&&!1===col[tooltipType]?template=template.replace(uiGridConstants.TOOLTIP,""):tooltipType&&col[tooltipType]&&(template=template.replace(uiGridConstants.TOOLTIP,'title="{{'+tooltipCall+' CUSTOM_FILTERS }}"')),col[templateType]=filterType?template.replace(uiGridConstants.CUSTOM_FILTERS,function(){return col[filterType]?"|"+col[filterType]:""}):template},function(res){throw new Error("Couldn't fetch/use colDef."+templateType+" '"+colDef[templateType]+"'")}))};return processTemplate("cellTemplate","providedCellTemplate","ui-grid/uiGridCell","cellFilter","cellTooltip"),col.cellTemplatePromise=templateGetPromises[0],processTemplate("headerCellTemplate","providedHeaderCellTemplate","ui-grid/uiGridHeaderCell","headerCellFilter","headerTooltip"),processTemplate("footerCellTemplate","providedFooterCellTemplate","ui-grid/uiGridFooterCell","footerCellFilter"),processTemplate("filterHeaderTemplate","providedFilterHeaderTemplate","ui-grid/ui-grid-filter"),col.compiledElementFnDefer=$q.defer(),$q.all(templateGetPromises)},rowTemplateAssigner:function(row){var grid=this;if(row.rowTemplate){var perRowTemplateFnPromise=$q.defer();row.getRowTemplateFn=perRowTemplateFnPromise.promise,gridUtil.getTemplate(row.rowTemplate).then(function(template){var rowTemplateFn=$compile(template);perRowTemplateFnPromise.resolve(rowTemplateFn)},function(res){throw new Error("Couldn't fetch/use row template '"+row.rowTemplate+"'")})}else row.rowTemplate=grid.options.rowTemplate,row.getRowTemplateFn=grid.getRowTemplateFn;return row.getRowTemplateFn}};return service}])}(),function(){function escapeRegExp(str){return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}angular.module("ui.grid").service("rowSearcher",["gridUtil","uiGridConstants",function(gridUtil,uiGridConstants){var defaultCondition=uiGridConstants.filter.CONTAINS,rowSearcher={};return rowSearcher.getTerm=function(filter){if(void 0===filter.term)return filter.term;var term=filter.term;return"string"==typeof term&&(term=term.trim()),term},rowSearcher.stripTerm=function(filter){var term=rowSearcher.getTerm(filter);return"string"==typeof term?escapeRegExp(term.replace(/(^\*|\*$)/g,"")):term},rowSearcher.guessCondition=function(filter){if(void 0===filter.term||!filter.term)return defaultCondition;var term=rowSearcher.getTerm(filter);if(/\*/.test(term)){var regexpFlags="";filter.flags&&filter.flags.caseSensitive||(regexpFlags+="i");var reText=term.replace(/(\\)?\*/g,function($0,$1){return $1?$0:"[\\s\\S]*?"});return new RegExp("^"+reText+"$",regexpFlags)}return defaultCondition},rowSearcher.setupFilters=function(filters){for(var newFilters=[],filtersLength=filters.length,i=0;i<filtersLength;i++){var filter=filters[i];if(filter.noTerm||!gridUtil.isNullOrUndefined(filter.term)){var newFilter={},regexpFlags="";filter.flags&&filter.flags.caseSensitive||(regexpFlags+="i"),gridUtil.isNullOrUndefined(filter.term)||(filter.rawTerm?newFilter.term=filter.term:newFilter.term=rowSearcher.stripTerm(filter)),newFilter.noTerm=filter.noTerm,filter.condition?newFilter.condition=filter.condition:newFilter.condition=rowSearcher.guessCondition(filter),newFilter.flags=angular.extend({caseSensitive:!1,date:!1},filter.flags),newFilter.condition===uiGridConstants.filter.STARTS_WITH&&(newFilter.startswithRE=new RegExp("^"+newFilter.term,regexpFlags)),newFilter.condition===uiGridConstants.filter.ENDS_WITH&&(newFilter.endswithRE=new RegExp(newFilter.term+"$",regexpFlags)),newFilter.condition===uiGridConstants.filter.CONTAINS&&(newFilter.containsRE=new RegExp(newFilter.term,regexpFlags)),newFilter.condition===uiGridConstants.filter.EXACT&&(newFilter.exactRE=new RegExp("^"+newFilter.term+"$",regexpFlags)),newFilters.push(newFilter)}}return newFilters},rowSearcher.runColumnFilter=function(grid,row,column,filter){var value,conditionType=typeof filter.condition,term=filter.term;if(value=column.filterCellFiltered?grid.getCellDisplayValue(row,column):grid.getCellValue(row,column),filter.condition instanceof RegExp)return filter.condition.test(value);if("function"===conditionType)return filter.condition(term,value,row,column);if(filter.startswithRE)return filter.startswithRE.test(value);if(filter.endswithRE)return filter.endswithRE.test(value);if(filter.containsRE)return filter.containsRE.test(value);if(filter.exactRE)return filter.exactRE.test(value);if(filter.condition===uiGridConstants.filter.NOT_EQUAL)return!new RegExp("^"+term+"$").exec(value);if("number"==typeof value&&"string"==typeof term){var tempFloat=parseFloat(term.replace(/\\\./,".").replace(/\\\-/,"-"));isNaN(tempFloat)||(term=tempFloat)}return!0===filter.flags.date&&(value=new Date(value),term=new Date(term.replace(/\\/g,""))),filter.condition===uiGridConstants.filter.GREATER_THAN?value>term:filter.condition===uiGridConstants.filter.GREATER_THAN_OR_EQUAL?value>=term:filter.condition===uiGridConstants.filter.LESS_THAN?value<term:filter.condition!==uiGridConstants.filter.LESS_THAN_OR_EQUAL||value<=term},rowSearcher.searchColumn=function(grid,row,column,filters){if(grid.options.useExternalFiltering)return!0;for(var filtersLength=filters.length,i=0;i<filtersLength;i++){var filter=filters[i];if((!gridUtil.isNullOrUndefined(filter.term)&&""!==filter.term||filter.noTerm)&&!rowSearcher.runColumnFilter(grid,row,column,filter))return!1}return!0},rowSearcher.search=function(grid,rows,columns){if(rows){if(!grid.options.enableFiltering)return rows;for(var filterData=[],colsLength=columns.length,i=0;i<colsLength;i++){var col=columns[i];void 0!==col.filters&&function(filters){var hasTerm=!1;return filters.forEach(function(filter){(!gridUtil.isNullOrUndefined(filter.term)&&""!==filter.term||filter.noTerm)&&(hasTerm=!0)}),hasTerm}(col.filters)&&filterData.push({col:col,filters:rowSearcher.setupFilters(col.filters)})}if(filterData.length>0){for(var foreachRow=function(grid,row,col,filters){row.visible&&!rowSearcher.searchColumn(grid,row,col,filters)&&(row.visible=!1)},filterDataLength=filterData.length,j=0;j<filterDataLength;j++)!function(grid,filterData){for(var rowsLength=rows.length,i=0;i<rowsLength;i++)foreachRow(grid,rows[i],filterData.col,filterData.filters)}(grid,filterData[j]);grid.api.core.raise.rowsVisibleChanged&&grid.api.core.raise.rowsVisibleChanged()}return rows}},rowSearcher}])}(),function(){angular.module("ui.grid").service("rowSorter",["$parse","uiGridConstants",function($parse,uiGridConstants){var currencyRegexStr="("+uiGridConstants.CURRENCY_SYMBOLS.map(function(a){return"\\"+a}).join("|")+")?",rowSorter=(new RegExp("^[-+]?"+currencyRegexStr+"[\\d,.]+"+currencyRegexStr+"%?$"),{colSortFnCache:{}});return rowSorter.guessSortFn=function(itemType){switch(itemType){case"number":return rowSorter.sortNumber;case"numberStr":return rowSorter.sortNumberStr;case"boolean":return rowSorter.sortBool;case"string":return rowSorter.sortAlpha;case"date":return rowSorter.sortDate;case"object":return rowSorter.basicSort;default:throw new Error("No sorting function found for type:"+itemType)}},rowSorter.handleNulls=function(a,b){if(!a&&0!==a&&!1!==a||!b&&0!==b&&!1!==b){if(!a&&0!==a&&!1!==a&&!b&&0!==b&&!1!==b)return 0;if(!a&&0!==a&&!1!==a)return 1;if(!b&&0!==b&&!1!==b)return-1}return null},rowSorter.basicSort=function(a,b){var nulls=rowSorter.handleNulls(a,b);return null!==nulls?nulls:a===b?0:a<b?-1:1},rowSorter.sortNumber=function(a,b){var nulls=rowSorter.handleNulls(a,b);return null!==nulls?nulls:a-b},rowSorter.sortNumberStr=function(a,b){var nulls=rowSorter.handleNulls(a,b);if(null!==nulls)return nulls;var numA,numB,badA=!1,badB=!1;return numA=parseFloat(a.replace(/[^0-9.-]/g,"")),isNaN(numA)&&(badA=!0),numB=parseFloat(b.replace(/[^0-9.-]/g,"")),isNaN(numB)&&(badB=!0),badA&&badB?0:badA?1:badB?-1:numA-numB},rowSorter.sortAlpha=function(a,b){var nulls=rowSorter.handleNulls(a,b);if(null!==nulls)return nulls;var strA=a.toString().toLowerCase(),strB=b.toString().toLowerCase();return strA===strB?0:strA.localeCompare(strB)},rowSorter.sortDate=function(a,b){var nulls=rowSorter.handleNulls(a,b);if(null!==nulls)return nulls;a instanceof Date||(a=new Date(a)),b instanceof Date||(b=new Date(b));var timeA=a.getTime(),timeB=b.getTime();return timeA===timeB?0:timeA<timeB?-1:1},rowSorter.sortBool=function(a,b){var nulls=rowSorter.handleNulls(a,b);return null!==nulls?nulls:a&&b?0:a||b?a?1:-1:0},rowSorter.getSortFn=function(grid,col,rows){var sortFn;return rowSorter.colSortFnCache[col.colDef.name]?sortFn=rowSorter.colSortFnCache[col.colDef.name]:void 0!==col.sortingAlgorithm?(sortFn=col.sortingAlgorithm,rowSorter.colSortFnCache[col.colDef.name]=col.sortingAlgorithm):col.sortCellFiltered&&col.cellFilter?(sortFn=rowSorter.sortAlpha,rowSorter.colSortFnCache[col.colDef.name]=sortFn):(sortFn=rowSorter.guessSortFn(col.colDef.type),sortFn?rowSorter.colSortFnCache[col.colDef.name]=sortFn:sortFn=rowSorter.sortAlpha),sortFn},rowSorter.prioritySort=function(a,b){return void 0!==a.sort.priority&&void 0!==b.sort.priority?a.sort.priority<b.sort.priority?-1:a.sort.priority===b.sort.priority?0:1:a.sort.priority||void 0===a.sort.priority?-1:b.sort.priority||void 0===b.sort.priority?1:0},rowSorter.sort=function(grid,rows,columns){if(rows){if(grid.options.useExternalSorting)return rows;var sortCols=[];if(columns.forEach(function(col){!col.sort||col.sort.ignoreSort||!col.sort.direction||col.sort.direction!==uiGridConstants.ASC&&col.sort.direction!==uiGridConstants.DESC||sortCols.push(col)}),sortCols=sortCols.sort(rowSorter.prioritySort),0===sortCols.length)return rows;var col,direction,setIndex=function(row,idx){row.entity.$$uiGridIndex=idx};rows.forEach(setIndex);var r=rows.slice(0),rowSortFn=function(rowA,rowB){for(var sortFn,tem=0,idx=0;0===tem&&idx<sortCols.length;){col=sortCols[idx],direction=sortCols[idx].sort.direction,sortFn=rowSorter.getSortFn(grid,col,r);var propA,propB;col.sortCellFiltered?(propA=grid.getCellDisplayValue(rowA,col),propB=grid.getCellDisplayValue(rowB,col)):(propA=grid.getCellValue(rowA,col),propB=grid.getCellValue(rowB,col)),tem=sortFn(propA,propB,rowA,rowB,direction),idx++}return 0===tem?rowA.entity.$$uiGridIndex-rowB.entity.$$uiGridIndex:direction===uiGridConstants.ASC?tem:0-tem},newRows=rows.sort(rowSortFn),clearIndex=function(row,idx){delete row.entity.$$uiGridIndex};return rows.forEach(clearIndex),newRows}},rowSorter}])}(),function(){function getStyles(elem){var e=elem;return void 0!==e.length&&e.length&&(e=elem[0]),e.ownerDocument.defaultView.getComputedStyle(e,null)}function augmentWidthOrHeight(elem,name,extra,isBorderBox,styles){for(var i=extra===(isBorderBox?"border":"content")?4:"width"===name?1:0,val=0,sides=["Top","Right","Bottom","Left"];i<4;i+=2){var side=sides[i];if("margin"===extra){var marg=parseFloat(styles[extra+side]);isNaN(marg)||(val+=marg)}if(isBorderBox){if("content"===extra){var padd=parseFloat(styles["padding"+side]);isNaN(padd)||(val-=padd)}if("margin"!==extra){var bordermarg=parseFloat(styles["border"+side+"Width"]);isNaN(bordermarg)||(val-=bordermarg)}}else{var nocontentPad=parseFloat(styles["padding"+side]);if(isNaN(nocontentPad)||(val+=nocontentPad),"padding"!==extra){var nocontentnopad=parseFloat(styles["border"+side+"Width"]);isNaN(nocontentnopad)||(val+=nocontentnopad)}}}return val}function getWidthOrHeight(elem,name,extra){var val,valueIsBorderBox=!0,styles=getStyles(elem),isBorderBox="border-box"===styles.boxSizing;if(val<=0||null==val){if(val=styles[name],(val<0||null==val)&&(val=elem.style[name]),rnumnonpx.test(val))return val;valueIsBorderBox=isBorderBox&&!0,val=parseFloat(val)||0}return val+augmentWidthOrHeight(elem,name,extra||(isBorderBox?"border":"content"),valueIsBorderBox,styles)}function getLineHeight(elm){elm=angular.element(elm)[0];var parent=elm.parentElement;return parent||(parent=document.getElementsByTagName("body")[0]),parseInt(getStyles(parent).fontSize)||parseInt(getStyles(elm).fontSize)||16}var bindPolyfill,module=angular.module("ui.grid");"function"!=typeof Function.prototype.bind&&(bindPolyfill=function(){var slice=Array.prototype.slice;return function(context){var fn=this,args=slice.call(arguments,1);return args.length?function(){return arguments.length?fn.apply(context,args.concat(slice.call(arguments))):fn.apply(context,args)}:function(){return arguments.length?fn.apply(context,arguments):fn.call(context)}}});var rnumnonpx=new RegExp("^("+/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source+")(?!px)[a-z%]+$","i"),rdisplayswap=/^(block|none|table(?!-c[ea]).+)/,cssShow={position:"absolute",visibility:"hidden",display:"block"},uid=["0","0","0","0"];module.service("gridUtil",["$log","$window","$document","$http","$templateCache","$timeout","$interval","$injector","$q","$interpolate","uiGridConstants",function($log,$window,$document,$http,$templateCache,$timeout,$interval,$injector,$q,$interpolate,uiGridConstants){function mousewheelHandler(fn,event){var $elm=angular.element(this),delta=0,deltaX=0,deltaY=0,absDelta=0;if(event.originalEvent&&(event=event.originalEvent),"detail"in event&&(deltaY=-1*event.detail),"wheelDelta"in event&&(deltaY=event.wheelDelta),"wheelDeltaY"in event&&(deltaY=event.wheelDeltaY),"wheelDeltaX"in event&&(deltaX=-1*event.wheelDeltaX),"axis"in event&&event.axis===event.HORIZONTAL_AXIS&&(deltaX=-1*deltaY,deltaY=0),delta=0===deltaY?deltaX:deltaY,"deltaY"in event&&(deltaY=-1*event.deltaY,delta=deltaY),"deltaX"in event&&(deltaX=event.deltaX,0===deltaY&&(delta=-1*deltaX)),0!==deltaY||0!==deltaX){if(1===event.deltaMode){var lineHeight=$elm.data("mousewheel-line-height");delta*=lineHeight,deltaY*=lineHeight,deltaX*=lineHeight}else if(2===event.deltaMode){var pageHeight=$elm.data("mousewheel-page-height");delta*=pageHeight,deltaY*=pageHeight,deltaX*=pageHeight}absDelta=Math.max(Math.abs(deltaY),Math.abs(deltaX)),(!lowestDelta||absDelta<lowestDelta)&&(lowestDelta=absDelta,shouldAdjustOldDeltas(event,absDelta)&&(lowestDelta/=40)),delta=Math[delta>=1?"floor":"ceil"](delta/lowestDelta),deltaX=Math[deltaX>=1?"floor":"ceil"](deltaX/lowestDelta),deltaY=Math[deltaY>=1?"floor":"ceil"](deltaY/lowestDelta);var newEvent={originalEvent:event,deltaX:deltaX,deltaY:deltaY,deltaFactor:lowestDelta,preventDefault:function(){event.preventDefault()},stopPropagation:function(){event.stopPropagation()}};nullLowestDeltaTimeout&&clearTimeout(nullLowestDeltaTimeout),nullLowestDeltaTimeout=setTimeout(nullLowestDelta,200),fn.call($elm[0],newEvent)}}function nullLowestDelta(){lowestDelta=null}function shouldAdjustOldDeltas(orgEvent,absDelta){return"mousewheel"===orgEvent.type&&absDelta%120==0}var s={augmentWidthOrHeight:augmentWidthOrHeight,getStyles:getStyles,createBoundedWrapper:function(object,method){return function(){return method.apply(object,arguments)}},readableColumnName:function(columnName){return void 0===columnName||void 0===columnName||null===columnName?columnName:("string"!=typeof columnName&&(columnName=String(columnName)),columnName.replace(/_+/g," ").replace(/^[A-Z]+$/,function(match){return angular.lowercase(angular.uppercase(match.charAt(0))+match.slice(1))}).replace(/([\w\u00C0-\u017F]+)/g,function(match){return angular.uppercase(match.charAt(0))+match.slice(1)}).replace(/(\w+?(?=[A-Z]))/g,"$1 "))},getColumnsFromData:function(data,excludeProperties){var columnDefs=[];if(!data||void 0===data[0]||void 0===data[0])return[];angular.isUndefined(excludeProperties)&&(excludeProperties=[]);var item=data[0];return angular.forEach(item,function(prop,propName){-1===excludeProperties.indexOf(propName)&&columnDefs.push({name:propName})}),columnDefs},newId:function(){var seedId=(new Date).getTime();return function(){return seedId+=1}}(),getTemplate:function(template){if($templateCache.get(template))return s.postProcessTemplate($templateCache.get(template));if(angular.isFunction(template.then))return template.then(s.postProcessTemplate);try{if(angular.element(template).length>0)return $q.when(template).then(s.postProcessTemplate)}catch(err){}return s.logDebug("fetching url",template),$http({method:"GET",url:template}).then(function(result){var templateHtml=result.data.trim();return $templateCache.put(template,templateHtml),templateHtml},function(err){throw new Error("Could not get template "+template+": "+err)}).then(s.postProcessTemplate)},postProcessTemplate:function(template){var startSym=$interpolate.startSymbol(),endSym=$interpolate.endSymbol();return"{{"===startSym&&"}}"===endSym||(template=template.replace(/\{\{/g,startSym),template=template.replace(/\}\}/g,endSym)),$q.when(template)},guessType:function(item){var itemType=typeof item;switch(itemType){case"number":case"boolean":case"string":return itemType;default:return angular.isDate(item)?"date":"object"}},elementWidth:function(elem){},elementHeight:function(elem){},getScrollbarWidth:function(){var outer=document.createElement("div");outer.style.visibility="hidden",outer.style.width="100px",outer.style.msOverflowStyle="scrollbar",document.body.appendChild(outer);var widthNoScroll=outer.offsetWidth;outer.style.overflow="scroll";var inner=document.createElement("div");inner.style.width="100%",outer.appendChild(inner);var widthWithScroll=inner.offsetWidth;return outer.parentNode.removeChild(outer),widthNoScroll-widthWithScroll},swap:function(elem,options,callback,args){var ret,name,old={};for(name in options)old[name]=elem.style[name],elem.style[name]=options[name];ret=callback.apply(elem,args||[]);for(name in options)elem.style[name]=old[name];return ret},fakeElement:function(elem,options,callback,args){var ret,name,newElement=angular.element(elem).clone()[0];for(name in options)newElement.style[name]=options[name];return angular.element(document.body).append(newElement),ret=callback.call(newElement,newElement),angular.element(newElement).remove(),ret},normalizeWheelEvent:function(event){var lowestDelta,lowestDeltaXY,fn,orgEvent=event||window.event,delta=([].slice.call(arguments,1),0),deltaX=0,deltaY=0,absDelta=0,absDeltaXY=0;return orgEvent.originalEvent&&(orgEvent=orgEvent.originalEvent),orgEvent.wheelDelta&&(delta=orgEvent.wheelDelta),orgEvent.detail&&(delta=-1*orgEvent.detail),deltaY=delta,void 0!==orgEvent.axis&&orgEvent.axis===orgEvent.HORIZONTAL_AXIS&&(deltaY=0,deltaX=-1*delta),orgEvent.deltaY&&(deltaY=-1*orgEvent.deltaY,delta=deltaY),orgEvent.deltaX&&(deltaX=orgEvent.deltaX,delta=-1*deltaX),void 0!==orgEvent.wheelDeltaY&&(deltaY=orgEvent.wheelDeltaY),void 0!==orgEvent.wheelDeltaX&&(deltaX=orgEvent.wheelDeltaX),absDelta=Math.abs(delta),(!lowestDelta||absDelta<lowestDelta)&&(lowestDelta=absDelta),absDeltaXY=Math.max(Math.abs(deltaY),Math.abs(deltaX)),(!lowestDeltaXY||absDeltaXY<lowestDeltaXY)&&(lowestDeltaXY=absDeltaXY),fn=delta>0?"floor":"ceil",delta=Math[fn](delta/lowestDelta),deltaX=Math[fn](deltaX/lowestDeltaXY),deltaY=Math[fn](deltaY/lowestDeltaXY),{delta:delta,deltaX:deltaX,deltaY:deltaY}},isTouchEnabled:function(){var bool;return("ontouchstart"in $window||$window.DocumentTouch&&$document instanceof DocumentTouch)&&(bool=!0),bool},isNullOrUndefined:function(obj){return void 0===obj||null===obj},endsWith:function(str,suffix){return!(!str||!suffix||"string"!=typeof str)&&-1!==str.indexOf(suffix,str.length-suffix.length)},arrayContainsObjectWithProperty:function(array,propertyName,propertyValue){var found=!1;return angular.forEach(array,function(object){object[propertyName]===propertyValue&&(found=!0)}),found},numericAndNullSort:function(a,b){return null===a?1:null===b?-1:null===a&&null===b?0:a-b},disableAnimations:function(element){var $animate;try{$animate=$injector.get("$animate"),angular.version.major>1||1===angular.version.major&&angular.version.minor>=4?$animate.enabled(element,!1):$animate.enabled(!1,element)}catch(e){}},enableAnimations:function(element){var $animate;try{return $animate=$injector.get("$animate"),angular.version.major>1||1===angular.version.major&&angular.version.minor>=4?$animate.enabled(element,!0):$animate.enabled(!0,element),$animate}catch(e){}},nextUid:function(){for(var digit,index=uid.length;index;){if(index--,57===(digit=uid[index].charCodeAt(0)))return uid[index]="A","uiGrid-"+uid.join("");if(90!==digit)return uid[index]=String.fromCharCode(digit+1),"uiGrid-"+uid.join("");uid[index]="0"}return uid.unshift("0"),"uiGrid-"+uid.join("")},hashKey:function(obj){var key,objType=typeof obj;return"object"===objType&&null!==obj?"function"==typeof(key=obj.$$hashKey)?key=obj.$$hashKey():void 0!==obj.$$hashKey&&obj.$$hashKey?key=obj.$$hashKey:void 0===key&&(key=obj.$$hashKey=s.nextUid()):key=obj,objType+":"+key},resetUids:function(){uid=["0","0","0"]},logError:function(logMessage){uiGridConstants.LOG_ERROR_MESSAGES&&$log.error(logMessage)},logWarn:function(logMessage){uiGridConstants.LOG_WARN_MESSAGES&&$log.warn(logMessage)},logDebug:function(){uiGridConstants.LOG_DEBUG_MESSAGES&&$log.debug.apply($log,arguments)}};s.focus={queue:[],byId:function(id,Grid){this._purgeQueue();var promise=$timeout(function(){var elementID=(Grid&&Grid.id?Grid.id+"-":"")+id,element=$window.document.getElementById(elementID);element?element.focus():s.logWarn("[focus.byId] Element id "+elementID+" was not found.")});return this.queue.push(promise),promise},byElement:function(element){if(!angular.isElement(element))return s.logWarn("Trying to focus on an element that isn't an element."),$q.reject("not-element");element=angular.element(element),this._purgeQueue();var promise=$timeout(function(){element&&element[0].focus()});return this.queue.push(promise),promise},bySelector:function(parentElement,querySelector,aSync){var self=this;if(!angular.isElement(parentElement))throw new Error("The parent element is not an element.");parentElement=angular.element(parentElement);var focusBySelector=function(){var element=parentElement[0].querySelector(querySelector);return self.byElement(element)};if(this._purgeQueue(),aSync){var promise=$timeout(focusBySelector);return this.queue.push($timeout(focusBySelector)),promise}return focusBySelector()},_purgeQueue:function(){this.queue.forEach(function(element){$timeout.cancel(element)}),this.queue=[]}},["width","height"].forEach(function(name){var capsName=angular.uppercase(name.charAt(0))+name.substr(1);s["element"+capsName]=function(elem,extra){var e=elem;if(e&&void 0!==e.length&&e.length&&(e=elem[0]),e){var styles=getStyles(e);return 0===e.offsetWidth&&rdisplayswap.test(styles.display)?s.swap(e,cssShow,function(){return getWidthOrHeight(e,name,extra)}):getWidthOrHeight(e,name,extra)}return null},s["outerElement"+capsName]=function(elem,margin){return elem?s["element"+capsName].call(this,elem,margin?"margin":"border"):null}}),s.closestElm=function(el,selector){void 0!==el.length&&el.length&&(el=el[0]);var matchesFn;["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].some(function(fn){return"function"==typeof document.body[fn]&&(matchesFn=fn,!0)});for(var parent;null!==el;){if(null!==(parent=el.parentElement)&&parent[matchesFn](selector))return parent;el=parent}return null},s.type=function(obj){return Function.prototype.toString.call(obj.constructor).match(/function (.*?)\(/)[1]},s.getBorderSize=function(elem,borderType){void 0!==elem.length&&elem.length&&(elem=elem[0]);var styles=getStyles(elem);borderType=borderType?"border"+borderType.charAt(0).toUpperCase()+borderType.slice(1):"border",borderType+="Width";var val=parseInt(styles[borderType],10);return isNaN(val)?0:val},s.detectBrowser=function(){var userAgent=$window.navigator.userAgent,browsers={chrome:/chrome/i,safari:/safari/i,firefox:/firefox/i,ie:/internet explorer|trident\//i};for(var key in browsers)if(browsers[key].test(userAgent))return key;return"unknown"},s.rtlScrollType=function rtlScrollType(){if(rtlScrollType.type)return rtlScrollType.type;var definer=angular.element('<div dir="rtl" style="font-size: 14px; width: 1px; height: 1px; position: absolute; top: -1000px; overflow: scroll">A</div>')[0],type="reverse";return document.body.appendChild(definer),definer.scrollLeft>0?type="default":(definer.scrollLeft=1,0===definer.scrollLeft&&(type="negative")),angular.element(definer).remove(),rtlScrollType.type=type,type},s.normalizeScrollLeft=function(element,grid){void 0!==element.length&&element.length&&(element=element[0]);var scrollLeft=element.scrollLeft;if(grid.isRTL())switch(s.rtlScrollType()){case"default":return element.scrollWidth-scrollLeft-element.clientWidth;case"negative":return Math.abs(scrollLeft);case"reverse":return scrollLeft}return scrollLeft},s.denormalizeScrollLeft=function(element,scrollLeft,grid){if(void 0!==element.length&&element.length&&(element=element[0]),grid.isRTL())switch(s.rtlScrollType()){case"default":return element.scrollWidth-element.clientWidth-scrollLeft;case"negative":return-1*scrollLeft;case"reverse":return scrollLeft}return scrollLeft},s.preEval=function(path){var m=uiGridConstants.BRACKET_REGEXP.exec(path);if(m)return(m[1]?s.preEval(m[1]):m[1])+m[2]+(m[3]?s.preEval(m[3]):m[3]);path=path.replace(uiGridConstants.APOS_REGEXP,"\\'");var parts=path.split(uiGridConstants.DOT_REGEXP),preparsed=[parts.shift()];return angular.forEach(parts,function(part){preparsed.push(part.replace(uiGridConstants.FUNC_REGEXP,"']$1"))}),preparsed.join("['")},s.debounce=function(func,wait,immediate){function debounce(){context=this,args=arguments;var later=function(){timeout=null,immediate||(result=func.apply(context,args))},callNow=immediate&&!timeout;return timeout&&$timeout.cancel(timeout),timeout=$timeout(later,wait,!1),callNow&&(result=func.apply(context,args)),result}var timeout,args,context,result;return debounce.cancel=function(){$timeout.cancel(timeout),timeout=null},debounce},s.throttle=function(func,wait,options){function runFunc(endDate){lastCall=+new Date,func.apply(context,args),$interval(function(){queued=null},0,1,!1)}options=options||{};var context,args,lastCall=0,queued=null;return function(){if(context=this,args=arguments,null===queued){var sinceLast=+new Date-lastCall;sinceLast>wait?runFunc():options.trailing&&(queued=$interval(runFunc,wait-sinceLast,1,!1))}}},s.on={},s.off={},s._events={},s.addOff=function(eventName){s.off[eventName]=function(elm,fn){var idx=s._events[eventName].indexOf(fn);idx>0&&s._events[eventName].removeAt(idx)}};var nullLowestDeltaTimeout,lowestDelta,mouseWheeltoBind="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"];return s.on.mousewheel=function(elm,fn){if(elm&&fn){var $elm=angular.element(elm);$elm.data("mousewheel-line-height",getLineHeight($elm)),$elm.data("mousewheel-page-height",s.elementHeight($elm)),$elm.data("mousewheel-callbacks")||$elm.data("mousewheel-callbacks",{});var cbs=$elm.data("mousewheel-callbacks");cbs[fn]=(Function.prototype.bind||bindPolyfill).call(mousewheelHandler,$elm[0],fn);for(var i=mouseWheeltoBind.length;i;)$elm.on(mouseWheeltoBind[--i],cbs[fn])}},s.off.mousewheel=function(elm,fn){var $elm=angular.element(elm),cbs=$elm.data("mousewheel-callbacks"),handler=cbs[fn];if(handler)for(var i=mouseWheeltoBind.length;i;)$elm.off(mouseWheeltoBind[--i],handler);delete cbs[fn],0===Object.keys(cbs).length&&($elm.removeData("mousewheel-line-height"),$elm.removeData("mousewheel-page-height"),$elm.removeData("mousewheel-callbacks"))},s}]),module.filter("px",function(){return function(str){return str.match(/^[\d\.]+$/)?str+"px":str}})}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){
var lang={aggregate:{label:"položky"},groupPanel:{description:"Přesuňte záhlaví zde pro vytvoření skupiny dle sloupce."},search:{placeholder:"Hledat...",showingItems:"Zobrazuji položky:",selectedItems:"Vybrané položky:",totalItems:"Celkem položek:",size:"Velikost strany:",first:"První strana",next:"Další strana",previous:"Předchozí strana",last:"Poslední strana"},menu:{text:"Vyberte sloupec:"},sort:{ascending:"Seřadit od A-Z",descending:"Seřadit od Z-A",remove:"Odebrat seřazení"},column:{hide:"Schovat sloupec"},aggregation:{count:"celkem řádků: ",sum:"celkem: ",avg:"avg: ",min:"min.: ",max:"max.: "},pinning:{pinLeft:"Zamknout vlevo",pinRight:"Zamknout vpravo",unpin:"Odemknout"},gridMenu:{columns:"Sloupce:",importerTitle:"Importovat soubor",exporterAllAsCsv:"Exportovat všechna data do csv",exporterVisibleAsCsv:"Exportovat viditelná data do csv",exporterSelectedAsCsv:"Exportovat vybraná data do csv",exporterAllAsPdf:"Exportovat všechna data do pdf",exporterVisibleAsPdf:"Exportovat viditelná data do pdf",exporterSelectedAsPdf:"Exportovat vybraná data do pdf",clearAllFilters:"Odstranit všechny filtry"},importer:{noHeaders:"Názvy sloupců se nepodařilo získat, obsahuje soubor záhlaví?",noObjects:"Data se nepodařilo zpracovat, obsahuje soubor řádky mimo záhlaví?",invalidCsv:"Soubor nelze zpracovat, jedná se o CSV?",invalidJson:"Soubor nelze zpracovat, je to JSON?",jsonNotArray:"Soubor musí obsahovat json. Ukončuji.."},pagination:{sizes:"položek na stránku",totalItems:"položek"},grouping:{group:"Seskupit",ungroup:"Odebrat seskupení",aggregate_count:"Agregace: Count",aggregate_sum:"Agregace: Sum",aggregate_max:"Agregace: Max",aggregate_min:"Agregace: Min",aggregate_avg:"Agregace: Avg",aggregate_remove:"Agregace: Odebrat"}};return $delegate.add("cs",lang),$delegate.add("cz",lang),$delegate.add("cs-cz",lang),$delegate.add("cs-CZ",lang),$delegate}])}])}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("da",{aggregate:{label:"artikler"},groupPanel:{description:"Grupér rækker udfra en kolonne ved at trække dens overskift hertil."},search:{placeholder:"Søg...",showingItems:"Viste rækker:",selectedItems:"Valgte rækker:",totalItems:"Rækker totalt:",size:"Side størrelse:",first:"Første side",next:"Næste side",previous:"Forrige side",last:"Sidste side"},menu:{text:"Vælg kolonner:"},sort:{ascending:"Sorter stigende",descending:"Sorter faldende",none:"Sorter ingen",remove:"Fjern sortering"},column:{hide:"Skjul kolonne"},aggregation:{count:"antal rækker: ",sum:"sum: ",avg:"gns: ",min:"min: ",max:"max: "},gridMenu:{columns:"Kolonner:",importerTitle:"Importer fil",exporterAllAsCsv:"Eksporter alle data som csv",exporterVisibleAsCsv:"Eksporter synlige data som csv",exporterSelectedAsCsv:"Eksporter markerede data som csv",exporterAllAsPdf:"Eksporter alle data som pdf",exporterVisibleAsPdf:"Eksporter synlige data som pdf",exporterSelectedAsPdf:"Eksporter markerede data som pdf",clearAllFilters:"Clear all filters"},importer:{noHeaders:"Column names were unable to be derived, does the file have a header?",noObjects:"Objects were not able to be derived, was there data in the file other than headers?",invalidCsv:"File was unable to be processed, is it valid CSV?",invalidJson:"File was unable to be processed, is it valid Json?",jsonNotArray:"Imported json file must contain an array, aborting."},pagination:{aria:{pageToFirst:"Gå til første",pageBack:"Gå tilbage",pageSelected:"Valgte side",pageForward:"Gå frem",pageToLast:"Gå til sidste"},sizes:"genstande per side",totalItems:"genstande",through:"gennem",of:"af"}}),$delegate}])}])}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("de",{headerCell:{aria:{defaultFilterLabel:"Filter für Spalte",removeFilter:"Filter löschen",columnMenuButtonLabel:"Spaltenmenü"},priority:"Priorität:",filterLabel:"Filter für Spalte: "},aggregate:{label:"Eintrag"},groupPanel:{description:"Ziehen Sie eine Spaltenüberschrift hierhin, um nach dieser Spalte zu gruppieren."},search:{placeholder:"Suche...",showingItems:"Zeige Einträge:",selectedItems:"Ausgewählte Einträge:",totalItems:"Einträge gesamt:",size:"Einträge pro Seite:",first:"Erste Seite",next:"Nächste Seite",previous:"Vorherige Seite",last:"Letzte Seite"},menu:{text:"Spalten auswählen:"},sort:{ascending:"aufsteigend sortieren",descending:"absteigend sortieren",none:"keine Sortierung",remove:"Sortierung zurücksetzen"},column:{hide:"Spalte ausblenden"},aggregation:{count:"Zeilen insgesamt: ",sum:"gesamt: ",avg:"Durchschnitt: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Links anheften",pinRight:"Rechts anheften",unpin:"Lösen"},columnMenu:{close:"Schließen"},gridMenu:{aria:{buttonLabel:"Tabellenmenü"},columns:"Spalten:",importerTitle:"Datei importieren",exporterAllAsCsv:"Alle Daten als CSV exportieren",exporterVisibleAsCsv:"sichtbare Daten als CSV exportieren",exporterSelectedAsCsv:"markierte Daten als CSV exportieren",exporterAllAsPdf:"Alle Daten als PDF exportieren",exporterVisibleAsPdf:"sichtbare Daten als PDF exportieren",exporterSelectedAsPdf:"markierte Daten als PDF exportieren",clearAllFilters:"Alle Filter zurücksetzen"},importer:{noHeaders:"Es konnten keine Spaltennamen ermittelt werden. Sind in der Datei Spaltendefinitionen enthalten?",noObjects:"Es konnten keine Zeileninformationen gelesen werden, Sind in der Datei außer den Spaltendefinitionen auch Daten enthalten?",invalidCsv:"Die Datei konnte nicht eingelesen werden, ist es eine gültige CSV-Datei?",invalidJson:"Die Datei konnte nicht eingelesen werden. Enthält sie gültiges JSON?",jsonNotArray:"Die importierte JSON-Datei muß ein Array enthalten. Breche Import ab."},pagination:{aria:{pageToFirst:"Zum Anfang",pageBack:"Seite zurück",pageSelected:"Ausgwählte Seite",pageForward:"Seite vor",pageToLast:"Zum Ende"},sizes:"Einträge pro Seite",totalItems:"Einträge",through:"bis",of:"von"},grouping:{group:"Gruppieren",ungroup:"Gruppierung aufheben",aggregate_count:"Agg: Anzahl",aggregate_sum:"Agg: Summe",aggregate_max:"Agg: Maximum",aggregate_min:"Agg: Minimum",aggregate_avg:"Agg: Mittelwert",aggregate_remove:"Aggregation entfernen"}}),$delegate}])}])}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("en",{headerCell:{aria:{defaultFilterLabel:"Filter for column",removeFilter:"Remove Filter",columnMenuButtonLabel:"Column Menu"},priority:"Priority:",filterLabel:"Filter for column: "},aggregate:{label:"items"},groupPanel:{description:"Drag a column header here and drop it to group by that column."},search:{placeholder:"Search...",showingItems:"Showing Items:",selectedItems:"Selected Items:",totalItems:"Total Items:",size:"Page Size:",first:"First Page",next:"Next Page",previous:"Previous Page",last:"Last Page"},menu:{text:"Choose Columns:"},sort:{ascending:"Sort Ascending",descending:"Sort Descending",none:"Sort None",remove:"Remove Sort"},column:{hide:"Hide Column"},aggregation:{count:"total rows: ",sum:"total: ",avg:"avg: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Pin Left",pinRight:"Pin Right",unpin:"Unpin"},columnMenu:{close:"Close"},gridMenu:{aria:{buttonLabel:"Grid Menu"},columns:"Columns:",importerTitle:"Import file",exporterAllAsCsv:"Export all data as csv",exporterVisibleAsCsv:"Export visible data as csv",exporterSelectedAsCsv:"Export selected data as csv",exporterAllAsPdf:"Export all data as pdf",exporterVisibleAsPdf:"Export visible data as pdf",exporterSelectedAsPdf:"Export selected data as pdf",clearAllFilters:"Clear all filters"},importer:{noHeaders:"Column names were unable to be derived, does the file have a header?",noObjects:"Objects were not able to be derived, was there data in the file other than headers?",invalidCsv:"File was unable to be processed, is it valid CSV?",invalidJson:"File was unable to be processed, is it valid Json?",jsonNotArray:"Imported json file must contain an array, aborting."},pagination:{aria:{pageToFirst:"Page to first",pageBack:"Page back",pageSelected:"Selected page",pageForward:"Page forward",pageToLast:"Page to last"},sizes:"items per page",totalItems:"items",through:"through",of:"of"},grouping:{group:"Group",ungroup:"Ungroup",aggregate_count:"Agg: Count",aggregate_sum:"Agg: Sum",aggregate_max:"Agg: Max",aggregate_min:"Agg: Min",aggregate_avg:"Agg: Avg",aggregate_remove:"Agg: Remove"},validate:{error:"Error:",minLength:"Value should be at least THRESHOLD characters long.",maxLength:"Value should be at most THRESHOLD characters long.",required:"A value is needed."}}),$delegate}])}])}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("es",{aggregate:{label:"Artículos"},groupPanel:{description:"Arrastre un encabezado de columna aquí y suéltelo para agrupar por esa columna."},search:{placeholder:"Buscar...",showingItems:"Artículos Mostrados:",selectedItems:"Artículos Seleccionados:",totalItems:"Artículos Totales:",size:"Tamaño de Página:",first:"Primera Página",next:"Página Siguiente",previous:"Página Anterior",last:"Última Página"},menu:{text:"Elegir columnas:"},sort:{ascending:"Orden Ascendente",descending:"Orden Descendente",remove:"Sin Ordenar"},column:{hide:"Ocultar la columna"},aggregation:{count:"filas totales: ",sum:"total: ",avg:"media: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Fijar a la Izquierda",pinRight:"Fijar a la Derecha",unpin:"Quitar Fijación"},gridMenu:{columns:"Columnas:",importerTitle:"Importar archivo",exporterAllAsCsv:"Exportar todo como csv",exporterVisibleAsCsv:"Exportar vista como csv",exporterSelectedAsCsv:"Exportar selección como csv",exporterAllAsPdf:"Exportar todo como pdf",exporterVisibleAsPdf:"Exportar vista como pdf",exporterSelectedAsPdf:"Exportar selección como pdf",clearAllFilters:"Limpiar todos los filtros"},importer:{noHeaders:"No fue posible derivar los nombres de las columnas, ¿tiene encabezados el archivo?",noObjects:"No fue posible obtener registros, ¿contiene datos el archivo, aparte de los encabezados?",invalidCsv:"No fue posible procesar el archivo, ¿es un CSV válido?",invalidJson:"No fue posible procesar el archivo, ¿es un Json válido?",jsonNotArray:"El archivo json importado debe contener un array, abortando."},pagination:{sizes:"registros por página",totalItems:"registros",of:"de"},grouping:{group:"Agrupar",ungroup:"Desagrupar",aggregate_count:"Agr: Cont",aggregate_sum:"Agr: Sum",aggregate_max:"Agr: Máx",aggregate_min:"Agr: Min",aggregate_avg:"Agr: Prom",aggregate_remove:"Agr: Quitar"}}),$delegate}])}])}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("fa",{aggregate:{label:"قلم"},groupPanel:{description:"عنوان یک ستون را بگیر و به گروهی از آن ستون رها کن."},search:{placeholder:"جستجو...",showingItems:"نمایش اقلام:",selectedItems:"قلم‌های انتخاب شده:",totalItems:"مجموع اقلام:",size:"اندازه‌ی صفحه:",first:"اولین صفحه",next:"صفحه‌ی‌بعدی",previous:"صفحه‌ی‌ قبلی",last:"آخرین صفحه"},menu:{text:"ستون‌های انتخابی:"},sort:{ascending:"ترتیب صعودی",descending:"ترتیب نزولی",remove:"حذف مرتب کردن"},column:{hide:"پنهان‌کردن ستون"},aggregation:{count:"تعداد: ",sum:"مجموع: ",avg:"میانگین: ",min:"کمترین: ",max:"بیشترین: "},pinning:{pinLeft:"پین کردن سمت چپ",pinRight:"پین کردن سمت راست",unpin:"حذف پین"},gridMenu:{columns:"ستون‌ها:",importerTitle:"وارد کردن فایل",exporterAllAsCsv:"خروجی تمام داده‌ها در فایل csv",exporterVisibleAsCsv:"خروجی داده‌های قابل مشاهده در فایل csv",exporterSelectedAsCsv:"خروجی داده‌های انتخاب‌شده در فایل csv",exporterAllAsPdf:"خروجی تمام داده‌ها در فایل pdf",exporterVisibleAsPdf:"خروجی داده‌های قابل مشاهده در فایل pdf",exporterSelectedAsPdf:"خروجی داده‌های انتخاب‌شده در فایل pdf",clearAllFilters:"پاک کردن تمام فیلتر"},importer:{noHeaders:"نام ستون قابل استخراج نیست. آیا فایل عنوان دارد؟",noObjects:"اشیا قابل استخراج نیستند. آیا به جز عنوان‌ها در فایل داده وجود دارد؟",invalidCsv:"فایل قابل پردازش نیست. آیا فرمت  csv  معتبر است؟",invalidJson:"فایل قابل پردازش نیست. آیا فرمت json   معتبر است؟",jsonNotArray:"فایل json وارد شده باید حاوی آرایه باشد. عملیات ساقط شد."},pagination:{sizes:"اقلام در هر صفحه",totalItems:"اقلام",of:"از"},grouping:{group:"گروه‌بندی",ungroup:"حذف گروه‌بندی",aggregate_count:"Agg: تعداد",aggregate_sum:"Agg: جمع",aggregate_max:"Agg: بیشینه",aggregate_min:"Agg: کمینه",aggregate_avg:"Agg: میانگین",aggregate_remove:"Agg: حذف"}}),$delegate}])}])}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("fi",{aggregate:{label:"rivit"},groupPanel:{description:"Raahaa ja pudota otsikko tähän ryhmittääksesi sarakkeen mukaan."},search:{placeholder:"Hae...",showingItems:"Näytetään rivejä:",selectedItems:"Valitut rivit:",totalItems:"Rivejä yht.:",size:"Näytä:",first:"Ensimmäinen sivu",next:"Seuraava sivu",previous:"Edellinen sivu",last:"Viimeinen sivu"},menu:{text:"Valitse sarakkeet:"},sort:{ascending:"Järjestä nouseva",descending:"Järjestä laskeva",remove:"Poista järjestys"},column:{hide:"Piilota sarake"},aggregation:{count:"Rivejä yht.: ",sum:"Summa: ",avg:"K.a.: ",min:"Min: ",max:"Max: "},pinning:{pinLeft:"Lukitse vasemmalle",pinRight:"Lukitse oikealle",unpin:"Poista lukitus"},gridMenu:{columns:"Sarakkeet:",importerTitle:"Tuo tiedosto",exporterAllAsCsv:"Vie tiedot csv-muodossa",exporterVisibleAsCsv:"Vie näkyvä tieto csv-muodossa",exporterSelectedAsCsv:"Vie valittu tieto csv-muodossa",exporterAllAsPdf:"Vie tiedot pdf-muodossa",exporterVisibleAsPdf:"Vie näkyvä tieto pdf-muodossa",exporterSelectedAsPdf:"Vie valittu tieto pdf-muodossa",clearAllFilters:"Puhdista kaikki suodattimet"},importer:{noHeaders:"Sarakkeen nimiä ei voitu päätellä, onko tiedostossa otsikkoriviä?",noObjects:"Tietoja ei voitu lukea, onko tiedostossa muuta kuin otsikkot?",invalidCsv:"Tiedostoa ei voitu käsitellä, oliko se CSV-muodossa?",invalidJson:"Tiedostoa ei voitu käsitellä, oliko se JSON-muodossa?",jsonNotArray:"Tiedosto ei sisältänyt taulukkoa, lopetetaan."}}),$delegate}])}])}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("fr",{headerCell:{aria:{defaultFilterLabel:"Filtre de la colonne",removeFilter:"Supprimer le filtre",columnMenuButtonLabel:"Menu de la colonne"},priority:"Priorité:",filterLabel:"Filtre de la colonne: "},aggregate:{label:"éléments"},groupPanel:{description:"Faites glisser une en-tête de colonne ici pour créer un groupe de colonnes."},search:{placeholder:"Recherche...",showingItems:"Affichage des éléments :",selectedItems:"Éléments sélectionnés :",totalItems:"Nombre total d'éléments:",size:"Taille de page:",first:"Première page",next:"Page Suivante",previous:"Page précédente",last:"Dernière page"},menu:{text:"Choisir des colonnes :"},sort:{ascending:"Trier par ordre croissant",descending:"Trier par ordre décroissant",none:"Aucun tri",remove:"Enlever le tri"},column:{hide:"Cacher la colonne"},aggregation:{count:"lignes totales: ",sum:"total: ",avg:"moy: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Épingler à gauche",pinRight:"Épingler à droite",unpin:"Détacher"},columnMenu:{close:"Fermer"},gridMenu:{aria:{buttonLabel:"Menu du tableau"},columns:"Colonnes:",importerTitle:"Importer un fichier",exporterAllAsCsv:"Exporter toutes les données en CSV",exporterVisibleAsCsv:"Exporter les données visibles en CSV",exporterSelectedAsCsv:"Exporter les données sélectionnées en CSV",exporterAllAsPdf:"Exporter toutes les données en PDF",exporterVisibleAsPdf:"Exporter les données visibles en PDF",exporterSelectedAsPdf:"Exporter les données sélectionnées en PDF",clearAllFilters:"Nettoyez tous les filtres"},importer:{noHeaders:"Impossible de déterminer le nom des colonnes, le fichier possède-t-il une en-tête ?",noObjects:"Aucun objet trouvé, le fichier possède-t-il des données autres que l'en-tête ?",invalidCsv:"Le fichier n'a pas pu être traité, le CSV est-il valide ?",invalidJson:"Le fichier n'a pas pu être traité, le JSON est-il valide ?",jsonNotArray:"Le fichier JSON importé doit contenir un tableau, abandon."},pagination:{aria:{pageToFirst:"Aller à la première page",pageBack:"Page précédente",pageSelected:"Page sélectionnée",pageForward:"Page suivante",pageToLast:"Aller à la dernière page"},sizes:"éléments par page",totalItems:"éléments",through:"à",of:"sur"},grouping:{group:"Grouper",ungroup:"Dégrouper",aggregate_count:"Agg: Compter",aggregate_sum:"Agg: Somme",aggregate_max:"Agg: Max",aggregate_min:"Agg: Min",aggregate_avg:"Agg: Moy",aggregate_remove:"Agg: Retirer"},validate:{error:"Erreur:",minLength:"La valeur doit être supérieure ou égale à THRESHOLD caractères.",maxLength:"La valeur doit être inférieure ou égale à THRESHOLD caractères.",required:"Une valeur est nécéssaire."}}),$delegate}])}])}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("he",{aggregate:{label:"items"},groupPanel:{description:"גרור עמודה לכאן ושחרר בכדי לקבץ עמודה זו."},search:{placeholder:"חפש...",showingItems:"מציג:",selectedItems:'סה"כ נבחרו:',totalItems:'סה"כ רשומות:',size:"תוצאות בדף:",first:"דף ראשון",next:"דף הבא",previous:"דף קודם",last:"דף אחרון"},menu:{text:"בחר עמודות:"},sort:{ascending:"סדר עולה",descending:"סדר יורד",remove:"בטל"},column:{hide:"טור הסתר"},aggregation:{count:"total rows: ",sum:"total: ",avg:"avg: ",min:"min: ",max:"max: "},gridMenu:{columns:"Columns:",importerTitle:"Import file",exporterAllAsCsv:"Export all data as csv",exporterVisibleAsCsv:"Export visible data as csv",exporterSelectedAsCsv:"Export selected data as csv",exporterAllAsPdf:"Export all data as pdf",exporterVisibleAsPdf:"Export visible data as pdf",exporterSelectedAsPdf:"Export selected data as pdf",clearAllFilters:"Clean all filters"},importer:{noHeaders:"Column names were unable to be derived, does the file have a header?",noObjects:"Objects were not able to be derived, was there data in the file other than headers?",invalidCsv:"File was unable to be processed, is it valid CSV?",invalidJson:"File was unable to be processed, is it valid Json?",jsonNotArray:"Imported json file must contain an array, aborting."}}),$delegate}])}])}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("hy",{aggregate:{label:"տվյալներ"},groupPanel:{description:"Ըստ սյան խմբավորելու համար քաշեք և գցեք վերնագիրն այստեղ։"},search:{placeholder:"Փնտրում...",showingItems:"Ցուցադրված տվյալներ՝",selectedItems:"Ընտրված:",totalItems:"Ընդամենը՝",size:"Տողերի քանակը էջում՝",first:"Առաջին էջ",next:"Հաջորդ էջ",previous:"Նախորդ էջ",last:"Վերջին էջ"},menu:{text:"Ընտրել սյուները:"},sort:{ascending:"Աճման կարգով",descending:"Նվազման կարգով",remove:"Հանել "},column:{hide:"Թաքցնել սյունը"},aggregation:{count:"ընդամենը տող՝ ",sum:"ընդամենը՝ ",avg:"միջին՝ ",min:"մին՝ ",max:"մաքս՝ "},pinning:{pinLeft:"Կպցնել ձախ կողմում",pinRight:"Կպցնել աջ կողմում",unpin:"Արձակել"},gridMenu:{columns:"Սյուներ:",importerTitle:"Ներմուծել ֆայլ",exporterAllAsCsv:"Արտահանել ամբողջը CSV",exporterVisibleAsCsv:"Արտահանել երևացող տվյալները CSV",exporterSelectedAsCsv:"Արտահանել ընտրված տվյալները CSV",exporterAllAsPdf:"Արտահանել PDF",exporterVisibleAsPdf:"Արտահանել երևացող տվյալները PDF",exporterSelectedAsPdf:"Արտահանել ընտրված տվյալները PDF",clearAllFilters:"Մաքրել բոլոր ֆիլտրերը"},importer:{noHeaders:"Հնարավոր չեղավ որոշել սյան վերնագրերը։ Արդյո՞ք ֆայլը ունի վերնագրեր։",noObjects:"Հնարավոր չեղավ կարդալ տվյալները։ Արդյո՞ք ֆայլում կան տվյալներ։",invalidCsv:"Հնարավոր չեղավ մշակել ֆայլը։ Արդյո՞ք այն վավեր CSV է։",invalidJson:"Հնարավոր չեղավ մշակել ֆայլը։ Արդյո՞ք այն վավեր Json է։",jsonNotArray:"Ներմուծված json ֆայլը պետք է պարունակի զանգված, կասեցվում է։"}}),$delegate}])}])}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("it",{aggregate:{label:"elementi"},groupPanel:{description:"Trascina un'intestazione all'interno del gruppo della colonna."},search:{placeholder:"Ricerca...",showingItems:"Mostra:",selectedItems:"Selezionati:",totalItems:"Totali:",size:"Tot Pagine:",first:"Prima",next:"Prossima",previous:"Precedente",last:"Ultima"},menu:{text:"Scegli le colonne:"},sort:{ascending:"Asc.",descending:"Desc.",remove:"Annulla ordinamento"},column:{hide:"Nascondi"},aggregation:{count:"righe totali: ",sum:"tot: ",avg:"media: ",min:"minimo: ",max:"massimo: "},pinning:{pinLeft:"Blocca a sx",pinRight:"Blocca a dx",unpin:"Blocca in alto"},gridMenu:{columns:"Colonne:",importerTitle:"Importa",exporterAllAsCsv:"Esporta tutti i dati in CSV",exporterVisibleAsCsv:"Esporta i dati visibili in CSV",exporterSelectedAsCsv:"Esporta i dati selezionati in CSV",exporterAllAsPdf:"Esporta tutti i dati in PDF",exporterVisibleAsPdf:"Esporta i dati visibili in PDF",exporterSelectedAsPdf:"Esporta i dati selezionati in PDF",clearAllFilters:"Pulire tutti i filtri"},importer:{noHeaders:"Impossibile reperire i nomi delle colonne, sicuro che siano indicati all'interno del file?",noObjects:"Impossibile reperire gli oggetti, sicuro che siano indicati all'interno del file?",invalidCsv:"Impossibile elaborare il file, sicuro che sia un CSV?",invalidJson:"Impossibile elaborare il file, sicuro che sia un JSON valido?",jsonNotArray:"Errore! Il file JSON da importare deve contenere un array."},pagination:{aria:{pageToFirst:"Prima",pageBack:"Indietro",pageSelected:"Pagina selezionata",pageForward:"Avanti",pageToLast:"Ultima"},sizes:"elementi per pagina",totalItems:"elementi",through:"a",of:"di"},grouping:{group:"Raggruppa",ungroup:"Separa",aggregate_count:"Agg: N. Elem.",aggregate_sum:"Agg: Somma",aggregate_max:"Agg: Massimo",aggregate_min:"Agg: Minimo",aggregate_avg:"Agg: Media",aggregate_remove:"Agg: Rimuovi"},validate:{error:"Errore:",minLength:"Lunghezza minima pari a THRESHOLD caratteri.",maxLength:"Lunghezza massima pari a THRESHOLD caratteri.",required:"Necessario inserire un valore."}}),$delegate}])}])}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("ja",{aggregate:{label:"項目"},groupPanel:{description:"ここに列ヘッダをドラッグアンドドロップして、その列でグループ化します。"},search:{placeholder:"検索...",showingItems:"表示中の項目:",selectedItems:"選択した項目:",totalItems:"項目の総数:",size:"ページサイズ:",first:"最初のページ",next:"次のページ",previous:"前のページ",last:"前のページ"},menu:{text:"列の選択:"},sort:{ascending:"昇順に並べ替え",descending:"降順に並べ替え",remove:"並べ替えの解除"},column:{hide:"列の非表示"},aggregation:{count:"合計行数: ",sum:"合計: ",avg:"平均: ",min:"最小: ",max:"最大: "},pinning:{pinLeft:"左に固定",pinRight:"右に固定",unpin:"固定解除"},gridMenu:{columns:"列:",importerTitle:"ファイルのインポート",exporterAllAsCsv:"すべてのデータをCSV形式でエクスポート",exporterVisibleAsCsv:"表示中のデータをCSV形式でエクスポート",exporterSelectedAsCsv:"選択したデータをCSV形式でエクスポート",exporterAllAsPdf:"すべてのデータをPDF形式でエクスポート",exporterVisibleAsPdf:"表示中のデータをPDF形式でエクスポート",exporterSelectedAsPdf:"選択したデータをPDF形式でエクスポート",clearAllFilters:"すべてのフィルタを清掃してください"},importer:{noHeaders:"列名を取得できません。ファイルにヘッダが含まれていることを確認してください。",noObjects:"オブジェクトを取得できません。ファイルにヘッダ以外のデータが含まれていることを確認してください。",invalidCsv:"ファイルを処理できません。ファイルが有効なCSV形式であることを確認してください。",invalidJson:"ファイルを処理できません。ファイルが有効なJSON形式であることを確認してください。",jsonNotArray:"インポートしたJSONファイルには配列が含まれている必要があります。処理を中止します。"},pagination:{aria:{pageToFirst:"最初のページ",pageBack:"前のページ",pageSelected:"現在のページ",pageForward:"次のページ",pageToLast:"最後のページ"},sizes:"項目/ページ",totalItems:"項目",through:"から",of:"項目/全"}}),$delegate}])}])}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("ko",{aggregate:{label:"아이템"},groupPanel:{description:"컬럼으로 그룹핑하기 위해서는 컬럼 헤더를 끌어 떨어뜨려 주세요."},search:{placeholder:"검색...",showingItems:"항목 보여주기:",selectedItems:"선택 항목:",totalItems:"전체 항목:",size:"페이지 크기:",first:"첫번째 페이지",next:"다음 페이지",previous:"이전 페이지",last:"마지막 페이지"},menu:{text:"컬럼을 선택하세요:"},sort:{ascending:"오름차순 정렬",descending:"내림차순 정렬",remove:"소팅 제거"},column:{hide:"컬럼 제거"},aggregation:{count:"전체 갯수: ",sum:"전체: ",avg:"평균: ",min:"최소: ",max:"최대: "},pinning:{pinLeft:"왼쪽 핀",pinRight:"오른쪽 핀",unpin:"핀 제거"},gridMenu:{columns:"컬럼:",importerTitle:"파일 가져오기",exporterAllAsCsv:"csv로 모든 데이터 내보내기",exporterVisibleAsCsv:"csv로 보이는 데이터 내보내기",exporterSelectedAsCsv:"csv로 선택된 데이터 내보내기",exporterAllAsPdf:"pdf로 모든 데이터 내보내기",exporterVisibleAsPdf:"pdf로 보이는 데이터 내보내기",exporterSelectedAsPdf:"pdf로 선택 데이터 내보내기",clearAllFilters:"모든 필터를 청소"},importer:{noHeaders:"컬럼명이 지정되어 있지 않습니다. 파일에 헤더가 명시되어 있는지 확인해 주세요.",noObjects:"데이터가 지정되어 있지 않습니다. 데이터가 파일에 있는지 확인해 주세요.",invalidCsv:"파일을 처리할 수 없습니다. 올바른 csv인지 확인해 주세요.",invalidJson:"파일을 처리할 수 없습니다. 올바른 json인지 확인해 주세요.",jsonNotArray:"json 파일은 배열을 포함해야 합니다."},pagination:{sizes:"페이지당 항목",totalItems:"전체 항목"}}),$delegate}])}])}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("nl",{aggregate:{label:"items"},groupPanel:{description:"Sleep hier een kolomnaam heen om op te groeperen."},search:{placeholder:"Zoeken...",showingItems:"Getoonde items:",selectedItems:"Geselecteerde items:",totalItems:"Totaal aantal items:",size:"Items per pagina:",first:"Eerste pagina",next:"Volgende pagina",previous:"Vorige pagina",last:"Laatste pagina"},menu:{text:"Kies kolommen:"},sort:{ascending:"Sorteer oplopend",descending:"Sorteer aflopend",remove:"Verwijder sortering"},column:{hide:"Verberg kolom"},aggregation:{count:"Aantal rijen: ",sum:"Som: ",avg:"Gemiddelde: ",min:"Min: ",max:"Max: "},pinning:{pinLeft:"Zet links vast",pinRight:"Zet rechts vast",unpin:"Maak los"},gridMenu:{columns:"Kolommen:",importerTitle:"Importeer bestand",exporterAllAsCsv:"Exporteer alle data als csv",exporterVisibleAsCsv:"Exporteer zichtbare data als csv",exporterSelectedAsCsv:"Exporteer geselecteerde data als csv",exporterAllAsPdf:"Exporteer alle data als pdf",exporterVisibleAsPdf:"Exporteer zichtbare data als pdf",exporterSelectedAsPdf:"Exporteer geselecteerde data als pdf",clearAllFilters:"Reinig alle filters"},importer:{noHeaders:"Kolomnamen kunnen niet worden afgeleid. Heeft het bestand een header?",noObjects:"Objecten kunnen niet worden afgeleid. Bevat het bestand data naast de headers?",invalidCsv:"Het bestand kan niet verwerkt worden. Is het een valide csv bestand?",invalidJson:"Het bestand kan niet verwerkt worden. Is het valide json?",jsonNotArray:"Het json bestand moet een array bevatten. De actie wordt geannuleerd."},pagination:{sizes:"items per pagina",totalItems:"items",of:"van de"},grouping:{group:"Groepeer",ungroup:"Groepering opheffen",aggregate_count:"Agg: Aantal",aggregate_sum:"Agg: Som",aggregate_max:"Agg: Max",aggregate_min:"Agg: Min",aggregate_avg:"Agg: Gem",aggregate_remove:"Agg: Verwijder"}}),$delegate}])}])}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("no",{headerCell:{aria:{defaultFilterLabel:"Filter for column",removeFilter:"Remove Filter",columnMenuButtonLabel:"Column Menu"},priority:"Priority:",filterLabel:"Filter for column: "},aggregate:{label:"items"},groupPanel:{description:"Drag a column header here and drop it to group by that column."},search:{placeholder:"Search...",showingItems:"Showing Items:",selectedItems:"Selected Items:",totalItems:"Total Items:",size:"Page Size:",first:"First Page",next:"Next Page",previous:"Previous Page",last:"Last Page"},menu:{text:"Choose Columns:"},sort:{ascending:"Sort Ascending",descending:"Sort Descending",none:"Sort None",remove:"Remove Sort"},column:{hide:"Hide Column"},aggregation:{count:"total rows: ",sum:"total: ",avg:"avg: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Pin Left",pinRight:"Pin Right",unpin:"Unpin"},columnMenu:{close:"Close"},gridMenu:{aria:{buttonLabel:"Grid Menu"},columns:"Kolonner:",importerTitle:"Importer fil",exporterAllAsCsv:"Eksporter alle data som csv",exporterVisibleAsCsv:"Eksporter synlige data som csv",exporterSelectedAsCsv:"Eksporter utvalgte data som csv",exporterAllAsPdf:"Eksporter alle data som pdf",exporterVisibleAsPdf:"Eksporter synlige data som pdf",exporterSelectedAsPdf:"Eksporter utvalgte data som pdf",clearAllFilters:"Clear all filters"},importer:{noHeaders:"Column names were unable to be derived, does the file have a header?",noObjects:"Objects were not able to be derived, was there data in the file other than headers?",invalidCsv:"File was unable to be processed, is it valid CSV?",invalidJson:"File was unable to be processed, is it valid Json?",jsonNotArray:"Imported json file must contain an array, aborting."},pagination:{aria:{pageToFirst:"Page to first",pageBack:"Page back",pageSelected:"Selected page",pageForward:"Page forward",pageToLast:"Page to last"},sizes:"items per page",totalItems:"items",through:"through",of:"of"},grouping:{group:"Group",ungroup:"Ungroup",aggregate_count:"Agg: Count",aggregate_sum:"Agg: Sum",aggregate_max:"Agg: Max",aggregate_min:"Agg: Min",aggregate_avg:"Agg: Avg",aggregate_remove:"Agg: Remove"}}),$delegate}])}])}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("pl",{headerCell:{aria:{defaultFilterLabel:"Filter dla kolumny",removeFilter:"Usuń filter",columnMenuButtonLabel:"Menu kolumny"},priority:"Prioritet:",filterLabel:"Filtr dla kolumny: "},aggregate:{label:"pozycji"},groupPanel:{description:"Przeciągnij nagłówek kolumny tutaj, aby pogrupować według niej."},search:{placeholder:"Szukaj...",showingItems:"Widoczne pozycje:",selectedItems:"Zaznaczone pozycje:",totalItems:"Wszystkich pozycji:",size:"Rozmiar strony:",first:"Pierwsza strona",next:"Następna strona",previous:"Poprzednia strona",last:"Ostatnia strona"},menu:{text:"Wybierz kolumny:"},sort:{ascending:"Sortuj rosnąco",descending:"Sortuj malejąco",none:"Brak sortowania",remove:"Wyłącz sortowanie"},column:{hide:"Ukryj kolumne"},aggregation:{count:"Razem pozycji: ",sum:"Razem: ",avg:"Średnia: ",min:"Min: ",max:"Max: "},pinning:{pinLeft:"Przypnij do lewej",pinRight:"Przypnij do prawej",unpin:"Odepnij"},columnMenu:{close:"Zamknij"},gridMenu:{aria:{buttonLabel:"Menu Grida"},columns:"Kolumny:",importerTitle:"Importuj plik",exporterAllAsCsv:"Eksportuj wszystkie dane do csv",exporterVisibleAsCsv:"Eksportuj widoczne dane do csv",exporterSelectedAsCsv:"Eksportuj zaznaczone dane do csv",exporterAllAsPdf:"Eksportuj wszystkie dane do pdf",exporterVisibleAsPdf:"Eksportuj widoczne dane do pdf",exporterSelectedAsPdf:"Eksportuj zaznaczone dane do pdf",clearAllFilters:"Wyczyść filtry"},importer:{noHeaders:"Nie udało się wczytać nazw kolumn. Czy plik posiada nagłówek?",noObjects:"Nie udalo się wczytać pozycji. Czy plik zawiera dane??",invalidCsv:"Nie udało się przetworzyć pliku, jest to prawidlowy plik CSV??",invalidJson:"Nie udało się przetworzyć pliku, jest to prawidlowy plik Json?",jsonNotArray:"Importowany plik json musi zawierać tablicę, importowanie przerwane."},pagination:{aria:{pageToFirst:"Pierwsza strona",pageBack:"Poprzednia strona",pageSelected:"Wybrana strona",pageForward:"Następna strona",pageToLast:"Ostatnia strona"},sizes:"pozycji na stronę",totalItems:"pozycji",through:"do",of:"z"},grouping:{group:"Grupuj",ungroup:"Rozgrupuj",aggregate_count:"Zbiorczo: Razem",aggregate_sum:"Zbiorczo: Suma",aggregate_max:"Zbiorczo: Max",aggregate_min:"Zbiorczo: Min",aggregate_avg:"Zbiorczo: Średnia",aggregate_remove:"Zbiorczo: Usuń"}}),$delegate}])}])}(),function(){angular.module("ui.grid").config(["$provide",function($provide){
$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("pt-br",{headerCell:{aria:{defaultFilterLabel:"Filtro por coluna",removeFilter:"Remover filtro",columnMenuButtonLabel:"Menu coluna"},priority:"Prioridade:",filterLabel:"Filtro por coluna: "},aggregate:{label:"itens"},groupPanel:{description:"Arraste e solte uma coluna aqui para agrupar por essa coluna"},search:{placeholder:"Procurar...",showingItems:"Mostrando os Itens:",selectedItems:"Items Selecionados:",totalItems:"Total de Itens:",size:"Tamanho da Página:",first:"Primeira Página",next:"Próxima Página",previous:"Página Anterior",last:"Última Página"},menu:{text:"Selecione as colunas:"},sort:{ascending:"Ordenar Ascendente",descending:"Ordenar Descendente",none:"Nenhuma Ordem",remove:"Remover Ordenação"},column:{hide:"Esconder coluna"},aggregation:{count:"total de linhas: ",sum:"total: ",avg:"med: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Fixar Esquerda",pinRight:"Fixar Direita",unpin:"Desprender"},columnMenu:{close:"Fechar"},gridMenu:{aria:{buttonLabel:"Menu Grid"},columns:"Colunas:",importerTitle:"Importar arquivo",exporterAllAsCsv:"Exportar todos os dados como csv",exporterVisibleAsCsv:"Exportar dados visíveis como csv",exporterSelectedAsCsv:"Exportar dados selecionados como csv",exporterAllAsPdf:"Exportar todos os dados como pdf",exporterVisibleAsPdf:"Exportar dados visíveis como pdf",exporterSelectedAsPdf:"Exportar dados selecionados como pdf",clearAllFilters:"Limpar todos os filtros"},importer:{noHeaders:"Nomes de colunas não puderam ser derivados. O arquivo tem um cabeçalho?",noObjects:"Objetos não puderam ser derivados. Havia dados no arquivo, além dos cabeçalhos?",invalidCsv:"Arquivo não pode ser processado. É um CSV válido?",invalidJson:"Arquivo não pode ser processado. É um Json válido?",jsonNotArray:"Arquivo json importado tem que conter um array. Abortando."},pagination:{aria:{pageToFirst:"Primeira página",pageBack:"Página anterior",pageSelected:"Página Selecionada",pageForward:"Proxima",pageToLast:"Anterior"},sizes:"itens por página",totalItems:"itens",through:"através dos",of:"de"},grouping:{group:"Agrupar",ungroup:"Desagrupar",aggregate_count:"Agr: Contar",aggregate_sum:"Agr: Soma",aggregate_max:"Agr: Max",aggregate_min:"Agr: Min",aggregate_avg:"Agr: Med",aggregate_remove:"Agr: Remover"}}),$delegate}])}])}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("pt",{headerCell:{aria:{defaultFilterLabel:"Filtro por coluna",removeFilter:"Remover filtro",columnMenuButtonLabel:"Menu coluna"},priority:"Prioridade:",filterLabel:"Filtro por coluna: "},aggregate:{label:"itens"},groupPanel:{description:"Arraste e solte uma coluna aqui para agrupar por essa coluna"},search:{placeholder:"Procurar...",showingItems:"Mostrando os Itens:",selectedItems:"Itens Selecionados:",totalItems:"Total de Itens:",size:"Tamanho da Página:",first:"Primeira Página",next:"Próxima Página",previous:"Página Anterior",last:"Última Página"},menu:{text:"Selecione as colunas:"},sort:{ascending:"Ordenar Ascendente",descending:"Ordenar Descendente",none:"Nenhuma Ordem",remove:"Remover Ordenação"},column:{hide:"Esconder coluna"},aggregation:{count:"total de linhas: ",sum:"total: ",avg:"med: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Fixar Esquerda",pinRight:"Fixar Direita",unpin:"Desprender"},columnMenu:{close:"Fechar"},gridMenu:{aria:{buttonLabel:"Menu Grid"},columns:"Colunas:",importerTitle:"Importar ficheiro",exporterAllAsCsv:"Exportar todos os dados como csv",exporterVisibleAsCsv:"Exportar dados visíveis como csv",exporterSelectedAsCsv:"Exportar dados selecionados como csv",exporterAllAsPdf:"Exportar todos os dados como pdf",exporterVisibleAsPdf:"Exportar dados visíveis como pdf",exporterSelectedAsPdf:"Exportar dados selecionados como pdf",clearAllFilters:"Limpar todos os filtros"},importer:{noHeaders:"Nomes de colunas não puderam ser derivados. O ficheiro tem um cabeçalho?",noObjects:"Objetos não puderam ser derivados. Havia dados no ficheiro, além dos cabeçalhos?",invalidCsv:"Ficheiro não pode ser processado. É um CSV válido?",invalidJson:"Ficheiro não pode ser processado. É um Json válido?",jsonNotArray:"Ficheiro json importado tem que conter um array. Interrompendo."},pagination:{aria:{pageToFirst:"Primeira página",pageBack:"Página anterior",pageSelected:"Página Selecionada",pageForward:"Próxima",pageToLast:"Anterior"},sizes:"itens por página",totalItems:"itens",through:"através dos",of:"de"},grouping:{group:"Agrupar",ungroup:"Desagrupar",aggregate_count:"Agr: Contar",aggregate_sum:"Agr: Soma",aggregate_max:"Agr: Max",aggregate_min:"Agr: Min",aggregate_avg:"Agr: Med",aggregate_remove:"Agr: Remover"}}),$delegate}])}])}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("ro",{headerCell:{aria:{defaultFilterLabel:"Filtru pentru coloana",removeFilter:"Sterge filtru",columnMenuButtonLabel:"Column Menu"},priority:"Prioritate:",filterLabel:"Filtru pentru coloana:"},aggregate:{label:"Elemente"},groupPanel:{description:"Trage un cap de coloana aici pentru a grupa elementele dupa coloana respectiva"},search:{placeholder:"Cauta...",showingItems:"Arata elementele:",selectedItems:"Elementele selectate:",totalItems:"Total elemente:",size:"Marime pagina:",first:"Prima pagina",next:"Pagina urmatoare",previous:"Pagina anterioara",last:"Ultima pagina"},menu:{text:"Alege coloane:"},sort:{ascending:"Ordoneaza crescator",descending:"Ordoneaza descrescator",none:"Fara ordonare",remove:"Sterge ordonarea"},column:{hide:"Ascunde coloana"},aggregation:{count:"total linii: ",sum:"total: ",avg:"medie: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Pin la stanga",pinRight:"Pin la dreapta",unpin:"Sterge pinul"},columnMenu:{close:"Inchide"},gridMenu:{aria:{buttonLabel:"Grid Menu"},columns:"Coloane:",importerTitle:"Incarca fisier",exporterAllAsCsv:"Exporta toate datele ca csv",exporterVisibleAsCsv:"Exporta datele vizibile ca csv",exporterSelectedAsCsv:"Exporta datele selectate ca csv",exporterAllAsPdf:"Exporta toate datele ca pdf",exporterVisibleAsPdf:"Exporta datele vizibile ca pdf",exporterSelectedAsPdf:"Exporta datele selectate ca csv pdf",clearAllFilters:"Sterge toate filtrele"},importer:{noHeaders:"Numele coloanelor nu a putut fi incarcat, acest fisier are un header?",noObjects:"Datele nu au putut fi incarcate, exista date in fisier in afara numelor de coloane?",invalidCsv:"Fisierul nu a putut fi procesat, ati incarcat un CSV valid ?",invalidJson:"Fisierul nu a putut fi procesat, ati incarcat un Json valid?",jsonNotArray:"Json-ul incarcat trebuie sa contina un array, inchidere."},pagination:{aria:{pageToFirst:"Prima pagina",pageBack:"O pagina inapoi",pageSelected:"Pagina selectata",pageForward:"O pagina inainte",pageToLast:"Ultima pagina"},sizes:"Elemente per pagina",totalItems:"elemente",through:"prin",of:"of"},grouping:{group:"Grupeaza",ungroup:"Opreste gruparea",aggregate_count:"Agg: Count",aggregate_sum:"Agg: Sum",aggregate_max:"Agg: Max",aggregate_min:"Agg: Min",aggregate_avg:"Agg: Avg",aggregate_remove:"Agg: Remove"}}),$delegate}])}])}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("ru",{headerCell:{aria:{defaultFilterLabel:"Фильтр столбца",removeFilter:"Удалить фильтр",columnMenuButtonLabel:"Меню столбца"},priority:"Приоритет:",filterLabel:"Фильтр столбца: "},aggregate:{label:"элементы"},groupPanel:{description:"Для группировки по столбцу перетащите сюда его название."},search:{placeholder:"Поиск...",showingItems:"Показать элементы:",selectedItems:"Выбранные элементы:",totalItems:"Всего элементов:",size:"Размер страницы:",first:"Первая страница",next:"Следующая страница",previous:"Предыдущая страница",last:"Последняя страница"},menu:{text:"Выбрать столбцы:"},sort:{ascending:"По возрастанию",descending:"По убыванию",none:"Без сортировки",remove:"Убрать сортировку"},column:{hide:"Спрятать столбец"},aggregation:{count:"всего строк: ",sum:"итого: ",avg:"среднее: ",min:"мин: ",max:"макс: "},pinning:{pinLeft:"Закрепить слева",pinRight:"Закрепить справа",unpin:"Открепить"},columnMenu:{close:"Закрыть"},gridMenu:{aria:{buttonLabel:"Меню"},columns:"Столбцы:",importerTitle:"Импортировать файл",exporterAllAsCsv:"Экспортировать всё в CSV",exporterVisibleAsCsv:"Экспортировать видимые данные в CSV",exporterSelectedAsCsv:"Экспортировать выбранные данные в CSV",exporterAllAsPdf:"Экспортировать всё в PDF",exporterVisibleAsPdf:"Экспортировать видимые данные в PDF",exporterSelectedAsPdf:"Экспортировать выбранные данные в PDF",clearAllFilters:"Очистите все фильтры"},importer:{noHeaders:"Не удалось получить названия столбцов, есть ли в файле заголовок?",noObjects:"Не удалось получить данные, есть ли в файле строки кроме заголовка?",invalidCsv:"Не удалось обработать файл, это правильный CSV-файл?",invalidJson:"Не удалось обработать файл, это правильный JSON?",jsonNotArray:"Импортируемый JSON-файл должен содержать массив, операция отменена."},pagination:{aria:{pageToFirst:"Первая страница",pageBack:"Предыдущая страница",pageSelected:"Выбранная страница",pageForward:"Следующая страница",pageToLast:"Последняя страница"},sizes:"строк на страницу",totalItems:"строк",through:"по",of:"из"},grouping:{group:"Группировать",ungroup:"Разгруппировать",aggregate_count:"Группировать: Count",aggregate_sum:"Для группы: Сумма",aggregate_max:"Для группы: Максимум",aggregate_min:"Для группы: Минимум",aggregate_avg:"Для группы: Среднее",aggregate_remove:"Для группы: Пусто"}}),$delegate}])}])}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("sk",{aggregate:{label:"items"},groupPanel:{description:"Pretiahni sem názov stĺpca pre zoskupenie podľa toho stĺpca."},search:{placeholder:"Hľadaj...",showingItems:"Zobrazujem položky:",selectedItems:"Vybraté položky:",totalItems:"Počet položiek:",size:"Počet:",first:"Prvá strana",next:"Ďalšia strana",previous:"Predchádzajúca strana",last:"Posledná strana"},menu:{text:"Vyberte stĺpce:"},sort:{ascending:"Zotriediť vzostupne",descending:"Zotriediť zostupne",remove:"Vymazať triedenie"},aggregation:{count:"total rows: ",sum:"total: ",avg:"avg: ",min:"min: ",max:"max: "},gridMenu:{columns:"Columns:",importerTitle:"Import file",exporterAllAsCsv:"Export all data as csv",exporterVisibleAsCsv:"Export visible data as csv",exporterSelectedAsCsv:"Export selected data as csv",exporterAllAsPdf:"Export all data as pdf",exporterVisibleAsPdf:"Export visible data as pdf",exporterSelectedAsPdf:"Export selected data as pdf",clearAllFilters:"Clear all filters"},importer:{noHeaders:"Column names were unable to be derived, does the file have a header?",noObjects:"Objects were not able to be derived, was there data in the file other than headers?",invalidCsv:"File was unable to be processed, is it valid CSV?",invalidJson:"File was unable to be processed, is it valid Json?",jsonNotArray:"Imported json file must contain an array, aborting."}}),$delegate}])}])}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("sv",{aggregate:{label:"Artiklar"},groupPanel:{description:"Dra en kolumnrubrik hit och släpp den för att gruppera efter den kolumnen."},search:{placeholder:"Sök...",showingItems:"Visar artiklar:",selectedItems:"Valda artiklar:",totalItems:"Antal artiklar:",size:"Sidstorlek:",first:"Första sidan",next:"Nästa sida",previous:"Föregående sida",last:"Sista sidan"},menu:{text:"Välj kolumner:"},sort:{ascending:"Sortera stigande",descending:"Sortera fallande",remove:"Inaktivera sortering"},column:{hide:"Göm kolumn"},aggregation:{count:"Antal rader: ",sum:"Summa: ",avg:"Genomsnitt: ",min:"Min: ",max:"Max: "},pinning:{pinLeft:"Fäst vänster",pinRight:"Fäst höger",unpin:"Lösgör"},gridMenu:{columns:"Kolumner:",importerTitle:"Importera fil",exporterAllAsCsv:"Exportera all data som CSV",exporterVisibleAsCsv:"Exportera synlig data som CSV",exporterSelectedAsCsv:"Exportera markerad data som CSV",exporterAllAsPdf:"Exportera all data som PDF",exporterVisibleAsPdf:"Exportera synlig data som PDF",exporterSelectedAsPdf:"Exportera markerad data som PDF",clearAllFilters:"Rengör alla filter"},importer:{noHeaders:"Kolumnnamn kunde inte härledas. Har filen ett sidhuvud?",noObjects:"Objekt kunde inte härledas. Har filen data undantaget sidhuvud?",invalidCsv:"Filen kunde inte behandlas, är den en giltig CSV?",invalidJson:"Filen kunde inte behandlas, är den en giltig JSON?",jsonNotArray:"Importerad JSON-fil måste innehålla ett fält. Import avbruten."},pagination:{sizes:"Artiklar per sida",totalItems:"Artiklar"}}),$delegate}])}])}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("ta",{aggregate:{label:"உருப்படிகள்"},groupPanel:{description:"ஒரு பத்தியை குழுவாக அமைக்க அப்பத்தியின் தலைப்பை இங்கே  இழுத்து வரவும் "},search:{placeholder:"தேடல் ...",showingItems:"உருப்படிகளை காண்பித்தல்:",selectedItems:"தேர்ந்தெடுக்கப்பட்ட  உருப்படிகள்:",totalItems:"மொத்த உருப்படிகள்:",size:"பக்க அளவு: ",first:"முதல் பக்கம்",next:"அடுத்த பக்கம்",previous:"முந்தைய பக்கம் ",last:"இறுதி பக்கம்"},menu:{text:"பத்திகளை தேர்ந்தெடு:"},sort:{ascending:"மேலிருந்து கீழாக",descending:"கீழிருந்து மேலாக",remove:"வரிசையை நீக்கு"},column:{hide:"பத்தியை மறைத்து வை "},aggregation:{count:"மொத்த வரிகள்:",sum:"மொத்தம்: ",avg:"சராசரி: ",min:"குறைந்தபட்ச: ",max:"அதிகபட்ச: "},pinning:{pinLeft:"இடதுபுறமாக தைக்க ",pinRight:"வலதுபுறமாக தைக்க",unpin:"பிரி"},gridMenu:{columns:"பத்திகள்:",importerTitle:"கோப்பு : படித்தல்",exporterAllAsCsv:"எல்லா தரவுகளையும் கோப்பாக்கு: csv",exporterVisibleAsCsv:"இருக்கும் தரவுகளை கோப்பாக்கு: csv",exporterSelectedAsCsv:"தேர்ந்தெடுத்த தரவுகளை கோப்பாக்கு: csv",exporterAllAsPdf:"எல்லா தரவுகளையும் கோப்பாக்கு: pdf",exporterVisibleAsPdf:"இருக்கும் தரவுகளை கோப்பாக்கு: pdf",exporterSelectedAsPdf:"தேர்ந்தெடுத்த தரவுகளை கோப்பாக்கு: pdf",clearAllFilters:"Clear all filters"},importer:{noHeaders:"பத்தியின் தலைப்புகளை பெற இயலவில்லை, கோப்பிற்கு தலைப்பு உள்ளதா?",noObjects:"இலக்குகளை உருவாக்க முடியவில்லை, கோப்பில் தலைப்புகளை தவிர தரவு ஏதேனும் உள்ளதா? ",invalidCsv:"சரிவர நடைமுறை படுத்த இயலவில்லை, கோப்பு சரிதானா? - csv",invalidJson:"சரிவர நடைமுறை படுத்த இயலவில்லை, கோப்பு சரிதானா? - json",jsonNotArray:"படித்த கோப்பில் வரிசைகள் உள்ளது, நடைமுறை ரத்து செய் : json"},pagination:{sizes:"உருப்படிகள் / பக்கம்",totalItems:"உருப்படிகள் "},grouping:{group:"குழு",ungroup:"பிரி",aggregate_count:"மதிப்பீட்டு : எண்ணு",aggregate_sum:"மதிப்பீட்டு : கூட்டல்",aggregate_max:"மதிப்பீட்டு : அதிகபட்சம்",aggregate_min:"மதிப்பீட்டு : குறைந்தபட்சம்",aggregate_avg:"மதிப்பீட்டு : சராசரி",aggregate_remove:"மதிப்பீட்டு : நீக்கு"}}),$delegate}])}])}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("tr",{headerCell:{aria:{defaultFilterLabel:"Sütun için filtre",removeFilter:"Filtreyi Kaldır",columnMenuButtonLabel:"Sütun Menüsü"},priority:"Öncelik:",filterLabel:"Sütun için filtre: "},aggregate:{label:"kayıtlar"},groupPanel:{description:"Sütuna göre gruplamak için sütun başlığını buraya sürükleyin ve bırakın."},search:{placeholder:"Arama...",showingItems:"Gösterilen Kayıt:",selectedItems:"Seçili Kayıt:",totalItems:"Toplam Kayıt:",size:"Sayfa Boyutu:",first:"İlk Sayfa",next:"Sonraki Sayfa",previous:"Önceki Sayfa",last:"Son Sayfa"},menu:{text:"Sütunları Seç:"},sort:{ascending:"Artan Sırada Sırala",descending:"Azalan Sırada Sırala",none:"Sıralama Yapma",remove:"Sıralamayı Kaldır"},column:{hide:"Sütunu Gizle"},aggregation:{count:"toplam satır: ",sum:"toplam: ",avg:"ort: ",min:"min: ",max:"maks: "},pinning:{pinLeft:"Sola Sabitle",pinRight:"Sağa Sabitle",unpin:"Sabitlemeyi Kaldır"},columnMenu:{close:"Kapat"},gridMenu:{aria:{buttonLabel:"Tablo Menü"},columns:"Sütunlar:",importerTitle:"Dosya içeri aktar",exporterAllAsCsv:"Bütün veriyi CSV olarak dışarı aktar",exporterVisibleAsCsv:"Görünen veriyi CSV olarak dışarı aktar",exporterSelectedAsCsv:"Seçili veriyi CSV olarak dışarı aktar",exporterAllAsPdf:"Bütün veriyi PDF olarak dışarı aktar",exporterVisibleAsPdf:"Görünen veriyi PDF olarak dışarı aktar",exporterSelectedAsPdf:"Seçili veriyi PDF olarak dışarı aktar",clearAllFilters:"Bütün filtreleri kaldır"},importer:{noHeaders:"Sütun isimleri üretilemiyor, dosyanın bir başlığı var mı?",noObjects:"Nesneler üretilemiyor, dosyada başlıktan başka bir veri var mı?",invalidCsv:"Dosya işlenemedi, geçerli bir CSV dosyası mı?",invalidJson:"Dosya işlenemedi, geçerli bir Json dosyası mı?",jsonNotArray:"Alınan Json dosyasında bir dizi bulunmalıdır, işlem iptal ediliyor."},pagination:{aria:{pageToFirst:"İlk sayfaya",pageBack:"Geri git",pageSelected:"Seçili sayfa",pageForward:"İleri git",pageToLast:"Sona git"},sizes:"Sayfadaki nesne sayısı",totalItems:"kayıtlar",through:"",of:""},grouping:{group:"Grupla",ungroup:"Gruplama",aggregate_count:"Yekun: Sayı",aggregate_sum:"Yekun: Toplam",aggregate_max:"Yekun: Maks",aggregate_min:"Yekun: Min",aggregate_avg:"Yekun: Ort",aggregate_remove:"Yekun: Sil"}}),$delegate}])}])}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("ua",{headerCell:{aria:{defaultFilterLabel:"Фільтр стовпчика",removeFilter:"Видалити фільтр",columnMenuButtonLabel:"Меню ствпчика"},priority:"Пріоритет:",filterLabel:"Фільтр стовпчика: "},aggregate:{label:"елементи"},groupPanel:{description:"Для групування за стовпчиком перетягніть сюди його назву."},search:{placeholder:"Пошук...",showingItems:"Показати елементи:",selectedItems:"Обрані елементи:",totalItems:"Усього елементів:",size:"Розмір сторінки:",first:"Перша сторінка",next:"Наступна сторінка",previous:"Попередня сторінка",last:"Остання сторінка"},menu:{text:"Обрати ствпчики:"},sort:{ascending:"За зростанням",descending:"За спаданням",none:"Без сортування",remove:"Прибрати сортування"},column:{hide:"Приховати стовпчик"},aggregation:{count:"усього рядків: ",sum:"ітого: ",avg:"середнє: ",min:"мін: ",max:"макс: "},pinning:{pinLeft:"Закріпити ліворуч",pinRight:"Закріпити праворуч",unpin:"Відкріпити"},columnMenu:{close:"Закрити"},gridMenu:{aria:{buttonLabel:"Меню"},columns:"Стовпчики:",importerTitle:"Імпортувати файл",exporterAllAsCsv:"Експортувати все в CSV",exporterVisibleAsCsv:"Експортувати видимі дані в CSV",exporterSelectedAsCsv:"Експортувати обрані дані в CSV",exporterAllAsPdf:"Експортувати все в PDF",exporterVisibleAsPdf:"Експортувати видимі дані в PDF",exporterSelectedAsPdf:"Експортувати обрані дані в PDF",clearAllFilters:"Очистити всі фільтри"},importer:{noHeaders:"Не вдалося отримати назви стовпчиків, чи є в файлі заголовок?",noObjects:"Не вдалося отримати дані, чи є в файлі рядки окрім заголовка?",invalidCsv:"Не вдалося обробити файл, чи це коректний CSV-файл?",invalidJson:"Не вдалося обробити файл, чи це коректний JSON?",jsonNotArray:"JSON-файл що імпортується повинен містити масив, операцію скасовано."},pagination:{aria:{pageToFirst:"Перша сторінка",pageBack:"Попередня сторінка",pageSelected:"Обрана сторінка",pageForward:"Наступна сторінка",pageToLast:"Остання сторінка"},sizes:"рядків на сторінку",totalItems:"рядків",through:"по",of:"з"},grouping:{group:"Групувати",ungroup:"Розгрупувати",aggregate_count:"Групувати: Кількість",aggregate_sum:"Для групи: Сума",aggregate_max:"Для групи: Максимум",aggregate_min:"Для групи: Мінімум",aggregate_avg:"Для групи: Серднє",aggregate_remove:"Для групи: Пусто"}}),$delegate}])}])}(),function(){var DIRECTIVE_ALIASES=["uiT","uiTranslate"],FILTER_ALIASES=["t","uiTranslate"],module=angular.module("ui.grid.i18n");module.constant("i18nConstants",{MISSING:"[MISSING]",UPDATE_EVENT:"$uiI18n",LOCALE_DIRECTIVE_ALIAS:"uiI18n",DEFAULT_LANG:"en"}),module.service("i18nService",["$log","i18nConstants","$rootScope",function($log,i18nConstants,$rootScope){var langCache={_langs:{},current:null,get:function(lang){return this._langs[lang.toLowerCase()]},add:function(lang,strings){var lower=lang.toLowerCase();this._langs[lower]||(this._langs[lower]={}),angular.extend(this._langs[lower],strings)},getAllLangs:function(){var langs=[];if(!this._langs)return langs;for(var key in this._langs)langs.push(key);return langs},setCurrent:function(lang){this.current=lang.toLowerCase()},getCurrentLang:function(){return this.current}},service={add:function(langs,stringMaps){"object"==typeof langs?angular.forEach(langs,function(lang){lang&&langCache.add(lang,stringMaps)}):langCache.add(langs,stringMaps)},getAllLangs:function(){return langCache.getAllLangs()},get:function(lang){var language=lang||service.getCurrentLang();return langCache.get(language)},getSafeText:function(path,lang){var language=lang||service.getCurrentLang(),trans=langCache.get(language);if(!trans)return i18nConstants.MISSING;for(var paths=path.split("."),current=trans,i=0;i<paths.length;++i){if(void 0===current[paths[i]]||null===current[paths[i]])return i18nConstants.MISSING;current=current[paths[i]]}return current},setCurrentLang:function(lang){lang&&(langCache.setCurrent(lang),$rootScope.$broadcast(i18nConstants.UPDATE_EVENT))},getCurrentLang:function(){var lang=langCache.getCurrentLang();return lang||(lang=i18nConstants.DEFAULT_LANG,langCache.setCurrent(lang)),lang}};return service}]);var localeDirective=function(i18nService,i18nConstants){return{compile:function(){return{pre:function($scope,$elm,$attrs){var alias=i18nConstants.LOCALE_DIRECTIVE_ALIAS,lang=$scope.$eval($attrs[alias]);lang?$scope.$watch($attrs[alias],function(){i18nService.setCurrentLang(lang)}):$attrs.$$observers&&$attrs.$observe(alias,function(){i18nService.setCurrentLang($attrs[alias]||i18nConstants.DEFAULT_LANG)})}}}}};module.directive("uiI18n",["i18nService","i18nConstants",localeDirective]);var uitDirective=function($parse,i18nService,i18nConstants){return{restrict:"EA",compile:function(){return{pre:function($scope,$elm,$attrs){var observer,alias1=DIRECTIVE_ALIASES[0],alias2=DIRECTIVE_ALIASES[1],token=$attrs[alias1]||$attrs[alias2]||$elm.html(),missing=i18nConstants.MISSING+token;if($attrs.$$observers){var prop=$attrs[alias1]?alias1:alias2;observer=$attrs.$observe(prop,function(result){result&&$elm.html($parse(result)(i18nService.getCurrentLang())||missing)})}var getter=$parse(token),listener=$scope.$on(i18nConstants.UPDATE_EVENT,function(evt){observer?observer($attrs[alias1]||$attrs[alias2]):$elm.html(getter(i18nService.get())||missing)});$scope.$on("$destroy",listener),$elm.html(getter(i18nService.get())||missing)}}}}};angular.forEach(DIRECTIVE_ALIASES,function(alias){module.directive(alias,["$parse","i18nService","i18nConstants",uitDirective])});var uitFilter=function($parse,i18nService,i18nConstants){return function(data){return $parse(data)(i18nService.get())||i18nConstants.MISSING+data}};angular.forEach(FILTER_ALIASES,function(alias){module.filter(alias,["$parse","i18nService","i18nConstants",uitFilter])})}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("zh-cn",{headerCell:{aria:{defaultFilterLabel:"列过滤器",removeFilter:"移除过滤器",columnMenuButtonLabel:"列菜单"},priority:"优先级:",filterLabel:"列过滤器: "},aggregate:{label:"行"},groupPanel:{description:"拖曳表头到此处进行分组"},search:{placeholder:"查找",showingItems:"已显示行数：",selectedItems:"已选择行数：",totalItems:"总行数：",size:"每页显示行数：",first:"首页",next:"下一页",previous:"上一页",last:"末页"},menu:{text:"选择列："},sort:{ascending:"升序",descending:"降序",none:"无序",remove:"取消排序"},column:{hide:"隐藏列"},aggregation:{count:"计数：",sum:"求和：",avg:"均值：",min:"最小值：",max:"最大值："},pinning:{pinLeft:"左侧固定",pinRight:"右侧固定",unpin:"取消固定"},columnMenu:{close:"关闭"},gridMenu:{aria:{buttonLabel:"表格菜单"},columns:"列：",importerTitle:"导入文件",exporterAllAsCsv:"导出全部数据到CSV",exporterVisibleAsCsv:"导出可见数据到CSV",exporterSelectedAsCsv:"导出已选数据到CSV",exporterAllAsPdf:"导出全部数据到PDF",exporterVisibleAsPdf:"导出可见数据到PDF",exporterSelectedAsPdf:"导出已选数据到PDF",clearAllFilters:"清除所有过滤器"},importer:{noHeaders:"无法获取列名，确定文件包含表头？",noObjects:"无法获取数据，确定文件包含数据？",invalidCsv:"无法处理文件，确定是合法的CSV文件？",invalidJson:"无法处理文件，确定是合法的JSON文件？",jsonNotArray:"导入的文件不是JSON数组！"},pagination:{aria:{pageToFirst:"第一页",pageBack:"上一页",pageSelected:"当前页",pageForward:"下一页",pageToLast:"最后一页"},sizes:"行每页",totalItems:"行",through:"至",of:"共"},grouping:{group:"分组",ungroup:"取消分组",aggregate_count:"合计: 计数",aggregate_sum:"合计: 求和",aggregate_max:"合计: 最大",aggregate_min:"合计: 最小",aggregate_avg:"合计: 平均",aggregate_remove:"合计: 移除"}}),$delegate}])}])}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("zh-tw",{aggregate:{label:"行"},groupPanel:{description:"拖曳表頭到此處進行分組"},search:{placeholder:"查找",showingItems:"已顯示行數：",selectedItems:"已選擇行數：",totalItems:"總行數：",size:"每頁顯示行數：",first:"首頁",next:"下壹頁",previous:"上壹頁",last:"末頁"},menu:{text:"選擇列："},sort:{ascending:"升序",descending:"降序",remove:"取消排序"},column:{hide:"隱藏列"},aggregation:{count:"計數：",sum:"求和：",avg:"均值：",min:"最小值：",max:"最大值："},pinning:{pinLeft:"左側固定",pinRight:"右側固定",unpin:"取消固定"},gridMenu:{columns:"列：",importerTitle:"導入文件",exporterAllAsCsv:"導出全部數據到CSV",exporterVisibleAsCsv:"導出可見數據到CSV",exporterSelectedAsCsv:"導出已選數據到CSV",exporterAllAsPdf:"導出全部數據到PDF",exporterVisibleAsPdf:"導出可見數據到PDF",exporterSelectedAsPdf:"導出已選數據到PDF",clearAllFilters:"清除所有过滤器"},importer:{noHeaders:"無法獲取列名，確定文件包含表頭？",noObjects:"無法獲取數據，確定文件包含數據？",invalidCsv:"無法處理文件，確定是合法的CSV文件？",invalidJson:"無法處理文件，確定是合法的JSON文件？",jsonNotArray:"導入的文件不是JSON數組！"},pagination:{sizes:"行每頁",totalItems:"行"}}),$delegate}])}])}(),function(){"use strict";angular.module("ui.grid.autoResize",["ui.grid"]).directive("uiGridAutoResize",["$timeout","gridUtil",function($timeout,gridUtil){return{require:"uiGrid",scope:!1,link:function($scope,$elm,$attrs,uiGridCtrl){function getDimensions(){prevGridHeight=gridUtil.elementHeight($elm),prevGridWidth=gridUtil.elementWidth($elm)}function startTimeout(){clearTimeout(resizeTimeoutId),resizeTimeoutId=setTimeout(function(){var newGridHeight=gridUtil.elementHeight($elm),newGridWidth=gridUtil.elementWidth($elm);newGridHeight!==prevGridHeight||newGridWidth!==prevGridWidth?(uiGridCtrl.grid.gridHeight=newGridHeight,uiGridCtrl.grid.gridWidth=newGridWidth,uiGridCtrl.grid.api.core.raise.gridDimensionChanged(prevGridHeight,prevGridWidth,newGridHeight,newGridWidth),$scope.$apply(function(){uiGridCtrl.grid.refresh().then(function(){getDimensions(),startTimeout()})})):startTimeout()},250)}var prevGridWidth,prevGridHeight;getDimensions();var resizeTimeoutId;startTimeout(),$scope.$on("$destroy",function(){clearTimeout(resizeTimeoutId)})}}}])}(),function(){"use strict";var module=angular.module("ui.grid.cellNav",["ui.grid"]);module.constant("uiGridCellNavConstants",{FEATURE_NAME:"gridCellNav",CELL_NAV_EVENT:"cellNav",direction:{LEFT:0,RIGHT:1,UP:2,DOWN:3,PG_UP:4,PG_DOWN:5},EVENT_TYPE:{KEYDOWN:0,CLICK:1,CLEAR:2}}),module.factory("uiGridCellNavFactory",["gridUtil","uiGridConstants","uiGridCellNavConstants","GridRowColumn","$q",function(gridUtil,uiGridConstants,uiGridCellNavConstants,GridRowColumn,$q){var UiGridCellNav=function(rowContainer,colContainer,leftColContainer,rightColContainer){this.rows=rowContainer.visibleRowCache,this.columns=colContainer.visibleColumnCache,this.leftColumns=leftColContainer?leftColContainer.visibleColumnCache:[],this.rightColumns=rightColContainer?rightColContainer.visibleColumnCache:[],this.bodyContainer=rowContainer};return UiGridCellNav.prototype.getFocusableCols=function(){return this.leftColumns.concat(this.columns,this.rightColumns).filter(function(col){return col.colDef.allowCellFocus})},UiGridCellNav.prototype.getFocusableRows=function(){return this.rows.filter(function(row){return!1!==row.allowCellFocus})},UiGridCellNav.prototype.getNextRowCol=function(direction,curRow,curCol){switch(direction){case uiGridCellNavConstants.direction.LEFT:return this.getRowColLeft(curRow,curCol);case uiGridCellNavConstants.direction.RIGHT:return this.getRowColRight(curRow,curCol);case uiGridCellNavConstants.direction.UP:return this.getRowColUp(curRow,curCol);case uiGridCellNavConstants.direction.DOWN:return this.getRowColDown(curRow,curCol);case uiGridCellNavConstants.direction.PG_UP:return this.getRowColPageUp(curRow,curCol);case uiGridCellNavConstants.direction.PG_DOWN:return this.getRowColPageDown(curRow,curCol)}},UiGridCellNav.prototype.initializeSelection=function(){var focusableCols=this.getFocusableCols(),focusableRows=this.getFocusableRows();if(0===focusableCols.length||0===focusableRows.length)return null;return new GridRowColumn(focusableRows[0],focusableCols[0])},UiGridCellNav.prototype.getRowColLeft=function(curRow,curCol){var focusableCols=this.getFocusableCols(),focusableRows=this.getFocusableRows(),curColIndex=focusableCols.indexOf(curCol),curRowIndex=focusableRows.indexOf(curRow);-1===curColIndex&&(curColIndex=1);var nextColIndex=0===curColIndex?focusableCols.length-1:curColIndex-1;return nextColIndex>curColIndex?0===curRowIndex?new GridRowColumn(curRow,focusableCols[nextColIndex]):new GridRowColumn(focusableRows[curRowIndex-1],focusableCols[nextColIndex]):new GridRowColumn(curRow,focusableCols[nextColIndex])},UiGridCellNav.prototype.getRowColRight=function(curRow,curCol){var focusableCols=this.getFocusableCols(),focusableRows=this.getFocusableRows(),curColIndex=focusableCols.indexOf(curCol),curRowIndex=focusableRows.indexOf(curRow);-1===curColIndex&&(curColIndex=0);var nextColIndex=curColIndex===focusableCols.length-1?0:curColIndex+1;return nextColIndex<curColIndex?curRowIndex===focusableRows.length-1?new GridRowColumn(curRow,focusableCols[nextColIndex]):new GridRowColumn(focusableRows[curRowIndex+1],focusableCols[nextColIndex]):new GridRowColumn(curRow,focusableCols[nextColIndex])},UiGridCellNav.prototype.getRowColDown=function(curRow,curCol){var focusableCols=this.getFocusableCols(),focusableRows=this.getFocusableRows(),curColIndex=focusableCols.indexOf(curCol),curRowIndex=focusableRows.indexOf(curRow);return-1===curColIndex&&(curColIndex=0),curRowIndex===focusableRows.length-1?new GridRowColumn(curRow,focusableCols[curColIndex]):new GridRowColumn(focusableRows[curRowIndex+1],focusableCols[curColIndex])},UiGridCellNav.prototype.getRowColPageDown=function(curRow,curCol){var focusableCols=this.getFocusableCols(),focusableRows=this.getFocusableRows(),curColIndex=focusableCols.indexOf(curCol),curRowIndex=focusableRows.indexOf(curRow);-1===curColIndex&&(curColIndex=0);var pageSize=this.bodyContainer.minRowsToRender();return curRowIndex>=focusableRows.length-pageSize?new GridRowColumn(focusableRows[focusableRows.length-1],focusableCols[curColIndex]):new GridRowColumn(focusableRows[curRowIndex+pageSize],focusableCols[curColIndex])},UiGridCellNav.prototype.getRowColUp=function(curRow,curCol){var focusableCols=this.getFocusableCols(),focusableRows=this.getFocusableRows(),curColIndex=focusableCols.indexOf(curCol),curRowIndex=focusableRows.indexOf(curRow);return-1===curColIndex&&(curColIndex=0),0===curRowIndex?new GridRowColumn(curRow,focusableCols[curColIndex]):new GridRowColumn(focusableRows[curRowIndex-1],focusableCols[curColIndex])},UiGridCellNav.prototype.getRowColPageUp=function(curRow,curCol){var focusableCols=this.getFocusableCols(),focusableRows=this.getFocusableRows(),curColIndex=focusableCols.indexOf(curCol),curRowIndex=focusableRows.indexOf(curRow);-1===curColIndex&&(curColIndex=0);var pageSize=this.bodyContainer.minRowsToRender();return curRowIndex-pageSize<0?new GridRowColumn(focusableRows[0],focusableCols[curColIndex]):new GridRowColumn(focusableRows[curRowIndex-pageSize],focusableCols[curColIndex])},UiGridCellNav}]),
module.service("uiGridCellNavService",["gridUtil","uiGridConstants","uiGridCellNavConstants","$q","uiGridCellNavFactory","GridRowColumn","ScrollEvent",function(gridUtil,uiGridConstants,uiGridCellNavConstants,$q,UiGridCellNav,GridRowColumn,ScrollEvent){var service={initializeGrid:function(grid){grid.registerColumnBuilder(service.cellNavColumnBuilder),grid.cellNav={},grid.cellNav.lastRowCol=null,grid.cellNav.focusedCells=[],service.defaultGridOptions(grid.options);var publicApi={events:{cellNav:{navigate:function(newRowCol,oldRowCol){},viewPortKeyDown:function(event,rowCol){},viewPortKeyPress:function(event,rowCol){}}},methods:{cellNav:{scrollToFocus:function(rowEntity,colDef){return service.scrollToFocus(grid,rowEntity,colDef)},getFocusedCell:function(){return grid.cellNav.lastRowCol},getCurrentSelection:function(){return grid.cellNav.focusedCells},rowColSelectIndex:function(rowCol){for(var index=-1,i=0;i<grid.cellNav.focusedCells.length;i++)if(grid.cellNav.focusedCells[i].col.uid===rowCol.col.uid&&grid.cellNav.focusedCells[i].row.uid===rowCol.row.uid){index=i;break}return index}}}};grid.api.registerEventsFromObject(publicApi.events),grid.api.registerMethodsFromObject(publicApi.methods)},defaultGridOptions:function(gridOptions){gridOptions.modifierKeysToMultiSelectCells=!0===gridOptions.modifierKeysToMultiSelectCells},decorateRenderContainers:function(grid){var rightContainer=grid.hasRightContainer()?grid.renderContainers.right:null,leftContainer=grid.hasLeftContainer()?grid.renderContainers.left:null;null!==leftContainer&&(grid.renderContainers.left.cellNav=new UiGridCellNav(grid.renderContainers.body,leftContainer,rightContainer,grid.renderContainers.body)),null!==rightContainer&&(grid.renderContainers.right.cellNav=new UiGridCellNav(grid.renderContainers.body,rightContainer,grid.renderContainers.body,leftContainer)),grid.renderContainers.body.cellNav=new UiGridCellNav(grid.renderContainers.body,grid.renderContainers.body,leftContainer,rightContainer)},getDirection:function(evt){return evt.keyCode===uiGridConstants.keymap.LEFT||evt.keyCode===uiGridConstants.keymap.TAB&&evt.shiftKey?uiGridCellNavConstants.direction.LEFT:evt.keyCode===uiGridConstants.keymap.RIGHT||evt.keyCode===uiGridConstants.keymap.TAB?uiGridCellNavConstants.direction.RIGHT:evt.keyCode===uiGridConstants.keymap.UP||evt.keyCode===uiGridConstants.keymap.ENTER&&evt.shiftKey?uiGridCellNavConstants.direction.UP:evt.keyCode===uiGridConstants.keymap.PG_UP?uiGridCellNavConstants.direction.PG_UP:evt.keyCode===uiGridConstants.keymap.DOWN||evt.keyCode===uiGridConstants.keymap.ENTER&&!evt.ctrlKey&&!evt.altKey?uiGridCellNavConstants.direction.DOWN:evt.keyCode===uiGridConstants.keymap.PG_DOWN?uiGridCellNavConstants.direction.PG_DOWN:null},cellNavColumnBuilder:function(colDef,col,gridOptions){var promises=[];return colDef.allowCellFocus=void 0===colDef.allowCellFocus||colDef.allowCellFocus,$q.all(promises)},scrollToFocus:function(grid,rowEntity,colDef){var gridRow=null,gridCol=null;return void 0!==rowEntity&&null!==rowEntity&&(gridRow=grid.getRow(rowEntity)),void 0!==colDef&&null!==colDef&&(gridCol=grid.getColumn(colDef.name?colDef.name:colDef.field)),grid.api.core.scrollToIfNecessary(gridRow,gridCol).then(function(){var rowCol={row:gridRow,col:gridCol};null!==gridRow&&null!==gridCol&&grid.cellNav.broadcastCellNav(rowCol)})},getLeftWidth:function(grid,upToCol){var width=0;if(!upToCol)return width;var lastIndex=grid.renderContainers.body.visibleColumnCache.indexOf(upToCol);grid.renderContainers.body.visibleColumnCache.forEach(function(col,index){index<lastIndex&&(width+=col.drawnWidth)});var percentage=0===lastIndex?0:(lastIndex+1)/grid.renderContainers.body.visibleColumnCache.length;return width+=upToCol.drawnWidth*percentage}};return service}]),module.directive("uiGridCellnav",["gridUtil","uiGridCellNavService","uiGridCellNavConstants","uiGridConstants","GridRowColumn","$timeout","$compile",function(gridUtil,uiGridCellNavService,uiGridCellNavConstants,uiGridConstants,GridRowColumn,$timeout,$compile){return{replace:!0,priority:-150,require:"^uiGrid",scope:!1,controller:function(){},compile:function(){return{pre:function($scope,$elm,$attrs,uiGridCtrl){var _scope=$scope,grid=uiGridCtrl.grid;uiGridCellNavService.initializeGrid(grid),uiGridCtrl.cellNav={},uiGridCtrl.cellNav.makeRowCol=function(obj){return obj instanceof GridRowColumn||(obj=new GridRowColumn(obj.row,obj.col)),obj},uiGridCtrl.cellNav.getActiveCell=function(){var elms=$elm[0].getElementsByClassName("ui-grid-cell-focus");if(elms.length>0)return elms[0]},uiGridCtrl.cellNav.broadcastCellNav=grid.cellNav.broadcastCellNav=function(newRowCol,modifierDown,originEvt){modifierDown=!(void 0===modifierDown||!modifierDown),newRowCol=uiGridCtrl.cellNav.makeRowCol(newRowCol),uiGridCtrl.cellNav.broadcastFocus(newRowCol,modifierDown,originEvt),_scope.$broadcast(uiGridCellNavConstants.CELL_NAV_EVENT,newRowCol,modifierDown,originEvt)},uiGridCtrl.cellNav.clearFocus=grid.cellNav.clearFocus=function(){grid.cellNav.focusedCells=[],_scope.$broadcast(uiGridCellNavConstants.CELL_NAV_EVENT)},uiGridCtrl.cellNav.broadcastFocus=function(rowCol,modifierDown,originEvt){modifierDown=!(void 0===modifierDown||!modifierDown),rowCol=uiGridCtrl.cellNav.makeRowCol(rowCol);var row=rowCol.row,col=rowCol.col,rowColSelectIndex=uiGridCtrl.grid.api.cellNav.rowColSelectIndex(rowCol);if(null===grid.cellNav.lastRowCol||-1===rowColSelectIndex){var newRowCol=new GridRowColumn(row,col);null!==grid.cellNav.lastRowCol&&grid.cellNav.lastRowCol.row===newRowCol.row&&grid.cellNav.lastRowCol.col===newRowCol.col||(grid.api.cellNav.raise.navigate(newRowCol,grid.cellNav.lastRowCol),grid.cellNav.lastRowCol=newRowCol),uiGridCtrl.grid.options.modifierKeysToMultiSelectCells&&modifierDown?grid.cellNav.focusedCells.push(rowCol):grid.cellNav.focusedCells=[rowCol]}else grid.options.modifierKeysToMultiSelectCells&&modifierDown&&rowColSelectIndex>=0&&grid.cellNav.focusedCells.splice(rowColSelectIndex,1)},uiGridCtrl.cellNav.handleKeyDown=function(evt){var direction=uiGridCellNavService.getDirection(evt);if(null===direction)return null;var containerId="body";evt.uiGridTargetRenderContainerId&&(containerId=evt.uiGridTargetRenderContainerId);var lastRowCol=uiGridCtrl.grid.api.cellNav.getFocusedCell();if(lastRowCol){var rowCol=uiGridCtrl.grid.renderContainers[containerId].cellNav.getNextRowCol(direction,lastRowCol.row,lastRowCol.col),focusableCols=uiGridCtrl.grid.renderContainers[containerId].cellNav.getFocusableCols(),rowColSelectIndex=uiGridCtrl.grid.api.cellNav.rowColSelectIndex(rowCol);return direction===uiGridCellNavConstants.direction.LEFT&&rowCol.col===focusableCols[focusableCols.length-1]&&rowCol.row===lastRowCol.row&&evt.keyCode===uiGridConstants.keymap.TAB&&evt.shiftKey?(grid.cellNav.focusedCells.splice(rowColSelectIndex,1),uiGridCtrl.cellNav.clearFocus(),!0):direction!==uiGridCellNavConstants.direction.RIGHT||rowCol.col!==focusableCols[0]||rowCol.row!==lastRowCol.row||evt.keyCode!==uiGridConstants.keymap.TAB||evt.shiftKey?(grid.scrollToIfNecessary(rowCol.row,rowCol.col).then(function(){uiGridCtrl.cellNav.broadcastCellNav(rowCol)}),evt.stopPropagation(),evt.preventDefault(),!1):(grid.cellNav.focusedCells.splice(rowColSelectIndex,1),uiGridCtrl.cellNav.clearFocus(),!0)}}},post:function($scope,$elm,$attrs,uiGridCtrl){var grid=uiGridCtrl.grid;!function(){var ariaNotifierDomElt='<div id="'+grid.id+'-aria-speakable" class="ui-grid-a11y-ariascreenreader-speakable ui-grid-offscreen" aria-live="assertive" role="region" aria-atomic="true" aria-hidden="false" aria-relevant="additions" >&nbsp;</div>',ariaNotifier=$compile(ariaNotifierDomElt)($scope);$elm.prepend(ariaNotifier),$scope.$on(uiGridCellNavConstants.CELL_NAV_EVENT,function(evt,rowCol,modifierDown,originEvt){if(!originEvt||"focus"!==originEvt.type){for(var values=[],currentSelection=grid.api.cellNav.getCurrentSelection(),i=0;i<currentSelection.length;i++)values.push(grid.getCellDisplayValue(currentSelection[i].row,currentSelection[i].col));var cellText=values.toString();!function(text){text!==ariaNotifier.text()&&(ariaNotifier[0].style.clip="rect(0px,0px,0px,0px)",ariaNotifier[0].innerHTML="",ariaNotifier[0].style.visibility="hidden",ariaNotifier[0].style.visibility="visible",""!==text&&(ariaNotifier[0].style.clip="auto",ariaNotifier[0].appendChild(document.createTextNode(text+" ")),ariaNotifier[0].style.visibility="hidden",ariaNotifier[0].style.visibility="visible"))}(cellText)}})}()}}}}}]),module.directive("uiGridRenderContainer",["$timeout","$document","gridUtil","uiGridConstants","uiGridCellNavService","$compile","uiGridCellNavConstants",function($timeout,$document,gridUtil,uiGridConstants,uiGridCellNavService,$compile,uiGridCellNavConstants){return{replace:!0,priority:-99999,require:["^uiGrid","uiGridRenderContainer","?^uiGridCellnav"],scope:!1,compile:function(){return{post:function($scope,$elm,$attrs,controllers){var uiGridCtrl=controllers[0],renderContainerCtrl=controllers[1],uiGridCellnavCtrl=controllers[2];if(uiGridCtrl.grid.api.cellNav){var containerId=renderContainerCtrl.containerId,grid=uiGridCtrl.grid;if(uiGridCellNavService.decorateRenderContainers(grid),"body"===containerId){uiGridCtrl.grid.options.modifierKeysToMultiSelectCells?$elm.attr("aria-multiselectable",!0):$elm.attr("aria-multiselectable",!1);var focuser=$compile('<div class="ui-grid-focuser" role="region" aria-live="assertive" aria-atomic="false" tabindex="0" aria-controls="'+grid.id+"-aria-speakable "+grid.id+'-grid-container" aria-owns="'+grid.id+'-grid-container"></div>')($scope);$elm.append(focuser),focuser.on("focus",function(evt){evt.uiGridTargetRenderContainerId=containerId;var rowCol=uiGridCtrl.grid.api.cellNav.getFocusedCell();null===rowCol&&(rowCol=uiGridCtrl.grid.renderContainers[containerId].cellNav.getNextRowCol(uiGridCellNavConstants.direction.DOWN,null,null),rowCol.row&&rowCol.col&&uiGridCtrl.cellNav.broadcastCellNav(rowCol))}),uiGridCellnavCtrl.setAriaActivedescendant=function(id){$elm.attr("aria-activedescendant",id)},uiGridCellnavCtrl.removeAriaActivedescendant=function(id){$elm.attr("aria-activedescendant")===id&&$elm.attr("aria-activedescendant","")},uiGridCtrl.focus=function(){gridUtil.focus.byElement(focuser[0])};var viewPortKeyDownWasRaisedForRowCol=null;focuser.on("keydown",function(evt){evt.uiGridTargetRenderContainerId=containerId;var rowCol=uiGridCtrl.grid.api.cellNav.getFocusedCell();null===uiGridCtrl.cellNav.handleKeyDown(evt)&&(uiGridCtrl.grid.api.cellNav.raise.viewPortKeyDown(evt,rowCol),viewPortKeyDownWasRaisedForRowCol=rowCol)}),focuser.on("keypress",function(evt){viewPortKeyDownWasRaisedForRowCol&&($timeout(function(){uiGridCtrl.grid.api.cellNav.raise.viewPortKeyPress(evt,viewPortKeyDownWasRaisedForRowCol)},4),viewPortKeyDownWasRaisedForRowCol=null)}),$scope.$on("$destroy",function(){focuser.off()})}}}}}}}]),module.directive("uiGridViewport",["$timeout","$document","gridUtil","uiGridConstants","uiGridCellNavService","uiGridCellNavConstants","$log","$compile",function($timeout,$document,gridUtil,uiGridConstants,uiGridCellNavService,uiGridCellNavConstants,$log,$compile){return{replace:!0,priority:-99999,require:["^uiGrid","^uiGridRenderContainer","?^uiGridCellnav"],scope:!1,compile:function(){return{pre:function($scope,$elm,$attrs,uiGridCtrl){},post:function($scope,$elm,$attrs,controllers){var uiGridCtrl=controllers[0],renderContainerCtrl=controllers[1];if(uiGridCtrl.grid.api.cellNav){if("body"===renderContainerCtrl.containerId){var grid=uiGridCtrl.grid;grid.api.core.on.scrollBegin($scope,function(args){var lastRowCol=uiGridCtrl.grid.api.cellNav.getFocusedCell();null!==lastRowCol&&renderContainerCtrl.colContainer.containsColumn(lastRowCol.col)&&uiGridCtrl.cellNav.clearFocus()}),grid.api.core.on.scrollEnd($scope,function(args){var lastRowCol=uiGridCtrl.grid.api.cellNav.getFocusedCell();null!==lastRowCol&&renderContainerCtrl.colContainer.containsColumn(lastRowCol.col)&&uiGridCtrl.cellNav.broadcastCellNav(lastRowCol)}),grid.api.cellNav.on.navigate($scope,function(){uiGridCtrl.focus()})}}}}}}}]),module.directive("uiGridCell",["$timeout","$document","uiGridCellNavService","gridUtil","uiGridCellNavConstants","uiGridConstants","GridRowColumn",function($timeout,$document,uiGridCellNavService,gridUtil,uiGridCellNavConstants,uiGridConstants,GridRowColumn){return{priority:-150,restrict:"A",require:["^uiGrid","?^uiGridCellnav"],scope:!1,link:function($scope,$elm,$attrs,controllers){function preventMouseDown(evt){evt.preventDefault()}function setFocused(){if(!$scope.focused){$elm.find("div").addClass("ui-grid-cell-focus"),$elm.attr("aria-selected",!0),uiGridCellnavCtrl.setAriaActivedescendant($elm.attr("id")),$scope.focused=!0}}function clearFocus(){if($scope.focused){$elm.find("div").removeClass("ui-grid-cell-focus"),$elm.attr("aria-selected",!1),uiGridCellnavCtrl.removeAriaActivedescendant($elm.attr("id")),$scope.focused=!1}}var uiGridCtrl=controllers[0],uiGridCellnavCtrl=controllers[1];if(uiGridCtrl.grid.api.cellNav&&$scope.col.colDef.allowCellFocus){var grid=uiGridCtrl.grid;$scope.focused=!1,$elm.attr("tabindex",-1),$elm.find("div").on("click",function(evt){uiGridCtrl.cellNav.broadcastCellNav(new GridRowColumn($scope.row,$scope.col),evt.ctrlKey||evt.metaKey,evt),evt.stopPropagation(),$scope.$apply()}),$elm.on("mousedown",preventMouseDown),uiGridCtrl.grid.api.edit&&(uiGridCtrl.grid.api.edit.on.beginCellEdit($scope,function(){$elm.off("mousedown",preventMouseDown)}),uiGridCtrl.grid.api.edit.on.afterCellEdit($scope,function(){$elm.on("mousedown",preventMouseDown)}),uiGridCtrl.grid.api.edit.on.cancelCellEdit($scope,function(){$elm.on("mousedown",preventMouseDown)})),$elm.on("focus",function(evt){uiGridCtrl.cellNav.broadcastCellNav(new GridRowColumn($scope.row,$scope.col),!1,evt),evt.stopPropagation(),$scope.$apply()}),$scope.$on(uiGridCellNavConstants.CELL_NAV_EVENT,function(evt,rowCol,modifierDown){grid.cellNav.focusedCells.some(function(focusedRowCol,index){return focusedRowCol.row===$scope.row&&focusedRowCol.col===$scope.col})?setFocused():clearFocus()}),$scope.$on("$destroy",function(){$elm.find("div").off(),$elm.off()})}}}}])}(),function(){"use strict";var module=angular.module("ui.grid.edit",["ui.grid"]);module.constant("uiGridEditConstants",{EDITABLE_CELL_TEMPLATE:/EDITABLE_CELL_TEMPLATE/g,EDITABLE_CELL_DIRECTIVE:/editable_cell_directive/g,events:{BEGIN_CELL_EDIT:"uiGridEventBeginCellEdit",END_CELL_EDIT:"uiGridEventEndCellEdit",CANCEL_CELL_EDIT:"uiGridEventCancelCellEdit"}}),module.service("uiGridEditService",["$q","uiGridConstants","gridUtil",function($q,uiGridConstants,gridUtil){var service={initializeGrid:function(grid){service.defaultGridOptions(grid.options),grid.registerColumnBuilder(service.editColumnBuilder),grid.edit={};var publicApi={events:{edit:{afterCellEdit:function(rowEntity,colDef,newValue,oldValue){},beginCellEdit:function(rowEntity,colDef,triggerEvent){},cancelCellEdit:function(rowEntity,colDef){}}},methods:{edit:{}}};grid.api.registerEventsFromObject(publicApi.events)},defaultGridOptions:function(gridOptions){gridOptions.cellEditableCondition=void 0===gridOptions.cellEditableCondition||gridOptions.cellEditableCondition,gridOptions.enableCellEditOnFocus=void 0!==gridOptions.enableCellEditOnFocus&&gridOptions.enableCellEditOnFocus},editColumnBuilder:function(colDef,col,gridOptions){var promises=[];return colDef.enableCellEdit=void 0===colDef.enableCellEdit?void 0===gridOptions.enableCellEdit?"object"!==colDef.type:gridOptions.enableCellEdit:colDef.enableCellEdit,colDef.cellEditableCondition=void 0===colDef.cellEditableCondition?gridOptions.cellEditableCondition:colDef.cellEditableCondition,colDef.enableCellEdit&&(colDef.editableCellTemplate=colDef.editableCellTemplate||gridOptions.editableCellTemplate||"ui-grid/cellEditor",promises.push(gridUtil.getTemplate(colDef.editableCellTemplate).then(function(template){col.editableCellTemplate=template},function(res){throw new Error("Couldn't fetch/use colDef.editableCellTemplate '"+colDef.editableCellTemplate+"'")}))),colDef.enableCellEditOnFocus=void 0===colDef.enableCellEditOnFocus?gridOptions.enableCellEditOnFocus:colDef.enableCellEditOnFocus,$q.all(promises)},isStartEditKey:function(evt){return!(evt.metaKey||evt.keyCode===uiGridConstants.keymap.ESC||evt.keyCode===uiGridConstants.keymap.SHIFT||evt.keyCode===uiGridConstants.keymap.CTRL||evt.keyCode===uiGridConstants.keymap.ALT||evt.keyCode===uiGridConstants.keymap.WIN||evt.keyCode===uiGridConstants.keymap.CAPSLOCK||evt.keyCode===uiGridConstants.keymap.LEFT||evt.keyCode===uiGridConstants.keymap.TAB&&evt.shiftKey||evt.keyCode===uiGridConstants.keymap.RIGHT||evt.keyCode===uiGridConstants.keymap.TAB||evt.keyCode===uiGridConstants.keymap.UP||evt.keyCode===uiGridConstants.keymap.ENTER&&evt.shiftKey||evt.keyCode===uiGridConstants.keymap.DOWN||evt.keyCode===uiGridConstants.keymap.ENTER)}};return service}]),module.directive("uiGridEdit",["gridUtil","uiGridEditService",function(gridUtil,uiGridEditService){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function($scope,$elm,$attrs,uiGridCtrl){uiGridEditService.initializeGrid(uiGridCtrl.grid)},post:function($scope,$elm,$attrs,uiGridCtrl){}}}}}]),module.directive("uiGridViewport",["uiGridEditConstants",function(uiGridEditConstants){return{replace:!0,priority:-99998,require:["^uiGrid","^uiGridRenderContainer"],scope:!1,compile:function(){return{post:function($scope,$elm,$attrs,controllers){var uiGridCtrl=controllers[0];if(uiGridCtrl.grid.api.edit&&uiGridCtrl.grid.api.cellNav){"body"===controllers[1].containerId&&($scope.$on(uiGridEditConstants.events.CANCEL_CELL_EDIT,function(){uiGridCtrl.focus()}),$scope.$on(uiGridEditConstants.events.END_CELL_EDIT,function(){uiGridCtrl.focus()}))}}}}}}]),module.directive("uiGridCell",["$compile","$injector","$timeout","uiGridConstants","uiGridEditConstants","gridUtil","$parse","uiGridEditService","$rootScope","$q",function($compile,$injector,$timeout,uiGridConstants,uiGridEditConstants,gridUtil,$parse,uiGridEditService,$rootScope,$q){var touchstartTimeout=500;if($injector.has("uiGridCellNavService")){$injector.get("uiGridCellNavService")}return{priority:-100,restrict:"A",scope:!1,require:"?^uiGrid",link:function($scope,$elm,$attrs,uiGridCtrl){function registerBeginEditEvents(){$elm.on("dblclick",beginEdit),$elm.on("touchstart",touchStart),uiGridCtrl&&uiGridCtrl.grid.api.cellNav&&(viewPortKeyDownDereg=uiGridCtrl.grid.api.cellNav.on.viewPortKeyDown($scope,function(evt,rowCol){null!==rowCol&&(rowCol.row!==$scope.row||rowCol.col!==$scope.col||$scope.col.colDef.enableCellEditOnFocus||beginEditKeyDown(evt))}),cellNavNavigateDereg=uiGridCtrl.grid.api.cellNav.on.navigate($scope,function(newRowCol,oldRowCol){$scope.col.colDef.enableCellEditOnFocus&&(oldRowCol&&newRowCol.row===oldRowCol.row&&newRowCol.col===oldRowCol.col||newRowCol.row!==$scope.row||newRowCol.col!==$scope.col||$timeout(function(){beginEdit()}))})),$scope.beginEditEventsWired=!0}function touchStart(event){void 0!==event.originalEvent&&void 0!==event.originalEvent&&(event=event.originalEvent),$elm.on("touchend",touchEnd),cancelTouchstartTimeout=$timeout(function(){},touchstartTimeout),cancelTouchstartTimeout.then(function(){setTimeout(beginEdit,0),$elm.off("touchend",touchEnd)})}function touchEnd(event){$timeout.cancel(cancelTouchstartTimeout),$elm.off("touchend",touchEnd)}function cancelBeginEditEvents(){$elm.off("dblclick",beginEdit),$elm.off("keydown",beginEditKeyDown),$elm.off("touchstart",touchStart),cellNavNavigateDereg(),viewPortKeyDownDereg(),$scope.beginEditEventsWired=!1}function beginEditKeyDown(evt){uiGridEditService.isStartEditKey(evt)&&beginEdit(evt)}function shouldEdit(col,row){return!row.isSaving&&(angular.isFunction(col.colDef.cellEditableCondition)?col.colDef.cellEditableCondition($scope):col.colDef.cellEditableCondition)}function beginEdit(triggerEvent){$scope.grid.api.core.scrollToIfNecessary($scope.row,$scope.col).then(function(){beginEditAfterScroll(triggerEvent)})}function beginEditAfterScroll(triggerEvent){if(!inEdit&&shouldEdit($scope.col,$scope.row)){var modelField=$scope.row.getQualifiedColField($scope.col);$scope.col.colDef.editModelField&&(modelField=gridUtil.preEval("row.entity."+$scope.col.colDef.editModelField)),cellModel=$parse(modelField),origCellValue=cellModel($scope),html=$scope.col.editableCellTemplate,html=html.replace(uiGridConstants.MODEL_COL_FIELD,modelField),html=html.replace(uiGridConstants.COL_FIELD,"grid.getCellValue(row, col)");var optionFilter=$scope.col.colDef.editDropdownFilter?"|"+$scope.col.colDef.editDropdownFilter:"";html=html.replace(uiGridConstants.CUSTOM_FILTERS,optionFilter);var inputType="text";switch($scope.col.colDef.type){case"boolean":inputType="checkbox";break;case"number":inputType="number";break;case"date":inputType="date"}html=html.replace("INPUT_TYPE",inputType);var editDropdownOptionsFunction=$scope.col.colDef.editDropdownOptionsFunction;if(editDropdownOptionsFunction)$q.when(editDropdownOptionsFunction($scope.row.entity,$scope.col.colDef)).then(function(result){$scope.editDropdownOptionsArray=result});else{var editDropdownRowEntityOptionsArrayPath=$scope.col.colDef.editDropdownRowEntityOptionsArrayPath;$scope.editDropdownOptionsArray=editDropdownRowEntityOptionsArrayPath?resolveObjectFromPath($scope.row.entity,editDropdownRowEntityOptionsArrayPath):$scope.col.colDef.editDropdownOptionsArray}$scope.editDropdownIdLabel=$scope.col.colDef.editDropdownIdLabel?$scope.col.colDef.editDropdownIdLabel:"id",$scope.editDropdownValueLabel=$scope.col.colDef.editDropdownValueLabel?$scope.col.colDef.editDropdownValueLabel:"value";var createEditor=function(){inEdit=!0,cancelBeginEditEvents();var cellElement=angular.element(html);$elm.append(cellElement),editCellScope=$scope.$new(),$compile(cellElement)(editCellScope),angular.element($elm.children()[0]).addClass("ui-grid-cell-contents-hidden")};$rootScope.$$phase?createEditor():$scope.$apply(createEditor);var deregOnGridScroll=$scope.col.grid.api.core.on.scrollBegin($scope,function(){$scope.grid.disableScrolling||(endEdit(),$scope.grid.api.edit.raise.afterCellEdit($scope.row.entity,$scope.col.colDef,cellModel($scope),origCellValue),deregOnGridScroll(),deregOnEndCellEdit(),deregOnCancelCellEdit())}),deregOnEndCellEdit=$scope.$on(uiGridEditConstants.events.END_CELL_EDIT,function(){endEdit(),$scope.grid.api.edit.raise.afterCellEdit($scope.row.entity,$scope.col.colDef,cellModel($scope),origCellValue),deregOnEndCellEdit(),deregOnGridScroll(),deregOnCancelCellEdit()}),deregOnCancelCellEdit=$scope.$on(uiGridEditConstants.events.CANCEL_CELL_EDIT,function(){cancelEdit(),deregOnCancelCellEdit(),deregOnGridScroll(),deregOnEndCellEdit()});$scope.$broadcast(uiGridEditConstants.events.BEGIN_CELL_EDIT,triggerEvent),$timeout(function(){$scope.grid.api.edit.raise.beginCellEdit($scope.row.entity,$scope.col.colDef,triggerEvent)})}}function endEdit(){if($scope.grid.disableScrolling=!1,inEdit){uiGridCtrl&&uiGridCtrl.grid.api.cellNav&&uiGridCtrl.focus();var gridCellContentsEl=angular.element($elm.children()[0]);editCellScope.$destroy();for(var children=$elm.children(),i=1;i<children.length;i++)angular.element(children[i]).remove();gridCellContentsEl.removeClass("ui-grid-cell-contents-hidden"),inEdit=!1,registerBeginEditEvents(),$scope.grid.api.core.notifyDataChange(uiGridConstants.dataChange.EDIT)}}function cancelEdit(){$scope.grid.disableScrolling=!1,inEdit&&(cellModel.assign($scope,origCellValue),$scope.$apply(),$scope.grid.api.edit.raise.cancelCellEdit($scope.row.entity,$scope.col.colDef),endEdit())}function resolveObjectFromPath(object,path){path=path.replace(/\[(\w+)\]/g,".$1"),path=path.replace(/^\./,"");for(var a=path.split(".");a.length;){var n=a.shift();if(!(n in object))return;object=object[n]}return object}var html,origCellValue,cellModel,cancelTouchstartTimeout,editCellScope,inEdit=!1;if($scope.col.colDef.enableCellEdit){var cellNavNavigateDereg=function(){},viewPortKeyDownDereg=function(){},setEditable=function(){$scope.col.colDef.enableCellEdit&&!1!==$scope.row.enableCellEdit?$scope.beginEditEventsWired||registerBeginEditEvents():$scope.beginEditEventsWired&&cancelBeginEditEvents()};setEditable();var rowWatchDereg=$scope.$watch("row",function(n,o){n!==o&&setEditable()});$scope.$on("$destroy",rowWatchDereg)}}}}]),module.directive("uiGridEditor",["gridUtil","uiGridConstants","uiGridEditConstants","$timeout","uiGridEditService",function(gridUtil,uiGridConstants,uiGridEditConstants,$timeout,uiGridEditService){return{scope:!0,require:["?^uiGrid","?^uiGridRenderContainer","ngModel"],compile:function(){return{pre:function($scope,$elm,$attrs){},post:function($scope,$elm,$attrs,controllers){var uiGridCtrl,renderContainerCtrl,ngModel;controllers[0]&&(uiGridCtrl=controllers[0]),controllers[1]&&(renderContainerCtrl=controllers[1]),controllers[2]&&(ngModel=controllers[2]),$scope.$on(uiGridEditConstants.events.BEGIN_CELL_EDIT,function(evt,triggerEvent){if($timeout(function(){if($elm[0].focus(),!$elm[0].select||!$scope.col.colDef.enableCellEditOnFocus&&uiGridCtrl&&uiGridCtrl.grid.api.cellNav)try{$elm[0].setSelectionRange($elm[0].value.length,$elm[0].value.length)}catch(ex){}else $elm[0].select()}),uiGridCtrl&&uiGridCtrl.grid.api.cellNav)var viewPortKeyDownUnregister=uiGridCtrl.grid.api.cellNav.on.viewPortKeyPress($scope,function(evt,rowCol){uiGridEditService.isStartEditKey(evt)&&(ngModel.$setViewValue(String.fromCharCode("number"==typeof evt.which?evt.which:evt.keyCode),evt),ngModel.$render()),viewPortKeyDownUnregister()});$elm.on("blur",function(evt){$scope.stopEdit(evt)})}),$scope.deepEdit=!1,$scope.stopEdit=function(evt){$scope.inputForm&&!$scope.inputForm.$valid?(evt.stopPropagation(),$scope.$emit(uiGridEditConstants.events.CANCEL_CELL_EDIT)):$scope.$emit(uiGridEditConstants.events.END_CELL_EDIT),$scope.deepEdit=!1},$elm.on("click",function(evt){"checkbox"!==$elm[0].type&&($scope.deepEdit=!0,$timeout(function(){$scope.grid.disableScrolling=!0}))}),$elm.on("keydown",function(evt){switch(evt.keyCode){case uiGridConstants.keymap.ESC:evt.stopPropagation(),$scope.$emit(uiGridEditConstants.events.CANCEL_CELL_EDIT)}if(!$scope.deepEdit||evt.keyCode!==uiGridConstants.keymap.LEFT&&evt.keyCode!==uiGridConstants.keymap.RIGHT&&evt.keyCode!==uiGridConstants.keymap.UP&&evt.keyCode!==uiGridConstants.keymap.DOWN)if(uiGridCtrl&&uiGridCtrl.grid.api.cellNav)evt.uiGridTargetRenderContainerId=renderContainerCtrl.containerId,null!==uiGridCtrl.cellNav.handleKeyDown(evt)&&$scope.stopEdit(evt);else switch(evt.keyCode){case uiGridConstants.keymap.ENTER:case uiGridConstants.keymap.TAB:evt.stopPropagation(),evt.preventDefault(),$scope.stopEdit(evt)}else evt.stopPropagation();return!0})}}}}}]),module.directive("uiGridEditor",["$filter",function($filter){function parseDateString(dateString){if(void 0===dateString||""===dateString)return null;var parts=dateString.split("-");if(3!==parts.length)return null;var year=parseInt(parts[0],10),month=parseInt(parts[1],10),day=parseInt(parts[2],10);return month<1||year<1||day<1?null:new Date(year,month-1,day)}return{priority:-100,require:"?ngModel",link:function(scope,element,attrs,ngModel){2===angular.version.minor&&attrs.type&&"date"===attrs.type&&ngModel&&(ngModel.$formatters.push(function(modelValue){return ngModel.$setValidity(null,!modelValue||!isNaN(modelValue.getTime())),$filter("date")(modelValue,"yyyy-MM-dd")}),ngModel.$parsers.push(function(viewValue){if(viewValue&&viewValue.length>0){var dateValue=parseDateString(viewValue);return ngModel.$setValidity(null,dateValue&&!isNaN(dateValue.getTime())),dateValue}return ngModel.$setValidity(null,!0),null}))}}}]),module.directive("uiGridEditDropdown",["uiGridConstants","uiGridEditConstants",function(uiGridConstants,uiGridEditConstants){return{require:["?^uiGrid","?^uiGridRenderContainer"],scope:!0,compile:function(){return{pre:function($scope,$elm,$attrs){},post:function($scope,$elm,$attrs,controllers){var uiGridCtrl=controllers[0],renderContainerCtrl=controllers[1];$scope.$on(uiGridEditConstants.events.BEGIN_CELL_EDIT,function(){$elm[0].focus(),$elm[0].style.width=$elm[0].parentElement.offsetWidth-1+"px",$elm.on("blur",function(evt){$scope.stopEdit(evt)})}),$scope.stopEdit=function(evt){$scope.$emit(uiGridEditConstants.events.END_CELL_EDIT)},$elm.on("keydown",function(evt){switch(evt.keyCode){case uiGridConstants.keymap.ESC:evt.stopPropagation(),$scope.$emit(uiGridEditConstants.events.CANCEL_CELL_EDIT)}if(uiGridCtrl&&uiGridCtrl.grid.api.cellNav)evt.uiGridTargetRenderContainerId=renderContainerCtrl.containerId,null!==uiGridCtrl.cellNav.handleKeyDown(evt)&&$scope.stopEdit(evt);else switch(evt.keyCode){case uiGridConstants.keymap.ENTER:case uiGridConstants.keymap.TAB:evt.stopPropagation(),evt.preventDefault(),$scope.stopEdit(evt)}return!0})}}}}}]),module.directive("uiGridEditFileChooser",["gridUtil","uiGridConstants","uiGridEditConstants","$timeout",function(gridUtil,uiGridConstants,uiGridEditConstants,$timeout){return{scope:!0,require:["?^uiGrid","?^uiGridRenderContainer"],compile:function(){return{pre:function($scope,$elm,$attrs){},post:function($scope,$elm,$attrs,controllers){var uiGridCtrl;controllers[0]&&(uiGridCtrl=controllers[0]),controllers[1]&&controllers[1];var handleFileSelect=(uiGridCtrl.grid,function(event){var target=event.srcElement||event.target;target&&target.files&&target.files.length>0?("function"==typeof $scope.col.colDef.editFileChooserCallback?$scope.col.colDef.editFileChooserCallback($scope.row,$scope.col,target.files):gridUtil.logError("You need to set colDef.editFileChooserCallback to use the file chooser"),target.form.reset(),$scope.$emit(uiGridEditConstants.events.END_CELL_EDIT)):$scope.$emit(uiGridEditConstants.events.CANCEL_CELL_EDIT)});$elm[0].addEventListener("change",handleFileSelect,!1),$scope.$on(uiGridEditConstants.events.BEGIN_CELL_EDIT,function(){$elm[0].focus(),$elm[0].select(),$elm.on("blur",function(evt){$scope.$emit(uiGridEditConstants.events.END_CELL_EDIT)})})}}}}}])}(),function(){"use strict";var module=angular.module("ui.grid.expandable",["ui.grid"]);module.service("uiGridExpandableService",["gridUtil","$compile",function(gridUtil,$compile){var service={initializeGrid:function(grid){grid.expandable={},grid.expandable.expandedAll=!1,grid.options.enableExpandable=!1!==grid.options.enableExpandable,grid.options.expandableRowHeight=grid.options.expandableRowHeight||150,grid.options.expandableRowHeaderWidth=grid.options.expandableRowHeaderWidth||40,grid.options.enableExpandable&&!grid.options.expandableRowTemplate&&(gridUtil.logError("You have not set the expandableRowTemplate, disabling expandable module"),grid.options.enableExpandable=!1);var publicApi={events:{expandable:{rowExpandedBeforeStateChanged:function(scope,row){},rowExpandedStateChanged:function(scope,row){}}},methods:{expandable:{toggleRowExpansion:function(rowEntity){var row=grid.getRow(rowEntity);null!==row&&service.toggleRowExpansion(grid,row)},expandAllRows:function(){service.expandAllRows(grid)},collapseAllRows:function(){service.collapseAllRows(grid)},toggleAllRows:function(){service.toggleAllRows(grid)},expandRow:function(rowEntity){var row=grid.getRow(rowEntity);null===row||row.isExpanded||service.toggleRowExpansion(grid,row)},collapseRow:function(rowEntity){var row=grid.getRow(rowEntity);null!==row&&row.isExpanded&&service.toggleRowExpansion(grid,row)},getExpandedRows:function(){return service.getExpandedRows(grid).map(function(gridRow){return gridRow.entity})}}}};grid.api.registerEventsFromObject(publicApi.events),grid.api.registerMethodsFromObject(publicApi.methods)},toggleRowExpansion:function(grid,row){grid.api.expandable.raise.rowExpandedBeforeStateChanged(row),row.isExpanded=!row.isExpanded,angular.isUndefined(row.expandedRowHeight)&&(row.expandedRowHeight=grid.options.expandableRowHeight),row.isExpanded?row.height=row.grid.options.rowHeight+row.expandedRowHeight:(row.height=row.grid.options.rowHeight,grid.expandable.expandedAll=!1),grid.api.expandable.raise.rowExpandedStateChanged(row)},expandAllRows:function(grid,$scope){
grid.renderContainers.body.visibleRowCache.forEach(function(row){row.isExpanded||service.toggleRowExpansion(grid,row)}),grid.expandable.expandedAll=!0,grid.queueGridRefresh()},collapseAllRows:function(grid){grid.renderContainers.body.visibleRowCache.forEach(function(row){row.isExpanded&&service.toggleRowExpansion(grid,row)}),grid.expandable.expandedAll=!1,grid.queueGridRefresh()},toggleAllRows:function(grid){grid.expandable.expandedAll?service.collapseAllRows(grid):service.expandAllRows(grid)},getExpandedRows:function(grid){return grid.rows.filter(function(row){return row.isExpanded})}};return service}]),module.directive("uiGridExpandable",["uiGridExpandableService","$templateCache",function(uiGridExpandableService,$templateCache){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function($scope,$elm,$attrs,uiGridCtrl){if(uiGridExpandableService.initializeGrid(uiGridCtrl.grid),uiGridCtrl.grid.options.enableExpandable&&!1!==uiGridCtrl.grid.options.enableExpandableRowHeader){var expandableRowHeaderColDef={name:"expandableButtons",displayName:"",exporterSuppressExport:!0,enableColumnResizing:!1,enableColumnMenu:!1,width:uiGridCtrl.grid.options.expandableRowHeaderWidth||40};expandableRowHeaderColDef.cellTemplate=$templateCache.get("ui-grid/expandableRowHeader"),expandableRowHeaderColDef.headerCellTemplate=$templateCache.get("ui-grid/expandableTopRowHeader"),uiGridCtrl.grid.addRowHeaderColumn(expandableRowHeaderColDef,-90)}},post:function($scope,$elm,$attrs,uiGridCtrl){}}}}}]),module.directive("uiGrid",["uiGridExpandableService","$templateCache",function(uiGridExpandableService,$templateCache){return{replace:!0,priority:599,require:"^uiGrid",scope:!1,compile:function(){return{pre:function($scope,$elm,$attrs,uiGridCtrl){uiGridCtrl.grid.api.core.on.renderingComplete($scope,function(){$scope.row&&$scope.row.grid&&$scope.row.grid.options&&$scope.row.grid.options.enableExpandable&&(uiGridCtrl.grid.parentRow=$scope.row)})},post:function($scope,$elm,$attrs,uiGridCtrl){}}}}}]),module.directive("uiGridExpandableRow",["uiGridExpandableService","$timeout","$compile","uiGridConstants","gridUtil","$interval","$log",function(uiGridExpandableService,$timeout,$compile,uiGridConstants,gridUtil,$interval,$log){return{replace:!1,priority:0,scope:!1,compile:function(){return{pre:function($scope,$elm,$attrs,uiGridCtrl){gridUtil.getTemplate($scope.grid.options.expandableRowTemplate).then(function(template){if($scope.grid.options.expandableRowScope){var expandableRowScope=$scope.grid.options.expandableRowScope;for(var property in expandableRowScope)expandableRowScope.hasOwnProperty(property)&&($scope[property]=expandableRowScope[property])}var expandedRowElement=angular.element(template);$elm.append(expandedRowElement),expandedRowElement=$compile(expandedRowElement)($scope),$scope.row.expandedRendered=!0})},post:function($scope,$elm,$attrs,uiGridCtrl){$scope.$on("$destroy",function(){$scope.row.expandedRendered=!1})}}}}}]),module.directive("uiGridRow",["$compile","gridUtil","$templateCache",function($compile,gridUtil,$templateCache){return{priority:-200,scope:!1,compile:function($elm,$attrs){return{pre:function($scope,$elm,$attrs,controllers){$scope.grid.options.enableExpandable&&($scope.expandableRow={},$scope.expandableRow.shouldRenderExpand=function(){return"body"===$scope.colContainer.name&&!1!==$scope.grid.options.enableExpandable&&$scope.row.isExpanded&&(!$scope.grid.isScrollingVertically||$scope.row.expandedRendered)},$scope.expandableRow.shouldRenderFiller=function(){return $scope.row.isExpanded&&("body"!==$scope.colContainer.name||$scope.grid.isScrollingVertically&&!$scope.row.expandedRendered)})},post:function($scope,$elm,$attrs,controllers){}}}}}]),module.directive("uiGridViewport",["$compile","gridUtil","$templateCache",function($compile,gridUtil,$templateCache){return{priority:-200,scope:!1,compile:function($elm,$attrs){var rowRepeatDiv=angular.element($elm.children().children()[0]),expandedRowFillerElement=$templateCache.get("ui-grid/expandableScrollFiller"),expandedRowElement=$templateCache.get("ui-grid/expandableRow");return rowRepeatDiv.append(expandedRowElement),rowRepeatDiv.append(expandedRowFillerElement),{pre:function($scope,$elm,$attrs,controllers){},post:function($scope,$elm,$attrs,controllers){}}}}}])}(),function(){"use strict";var module=angular.module("ui.grid.exporter",["ui.grid"]);module.constant("uiGridExporterConstants",{featureName:"exporter",ALL:"all",VISIBLE:"visible",SELECTED:"selected",CSV_CONTENT:"CSV_CONTENT",BUTTON_LABEL:"BUTTON_LABEL",FILE_NAME:"FILE_NAME"}),module.service("uiGridExporterService",["$q","uiGridExporterConstants","gridUtil","$compile","$interval","i18nService",function($q,uiGridExporterConstants,gridUtil,$compile,$interval,i18nService){var service={delay:100,initializeGrid:function(grid){grid.exporter={},this.defaultGridOptions(grid.options);var publicApi={events:{exporter:{}},methods:{exporter:{csvExport:function(rowTypes,colTypes){service.csvExport(grid,rowTypes,colTypes)},pdfExport:function(rowTypes,colTypes){service.pdfExport(grid,rowTypes,colTypes)}}}};grid.api.registerEventsFromObject(publicApi.events),grid.api.registerMethodsFromObject(publicApi.methods),grid.api.core.addToGridMenu?service.addToMenu(grid):$interval(function(){grid.api.core.addToGridMenu&&service.addToMenu(grid)},this.delay,1)},defaultGridOptions:function(gridOptions){gridOptions.exporterSuppressMenu=!0===gridOptions.exporterSuppressMenu,gridOptions.exporterMenuLabel=gridOptions.exporterMenuLabel?gridOptions.exporterMenuLabel:"Export",gridOptions.exporterSuppressColumns=gridOptions.exporterSuppressColumns?gridOptions.exporterSuppressColumns:[],gridOptions.exporterCsvColumnSeparator=gridOptions.exporterCsvColumnSeparator?gridOptions.exporterCsvColumnSeparator:",",gridOptions.exporterCsvFilename=gridOptions.exporterCsvFilename?gridOptions.exporterCsvFilename:"download.csv",gridOptions.exporterPdfFilename=gridOptions.exporterPdfFilename?gridOptions.exporterPdfFilename:"download.pdf",gridOptions.exporterOlderExcelCompatibility=!0===gridOptions.exporterOlderExcelCompatibility,gridOptions.exporterPdfDefaultStyle=gridOptions.exporterPdfDefaultStyle?gridOptions.exporterPdfDefaultStyle:{fontSize:11},gridOptions.exporterPdfTableStyle=gridOptions.exporterPdfTableStyle?gridOptions.exporterPdfTableStyle:{margin:[0,5,0,15]},gridOptions.exporterPdfTableHeaderStyle=gridOptions.exporterPdfTableHeaderStyle?gridOptions.exporterPdfTableHeaderStyle:{bold:!0,fontSize:12,color:"black"},gridOptions.exporterPdfHeader=gridOptions.exporterPdfHeader?gridOptions.exporterPdfHeader:null,gridOptions.exporterPdfFooter=gridOptions.exporterPdfFooter?gridOptions.exporterPdfFooter:null,gridOptions.exporterPdfOrientation=gridOptions.exporterPdfOrientation?gridOptions.exporterPdfOrientation:"landscape",gridOptions.exporterPdfPageSize=gridOptions.exporterPdfPageSize?gridOptions.exporterPdfPageSize:"A4",gridOptions.exporterPdfMaxGridWidth=gridOptions.exporterPdfMaxGridWidth?gridOptions.exporterPdfMaxGridWidth:720,gridOptions.exporterMenuAllData=void 0===gridOptions.exporterMenuAllData||gridOptions.exporterMenuAllData,gridOptions.exporterMenuVisibleData=void 0===gridOptions.exporterMenuVisibleData||gridOptions.exporterMenuVisibleData,gridOptions.exporterMenuSelectedData=void 0===gridOptions.exporterMenuSelectedData||gridOptions.exporterMenuSelectedData,gridOptions.exporterMenuCsv=void 0===gridOptions.exporterMenuCsv||gridOptions.exporterMenuCsv,gridOptions.exporterMenuPdf=void 0===gridOptions.exporterMenuPdf||gridOptions.exporterMenuPdf,gridOptions.exporterPdfCustomFormatter=gridOptions.exporterPdfCustomFormatter&&"function"==typeof gridOptions.exporterPdfCustomFormatter?gridOptions.exporterPdfCustomFormatter:function(docDef){return docDef},gridOptions.exporterHeaderFilterUseName=!0===gridOptions.exporterHeaderFilterUseName,gridOptions.exporterFieldCallback=gridOptions.exporterFieldCallback?gridOptions.exporterFieldCallback:function(grid,row,col,value){return value},gridOptions.exporterAllDataFn=gridOptions.exporterAllDataFn?gridOptions.exporterAllDataFn:null,null==gridOptions.exporterAllDataFn&&gridOptions.exporterAllDataPromise&&(gridOptions.exporterAllDataFn=gridOptions.exporterAllDataPromise)},addToMenu:function(grid){grid.api.core.addToGridMenu(grid,[{title:i18nService.getSafeText("gridMenu.exporterAllAsCsv"),action:function($event){this.grid.api.exporter.csvExport(uiGridExporterConstants.ALL,uiGridExporterConstants.ALL)},shown:function(){return this.grid.options.exporterMenuCsv&&this.grid.options.exporterMenuAllData},order:200},{title:i18nService.getSafeText("gridMenu.exporterVisibleAsCsv"),action:function($event){this.grid.api.exporter.csvExport(uiGridExporterConstants.VISIBLE,uiGridExporterConstants.VISIBLE)},shown:function(){return this.grid.options.exporterMenuCsv&&this.grid.options.exporterMenuVisibleData},order:201},{title:i18nService.getSafeText("gridMenu.exporterSelectedAsCsv"),action:function($event){this.grid.api.exporter.csvExport(uiGridExporterConstants.SELECTED,uiGridExporterConstants.VISIBLE)},shown:function(){return this.grid.options.exporterMenuCsv&&this.grid.options.exporterMenuSelectedData&&this.grid.api.selection&&this.grid.api.selection.getSelectedRows().length>0},order:202},{title:i18nService.getSafeText("gridMenu.exporterAllAsPdf"),action:function($event){this.grid.api.exporter.pdfExport(uiGridExporterConstants.ALL,uiGridExporterConstants.ALL)},shown:function(){return this.grid.options.exporterMenuPdf&&this.grid.options.exporterMenuAllData},order:203},{title:i18nService.getSafeText("gridMenu.exporterVisibleAsPdf"),action:function($event){this.grid.api.exporter.pdfExport(uiGridExporterConstants.VISIBLE,uiGridExporterConstants.VISIBLE)},shown:function(){return this.grid.options.exporterMenuPdf&&this.grid.options.exporterMenuVisibleData},order:204},{title:i18nService.getSafeText("gridMenu.exporterSelectedAsPdf"),action:function($event){this.grid.api.exporter.pdfExport(uiGridExporterConstants.SELECTED,uiGridExporterConstants.VISIBLE)},shown:function(){return this.grid.options.exporterMenuPdf&&this.grid.options.exporterMenuSelectedData&&this.grid.api.selection&&this.grid.api.selection.getSelectedRows().length>0},order:205}])},csvExport:function(grid,rowTypes,colTypes){var self=this;this.loadAllDataIfNeeded(grid,rowTypes,colTypes).then(function(){var exportColumnHeaders=grid.options.showHeader?self.getColumnHeaders(grid,colTypes):[],exportData=self.getData(grid,rowTypes,colTypes),csvContent=self.formatAsCsv(exportColumnHeaders,exportData,grid.options.exporterCsvColumnSeparator);self.downloadFile(grid.options.exporterCsvFilename,csvContent,grid.options.exporterCsvColumnSeparator,grid.options.exporterOlderExcelCompatibility)})},loadAllDataIfNeeded:function(grid,rowTypes,colTypes){if(rowTypes===uiGridExporterConstants.ALL&&grid.rows.length!==grid.options.totalItems&&grid.options.exporterAllDataFn)return grid.options.exporterAllDataFn().then(function(){grid.modifyRows(grid.options.data)});var deferred=$q.defer();return deferred.resolve(),deferred.promise},getColumnHeaders:function(grid,colTypes){var columns,headers=[];if(colTypes===uiGridExporterConstants.ALL)columns=grid.columns;else{var leftColumns=grid.renderContainers.left?grid.renderContainers.left.visibleColumnCache.filter(function(column){return column.visible}):[],bodyColumns=grid.renderContainers.body?grid.renderContainers.body.visibleColumnCache.filter(function(column){return column.visible}):[],rightColumns=grid.renderContainers.right?grid.renderContainers.right.visibleColumnCache.filter(function(column){return column.visible}):[];columns=leftColumns.concat(bodyColumns,rightColumns)}return columns.forEach(function(gridCol,index){!0!==gridCol.colDef.exporterSuppressExport&&-1===grid.options.exporterSuppressColumns.indexOf(gridCol.name)&&headers.push({name:gridCol.field,displayName:grid.options.exporterHeaderFilter?grid.options.exporterHeaderFilterUseName?grid.options.exporterHeaderFilter(gridCol.name):grid.options.exporterHeaderFilter(gridCol.displayName):gridCol.displayName,width:gridCol.drawnWidth?gridCol.drawnWidth:gridCol.width,align:"number"===gridCol.colDef.type?"right":"left"})}),headers},getData:function(grid,rowTypes,colTypes,applyCellFilters){var rows,columns,data=[];switch(rowTypes){case uiGridExporterConstants.ALL:rows=grid.rows;break;case uiGridExporterConstants.VISIBLE:rows=grid.getVisibleRows();break;case uiGridExporterConstants.SELECTED:grid.api.selection?rows=grid.api.selection.getSelectedGridRows():gridUtil.logError("selection feature must be enabled to allow selected rows to be exported")}if(colTypes===uiGridExporterConstants.ALL)columns=grid.columns;else{var leftColumns=grid.renderContainers.left?grid.renderContainers.left.visibleColumnCache.filter(function(column){return column.visible}):[],bodyColumns=grid.renderContainers.body?grid.renderContainers.body.visibleColumnCache.filter(function(column){return column.visible}):[],rightColumns=grid.renderContainers.right?grid.renderContainers.right.visibleColumnCache.filter(function(column){return column.visible}):[];columns=leftColumns.concat(bodyColumns,rightColumns)}return rows.forEach(function(row,index){if(!1!==row.exporterEnableExporting){var extractedRow=[];columns.forEach(function(gridCol,index){if((gridCol.visible||colTypes===uiGridExporterConstants.ALL)&&!0!==gridCol.colDef.exporterSuppressExport&&-1===grid.options.exporterSuppressColumns.indexOf(gridCol.name)){var cellValue=applyCellFilters?grid.getCellDisplayValue(row,gridCol):grid.getCellValue(row,gridCol),extractedField={value:grid.options.exporterFieldCallback(grid,row,gridCol,cellValue)};gridCol.colDef.exporterPdfAlign&&(extractedField.alignment=gridCol.colDef.exporterPdfAlign),extractedRow.push(extractedField)}}),data.push(extractedRow)}}),data},formatAsCsv:function(exportColumnHeaders,exportData,separator){var self=this,bareHeaders=exportColumnHeaders.map(function(header){return{value:header.displayName}}),csv=bareHeaders.length>0?self.formatRowAsCsv(this,separator)(bareHeaders)+"\n":"";return csv+=exportData.map(this.formatRowAsCsv(this,separator)).join("\n")},formatRowAsCsv:function(exporter,separator){return function(row){return row.map(exporter.formatFieldAsCsv).join(separator)}},formatFieldAsCsv:function(field){return null==field.value?"":"number"==typeof field.value?field.value:"boolean"==typeof field.value?field.value?"TRUE":"FALSE":"string"==typeof field.value?'"'+field.value.replace(/"/g,'""')+'"':JSON.stringify(field.value)},isIE:function(){var match=navigator.userAgent.search(/(?:Edge|MSIE|Trident\/.*; rv:)/),isIE=!1;return-1!==match&&(isIE=!0),isIE},downloadFile:function(fileName,csvContent,columnSeparator,exporterOlderExcelCompatibility){var rawFile,D=document,a=D.createElement("a"),strMimeType="application/octet-stream;charset=utf-8",ieVersion=this.isIE();if(navigator.msSaveBlob)return navigator.msSaveOrOpenBlob(new Blob([exporterOlderExcelCompatibility?"\ufeff":"",csvContent],{type:strMimeType}),fileName);if(ieVersion){var frame=D.createElement("iframe");return document.body.appendChild(frame),frame.contentWindow.document.open("text/html","replace"),frame.contentWindow.document.write("sep="+columnSeparator+"\r\n"+csvContent),frame.contentWindow.document.close(),frame.contentWindow.focus(),frame.contentWindow.document.execCommand("SaveAs",!0,fileName),document.body.removeChild(frame),!0}if("download"in a){var blob=new Blob([exporterOlderExcelCompatibility?"\ufeff":"",csvContent],{type:strMimeType});rawFile=URL.createObjectURL(blob),a.setAttribute("download",fileName)}else rawFile="data:"+strMimeType+","+encodeURIComponent(csvContent),a.setAttribute("target","_blank");a.href=rawFile,a.setAttribute("style","display:none;"),D.body.appendChild(a),setTimeout(function(){if(a.click)a.click();else if(document.createEvent){var eventObj=document.createEvent("MouseEvents");eventObj.initEvent("click",!0,!0),a.dispatchEvent(eventObj)}D.body.removeChild(a)},this.delay)},pdfExport:function(grid,rowTypes,colTypes){var self=this;this.loadAllDataIfNeeded(grid,rowTypes,colTypes).then(function(){var exportColumnHeaders=self.getColumnHeaders(grid,colTypes),exportData=self.getData(grid,rowTypes,colTypes),docDefinition=self.prepareAsPdf(grid,exportColumnHeaders,exportData);self.isIE()||-1!==navigator.appVersion.indexOf("Edge")?self.downloadPDF(grid.options.exporterPdfFilename,docDefinition):pdfMake.createPdf(docDefinition).open()})},downloadPDF:function(fileName,docDefinition){var ieVersion,D=document;D.createElement("a");ieVersion=this.isIE();var blob,doc=pdfMake.createPdf(docDefinition);doc.getBuffer(function(buffer){if(blob=new Blob([buffer]),navigator.msSaveBlob)return navigator.msSaveBlob(blob,fileName);if(ieVersion){var frame=D.createElement("iframe");return document.body.appendChild(frame),frame.contentWindow.document.open("text/html","replace"),frame.contentWindow.document.write(blob),frame.contentWindow.document.close(),frame.contentWindow.focus(),frame.contentWindow.document.execCommand("SaveAs",!0,fileName),document.body.removeChild(frame),!0}})},prepareAsPdf:function(grid,exportColumnHeaders,exportData){var headerWidths=this.calculatePdfHeaderWidths(grid,exportColumnHeaders),headerColumns=exportColumnHeaders.map(function(header){return{text:header.displayName,style:"tableHeader"}}),stringData=exportData.map(this.formatRowAsPdf(this)),allData=[headerColumns].concat(stringData),docDefinition={pageOrientation:grid.options.exporterPdfOrientation,pageSize:grid.options.exporterPdfPageSize,content:[{style:"tableStyle",table:{headerRows:1,widths:headerWidths,body:allData}}],styles:{tableStyle:grid.options.exporterPdfTableStyle,tableHeader:grid.options.exporterPdfTableHeaderStyle},defaultStyle:grid.options.exporterPdfDefaultStyle};return grid.options.exporterPdfLayout&&(docDefinition.layout=grid.options.exporterPdfLayout),grid.options.exporterPdfHeader&&(docDefinition.header=grid.options.exporterPdfHeader),grid.options.exporterPdfFooter&&(docDefinition.footer=grid.options.exporterPdfFooter),grid.options.exporterPdfCustomFormatter&&(docDefinition=grid.options.exporterPdfCustomFormatter(docDefinition)),docDefinition},calculatePdfHeaderWidths:function(grid,exportHeaders){var baseGridWidth=0;exportHeaders.forEach(function(value){"number"==typeof value.width&&(baseGridWidth+=value.width)});var extraColumns=0;exportHeaders.forEach(function(value){if("*"===value.width&&(extraColumns+=100),"string"==typeof value.width&&value.width.match(/(\d)*%/)){var percent=parseInt(value.width.match(/(\d)*%/)[0]);value.width=baseGridWidth*percent/100,extraColumns+=value.width}});var gridWidth=baseGridWidth+extraColumns;return exportHeaders.map(function(header){return"*"===header.width?header.width:header.width*grid.options.exporterPdfMaxGridWidth/gridWidth})},formatRowAsPdf:function(exporter){return function(row){return row.map(exporter.formatFieldAsPdfString)}},formatFieldAsPdfString:function(field){var returnVal;return returnVal=null==field.value?"":"number"==typeof field.value?field.value.toString():"boolean"==typeof field.value?field.value?"TRUE":"FALSE":"string"==typeof field.value?field.value.replace(/"/g,'""'):JSON.stringify(field.value).replace(/^"/,"").replace(/"$/,""),field.alignment&&"string"==typeof field.alignment&&(returnVal={text:returnVal,alignment:field.alignment}),returnVal}};return service}]),module.directive("uiGridExporter",["uiGridExporterConstants","uiGridExporterService","gridUtil","$compile",function(uiGridExporterConstants,uiGridExporterService,gridUtil,$compile){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,link:function($scope,$elm,$attrs,uiGridCtrl){uiGridExporterService.initializeGrid(uiGridCtrl.grid),uiGridCtrl.grid.exporter.$scope=$scope}}}])}(),function(){"use strict";var module=angular.module("ui.grid.grouping",["ui.grid","ui.grid.treeBase"]);module.constant("uiGridGroupingConstants",{featureName:"grouping",rowHeaderColName:"treeBaseRowHeaderCol",EXPANDED:"expanded",COLLAPSED:"collapsed",aggregation:{COUNT:"count",SUM:"sum",MAX:"max",MIN:"min",AVG:"avg"}}),module.service("uiGridGroupingService",["$q","uiGridGroupingConstants","gridUtil","rowSorter","GridRow","gridClassFactory","i18nService","uiGridConstants","uiGridTreeBaseService",function($q,uiGridGroupingConstants,gridUtil,rowSorter,GridRow,gridClassFactory,i18nService,uiGridConstants,uiGridTreeBaseService){var service={initializeGrid:function(grid,$scope){uiGridTreeBaseService.initializeGrid(grid,$scope),grid.grouping={},grid.grouping.groupHeaderCache={},service.defaultGridOptions(grid.options),grid.registerRowsProcessor(service.groupRows,400),grid.registerColumnBuilder(service.groupingColumnBuilder),grid.registerColumnsProcessor(service.groupingColumnProcessor,400);var publicApi={events:{grouping:{aggregationChanged:{},groupingChanged:{}}},methods:{grouping:{getGrouping:function(getExpanded){var grouping=service.getGrouping(grid);return grouping.grouping.forEach(function(group){group.colName=group.col.name,delete group.col}),grouping.aggregations.forEach(function(aggregation){aggregation.colName=aggregation.col.name,delete aggregation.col}),grouping.aggregations=grouping.aggregations.filter(function(aggregation){return!aggregation.aggregation.source||"grouping"!==aggregation.aggregation.source}),getExpanded&&(grouping.rowExpandedStates=service.getRowExpandedStates(grid.grouping.groupingHeaderCache)),grouping},setGrouping:function(config){service.setGrouping(grid,config)},groupColumn:function(columnName){var column=grid.getColumn(columnName);service.groupColumn(grid,column)},ungroupColumn:function(columnName){var column=grid.getColumn(columnName);service.ungroupColumn(grid,column)},clearGrouping:function(){service.clearGrouping(grid)},aggregateColumn:function(columnName,aggregationDef,aggregationLabel){var column=grid.getColumn(columnName);service.aggregateColumn(grid,column,aggregationDef,aggregationLabel)}}}};grid.api.registerEventsFromObject(publicApi.events),grid.api.registerMethodsFromObject(publicApi.methods),grid.api.core.on.sortChanged($scope,service.tidyPriorities)},defaultGridOptions:function(gridOptions){gridOptions.enableGrouping=!1!==gridOptions.enableGrouping,gridOptions.groupingShowCounts=!1!==gridOptions.groupingShowCounts,gridOptions.groupingNullLabel=void 0===gridOptions.groupingNullLabel?"Null":gridOptions.groupingNullLabel,gridOptions.enableGroupHeaderSelection=!0===gridOptions.enableGroupHeaderSelection},groupingColumnBuilder:function(colDef,col,gridOptions){if(!1!==colDef.enableGrouping){void 0===col.grouping&&void 0!==colDef.grouping?(col.grouping=angular.copy(colDef.grouping),void 0!==col.grouping.groupPriority&&col.grouping.groupPriority>-1&&(col.treeAggregationFn=uiGridTreeBaseService.nativeAggregations()[uiGridGroupingConstants.aggregation.COUNT].aggregationFn,col.treeAggregationFinalizerFn=service.groupedFinalizerFn)):void 0===col.grouping&&(col.grouping={}),void 0!==col.grouping&&void 0!==col.grouping.groupPriority&&col.grouping.groupPriority>=0&&(col.suppressRemoveSort=!0);var groupColumn={name:"ui.grid.grouping.group",title:i18nService.get().grouping.group,icon:"ui-grid-icon-indent-right",shown:function(){return void 0===this.context.col.grouping||void 0===this.context.col.grouping.groupPriority||this.context.col.grouping.groupPriority<0},action:function(){service.groupColumn(this.context.col.grid,this.context.col)}},ungroupColumn={name:"ui.grid.grouping.ungroup",title:i18nService.get().grouping.ungroup,icon:"ui-grid-icon-indent-left",shown:function(){return void 0!==this.context.col.grouping&&void 0!==this.context.col.grouping.groupPriority&&this.context.col.grouping.groupPriority>=0},action:function(){service.ungroupColumn(this.context.col.grid,this.context.col)}},aggregateRemove={name:"ui.grid.grouping.aggregateRemove",title:i18nService.get().grouping.aggregate_remove,shown:function(){return void 0!==this.context.col.treeAggregationFn},action:function(){service.aggregateColumn(this.context.col.grid,this.context.col,null)}},addAggregationMenu=function(type,title){title=title||i18nService.get().grouping["aggregate_"+type]||type;var menuItem={name:"ui.grid.grouping.aggregate"+type,title:title,shown:function(){return void 0===this.context.col.treeAggregation||void 0===this.context.col.treeAggregation.type||this.context.col.treeAggregation.type!==type},action:function(){service.aggregateColumn(this.context.col.grid,this.context.col,type)}};gridUtil.arrayContainsObjectWithProperty(col.menuItems,"name","ui.grid.grouping.aggregate"+type)||col.menuItems.push(menuItem)};!1!==col.colDef.groupingShowGroupingMenu&&(gridUtil.arrayContainsObjectWithProperty(col.menuItems,"name","ui.grid.grouping.group")||col.menuItems.push(groupColumn),gridUtil.arrayContainsObjectWithProperty(col.menuItems,"name","ui.grid.grouping.ungroup")||col.menuItems.push(ungroupColumn)),!1!==col.colDef.groupingShowAggregationMenu&&(angular.forEach(uiGridTreeBaseService.nativeAggregations(),function(aggregationDef,name){addAggregationMenu(name)}),angular.forEach(gridOptions.treeCustomAggregations,function(aggregationDef,name){addAggregationMenu(name,aggregationDef.menuTitle)}),gridUtil.arrayContainsObjectWithProperty(col.menuItems,"name","ui.grid.grouping.aggregateRemove")||col.menuItems.push(aggregateRemove))}},groupingColumnProcessor:function(columns,rows){return columns=service.moveGroupColumns(this,columns,rows)},groupedFinalizerFn:function(aggregation){var col=this;void 0!==aggregation.groupVal?(aggregation.rendered=aggregation.groupVal,col.grid.options.groupingShowCounts&&"date"!==col.colDef.type&&(aggregation.rendered+=" ("+aggregation.value+")")):aggregation.rendered=null},moveGroupColumns:function(grid,columns,rows){return!1===grid.options.moveGroupColumns?columns:(columns.forEach(function(column,index){column.groupingPosition=index}),columns.sort(function(a,b){var a_group,b_group;return a_group=a.isRowHeader?a.headerPriority:void 0===a.grouping||void 0===a.grouping.groupPriority||a.grouping.groupPriority<0?null:a.grouping.groupPriority,b_group=b.isRowHeader?b.headerPriority:void 0===b.grouping||void 0===b.grouping.groupPriority||b.grouping.groupPriority<0?null:b.grouping.groupPriority,null!==a_group&&null===b_group?-1:null!==b_group&&null===a_group?1:null!==a_group&&null!==b_group?a_group-b_group:a.groupingPosition-b.groupingPosition}),columns.forEach(function(column,index){delete column.groupingPosition}),columns)},groupColumn:function(grid,column){void 0===column.grouping&&(column.grouping={});var existingGrouping=service.getGrouping(grid);column.grouping.groupPriority=existingGrouping.grouping.length,column.sort?void 0!==column.sort.direction&&null!==column.sort.direction||(column.sort.direction=uiGridConstants.ASC):column.sort={direction:uiGridConstants.ASC},column.treeAggregation={type:uiGridGroupingConstants.aggregation.COUNT,source:"grouping"},column.treeAggregationFn=uiGridTreeBaseService.nativeAggregations()[uiGridGroupingConstants.aggregation.COUNT].aggregationFn,column.treeAggregationFinalizerFn=service.groupedFinalizerFn,grid.api.grouping.raise.groupingChanged(column),grid.api.core.raise.sortChanged(grid,grid.getColumnSorting()),grid.queueGridRefresh()},ungroupColumn:function(grid,column){void 0!==column.grouping&&(delete column.grouping.groupPriority,delete column.treeAggregation,delete column.customTreeAggregationFinalizer,service.tidyPriorities(grid),grid.api.grouping.raise.groupingChanged(column),grid.queueGridRefresh())},aggregateColumn:function(grid,column,aggregationType){void 0!==column.grouping&&void 0!==column.grouping.groupPriority&&column.grouping.groupPriority>=0&&service.ungroupColumn(grid,column);var aggregationDef={};void 0!==grid.options.treeCustomAggregations[aggregationType]?aggregationDef=grid.options.treeCustomAggregations[aggregationType]:void 0!==uiGridTreeBaseService.nativeAggregations()[aggregationType]&&(aggregationDef=uiGridTreeBaseService.nativeAggregations()[aggregationType]),column.treeAggregation={type:aggregationType,label:i18nService.get().aggregation[aggregationDef.label]||aggregationDef.label},column.treeAggregationFn=aggregationDef.aggregationFn,column.treeAggregationFinalizerFn=aggregationDef.finalizerFn,grid.api.grouping.raise.aggregationChanged(column),grid.queueGridRefresh()},setGrouping:function(grid,config){void 0!==config&&(service.clearGrouping(grid),config.grouping&&config.grouping.length&&config.grouping.length>0&&config.grouping.forEach(function(group){var col=grid.getColumn(group.colName);col&&service.groupColumn(grid,col)}),config.aggregations&&config.aggregations.length&&config.aggregations.forEach(function(aggregation){var col=grid.getColumn(aggregation.colName);col&&service.aggregateColumn(grid,col,aggregation.aggregation.type)}),config.rowExpandedStates&&service.applyRowExpandedStates(grid.grouping.groupingHeaderCache,config.rowExpandedStates))},clearGrouping:function(grid){var currentGrouping=service.getGrouping(grid);currentGrouping.grouping.length>0&&currentGrouping.grouping.forEach(function(group){group.col||(group.col=grid.getColumn(group.colName)),service.ungroupColumn(grid,group.col)}),currentGrouping.aggregations.length>0&&currentGrouping.aggregations.forEach(function(aggregation){aggregation.col||(aggregation.col=grid.getColumn(aggregation.colName)),service.aggregateColumn(grid,aggregation.col,null)})},tidyPriorities:function(grid){void 0!==grid&&void 0===grid.grid||void 0===this.grid||(grid=this.grid);var groupArray=[],sortArray=[];grid.columns.forEach(function(column,index){void 0!==column.grouping&&void 0!==column.grouping.groupPriority&&column.grouping.groupPriority>=0?groupArray.push(column):void 0!==column.sort&&void 0!==column.sort.priority&&column.sort.priority>=0&&sortArray.push(column)}),groupArray.sort(function(a,b){return a.grouping.groupPriority-b.grouping.groupPriority}),groupArray.forEach(function(column,index){column.grouping.groupPriority=index,column.suppressRemoveSort=!0,void 0===column.sort&&(column.sort={}),column.sort.priority=index});var i=groupArray.length;sortArray.sort(function(a,b){return a.sort.priority-b.sort.priority}),sortArray.forEach(function(column,index){column.sort.priority=i,column.suppressRemoveSort=column.colDef.suppressRemoveSort,i++})},groupRows:function(renderableRows){if(0===renderableRows.length)return renderableRows;var grid=this;grid.grouping.oldGroupingHeaderCache=grid.grouping.groupingHeaderCache||{},grid.grouping.groupingHeaderCache={};for(var processingState=service.initialiseProcessingState(grid),updateProcessingState=function(groupFieldState,stateIndex){var fieldValue=grid.getCellValue(row,groupFieldState.col);groupFieldState.initialised&&0===rowSorter.getSortFn(grid,groupFieldState.col,renderableRows)(fieldValue,groupFieldState.currentValue)||(service.insertGroupHeader(grid,renderableRows,i,processingState,stateIndex),i++)},i=0;i<renderableRows.length;i++){var row=renderableRows[i];row.visible&&processingState.forEach(updateProcessingState)}return delete grid.grouping.oldGroupingHeaderCache,renderableRows},initialiseProcessingState:function(grid){var processingState=[];return service.getGrouping(grid).grouping.forEach(function(groupItem,index){processingState.push({fieldName:groupItem.field,col:groupItem.col,initialised:!1,currentValue:null,currentRow:null})}),processingState},getGrouping:function(grid){var groupArray=[],aggregateArray=[];return grid.columns.forEach(function(column,columnIndex){column.grouping&&void 0!==column.grouping.groupPriority&&column.grouping.groupPriority>=0&&groupArray.push({field:column.field,col:column,groupPriority:column.grouping.groupPriority,grouping:column.grouping}),column.treeAggregation&&column.treeAggregation.type&&aggregateArray.push({field:column.field,col:column,aggregation:column.treeAggregation})}),groupArray.sort(function(a,b){return a.groupPriority-b.groupPriority}),groupArray.forEach(function(group,index){group.grouping.groupPriority=index,group.groupPriority=index,delete group.grouping}),{grouping:groupArray,aggregations:aggregateArray}
},insertGroupHeader:function(grid,renderableRows,rowIndex,processingState,stateIndex){var col=(processingState[stateIndex].fieldName,processingState[stateIndex].col),newValue=grid.getCellValue(renderableRows[rowIndex],col),newDisplayValue=newValue;void 0!==newValue&&null!==newValue||(newDisplayValue=grid.options.groupingNullLabel);for(var getKeyAsValueForCacheMap=function(key){return angular.isObject(key)?JSON.stringify(key):key},cacheItem=grid.grouping.oldGroupingHeaderCache,i=0;i<stateIndex;i++)cacheItem&&cacheItem[getKeyAsValueForCacheMap(processingState[i].currentValue)]&&(cacheItem=cacheItem[getKeyAsValueForCacheMap(processingState[i].currentValue)].children);var headerRow;for(cacheItem&&cacheItem[getKeyAsValueForCacheMap(newValue)]?(headerRow=cacheItem[getKeyAsValueForCacheMap(newValue)].row,headerRow.entity={}):(headerRow=new GridRow({},null,grid),gridClassFactory.rowTemplateAssigner.call(grid,headerRow)),headerRow.entity["$$"+processingState[stateIndex].col.uid]={groupVal:newDisplayValue},headerRow.treeLevel=stateIndex,headerRow.groupHeader=!0,headerRow.internalRow=!0,headerRow.enableCellEdit=!1,headerRow.enableSelection=grid.options.enableGroupHeaderSelection,processingState[stateIndex].initialised=!0,processingState[stateIndex].currentValue=newValue,processingState[stateIndex].currentRow=headerRow,service.finaliseProcessingState(processingState,stateIndex+1),renderableRows.splice(rowIndex,0,headerRow),cacheItem=grid.grouping.groupingHeaderCache,i=0;i<stateIndex;i++)cacheItem=cacheItem[getKeyAsValueForCacheMap(processingState[i].currentValue)].children;cacheItem[getKeyAsValueForCacheMap(newValue)]={row:headerRow,children:{}}},finaliseProcessingState:function(processingState,stateIndex){for(var i=stateIndex;i<processingState.length;i++)processingState[i].initialised=!1,processingState[i].currentRow=null,processingState[i].currentValue=null},getRowExpandedStates:function(treeChildren){if(void 0===treeChildren)return{};var newChildren={};return angular.forEach(treeChildren,function(value,key){newChildren[key]={state:value.row.treeNode.state},value.children?newChildren[key].children=service.getRowExpandedStates(value.children):newChildren[key].children={}}),newChildren},applyRowExpandedStates:function(currentNode,expandedStates){void 0!==expandedStates&&angular.forEach(expandedStates,function(value,key){currentNode[key]&&(currentNode[key].row.treeNode.state=value.state,value.children&&currentNode[key].children&&service.applyRowExpandedStates(currentNode[key].children,value.children))})}};return service}]),module.directive("uiGridGrouping",["uiGridGroupingConstants","uiGridGroupingService","$templateCache",function(uiGridGroupingConstants,uiGridGroupingService,$templateCache){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function($scope,$elm,$attrs,uiGridCtrl){!1!==uiGridCtrl.grid.options.enableGrouping&&uiGridGroupingService.initializeGrid(uiGridCtrl.grid,$scope)},post:function($scope,$elm,$attrs,uiGridCtrl){}}}}}])}(),function(){"use strict";var module=angular.module("ui.grid.importer",["ui.grid"]);module.constant("uiGridImporterConstants",{featureName:"importer"}),module.service("uiGridImporterService",["$q","uiGridConstants","uiGridImporterConstants","gridUtil","$compile","$interval","i18nService","$window",function($q,uiGridConstants,uiGridImporterConstants,gridUtil,$compile,$interval,i18nService,$window){var service={initializeGrid:function($scope,grid){grid.importer={$scope:$scope},this.defaultGridOptions(grid.options);var publicApi={events:{importer:{}},methods:{importer:{importFile:function(fileObject){service.importThisFile(grid,fileObject)}}}};grid.api.registerEventsFromObject(publicApi.events),grid.api.registerMethodsFromObject(publicApi.methods),grid.options.enableImporter&&grid.options.importerShowMenu&&(grid.api.core.addToGridMenu?service.addToMenu(grid):$interval(function(){grid.api.core.addToGridMenu&&service.addToMenu(grid)},100,1))},defaultGridOptions:function(gridOptions){gridOptions.enableImporter||void 0===gridOptions.enableImporter?$window.hasOwnProperty("File")&&$window.hasOwnProperty("FileReader")&&$window.hasOwnProperty("FileList")&&$window.hasOwnProperty("Blob")?gridOptions.enableImporter=!0:(gridUtil.logError("The File APIs are not fully supported in this browser, grid importer cannot be used."),gridOptions.enableImporter=!1):gridOptions.enableImporter=!1,gridOptions.importerProcessHeaders=gridOptions.importerProcessHeaders||service.processHeaders,gridOptions.importerHeaderFilter=gridOptions.importerHeaderFilter||function(displayName){return displayName},gridOptions.importerErrorCallback&&"function"==typeof gridOptions.importerErrorCallback||delete gridOptions.importerErrorCallback,!0!==gridOptions.enableImporter||gridOptions.importerDataAddCallback||(gridUtil.logError("You have not set an importerDataAddCallback, importer is disabled"),gridOptions.enableImporter=!1),gridOptions.importerShowMenu=!1!==gridOptions.importerShowMenu,gridOptions.importerObjectCallback=gridOptions.importerObjectCallback||function(grid,newObject){return newObject}},addToMenu:function(grid){grid.api.core.addToGridMenu(grid,[{title:i18nService.getSafeText("gridMenu.importerTitle"),order:150},{templateUrl:"ui-grid/importerMenuItemContainer",action:function($event){this.grid.api.importer.importAFile(grid)},order:151}])},importThisFile:function(grid,fileObject){if(!fileObject)return void gridUtil.logError("No file object provided to importThisFile, should be impossible, aborting");var reader=new FileReader;switch(fileObject.type){case"application/json":reader.onload=service.importJsonClosure(grid);break;default:reader.onload=service.importCsvClosure(grid)}reader.readAsText(fileObject)},importJsonClosure:function(grid){return function(importFile){var newObject,newObjects=[],importArray=service.parseJson(grid,importFile);null!==importArray&&(importArray.forEach(function(value,index){newObject=service.newObject(grid),angular.extend(newObject,value),newObject=grid.options.importerObjectCallback(grid,newObject),newObjects.push(newObject)}),service.addObjects(grid,newObjects))}},parseJson:function(grid,importFile){var loadedObjects;try{loadedObjects=JSON.parse(importFile.target.result)}catch(e){return void service.alertError(grid,"importer.invalidJson","File could not be processed, is it valid json? Content was: ",importFile.target.result)}return Array.isArray(loadedObjects)?loadedObjects:(service.alertError(grid,"importer.jsonNotarray","Import failed, file is not an array, file was: ",importFile.target.result),[])},importCsvClosure:function(grid){return function(importFile){var importArray=service.parseCsv(importFile);if(!importArray||importArray.length<1)return void service.alertError(grid,"importer.invalidCsv","File could not be processed, is it valid csv? Content was: ",importFile.target.result);var newObjects=service.createCsvObjects(grid,importArray);if(!newObjects||0===newObjects.length)return void service.alertError(grid,"importer.noObjects","Objects were not able to be derived, content was: ",importFile.target.result);service.addObjects(grid,newObjects)}},parseCsv:function(importFile){var csv=importFile.target.result;return CSV.parse(csv)},createCsvObjects:function(grid,importArray){var headerMapping=grid.options.importerProcessHeaders(grid,importArray.shift());if(!headerMapping||0===headerMapping.length)return service.alertError(grid,"importer.noHeaders","Column names could not be derived, content was: ",importArray),[];var newObject,newObjects=[];return importArray.forEach(function(row,index){newObject=service.newObject(grid),null!==row&&row.forEach(function(field,index){null!==headerMapping[index]&&(newObject[headerMapping[index]]=field)}),newObject=grid.options.importerObjectCallback(grid,newObject),newObjects.push(newObject)}),newObjects},processHeaders:function(grid,headerRow){var headers=[];if(grid.options.columnDefs&&0!==grid.options.columnDefs.length){var lookupHash=service.flattenColumnDefs(grid,grid.options.columnDefs);return headerRow.forEach(function(value,index){lookupHash[value]?headers.push(lookupHash[value]):lookupHash[value.toLowerCase()]?headers.push(lookupHash[value.toLowerCase()]):headers.push(null)}),headers}return headerRow.forEach(function(value,index){headers.push(value.replace(/[^0-9a-zA-Z\-_]/g,"_"))}),headers},flattenColumnDefs:function(grid,columnDefs){var flattenedHash={};return columnDefs.forEach(function(columnDef,index){columnDef.name&&(flattenedHash[columnDef.name]=columnDef.field||columnDef.name,flattenedHash[columnDef.name.toLowerCase()]=columnDef.field||columnDef.name),columnDef.field&&(flattenedHash[columnDef.field]=columnDef.field||columnDef.name,flattenedHash[columnDef.field.toLowerCase()]=columnDef.field||columnDef.name),columnDef.displayName&&(flattenedHash[columnDef.displayName]=columnDef.field||columnDef.name,flattenedHash[columnDef.displayName.toLowerCase()]=columnDef.field||columnDef.name),columnDef.displayName&&grid.options.importerHeaderFilter&&(flattenedHash[grid.options.importerHeaderFilter(columnDef.displayName)]=columnDef.field||columnDef.name,flattenedHash[grid.options.importerHeaderFilter(columnDef.displayName).toLowerCase()]=columnDef.field||columnDef.name)}),flattenedHash},addObjects:function(grid,newObjects,$scope){if(grid.api.rowEdit){var dataChangeDereg=grid.registerDataChangeCallback(function(){grid.api.rowEdit.setRowsDirty(newObjects),dataChangeDereg()},[uiGridConstants.dataChange.ROW]);grid.importer.$scope.$on("$destroy",dataChangeDereg)}grid.importer.$scope.$apply(grid.options.importerDataAddCallback(grid,newObjects))},newObject:function(grid){return void 0!==grid.options&&void 0!==grid.options.importerNewObject?new grid.options.importerNewObject:{}},alertError:function(grid,alertI18nToken,consoleMessage,context){grid.options.importerErrorCallback?grid.options.importerErrorCallback(grid,alertI18nToken,consoleMessage,context):($window.alert(i18nService.getSafeText(alertI18nToken)),gridUtil.logError(consoleMessage+context))}};return service}]),module.directive("uiGridImporter",["uiGridImporterConstants","uiGridImporterService","gridUtil","$compile",function(uiGridImporterConstants,uiGridImporterService,gridUtil,$compile){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,link:function($scope,$elm,$attrs,uiGridCtrl){uiGridImporterService.initializeGrid($scope,uiGridCtrl.grid)}}}]),module.directive("uiGridImporterMenuItem",["uiGridImporterConstants","uiGridImporterService","gridUtil","$compile",function(uiGridImporterConstants,uiGridImporterService,gridUtil,$compile){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,templateUrl:"ui-grid/importerMenuItem",link:function($scope,$elm,$attrs,uiGridCtrl){var handleFileSelect=function(event){var target=event.srcElement||event.target;if(target&&target.files&&1===target.files.length){var fileObject=target.files[0];uiGridImporterService.importThisFile(grid,fileObject),target.form.reset()}},fileChooser=$elm[0].querySelectorAll(".ui-grid-importer-file-chooser"),grid=uiGridCtrl.grid;1!==fileChooser.length?gridUtil.logError("Found > 1 or < 1 file choosers within the menu item, error, cannot continue"):fileChooser[0].addEventListener("change",handleFileSelect,!1)}}}])}(),function(){"use strict";var module=angular.module("ui.grid.infiniteScroll",["ui.grid"]);module.service("uiGridInfiniteScrollService",["gridUtil","$compile","$timeout","uiGridConstants","ScrollEvent","$q",function(gridUtil,$compile,$timeout,uiGridConstants,ScrollEvent,$q){var service={initializeGrid:function(grid,$scope){if(service.defaultGridOptions(grid.options),grid.options.enableInfiniteScroll){grid.infiniteScroll={dataLoading:!1},service.setScrollDirections(grid,grid.options.infiniteScrollUp,grid.options.infiniteScrollDown),grid.api.core.on.scrollEnd($scope,service.handleScroll);var publicApi={events:{infiniteScroll:{needLoadMoreData:function($scope,fn){},needLoadMoreDataTop:function($scope,fn){}}},methods:{infiniteScroll:{dataLoaded:function(scrollUp,scrollDown){return service.setScrollDirections(grid,scrollUp,scrollDown),service.adjustScroll(grid).then(function(){grid.infiniteScroll.dataLoading=!1})},resetScroll:function(scrollUp,scrollDown){return service.setScrollDirections(grid,scrollUp,scrollDown),service.adjustInfiniteScrollPosition(grid,0)},saveScrollPercentage:function(){grid.infiniteScroll.prevScrollTop=grid.renderContainers.body.prevScrollTop,grid.infiniteScroll.previousVisibleRows=grid.getVisibleRowCount()},dataRemovedTop:function(scrollUp,scrollDown){service.dataRemovedTop(grid,scrollUp,scrollDown)},dataRemovedBottom:function(scrollUp,scrollDown){service.dataRemovedBottom(grid,scrollUp,scrollDown)},setScrollDirections:function(scrollUp,scrollDown){service.setScrollDirections(grid,scrollUp,scrollDown)}}}};grid.api.registerEventsFromObject(publicApi.events),grid.api.registerMethodsFromObject(publicApi.methods)}},defaultGridOptions:function(gridOptions){gridOptions.enableInfiniteScroll=!1!==gridOptions.enableInfiniteScroll,gridOptions.infiniteScrollRowsFromEnd=gridOptions.infiniteScrollRowsFromEnd||20,gridOptions.infiniteScrollUp=!0===gridOptions.infiniteScrollUp,gridOptions.infiniteScrollDown=!1!==gridOptions.infiniteScrollDown},setScrollDirections:function(grid,scrollUp,scrollDown){grid.infiniteScroll.scrollUp=!0===scrollUp,grid.suppressParentScrollUp=!0===scrollUp,grid.infiniteScroll.scrollDown=!1!==scrollDown,grid.suppressParentScrollDown=!1!==scrollDown},handleScroll:function(args){if(!(args.grid.infiniteScroll&&args.grid.infiniteScroll.dataLoading||"ui.grid.adjustInfiniteScrollPosition"===args.source)&&args.y)if(0===args.y.percentage)args.grid.scrollDirection=uiGridConstants.scrollDirection.UP,service.loadData(args.grid);else if(1===args.y.percentage)args.grid.scrollDirection=uiGridConstants.scrollDirection.DOWN,service.loadData(args.grid);else{var targetPercentage=args.grid.options.infiniteScrollRowsFromEnd/args.grid.renderContainers.body.visibleRowCache.length;args.grid.scrollDirection===uiGridConstants.scrollDirection.UP?args.y.percentage<=targetPercentage&&service.loadData(args.grid):args.grid.scrollDirection===uiGridConstants.scrollDirection.DOWN&&1-args.y.percentage<=targetPercentage&&service.loadData(args.grid)}},loadData:function(grid){grid.infiniteScroll.previousVisibleRows=grid.renderContainers.body.visibleRowCache.length,grid.infiniteScroll.direction=grid.scrollDirection,delete grid.infiniteScroll.prevScrollTop,grid.scrollDirection===uiGridConstants.scrollDirection.UP&&grid.infiniteScroll.scrollUp?(grid.infiniteScroll.dataLoading=!0,grid.api.infiniteScroll.raise.needLoadMoreDataTop()):grid.scrollDirection===uiGridConstants.scrollDirection.DOWN&&grid.infiniteScroll.scrollDown&&(grid.infiniteScroll.dataLoading=!0,grid.api.infiniteScroll.raise.needLoadMoreData())},adjustScroll:function(grid){var promise=$q.defer();return $timeout(function(){var viewportHeight,rowHeight,newVisibleRows,oldTop,newTop;viewportHeight=grid.getViewportHeight()+grid.headerHeight-grid.renderContainers.body.headerHeight-grid.scrollbarHeight,rowHeight=grid.options.rowHeight,void 0===grid.infiniteScroll.direction&&service.adjustInfiniteScrollPosition(grid,0),newVisibleRows=grid.getVisibleRowCount();var canvasHeight=rowHeight*newVisibleRows;grid.infiniteScroll.scrollDown&&viewportHeight>canvasHeight&&grid.api.infiniteScroll.raise.needLoadMoreData(),grid.infiniteScroll.direction===uiGridConstants.scrollDirection.UP&&(oldTop=grid.infiniteScroll.prevScrollTop||0,newTop=oldTop+(newVisibleRows-grid.infiniteScroll.previousVisibleRows)*rowHeight,service.adjustInfiniteScrollPosition(grid,newTop),$timeout(function(){promise.resolve()})),grid.infiniteScroll.direction===uiGridConstants.scrollDirection.DOWN&&(newTop=grid.infiniteScroll.prevScrollTop||grid.infiniteScroll.previousVisibleRows*rowHeight-viewportHeight,service.adjustInfiniteScrollPosition(grid,newTop),$timeout(function(){promise.resolve()}))},0),promise.promise},adjustInfiniteScrollPosition:function(grid,scrollTop){var scrollEvent=new ScrollEvent(grid,null,null,"ui.grid.adjustInfiniteScrollPosition"),visibleRows=grid.getVisibleRowCount(),viewportHeight=grid.getViewportHeight()+grid.headerHeight-grid.renderContainers.body.headerHeight-grid.scrollbarHeight,rowHeight=grid.options.rowHeight,scrollHeight=visibleRows*rowHeight-viewportHeight;0===scrollTop&&grid.infiniteScroll.scrollUp?scrollEvent.y={percentage:1/scrollHeight}:scrollEvent.y={percentage:scrollTop/scrollHeight},grid.scrollContainers("",scrollEvent)},dataRemovedTop:function(grid,scrollUp,scrollDown){var newVisibleRows,oldTop,newTop,rowHeight;return service.setScrollDirections(grid,scrollUp,scrollDown),newVisibleRows=grid.renderContainers.body.visibleRowCache.length,oldTop=grid.infiniteScroll.prevScrollTop,rowHeight=grid.options.rowHeight,newTop=oldTop-(grid.infiniteScroll.previousVisibleRows-newVisibleRows)*rowHeight,service.adjustInfiniteScrollPosition(grid,newTop)},dataRemovedBottom:function(grid,scrollUp,scrollDown){var newTop;return service.setScrollDirections(grid,scrollUp,scrollDown),newTop=grid.infiniteScroll.prevScrollTop,service.adjustInfiniteScrollPosition(grid,newTop)}};return service}]),module.directive("uiGridInfiniteScroll",["uiGridInfiniteScrollService",function(uiGridInfiniteScrollService){return{priority:-200,scope:!1,require:"^uiGrid",compile:function($scope,$elm,$attr){return{pre:function($scope,$elm,$attr,uiGridCtrl){uiGridInfiniteScrollService.initializeGrid(uiGridCtrl.grid,$scope)},post:function($scope,$elm,$attr){}}}}}])}(),function(){"use strict";var module=angular.module("ui.grid.moveColumns",["ui.grid"]);module.service("uiGridMoveColumnService",["$q","$timeout","$log","ScrollEvent","uiGridConstants","gridUtil",function($q,$timeout,$log,ScrollEvent,uiGridConstants,gridUtil){var service={initializeGrid:function(grid){var self=this;this.registerPublicApi(grid),this.defaultGridOptions(grid.options),grid.moveColumns={orderCache:[]},grid.registerColumnBuilder(self.movableColumnBuilder),grid.registerDataChangeCallback(self.verifyColumnOrder,[uiGridConstants.dataChange.COLUMN])},registerPublicApi:function(grid){var self=this,publicApi={events:{colMovable:{columnPositionChanged:function(colDef,originalPosition,newPosition){}}},methods:{colMovable:{moveColumn:function(originalPosition,finalPosition){var columns=grid.columns;if(!angular.isNumber(originalPosition)||!angular.isNumber(finalPosition))return void gridUtil.logError("MoveColumn: Please provide valid values for originalPosition and finalPosition");for(var nonMovableColumns=0,i=0;i<columns.length;i++)(angular.isDefined(columns[i].colDef.visible)&&!1===columns[i].colDef.visible||!0===columns[i].isRowHeader)&&nonMovableColumns++;if(originalPosition>=columns.length-nonMovableColumns||finalPosition>=columns.length-nonMovableColumns)return void gridUtil.logError("MoveColumn: Invalid values for originalPosition, finalPosition");var findPositionForRenderIndex=function(index){for(var position=index,i=0;i<=position;i++)angular.isDefined(columns[i])&&(angular.isDefined(columns[i].colDef.visible)&&!1===columns[i].colDef.visible||!0===columns[i].isRowHeader)&&position++;return position};self.redrawColumnAtPosition(grid,findPositionForRenderIndex(originalPosition),findPositionForRenderIndex(finalPosition))}}}};grid.api.registerEventsFromObject(publicApi.events),grid.api.registerMethodsFromObject(publicApi.methods)},defaultGridOptions:function(gridOptions){gridOptions.enableColumnMoving=!1!==gridOptions.enableColumnMoving},movableColumnBuilder:function(colDef,col,gridOptions){var promises=[];return colDef.enableColumnMoving=void 0===colDef.enableColumnMoving?gridOptions.enableColumnMoving:colDef.enableColumnMoving,$q.all(promises)},updateColumnCache:function(grid){grid.moveColumns.orderCache=grid.getOnlyDataColumns()},verifyColumnOrder:function(grid){var newIndex,headerRowOffset=grid.rowHeaderColumns.length;angular.forEach(grid.moveColumns.orderCache,function(cacheCol,cacheIndex){if(-1!==(newIndex=grid.columns.indexOf(cacheCol))&&newIndex-headerRowOffset!==cacheIndex){var column=grid.columns.splice(newIndex,1)[0];grid.columns.splice(cacheIndex+headerRowOffset,0,column)}})},redrawColumnAtPosition:function(grid,originalPosition,newPosition){var columns=grid.columns;if(originalPosition!==newPosition){var pos=originalPosition<newPosition?originalPosition+1:originalPosition-1,i0=Math.min(pos,newPosition);for(i0;i0<=Math.max(pos,newPosition)&&!columns[i0].visible;i0++);if(!(i0>Math.max(pos,newPosition))){var originalColumn=columns[originalPosition];if(originalColumn.colDef.enableColumnMoving){if(originalPosition>newPosition)for(var i1=originalPosition;i1>newPosition;i1--)columns[i1]=columns[i1-1];else if(newPosition>originalPosition)for(var i2=originalPosition;i2<newPosition;i2++)columns[i2]=columns[i2+1];columns[newPosition]=originalColumn,service.updateColumnCache(grid),grid.queueGridRefresh(),$timeout(function(){grid.api.core.notifyDataChange(uiGridConstants.dataChange.COLUMN),grid.api.colMovable.raise.columnPositionChanged(originalColumn.colDef,originalPosition,newPosition)})}}}}};return service}]),module.directive("uiGridMoveColumns",["uiGridMoveColumnService",function(uiGridMoveColumnService){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function($scope,$elm,$attrs,uiGridCtrl){uiGridMoveColumnService.initializeGrid(uiGridCtrl.grid)},post:function($scope,$elm,$attrs,uiGridCtrl){}}}}}]),module.directive("uiGridHeaderCell",["$q","gridUtil","uiGridMoveColumnService","$document","$log","uiGridConstants","ScrollEvent",function($q,gridUtil,uiGridMoveColumnService,$document,$log,uiGridConstants,ScrollEvent){return{priority:-10,require:"^uiGrid",compile:function(){return{post:function($scope,$elm,$attrs,uiGridCtrl){if($scope.col.colDef.enableColumnMoving){var gridLeft,previousMouseX,totalMouseMovement,rightMoveLimit,movingElm,reducedWidth,$contentsElm=angular.element($elm[0].querySelectorAll(".ui-grid-cell-contents")),elmCloned=!1,moveOccurred=!1,downFn=function(event){gridLeft=$scope.grid.element[0].getBoundingClientRect().left,$scope.grid.hasLeftContainer()&&(gridLeft+=$scope.grid.renderContainers.left.header[0].getBoundingClientRect().width),previousMouseX=event.pageX||(event.originalEvent?event.originalEvent.pageX:0),totalMouseMovement=0,rightMoveLimit=gridLeft+$scope.grid.getViewportWidth(),"mousedown"===event.type?($document.on("mousemove",moveFn),$document.on("mouseup",upFn)):"touchstart"===event.type&&($document.on("touchmove",moveFn),$document.on("touchend",upFn))},moveFn=function(event){var pageX=event.pageX||(event.originalEvent?event.originalEvent.pageX:0),changeValue=pageX-previousMouseX;0!==changeValue&&(document.onselectstart=function(){return!1},moveOccurred=!0,elmCloned?elmCloned&&(moveElement(changeValue),previousMouseX=pageX):cloneElement())},upFn=function(event){if(document.onselectstart=null,movingElm&&(movingElm.remove(),elmCloned=!1),offAllEvents(),onDownEvents(),moveOccurred){for(var columns=$scope.grid.columns,columnIndex=0,i=0;i<columns.length&&columns[i].colDef.name!==$scope.col.colDef.name;i++)columnIndex++;var targetIndex;if(totalMouseMovement<0){var il,totalColumnsLeftWidth=0;if($scope.grid.isRTL()){for(il=columnIndex+1;il<columns.length;il++)if((angular.isUndefined(columns[il].colDef.visible)||!0===columns[il].colDef.visible)&&(totalColumnsLeftWidth+=columns[il].drawnWidth||columns[il].width||columns[il].colDef.width)>Math.abs(totalMouseMovement)){uiGridMoveColumnService.redrawColumnAtPosition($scope.grid,columnIndex,il-1);break}}else for(il=columnIndex-1;il>=0;il--)if((angular.isUndefined(columns[il].colDef.visible)||!0===columns[il].colDef.visible)&&(totalColumnsLeftWidth+=columns[il].drawnWidth||columns[il].width||columns[il].colDef.width)>Math.abs(totalMouseMovement)){uiGridMoveColumnService.redrawColumnAtPosition($scope.grid,columnIndex,il+1);break}totalColumnsLeftWidth<Math.abs(totalMouseMovement)&&(targetIndex=0,$scope.grid.isRTL()&&(targetIndex=columns.length-1),uiGridMoveColumnService.redrawColumnAtPosition($scope.grid,columnIndex,targetIndex))}else if(totalMouseMovement>0){var ir,totalColumnsRightWidth=0;if($scope.grid.isRTL()){for(ir=columnIndex-1;ir>0;ir--)if((angular.isUndefined(columns[ir].colDef.visible)||!0===columns[ir].colDef.visible)&&(totalColumnsRightWidth+=columns[ir].drawnWidth||columns[ir].width||columns[ir].colDef.width)>totalMouseMovement){uiGridMoveColumnService.redrawColumnAtPosition($scope.grid,columnIndex,ir);break}}else for(ir=columnIndex+1;ir<columns.length;ir++)if((angular.isUndefined(columns[ir].colDef.visible)||!0===columns[ir].colDef.visible)&&(totalColumnsRightWidth+=columns[ir].drawnWidth||columns[ir].width||columns[ir].colDef.width)>totalMouseMovement){uiGridMoveColumnService.redrawColumnAtPosition($scope.grid,columnIndex,ir-1);break}totalColumnsRightWidth<totalMouseMovement&&(targetIndex=columns.length-1,$scope.grid.isRTL()&&(targetIndex=0),uiGridMoveColumnService.redrawColumnAtPosition($scope.grid,columnIndex,targetIndex))}}},onDownEvents=function(){$contentsElm.on("touchstart",downFn),$contentsElm.on("mousedown",downFn)},offAllEvents=function(){$contentsElm.off("touchstart",downFn),$contentsElm.off("mousedown",downFn),$document.off("mousemove",moveFn),$document.off("touchmove",moveFn),$document.off("mouseup",upFn),$document.off("touchend",upFn)};onDownEvents();var cloneElement=function(){elmCloned=!0,movingElm=$elm.clone(),$elm.parent().append(movingElm),movingElm.addClass("movingColumn");var movingElementStyles={};movingElementStyles.left=$elm[0].offsetLeft+"px";var gridRight=$scope.grid.element[0].getBoundingClientRect().right,elmRight=$elm[0].getBoundingClientRect().right;elmRight>gridRight&&(reducedWidth=$scope.col.drawnWidth+(gridRight-elmRight),movingElementStyles.width=reducedWidth+"px"),movingElm.css(movingElementStyles)},moveElement=function(changeValue){for(var columns=$scope.grid.columns,totalColumnWidth=0,i=0;i<columns.length;i++)(angular.isUndefined(columns[i].colDef.visible)||!0===columns[i].colDef.visible)&&(totalColumnWidth+=columns[i].drawnWidth||columns[i].width||columns[i].colDef.width);var newElementLeft,currentElmLeft=movingElm[0].getBoundingClientRect().left-1,currentElmRight=movingElm[0].getBoundingClientRect().right;if(newElementLeft=currentElmLeft-gridLeft+changeValue,newElementLeft=newElementLeft<rightMoveLimit?newElementLeft:rightMoveLimit,(currentElmLeft>=gridLeft||changeValue>0)&&(currentElmRight<=rightMoveLimit||changeValue<0))movingElm.css({visibility:"visible",left:movingElm[0].offsetLeft+(newElementLeft<rightMoveLimit?changeValue:rightMoveLimit-currentElmLeft)+"px"});else if(totalColumnWidth>Math.ceil(uiGridCtrl.grid.gridWidth)){changeValue*=8;var scrollEvent=new ScrollEvent($scope.col.grid,null,null,"uiGridHeaderCell.moveElement");scrollEvent.x={pixels:changeValue},scrollEvent.grid.scrollContainers("",scrollEvent)}for(var totalColumnsLeftWidth=0,il=0;il<columns.length;il++)if(angular.isUndefined(columns[il].colDef.visible)||!0===columns[il].colDef.visible){if(columns[il].colDef.name===$scope.col.colDef.name)break;totalColumnsLeftWidth+=columns[il].drawnWidth||columns[il].width||columns[il].colDef.width}void 0===$scope.newScrollLeft?totalMouseMovement+=changeValue:totalMouseMovement=$scope.newScrollLeft+newElementLeft-totalColumnsLeftWidth,reducedWidth<$scope.col.drawnWidth&&(reducedWidth+=Math.abs(changeValue),movingElm.css({width:reducedWidth+"px"}))}}}}}}}])}(),function(){"use strict";var module=angular.module("ui.grid.pagination",["ng","ui.grid"]);module.service("uiGridPaginationService",["gridUtil",function(gridUtil){var service={initializeGrid:function(grid){service.defaultGridOptions(grid.options);var publicApi={events:{pagination:{paginationChanged:function(currentPage,pageSize){}}},methods:{pagination:{getPage:function(){return grid.options.enablePagination?grid.options.paginationCurrentPage:null},getTotalPages:function(){return grid.options.enablePagination?0===grid.options.totalItems?1:Math.ceil(grid.options.totalItems/grid.options.paginationPageSize):null},nextPage:function(){grid.options.enablePagination&&(grid.options.totalItems>0?grid.options.paginationCurrentPage=Math.min(grid.options.paginationCurrentPage+1,publicApi.methods.pagination.getTotalPages()):grid.options.paginationCurrentPage++)},previousPage:function(){grid.options.enablePagination&&(grid.options.paginationCurrentPage=Math.max(grid.options.paginationCurrentPage-1,1))},seek:function(page){if(grid.options.enablePagination){if(!angular.isNumber(page)||page<1)throw"Invalid page number: "+page;grid.options.paginationCurrentPage=Math.min(page,publicApi.methods.pagination.getTotalPages())}}}}};grid.api.registerEventsFromObject(publicApi.events),grid.api.registerMethodsFromObject(publicApi.methods);var processPagination=function(renderableRows){if(grid.options.useExternalPagination||!grid.options.enablePagination)return renderableRows;var pageSize=parseInt(grid.options.paginationPageSize,10),currentPage=parseInt(grid.options.paginationCurrentPage,10),visibleRows=renderableRows.filter(function(row){return row.visible});grid.options.totalItems=visibleRows.length;var firstRow=(currentPage-1)*pageSize;return firstRow>visibleRows.length&&(currentPage=grid.options.paginationCurrentPage=1,firstRow=(currentPage-1)*pageSize),visibleRows.slice(firstRow,firstRow+pageSize)};grid.registerRowsProcessor(processPagination,900)},defaultGridOptions:function(gridOptions){gridOptions.enablePagination=!1!==gridOptions.enablePagination,gridOptions.enablePaginationControls=!1!==gridOptions.enablePaginationControls,gridOptions.useExternalPagination=!0===gridOptions.useExternalPagination,gridUtil.isNullOrUndefined(gridOptions.totalItems)&&(gridOptions.totalItems=0),gridUtil.isNullOrUndefined(gridOptions.paginationPageSizes)&&(gridOptions.paginationPageSizes=[250,500,1e3]),gridUtil.isNullOrUndefined(gridOptions.paginationPageSize)&&(gridOptions.paginationPageSizes.length>0?gridOptions.paginationPageSize=gridOptions.paginationPageSizes[0]:gridOptions.paginationPageSize=0),gridUtil.isNullOrUndefined(gridOptions.paginationCurrentPage)&&(gridOptions.paginationCurrentPage=1),gridUtil.isNullOrUndefined(gridOptions.paginationTemplate)&&(gridOptions.paginationTemplate="ui-grid/pagination")},onPaginationChanged:function(grid,currentPage,pageSize){grid.api.pagination.raise.paginationChanged(currentPage,pageSize),grid.options.useExternalPagination||grid.queueGridRefresh()}};return service}]),module.directive("uiGridPagination",["gridUtil","uiGridPaginationService",function(gridUtil,uiGridPaginationService){return{priority:-200,scope:!1,require:"uiGrid",link:{pre:function($scope,$elm,$attr,uiGridCtrl){uiGridPaginationService.initializeGrid(uiGridCtrl.grid),gridUtil.getTemplate(uiGridCtrl.grid.options.paginationTemplate).then(function(contents){var template=angular.element(contents);$elm.append(template),uiGridCtrl.innerCompile(template)})}}}}]),module.directive("uiGridPager",["uiGridPaginationService","uiGridConstants","gridUtil","i18nService",function(uiGridPaginationService,uiGridConstants,gridUtil,i18nService){return{priority:-200,scope:!0,require:"^uiGrid",link:function($scope,$elm,$attr,uiGridCtrl){$scope.aria=i18nService.getSafeText("pagination.aria"),$scope.paginationApi=uiGridCtrl.grid.api.pagination,$scope.sizesLabel=i18nService.getSafeText("pagination.sizes"),$scope.totalItemsLabel=i18nService.getSafeText("pagination.totalItems"),$scope.paginationOf=i18nService.getSafeText("pagination.of"),$scope.paginationThrough=i18nService.getSafeText("pagination.through");var options=uiGridCtrl.grid.options;uiGridCtrl.grid.renderContainers.body.registerViewportAdjuster(function(adjustment){return adjustment.height=adjustment.height-gridUtil.elementHeight($elm,"padding"),adjustment});var dataChangeDereg=uiGridCtrl.grid.registerDataChangeCallback(function(grid){grid.options.useExternalPagination||(grid.options.totalItems=grid.rows.length)},[uiGridConstants.dataChange.ROW]);$scope.$on("$destroy",dataChangeDereg)
;var setShowing=function(){$scope.showingLow=(options.paginationCurrentPage-1)*options.paginationPageSize+1,$scope.showingHigh=Math.min(options.paginationCurrentPage*options.paginationPageSize,options.totalItems)},deregT=$scope.$watch("grid.options.totalItems + grid.options.paginationPageSize",setShowing),deregP=$scope.$watch("grid.options.paginationCurrentPage + grid.options.paginationPageSize",function(newValues,oldValues){if(newValues!==oldValues&&void 0!==oldValues){if(!angular.isNumber(options.paginationCurrentPage)||options.paginationCurrentPage<1)return void(options.paginationCurrentPage=1);if(options.totalItems>0&&options.paginationCurrentPage>$scope.paginationApi.getTotalPages())return void(options.paginationCurrentPage=$scope.paginationApi.getTotalPages());setShowing(),uiGridPaginationService.onPaginationChanged($scope.grid,options.paginationCurrentPage,options.paginationPageSize)}});$scope.$on("$destroy",function(){deregT(),deregP()}),$scope.cantPageForward=function(){return options.totalItems>0?options.paginationCurrentPage>=$scope.paginationApi.getTotalPages():options.data.length<1},$scope.cantPageToLast=function(){return!(options.totalItems>0)||$scope.cantPageForward()},$scope.cantPageBackward=function(){return options.paginationCurrentPage<=1};var focusToInputIf=function(condition){condition&&gridUtil.focus.bySelector($elm,".ui-grid-pager-control-input")};$scope.pageFirstPageClick=function(){$scope.paginationApi.seek(1),focusToInputIf($scope.cantPageBackward())},$scope.pagePreviousPageClick=function(){$scope.paginationApi.previousPage(),focusToInputIf($scope.cantPageBackward())},$scope.pageNextPageClick=function(){$scope.paginationApi.nextPage(),focusToInputIf($scope.cantPageForward())},$scope.pageLastPageClick=function(){$scope.paginationApi.seek($scope.paginationApi.getTotalPages()),focusToInputIf($scope.cantPageToLast())}}}}])}(),function(){"use strict";var module=angular.module("ui.grid.pinning",["ui.grid"]);module.constant("uiGridPinningConstants",{container:{LEFT:"left",RIGHT:"right",NONE:""}}),module.service("uiGridPinningService",["gridUtil","GridRenderContainer","i18nService","uiGridPinningConstants",function(gridUtil,GridRenderContainer,i18nService,uiGridPinningConstants){var service={initializeGrid:function(grid){service.defaultGridOptions(grid.options),grid.registerColumnBuilder(service.pinningColumnBuilder);var publicApi={events:{pinning:{columnPinned:function(colDef,container){}}},methods:{pinning:{pinColumn:function(col,container){service.pinColumn(grid,col,container)}}}};grid.api.registerEventsFromObject(publicApi.events),grid.api.registerMethodsFromObject(publicApi.methods)},defaultGridOptions:function(gridOptions){gridOptions.enablePinning=!1!==gridOptions.enablePinning},pinningColumnBuilder:function(colDef,col,gridOptions){if(colDef.enablePinning=void 0===colDef.enablePinning?gridOptions.enablePinning:colDef.enablePinning,colDef.pinnedLeft?(col.renderContainer="left",col.grid.createLeftContainer()):colDef.pinnedRight&&(col.renderContainer="right",col.grid.createRightContainer()),colDef.enablePinning){var pinColumnLeftAction={name:"ui.grid.pinning.pinLeft",title:i18nService.get().pinning.pinLeft,icon:"ui-grid-icon-left-open",shown:function(){return void 0===this.context.col.renderContainer||!this.context.col.renderContainer||"left"!==this.context.col.renderContainer},action:function(){service.pinColumn(this.context.col.grid,this.context.col,uiGridPinningConstants.container.LEFT)}},pinColumnRightAction={name:"ui.grid.pinning.pinRight",title:i18nService.get().pinning.pinRight,icon:"ui-grid-icon-right-open",shown:function(){return void 0===this.context.col.renderContainer||!this.context.col.renderContainer||"right"!==this.context.col.renderContainer},action:function(){service.pinColumn(this.context.col.grid,this.context.col,uiGridPinningConstants.container.RIGHT)}},removePinAction={name:"ui.grid.pinning.unpin",title:i18nService.get().pinning.unpin,icon:"ui-grid-icon-cancel",shown:function(){return void 0!==this.context.col.renderContainer&&null!==this.context.col.renderContainer&&"body"!==this.context.col.renderContainer},action:function(){service.pinColumn(this.context.col.grid,this.context.col,uiGridPinningConstants.container.NONE)}};gridUtil.arrayContainsObjectWithProperty(col.menuItems,"name","ui.grid.pinning.pinLeft")||col.menuItems.push(pinColumnLeftAction),gridUtil.arrayContainsObjectWithProperty(col.menuItems,"name","ui.grid.pinning.pinRight")||col.menuItems.push(pinColumnRightAction),gridUtil.arrayContainsObjectWithProperty(col.menuItems,"name","ui.grid.pinning.unpin")||col.menuItems.push(removePinAction)}},pinColumn:function(grid,col,container){container===uiGridPinningConstants.container.NONE?(col.renderContainer=null,col.colDef.pinnedLeft=col.colDef.pinnedRight=!1):(col.renderContainer=container,container===uiGridPinningConstants.container.LEFT?grid.createLeftContainer():container===uiGridPinningConstants.container.RIGHT&&grid.createRightContainer()),grid.refresh().then(function(){grid.api.pinning.raise.columnPinned(col.colDef,container)})}};return service}]),module.directive("uiGridPinning",["gridUtil","uiGridPinningService",function(gridUtil,uiGridPinningService){return{require:"uiGrid",scope:!1,compile:function(){return{pre:function($scope,$elm,$attrs,uiGridCtrl){uiGridPinningService.initializeGrid(uiGridCtrl.grid)},post:function($scope,$elm,$attrs,uiGridCtrl){}}}}}])}(),function(){"use strict";var module=angular.module("ui.grid.resizeColumns",["ui.grid"]);module.service("uiGridResizeColumnsService",["gridUtil","$q","$timeout",function(gridUtil,$q,$timeout){return{defaultGridOptions:function(gridOptions){gridOptions.enableColumnResizing=!1!==gridOptions.enableColumnResizing,!1===gridOptions.enableColumnResize&&(gridOptions.enableColumnResizing=!1)},colResizerColumnBuilder:function(colDef,col,gridOptions){var promises=[];return colDef.enableColumnResizing=void 0===colDef.enableColumnResizing?gridOptions.enableColumnResizing:colDef.enableColumnResizing,!1===colDef.enableColumnResize&&(colDef.enableColumnResizing=!1),$q.all(promises)},registerPublicApi:function(grid){var publicApi={events:{colResizable:{columnSizeChanged:function(colDef,deltaChange){}}}};grid.api.registerEventsFromObject(publicApi.events)},fireColumnSizeChanged:function(grid,colDef,deltaChange){$timeout(function(){grid.api.colResizable?grid.api.colResizable.raise.columnSizeChanged(colDef,deltaChange):gridUtil.logError("The resizeable api is not registered, this may indicate that you've included the module but not added the 'ui-grid-resize-columns' directive to your grid definition.  Cannot raise any events.")})},findTargetCol:function(col,position,rtlMultiplier){var renderContainer=col.getRenderContainer();if("left"===position){var colIndex=renderContainer.visibleColumnCache.indexOf(col);return renderContainer.visibleColumnCache[colIndex-1*rtlMultiplier]}return col}}}]),module.directive("uiGridResizeColumns",["gridUtil","uiGridResizeColumnsService",function(gridUtil,uiGridResizeColumnsService){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function($scope,$elm,$attrs,uiGridCtrl){uiGridResizeColumnsService.defaultGridOptions(uiGridCtrl.grid.options),uiGridCtrl.grid.registerColumnBuilder(uiGridResizeColumnsService.colResizerColumnBuilder),uiGridResizeColumnsService.registerPublicApi(uiGridCtrl.grid)},post:function($scope,$elm,$attrs,uiGridCtrl){}}}}}]),module.directive("uiGridHeaderCell",["gridUtil","$templateCache","$compile","$q","uiGridResizeColumnsService","uiGridConstants","$timeout",function(gridUtil,$templateCache,$compile,$q,uiGridResizeColumnsService,uiGridConstants,$timeout){return{priority:-10,require:"^uiGrid",compile:function(){return{post:function($scope,$elm,$attrs,uiGridCtrl){var grid=uiGridCtrl.grid;if(grid.options.enableColumnResizing){var columnResizerElm=$templateCache.get("ui-grid/columnResizer"),rtlMultiplier=1;grid.isRTL()&&($scope.position="left",rtlMultiplier=-1);var displayResizers=function(){for(var resizers=$elm[0].getElementsByClassName("ui-grid-column-resizer"),i=0;i<resizers.length;i++)angular.element(resizers[i]).remove();var otherCol=uiGridResizeColumnsService.findTargetCol($scope.col,"left",rtlMultiplier),renderContainer=$scope.col.getRenderContainer();if(otherCol&&0!==renderContainer.visibleColumnCache.indexOf($scope.col)&&!1!==otherCol.colDef.enableColumnResizing){var resizerLeft=angular.element(columnResizerElm).clone();resizerLeft.attr("position","left"),$elm.prepend(resizerLeft),$compile(resizerLeft)($scope)}if(!1!==$scope.col.colDef.enableColumnResizing){var resizerRight=angular.element(columnResizerElm).clone();resizerRight.attr("position","right"),$elm.append(resizerRight),$compile(resizerRight)($scope)}};displayResizers();var waitDisplay=function(){$timeout(displayResizers)},dataChangeDereg=grid.registerDataChangeCallback(waitDisplay,[uiGridConstants.dataChange.COLUMN]);$scope.$on("$destroy",dataChangeDereg)}}}}}}]),module.directive("uiGridColumnResizer",["$document","gridUtil","uiGridConstants","uiGridResizeColumnsService",function($document,gridUtil,uiGridConstants,uiGridResizeColumnsService){var resizeOverlay=angular.element('<div class="ui-grid-resize-overlay"></div>');return{priority:0,scope:{col:"=",position:"@",renderIndex:"="},require:"?^uiGrid",link:function($scope,$elm,$attrs,uiGridCtrl){function refreshCanvas(xDiff){uiGridCtrl.grid.refreshCanvas(!0).then(function(){uiGridCtrl.grid.queueGridRefresh()})}function constrainWidth(col,width){var newWidth=width;return col.minWidth&&newWidth<col.minWidth?newWidth=col.minWidth:col.maxWidth&&newWidth>col.maxWidth&&(newWidth=col.maxWidth),newWidth}function moveFunction(event,args){event.originalEvent&&(event=event.originalEvent),event.preventDefault(),x=(event.targetTouches?event.targetTouches[0]:event).clientX-gridLeft,x<0?x=0:x>uiGridCtrl.grid.gridWidth&&(x=uiGridCtrl.grid.gridWidth);var col=uiGridResizeColumnsService.findTargetCol($scope.col,$scope.position,rtlMultiplier);if(!1!==col.colDef.enableColumnResizing){uiGridCtrl.grid.element.hasClass("column-resizing")||uiGridCtrl.grid.element.addClass("column-resizing");var xDiff=x-startX,newWidth=parseInt(col.drawnWidth+xDiff*rtlMultiplier,10);x+=(constrainWidth(col,newWidth)-newWidth)*rtlMultiplier,resizeOverlay.css({left:x+"px"}),uiGridCtrl.fireEvent(uiGridConstants.events.ITEM_DRAGGING)}}function upFunction(event,args){event.originalEvent&&(event=event.originalEvent),event.preventDefault(),uiGridCtrl.grid.element.removeClass("column-resizing"),resizeOverlay.remove(),x=(event.changedTouches?event.changedTouches[0]:event).clientX-gridLeft;var xDiff=x-startX;if(0===xDiff)return offAllEvents(),void onDownEvents();var col=uiGridResizeColumnsService.findTargetCol($scope.col,$scope.position,rtlMultiplier);if(!1!==col.colDef.enableColumnResizing){var newWidth=parseInt(col.drawnWidth+xDiff*rtlMultiplier,10);col.width=constrainWidth(col,newWidth),col.hasCustomWidth=!0,refreshCanvas(xDiff),uiGridResizeColumnsService.fireColumnSizeChanged(uiGridCtrl.grid,col.colDef,xDiff),offAllEvents(),onDownEvents()}}var startX=0,x=0,gridLeft=0,rtlMultiplier=1;uiGridCtrl.grid.isRTL()&&($scope.position="left",rtlMultiplier=-1),"left"===$scope.position?$elm.addClass("left"):"right"===$scope.position&&$elm.addClass("right");var downFunction=function(event,args){event.originalEvent&&(event=event.originalEvent),event.stopPropagation(),gridLeft=uiGridCtrl.grid.element[0].getBoundingClientRect().left,startX=(event.targetTouches?event.targetTouches[0]:event).clientX-gridLeft,uiGridCtrl.grid.element.append(resizeOverlay),resizeOverlay.css({left:startX}),"touchstart"===event.type?($document.on("touchend",upFunction),$document.on("touchmove",moveFunction),$elm.off("mousedown",downFunction)):($document.on("mouseup",upFunction),$document.on("mousemove",moveFunction),$elm.off("touchstart",downFunction))},onDownEvents=function(){$elm.on("mousedown",downFunction),$elm.on("touchstart",downFunction)},offAllEvents=function(){$document.off("mouseup",upFunction),$document.off("touchend",upFunction),$document.off("mousemove",moveFunction),$document.off("touchmove",moveFunction),$elm.off("mousedown",downFunction),$elm.off("touchstart",downFunction)};onDownEvents();var dblClickFn=function(event,args){event.stopPropagation();var col=uiGridResizeColumnsService.findTargetCol($scope.col,$scope.position,rtlMultiplier);if(!1!==col.colDef.enableColumnResizing){var maxWidth=0,xDiff=0,renderContainerElm=gridUtil.closestElm($elm,".ui-grid-render-container"),cells=renderContainerElm.querySelectorAll("."+uiGridConstants.COL_CLASS_PREFIX+col.uid+" .ui-grid-cell-contents");Array.prototype.forEach.call(cells,function(cell){var menuButton;angular.element(cell).parent().hasClass("ui-grid-header-cell")&&(menuButton=angular.element(cell).parent()[0].querySelectorAll(".ui-grid-column-menu-button")),gridUtil.fakeElement(cell,{},function(newElm){var e=angular.element(newElm);e.attr("style","float: left");var width=gridUtil.elementWidth(e);if(menuButton){width+=gridUtil.elementWidth(menuButton)}width>maxWidth&&(maxWidth=width,xDiff=maxWidth-width)})}),col.width=constrainWidth(col,maxWidth),col.hasCustomWidth=!0,refreshCanvas(xDiff),uiGridResizeColumnsService.fireColumnSizeChanged(uiGridCtrl.grid,col.colDef,xDiff)}};$elm.on("dblclick",dblClickFn),$elm.on("$destroy",function(){$elm.off("dblclick",dblClickFn),offAllEvents()})}}}])}(),function(){"use strict";var module=angular.module("ui.grid.rowEdit",["ui.grid","ui.grid.edit","ui.grid.cellNav"]);module.constant("uiGridRowEditConstants",{}),module.service("uiGridRowEditService",["$interval","$q","uiGridConstants","uiGridRowEditConstants","gridUtil",function($interval,$q,uiGridConstants,uiGridRowEditConstants,gridUtil){var service={initializeGrid:function(scope,grid){grid.rowEdit={};var publicApi={events:{rowEdit:{saveRow:function(rowEntity){}}},methods:{rowEdit:{setSavePromise:function(rowEntity,savePromise){service.setSavePromise(grid,rowEntity,savePromise)},getDirtyRows:function(){return grid.rowEdit.dirtyRows?grid.rowEdit.dirtyRows:[]},getErrorRows:function(){return grid.rowEdit.errorRows?grid.rowEdit.errorRows:[]},flushDirtyRows:function(){return service.flushDirtyRows(grid)},setRowsDirty:function(dataRows){service.setRowsDirty(grid,dataRows)},setRowsClean:function(dataRows){service.setRowsClean(grid,dataRows)}}}};grid.api.registerEventsFromObject(publicApi.events),grid.api.registerMethodsFromObject(publicApi.methods),grid.api.core.on.renderingComplete(scope,function(gridApi){grid.api.edit.on.afterCellEdit(scope,service.endEditCell),grid.api.edit.on.beginCellEdit(scope,service.beginEditCell),grid.api.edit.on.cancelCellEdit(scope,service.cancelEditCell),grid.api.cellNav&&grid.api.cellNav.on.navigate(scope,service.navigate)})},defaultGridOptions:function(gridOptions){},saveRow:function(grid,gridRow){var self=this;return function(){if(gridRow.isSaving=!0,gridRow.rowEditSavePromise)return gridRow.rowEditSavePromise;var promise=grid.api.rowEdit.raise.saveRow(gridRow.entity);return gridRow.rowEditSavePromise?gridRow.rowEditSavePromise.then(self.processSuccessPromise(grid,gridRow),self.processErrorPromise(grid,gridRow)):gridUtil.logError("A promise was not returned when saveRow event was raised, either nobody is listening to event, or event handler did not return a promise"),promise}},setSavePromise:function(grid,rowEntity,savePromise){grid.getRow(rowEntity).rowEditSavePromise=savePromise},processSuccessPromise:function(grid,gridRow){var self=this;return function(){delete gridRow.isSaving,delete gridRow.isDirty,delete gridRow.isError,delete gridRow.rowEditSaveTimer,delete gridRow.rowEditSavePromise,self.removeRow(grid.rowEdit.errorRows,gridRow),self.removeRow(grid.rowEdit.dirtyRows,gridRow)}},processErrorPromise:function(grid,gridRow){return function(){delete gridRow.isSaving,delete gridRow.rowEditSaveTimer,delete gridRow.rowEditSavePromise,gridRow.isError=!0,grid.rowEdit.errorRows||(grid.rowEdit.errorRows=[]),service.isRowPresent(grid.rowEdit.errorRows,gridRow)||grid.rowEdit.errorRows.push(gridRow)}},removeRow:function(rowArray,removeGridRow){void 0!==rowArray&&null!==rowArray&&rowArray.forEach(function(gridRow,index){gridRow.uid===removeGridRow.uid&&rowArray.splice(index,1)})},isRowPresent:function(rowArray,removeGridRow){var present=!1;return rowArray.forEach(function(gridRow,index){gridRow.uid===removeGridRow.uid&&(present=!0)}),present},flushDirtyRows:function(grid){var promises=[];return grid.api.rowEdit.getDirtyRows().forEach(function(gridRow){service.saveRow(grid,gridRow)(),promises.push(gridRow.rowEditSavePromise)}),$q.all(promises)},endEditCell:function(rowEntity,colDef,newValue,previousValue){var grid=this.grid,gridRow=grid.getRow(rowEntity);if(!gridRow)return void gridUtil.logError("Unable to find rowEntity in grid data, dirty flag cannot be set");(newValue!==previousValue||gridRow.isDirty)&&(grid.rowEdit.dirtyRows||(grid.rowEdit.dirtyRows=[]),gridRow.isDirty||(gridRow.isDirty=!0,grid.rowEdit.dirtyRows.push(gridRow)),delete gridRow.isError,service.considerSetTimer(grid,gridRow))},beginEditCell:function(rowEntity,colDef){var grid=this.grid,gridRow=grid.getRow(rowEntity);if(!gridRow)return void gridUtil.logError("Unable to find rowEntity in grid data, timer cannot be cancelled");service.cancelTimer(grid,gridRow)},cancelEditCell:function(rowEntity,colDef){var grid=this.grid,gridRow=grid.getRow(rowEntity);if(!gridRow)return void gridUtil.logError("Unable to find rowEntity in grid data, timer cannot be set");service.considerSetTimer(grid,gridRow)},navigate:function(newRowCol,oldRowCol){var grid=this.grid;newRowCol.row.rowEditSaveTimer&&service.cancelTimer(grid,newRowCol.row),oldRowCol&&oldRowCol.row&&oldRowCol.row!==newRowCol.row&&service.considerSetTimer(grid,oldRowCol.row)},considerSetTimer:function(grid,gridRow){if(service.cancelTimer(grid,gridRow),gridRow.isDirty&&!gridRow.isSaving&&-1!==grid.options.rowEditWaitInterval){var waitTime=grid.options.rowEditWaitInterval?grid.options.rowEditWaitInterval:2e3;gridRow.rowEditSaveTimer=$interval(service.saveRow(grid,gridRow),waitTime,1)}},cancelTimer:function(grid,gridRow){gridRow.rowEditSaveTimer&&!gridRow.isSaving&&($interval.cancel(gridRow.rowEditSaveTimer),delete gridRow.rowEditSaveTimer)},setRowsDirty:function(grid,myDataRows){var gridRow;myDataRows.forEach(function(value,index){gridRow=grid.getRow(value),gridRow?(grid.rowEdit.dirtyRows||(grid.rowEdit.dirtyRows=[]),gridRow.isDirty||(gridRow.isDirty=!0,grid.rowEdit.dirtyRows.push(gridRow)),delete gridRow.isError,service.considerSetTimer(grid,gridRow)):gridUtil.logError("requested row not found in rowEdit.setRowsDirty, row was: "+value)})},setRowsClean:function(grid,myDataRows){var gridRow;myDataRows.forEach(function(value,index){gridRow=grid.getRow(value),gridRow?(delete gridRow.isDirty,service.removeRow(grid.rowEdit.dirtyRows,gridRow),service.cancelTimer(grid,gridRow),delete gridRow.isError,service.removeRow(grid.rowEdit.errorRows,gridRow)):gridUtil.logError("requested row not found in rowEdit.setRowsClean, row was: "+value)})}};return service}]),module.directive("uiGridRowEdit",["gridUtil","uiGridRowEditService","uiGridEditConstants",function(gridUtil,uiGridRowEditService,uiGridEditConstants){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function($scope,$elm,$attrs,uiGridCtrl){uiGridRowEditService.initializeGrid($scope,uiGridCtrl.grid)},post:function($scope,$elm,$attrs,uiGridCtrl){}}}}}]),module.directive("uiGridViewport",["$compile","uiGridConstants","gridUtil","$parse",function($compile,uiGridConstants,gridUtil,$parse){return{priority:-200,scope:!1,compile:function($elm,$attrs){var rowRepeatDiv=angular.element($elm.children().children()[0]),existingNgClass=rowRepeatDiv.attr("ng-class"),newNgClass="";return newNgClass=existingNgClass?existingNgClass.slice(0,-1)+", 'ui-grid-row-dirty': row.isDirty, 'ui-grid-row-saving': row.isSaving, 'ui-grid-row-error': row.isError}":"{'ui-grid-row-dirty': row.isDirty, 'ui-grid-row-saving': row.isSaving, 'ui-grid-row-error': row.isError}",rowRepeatDiv.attr("ng-class",newNgClass),{pre:function($scope,$elm,$attrs,controllers){},post:function($scope,$elm,$attrs,controllers){}}}}}])}(),function(){"use strict";var module=angular.module("ui.grid.saveState",["ui.grid","ui.grid.selection","ui.grid.cellNav","ui.grid.grouping","ui.grid.pinning","ui.grid.treeView"]);module.constant("uiGridSaveStateConstants",{featureName:"saveState"}),module.service("uiGridSaveStateService",["$q","uiGridSaveStateConstants","gridUtil","$compile","$interval","uiGridConstants",function($q,uiGridSaveStateConstants,gridUtil,$compile,$interval,uiGridConstants){var service={initializeGrid:function(grid){grid.saveState={},this.defaultGridOptions(grid.options);var publicApi={events:{saveState:{}},methods:{saveState:{save:function(){return service.save(grid)},restore:function($scope,state){service.restore(grid,$scope,state)}}}};grid.api.registerEventsFromObject(publicApi.events),grid.api.registerMethodsFromObject(publicApi.methods)},defaultGridOptions:function(gridOptions){gridOptions.saveWidths=!1!==gridOptions.saveWidths,gridOptions.saveOrder=!1!==gridOptions.saveOrder,gridOptions.saveScroll=!0===gridOptions.saveScroll,gridOptions.saveFocus=!0!==gridOptions.saveScroll&&!1!==gridOptions.saveFocus,gridOptions.saveVisible=!1!==gridOptions.saveVisible,gridOptions.saveSort=!1!==gridOptions.saveSort,gridOptions.saveFilter=!1!==gridOptions.saveFilter,gridOptions.saveSelection=!1!==gridOptions.saveSelection,gridOptions.saveGrouping=!1!==gridOptions.saveGrouping,gridOptions.saveGroupingExpandedStates=!0===gridOptions.saveGroupingExpandedStates,gridOptions.savePinning=!1!==gridOptions.savePinning,gridOptions.saveTreeView=!1!==gridOptions.saveTreeView},save:function(grid){var savedState={};return savedState.columns=service.saveColumns(grid),savedState.scrollFocus=service.saveScrollFocus(grid),savedState.selection=service.saveSelection(grid),savedState.grouping=service.saveGrouping(grid),savedState.treeView=service.saveTreeView(grid),savedState.pagination=service.savePagination(grid),savedState},restore:function(grid,$scope,state){state.columns&&service.restoreColumns(grid,state.columns),state.scrollFocus&&service.restoreScrollFocus(grid,$scope,state.scrollFocus),state.selection&&service.restoreSelection(grid,state.selection),state.grouping&&service.restoreGrouping(grid,state.grouping),state.treeView&&service.restoreTreeView(grid,state.treeView),state.pagination&&service.restorePagination(grid,state.pagination),grid.refresh()},saveColumns:function(grid){var columns=[];return grid.getOnlyDataColumns().forEach(function(column){var savedColumn={};savedColumn.name=column.name,grid.options.saveVisible&&(savedColumn.visible=column.visible),grid.options.saveWidths&&(savedColumn.width=column.width),grid.options.saveSort&&(savedColumn.sort=angular.copy(column.sort)),grid.options.saveFilter&&(savedColumn.filters=[],column.filters.forEach(function(filter){var copiedFilter={};angular.forEach(filter,function(value,key){"condition"!==key&&"$$hashKey"!==key&&"placeholder"!==key&&(copiedFilter[key]=value)}),savedColumn.filters.push(copiedFilter)})),grid.api.pinning&&grid.options.savePinning&&(savedColumn.pinned=column.renderContainer?column.renderContainer:""),columns.push(savedColumn)}),columns},saveScrollFocus:function(grid){if(!grid.api.cellNav)return{};var scrollFocus={};if(grid.options.saveFocus){scrollFocus.focus=!0;var rowCol=grid.api.cellNav.getFocusedCell();null!==rowCol&&(null!==rowCol.col&&(scrollFocus.colName=rowCol.col.colDef.name),null!==rowCol.row&&(scrollFocus.rowVal=service.getRowVal(grid,rowCol.row)))}return(grid.options.saveScroll||grid.options.saveFocus&&!scrollFocus.colName&&!scrollFocus.rowVal)&&(scrollFocus.focus=!1,grid.renderContainers.body.prevRowScrollIndex&&(scrollFocus.rowVal=service.getRowVal(grid,grid.renderContainers.body.visibleRowCache[grid.renderContainers.body.prevRowScrollIndex])),grid.renderContainers.body.prevColScrollIndex&&(scrollFocus.colName=grid.renderContainers.body.visibleColumnCache[grid.renderContainers.body.prevColScrollIndex].name)),scrollFocus},saveSelection:function(grid){return grid.api.selection&&grid.options.saveSelection?grid.api.selection.getSelectedGridRows().map(function(gridRow){return service.getRowVal(grid,gridRow)}):[]},saveGrouping:function(grid){return grid.api.grouping&&grid.options.saveGrouping?grid.api.grouping.getGrouping(grid.options.saveGroupingExpandedStates):{}},savePagination:function(grid){return grid.api.pagination&&grid.options.paginationPageSize?{paginationCurrentPage:grid.options.paginationCurrentPage,paginationPageSize:grid.options.paginationPageSize}:{}},saveTreeView:function(grid){return grid.api.treeView&&grid.options.saveTreeView?grid.api.treeView.getTreeView():{}},getRowVal:function(grid,gridRow){if(!gridRow)return null;var rowVal={};return grid.options.saveRowIdentity?(rowVal.identity=!0,rowVal.row=grid.options.saveRowIdentity(gridRow.entity)):(rowVal.identity=!1,rowVal.row=grid.renderContainers.body.visibleRowCache.indexOf(gridRow)),rowVal},restoreColumns:function(grid,columnsState){var isSortChanged=!1;columnsState.forEach(function(columnState,index){var currentCol=grid.getColumn(columnState.name);if(currentCol&&!grid.isRowHeaderColumn(currentCol)){!grid.options.saveVisible||currentCol.visible===columnState.visible&&currentCol.colDef.visible===columnState.visible||(currentCol.visible=columnState.visible,currentCol.colDef.visible=columnState.visible,grid.api.core.raise.columnVisibilityChanged(currentCol)),grid.options.saveWidths&&currentCol.width!==columnState.width&&(currentCol.width=columnState.width,currentCol.hasCustomWidth=!0),!grid.options.saveSort||angular.equals(currentCol.sort,columnState.sort)||void 0===currentCol.sort&&angular.isEmpty(columnState.sort)||(currentCol.sort=angular.copy(columnState.sort),isSortChanged=!0),grid.options.saveFilter&&!angular.equals(currentCol.filters,columnState.filters)&&(columnState.filters.forEach(function(filter,index){angular.extend(currentCol.filters[index],filter),void 0!==filter.term&&null!==filter.term||delete currentCol.filters[index].term}),grid.api.core.raise.filterChanged()),grid.api.pinning&&grid.options.savePinning&&currentCol.renderContainer!==columnState.pinned&&grid.api.pinning.pinColumn(currentCol,columnState.pinned);var currentIndex=grid.getOnlyDataColumns().indexOf(currentCol);if(-1!==currentIndex&&grid.options.saveOrder&&currentIndex!==index){var column=grid.columns.splice(currentIndex+grid.rowHeaderColumns.length,1)[0];grid.columns.splice(index+grid.rowHeaderColumns.length,0,column)}}}),isSortChanged&&grid.api.core.raise.sortChanged(grid,grid.getColumnSorting())},restoreScrollFocus:function(grid,$scope,scrollFocusState){if(grid.api.cellNav){var colDef,row;if(scrollFocusState.colName){var colDefs=grid.options.columnDefs.filter(function(colDef){return colDef.name===scrollFocusState.colName});colDefs.length>0&&(colDef=colDefs[0])}scrollFocusState.rowVal&&scrollFocusState.rowVal.row&&(row=scrollFocusState.rowVal.identity?service.findRowByIdentity(grid,scrollFocusState.rowVal):grid.renderContainers.body.visibleRowCache[scrollFocusState.rowVal.row]);var entity=row&&row.entity?row.entity:null;(colDef||entity)&&(scrollFocusState.focus?grid.api.cellNav.scrollToFocus(entity,colDef):grid.scrollTo(entity,colDef))}},restoreSelection:function(grid,selectionState){grid.api.selection&&(grid.api.selection.clearSelectedRows(),selectionState.forEach(function(rowVal){if(rowVal.identity){var foundRow=service.findRowByIdentity(grid,rowVal);foundRow&&grid.api.selection.selectRow(foundRow.entity)}else grid.api.selection.selectRowByVisibleIndex(rowVal.row)}))},restoreGrouping:function(grid,groupingState){grid.api.grouping&&void 0!==groupingState&&null!==groupingState&&!angular.equals(groupingState,{})&&grid.api.grouping.setGrouping(groupingState)},restoreTreeView:function(grid,treeViewState){grid.api.treeView&&void 0!==treeViewState&&null!==treeViewState&&!angular.equals(treeViewState,{})&&grid.api.treeView.setTreeView(treeViewState)},restorePagination:function(grid,pagination){grid.api.pagination&&grid.options.paginationPageSize&&(grid.options.paginationCurrentPage=pagination.paginationCurrentPage,grid.options.paginationPageSize=pagination.paginationPageSize)},findRowByIdentity:function(grid,rowVal){if(!grid.options.saveRowIdentity)return null;var filteredRows=grid.rows.filter(function(gridRow){return grid.options.saveRowIdentity(gridRow.entity)===rowVal.row});return filteredRows.length>0?filteredRows[0]:null}};return service}]),module.directive("uiGridSaveState",["uiGridSaveStateConstants","uiGridSaveStateService","gridUtil","$compile",function(uiGridSaveStateConstants,uiGridSaveStateService,gridUtil,$compile){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,link:function($scope,$elm,$attrs,uiGridCtrl){uiGridSaveStateService.initializeGrid(uiGridCtrl.grid)}}}])}(),function(){"use strict";var module=angular.module("ui.grid.selection",["ui.grid"]);module.constant("uiGridSelectionConstants",{featureName:"selection",selectionRowHeaderColName:"selectionRowHeaderCol"}),angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("GridRow",["$delegate",function($delegate){return $delegate.prototype.setSelected=function(selected){selected!==this.isSelected&&(this.isSelected=selected,this.grid.selection.selectedCount+=selected?1:-1)},$delegate}])}]),module.service("uiGridSelectionService",["$q","$templateCache","uiGridSelectionConstants","gridUtil",function($q,$templateCache,uiGridSelectionConstants,gridUtil){var service={initializeGrid:function(grid){grid.selection={},grid.selection.lastSelectedRow=null,grid.selection.selectAll=!1,grid.selection.selectedCount=0,service.defaultGridOptions(grid.options);var publicApi={events:{selection:{rowSelectionChanged:function(scope,row,evt){},rowSelectionChangedBatch:function(scope,rows,evt){}}},methods:{selection:{toggleRowSelection:function(rowEntity,evt){var row=grid.getRow(rowEntity);null!==row&&service.toggleRowSelection(grid,row,evt,grid.options.multiSelect,grid.options.noUnselect)},selectRow:function(rowEntity,evt){var row=grid.getRow(rowEntity);null===row||row.isSelected||service.toggleRowSelection(grid,row,evt,grid.options.multiSelect,grid.options.noUnselect)},selectRowByVisibleIndex:function(rowNum,evt){var row=grid.renderContainers.body.visibleRowCache[rowNum];null===row||void 0===row||row.isSelected||service.toggleRowSelection(grid,row,evt,grid.options.multiSelect,grid.options.noUnselect)},unSelectRow:function(rowEntity,evt){var row=grid.getRow(rowEntity);null!==row&&row.isSelected&&service.toggleRowSelection(grid,row,evt,grid.options.multiSelect,grid.options.noUnselect)},selectAllRows:function(evt){if(!1!==grid.options.multiSelect){var changedRows=[];grid.rows.forEach(function(row){row.isSelected||!1===row.enableSelection||(row.setSelected(!0),service.decideRaiseSelectionEvent(grid,row,changedRows,evt))}),service.decideRaiseSelectionBatchEvent(grid,changedRows,evt),grid.selection.selectAll=!0}},selectAllVisibleRows:function(evt){if(!1!==grid.options.multiSelect){var changedRows=[];grid.rows.forEach(function(row){row.visible?row.isSelected||!1===row.enableSelection||(row.setSelected(!0),service.decideRaiseSelectionEvent(grid,row,changedRows,evt)):row.isSelected&&(row.setSelected(!1),service.decideRaiseSelectionEvent(grid,row,changedRows,evt))}),service.decideRaiseSelectionBatchEvent(grid,changedRows,evt),grid.selection.selectAll=!0}},clearSelectedRows:function(evt){service.clearSelectedRows(grid,evt)},getSelectedRows:function(){return service.getSelectedRows(grid).map(function(gridRow){return gridRow.entity})},getSelectedGridRows:function(){return service.getSelectedRows(grid)},getSelectedCount:function(){return grid.selection.selectedCount},setMultiSelect:function(multiSelect){grid.options.multiSelect=multiSelect},setModifierKeysToMultiSelect:function(modifierKeysToMultiSelect){
grid.options.modifierKeysToMultiSelect=modifierKeysToMultiSelect},getSelectAllState:function(){return grid.selection.selectAll}}}};grid.api.registerEventsFromObject(publicApi.events),grid.api.registerMethodsFromObject(publicApi.methods)},defaultGridOptions:function(gridOptions){gridOptions.enableRowSelection=!1!==gridOptions.enableRowSelection,gridOptions.multiSelect=!1!==gridOptions.multiSelect,gridOptions.noUnselect=!0===gridOptions.noUnselect,gridOptions.modifierKeysToMultiSelect=!0===gridOptions.modifierKeysToMultiSelect,gridOptions.enableRowHeaderSelection=!1!==gridOptions.enableRowHeaderSelection,void 0===gridOptions.enableFullRowSelection&&(gridOptions.enableFullRowSelection=!gridOptions.enableRowHeaderSelection),gridOptions.enableSelectAll=!1!==gridOptions.enableSelectAll,gridOptions.enableSelectionBatchEvent=!1!==gridOptions.enableSelectionBatchEvent,gridOptions.selectionRowHeaderWidth=angular.isDefined(gridOptions.selectionRowHeaderWidth)?gridOptions.selectionRowHeaderWidth:30,gridOptions.enableFooterTotalSelected=!1!==gridOptions.enableFooterTotalSelected,gridOptions.isRowSelectable=angular.isDefined(gridOptions.isRowSelectable)?gridOptions.isRowSelectable:angular.noop},toggleRowSelection:function(grid,row,evt,multiSelect,noUnselect){var selected=row.isSelected;if(!1!==row.enableSelection||selected){var selectedRows;multiSelect||selected?!multiSelect&&selected&&(selectedRows=service.getSelectedRows(grid),selectedRows.length>1&&(selected=!1,service.clearSelectedRows(grid,evt))):service.clearSelectedRows(grid,evt),selected&&noUnselect||(row.setSelected(!selected),!0===row.isSelected&&(grid.selection.lastSelectedRow=row),selectedRows=service.getSelectedRows(grid),grid.selection.selectAll=grid.rows.length===selectedRows.length,grid.api.selection.raise.rowSelectionChanged(row,evt))}},shiftSelect:function(grid,row,evt,multiSelect){if(multiSelect){var selectedRows=service.getSelectedRows(grid),fromRow=selectedRows.length>0?grid.renderContainers.body.visibleRowCache.indexOf(grid.selection.lastSelectedRow):0,toRow=grid.renderContainers.body.visibleRowCache.indexOf(row);if(fromRow>toRow){var tmp=fromRow;fromRow=toRow,toRow=tmp}for(var changedRows=[],i=fromRow;i<=toRow;i++){var rowToSelect=grid.renderContainers.body.visibleRowCache[i];rowToSelect&&(rowToSelect.isSelected||!1===rowToSelect.enableSelection||(rowToSelect.setSelected(!0),grid.selection.lastSelectedRow=rowToSelect,service.decideRaiseSelectionEvent(grid,rowToSelect,changedRows,evt)))}service.decideRaiseSelectionBatchEvent(grid,changedRows,evt)}},getSelectedRows:function(grid){return grid.rows.filter(function(row){return row.isSelected})},clearSelectedRows:function(grid,evt){var changedRows=[];service.getSelectedRows(grid).forEach(function(row){row.isSelected&&(row.setSelected(!1),service.decideRaiseSelectionEvent(grid,row,changedRows,evt))}),service.decideRaiseSelectionBatchEvent(grid,changedRows,evt),grid.selection.selectAll=!1,grid.selection.selectedCount=0},decideRaiseSelectionEvent:function(grid,row,changedRows,evt){grid.options.enableSelectionBatchEvent?changedRows.push(row):grid.api.selection.raise.rowSelectionChanged(row,evt)},decideRaiseSelectionBatchEvent:function(grid,changedRows,evt){changedRows.length>0&&grid.api.selection.raise.rowSelectionChangedBatch(changedRows,evt)}};return service}]),module.directive("uiGridSelection",["uiGridSelectionConstants","uiGridSelectionService","$templateCache","uiGridConstants",function(uiGridSelectionConstants,uiGridSelectionService,$templateCache,uiGridConstants){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function($scope,$elm,$attrs,uiGridCtrl){if(uiGridSelectionService.initializeGrid(uiGridCtrl.grid),uiGridCtrl.grid.options.enableRowHeaderSelection){var selectionRowHeaderDef={name:uiGridSelectionConstants.selectionRowHeaderColName,displayName:"",width:uiGridCtrl.grid.options.selectionRowHeaderWidth,minWidth:10,cellTemplate:"ui-grid/selectionRowHeader",headerCellTemplate:"ui-grid/selectionHeaderCell",enableColumnResizing:!1,enableColumnMenu:!1,exporterSuppressExport:!0,allowCellFocus:!0};uiGridCtrl.grid.addRowHeaderColumn(selectionRowHeaderDef,0)}var processorSet=!1,processSelectableRows=function(rows){return rows.forEach(function(row){row.enableSelection=uiGridCtrl.grid.options.isRowSelectable(row)}),rows},updateOptions=function(){uiGridCtrl.grid.options.isRowSelectable!==angular.noop&&!0!==processorSet&&(uiGridCtrl.grid.registerRowsProcessor(processSelectableRows,500),processorSet=!0)};updateOptions();var dataChangeDereg=uiGridCtrl.grid.registerDataChangeCallback(updateOptions,[uiGridConstants.dataChange.OPTIONS]);$scope.$on("$destroy",dataChangeDereg)},post:function($scope,$elm,$attrs,uiGridCtrl){}}}}}]),module.directive("uiGridSelectionRowHeaderButtons",["$templateCache","uiGridSelectionService","gridUtil",function($templateCache,uiGridSelectionService,gridUtil){return{replace:!0,restrict:"E",template:$templateCache.get("ui-grid/selectionRowHeaderButtons"),scope:!0,require:"^uiGrid",link:function($scope,$elm,$attrs,uiGridCtrl){function selectButtonClick(row,evt){evt.stopPropagation(),evt.shiftKey?uiGridSelectionService.shiftSelect(self,row,evt,self.options.multiSelect):evt.ctrlKey||evt.metaKey?uiGridSelectionService.toggleRowSelection(self,row,evt,self.options.multiSelect,self.options.noUnselect):uiGridSelectionService.toggleRowSelection(self,row,evt,self.options.multiSelect&&!self.options.modifierKeysToMultiSelect,self.options.noUnselect)}function selectButtonMouseDown(evt){(evt.ctrlKey||evt.shiftKey)&&(evt.target.onselectstart=function(){return!1},window.setTimeout(function(){evt.target.onselectstart=null},0))}var self=uiGridCtrl.grid;$scope.selectButtonClick=selectButtonClick,"ie"===gridUtil.detectBrowser()&&$elm.on("mousedown",selectButtonMouseDown)}}}]),module.directive("uiGridSelectionSelectAllButtons",["$templateCache","uiGridSelectionService",function($templateCache,uiGridSelectionService){return{replace:!0,restrict:"E",template:$templateCache.get("ui-grid/selectionSelectAllButtons"),scope:!1,link:function($scope,$elm,$attrs,uiGridCtrl){var self=$scope.col.grid;$scope.headerButtonClick=function(row,evt){self.selection.selectAll?(uiGridSelectionService.clearSelectedRows(self,evt),self.options.noUnselect&&self.api.selection.selectRowByVisibleIndex(0,evt),self.selection.selectAll=!1):self.options.multiSelect&&(self.api.selection.selectAllVisibleRows(evt),self.selection.selectAll=!0)}}}}]),module.directive("uiGridViewport",["$compile","uiGridConstants","uiGridSelectionConstants","gridUtil","$parse","uiGridSelectionService",function($compile,uiGridConstants,uiGridSelectionConstants,gridUtil,$parse,uiGridSelectionService){return{priority:-200,scope:!1,compile:function($elm,$attrs){var rowRepeatDiv=angular.element($elm.children().children()[0]),existingNgClass=rowRepeatDiv.attr("ng-class"),newNgClass="";return newNgClass=existingNgClass?existingNgClass.slice(0,-1)+",'ui-grid-row-selected': row.isSelected}":"{'ui-grid-row-selected': row.isSelected}",rowRepeatDiv.attr("ng-class",newNgClass),{pre:function($scope,$elm,$attrs,controllers){},post:function($scope,$elm,$attrs,controllers){}}}}}]),module.directive("uiGridCell",["$compile","uiGridConstants","uiGridSelectionConstants","gridUtil","$parse","uiGridSelectionService","$timeout",function($compile,uiGridConstants,uiGridSelectionConstants,gridUtil,$parse,uiGridSelectionService,$timeout){return{priority:-200,restrict:"A",require:"?^uiGrid",scope:!1,link:function($scope,$elm,$attrs,uiGridCtrl){function registerRowSelectionEvents(){$scope.grid.options.enableRowSelection&&$scope.grid.options.enableFullRowSelection&&($elm.addClass("ui-grid-disable-selection"),$elm.on("touchstart",touchStart),$elm.on("touchend",touchEnd),$elm.on("click",selectCells),$scope.registered=!0)}function deregisterRowSelectionEvents(){$scope.registered&&($elm.removeClass("ui-grid-disable-selection"),$elm.off("touchstart",touchStart),$elm.off("touchend",touchEnd),$elm.off("click",selectCells),$scope.registered=!1)}var touchStartTime=0;uiGridCtrl.grid.api.cellNav&&uiGridCtrl.grid.api.cellNav.on.viewPortKeyDown($scope,function(evt,rowCol){null!==rowCol&&rowCol.row===$scope.row&&rowCol.col===$scope.col&&32===evt.keyCode&&"selectionRowHeaderCol"===$scope.col.colDef.name&&(uiGridSelectionService.toggleRowSelection($scope.grid,$scope.row,evt,$scope.grid.options.multiSelect&&!$scope.grid.options.modifierKeysToMultiSelect,$scope.grid.options.noUnselect),$scope.$apply())});var selectCells=function(evt){$elm.off("touchend",touchEnd),evt.shiftKey?uiGridSelectionService.shiftSelect($scope.grid,$scope.row,evt,$scope.grid.options.multiSelect):evt.ctrlKey||evt.metaKey?uiGridSelectionService.toggleRowSelection($scope.grid,$scope.row,evt,$scope.grid.options.multiSelect,$scope.grid.options.noUnselect):uiGridSelectionService.toggleRowSelection($scope.grid,$scope.row,evt,$scope.grid.options.multiSelect&&!$scope.grid.options.modifierKeysToMultiSelect,$scope.grid.options.noUnselect),$scope.$apply(),$timeout(function(){$elm.on("touchend",touchEnd)},300)},touchStart=function(evt){touchStartTime=(new Date).getTime(),$elm.off("click",selectCells)},touchEnd=function(evt){(new Date).getTime()-touchStartTime<300&&selectCells(evt),$timeout(function(){$elm.on("click",selectCells)},300)};registerRowSelectionEvents();var dataChangeDereg=$scope.grid.registerDataChangeCallback(function(){$scope.grid.options.enableRowSelection&&$scope.grid.options.enableFullRowSelection&&!$scope.registered?registerRowSelectionEvents():$scope.grid.options.enableRowSelection&&$scope.grid.options.enableFullRowSelection||!$scope.registered||deregisterRowSelectionEvents()},[uiGridConstants.dataChange.OPTIONS]);$elm.on("$destroy",dataChangeDereg)}}}]),module.directive("uiGridGridFooter",["$compile","uiGridConstants","gridUtil",function($compile,uiGridConstants,gridUtil){return{restrict:"EA",replace:!0,priority:-1e3,require:"^uiGrid",scope:!0,compile:function($elm,$attrs){return{pre:function($scope,$elm,$attrs,uiGridCtrl){uiGridCtrl.grid.options.showGridFooter&&gridUtil.getTemplate("ui-grid/gridFooterSelectedItems").then(function(contents){var template=angular.element(contents),newElm=$compile(template)($scope);angular.element($elm[0].getElementsByClassName("ui-grid-grid-footer")[0]).append(newElm)})},post:function($scope,$elm,$attrs,controllers){}}}}}])}(),function(){"use strict";var module=angular.module("ui.grid.treeBase",["ui.grid"]);module.constant("uiGridTreeBaseConstants",{featureName:"treeBase",rowHeaderColName:"treeBaseRowHeaderCol",EXPANDED:"expanded",COLLAPSED:"collapsed",aggregation:{COUNT:"count",SUM:"sum",MAX:"max",MIN:"min",AVG:"avg"}}),module.service("uiGridTreeBaseService",["$q","uiGridTreeBaseConstants","gridUtil","GridRow","gridClassFactory","i18nService","uiGridConstants","rowSorter",function($q,uiGridTreeBaseConstants,gridUtil,GridRow,gridClassFactory,i18nService,uiGridConstants,rowSorter){var service={initializeGrid:function(grid,$scope){grid.treeBase={},grid.treeBase.numberLevels=0,grid.treeBase.expandAll=!1,grid.treeBase.tree=[],service.defaultGridOptions(grid.options),grid.registerRowsProcessor(service.treeRows,410),grid.registerColumnBuilder(service.treeBaseColumnBuilder),service.createRowHeader(grid);var publicApi={events:{treeBase:{rowExpanded:{},rowCollapsed:{}}},methods:{treeBase:{expandAllRows:function(){service.expandAllRows(grid)},collapseAllRows:function(){service.collapseAllRows(grid)},toggleRowTreeState:function(row){service.toggleRowTreeState(grid,row)},expandRow:function(row){service.expandRow(grid,row)},expandRowChildren:function(row){service.expandRowChildren(grid,row)},collapseRow:function(row){service.collapseRow(grid,row)},collapseRowChildren:function(row){service.collapseRowChildren(grid,row)},getTreeExpandedState:function(){return{expandedState:service.getTreeState(grid)}},setTreeState:function(config){service.setTreeState(grid,config)},getRowChildren:function(row){return row.treeNode.children.map(function(childNode){return childNode.row})}}}};grid.api.registerEventsFromObject(publicApi.events),grid.api.registerMethodsFromObject(publicApi.methods)},defaultGridOptions:function(gridOptions){gridOptions.treeRowHeaderBaseWidth=gridOptions.treeRowHeaderBaseWidth||30,gridOptions.treeIndent=gridOptions.treeIndent||10,gridOptions.showTreeRowHeader=!1!==gridOptions.showTreeRowHeader,gridOptions.showTreeExpandNoChildren=!1!==gridOptions.showTreeExpandNoChildren,gridOptions.treeRowHeaderAlwaysVisible=!1!==gridOptions.treeRowHeaderAlwaysVisible,gridOptions.treeCustomAggregations=gridOptions.treeCustomAggregations||{},gridOptions.enableExpandAll=!1!==gridOptions.enableExpandAll},treeBaseColumnBuilder:function(colDef,col,gridOptions){void 0!==colDef.customTreeAggregationFn&&(col.treeAggregationFn=colDef.customTreeAggregationFn),void 0!==colDef.treeAggregationType&&(col.treeAggregation={type:colDef.treeAggregationType},void 0!==gridOptions.treeCustomAggregations[colDef.treeAggregationType]?(col.treeAggregationFn=gridOptions.treeCustomAggregations[colDef.treeAggregationType].aggregationFn,col.treeAggregationFinalizerFn=gridOptions.treeCustomAggregations[colDef.treeAggregationType].finalizerFn,col.treeAggregation.label=gridOptions.treeCustomAggregations[colDef.treeAggregationType].label):void 0!==service.nativeAggregations()[colDef.treeAggregationType]&&(col.treeAggregationFn=service.nativeAggregations()[colDef.treeAggregationType].aggregationFn,col.treeAggregation.label=service.nativeAggregations()[colDef.treeAggregationType].label)),void 0!==colDef.treeAggregationLabel&&(void 0===col.treeAggregation&&(col.treeAggregation={}),col.treeAggregation.label=colDef.treeAggregationLabel),col.treeAggregationUpdateEntity=!1!==colDef.treeAggregationUpdateEntity,void 0===col.customTreeAggregationFinalizerFn&&(col.customTreeAggregationFinalizerFn=colDef.customTreeAggregationFinalizerFn)},createRowHeader:function(grid){var rowHeaderColumnDef={name:uiGridTreeBaseConstants.rowHeaderColName,displayName:"",width:grid.options.treeRowHeaderBaseWidth,minWidth:10,cellTemplate:"ui-grid/treeBaseRowHeader",headerCellTemplate:"ui-grid/treeBaseHeaderCell",enableColumnResizing:!1,enableColumnMenu:!1,exporterSuppressExport:!0,allowCellFocus:!0};rowHeaderColumnDef.visible=grid.options.treeRowHeaderAlwaysVisible,grid.addRowHeaderColumn(rowHeaderColumnDef,-100)},expandAllRows:function(grid){grid.treeBase.tree.forEach(function(node){service.setAllNodes(grid,node,uiGridTreeBaseConstants.EXPANDED)}),grid.treeBase.expandAll=!0,grid.queueGridRefresh()},collapseAllRows:function(grid){grid.treeBase.tree.forEach(function(node){service.setAllNodes(grid,node,uiGridTreeBaseConstants.COLLAPSED)}),grid.treeBase.expandAll=!1,grid.queueGridRefresh()},setAllNodes:function(grid,treeNode,targetState){void 0!==treeNode.state&&treeNode.state!==targetState&&(treeNode.state=targetState,targetState===uiGridTreeBaseConstants.EXPANDED?grid.api.treeBase.raise.rowExpanded(treeNode.row):grid.api.treeBase.raise.rowCollapsed(treeNode.row)),treeNode.children&&treeNode.children.forEach(function(childNode){service.setAllNodes(grid,childNode,targetState)})},toggleRowTreeState:function(grid,row){void 0===row.treeLevel||null===row.treeLevel||row.treeLevel<0||(row.treeNode.state===uiGridTreeBaseConstants.EXPANDED?service.collapseRow(grid,row):service.expandRow(grid,row),grid.queueGridRefresh())},expandRow:function(grid,row){void 0===row.treeLevel||null===row.treeLevel||row.treeLevel<0||row.treeNode.state!==uiGridTreeBaseConstants.EXPANDED&&(row.treeNode.state=uiGridTreeBaseConstants.EXPANDED,grid.api.treeBase.raise.rowExpanded(row),grid.treeBase.expandAll=service.allExpanded(grid.treeBase.tree),grid.queueGridRefresh())},expandRowChildren:function(grid,row){void 0===row.treeLevel||null===row.treeLevel||row.treeLevel<0||(service.setAllNodes(grid,row.treeNode,uiGridTreeBaseConstants.EXPANDED),grid.treeBase.expandAll=service.allExpanded(grid.treeBase.tree),grid.queueGridRefresh())},collapseRow:function(grid,row){void 0===row.treeLevel||null===row.treeLevel||row.treeLevel<0||row.treeNode.state!==uiGridTreeBaseConstants.COLLAPSED&&(row.treeNode.state=uiGridTreeBaseConstants.COLLAPSED,grid.treeBase.expandAll=!1,grid.api.treeBase.raise.rowCollapsed(row),grid.queueGridRefresh())},collapseRowChildren:function(grid,row){void 0===row.treeLevel||null===row.treeLevel||row.treeLevel<0||(service.setAllNodes(grid,row.treeNode,uiGridTreeBaseConstants.COLLAPSED),grid.treeBase.expandAll=!1,grid.queueGridRefresh())},allExpanded:function(tree){var allExpanded=!0;return tree.forEach(function(node){service.allExpandedInternal(node)||(allExpanded=!1)}),allExpanded},allExpandedInternal:function(treeNode){if(treeNode.children&&treeNode.children.length>0){if(treeNode.state===uiGridTreeBaseConstants.COLLAPSED)return!1;var allExpanded=!0;return treeNode.children.forEach(function(node){service.allExpandedInternal(node)||(allExpanded=!1)}),allExpanded}return!0},treeRows:function(renderableRows){if(0===renderableRows.length)return renderableRows;var grid=this;uiGridTreeBaseConstants.EXPANDED;return grid.treeBase.tree=service.createTree(grid,renderableRows),service.updateRowHeaderWidth(grid),service.sortTree(grid),service.fixFilter(grid),service.renderTree(grid.treeBase.tree)},updateRowHeaderWidth:function(grid){var rowHeader=grid.getColumn(uiGridTreeBaseConstants.rowHeaderColName),newWidth=grid.options.treeRowHeaderBaseWidth+grid.options.treeIndent*Math.max(grid.treeBase.numberLevels-1,0);rowHeader&&newWidth!==rowHeader.width&&(rowHeader.width=newWidth,grid.queueRefresh());var newVisibility=!0;!1===grid.options.showTreeRowHeader&&(newVisibility=!1),!1===grid.options.treeRowHeaderAlwaysVisible&&grid.treeBase.numberLevels<=0&&(newVisibility=!1),rowHeader.visible!==newVisibility&&(rowHeader.visible=newVisibility,rowHeader.colDef.visible=newVisibility,grid.queueGridRefresh())},renderTree:function(nodeList){var renderableRows=[];return nodeList.forEach(function(node){node.row.visible&&renderableRows.push(node.row),node.state===uiGridTreeBaseConstants.EXPANDED&&node.children&&node.children.length>0&&(renderableRows=renderableRows.concat(service.renderTree(node.children)))}),renderableRows},createTree:function(grid,renderableRows){var currentState,currentLevel=-1,parents=[];grid.treeBase.tree=[],grid.treeBase.numberLevels=0;var aggregations=service.getAggregations(grid),createNode=function(row){if(void 0!==row.entity.$$treeLevel&&row.treeLevel!==row.entity.$$treeLevel&&(row.treeLevel=row.entity.$$treeLevel),row.treeLevel<=currentLevel){for(;row.treeLevel<=currentLevel;){var lastParent=parents.pop();service.finaliseAggregations(lastParent),currentLevel--}currentState=parents.length>0?service.setCurrentState(parents):uiGridTreeBaseConstants.EXPANDED}(void 0===row.treeLevel||null===row.treeLevel||row.treeLevel<0)&&row.visible&&service.aggregate(grid,row,parents),service.addOrUseNode(grid,row,parents,aggregations),void 0!==row.treeLevel&&null!==row.treeLevel&&row.treeLevel>=0&&(parents.push(row),currentLevel++,currentState=service.setCurrentState(parents)),grid.treeBase.numberLevels<row.treeLevel+1&&(grid.treeBase.numberLevels=row.treeLevel+1)};for(renderableRows.forEach(createNode);parents.length>0;){var lastParent=parents.pop();service.finaliseAggregations(lastParent)}return grid.treeBase.tree},addOrUseNode:function(grid,row,parents,aggregationBase){var newAggregations=[];aggregationBase.forEach(function(aggregation){newAggregations.push(service.buildAggregationObject(aggregation.col))});var newNode={state:uiGridTreeBaseConstants.COLLAPSED,row:row,parentRow:null,aggregations:newAggregations,children:[]};row.treeNode&&(newNode.state=row.treeNode.state),parents.length>0&&(newNode.parentRow=parents[parents.length-1]),row.treeNode=newNode,0===parents.length?grid.treeBase.tree.push(newNode):parents[parents.length-1].treeNode.children.push(newNode)},setCurrentState:function(parents){var currentState=uiGridTreeBaseConstants.EXPANDED;return parents.forEach(function(parent){parent.treeNode.state===uiGridTreeBaseConstants.COLLAPSED&&(currentState=uiGridTreeBaseConstants.COLLAPSED)}),currentState},sortTree:function(grid){grid.columns.forEach(function(column){column.sort&&column.sort.ignoreSort&&delete column.sort.ignoreSort}),grid.treeBase.tree=service.sortInternal(grid,grid.treeBase.tree)},sortInternal:function(grid,treeList){var rows=treeList.map(function(node){return node.row});rows=rowSorter.sort(grid,rows,grid.columns);var treeNodes=rows.map(function(row){return row.treeNode});return treeNodes.forEach(function(node){node.state===uiGridTreeBaseConstants.EXPANDED&&node.children&&node.children.length>0&&(node.children=service.sortInternal(grid,node.children))}),treeNodes},fixFilter:function(grid){var parentsVisible;grid.treeBase.tree.forEach(function(node){node.children&&node.children.length>0&&(parentsVisible=node.row.visible,service.fixFilterInternal(node.children,parentsVisible))})},fixFilterInternal:function(nodes,parentsVisible){return nodes.forEach(function(node){node.row.visible&&!parentsVisible&&(service.setParentsVisible(node),parentsVisible=!0),node.children&&node.children.length>0&&service.fixFilterInternal(node.children,parentsVisible&&node.row.visible)&&(parentsVisible=!0)}),parentsVisible},setParentsVisible:function(node){for(;node.parentRow;)node.parentRow.visible=!0,node=node.parentRow.treeNode},buildAggregationObject:function(column){var newAggregation={col:column};return column.treeAggregation&&column.treeAggregation.type&&(newAggregation.type=column.treeAggregation.type),column.treeAggregation&&column.treeAggregation.label&&(newAggregation.label=column.treeAggregation.label),newAggregation},getAggregations:function(grid){var aggregateArray=[];return grid.columns.forEach(function(column){void 0!==column.treeAggregationFn&&(aggregateArray.push(service.buildAggregationObject(column)),grid.options.showColumnFooter&&void 0===column.colDef.aggregationType&&column.treeAggregation&&(column.treeFooterAggregation=service.buildAggregationObject(column),column.aggregationType=service.treeFooterAggregationType))}),aggregateArray},aggregate:function(grid,row,parents){0===parents.length&&row.treeNode&&row.treeNode.aggregations&&row.treeNode.aggregations.forEach(function(aggregation){if(void 0!==aggregation.col.treeFooterAggregation){var fieldValue=grid.getCellValue(row,aggregation.col),numValue=Number(fieldValue);aggregation.col.treeAggregationFn(aggregation.col.treeFooterAggregation,fieldValue,numValue,row)}}),parents.forEach(function(parent,index){parent.treeNode.aggregations&&parent.treeNode.aggregations.forEach(function(aggregation){var fieldValue=grid.getCellValue(row,aggregation.col),numValue=Number(fieldValue);aggregation.col.treeAggregationFn(aggregation,fieldValue,numValue,row),0===index&&void 0!==aggregation.col.treeFooterAggregation&&aggregation.col.treeAggregationFn(aggregation.col.treeFooterAggregation,fieldValue,numValue,row)})})},nativeAggregations:function(){return{count:{label:i18nService.get().aggregation.count,menuTitle:i18nService.get().grouping.aggregate_count,aggregationFn:function(aggregation,fieldValue,numValue){void 0===aggregation.value?aggregation.value=1:aggregation.value++}},sum:{label:i18nService.get().aggregation.sum,menuTitle:i18nService.get().grouping.aggregate_sum,aggregationFn:function(aggregation,fieldValue,numValue){isNaN(numValue)||(void 0===aggregation.value?aggregation.value=numValue:aggregation.value+=numValue)}},min:{label:i18nService.get().aggregation.min,menuTitle:i18nService.get().grouping.aggregate_min,aggregationFn:function(aggregation,fieldValue,numValue){void 0===aggregation.value?aggregation.value=fieldValue:void 0!==fieldValue&&null!==fieldValue&&(fieldValue<aggregation.value||null===aggregation.value)&&(aggregation.value=fieldValue)}},max:{label:i18nService.get().aggregation.max,menuTitle:i18nService.get().grouping.aggregate_max,aggregationFn:function(aggregation,fieldValue,numValue){void 0===aggregation.value?aggregation.value=fieldValue:void 0!==fieldValue&&null!==fieldValue&&(fieldValue>aggregation.value||null===aggregation.value)&&(aggregation.value=fieldValue)}},avg:{label:i18nService.get().aggregation.avg,menuTitle:i18nService.get().grouping.aggregate_avg,aggregationFn:function(aggregation,fieldValue,numValue){void 0===aggregation.count?aggregation.count=1:aggregation.count++,isNaN(numValue)||(void 0===aggregation.value||void 0===aggregation.sum?(aggregation.value=numValue,aggregation.sum=numValue):(aggregation.sum+=numValue,aggregation.value=aggregation.sum/aggregation.count))}}}},finaliseAggregation:function(row,aggregation){aggregation.col.treeAggregationUpdateEntity&&void 0!==row&&void 0!==row.entity["$$"+aggregation.col.uid]&&angular.extend(aggregation,row.entity["$$"+aggregation.col.uid]),"function"==typeof aggregation.col.treeAggregationFinalizerFn&&aggregation.col.treeAggregationFinalizerFn(aggregation),"function"==typeof aggregation.col.customTreeAggregationFinalizerFn&&aggregation.col.customTreeAggregationFinalizerFn(aggregation),void 0===aggregation.rendered&&(aggregation.rendered=aggregation.label?aggregation.label+aggregation.value:aggregation.value)},finaliseAggregations:function(row){null!=row&&void 0!==row.treeNode.aggregations&&row.treeNode.aggregations.forEach(function(aggregation){if(service.finaliseAggregation(row,aggregation),aggregation.col.treeAggregationUpdateEntity){var aggregationCopy={};angular.forEach(aggregation,function(value,key){aggregation.hasOwnProperty(key)&&"col"!==key&&(aggregationCopy[key]=value)}),row.entity["$$"+aggregation.col.uid]=aggregationCopy}})},treeFooterAggregationType:function(rows,column){return service.finaliseAggregation(void 0,column.treeFooterAggregation),void 0===column.treeFooterAggregation.value||null===column.treeFooterAggregation.rendered?"":column.treeFooterAggregation.rendered}};return service}]),module.directive("uiGridTreeBaseRowHeaderButtons",["$templateCache","uiGridTreeBaseService",function($templateCache,uiGridTreeBaseService){return{replace:!0,restrict:"E",template:$templateCache.get("ui-grid/treeBaseRowHeaderButtons"),scope:!0,require:"^uiGrid",link:function($scope,$elm,$attrs,uiGridCtrl){var self=uiGridCtrl.grid;$scope.treeButtonClick=function(row,evt){uiGridTreeBaseService.toggleRowTreeState(self,row,evt)}}}}]),module.directive("uiGridTreeBaseExpandAllButtons",["$templateCache","uiGridTreeBaseService",function($templateCache,uiGridTreeBaseService){return{replace:!0,restrict:"E",template:$templateCache.get("ui-grid/treeBaseExpandAllButtons"),scope:!1,link:function($scope,$elm,$attrs,uiGridCtrl){var self=$scope.col.grid;$scope.headerButtonClick=function(row,evt){self.treeBase.expandAll?uiGridTreeBaseService.collapseAllRows(self,evt):uiGridTreeBaseService.expandAllRows(self,evt)}}}}]),module.directive("uiGridViewport",["$compile","uiGridConstants","gridUtil","$parse",function($compile,uiGridConstants,gridUtil,$parse){return{priority:-200,scope:!1,compile:function($elm,$attrs){var rowRepeatDiv=angular.element($elm.children().children()[0]),existingNgClass=rowRepeatDiv.attr("ng-class"),newNgClass="";return newNgClass=existingNgClass?existingNgClass.slice(0,-1)+",'ui-grid-tree-header-row': row.treeLevel > -1}":"{'ui-grid-tree-header-row': row.treeLevel > -1}",rowRepeatDiv.attr("ng-class",newNgClass),{pre:function($scope,$elm,$attrs,controllers){},post:function($scope,$elm,$attrs,controllers){}}}}}])}(),function(){"use strict";var module=angular.module("ui.grid.treeView",["ui.grid","ui.grid.treeBase"]);module.constant("uiGridTreeViewConstants",{featureName:"treeView",rowHeaderColName:"treeBaseRowHeaderCol",EXPANDED:"expanded",COLLAPSED:"collapsed",aggregation:{COUNT:"count",SUM:"sum",MAX:"max",MIN:"min",AVG:"avg"}}),module.service("uiGridTreeViewService",["$q","uiGridTreeViewConstants","uiGridTreeBaseConstants","uiGridTreeBaseService","gridUtil","GridRow","gridClassFactory","i18nService","uiGridConstants",function($q,uiGridTreeViewConstants,uiGridTreeBaseConstants,uiGridTreeBaseService,gridUtil,GridRow,gridClassFactory,i18nService,uiGridConstants){var service={initializeGrid:function(grid,$scope){uiGridTreeBaseService.initializeGrid(grid,$scope),grid.treeView={},grid.registerRowsProcessor(service.adjustSorting,60);var publicApi={events:{treeView:{}},methods:{treeView:{}}};grid.api.registerEventsFromObject(publicApi.events),grid.api.registerMethodsFromObject(publicApi.methods)},defaultGridOptions:function(gridOptions){gridOptions.enableTreeView=!1!==gridOptions.enableTreeView},adjustSorting:function(renderableRows){return this.columns.forEach(function(column){column.sort&&(column.sort.ignoreSort=!0)}),renderableRows}};return service}]),module.directive("uiGridTreeView",["uiGridTreeViewConstants","uiGridTreeViewService","$templateCache",function(uiGridTreeViewConstants,uiGridTreeViewService,$templateCache){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function($scope,$elm,$attrs,uiGridCtrl){!1!==uiGridCtrl.grid.options.enableTreeView&&uiGridTreeViewService.initializeGrid(uiGridCtrl.grid,$scope)},post:function($scope,$elm,$attrs,uiGridCtrl){}}}}}])}(),function(){"use strict";var module=angular.module("ui.grid.validate",["ui.grid"]);module.service("uiGridValidateService",["$sce","$q","$http","i18nService","uiGridConstants",function($sce,$q,$http,i18nService,uiGridConstants){var service={validatorFactories:{},setExternalFactoryFunction:function(externalFactoryFunction){service.externalFactoryFunction=externalFactoryFunction},clearExternalFactory:function(){delete service.externalFactoryFunction},getValidatorFromExternalFactory:function(name,argument){return service.externalFactoryFunction(name,argument).validatorFactory(argument)},getMessageFromExternalFactory:function(name,argument){return service.externalFactoryFunction(name,argument).messageFunction(argument)},setValidator:function(name,validatorFactory,messageFunction){service.validatorFactories[name]={validatorFactory:validatorFactory,messageFunction:messageFunction}},getValidator:function(name,argument){if(service.externalFactoryFunction){var validator=service.getValidatorFromExternalFactory(name,argument);if(validator)return validator}if(!service.validatorFactories[name])throw"Invalid validator name: "+name;return service.validatorFactories[name].validatorFactory(argument)},getMessage:function(name,argument){if(service.externalFactoryFunction){var message=service.getMessageFromExternalFactory(name,argument);if(message)return message}return service.validatorFactories[name].messageFunction(argument)},isInvalid:function(rowEntity,colDef){return rowEntity["$$invalid"+colDef.name]},setInvalid:function(rowEntity,colDef){rowEntity["$$invalid"+colDef.name]=!0},setValid:function(rowEntity,colDef){delete rowEntity["$$invalid"+colDef.name]},setError:function(rowEntity,colDef,validatorName){rowEntity["$$errors"+colDef.name]||(rowEntity["$$errors"+colDef.name]={}),rowEntity["$$errors"+colDef.name][validatorName]=!0},clearError:function(rowEntity,colDef,validatorName){rowEntity["$$errors"+colDef.name]&&validatorName in rowEntity["$$errors"+colDef.name]&&delete rowEntity["$$errors"+colDef.name][validatorName]},getErrorMessages:function(rowEntity,colDef){var errors=[];return rowEntity["$$errors"+colDef.name]&&0!==Object.keys(rowEntity["$$errors"+colDef.name]).length?(Object.keys(rowEntity["$$errors"+colDef.name]).sort().forEach(function(validatorName){errors.push(service.getMessage(validatorName,colDef.validators[validatorName]))}),errors):errors},getFormattedErrors:function(rowEntity,colDef){var msgString="",errors=service.getErrorMessages(rowEntity,colDef);if(errors.length)return errors.forEach(function(errorMsg){msgString+=errorMsg+"<br/>"}),$sce.trustAsHtml("<p><b>"+i18nService.getSafeText("validate.error")+"</b></p>"+msgString)},getTitleFormattedErrors:function(rowEntity,colDef){var msgString="",errors=service.getErrorMessages(rowEntity,colDef);if(errors.length)return errors.forEach(function(errorMsg){msgString+=errorMsg+"\n"}),
$sce.trustAsHtml(i18nService.getSafeText("validate.error")+"\n"+msgString)},runValidators:function(rowEntity,colDef,newValue,oldValue,grid){if(newValue!==oldValue){if(void 0===colDef.name||!colDef.name)throw new Error("colDef.name is required to perform validation");service.setValid(rowEntity,colDef);var promises=[];for(var validatorName in colDef.validators){service.clearError(rowEntity,colDef,validatorName);var validatorFunction=service.getValidator(validatorName,colDef.validators[validatorName]),promise=$q.when(validatorFunction(oldValue,newValue,rowEntity,colDef)).then(function(rowEntity,colDef,validatorName){return function(value){value||(service.setInvalid(rowEntity,colDef),service.setError(rowEntity,colDef,validatorName),grid&&grid.api.validate.raise.validationFailed(rowEntity,colDef,newValue,oldValue))}}(rowEntity,colDef,validatorName));promises.push(promise)}return $q.all(promises)}},createDefaultValidators:function(){service.setValidator("minLength",function(argument){return function(oldValue,newValue,rowEntity,colDef){return void 0===newValue||null===newValue||""===newValue||newValue.length>=argument}},function(argument){return i18nService.getSafeText("validate.minLength").replace("THRESHOLD",argument)}),service.setValidator("maxLength",function(argument){return function(oldValue,newValue,rowEntity,colDef){return void 0===newValue||null===newValue||""===newValue||newValue.length<=argument}},function(threshold){return i18nService.getSafeText("validate.maxLength").replace("THRESHOLD",threshold)}),service.setValidator("required",function(argument){return function(oldValue,newValue,rowEntity,colDef){return!argument||!(void 0===newValue||null===newValue||""===newValue)}},function(argument){return i18nService.getSafeText("validate.required")})},initializeGrid:function(scope,grid){grid.validate={isInvalid:service.isInvalid,getFormattedErrors:service.getFormattedErrors,getTitleFormattedErrors:service.getTitleFormattedErrors,runValidators:service.runValidators};var publicApi={events:{validate:{validationFailed:function(rowEntity,colDef,newValue,oldValue){}}},methods:{validate:{isInvalid:function(rowEntity,colDef){return grid.validate.isInvalid(rowEntity,colDef)},getErrorMessages:function(rowEntity,colDef){return grid.validate.getErrorMessages(rowEntity,colDef)},getFormattedErrors:function(rowEntity,colDef){return grid.validate.getFormattedErrors(rowEntity,colDef)},getTitleFormattedErrors:function(rowEntity,colDef){return grid.validate.getTitleFormattedErrors(rowEntity,colDef)}}}};grid.api.registerEventsFromObject(publicApi.events),grid.api.registerMethodsFromObject(publicApi.methods),grid.edit&&grid.api.edit.on.afterCellEdit(scope,function(rowEntity,colDef,newValue,oldValue){grid.validate.runValidators(rowEntity,colDef,newValue,oldValue,grid)}),service.createDefaultValidators()}};return service}]),module.directive("uiGridValidate",["gridUtil","uiGridValidateService",function(gridUtil,uiGridValidateService){return{priority:0,replace:!0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function($scope,$elm,$attrs,uiGridCtrl){uiGridValidateService.initializeGrid($scope,uiGridCtrl.grid)},post:function($scope,$elm,$attrs,uiGridCtrl){}}}}}])}(),angular.module("ui.grid").run(["$templateCache",function($templateCache){"use strict";$templateCache.put("ui-grid/ui-grid-filter",'<div class="ui-grid-filter-container" ng-repeat="colFilter in col.filters" ng-class="{\'ui-grid-filter-cancel-button-hidden\' : colFilter.disableCancelFilterButton === true }"><div ng-if="colFilter.type !== \'select\'"><input type="text" class="ui-grid-filter-input ui-grid-filter-input-{{$index}}" ng-model="colFilter.term" ng-attr-placeholder="{{colFilter.placeholder || \'\'}}" aria-label="{{colFilter.ariaLabel || aria.defaultFilterLabel}}"><div role="button" class="ui-grid-filter-button" ng-click="removeFilter(colFilter, $index)" ng-if="!colFilter.disableCancelFilterButton" ng-disabled="colFilter.term === undefined || colFilter.term === null || colFilter.term === \'\'" ng-show="colFilter.term !== undefined && colFilter.term !== null && colFilter.term !== \'\'"><i class="ui-grid-icon-cancel" ui-grid-one-bind-aria-label="aria.removeFilter">&nbsp;</i></div></div><div ng-if="colFilter.type === \'select\'"><select class="ui-grid-filter-select ui-grid-filter-input-{{$index}}" ng-model="colFilter.term" ng-attr-placeholder="{{colFilter.placeholder || aria.defaultFilterLabel}}" aria-label="{{colFilter.ariaLabel || \'\'}}" ng-options="option.value as option.label for option in colFilter.selectOptions"><option value=""></option></select><div role="button" class="ui-grid-filter-button-select" ng-click="removeFilter(colFilter, $index)" ng-if="!colFilter.disableCancelFilterButton" ng-disabled="colFilter.term === undefined || colFilter.term === null || colFilter.term === \'\'" ng-show="colFilter.term !== undefined && colFilter.term != null"><i class="ui-grid-icon-cancel" ui-grid-one-bind-aria-label="aria.removeFilter">&nbsp;</i></div></div></div>'),$templateCache.put("ui-grid/ui-grid-footer",'<div class="ui-grid-footer-panel ui-grid-footer-aggregates-row">\x3c!-- tfooter --\x3e<div class="ui-grid-footer ui-grid-footer-viewport"><div class="ui-grid-footer-canvas"><div class="ui-grid-footer-cell-wrapper" ng-style="colContainer.headerCellWrapperStyle()"><div role="row" class="ui-grid-footer-cell-row"><div ui-grid-footer-cell role="gridcell" ng-repeat="col in colContainer.renderedColumns track by col.uid" col="col" render-index="$index" class="ui-grid-footer-cell ui-grid-clearfix"></div></div></div></div></div></div>'),$templateCache.put("ui-grid/ui-grid-grid-footer",'<div class="ui-grid-footer-info ui-grid-grid-footer"><span>{{\'search.totalItems\' | t}} {{grid.rows.length}}</span> <span ng-if="grid.renderContainers.body.visibleRowCache.length !== grid.rows.length" class="ngLabel">({{"search.showingItems" | t}} {{grid.renderContainers.body.visibleRowCache.length}})</span></div>'),$templateCache.put("ui-grid/ui-grid-group-panel",'<div class="ui-grid-group-panel"><div ui-t="groupPanel.description" class="description" ng-show="groupings.length == 0"></div><ul ng-show="groupings.length > 0" class="ngGroupList"><li class="ngGroupItem" ng-repeat="group in configGroups"><span class="ngGroupElement"><span class="ngGroupName">{{group.displayName}} <span ng-click="removeGroup($index)" class="ngRemoveGroup">x</span></span> <span ng-hide="$last" class="ngGroupArrow"></span></span></li></ul></div>'),$templateCache.put("ui-grid/ui-grid-header",'<div role="rowgroup" class="ui-grid-header">\x3c!-- theader --\x3e<div class="ui-grid-top-panel"><div class="ui-grid-header-viewport"><div class="ui-grid-header-canvas"><div class="ui-grid-header-cell-wrapper" ng-style="colContainer.headerCellWrapperStyle()"><div role="row" class="ui-grid-header-cell-row"><div class="ui-grid-header-cell ui-grid-clearfix" ng-repeat="col in colContainer.renderedColumns track by col.uid" ui-grid-header-cell col="col" render-index="$index"></div></div></div></div></div></div></div>'),$templateCache.put("ui-grid/ui-grid-menu-button",'<div class="ui-grid-menu-button"><div role="button" ui-grid-one-bind-id-grid="\'grid-menu\'" class="ui-grid-icon-container" ng-click="toggleMenu()" aria-haspopup="true"><i class="ui-grid-icon-menu" ui-grid-one-bind-aria-label="i18n.aria.buttonLabel">&nbsp;</i></div><div ui-grid-menu menu-items="menuItems"></div></div>'),$templateCache.put("ui-grid/ui-grid-no-header",'<div class="ui-grid-top-panel"></div>'),$templateCache.put("ui-grid/ui-grid-row","<div ng-repeat=\"(colRenderIndex, col) in colContainer.renderedColumns track by col.uid\" ui-grid-one-bind-id-grid=\"rowRenderIndex + '-' + col.uid + '-cell'\" class=\"ui-grid-cell\" ng-class=\"{ 'ui-grid-row-header-cell': col.isRowHeader }\" role=\"{{col.isRowHeader ? 'rowheader' : 'gridcell'}}\" ui-grid-cell></div>"),$templateCache.put("ui-grid/ui-grid",'<div ui-i18n="en" class="ui-grid">\x3c!-- TODO (c0bra): add "scoped" attr here, eventually? --\x3e<style ui-grid-style>.grid{{ grid.id }} {\n      /* Styles for the grid */\n    }\n\n    .grid{{ grid.id }} .ui-grid-row, .grid{{ grid.id }} .ui-grid-cell, .grid{{ grid.id }} .ui-grid-cell .ui-grid-vertical-bar {\n      height: {{ grid.options.rowHeight }}px;\n    }\n\n    .grid{{ grid.id }} .ui-grid-row:last-child .ui-grid-cell {\n      border-bottom-width: {{ ((grid.getTotalRowHeight() < grid.getViewportHeight()) && \'1\') || \'0\' }}px;\n    }\n\n    {{ grid.verticalScrollbarStyles }}\n    {{ grid.horizontalScrollbarStyles }}\n\n    /*\n    .ui-grid[dir=rtl] .ui-grid-viewport {\n      padding-left: {{ grid.verticalScrollbarWidth }}px;\n    }\n    */\n\n    {{ grid.customStyles }}</style><div class="ui-grid-contents-wrapper"><div ui-grid-menu-button ng-if="grid.options.enableGridMenu"></div><div ng-if="grid.hasLeftContainer()" style="width: 0" ui-grid-pinned-container="\'left\'"></div><div ui-grid-render-container container-id="\'body\'" col-container-name="\'body\'" row-container-name="\'body\'" bind-scroll-horizontal="true" bind-scroll-vertical="true" enable-horizontal-scrollbar="grid.options.enableHorizontalScrollbar" enable-vertical-scrollbar="grid.options.enableVerticalScrollbar"></div><div ng-if="grid.hasRightContainer()" style="width: 0" ui-grid-pinned-container="\'right\'"></div><div ui-grid-grid-footer ng-if="grid.options.showGridFooter"></div><div ui-grid-column-menu ng-if="grid.options.enableColumnMenus"></div><div ng-transclude></div></div></div>'),$templateCache.put("ui-grid/uiGridCell",'<div class="ui-grid-cell-contents" title="TOOLTIP">{{COL_FIELD CUSTOM_FILTERS}}</div>'),$templateCache.put("ui-grid/uiGridColumnMenu",'<div class="ui-grid-column-menu"><div ui-grid-menu menu-items="menuItems">\x3c!-- <div class="ui-grid-column-menu">\n    <div class="inner" ng-show="menuShown">\n      <ul>\n        <div ng-show="grid.options.enableSorting">\n          <li ng-click="sortColumn($event, asc)" ng-class="{ \'selected\' : col.sort.direction == asc }"><i class="ui-grid-icon-sort-alt-up"></i> Sort Ascending</li>\n          <li ng-click="sortColumn($event, desc)" ng-class="{ \'selected\' : col.sort.direction == desc }"><i class="ui-grid-icon-sort-alt-down"></i> Sort Descending</li>\n          <li ng-show="col.sort.direction" ng-click="unsortColumn()"><i class="ui-grid-icon-cancel"></i> Remove Sort</li>\n        </div>\n      </ul>\n    </div>\n  </div> --\x3e</div></div>'),$templateCache.put("ui-grid/uiGridFooterCell",'<div class="ui-grid-cell-contents" col-index="renderIndex"><div>{{ col.getAggregationText() + ( col.getAggregationValue() CUSTOM_FILTERS ) }}</div></div>'),$templateCache.put("ui-grid/uiGridHeaderCell",'<div role="columnheader" ng-class="{ \'sortable\': sortable }" ui-grid-one-bind-aria-labelledby-grid="col.uid + \'-header-text \' + col.uid + \'-sortdir-text\'" aria-sort="{{col.sort.direction == asc ? \'ascending\' : ( col.sort.direction == desc ? \'descending\' : (!col.sort.direction ? \'none\' : \'other\'))}}"><div role="button" tabindex="0" class="ui-grid-cell-contents ui-grid-header-cell-primary-focus" col-index="renderIndex" title="TOOLTIP"><span class="ui-grid-header-cell-label" ui-grid-one-bind-id-grid="col.uid + \'-header-text\'">{{ col.displayName CUSTOM_FILTERS }}</span> <span ui-grid-one-bind-id-grid="col.uid + \'-sortdir-text\'" ui-grid-visible="col.sort.direction" aria-label="{{getSortDirectionAriaLabel()}}"><i ng-class="{ \'ui-grid-icon-up-dir\': col.sort.direction == asc, \'ui-grid-icon-down-dir\': col.sort.direction == desc, \'ui-grid-icon-blank\': !col.sort.direction }" title="{{isSortPriorityVisible() ? i18n.headerCell.priority + \' \' + ( col.sort.priority + 1 )  : null}}" aria-hidden="true"></i> <sub ui-grid-visible="isSortPriorityVisible()" class="ui-grid-sort-priority-number">{{col.sort.priority + 1}}</sub></span></div><div role="button" tabindex="0" ui-grid-one-bind-id-grid="col.uid + \'-menu-button\'" class="ui-grid-column-menu-button" ng-if="grid.options.enableColumnMenus && !col.isRowHeader  && col.colDef.enableColumnMenu !== false" ng-click="toggleMenu($event)" ng-class="{\'ui-grid-column-menu-button-last-col\': isLastCol}" ui-grid-one-bind-aria-label="i18n.headerCell.aria.columnMenuButtonLabel" aria-haspopup="true"><i class="ui-grid-icon-angle-down" aria-hidden="true">&nbsp;</i></div><div ui-grid-filter></div></div>'),$templateCache.put("ui-grid/uiGridMenu",'<div class="ui-grid-menu" ng-if="shown"><style ui-grid-style>{{dynamicStyles}}</style><div class="ui-grid-menu-mid" ng-show="shownMid"><div class="ui-grid-menu-inner"><ul role="menu" class="ui-grid-menu-items"><li ng-repeat="item in menuItems" role="menuitem" ui-grid-menu-item ui-grid-one-bind-id="\'menuitem-\'+$index" action="item.action" name="item.title" active="item.active" icon="item.icon" shown="item.shown" context="item.context" template-url="item.templateUrl" leave-open="item.leaveOpen" screen-reader-only="item.screenReaderOnly"></li></ul></div></div></div>'),$templateCache.put("ui-grid/uiGridMenuItem",'<button type="button" class="ui-grid-menu-item" ng-click="itemAction($event, title)" ng-show="itemShown()" ng-class="{ \'ui-grid-menu-item-active\': active(), \'ui-grid-sr-only\': (!focus && screenReaderOnly) }" aria-pressed="{{active()}}" tabindex="0" ng-focus="focus=true" ng-blur="focus=false"><i ng-class="icon" aria-hidden="true">&nbsp;</i> {{ name }}</button>'),$templateCache.put("ui-grid/uiGridRenderContainer","<div role=\"grid\" ui-grid-one-bind-id-grid=\"'grid-container'\" class=\"ui-grid-render-container\" ng-style=\"{ 'margin-left': colContainer.getMargin('left') + 'px', 'margin-right': colContainer.getMargin('right') + 'px' }\">\x3c!-- All of these dom elements are replaced in place --\x3e<div ui-grid-header></div><div ui-grid-viewport></div><div ng-if=\"colContainer.needsHScrollbarPlaceholder()\" class=\"ui-grid-scrollbar-placeholder\" ng-style=\"{height:colContainer.grid.scrollbarHeight + 'px'}\"></div><ui-grid-footer ng-if=\"grid.options.showColumnFooter\"></ui-grid-footer></div>"),$templateCache.put("ui-grid/uiGridViewport",'<div role="rowgroup" class="ui-grid-viewport" ng-style="colContainer.getViewportStyle()">\x3c!-- tbody --\x3e<div class="ui-grid-canvas"><div ng-repeat="(rowRenderIndex, row) in rowContainer.renderedRows track by $index" class="ui-grid-row" ng-style="Viewport.rowStyle(rowRenderIndex)"><div role="row" ui-grid-row="row" row-render-index="rowRenderIndex"></div></div></div></div>'),$templateCache.put("ui-grid/cellEditor",'<div><form name="inputForm"><input type="INPUT_TYPE" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD"></form></div>'),$templateCache.put("ui-grid/dropdownEditor",'<div><form name="inputForm"><select ng-class="\'colt\' + col.uid" ui-grid-edit-dropdown ng-model="MODEL_COL_FIELD" ng-options="field[editDropdownIdLabel] as field[editDropdownValueLabel] CUSTOM_FILTERS for field in editDropdownOptionsArray"></select></form></div>'),$templateCache.put("ui-grid/fileChooserEditor",'<div><form name="inputForm"><input ng-class="\'colt\' + col.uid" ui-grid-edit-file-chooser type="file" id="files" name="files[]" ng-model="MODEL_COL_FIELD"></form></div>'),$templateCache.put("ui-grid/expandableRow",'<div ui-grid-expandable-row ng-if="expandableRow.shouldRenderExpand()" class="expandableRow" style="float:left; margin-top: 1px; margin-bottom: 1px" ng-style="{width: (grid.renderContainers.body.getCanvasWidth()) + \'px\', height: row.expandedRowHeight + \'px\'}"></div>'),$templateCache.put("ui-grid/expandableRowHeader",'<div class="ui-grid-row-header-cell ui-grid-expandable-buttons-cell"><div class="ui-grid-cell-contents"><i ng-if="!row.groupHeader==true" ng-class="{ \'ui-grid-icon-plus-squared\' : !row.isExpanded, \'ui-grid-icon-minus-squared\' : row.isExpanded }" ng-click="grid.api.expandable.toggleRowExpansion(row.entity)"></i></div></div>'),$templateCache.put("ui-grid/expandableScrollFiller","<div ng-if=\"expandableRow.shouldRenderFiller()\" ng-class=\"{scrollFiller:true, scrollFillerClass:(colContainer.name === 'body')}\" ng-style=\"{ width: (grid.getViewportWidth()) + 'px', height: row.expandedRowHeight + 2 + 'px', 'margin-left': grid.options.rowHeader.rowHeaderWidth + 'px' }\"><i class=\"ui-grid-icon-spin5 ui-grid-animate-spin\" ng-style=\"{'margin-top': ( row.expandedRowHeight/2 - 5) + 'px', 'margin-left' : ((grid.getViewportWidth() - grid.options.rowHeader.rowHeaderWidth)/2 - 5) + 'px'}\"></i></div>"),$templateCache.put("ui-grid/expandableTopRowHeader",'<div class="ui-grid-row-header-cell ui-grid-expandable-buttons-cell"><div class="ui-grid-cell-contents"><i ng-class="{ \'ui-grid-icon-plus-squared\' : !grid.expandable.expandedAll, \'ui-grid-icon-minus-squared\' : grid.expandable.expandedAll }" ng-click="grid.api.expandable.toggleAllRows()"></i></div></div>'),$templateCache.put("ui-grid/csvLink",'<span class="ui-grid-exporter-csv-link-span"><a href="data:text/csv;charset=UTF-8,CSV_CONTENT" download="FILE_NAME">LINK_LABEL</a></span>'),$templateCache.put("ui-grid/importerMenuItem",'<li class="ui-grid-menu-item"><form><input class="ui-grid-importer-file-chooser" type="file" id="files" name="files[]"></form></li>'),$templateCache.put("ui-grid/importerMenuItemContainer","<div ui-grid-importer-menu-item></div>"),$templateCache.put("ui-grid/pagination",'<div role="contentinfo" class="ui-grid-pager-panel" ui-grid-pager ng-show="grid.options.enablePaginationControls"><div role="navigation" class="ui-grid-pager-container"><div role="menubar" class="ui-grid-pager-control"><button type="button" role="menuitem" class="ui-grid-pager-first" ui-grid-one-bind-title="aria.pageToFirst" ui-grid-one-bind-aria-label="aria.pageToFirst" ng-click="pageFirstPageClick()" ng-disabled="cantPageBackward()"><div ng-class="grid.isRTL() ? \'last-triangle\' : \'first-triangle\'"><div ng-class="grid.isRTL() ? \'last-bar-rtl\' : \'first-bar\'"></div></div></button> <button type="button" role="menuitem" class="ui-grid-pager-previous" ui-grid-one-bind-title="aria.pageBack" ui-grid-one-bind-aria-label="aria.pageBack" ng-click="pagePreviousPageClick()" ng-disabled="cantPageBackward()"><div ng-class="grid.isRTL() ? \'last-triangle prev-triangle\' : \'first-triangle prev-triangle\'"></div></button> <input type="number" ui-grid-one-bind-title="aria.pageSelected" ui-grid-one-bind-aria-label="aria.pageSelected" class="ui-grid-pager-control-input" ng-model="grid.options.paginationCurrentPage" min="1" max="{{ paginationApi.getTotalPages() }}" required> <span class="ui-grid-pager-max-pages-number" ng-show="paginationApi.getTotalPages() > 0"><abbr ui-grid-one-bind-title="paginationOf">/</abbr> {{ paginationApi.getTotalPages() }}</span> <button type="button" role="menuitem" class="ui-grid-pager-next" ui-grid-one-bind-title="aria.pageForward" ui-grid-one-bind-aria-label="aria.pageForward" ng-click="pageNextPageClick()" ng-disabled="cantPageForward()"><div ng-class="grid.isRTL() ? \'first-triangle next-triangle\' : \'last-triangle next-triangle\'"></div></button> <button type="button" role="menuitem" class="ui-grid-pager-last" ui-grid-one-bind-title="aria.pageToLast" ui-grid-one-bind-aria-label="aria.pageToLast" ng-click="pageLastPageClick()" ng-disabled="cantPageToLast()"><div ng-class="grid.isRTL() ? \'first-triangle\' : \'last-triangle\'"><div ng-class="grid.isRTL() ? \'first-bar-rtl\' : \'last-bar\'"></div></div></button></div><div class="ui-grid-pager-row-count-picker" ng-if="grid.options.paginationPageSizes.length > 1"><select ui-grid-one-bind-aria-labelledby-grid="\'items-per-page-label\'" ng-model="grid.options.paginationPageSize" ng-options="o as o for o in grid.options.paginationPageSizes"></select><span ui-grid-one-bind-id-grid="\'items-per-page-label\'" class="ui-grid-pager-row-count-label">&nbsp;{{sizesLabel}}</span></div><span ng-if="grid.options.paginationPageSizes.length <= 1" class="ui-grid-pager-row-count-label">{{grid.options.paginationPageSize}}&nbsp;{{sizesLabel}}</span></div><div class="ui-grid-pager-count-container"><div class="ui-grid-pager-count"><span ng-show="grid.options.totalItems > 0">{{showingLow}} <abbr ui-grid-one-bind-title="paginationThrough">-</abbr> {{showingHigh}} {{paginationOf}} {{grid.options.totalItems}} {{totalItemsLabel}}</span></div></div></div>'),$templateCache.put("ui-grid/columnResizer",'<div ui-grid-column-resizer ng-if="grid.options.enableColumnResizing" class="ui-grid-column-resizer" col="col" position="right" render-index="renderIndex" unselectable="on"></div>'),$templateCache.put("ui-grid/gridFooterSelectedItems",'<span ng-if="grid.selection.selectedCount !== 0 && grid.options.enableFooterTotalSelected">({{"search.selectedItems" | t}} {{grid.selection.selectedCount}})</span>'),$templateCache.put("ui-grid/selectionHeaderCell",'<div>\x3c!-- <div class="ui-grid-vertical-bar">&nbsp;</div> --\x3e<div class="ui-grid-cell-contents" col-index="renderIndex"><ui-grid-selection-select-all-buttons ng-if="grid.options.enableSelectAll"></ui-grid-selection-select-all-buttons></div></div>'),$templateCache.put("ui-grid/selectionRowHeader",'<div class="ui-grid-disable-selection"><div class="ui-grid-cell-contents"><ui-grid-selection-row-header-buttons></ui-grid-selection-row-header-buttons></div></div>'),$templateCache.put("ui-grid/selectionRowHeaderButtons",'<div class="ui-grid-selection-row-header-buttons ui-grid-icon-ok" ng-class="{\'ui-grid-row-selected\': row.isSelected}" ng-click="selectButtonClick(row, $event)">&nbsp;</div>'),$templateCache.put("ui-grid/selectionSelectAllButtons",'<div class="ui-grid-selection-row-header-buttons ui-grid-icon-ok" ng-class="{\'ui-grid-all-selected\': grid.selection.selectAll}" ng-click="headerButtonClick($event)"></div>'),$templateCache.put("ui-grid/treeBaseExpandAllButtons",'<div class="ui-grid-tree-base-row-header-buttons" ng-class="{\'ui-grid-icon-minus-squared\': grid.treeBase.numberLevels > 0 && grid.treeBase.expandAll, \'ui-grid-icon-plus-squared\': grid.treeBase.numberLevels > 0 && !grid.treeBase.expandAll}" ng-click="headerButtonClick($event)"></div>'),$templateCache.put("ui-grid/treeBaseHeaderCell",'<div><div class="ui-grid-cell-contents" col-index="renderIndex"><ui-grid-tree-base-expand-all-buttons ng-if="grid.options.enableExpandAll"></ui-grid-tree-base-expand-all-buttons></div></div>'),$templateCache.put("ui-grid/treeBaseRowHeader",'<div class="ui-grid-cell-contents"><ui-grid-tree-base-row-header-buttons></ui-grid-tree-base-row-header-buttons></div>'),$templateCache.put("ui-grid/treeBaseRowHeaderButtons","<div class=\"ui-grid-tree-base-row-header-buttons\" ng-class=\"{'ui-grid-tree-base-header': row.treeLevel > -1 }\" ng-click=\"treeButtonClick(row, $event)\"><i ng-class=\"{'ui-grid-icon-minus-squared': ( ( grid.options.showTreeExpandNoChildren && row.treeLevel > -1 ) || ( row.treeNode.children && row.treeNode.children.length > 0 ) ) && row.treeNode.state === 'expanded', 'ui-grid-icon-plus-squared': ( ( grid.options.showTreeExpandNoChildren && row.treeLevel > -1 ) || ( row.treeNode.children && row.treeNode.children.length > 0 ) ) && row.treeNode.state === 'collapsed'}\" ng-style=\"{'padding-left': grid.options.treeIndent * row.treeLevel + 'px'}\"></i> &nbsp;</div>"),$templateCache.put("ui-grid/cellTitleValidator",'<div class="ui-grid-cell-contents" ng-class="{invalid:grid.validate.isInvalid(row.entity,col.colDef)}" title="{{grid.validate.getTitleFormattedErrors(row.entity,col.colDef)}}">{{COL_FIELD CUSTOM_FILTERS}}</div>'),$templateCache.put("ui-grid/cellTooltipValidator",'<div class="ui-grid-cell-contents" ng-class="{invalid:grid.validate.isInvalid(row.entity,col.colDef)}" tooltip-html-unsafe="{{grid.validate.getFormattedErrors(row.entity,col.colDef)}}" tooltip-enable="grid.validate.isInvalid(row.entity,col.colDef)" tooltip-append-to-body="true" tooltip-placement="top" title="TOOLTIP">{{COL_FIELD CUSTOM_FILTERS}}</div>')}]),!function(){"use strict";angular.module("ui.grid.i18n",[]),angular.module("ui.grid",["ui.grid.i18n"])}(),function(){"use strict";angular.module("ui.grid").constant("uiGridConstants",{LOG_DEBUG_MESSAGES:!0,LOG_WARN_MESSAGES:!0,LOG_ERROR_MESSAGES:!0,CUSTOM_FILTERS:/CUSTOM_FILTERS/g,COL_FIELD:/COL_FIELD/g,MODEL_COL_FIELD:/MODEL_COL_FIELD/g,TOOLTIP:/title=\"TOOLTIP\"/g,DISPLAY_CELL_TEMPLATE:/DISPLAY_CELL_TEMPLATE/g,TEMPLATE_REGEXP:/<.+>/,FUNC_REGEXP:/(\([^)]*\))?$/,DOT_REGEXP:/\./g,APOS_REGEXP:/'/g,BRACKET_REGEXP:/^(.*)((?:\s*\[\s*\d+\s*\]\s*)|(?:\s*\[\s*"(?:[^"\\]|\\.)*"\s*\]\s*)|(?:\s*\[\s*'(?:[^'\\]|\\.)*'\s*\]\s*))(.*)$/,COL_CLASS_PREFIX:"ui-grid-col",ENTITY_BINDING:"$$this",events:{GRID_SCROLL:"uiGridScroll",COLUMN_MENU_SHOWN:"uiGridColMenuShown",ITEM_DRAGGING:"uiGridItemDragStart",COLUMN_HEADER_CLICK:"uiGridColumnHeaderClick"},keymap:{TAB:9,STRG:17,CAPSLOCK:20,CTRL:17,CTRLRIGHT:18,CTRLR:18,SHIFT:16,RETURN:13,ENTER:13,BACKSPACE:8,BCKSP:8,ALT:18,ALTR:17,ALTRIGHT:17,SPACE:32,WIN:91,MAC:91,FN:null,PG_UP:33,PG_DOWN:34,UP:38,DOWN:40,LEFT:37,RIGHT:39,ESC:27,DEL:46,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123},ASC:"asc",DESC:"desc",filter:{STARTS_WITH:2,ENDS_WITH:4,EXACT:8,CONTAINS:16,GREATER_THAN:32,GREATER_THAN_OR_EQUAL:64,LESS_THAN:128,LESS_THAN_OR_EQUAL:256,NOT_EQUAL:512,SELECT:"select",INPUT:"input"},aggregationTypes:{sum:2,count:4,avg:8,min:16,max:32},CURRENCY_SYMBOLS:["ƒ","$","£","$","¤","¥","៛","₩","₱","฿","₫"],scrollDirection:{UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right",NONE:"none"},dataChange:{ALL:"all",EDIT:"edit",ROW:"row",COLUMN:"column",OPTIONS:"options"},scrollbars:{NEVER:0,ALWAYS:1}})}(),angular.module("ui.grid").directive("uiGridCell",["$compile","$parse","gridUtil","uiGridConstants",function(a,b,c,d){return{priority:0,scope:!1,require:"?^uiGrid",compile:function(){return{pre:function(b,e,f,g){if(g&&b.col.compiledElementFn)!function(){(0,b.col.compiledElementFn)(b,function(a,b){e.append(a)})}();else if(g&&!b.col.compiledElementFn)b.col.getCompiledElementFn().then(function(a){a(b,function(a,b){e.append(a)})});else{var i=b.col.cellTemplate.replace(d.MODEL_COL_FIELD,"row.entity."+c.preEval(b.col.field)).replace(d.COL_FIELD,"grid.getCellValue(row, col)"),j=a(i)(b);e.append(j)}},post:function(a,b,c,e){var f=a.col.getColClass(!1);b.addClass(f);var g,h=function(c){var d=b;g&&(d.removeClass(g),g=null),g=angular.isFunction(a.col.cellClass)?a.col.cellClass(a.grid,a.row,a.col,a.rowRenderIndex,a.colRenderIndex):a.col.cellClass,d.addClass(g)};a.col.cellClass&&h();var i=a.grid.registerDataChangeCallback(h,[d.dataChange.COLUMN,d.dataChange.EDIT]),j=function(c,d){if(c!==d){(g||a.col.cellClass)&&h();var e=a.col.getColClass(!1);e!==f&&(b.removeClass(f),b.addClass(e),f=e)}},k=a.$watch("row",j),l=function(){i(),k()};a.$on("$destroy",l),b.on("$destroy",l)}}}}}]),function(){angular.module("ui.grid").service("uiGridColumnMenuService",["i18nService","uiGridConstants","gridUtil",function(a,b,c){var d={initialize:function(a,b){a.grid=b.grid,b.columnMenuScope=a,a.menuShown=!1},setColMenuItemWatch:function(a){var b=a.$watch("col.menuItems",function(b){void 0!==b&&b&&angular.isArray(b)?(b.forEach(function(b){void 0!==b.context&&b.context||(b.context={}),b.context.col=a.col}),a.menuItems=a.defaultMenuItems.concat(b)):a.menuItems=a.defaultMenuItems});a.$on("$destroy",b)},sortable:function(a){return!!(a.grid.options.enableSorting&&void 0!==a.col&&a.col&&a.col.enableSorting)},isActiveSort:function(a,b){return void 0!==a.col&&void 0!==a.col.sort&&void 0!==a.col.sort.direction&&a.col.sort.direction===b},suppressRemoveSort:function(a){return!(!a.col||!a.col.suppressRemoveSort)},hideable:function(a){return void 0===a.col||!a.col||!a.col.colDef||!1!==a.col.colDef.enableHiding},getDefaultMenuItems:function(c){return[{title:a.getSafeText("sort.ascending"),icon:"ui-grid-icon-sort-alt-up",action:function(a){a.stopPropagation(),c.sortColumn(a,b.ASC)},shown:function(){return d.sortable(c)},active:function(){return d.isActiveSort(c,b.ASC)}},{title:a.getSafeText("sort.descending"),icon:"ui-grid-icon-sort-alt-down",action:function(a){a.stopPropagation(),c.sortColumn(a,b.DESC)},shown:function(){return d.sortable(c)},active:function(){return d.isActiveSort(c,b.DESC)}},{title:a.getSafeText("sort.remove"),icon:"ui-grid-icon-cancel",action:function(a){a.stopPropagation(),c.unsortColumn()},shown:function(){return d.sortable(c)&&void 0!==c.col&&void 0!==c.col.sort&&void 0!==c.col.sort.direction&&null!==c.col.sort.direction&&!d.suppressRemoveSort(c)}},{title:a.getSafeText("column.hide"),icon:"ui-grid-icon-cancel",shown:function(){return d.hideable(c)},action:function(a){a.stopPropagation(),c.hideColumn()}}]},getColumnElementPosition:function(a,b,d){var e={};return e.left=d[0].offsetLeft,e.top=d[0].offsetTop,e.parentLeft=d[0].offsetParent.offsetLeft,e.offset=0,b.grid.options.offsetLeft&&(e.offset=b.grid.options.offsetLeft),e.height=c.elementHeight(d,!0),e.width=c.elementWidth(d,!0),e},repositionMenu:function(a,b,d,e,f){var g=e[0].querySelectorAll(".ui-grid-menu"),h=c.closestElm(f,".ui-grid-render-container"),i=h.getBoundingClientRect().left-a.grid.element[0].getBoundingClientRect().left,j=h.querySelectorAll(".ui-grid-viewport")[0].scrollLeft,k=b.lastMenuWidth?b.lastMenuWidth:a.lastMenuWidth?a.lastMenuWidth:170,l=b.lastMenuPaddingRight?b.lastMenuPaddingRight:a.lastMenuPaddingRight?a.lastMenuPaddingRight:10;if(0!==g.length){var m=g[0].querySelectorAll(".ui-grid-menu-mid");0===m.length||angular.element(m).hasClass("ng-hide")||(k=c.elementWidth(g,!0),a.lastMenuWidth=k,b.lastMenuWidth=k,l=parseInt(c.getStyles(angular.element(g)[0]).paddingRight,10),a.lastMenuPaddingRight=l,b.lastMenuPaddingRight=l)}var n=d.left+i-j+d.parentLeft+d.width-k+l;n<d.offset&&(n=d.offset),e.css("left",n+"px"),e.css("top",d.top+d.height+"px")}};return d}]).directive("uiGridColumnMenu",["$timeout","gridUtil","uiGridConstants","uiGridColumnMenuService","$document",function(a,b,c,d,e){return{priority:0,scope:!0,require:"^uiGrid",templateUrl:"ui-grid/uiGridColumnMenu",replace:!0,link:function(f,g,h,i){d.initialize(f,i),f.defaultMenuItems=d.getDefaultMenuItems(f),f.menuItems=f.defaultMenuItems,d.setColMenuItemWatch(f),f.showMenu=function(a,b,c){f.col=a;var e=d.getColumnElementPosition(f,a,b);f.menuShown?(f.colElement=b,f.colElementPosition=e,f.hideThenShow=!0,f.$broadcast("hide-menu",{originalEvent:c})):(f.menuShown=!0,d.repositionMenu(f,a,e,g,b),f.colElement=b,f.colElementPosition=e,f.$broadcast("show-menu",{originalEvent:c}))},f.hideMenu=function(a){f.menuShown=!1,a||f.$broadcast("hide-menu")},f.$on("menu-hidden",function(){f.hideThenShow?(delete f.hideThenShow,d.repositionMenu(f,f.col,f.colElementPosition,g,f.colElement),f.$broadcast("show-menu"),f.menuShown=!0):(f.hideMenu(!0),f.col&&b.focus.bySelector(e,".ui-grid-header-cell."+f.col.getColClass()+" .ui-grid-column-menu-button",f.col.grid,!1))}),f.$on("menu-shown",function(){a(function(){d.repositionMenu(f,f.col,f.colElementPosition,g,f.colElement),b.focus.bySelector(e,".ui-grid-menu-items .ui-grid-menu-item",!0),delete f.colElementPosition,delete f.columnElement},200)}),f.sortColumn=function(a,b){a.stopPropagation(),f.grid.sortColumn(f.col,b,!0).then(function(){f.grid.refresh(),f.hideMenu()})},f.unsortColumn=function(){f.col.unsort(),f.grid.refresh(),f.hideMenu()};var j=function(){a(function(){var a,c=function(){return b.focus.byId("grid-menu",f.grid)};f.grid.columns.some(function(b,c){return angular.equals(b,f.col)?(a=c,!0):void 0});var d;if(f.grid.columns.some(function(b,c){if(!b.visible)return!1;if(a>c)d=b;else{if(c>a&&!d)return d=b,!0;if(c>a&&d)return!0}}),d){var g=d.getColClass();b.focus.bySelector(e,".ui-grid-header-cell."+g+" .ui-grid-header-cell-primary-focus",!0).then(angular.noop,function(a){return"canceled"!==a?c():void 0})}else c()})};f.hideColumn=function(){f.col.colDef.visible=!1,f.col.visible=!1,f.grid.queueGridRefresh(),f.hideMenu(),f.grid.api.core.notifyDataChange(c.dataChange.COLUMN),f.grid.api.core.raise.columnVisibilityChanged(f.col),j()}},controller:["$scope",function(a){var b=this;a.$watch("menuItems",function(a){b.menuItems=a})}]}}])}(),function(){"use strict"
;angular.module("ui.grid").directive("uiGridFilter",["$compile","$templateCache","i18nService","gridUtil",function(a,b,c,d){return{compile:function(){return{pre:function(b,c,d,e){b.col.updateFilters=function(d){if(c.children().remove(),d){var e=b.col.filterHeaderTemplate;c.append(a(e)(b))}},b.$on("$destroy",function(){delete b.col.updateFilters})},post:function(a,b,e,f){a.aria=c.getSafeText("headerCell.aria"),a.removeFilter=function(a,c){a.term=null,d.focus.bySelector(b,".ui-grid-filter-input-"+c)}}}}}}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridFooterCell",["$timeout","gridUtil","uiGridConstants","$compile",function(a,b,c,d){return{priority:0,scope:{col:"=",row:"=",renderIndex:"="},replace:!0,require:"^uiGrid",compile:function(a,b,e){return{pre:function(a,b,c,e){var f=d(a.col.footerCellTemplate)(a);b.append(f)},post:function(a,b,d,e){a.grid=e.grid;var f=a.col.getColClass(!1);b.addClass(f);var g,h=function(c){var d=b;g&&(d.removeClass(g),g=null),g=angular.isFunction(a.col.footerCellClass)?a.col.footerCellClass(a.grid,a.row,a.col,a.rowRenderIndex,a.colRenderIndex):a.col.footerCellClass,d.addClass(g)};a.col.footerCellClass&&h(),a.col.updateAggregationValue();var i=a.grid.registerDataChangeCallback(h,[c.dataChange.COLUMN]);a.grid.api.core.on.rowsRendered(a,a.col.updateAggregationValue),a.grid.api.core.on.rowsRendered(a,h),a.$on("$destroy",i)}}}}}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridFooter",["$templateCache","$compile","uiGridConstants","gridUtil","$timeout",function(a,b,c,d,e){return{restrict:"EA",replace:!0,require:["^uiGrid","^uiGridRenderContainer"],scope:!0,compile:function(a,c){return{pre:function(a,c,e,f){var g=f[0],h=f[1];a.grid=g.grid,a.colContainer=h.colContainer,h.footer=c;var i=a.grid.options.footerTemplate;d.getTemplate(i).then(function(d){var e=angular.element(d),f=b(e)(a);if(c.append(f),h){var g=c[0].getElementsByClassName("ui-grid-footer-viewport")[0];g&&(h.footerViewport=g)}})},post:function(a,b,c,e){var f=e[0],g=e[1];f.grid,d.disableAnimations(b),g.footer=b;var h=b[0].getElementsByClassName("ui-grid-footer-viewport")[0];h&&(g.footerViewport=h)}}}}}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridGridFooter",["$templateCache","$compile","uiGridConstants","gridUtil","$timeout",function(a,b,c,d,e){return{restrict:"EA",replace:!0,require:"^uiGrid",scope:!0,compile:function(a,c){return{pre:function(a,c,e,f){a.grid=f.grid;var g=a.grid.options.gridFooterTemplate;d.getTemplate(g).then(function(d){var e=angular.element(d),f=b(e)(a);c.append(f)})},post:function(a,b,c,d){}}}}}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridGroupPanel",["$compile","uiGridConstants","gridUtil",function(a,b,c){return{restrict:"EA",replace:!0,require:"?^uiGrid",scope:!1,compile:function(b,e){return{pre:function(b,e,f,g){var h=b.grid.options.groupPanelTemplate||"ui-grid/ui-grid-group-panel";c.getTemplate(h).then(function(c){var d=angular.element(c),f=a(d)(b);e.append(f)})},post:function(a,b,c,d){b.bind("$destroy",function(){})}}}}}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridHeaderCell",["$compile","$timeout","$window","$document","gridUtil","uiGridConstants","ScrollEvent","i18nService",function(a,b,c,d,e,f,g,h){return{priority:0,scope:{col:"=",row:"=",renderIndex:"="},require:["^uiGrid","^uiGridRenderContainer"],replace:!0,compile:function(){return{pre:function(b,c,d){var e=a(b.col.headerCellTemplate)(b);c.append(e)},post:function(a,c,e,g){var k=g[0],l=g[1];a.i18n={headerCell:h.getSafeText("headerCell"),sort:h.getSafeText("sort")},a.isSortPriorityVisible=function(){return angular.isNumber(a.col.sort.priority)&&a.grid.columns.some(function(b,c){return angular.isNumber(b.sort.priority)&&b!==a.col})},a.getSortDirectionAriaLabel=function(){var b=a.col,c=b.sort.direction===f.ASC?a.i18n.sort.ascending:b.sort.direction===f.DESC?a.i18n.sort.descending:a.i18n.sort.none,d=c;return a.isSortPriorityVisible()&&(d=d+". "+a.i18n.headerCell.priority+" "+b.sort.priority),d},a.grid=k.grid,a.renderContainer=k.grid.renderContainers[l.containerId];var m=a.col.getColClass(!1);c.addClass(m),a.menuShown=!1,a.asc=f.ASC,a.desc=f.DESC;var n,o,p=(angular.element(c[0].querySelectorAll(".ui-grid-header-cell-menu")),angular.element(c[0].querySelectorAll(".ui-grid-cell-contents"))),q=[];a.downFn=function(e){e.stopPropagation(),void 0!==e.originalEvent&&void 0!==e.originalEvent&&(e=e.originalEvent),e.button&&0!==e.button||(o=e.pageX,a.mousedownStartTime=(new Date).getTime(),a.mousedownTimeout=b(function(){},500),a.mousedownTimeout.then(function(){a.colMenu&&k.columnMenuScope.showMenu(a.col,c,e)}),k.fireEvent(f.events.COLUMN_HEADER_CLICK,{event:e,columnName:a.col.colDef.name}),a.offAllEvents(),"touchstart"===e.type?(d.on("touchend",a.upFn),d.on("touchmove",a.moveFn)):"mousedown"===e.type&&(d.on("mouseup",a.upFn),d.on("mousemove",a.moveFn)))},a.upFn=function(c){c.stopPropagation(),b.cancel(a.mousedownTimeout),a.offAllEvents(),a.onDownEvents(c.type),(new Date).getTime()-a.mousedownStartTime>500||a.sortable&&a.handleClick(c)},a.moveFn=function(c){0!=c.pageX-o&&(b.cancel(a.mousedownTimeout),a.offAllEvents(),a.onDownEvents(c.type))},a.clickFn=function(b){b.stopPropagation(),p.off("click",a.clickFn)},a.offAllEvents=function(){p.off("touchstart",a.downFn),p.off("mousedown",a.downFn),d.off("touchend",a.upFn),d.off("mouseup",a.upFn),d.off("touchmove",a.moveFn),d.off("mousemove",a.moveFn),p.off("click",a.clickFn)},a.onDownEvents=function(c){switch(c){case"touchmove":case"touchend":p.on("click",a.clickFn),p.on("touchstart",a.downFn),b(function(){p.on("mousedown",a.downFn)},500);break;case"mousemove":case"mouseup":p.on("click",a.clickFn),p.on("mousedown",a.downFn),b(function(){p.on("touchstart",a.downFn)},500);break;default:p.on("click",a.clickFn),p.on("touchstart",a.downFn),p.on("mousedown",a.downFn)}};var r=function(d){var e=c;n&&(e.removeClass(n),n=null),n=angular.isFunction(a.col.headerCellClass)?a.col.headerCellClass(a.grid,a.row,a.col,a.rowRenderIndex,a.colRenderIndex):a.col.headerCellClass,e.addClass(n),b(function(){var b=a.grid.renderContainers.right?a.grid.renderContainers.right:a.grid.renderContainers.body;a.isLastCol=a.col===b.visibleColumnCache[b.visibleColumnCache.length-1]}),k.grid.options.enableSorting&&a.col.enableSorting?a.sortable=!0:a.sortable=!1;var g=a.filterable;k.grid.options.enableFiltering&&a.col.enableFiltering?a.filterable=!0:a.filterable=!1,g!==a.filterable&&(void 0!==a.col.updateFilters&&a.col.updateFilters(a.filterable),a.filterable?(a.col.filters.forEach(function(b,c){q.push(a.$watch("col.filters["+c+"].term",function(a,b){a!==b&&(k.grid.api.core.raise.filterChanged(),k.grid.api.core.notifyDataChange(f.dataChange.COLUMN),k.grid.queueGridRefresh())}))}),a.$on("$destroy",function(){q.forEach(function(a){a()})})):q.forEach(function(a){a()})),a.col.grid.options&&!1!==a.col.grid.options.enableColumnMenus&&a.col.colDef&&!1!==a.col.colDef.enableColumnMenu?a.colMenu=!0:a.colMenu=!1,a.offAllEvents(),(a.sortable||a.colMenu)&&(a.onDownEvents(),a.$on("$destroy",function(){a.offAllEvents()}))};r();var s=a.grid.registerDataChangeCallback(r,[f.dataChange.COLUMN]);a.$on("$destroy",s),a.handleClick=function(b){var c=!1;b.shiftKey&&(c=!0),k.grid.sortColumn(a.col,c).then(function(){k.columnMenuScope&&k.columnMenuScope.hideMenu(),k.grid.refresh()})},a.toggleMenu=function(b){b.stopPropagation(),k.columnMenuScope.menuShown&&k.columnMenuScope.col===a.col?k.columnMenuScope.hideMenu():k.columnMenuScope.showMenu(a.col,c)}}}}}}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridHeader",["$templateCache","$compile","uiGridConstants","gridUtil","$timeout","ScrollEvent",function(a,b,c,d,e,f){return{restrict:"EA",replace:!0,require:["^uiGrid","^uiGridRenderContainer"],scope:!0,compile:function(a,c){return{pre:function(a,c,e,i){function j(){m.header=m.colContainer.header=c;var a=c[0].getElementsByClassName("ui-grid-header-canvas");a.length>0?m.headerCanvas=m.colContainer.headerCanvas=a[0]:m.headerCanvas=null}function k(a){if(!l.grid.isScrollingHorizontally){var b=d.normalizeScrollLeft(m.headerViewport,l.grid),c=m.colContainer.scrollHorizontal(b),e=new f(l.grid,null,m.colContainer,f.Sources.ViewPortScroll);e.newScrollLeft=b,c>-1&&(e.x={percentage:c}),l.grid.scrollContainers(null,e)}}var l=i[0],m=i[1];a.grid=l.grid,a.colContainer=m.colContainer,j();var n;n=a.grid.options.showHeader?a.grid.options.headerTemplate?a.grid.options.headerTemplate:"ui-grid/ui-grid-header":"ui-grid/ui-grid-no-header",d.getTemplate(n).then(function(d){var e=angular.element(d),f=b(e)(a);if(c.replaceWith(f),c=f,j(),m){var g=c[0].getElementsByClassName("ui-grid-header-viewport")[0];g&&(m.headerViewport=g,angular.element(g).on("scroll",k),a.$on("$destroy",function(){angular.element(g).off("scroll",k)}))}a.grid.queueRefresh()})},post:function(a,b,c,e){function f(){var a=h.colContainer.visibleColumnCache,b="",c=0;return a.forEach(function(a){b+=a.getColClassDefinition(),c+=a.drawnWidth}),h.colContainer.canvasWidth=c,b}var g=e[0],h=e[1];g.grid,d.disableAnimations(b),h.header=b;var i=b[0].getElementsByClassName("ui-grid-header-viewport")[0];i&&(h.headerViewport=i),g&&g.grid.registerStyleComputation({priority:15,func:f})}}}}}])}(),function(){angular.module("ui.grid").service("uiGridGridMenuService",["gridUtil","i18nService","uiGridConstants",function(a,b,c){var d={initialize:function(a,b){b.gridMenuScope=a,a.grid=b,a.registeredMenuItems=[],a.$on("$destroy",function(){a.grid&&a.grid.gridMenuScope&&(a.grid.gridMenuScope=null),a.grid&&(a.grid=null),a.registeredMenuItems&&(a.registeredMenuItems=null)}),a.registeredMenuItems=[],b.api.registerMethod("core","addToGridMenu",d.addToGridMenu),b.api.registerMethod("core","removeFromGridMenu",d.removeFromGridMenu)},addToGridMenu:function(b,c){angular.isArray(c)?b.gridMenuScope?(b.gridMenuScope.registeredMenuItems=b.gridMenuScope.registeredMenuItems?b.gridMenuScope.registeredMenuItems:[],b.gridMenuScope.registeredMenuItems=b.gridMenuScope.registeredMenuItems.concat(c)):a.logError("Asked to addToGridMenu, but gridMenuScope not present.  Timing issue?  Please log issue with ui-grid"):a.logError("addToGridMenu: menuItems must be an array, and is not, not adding any items")},removeFromGridMenu:function(b,c){var d=-1;b&&b.gridMenuScope&&b.gridMenuScope.registeredMenuItems.forEach(function(b,e){b.id===c&&(d>-1?a.logError("removeFromGridMenu: found multiple items with the same id, removing only the last"):d=e)}),d>-1&&b.gridMenuScope.registeredMenuItems.splice(d,1)},getMenuItems:function(c){var e=[];c.grid.options.gridMenuCustomItems&&(angular.isArray(c.grid.options.gridMenuCustomItems)?e=e.concat(c.grid.options.gridMenuCustomItems):a.logError("gridOptions.gridMenuCustomItems must be an array, and is not"));var f=[{title:b.getSafeText("gridMenu.clearAllFilters"),action:function(a){c.grid.clearAllFilters(void 0,!0,void 0)},shown:function(){return c.grid.options.enableFiltering},order:100}];return e=e.concat(f),e=e.concat(c.registeredMenuItems),!1!==c.grid.options.gridMenuShowHideColumns&&(e=e.concat(d.showHideColumns(c))),e.sort(function(a,b){return a.order-b.order}),e},showHideColumns:function(a){var c=[];return a.grid.options.columnDefs&&0!==a.grid.options.columnDefs.length&&0!==a.grid.columns.length?(c.push({title:b.getSafeText("gridMenu.columns"),order:300}),a.grid.options.gridMenuTitleFilter=a.grid.options.gridMenuTitleFilter?a.grid.options.gridMenuTitleFilter:function(a){return a},a.grid.options.columnDefs.forEach(function(b,e){if(!1!==b.enableHiding){var f={icon:"ui-grid-icon-ok",action:function(a){a.stopPropagation(),d.toggleColumnVisibility(this.context.gridCol)},shown:function(){return!0===this.context.gridCol.colDef.visible||void 0===this.context.gridCol.colDef.visible},context:{gridCol:a.grid.getColumn(b.name||b.field)},leaveOpen:!0,order:301+2*e};d.setMenuItemTitle(f,b,a.grid),c.push(f),f={icon:"ui-grid-icon-cancel",action:function(a){a.stopPropagation(),d.toggleColumnVisibility(this.context.gridCol)},shown:function(){return!(!0===this.context.gridCol.colDef.visible||void 0===this.context.gridCol.colDef.visible)},context:{gridCol:a.grid.getColumn(b.name||b.field)},leaveOpen:!0,order:301+2*e+1},d.setMenuItemTitle(f,b,a.grid),c.push(f)}}),c):c},setMenuItemTitle:function(b,c,d){var e=d.options.gridMenuTitleFilter(c.displayName||a.readableColumnName(c.name)||c.field);"string"==typeof e?b.title=e:e.then?(b.title="",e.then(function(a){b.title=a},function(a){b.title=a})):(a.logError("Expected gridMenuTitleFilter to return a string or a promise, it has returned neither, bad config"),b.title="badconfig")},toggleColumnVisibility:function(a){a.colDef.visible=!(!0===a.colDef.visible||void 0===a.colDef.visible),a.grid.refresh(),a.grid.api.core.notifyDataChange(c.dataChange.COLUMN),a.grid.api.core.raise.columnVisibilityChanged(a)}};return d}]).directive("uiGridMenuButton",["gridUtil","uiGridConstants","uiGridGridMenuService","i18nService",function(a,b,c,d){return{priority:0,scope:!0,require:["^uiGrid"],templateUrl:"ui-grid/ui-grid-menu-button",replace:!0,link:function(b,e,f,g){var h=g[0];b.i18n={aria:d.getSafeText("gridMenu.aria")},c.initialize(b,h.grid),b.shown=!1,b.toggleMenu=function(){b.shown?(b.$broadcast("hide-menu"),b.shown=!1):(b.menuItems=c.getMenuItems(b),b.$broadcast("show-menu"),b.shown=!0)},b.$on("menu-hidden",function(){b.shown=!1,a.focus.bySelector(e,".ui-grid-icon-container")})}}}])}(),function(){angular.module("ui.grid").directive("uiGridMenu",["$compile","$timeout","$window","$document","gridUtil","uiGridConstants","i18nService",function(a,b,c,d,e,f,g){return{priority:0,scope:{menuItems:"=",autoHide:"=?"},require:"?^uiGrid",templateUrl:"ui-grid/uiGridMenu",replace:!1,link:function(a,d,h,i){a.dynamicStyles="";var j=function(b){var c=b-i.grid.headerHeight-20;a.dynamicStyles=[".grid"+i.grid.id+" .ui-grid-menu-mid {","max-height: "+c+"px;","}"].join(" ")};i&&(j(i.grid.gridHeight),i.grid.api.core.on.gridDimensionChanged(a,function(a,b,c,d){j(c)})),a.i18n={close:g.getSafeText("columnMenu.close")},a.showMenu=function(c,f){a.shown?a.shownMid||(a.shownMid=!0,a.$emit("menu-shown")):(a.shown=!0,b(function(){a.shownMid=!0,a.$emit("menu-shown")}));var g="click";f&&f.originalEvent&&f.originalEvent.type&&"touchstart"===f.originalEvent.type&&(g=f.originalEvent.type),angular.element(document).off("click touchstart",k),d.off("keyup",l),d.off("keydown",m),b(function(){angular.element(document).on(g,k),d.on("keyup",l),d.on("keydown",m)}),e.focus.bySelector(d,"button[type=button]",!0)},a.hideMenu=function(c){a.shown&&(a.shownMid=!1,b(function(){a.shownMid||(a.shown=!1,a.$emit("menu-hidden"))},200)),angular.element(document).off("click touchstart",k),d.off("keyup",l),d.off("keydown",m)},a.$on("hide-menu",function(b,c){a.hideMenu(b,c)}),a.$on("show-menu",function(b,c){a.showMenu(b,c)});var k=function(){a.shown&&a.$apply(function(){a.hideMenu()})},l=function(b){27===b.keyCode&&a.hideMenu()},m=function(a){var b=function(b){return b.focus(),a.preventDefault(),!1};if(9===a.keyCode){var c,e,f=d[0].querySelectorAll("button:not(.ng-hide)");f.length>0&&(c=f[0],e=f[f.length-1],a.target!==e||a.shiftKey?a.target===c&&a.shiftKey&&b(e):b(c))}};(void 0===a.autoHide||void 0===a.autoHide)&&(a.autoHide=!0),a.autoHide&&angular.element(c).on("resize",k),a.$on("$destroy",function(){angular.element(document).off("click touchstart",k)}),a.$on("$destroy",function(){angular.element(c).off("resize",k)}),i&&a.$on("$destroy",i.grid.api.core.on.scrollBegin(a,k)),a.$on("$destroy",a.$on(f.events.ITEM_DRAGGING,k))}}}]).directive("uiGridMenuItem",["gridUtil","$compile","i18nService",function(a,b,c){return{priority:0,scope:{name:"=",active:"=",action:"=",icon:"=",shown:"=",context:"=",templateUrl:"=",leaveOpen:"=",screenReaderOnly:"="},require:["?^uiGrid"],templateUrl:"ui-grid/uiGridMenuItem",replace:!1,compile:function(){return{pre:function(c,d){c.templateUrl&&a.getTemplate(c.templateUrl).then(function(a){var e=angular.element(a),f=b(e)(c);d.replaceWith(f)})},post:function(b,d,e,f){var g=f[0];(void 0===b.shown||null===b.shown)&&(b.shown=function(){return!0}),b.itemShown=function(){var a={};return b.context&&(a.context=b.context),void 0!==g&&g&&(a.grid=g.grid),b.shown.call(a)},b.itemAction=function(c,e){if(c.stopPropagation(),"function"==typeof b.action){var f={};b.context&&(f.context=b.context),void 0!==g&&g&&(f.grid=g.grid),b.action.call(f,c,e),b.leaveOpen?a.focus.bySelector(angular.element(a.closestElm(d,".ui-grid-menu-items")),"button[type=button]",!0):b.$emit("hide-menu")}},b.i18n=c.get()}}}}}])}(),function(){"use strict";var a=angular.module("ui.grid");angular.forEach([{tag:"Src",method:"attr"},{tag:"Text",method:"text"},{tag:"Href",method:"attr"},{tag:"Class",method:"addClass"},{tag:"Html",method:"html"},{tag:"Alt",method:"attr"},{tag:"Style",method:"css"},{tag:"Value",method:"attr"},{tag:"Id",method:"attr"},{tag:"Id",directiveName:"IdGrid",method:"attr",appendGridId:!0},{tag:"Title",method:"attr"},{tag:"Label",method:"attr",aria:!0},{tag:"Labelledby",method:"attr",aria:!0},{tag:"Labelledby",directiveName:"LabelledbyGrid",appendGridId:!0,method:"attr",aria:!0},{tag:"Describedby",method:"attr",aria:!0},{tag:"Describedby",directiveName:"DescribedbyGrid",appendGridId:!0,method:"attr",aria:!0}],function(b){var c="uiGridOneBind",d=(b.aria?c+"Aria":c)+(b.directiveName?b.directiveName:b.tag);a.directive(d,["gridUtil",function(a){return{restrict:"A",require:["?uiGrid","?^uiGrid"],link:function(c,e,f,g){var h=function(b){var e;if(c.grid)e=c.grid;else if(c.col&&c.col.grid)e=c.col.grid;else if(!g.some(function(a){return a&&a.grid?(e=a.grid,!0):void 0}))throw a.logError("["+d+"] A valid grid could not be found to bind id. Are you using this directive within the correct scope? Trying to generate id: [gridID]-"+b),new Error("No valid grid could be found");if(e){new RegExp(e.id.toString()).test(b)||(b=e.id.toString()+"-"+b)}return b},i=c.$watch(f[d],function(a){if(a){if(b.appendGridId){var c=null;angular.forEach(a.split(" "),function(a){c=(c?c+" ":"")+h(a)}),a=c}switch(b.method){case"attr":b.aria?e[b.method]("aria-"+b.tag.toLowerCase(),a):e[b.method](b.tag.toLowerCase(),a);break;case"addClass":if(angular.isObject(a)&&!angular.isArray(a)){var d=[],f=!1;if(angular.forEach(a,function(a,b){null!==a&&void 0!==a&&(f=!0,a&&d.push(b))}),!f)return;a=d}if(!a)return;e.addClass(angular.isArray(a)?a.join(" "):a);break;default:e[b.method](a)}i()}},!0)}}}])})}(),function(){"use strict";var a=angular.module("ui.grid");a.directive("uiGridRenderContainer",["$timeout","$document","uiGridConstants","gridUtil","ScrollEvent",function(a,b,c,d,e){return{replace:!0,transclude:!0,templateUrl:"ui-grid/uiGridRenderContainer",require:["^uiGrid","uiGridRenderContainer"],scope:{containerId:"=",rowContainerName:"=",colContainerName:"=",bindScrollHorizontal:"=",bindScrollVertical:"=",enableVerticalScrollbar:"=",enableHorizontalScrollbar:"="},controller:"uiGridRenderContainer as RenderContainer",compile:function(){return{pre:function(a,b,c,d){var e=d[0],f=d[1],g=a.grid=e.grid;if(!a.rowContainerName)throw"No row render container name specified";if(!a.colContainerName)throw"No column render container name specified";if(!g.renderContainers[a.rowContainerName])throw"Row render container '"+a.rowContainerName+"' is not registered.";if(!g.renderContainers[a.colContainerName])throw"Column render container '"+a.colContainerName+"' is not registered.";var h=a.rowContainer=g.renderContainers[a.rowContainerName],i=a.colContainer=g.renderContainers[a.colContainerName];f.containerId=a.containerId,f.rowContainer=h,f.colContainer=i},post:function(a,b,c,f){function g(){var b="",c=l.canvasWidth,d=l.getViewportWidth(),e=k.getCanvasHeight(),f=k.getViewportHeight();l.needsHScrollbarPlaceholder()&&(f-=j.scrollbarHeight);var g,i;return g=i=l.getHeaderViewportWidth(),b+="\n .grid"+h.grid.id+" .ui-grid-render-container-"+a.containerId+" .ui-grid-canvas { width: "+c+"px; height: "+e+"px; }",b+="\n .grid"+h.grid.id+" .ui-grid-render-container-"+a.containerId+" .ui-grid-header-canvas { width: "+(c+j.scrollbarWidth)+"px; }",b+=o.explicitHeaderCanvasHeight?"\n .grid"+h.grid.id+" .ui-grid-render-container-"+a.containerId+" .ui-grid-header-canvas { height: "+o.explicitHeaderCanvasHeight+"px; }":"\n .grid"+h.grid.id+" .ui-grid-render-container-"+a.containerId+" .ui-grid-header-canvas { height: inherit; }",b+="\n .grid"+h.grid.id+" .ui-grid-render-container-"+a.containerId+" .ui-grid-viewport { width: "+d+"px; height: "+f+"px; }",b+="\n .grid"+h.grid.id+" .ui-grid-render-container-"+a.containerId+" .ui-grid-header-viewport { width: "+g+"px; }",b+="\n .grid"+h.grid.id+" .ui-grid-render-container-"+a.containerId+" .ui-grid-footer-canvas { width: "+(c+j.scrollbarWidth)+"px; }",b+="\n .grid"+h.grid.id+" .ui-grid-render-container-"+a.containerId+" .ui-grid-footer-viewport { width: "+i+"px; }"}var h=f[0],i=f[1],j=h.grid,k=i.rowContainer,l=i.colContainer,m=null,n=null,o=j.renderContainers[a.containerId];b.addClass("ui-grid-render-container-"+a.containerId),d.on.mousewheel(b,function(a){var b=new e(j,k,l,e.Sources.RenderContainerMouseWheel);if(0!==a.deltaY){var c=-1*a.deltaY*a.deltaFactor;m=i.viewport[0].scrollTop,b.verticalScrollLength=k.getVerticalScrollLength();var f=(m+c)/b.verticalScrollLength;f>=1&&m<b.verticalScrollLength&&(i.viewport[0].scrollTop=b.verticalScrollLength),0>f?f=0:f>1&&(f=1),b.y={percentage:f,pixels:c}}if(0!==a.deltaX){var g=a.deltaX*a.deltaFactor;n=d.normalizeScrollLeft(i.viewport,j),b.horizontalScrollLength=l.getCanvasWidth()-l.getViewportWidth();var h=(n+g)/b.horizontalScrollLength;0>h?h=0:h>1&&(h=1),b.x={percentage:h,pixels:g}}0!==a.deltaY&&(b.atTop(m)||b.atBottom(m))||0!==a.deltaX&&(b.atLeft(n)||b.atRight(n))||(a.preventDefault(),a.stopPropagation(),b.fireThrottledScrollingEvent("",b))}),b.bind("$destroy",function(){b.unbind("keydown"),["touchstart","touchmove","touchend","keydown","wheel","mousewheel","DomMouseScroll","MozMousePixelScroll"].forEach(function(a){b.unbind(a)})}),h.grid.registerStyleComputation({priority:6,func:g})}}}}}]),a.controller("uiGridRenderContainer",["$scope","gridUtil",function(a,b){}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridRow",["gridUtil",function(a){return{replace:!0,require:["^uiGrid","^uiGridRenderContainer"],scope:{row:"=uiGridRow",rowRenderIndex:"="},compile:function(){return{pre:function(a,b,c,d){function e(){a.row.getRowTemplateFn.then(function(c){var d=a.$new();c(d,function(a,c){h&&(h.remove(),i.$destroy()),b.empty().append(a),h=a,i=d})})}var f=d[0],g=d[1];f.grid,a.grid=f.grid,a.colContainer=g.colContainer;var h,i;e(),a.$watch("row.getRowTemplateFn",function(a,b){a!==b&&e()})},post:function(a,b,c,d){}}}}}])}(),function(){angular.module("ui.grid").directive("uiGridStyle",["gridUtil","$interpolate",function(a,b){return{link:function(a,c,d,e){var f=b(c.text(),!0);f&&a.$watch(f,function(a){c.text(a)})}}}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridViewport",["gridUtil","ScrollEvent","uiGridConstants","$log",function(a,b,c,d){return{replace:!0,scope:{},controllerAs:"Viewport",templateUrl:"ui-grid/uiGridViewport",require:["^uiGrid","^uiGridRenderContainer"],link:function(c,d,e,f){function g(e){var f=d[0].scrollTop,g=a.normalizeScrollLeft(d,p),h=n.scrollVertical(f),i=o.scrollHorizontal(g),j=new b(p,n,o,b.Sources.ViewPortScroll);j.newScrollLeft=g,j.newScrollTop=f,i>-1&&(j.x={percentage:i}),h>-1&&(j.y={percentage:h}),p.scrollContainers(c.$parent.containerId,j)}function h(a){m.prevScrollArgs=a;var b=a.getNewScrollTop(n,m.viewport);d[0].scrollTop=b}function i(b){m.prevScrollArgs=b;var c=b.getNewScrollLeft(o,m.viewport);d[0].scrollLeft=a.denormalizeScrollLeft(m.viewport,c,p)}function j(b){var c=b.getNewScrollLeft(o,m.viewport);m.headerViewport&&(m.headerViewport.scrollLeft=a.denormalizeScrollLeft(m.viewport,c,p))}function k(b){var c=b.getNewScrollLeft(o,m.viewport);m.footerViewport&&(m.footerViewport.scrollLeft=a.denormalizeScrollLeft(m.viewport,c,p))}var l=f[0],m=f[1];c.containerCtrl=m;var n=m.rowContainer,o=m.colContainer,p=l.grid;c.grid=l.grid,c.rowContainer=m.rowContainer,c.colContainer=m.colContainer,m.viewport=d,d.on("scroll",g),c.$parent.bindScrollVertical&&p.addVerticalScrollSync(c.$parent.containerId,h),c.$parent.bindScrollHorizontal&&(p.addHorizontalScrollSync(c.$parent.containerId,i),p.addHorizontalScrollSync(c.$parent.containerId+"header",j),p.addHorizontalScrollSync(c.$parent.containerId+"footer",k))},controller:["$scope",function(a){this.rowStyle=function(b){var c=a.rowContainer,d=a.colContainer,e={};if(0===b&&0!==c.currentTopRow){var f=c.currentTopRow*c.grid.options.rowHeight;e["margin-top"]=f+"px"}return 0!==d.currentFirstColumn&&(d.grid.isRTL()?e["margin-right"]=d.columnOffset+"px":e["margin-left"]=d.columnOffset+"px"),e}}]}}])}(),function(){angular.module("ui.grid").directive("uiGridVisible",function(){return function(a,b,c){a.$watch(c.uiGridVisible,function(a){b[a?"removeClass":"addClass"]("ui-grid-invisible")})}})}(),function(){"use strict";function a(a,b,c,d,e,f){return{templateUrl:"ui-grid/ui-grid",scope:{uiGrid:"="},replace:!0,transclude:!0,controller:"uiGridController",compile:function(){return{post:function(a,b,g,h){function i(){b[0].offsetWidth<=0&&p>q?(setTimeout(i,o),q++):c(k)}function k(){n.gridWidth=a.gridWidth=e.elementWidth(b),n.canvasWidth=h.grid.gridWidth,n.gridHeight=a.gridHeight=e.elementHeight(b),n.gridHeight<=n.options.rowHeight&&n.options.enableMinHeightCheck&&l(),n.refreshCanvas(!0)}function l(){var c=n.options.minRowsToShow*n.options.rowHeight,d=n.options.showHeader?n.options.headerRowHeight:0,g=n.calcFooterHeight(),h=0;n.options.enableHorizontalScrollbar===f.scrollbars.ALWAYS&&(h=e.getScrollbarWidth());var i=0;if(angular.forEach(n.options.columnDefs,function(a){a.hasOwnProperty("filter")?1>i&&(i=1):a.hasOwnProperty("filters")&&i<a.filters.length&&(i=a.filters.length)}),n.options.enableFiltering&&!i){n.options.columnDefs.length&&n.options.columnDefs.every(function(a){return!1===a.enableFiltering})||(i=1)}var k=i*d,l=d+c+g+h+k;b.css("height",l+"px"),n.gridHeight=a.gridHeight=e.elementHeight(b)}function m(c){n.gridWidth=a.gridWidth=e.elementWidth(b),n.gridHeight=a.gridHeight=e.elementHeight(b),n.refreshCanvas(!0)}var n=h.grid;h.scrollbars=[],n.element=b;var o=100,p=20,q=0;(function(){angular.element(d).on("resize",m),b.on("$destroy",function(){angular.element(d).off("resize",m)}),a.$watch(function(){return n.hasLeftContainer()},function(a,b){a!==b&&n.refreshCanvas(!0)}),a.$watch(function(){return n.hasRightContainer()},function(a,b){a!==b&&n.refreshCanvas(!0)})})(),k(),n.renderingComplete(),i()}}}}}a.$inject=["a","b","c","d","e","f"],angular.module("ui.grid").controller("uiGridController",["$scope","$element","$attrs","gridUtil","$q","uiGridConstants","$templateCache","gridClassFactory","$timeout","$parse","$compile",function(a,b,c,d,e,f,g,h,i,j,k){function l(b,c){b&&b!==c&&(n.grid.options.columnDefs=a.uiGrid.columnDefs,n.grid.buildColumns({orderByColumnDefs:!0}).then(function(){n.grid.preCompileCellTemplates(),n.grid.callDataChangeCallbacks(f.dataChange.COLUMN)}))}function m(b){var d=[];if(n.grid.options.fastWatch&&(b=angular.isString(a.uiGrid.data)?n.grid.appScope[a.uiGrid.data]:a.uiGrid.data),p=b,b){var g=n.grid.columns.length>(n.grid.rowHeaderColumns?n.grid.rowHeaderColumns.length:0);!g&&!c.uiGridColumns&&0===n.grid.options.columnDefs.length&&b.length>0&&n.grid.buildColumnDefsFromData(b),!g&&(n.grid.options.columnDefs.length>0||b.length>0)&&d.push(n.grid.buildColumns().then(function(){n.grid.preCompileCellTemplates()})),e.all(d).then(function(){n.grid.modifyRows(p).then(function(){n.grid.redrawInPlace(!0),a.$evalAsync(function(){n.grid.refreshCanvas(!0),n.grid.callDataChangeCallbacks(f.dataChange.ROW)})})})}}var n=this;n.grid=h.createGrid(a.uiGrid),n.grid.appScope=n.grid.appScope||a.$parent,b.addClass("grid"+n.grid.id),n.grid.rtl="rtl"===d.getStyles(b[0]).direction,a.grid=n.grid,c.uiGridColumns&&c.$observe("uiGridColumns",function(a){n.grid.options.columnDefs=a,n.grid.buildColumns().then(function(){n.grid.preCompileCellTemplates(),n.grid.refreshCanvas(!0)})});var o=[];n.grid.options.fastWatch?(n.uiGrid=a.uiGrid,angular.isString(a.uiGrid.data)?(o.push(a.$parent.$watch(a.uiGrid.data,m)),o.push(a.$parent.$watch(function(){return n.grid.appScope[a.uiGrid.data]?n.grid.appScope[a.uiGrid.data].length:void 0},m))):(o.push(a.$parent.$watch(function(){return a.uiGrid.data},m)),o.push(a.$parent.$watch(function(){return a.uiGrid.data.length},function(){m(a.uiGrid.data)}))),o.push(a.$parent.$watch(function(){return a.uiGrid.columnDefs},l)),o.push(a.$parent.$watch(function(){return a.uiGrid.columnDefs.length},function(){l(a.uiGrid.columnDefs)}))):(angular.isString(a.uiGrid.data)?o.push(a.$parent.$watchCollection(a.uiGrid.data,m)):o.push(a.$parent.$watchCollection(function(){return a.uiGrid.data},m)),o.push(a.$parent.$watchCollection(function(){return a.uiGrid.columnDefs},l)));var p,q=a.$watch(function(){return n.grid.styleComputations},function(){n.grid.refreshCanvas(!0)});a.$on("$destroy",function(){o.forEach(function(a){a()}),q()}),n.fireEvent=function(b,c){(void 0===c||void 0===c)&&(c={}),(void 0===c.grid||void 0===c.grid)&&(c.grid=n.grid),a.$broadcast(b,c)},n.innerCompile=function(b){k(b)(a)}}]),angular.module("ui.grid").directive("uiGrid",a),a.$inject=["$compile","$templateCache","$timeout","$window","gridUtil","uiGridConstants"]}(),function(){"use strict";angular.module("ui.grid").directive("uiGridPinnedContainer",["gridUtil",function(a){return{restrict:"EA",replace:!0,template:'<div class="ui-grid-pinned-container"><div ui-grid-render-container container-id="side" row-container-name="\'body\'" col-container-name="side" bind-scroll-vertical="true" class="{{ side }} ui-grid-render-container-{{ side }}"></div></div>',scope:{side:"=uiGridPinnedContainer"},require:"^uiGrid",compile:function(){return{post:function(a,b,c,d){function e(){var a=this,b=0;a.visibleColumnCache.forEach(function(a){b+=a.drawnWidth});var c=a.getViewportAdjustment();return b+=c.width}function f(){if("left"===a.side||"right"===a.side){for(var b=h.renderContainers[a.side].visibleColumnCache,c=0,d=0;d<b.length;d++){var e=b[d];c+=e.drawnWidth||e.width||0}return c}}function g(){var c="";return("left"===a.side||"right"===a.side)&&(i=f(),b.attr("style",null),c+=".grid"+h.id+" .ui-grid-pinned-container-"+a.side+", .grid"+h.id+" .ui-grid-pinned-container-"+a.side+" .ui-grid-render-container-"+a.side+" .ui-grid-viewport { width: "+i+"px; } "),c}var h=d.grid,i=0;b.addClass("ui-grid-pinned-container-"+a.side),("left"===a.side||"right"===a.side)&&(h.renderContainers[a.side].getViewportWidth=e),h.renderContainers.body.registerViewportAdjuster(function(b){return i=f(),b.width-=i,b.side=a.side,b}),h.registerStyleComputation({priority:15,func:g})}}}}}])}(),function(){angular.module("ui.grid").factory("Grid",["$q","$compile","$parse","gridUtil","uiGridConstants","GridOptions","GridColumn","GridRow","GridApi","rowSorter","rowSearcher","GridRenderContainer","$timeout","ScrollEvent",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){function o(){}var p=function(a){function b(a){g.isScrollingVertically=!1,g.api.core.raise.scrollEnd(a),g.scrollDirection=e.scrollDirection.NONE}function c(a){g.isScrollingHorizontally=!1,g.api.core.raise.scrollEnd(a),g.scrollDirection=e.scrollDirection.NONE}var g=this;if(void 0===a||void 0===a.id||!a.id)throw new Error("No ID provided. An ID must be given when creating a grid.");if(!/^[_a-zA-Z0-9-]+$/.test(a.id))throw new Error("Grid id '"+a.id+'" is invalid. It must follow CSS selector syntax rules.');g.id=a.id,delete a.id,g.options=f.initialize(a),g.appScope=g.options.appScopeProvider,g.headerHeight=g.options.headerRowHeight,g.footerHeight=g.calcFooterHeight(),g.columnFooterHeight=g.calcColumnFooterHeight(),g.rtl=!1,g.gridHeight=0,g.gridWidth=0,g.columnBuilders=[],g.rowBuilders=[],g.rowsProcessors=[],g.columnsProcessors=[],g.styleComputations=[],g.viewportAdjusters=[],g.rowHeaderColumns=[],
g.dataChangeCallbacks={},g.verticalScrollSyncCallBackFns={},g.horizontalScrollSyncCallBackFns={},g.renderContainers={},g.renderContainers.body=new l("body",g),g.cellValueGetterCache={},g.getRowTemplateFn=null,g.rows=[],g.columns=[],g.isScrollingVertically=!1,g.isScrollingHorizontally=!1,g.scrollDirection=e.scrollDirection.NONE,g.disableScrolling=!1;var h=d.debounce(b,g.options.scrollDebounce),k=d.debounce(b,0),m=d.debounce(c,g.options.scrollDebounce),n=d.debounce(c,0);g.flagScrollingVertically=function(a){g.isScrollingVertically||g.isScrollingHorizontally||g.api.core.raise.scrollBegin(a),g.isScrollingVertically=!0,0!==g.options.scrollDebounce&&a.withDelay?h(a):k(a)},g.flagScrollingHorizontally=function(a){g.isScrollingVertically||g.isScrollingHorizontally||g.api.core.raise.scrollBegin(a),g.isScrollingHorizontally=!0,0!==g.options.scrollDebounce&&a.withDelay?m(a):n(a)},g.scrollbarHeight=0,g.scrollbarWidth=0,g.options.enableHorizontalScrollbar===e.scrollbars.ALWAYS&&(g.scrollbarHeight=d.getScrollbarWidth()),g.options.enableVerticalScrollbar===e.scrollbars.ALWAYS&&(g.scrollbarWidth=d.getScrollbarWidth()),g.api=new i(g),g.api.registerMethod("core","refresh",this.refresh),g.api.registerMethod("core","queueGridRefresh",this.queueGridRefresh),g.api.registerMethod("core","refreshRows",this.refreshRows),g.api.registerMethod("core","queueRefresh",this.queueRefresh),g.api.registerMethod("core","handleWindowResize",this.handleWindowResize),g.api.registerMethod("core","addRowHeaderColumn",this.addRowHeaderColumn),g.api.registerMethod("core","scrollToIfNecessary",function(a,b){return g.scrollToIfNecessary(a,b)}),g.api.registerMethod("core","scrollTo",function(a,b){return g.scrollTo(a,b)}),g.api.registerMethod("core","registerRowsProcessor",this.registerRowsProcessor),g.api.registerMethod("core","registerColumnsProcessor",this.registerColumnsProcessor),g.api.registerMethod("core","sortHandleNulls",j.handleNulls),g.api.registerEvent("core","sortChanged"),g.api.registerEvent("core","columnVisibilityChanged"),g.api.registerMethod("core","notifyDataChange",this.notifyDataChange),g.api.registerMethod("core","clearAllFilters",this.clearAllFilters),g.registerDataChangeCallback(g.columnRefreshCallback,[e.dataChange.COLUMN]),g.registerDataChangeCallback(g.processRowsCallback,[e.dataChange.EDIT]),g.registerDataChangeCallback(g.updateFooterHeightCallback,[e.dataChange.OPTIONS]),g.registerStyleComputation({priority:10,func:g.getFooterStyles})};p.prototype.calcFooterHeight=function(){if(!this.hasFooter())return 0;var a=0;return this.options.showGridFooter&&(a+=this.options.gridFooterHeight),a+=this.calcColumnFooterHeight()},p.prototype.calcColumnFooterHeight=function(){var a=0;return this.options.showColumnFooter&&(a+=this.options.columnFooterHeight),a},p.prototype.getFooterStyles=function(){var a=".grid"+this.id+" .ui-grid-footer-aggregates-row { height: "+this.options.columnFooterHeight+"px; }";return a+=" .grid"+this.id+" .ui-grid-footer-info { height: "+this.options.gridFooterHeight+"px; }"},p.prototype.hasFooter=function(){return this.options.showGridFooter||this.options.showColumnFooter},p.prototype.isRTL=function(){return this.rtl},p.prototype.registerColumnBuilder=function(a){this.columnBuilders.push(a)},p.prototype.buildColumnDefsFromData=function(a){this.options.columnDefs=d.getColumnsFromData(a,this.options.excludeProperties)},p.prototype.registerRowBuilder=function(a){this.rowBuilders.push(a)},p.prototype.registerDataChangeCallback=function(a,b,c){var f=d.nextUid();b||(b=[e.dataChange.ALL]),Array.isArray(b)||d.logError("Expected types to be an array or null in registerDataChangeCallback, value passed was: "+b),this.dataChangeCallbacks[f]={callback:a,types:b,_this:c};var g=this;return function(){delete g.dataChangeCallbacks[f]}},p.prototype.callDataChangeCallbacks=function(a,b){angular.forEach(this.dataChangeCallbacks,function(b,c){(-1!==b.types.indexOf(e.dataChange.ALL)||-1!==b.types.indexOf(a)||a===e.dataChange.ALL)&&(b._this?b.callback.apply(b._this,this):b.callback(this))},this)},p.prototype.notifyDataChange=function(a){var b=e.dataChange;a===b.ALL||a===b.COLUMN||a===b.EDIT||a===b.ROW||a===b.OPTIONS?this.callDataChangeCallbacks(a):d.logError("Notified of a data change, but the type was not recognised, so no action taken, type was: "+a)},p.prototype.columnRefreshCallback=function(a){a.buildColumns(),a.queueGridRefresh()},p.prototype.processRowsCallback=function(a){a.queueGridRefresh()},p.prototype.updateFooterHeightCallback=function(a){a.footerHeight=a.calcFooterHeight(),a.columnFooterHeight=a.calcColumnFooterHeight()},p.prototype.getColumn=function(a){var b=this.columns.filter(function(b){return b.colDef.name===a});return b.length>0?b[0]:null},p.prototype.getColDef=function(a){var b=this.options.columnDefs.filter(function(b){return b.name===a});return b.length>0?b[0]:null},p.prototype.assignTypes=function(){var a=this;a.options.columnDefs.forEach(function(b,c){if(!b.type){var e=new g(b,c,a),f=a.rows.length>0?a.rows[0]:null;b.type=f?d.guessType(a.getCellValue(f,e)):"string"}})},p.prototype.isRowHeaderColumn=function(a){return-1!==this.rowHeaderColumns.indexOf(a)},p.prototype.addRowHeaderColumn=function(a,b){var c=this;void 0===b&&(b=0);var e=new g(a,d.nextUid(),c);e.isRowHeader=!0,c.isRTL()?(c.createRightContainer(),e.renderContainer="right"):(c.createLeftContainer(),e.renderContainer="left"),c.columnBuilders[0](a,e,c.options).then(function(){e.enableFiltering=!1,e.enableSorting=!1,e.enableHiding=!1,e.headerPriority=b,c.rowHeaderColumns.push(e),c.rowHeaderColumns=c.rowHeaderColumns.sort(function(a,b){return a.headerPriority-b.headerPriority}),c.buildColumns().then(function(){c.preCompileCellTemplates(),c.queueGridRefresh()})})},p.prototype.getOnlyDataColumns=function(){var a=this,b=[];return a.columns.forEach(function(c){-1===a.rowHeaderColumns.indexOf(c)&&b.push(c)}),b},p.prototype.buildColumns=function(b){var c={orderByColumnDefs:!1};angular.extend(c,b);var e,f=this,h=[],i=f.rowHeaderColumns.length;for(e=0;e<f.columns.length;e++)f.getColDef(f.columns[e].name)||(f.columns.splice(e,1),e--);for(var j=f.rowHeaderColumns.length-1;j>=0;j--)f.columns.unshift(f.rowHeaderColumns[j]);if(f.options.columnDefs.forEach(function(a,b){f.preprocessColDef(a);var c=f.getColumn(a.name);c?c.updateColumnDef(a,!1):(c=new g(a,d.nextUid(),f),f.columns.splice(b+i,0,c)),f.columnBuilders.forEach(function(b){h.push(b.call(f,a,c,f.options))})}),c.orderByColumnDefs){var k=f.columns.slice(0),l=Math.min(f.options.columnDefs.length,f.columns.length);for(e=0;l>e;e++)f.columns[e+i].name!==f.options.columnDefs[e].name?k[e+i]=f.getColumn(f.options.columnDefs[e].name):k[e+i]=f.columns[e+i];f.columns.length=0,Array.prototype.splice.apply(f.columns,[0,0].concat(k))}return a.all(h).then(function(){f.rows.length>0&&f.assignTypes()})},p.prototype.preCompileCellTemplate=function(a){var c=this,d=a.cellTemplate.replace(e.MODEL_COL_FIELD,c.getQualifiedColField(a));d=d.replace(e.COL_FIELD,"grid.getCellValue(row, col)");var f=b(d);a.compiledElementFn=f,a.compiledElementFnDefer&&a.compiledElementFnDefer.resolve(a.compiledElementFn)},p.prototype.preCompileCellTemplates=function(){var a=this;a.columns.forEach(function(b){b.cellTemplate?a.preCompileCellTemplate(b):b.cellTemplatePromise&&b.cellTemplatePromise.then(function(){a.preCompileCellTemplate(b)})})},p.prototype.getQualifiedColField=function(a){var b="row.entity";return a.field===e.ENTITY_BINDING?b:d.preEval(b+"."+a.field)},p.prototype.createLeftContainer=function(){this.hasLeftContainer()||(this.renderContainers.left=new l("left",this,{disableColumnOffset:!0}))},p.prototype.createRightContainer=function(){this.hasRightContainer()||(this.renderContainers.right=new l("right",this,{disableColumnOffset:!0}))},p.prototype.hasLeftContainer=function(){return void 0!==this.renderContainers.left},p.prototype.hasRightContainer=function(){return void 0!==this.renderContainers.right},p.prototype.preprocessColDef=function(a){var b=this;if(!a.field&&!a.name)throw new Error("colDef.name or colDef.field property is required");if(void 0===a.name&&void 0!==a.field){for(var c=a.field,d=2;b.getColumn(c);)c=a.field+d.toString(),d++;a.name=c}},p.prototype.newInN=function(a,b,c,d){for(var e=this,f=[],g=0;g<b.length;g++){for(var h=d?b[g][d]:b[g],i=!1,j=0;j<a.length;j++){var k=c?a[j][c]:a[j];if(e.options.rowEquality(h,k)){i=!0;break}}i||f.push(h)}return f},p.prototype.getRow=function(a,b){var c=this;b=void 0===b?c.rows:b;var d=b.filter(function(b){return c.options.rowEquality(b.entity,a)});return d.length>0?d[0]:null},p.prototype.modifyRows=function(b){var c=this,d=c.rows.slice(0),e=c.rowHashMap||c.createRowHashMap();c.rowHashMap=c.createRowHashMap(),c.rows.length=0,b.forEach(function(a,b){var f;f=c.options.enableRowHashing?e.get(a):c.getRow(a,d),f||(f=c.processRowBuilders(new h(a,b,c))),c.rows.push(f),c.rowHashMap.put(a,f)}),c.assignTypes();var f=a.when(c.processRowsProcessors(c.rows)).then(function(a){return c.setVisibleRows(a)}),g=a.when(c.processColumnsProcessors(c.columns)).then(function(a){return c.setVisibleColumns(a)});return a.all([f,g])},p.prototype.addRows=function(a){for(var b=this,c=b.rows.length,d=0;d<a.length;d++){var e=b.processRowBuilders(new h(a[d],d+c,b));if(b.options.enableRowHashing){var f=b.rowHashMap.get(e.entity);f&&(f.row=e)}b.rows.push(e)}},p.prototype.processRowBuilders=function(a){var b=this;return b.rowBuilders.forEach(function(c){c.call(b,a,b.options)}),a},p.prototype.registerStyleComputation=function(a){this.styleComputations.push(a)},p.prototype.registerRowsProcessor=function(a,b){if(!angular.isFunction(a))throw"Attempt to register non-function rows processor: "+a;this.rowsProcessors.push({processor:a,priority:b}),this.rowsProcessors.sort(function(a,b){return a.priority-b.priority})},p.prototype.removeRowsProcessor=function(a){var b=-1;this.rowsProcessors.forEach(function(c,d){c.processor===a&&(b=d)}),-1!==b&&this.rowsProcessors.splice(b,1)},p.prototype.processRowsProcessors=function(b){function c(b,e){var g=d.rowsProcessors[b].processor;return a.when(g.call(d,e,d.columns)).then(function(a){if(!a)throw"Processor at index "+b+" did not return a set of renderable rows";if(!angular.isArray(a))throw"Processor at index "+b+" did not return an array";return b++,b<=d.rowsProcessors.length-1?c(b,a):void f.resolve(a)})}var d=this,e=b.slice(0);if(0===d.rowsProcessors.length)return a.when(e);var f=a.defer();return c(0,e),f.promise},p.prototype.setVisibleRows=function(a){var b=this;for(var c in b.renderContainers){var d=b.renderContainers[c];d.canvasHeightShouldUpdate=!0,void 0===d.visibleRowCache?d.visibleRowCache=[]:d.visibleRowCache.length=0}for(var e=0;e<a.length;e++){var f=a[e],g=void 0!==f.renderContainer&&f.renderContainer?f.renderContainer:"body";f.visible&&b.renderContainers[g].visibleRowCache.push(f)}b.api.core.raise.rowsVisibleChanged(this.api),b.api.core.raise.rowsRendered(this.api)},p.prototype.registerColumnsProcessor=function(a,b){if(!angular.isFunction(a))throw"Attempt to register non-function rows processor: "+a;this.columnsProcessors.push({processor:a,priority:b}),this.columnsProcessors.sort(function(a,b){return a.priority-b.priority})},p.prototype.removeColumnsProcessor=function(a){var b=this.columnsProcessors.indexOf(a);void 0!==b&&void 0!==b&&this.columnsProcessors.splice(b,1)},p.prototype.processColumnsProcessors=function(b){function c(b,g){var h=d.columnsProcessors[b].processor;return a.when(h.call(d,g,d.rows)).then(function(a){if(!a)throw"Processor at index "+b+" did not return a set of renderable rows";if(!angular.isArray(a))throw"Processor at index "+b+" did not return an array";return b++,b<=d.columnsProcessors.length-1?c(b,e):void f.resolve(e)})}var d=this,e=b.slice(0);if(0===d.columnsProcessors.length)return a.when(e);var f=a.defer();return c(0,e),f.promise},p.prototype.setVisibleColumns=function(a){var b=this;for(var c in b.renderContainers){b.renderContainers[c].visibleColumnCache.length=0}for(var e=0;e<a.length;e++){var f=a[e];f.visible&&(void 0!==f.renderContainer&&f.renderContainer?b.renderContainers[f.renderContainer].visibleColumnCache.push(f):b.renderContainers.body.visibleColumnCache.push(f))}},p.prototype.handleWindowResize=function(a){var b=this;return b.gridWidth=d.elementWidth(b.element),b.gridHeight=d.elementHeight(b.element),b.queueRefresh()},p.prototype.queueRefresh=function(){var a=this;return a.refreshCanceller&&m.cancel(a.refreshCanceller),a.refreshCanceller=m(function(){a.refreshCanvas(!0)}),a.refreshCanceller.then(function(){a.refreshCanceller=null}),a.refreshCanceller},p.prototype.queueGridRefresh=function(){var a=this;return a.gridRefreshCanceller&&m.cancel(a.gridRefreshCanceller),a.gridRefreshCanceller=m(function(){a.refresh(!0)}),a.gridRefreshCanceller.then(function(){a.gridRefreshCanceller=null}),a.gridRefreshCanceller},p.prototype.updateCanvasHeight=function(){var a=this;for(var b in a.renderContainers)if(a.renderContainers.hasOwnProperty(b)){var c=a.renderContainers[b];c.canvasHeightShouldUpdate=!0}},p.prototype.buildStyles=function(){var a=this;a.customStyles="",a.styleComputations.sort(function(a,b){return null===a.priority?1:null===b.priority?-1:null===a.priority&&null===b.priority?0:a.priority-b.priority}).forEach(function(b){var c=b.func.call(a);angular.isString(c)&&(a.customStyles+="\n"+c)})},p.prototype.minColumnsToRender=function(){var a=this,b=this.getViewportWidth(),c=0,d=0;return a.columns.forEach(function(e,f){if(b>d)d+=e.drawnWidth,c++;else{for(var g=0,h=f;h>=f-c;h--)g+=a.columns[h].drawnWidth;b>g&&c++}}),c},p.prototype.getBodyHeight=function(){return this.getViewportHeight()},p.prototype.getViewportHeight=function(){var b=this.gridHeight-this.headerHeight-this.footerHeight;return b+=this.getViewportAdjustment().height},p.prototype.getViewportWidth=function(){var b=this.gridWidth;return b+=this.getViewportAdjustment().width},p.prototype.getHeaderViewportWidth=function(){return this.getViewportWidth()},p.prototype.addVerticalScrollSync=function(a,b){this.verticalScrollSyncCallBackFns[a]=b},p.prototype.addHorizontalScrollSync=function(a,b){this.horizontalScrollSyncCallBackFns[a]=b},p.prototype.scrollContainers=function(a,b){if(b.y){var c=["body","left","right"];this.flagScrollingVertically(b),"body"===a?c=["left","right"]:"left"===a?c=["body","right"]:"right"===a&&(c=["body","left"]);for(var d=0;d<c.length;d++){var e=c[d];this.verticalScrollSyncCallBackFns[e]&&this.verticalScrollSyncCallBackFns[e](b)}}if(b.x){var f=["body","bodyheader","bodyfooter"];this.flagScrollingHorizontally(b),"body"===a&&(f=["bodyheader","bodyfooter"]);for(var g=0;g<f.length;g++){var h=f[g];this.horizontalScrollSyncCallBackFns[h]&&this.horizontalScrollSyncCallBackFns[h](b)}}},p.prototype.registerViewportAdjuster=function(a){this.viewportAdjusters.push(a)},p.prototype.removeViewportAdjuster=function(a){var b=this.viewportAdjusters.indexOf(a);void 0!==b&&void 0!==b&&this.viewportAdjusters.splice(b,1)},p.prototype.getViewportAdjustment=function(){var a=this,b={height:0,width:0};return a.viewportAdjusters.forEach(function(a){b=a.call(this,b)}),b},p.prototype.getVisibleRowCount=function(){return this.renderContainers.body.visibleRowCache.length},p.prototype.getVisibleRows=function(){return this.renderContainers.body.visibleRowCache},p.prototype.getVisibleColumnCount=function(){return this.renderContainers.body.visibleColumnCache.length},p.prototype.searchRows=function(a){return k.search(this,a,this.columns)},p.prototype.sortByColumn=function(a){return j.sort(this,a,this.columns)},p.prototype.getCellValue=function(a,b){return void 0!==a.entity["$$"+b.uid]?a.entity["$$"+b.uid].rendered:this.options.flatEntityAccess&&void 0!==b.field?a.entity[b.field]:(b.cellValueGetterCache||(b.cellValueGetterCache=c(a.getEntityQualifiedColField(b))),b.cellValueGetterCache(a))},p.prototype.getCellDisplayValue=function(a,b){if(!b.cellDisplayGetterCache){var d=b.cellFilter?" | "+b.cellFilter:"";void 0!==a.entity["$$"+b.uid]?b.cellDisplayGetterCache=c(a.entity["$$"+b.uid].rendered+d):this.options.flatEntityAccess&&void 0!==b.field?b.cellDisplayGetterCache=c(a.entity[b.field]+d):b.cellDisplayGetterCache=c(a.getEntityQualifiedColField(b)+d)}return b.cellDisplayGetterCache(a)},p.prototype.getNextColumnSortPriority=function(){var a=this,b=0;return a.columns.forEach(function(a){a.sort&&void 0!==a.sort.priority&&a.sort.priority>=b&&(b=a.sort.priority+1)}),b},p.prototype.resetColumnSorting=function(a){this.columns.forEach(function(b){b===a||b.suppressRemoveSort||(b.sort={})})},p.prototype.getColumnSorting=function(){var a,b=this,c=[];return a=b.columns.slice(0),a.sort(j.prioritySort).forEach(function(a){a.sort&&void 0!==a.sort.direction&&a.sort.direction&&(a.sort.direction===e.ASC||a.sort.direction===e.DESC)&&c.push(a)}),c},p.prototype.sortColumn=function(b,c,d){var e=this,f=null;if(void 0===b||!b)throw new Error("No column parameter provided");if("boolean"==typeof c?d=c:f=c,d?void 0===b.sort.priority&&(b.sort.priority=e.getNextColumnSortPriority()):(e.resetColumnSorting(b),b.sort.priority=void 0,b.sort.priority=e.getNextColumnSortPriority()),f)b.sort.direction=f;else{var g=b.sortDirectionCycle.indexOf(b.sort.direction?b.sort.direction:null);g=(g+1)%b.sortDirectionCycle.length,b.colDef&&b.suppressRemoveSort&&!b.sortDirectionCycle[g]&&(g=(g+1)%b.sortDirectionCycle.length),b.sortDirectionCycle[g]?b.sort.direction=b.sortDirectionCycle[g]:q(b,e)}return e.api.core.raise.sortChanged(e,e.getColumnSorting()),a.when(b)};var q=function(a,b){b.columns.forEach(function(b){b.sort&&void 0!==b.sort.priority&&b.sort.priority>a.sort.priority&&(b.sort.priority-=1)}),a.sort={}};return p.prototype.renderingComplete=function(){angular.isFunction(this.options.onRegisterApi)&&this.options.onRegisterApi(this.api),this.api.core.raise.renderingComplete(this.api)},p.prototype.createRowHashMap=function(){var a=this,b=new o;return b.grid=a,b},p.prototype.refresh=function(b){var c=this,d=c.processRowsProcessors(c.rows).then(function(a){c.setVisibleRows(a)}),e=c.processColumnsProcessors(c.columns).then(function(a){c.setVisibleColumns(a)});return a.all([d,e]).then(function(){c.redrawInPlace(b),c.refreshCanvas(!0)})},p.prototype.refreshRows=function(){var a=this;return a.processRowsProcessors(a.rows).then(function(b){a.setVisibleRows(b),a.redrawInPlace(),a.refreshCanvas(!0)})},p.prototype.refreshCanvas=function(b){var c=this;b&&c.buildStyles();var e=a.defer(),f=[];for(var g in c.renderContainers)if(c.renderContainers.hasOwnProperty(g)){var h=c.renderContainers[g];if(null===h.canvasWidth||isNaN(h.canvasWidth))continue;(h.header||h.headerCanvas)&&(h.explicitHeaderHeight=h.explicitHeaderHeight||null,h.explicitHeaderCanvasHeight=h.explicitHeaderCanvasHeight||null,f.push(h))}return f.length>0?(b&&c.buildStyles(),m(function(){var a,g,h=!1,i=0,j=0,k=function(a,b){return a!==b&&(h=!0),b};for(a=0;a<f.length;a++)if(g=f[a],null!==g.canvasWidth&&!isNaN(g.canvasWidth)){if(g.header){var l=g.headerHeight=k(g.headerHeight,parseInt(d.outerElementHeight(g.header),10)),m=d.getBorderSize(g.header,"top"),n=d.getBorderSize(g.header,"bottom"),o=parseInt(l-m-n,10);o=0>o?0:o,g.innerHeaderHeight=o,!g.explicitHeaderHeight&&o>i&&(i=o)}if(g.headerCanvas){var p=g.headerCanvasHeight=k(g.headerCanvasHeight,parseInt(d.outerElementHeight(g.headerCanvas),10));!g.explicitHeaderCanvasHeight&&p>j&&(j=p)}}for(a=0;a<f.length;a++)g=f[a],i>0&&void 0!==g.headerHeight&&null!==g.headerHeight&&(g.explicitHeaderHeight||g.headerHeight<i)&&(g.explicitHeaderHeight=k(g.explicitHeaderHeight,i)),j>0&&void 0!==g.headerCanvasHeight&&null!==g.headerCanvasHeight&&(g.explicitHeaderCanvasHeight||g.headerCanvasHeight<j)&&(g.explicitHeaderCanvasHeight=k(g.explicitHeaderCanvasHeight,j));b&&h&&c.buildStyles(),e.resolve()})):m(function(){e.resolve()}),e.promise},p.prototype.redrawInPlace=function(a){var b=this;for(var c in b.renderContainers){var d=b.renderContainers[c];a?(d.adjustRows(d.prevScrollTop,null),d.adjustColumns(d.prevScrollLeft,null)):(d.adjustRows(null,d.prevScrolltopPercentage),d.adjustColumns(null,d.prevScrollleftPercentage))}},p.prototype.hasLeftContainerColumns=function(){return this.hasLeftContainer()&&this.renderContainers.left.renderedColumns.length>0},p.prototype.hasRightContainerColumns=function(){return this.hasRightContainer()&&this.renderContainers.right.renderedColumns.length>0},p.prototype.scrollToIfNecessary=function(b,c){var d=this,e=new n(d,"uiGrid.scrollToIfNecessary"),f=d.renderContainers.body.visibleRowCache,g=d.renderContainers.body.visibleColumnCache,h=d.renderContainers.body.prevScrollTop+d.headerHeight;h=0>h?0:h;var i=d.renderContainers.body.prevScrollLeft,j=d.renderContainers.body.prevScrollTop+d.gridHeight-d.renderContainers.body.headerHeight-d.footerHeight-d.scrollbarWidth,k=d.renderContainers.body.prevScrollLeft+Math.ceil(d.renderContainers.body.getViewportWidth());if(null!==b){var l=f.indexOf(b),m=d.renderContainers.body.getCanvasHeight()-d.renderContainers.body.getViewportHeight(),o=l*d.options.rowHeight+d.headerHeight;o=0>o?0:o;var p,q;h>o?(p=d.renderContainers.body.prevScrollTop-(h-o),q=p/m,e.y={percentage:q}):o>j&&(p=o-j+d.renderContainers.body.prevScrollTop,q=p/m,e.y={percentage:q})}if(null!==c){for(var r=g.indexOf(c),s=d.renderContainers.body.getCanvasWidth()-d.renderContainers.body.getViewportWidth(),t=0,u=0;r>u;u++){t+=g[u].drawnWidth}t=0>t?0:t;var w=t+c.drawnWidth;w=0>w?0:w;var x,y;i>t?(x=d.renderContainers.body.prevScrollLeft-(i-t),y=x/s,y=y>1?1:y,e.x={percentage:y}):w>k&&(x=w-k+d.renderContainers.body.prevScrollLeft,y=x/s,y=y>1?1:y,e.x={percentage:y})}var z=a.defer();if(e.y||e.x){e.withDelay=!1,d.scrollContainers("",e);var A=d.api.core.on.scrollEnd(null,function(){z.resolve(e),A()})}else z.resolve();return z.promise},p.prototype.scrollTo=function(a,b){var c=null,d=null;return null!==a&&void 0!==a&&(c=this.getRow(a)),null!==b&&void 0!==b&&(d=this.getColumn(b.name?b.name:b.field)),this.scrollToIfNecessary(c,d)},p.prototype.clearAllFilters=function(a,b,c){return void 0===a&&(a=!0),void 0===b&&(b=!1),void 0===c&&(c=!1),this.columns.forEach(function(a){a.filters.forEach(function(a){a.term=void 0,b&&(a.condition=void 0),c&&(a.flags=void 0)})}),a?this.refreshRows():void 0},o.prototype={put:function(a,b){this[this.grid.options.rowIdentity(a)]=b},get:function(a){return this[this.grid.options.rowIdentity(a)]},remove:function(a){var b=this[a=this.grid.options.rowIdentity(a)];return delete this[a],b}},p}])}(),function(){angular.module("ui.grid").factory("GridApi",["$q","$rootScope","gridUtil","uiGridConstants","GridRow","uiGridGridMenuService",function(a,b,c,d,e,f){function g(a,c,d,e){return b.$on(a,function(a){var b=Array.prototype.slice.call(arguments);b.splice(0,1),c.apply(e||d.api,b)})}var h=function(a){this.grid=a,this.listeners=[],this.registerEvent("core","renderingComplete"),this.registerEvent("core","filterChanged"),this.registerMethod("core","setRowInvisible",e.prototype.setRowInvisible),this.registerMethod("core","clearRowInvisible",e.prototype.clearRowInvisible),this.registerMethod("core","getVisibleRows",this.grid.getVisibleRows),this.registerEvent("core","rowsVisibleChanged"),this.registerEvent("core","rowsRendered"),this.registerEvent("core","scrollBegin"),this.registerEvent("core","scrollEnd"),this.registerEvent("core","canvasHeightChanged"),this.registerEvent("core","gridDimensionChanged")};return h.prototype.suppressEvents=function(a,b){var c=this,d=angular.isArray(a)?a:[a],e=c.listeners.filter(function(a){return d.some(function(b){return a.handler===b})});e.forEach(function(a){a.dereg()}),b(),e.forEach(function(a){a.dereg=g(a.eventId,a.handler,c.grid,a._this)})},h.prototype.registerEvent=function(a,d){var e=this;e[a]||(e[a]={});var f=e[a];f.on||(f.on={},f.raise={});var h=e.grid.id+a+d;f.raise[d]=function(){b.$emit.apply(b,[h].concat(Array.prototype.slice.call(arguments)))},f.on[d]=function(b,f,i){if(null!==b&&void 0===b.$on)return void c.logError("asked to listen on "+a+".on."+d+" but scope wasn't passed in the input parameters.  It is legitimate to pass null, but you've passed something else, so you probably forgot to provide scope rather than did it deliberately, not registering");var j=g(h,f,e.grid,i),k={handler:f,dereg:j,eventId:h,scope:b,_this:i};e.listeners.push(k);var l=function(){k.dereg();var a=e.listeners.indexOf(k);e.listeners.splice(a,1)};return b&&b.$on("$destroy",function(){l()}),l}},h.prototype.registerEventsFromObject=function(a){var b=this,c=[];angular.forEach(a,function(a,b){var d={name:b,events:[]};angular.forEach(a,function(a,b){d.events.push(b)}),c.push(d)}),c.forEach(function(a){a.events.forEach(function(c){b.registerEvent(a.name,c)})})},h.prototype.registerMethod=function(a,b,d,e){this[a]||(this[a]={}),this[a][b]=c.createBoundedWrapper(e||this.grid,d)},h.prototype.registerMethodsFromObject=function(a,b){var c=this,d=[];angular.forEach(a,function(a,b){var c={name:b,methods:[]};angular.forEach(a,function(a,b){c.methods.push({name:b,fn:a})}),d.push(c)}),d.forEach(function(a){a.methods.forEach(function(d){c.registerMethod(a.name,d.name,d.fn,b)})})},h}])}(),function(){angular.module("ui.grid").factory("GridColumn",["gridUtil","uiGridConstants","i18nService",function(a,b,c){function d(a,c,d){var e=this;e.grid=d,e.uid=c,e.updateColumnDef(a,!0),e.aggregationValue=void 0,e.updateAggregationValue=function(){if(!e.aggregationType)return void(e.aggregationValue=void 0);var a=0,c=e.grid.getVisibleRows(),d=function(){var a=[];return c.forEach(function(b){var c=e.grid.getCellValue(b,e),d=Number(c);isNaN(d)||a.push(d)}),a};angular.isFunction(e.aggregationType)?e.aggregationValue=e.aggregationType(c,e):e.aggregationType===b.aggregationTypes.count?e.aggregationValue=e.grid.getVisibleRowCount():e.aggregationType===b.aggregationTypes.sum?(d().forEach(function(b){a+=b}),e.aggregationValue=a):e.aggregationType===b.aggregationTypes.avg?(d().forEach(function(b){a+=b}),a/=d().length,e.aggregationValue=a):e.aggregationType===b.aggregationTypes.min?e.aggregationValue=Math.min.apply(null,d()):e.aggregationType===b.aggregationTypes.max?e.aggregationValue=Math.max.apply(null,d()):e.aggregationValue=" "},this.getAggregationValue=function(){return e.aggregationValue}}return d.prototype.hideColumn=function(){this.colDef.visible=!1},d.prototype.setPropertyOrDefault=function(a,b,c){var d=this;void 0!==a[b]&&a[b]?d[b]=a[b]:void 0!==d[b]?d[b]=d[b]:d[b]=c||{}},d.prototype.updateColumnDef=function(c,d){var e=this;if(e.colDef=c,void 0===c.name)throw new Error("colDef.name is required for column at index "+e.grid.options.columnDefs.indexOf(c));if(e.displayName=void 0===c.displayName?a.readableColumnName(c.name):c.displayName,!angular.isNumber(e.width)||!e.hasCustomWidth||c.allowCustomWidthOverride){var f=c.width,g="Cannot parse column width '"+f+"' for column named '"+c.name+"'";if(e.hasCustomWidth=!1,angular.isString(f)||angular.isNumber(f))if(angular.isString(f))if(a.endsWith(f,"%")){var h=f.replace(/%/g,""),i=parseInt(h,10);if(isNaN(i))throw new Error(g);e.width=f}else if(f.match(/^(\d+)$/))e.width=parseInt(f.match(/^(\d+)$/)[1],10);else{if(!f.match(/^\*+$/))throw new Error(g);e.width=f}else e.width=f;else e.width="*"}["minWidth","maxWidth"].forEach(function(a){var b=c[a],d="Cannot parse column "+a+" '"+b+"' for column named '"+c.name+"'";if(angular.isString(b)||angular.isNumber(b))if(angular.isString(b)){if(!b.match(/^(\d+)$/))throw new Error(d);e[a]=parseInt(b.match(/^(\d+)$/)[1],10)}else e[a]=b;else e[a]="minWidth"===a?30:9e3}),e.field=void 0===c.field?c.name:c.field,"string"!=typeof e.field&&a.logError("Field is not a string, this is likely to break the code, Field is: "+e.field),e.name=c.name,e.displayName=void 0===c.displayName?a.readableColumnName(c.name):c.displayName,e.aggregationType=angular.isDefined(c.aggregationType)?c.aggregationType:null,e.footerCellTemplate=angular.isDefined(c.footerCellTemplate)?c.footerCellTemplate:null,void 0===c.cellTooltip||!1===c.cellTooltip?e.cellTooltip=!1:!0===c.cellTooltip?e.cellTooltip=function(a,b){return e.grid.getCellValue(a,b)}:"function"==typeof c.cellTooltip?e.cellTooltip=c.cellTooltip:e.cellTooltip=function(a,b){return b.colDef.cellTooltip},void 0===c.headerTooltip||!1===c.headerTooltip?e.headerTooltip=!1:!0===c.headerTooltip?e.headerTooltip=function(a){return a.displayName}:"function"==typeof c.headerTooltip?e.headerTooltip=c.headerTooltip:e.headerTooltip=function(a){return a.colDef.headerTooltip},e.footerCellClass=c.footerCellClass,e.cellClass=c.cellClass,e.headerCellClass=c.headerCellClass,e.cellFilter=c.cellFilter?c.cellFilter:"",e.sortCellFiltered=!!c.sortCellFiltered,e.filterCellFiltered=!!c.filterCellFiltered,e.headerCellFilter=c.headerCellFilter?c.headerCellFilter:"",e.footerCellFilter=c.footerCellFilter?c.footerCellFilter:"",e.visible=a.isNullOrUndefined(c.visible)||c.visible,e.headerClass=c.headerClass,e.enableSorting=void 0===c.enableSorting||c.enableSorting,e.sortingAlgorithm=c.sortingAlgorithm,e.sortDirectionCycle=void 0!==c.sortDirectionCycle?c.sortDirectionCycle:[null,b.ASC,b.DESC],void 0===e.suppressRemoveSort&&(e.suppressRemoveSort=void 0!==c.suppressRemoveSort&&c.suppressRemoveSort),e.enableFiltering=void 0===c.enableFiltering||c.enableFiltering,e.setPropertyOrDefault(c,"menuItems",[]),d&&e.setPropertyOrDefault(c,"sort");var j=[];c.filter?j.push(c.filter):c.filters?j=c.filters:j.push({}),d?(e.setPropertyOrDefault(c,"filter"),e.setPropertyOrDefault(c,"filters",j)):e.filters.length===j.length&&e.filters.forEach(function(a,b){void 0!==j[b].placeholder&&(a.placeholder=j[b].placeholder),void 0!==j[b].ariaLabel&&(a.ariaLabel=j[b].ariaLabel),void 0!==j[b].flags&&(a.flags=j[b].flags),void 0!==j[b].type&&(a.type=j[b].type),void 0!==j[b].selectOptions&&(a.selectOptions=j[b].selectOptions)})},d.prototype.unsort=function(){this.sort={},this.grid.api.core.raise.sortChanged(this.grid,this.grid.getColumnSorting())},d.prototype.getColClass=function(a){var c=b.COL_CLASS_PREFIX+this.uid;return a?"."+c:c},d.prototype.isPinnedLeft=function(){return"left"===this.renderContainer},d.prototype.isPinnedRight=function(){return"right"===this.renderContainer},d.prototype.getColClassDefinition=function(){return" .grid"+this.grid.id+" "+this.getColClass(!0)+" { min-width: "+this.drawnWidth+"px; max-width: "+this.drawnWidth+"px; }"},d.prototype.getRenderContainer=function(){var a=this,b=a.renderContainer;return(null===b||""===b||void 0===b)&&(b="body"),a.grid.renderContainers[b]},d.prototype.showColumn=function(){this.colDef.visible=!0},d.prototype.getAggregationText=function(){var a=this;if(a.colDef.aggregationHideLabel)return"";if(a.colDef.aggregationLabel)return a.colDef.aggregationLabel;switch(a.colDef.aggregationType){case b.aggregationTypes.count:return c.getSafeText("aggregation.count");case b.aggregationTypes.sum:return c.getSafeText("aggregation.sum");case b.aggregationTypes.avg:return c.getSafeText("aggregation.avg");case b.aggregationTypes.min:return c.getSafeText("aggregation.min");case b.aggregationTypes.max:return c.getSafeText("aggregation.max");default:return""}},d.prototype.getCellTemplate=function(){return this.cellTemplatePromise},d.prototype.getCompiledElementFn=function(){return this.compiledElementFnDefer.promise},d}])}(),function(){angular.module("ui.grid").factory("GridOptions",["gridUtil","uiGridConstants",function(a,b){return{initialize:function(c){return c.onRegisterApi=c.onRegisterApi||angular.noop(),c.data=c.data||[],c.columnDefs=c.columnDefs||[],c.excludeProperties=c.excludeProperties||["$$hashKey"],c.enableRowHashing=!1!==c.enableRowHashing,c.rowIdentity=c.rowIdentity||function(b){return a.hashKey(b)},c.getRowIdentity=c.getRowIdentity||function(a){return a.$$hashKey},c.flatEntityAccess=!0===c.flatEntityAccess,c.showHeader=void 0===c.showHeader||c.showHeader,c.showHeader?c.headerRowHeight=void 0!==c.headerRowHeight?c.headerRowHeight:30:c.headerRowHeight=0,c.rowHeight=c.rowHeight||30,c.minRowsToShow=void 0!==c.minRowsToShow?c.minRowsToShow:10,c.showGridFooter=!0===c.showGridFooter,c.showColumnFooter=!0===c.showColumnFooter,
c.columnFooterHeight=void 0!==c.columnFooterHeight?c.columnFooterHeight:30,c.gridFooterHeight=void 0!==c.gridFooterHeight?c.gridFooterHeight:30,c.columnWidth=void 0!==c.columnWidth?c.columnWidth:50,c.maxVisibleColumnCount=void 0!==c.maxVisibleColumnCount?c.maxVisibleColumnCount:200,c.virtualizationThreshold=void 0!==c.virtualizationThreshold?c.virtualizationThreshold:20,c.columnVirtualizationThreshold=void 0!==c.columnVirtualizationThreshold?c.columnVirtualizationThreshold:10,c.excessRows=void 0!==c.excessRows?c.excessRows:4,c.scrollThreshold=void 0!==c.scrollThreshold?c.scrollThreshold:4,c.excessColumns=void 0!==c.excessColumns?c.excessColumns:4,c.horizontalScrollThreshold=void 0!==c.horizontalScrollThreshold?c.horizontalScrollThreshold:2,c.aggregationCalcThrottle=void 0!==c.aggregationCalcThrottle?c.aggregationCalcThrottle:500,c.wheelScrollThrottle=void 0!==c.wheelScrollThrottle?c.wheelScrollThrottle:70,c.scrollDebounce=void 0!==c.scrollDebounce?c.scrollDebounce:300,c.enableSorting=!1!==c.enableSorting,c.enableFiltering=!0===c.enableFiltering,c.enableColumnMenus=!1!==c.enableColumnMenus,c.enableVerticalScrollbar=void 0!==c.enableVerticalScrollbar?c.enableVerticalScrollbar:b.scrollbars.ALWAYS,c.enableHorizontalScrollbar=void 0!==c.enableHorizontalScrollbar?c.enableHorizontalScrollbar:b.scrollbars.ALWAYS,c.enableMinHeightCheck=!1!==c.enableMinHeightCheck,c.minimumColumnSize=void 0!==c.minimumColumnSize?c.minimumColumnSize:10,c.rowEquality=c.rowEquality||function(a,b){return a===b},c.headerTemplate=c.headerTemplate||null,c.footerTemplate=c.footerTemplate||"ui-grid/ui-grid-footer",c.gridFooterTemplate=c.gridFooterTemplate||"ui-grid/ui-grid-grid-footer",c.rowTemplate=c.rowTemplate||"ui-grid/ui-grid-row",c.appScopeProvider=c.appScopeProvider||null,c}}}])}(),function(){angular.module("ui.grid").factory("GridRenderContainer",["gridUtil","uiGridConstants",function(a,b){function c(a,b,c){var d=this;d.name=a,d.grid=b,d.visibleRowCache=[],d.visibleColumnCache=[],d.renderedRows=[],d.renderedColumns=[],d.prevScrollTop=0,d.prevScrolltopPercentage=0,d.prevRowScrollIndex=0,d.prevScrollLeft=0,d.prevScrollleftPercentage=0,d.prevColumnScrollIndex=0,d.columnStyles="",d.viewportAdjusters=[],d.hasHScrollbar=!1,d.hasVScrollbar=!1,d.canvasHeightShouldUpdate=!0,d.$$canvasHeight=0,c&&angular.isObject(c)&&angular.extend(d,c),b.registerStyleComputation({priority:5,func:function(){return d.updateColumnWidths(),d.columnStyles}})}return c.prototype.reset=function(){this.visibleColumnCache.length=0,this.visibleRowCache.length=0,this.renderedRows.length=0,this.renderedColumns.length=0},c.prototype.containsColumn=function(a){return-1!==this.visibleColumnCache.indexOf(a)},c.prototype.minRowsToRender=function(){for(var a=this,b=0,c=0,d=a.getViewportHeight(),e=a.visibleRowCache.length-1;d>c&&e>=0;e--)c+=a.visibleRowCache[e].height,b++;return b},c.prototype.minColumnsToRender=function(){for(var a=this,b=this.getViewportWidth(),c=0,d=0,e=0;e<a.visibleColumnCache.length;e++){var f=a.visibleColumnCache[e];if(b>d)d+=f.drawnWidth?f.drawnWidth:0,c++;else{for(var g=0,h=e;h>=e-c;h--)g+=a.visibleColumnCache[h].drawnWidth?a.visibleColumnCache[h].drawnWidth:0;b>g&&c++}}return c},c.prototype.getVisibleRowCount=function(){return this.visibleRowCache.length},c.prototype.registerViewportAdjuster=function(a){this.viewportAdjusters.push(a)},c.prototype.removeViewportAdjuster=function(a){var b=this.viewportAdjusters.indexOf(a);b>-1&&this.viewportAdjusters.splice(b,1)},c.prototype.getViewportAdjustment=function(){var a=this,b={height:0,width:0};return a.viewportAdjusters.forEach(function(a){b=a.call(this,b)}),b},c.prototype.getMargin=function(a){var b=this,c=0;return b.viewportAdjusters.forEach(function(b){var d=b.call(this,{height:0,width:0});d.side&&d.side===a&&(c+=-1*d.width)}),c},c.prototype.getViewportHeight=function(){var a=this,b=a.headerHeight?a.headerHeight:a.grid.headerHeight,c=a.grid.gridHeight-b-a.grid.footerHeight;return c+=a.getViewportAdjustment().height},c.prototype.getViewportWidth=function(){var a=this,b=a.grid.gridWidth;return b+=a.getViewportAdjustment().width},c.prototype.getHeaderViewportWidth=function(){return this.getViewportWidth()},c.prototype.getCanvasHeight=function(){var a=this;if(!a.canvasHeightShouldUpdate)return a.$$canvasHeight;var b=a.$$canvasHeight;return a.$$canvasHeight=0,a.visibleRowCache.forEach(function(b){a.$$canvasHeight+=b.height}),a.canvasHeightShouldUpdate=!1,a.grid.api.core.raise.canvasHeightChanged(b,a.$$canvasHeight),a.$$canvasHeight},c.prototype.getVerticalScrollLength=function(){return this.getCanvasHeight()-this.getViewportHeight()+this.grid.scrollbarHeight},c.prototype.getHorizontalScrollLength=function(){return this.getCanvasWidth()-this.getViewportWidth()+this.grid.scrollbarWidth},c.prototype.getCanvasWidth=function(){return this.canvasWidth},c.prototype.setRenderedRows=function(a){this.renderedRows.length=a.length;for(var b=0;b<a.length;b++)this.renderedRows[b]=a[b]},c.prototype.setRenderedColumns=function(a){this.renderedColumns.length=a.length;for(var b=0;b<a.length;b++)this.renderedColumns[b]=a[b];this.updateColumnOffset()},c.prototype.updateColumnOffset=function(){for(var a=0,b=0;b<this.currentFirstColumn;b++)a+=this.visibleColumnCache[b].drawnWidth;this.columnOffset=a},c.prototype.scrollVertical=function(a){var c=-1;if(a!==this.prevScrollTop){var d=a-this.prevScrollTop;d>0&&(this.grid.scrollDirection=b.scrollDirection.DOWN),0>d&&(this.grid.scrollDirection=b.scrollDirection.UP);return c=a/this.getVerticalScrollLength(),c>1&&(c=1),0>c&&(c=0),this.adjustScrollVertical(a,c),c}},c.prototype.scrollHorizontal=function(a){var c=-1;if(a!==this.prevScrollLeft){var d=a-this.prevScrollLeft;d>0&&(this.grid.scrollDirection=b.scrollDirection.RIGHT),0>d&&(this.grid.scrollDirection=b.scrollDirection.LEFT);var e=this.getHorizontalScrollLength();return c=0!==e?a/e:0,this.adjustScrollHorizontal(a,c),c}},c.prototype.adjustScrollVertical=function(a,b,c){(this.prevScrollTop!==a||c)&&((void 0===a||void 0===a||null===a)&&(a=(this.getCanvasHeight()-this.getViewportHeight())*b),this.adjustRows(a,b,!1),this.prevScrollTop=a,this.prevScrolltopPercentage=b,this.grid.queueRefresh())},c.prototype.adjustScrollHorizontal=function(a,b,c){(this.prevScrollLeft!==a||c)&&((void 0===a||void 0===a||null===a)&&(a=(this.getCanvasWidth()-this.getViewportWidth())*b),this.adjustColumns(a,b),this.prevScrollLeft=a,this.prevScrollleftPercentage=b,this.grid.queueRefresh())},c.prototype.adjustRows=function(a,b,c){var d=this,e=d.minRowsToRender(),f=d.visibleRowCache,g=f.length-e;void 0!==b&&null!==b||!a||(b=a/d.getVerticalScrollLength());var h=Math.ceil(Math.min(g,g*b));h>g&&(h=g);var i=[];if(f.length>d.grid.options.virtualizationThreshold){if(void 0!==a&&null!==a){if(!d.grid.suppressParentScrollDown&&d.prevScrollTop<a&&h<d.prevRowScrollIndex+d.grid.options.scrollThreshold&&g>h)return;if(!d.grid.suppressParentScrollUp&&d.prevScrollTop>a&&h>d.prevRowScrollIndex-d.grid.options.scrollThreshold&&g>h)return}var j={},k={};j=Math.max(0,h-d.grid.options.excessRows),k=Math.min(f.length,h+e+d.grid.options.excessRows),i=[j,k]}else{var l=d.visibleRowCache.length;i=[0,Math.max(l,e+d.grid.options.excessRows)]}d.updateViewableRowRange(i),d.prevRowScrollIndex=h},c.prototype.adjustColumns=function(a,b){var c=this,d=c.minColumnsToRender(),e=c.visibleColumnCache,f=e.length-d;void 0!==b&&null!==b||!a||(b=a/c.getHorizontalScrollLength());var g=Math.ceil(Math.min(f,f*b));g>f&&(g=f);var h=[];if(e.length>c.grid.options.columnVirtualizationThreshold&&c.getCanvasWidth()>c.getViewportWidth()){h=[Math.max(0,g-c.grid.options.excessColumns),Math.min(e.length,g+d+c.grid.options.excessColumns)]}else{var k=c.visibleColumnCache.length;h=[0,Math.max(k,d+c.grid.options.excessColumns)]}c.updateViewableColumnRange(h),c.prevColumnScrollIndex=g},c.prototype.updateViewableRowRange=function(a){var b=this.visibleRowCache.slice(a[0],a[1]);this.currentTopRow=a[0],this.setRenderedRows(b)},c.prototype.updateViewableColumnRange=function(a){var b=this.visibleColumnCache.slice(a[0],a[1]);this.currentFirstColumn=a[0],this.setRenderedColumns(b)},c.prototype.headerCellWrapperStyle=function(){var a=this;if(0!==a.currentFirstColumn){var b=a.columnOffset;return a.grid.isRTL()?{"margin-right":b+"px"}:{"margin-left":b+"px"}}return null},c.prototype.updateColumnWidths=function(){var b=this,c=[],d=0,e=0,f="",g=b.grid.getViewportWidth()-b.grid.scrollbarWidth,h=[];angular.forEach(b.grid.renderContainers,function(a,b){h=h.concat(a.visibleColumnCache)}),h.forEach(function(b,f){var h=0;b.visible&&(angular.isNumber(b.width)?(h=parseInt(b.width,10),e+=h,b.drawnWidth=h):a.endsWith(b.width,"%")?(h=parseInt(parseInt(b.width.replace(/%/g,""),10)/100*g),h>b.maxWidth&&(h=b.maxWidth),h<b.minWidth&&(h=b.minWidth),e+=h,b.drawnWidth=h):angular.isString(b.width)&&-1!==b.width.indexOf("*")&&(d+=b.width.length,c.push(b)))});var i=g-e;if(c.length>0){var j=i/d;c.forEach(function(a){var b=parseInt(a.width.length*j,10);b>a.maxWidth&&(b=a.maxWidth),b<a.minWidth&&(b=a.minWidth),e+=b,a.drawnWidth=b})}for(var k=function(a){a.drawnWidth<a.maxWidth&&l>0&&(a.drawnWidth++,e++,l--,m=!0)},l=g-e,m=!0;l>0&&m;)m=!1,c.forEach(k);var n=function(a){a.drawnWidth>a.minWidth&&o>0&&(a.drawnWidth--,e--,o--,m=!0)},o=e-g;for(m=!0;o>0&&m;)m=!1,c.forEach(n);var p=0;b.visibleColumnCache.forEach(function(a){a.visible&&(p+=a.drawnWidth)}),h.forEach(function(a){f+=a.getColClassDefinition()}),b.canvasWidth=p,this.columnStyles=f},c.prototype.needsHScrollbarPlaceholder=function(){return this.grid.options.enableHorizontalScrollbar&&!this.hasHScrollbar&&!this.grid.disableScrolling},c.prototype.getViewportStyle=function(){var a=this,c={};return a.hasHScrollbar=!1,a.hasVScrollbar=!1,a.grid.disableScrolling?(c["overflow-x"]="hidden",c["overflow-y"]="hidden",c):("body"===a.name?(a.hasHScrollbar=a.grid.options.enableHorizontalScrollbar!==b.scrollbars.NEVER,a.grid.isRTL()?a.grid.hasLeftContainerColumns()||(a.hasVScrollbar=a.grid.options.enableVerticalScrollbar!==b.scrollbars.NEVER):a.grid.hasRightContainerColumns()||(a.hasVScrollbar=a.grid.options.enableVerticalScrollbar!==b.scrollbars.NEVER)):"left"===a.name?a.hasVScrollbar=!!a.grid.isRTL()&&a.grid.options.enableVerticalScrollbar!==b.scrollbars.NEVER:a.hasVScrollbar=!a.grid.isRTL()&&a.grid.options.enableVerticalScrollbar!==b.scrollbars.NEVER,c["overflow-x"]=a.hasHScrollbar?"scroll":"hidden",c["overflow-y"]=a.hasVScrollbar?"scroll":"hidden",c)},c}])}(),function(){angular.module("ui.grid").factory("GridRow",["gridUtil","uiGridConstants",function(a,b){function c(b,c,d){this.grid=d,this.entity=b,this.uid=a.nextUid(),this.visible=!0,this.$$height=d.options.rowHeight}return Object.defineProperty(c.prototype,"height",{get:function(){return this.$$height},set:function(a){a!==this.$$height&&(this.grid.updateCanvasHeight(),this.$$height=a)}}),c.prototype.getQualifiedColField=function(a){return"row."+this.getEntityQualifiedColField(a)},c.prototype.getEntityQualifiedColField=function(c){var d="entity";return c.field===b.ENTITY_BINDING?d:a.preEval(d+"."+c.field)},c.prototype.setRowInvisible=function(a){a&&a.setThisRowInvisible&&a.setThisRowInvisible("user")},c.prototype.clearRowInvisible=function(a){a&&a.clearThisRowInvisible&&a.clearThisRowInvisible("user")},c.prototype.setThisRowInvisible=function(a,b){this.invisibleReason||(this.invisibleReason={}),this.invisibleReason[a]=!0,this.evaluateRowVisibility(b)},c.prototype.clearThisRowInvisible=function(a,b){void 0!==this.invisibleReason&&delete this.invisibleReason[a],this.evaluateRowVisibility(b)},c.prototype.evaluateRowVisibility=function(a){var b=!0;void 0!==this.invisibleReason&&angular.forEach(this.invisibleReason,function(a,c){a&&(b=!1)}),(void 0===this.visible||this.visible!==b)&&(this.visible=b,a||(this.grid.queueGridRefresh(),this.grid.api.core.raise.rowsVisibleChanged(this)))},c}])}(),function(){"use strict";angular.module("ui.grid").factory("GridRowColumn",["$parse","$filter",function(a,b){var c=function d(a,b){if(!(this instanceof d))throw"Using GridRowColumn as a function insead of as a constructor. Must be called with `new` keyword";this.row=a,this.col=b};return c.prototype.getIntersectionValueRaw=function(){return a(this.row.getEntityQualifiedColField(this.col))(this.row)},c}])}(),function(){angular.module("ui.grid").factory("ScrollEvent",["gridUtil",function(a){function b(b,c,d,e){var f=this;if(!b)throw new Error("grid argument is required");f.grid=b,f.source=e,f.withDelay=!0,f.sourceRowContainer=c,f.sourceColContainer=d,f.newScrollLeft=null,f.newScrollTop=null,f.x=null,f.y=null,f.verticalScrollLength=-9999999,f.horizontalScrollLength=-999999,f.fireThrottledScrollingEvent=a.throttle(function(a){f.grid.scrollContainers(a,f)},f.grid.options.wheelScrollThrottle,{trailing:!0})}return b.prototype.getNewScrollLeft=function(b,c){var d=this;if(!d.newScrollLeft){var e,f=b.getCanvasWidth()-b.getViewportWidth(),g=a.normalizeScrollLeft(c,d.grid);if(void 0!==d.x.percentage&&void 0!==d.x.percentage)e=d.x.percentage;else{if(void 0===d.x.pixels||void 0===d.x.pixels)throw new Error("No percentage or pixel value provided for scroll event X axis");e=d.x.percentage=(g+d.x.pixels)/f}return Math.max(0,e*f)}return d.newScrollLeft},b.prototype.getNewScrollTop=function(a,b){var c=this;if(!c.newScrollTop){var d,e=a.getVerticalScrollLength(),f=b[0].scrollTop;if(void 0!==c.y.percentage&&void 0!==c.y.percentage)d=c.y.percentage;else{if(void 0===c.y.pixels||void 0===c.y.pixels)throw new Error("No percentage or pixel value provided for scroll event Y axis");d=c.y.percentage=(f+c.y.pixels)/e}return Math.max(0,d*e)}return c.newScrollTop},b.prototype.atTop=function(a){return this.y&&(0===this.y.percentage||this.verticalScrollLength<0)&&0===a},b.prototype.atBottom=function(a){return this.y&&(1===this.y.percentage||0===this.verticalScrollLength)&&a>0},b.prototype.atLeft=function(a){return this.x&&(0===this.x.percentage||this.horizontalScrollLength<0)&&0===a},b.prototype.atRight=function(a){return this.x&&(1===this.x.percentage||0===this.horizontalScrollLength)&&a>0},b.Sources={ViewPortScroll:"ViewPortScroll",RenderContainerMouseWheel:"RenderContainerMouseWheel",RenderContainerTouchMove:"RenderContainerTouchMove",Other:99},b}])}(),function(){"use strict";angular.module("ui.grid").service("gridClassFactory",["gridUtil","$q","$compile","$templateCache","uiGridConstants","Grid","GridColumn","GridRow",function(a,b,c,d,e,f,g,h){var i={createGrid:function(d){d=void 0!==d?d:{},d.id=a.newId();var e=new f(d);if(e.options.rowTemplate){var g=b.defer();e.getRowTemplateFn=g.promise,a.getTemplate(e.options.rowTemplate).then(function(a){var b=c(a);g.resolve(b)},function(a){throw new Error("Couldn't fetch/use row template '"+e.options.rowTemplate+"'")})}return e.registerColumnBuilder(i.defaultColumnBuilder),e.registerRowBuilder(i.rowTemplateAssigner),e.registerRowsProcessor(function(a){return a.forEach(function(a){a.evaluateRowVisibility(!0)},50),a}),e.registerColumnsProcessor(function(a){return a.forEach(function(a){a.visible=!angular.isDefined(a.colDef.visible)||a.colDef.visible}),a},50),e.registerRowsProcessor(e.searchRows,100),e.options.externalSort&&angular.isFunction(e.options.externalSort)?e.registerRowsProcessor(e.options.externalSort,200):e.registerRowsProcessor(e.sortByColumn,200),e},defaultColumnBuilder:function(c,d,f){var g=[],h=function(b,f,h,i,j){c[b]?d[f]=c[b]:d[f]=h,g.push(a.getTemplate(d[f]).then(function(a){angular.isFunction(a)&&(a=a());var c="cellTooltip"===j?"col.cellTooltip(row,col)":"col.headerTooltip(col)";j&&!1===d[j]?a=a.replace(e.TOOLTIP,""):j&&d[j]&&(a=a.replace(e.TOOLTIP,'title="{{'+c+' CUSTOM_FILTERS }}"')),d[b]=i?a.replace(e.CUSTOM_FILTERS,function(){return d[i]?"|"+d[i]:""}):a},function(a){throw new Error("Couldn't fetch/use colDef."+b+" '"+c[b]+"'")}))};return h("cellTemplate","providedCellTemplate","ui-grid/uiGridCell","cellFilter","cellTooltip"),d.cellTemplatePromise=g[0],h("headerCellTemplate","providedHeaderCellTemplate","ui-grid/uiGridHeaderCell","headerCellFilter","headerTooltip"),h("footerCellTemplate","providedFooterCellTemplate","ui-grid/uiGridFooterCell","footerCellFilter"),h("filterHeaderTemplate","providedFilterHeaderTemplate","ui-grid/ui-grid-filter"),d.compiledElementFnDefer=b.defer(),b.all(g)},rowTemplateAssigner:function(d){var e=this;if(d.rowTemplate){var f=b.defer();d.getRowTemplateFn=f.promise,a.getTemplate(d.rowTemplate).then(function(a){var b=c(a);f.resolve(b)},function(a){throw new Error("Couldn't fetch/use row template '"+d.rowTemplate+"'")})}else d.rowTemplate=e.options.rowTemplate,d.getRowTemplateFn=e.getRowTemplateFn;return d.getRowTemplateFn}};return i}])}(),function(){function a(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}angular.module("ui.grid").service("rowSearcher",["gridUtil","uiGridConstants",function(b,c){var d=c.filter.CONTAINS,e={};return e.getTerm=function(a){if(void 0===a.term)return a.term;var b=a.term;return"string"==typeof b&&(b=b.trim()),b},e.stripTerm=function(b){var c=e.getTerm(b);return"string"==typeof c?a(c.replace(/(^\*|\*$)/g,"")):c},e.guessCondition=function(a){if(void 0===a.term||!a.term)return d;var b=e.getTerm(a);if(/\*/.test(b)){var c="";a.flags&&a.flags.caseSensitive||(c+="i");var f=b.replace(/(\\)?\*/g,function(a,b){return b?a:"[\\s\\S]*?"});return new RegExp("^"+f+"$",c)}return d},e.setupFilters=function(a){for(var d=[],f=a.length,g=0;f>g;g++){var h=a[g];if(h.noTerm||!b.isNullOrUndefined(h.term)){var i={},j="";h.flags&&h.flags.caseSensitive||(j+="i"),b.isNullOrUndefined(h.term)||(h.rawTerm?i.term=h.term:i.term=e.stripTerm(h)),i.noTerm=h.noTerm,h.condition?i.condition=h.condition:i.condition=e.guessCondition(h),i.flags=angular.extend({caseSensitive:!1,date:!1},h.flags),i.condition===c.filter.STARTS_WITH&&(i.startswithRE=new RegExp("^"+i.term,j)),i.condition===c.filter.ENDS_WITH&&(i.endswithRE=new RegExp(i.term+"$",j)),i.condition===c.filter.CONTAINS&&(i.containsRE=new RegExp(i.term,j)),i.condition===c.filter.EXACT&&(i.exactRE=new RegExp("^"+i.term+"$",j)),d.push(i)}}return d},e.runColumnFilter=function(a,b,d,e){var f,g=typeof e.condition,h=e.term;if(f=d.filterCellFiltered?a.getCellDisplayValue(b,d):a.getCellValue(b,d),e.condition instanceof RegExp)return e.condition.test(f);if("function"===g)return e.condition(h,f,b,d);if(e.startswithRE)return e.startswithRE.test(f);if(e.endswithRE)return e.endswithRE.test(f);if(e.containsRE)return e.containsRE.test(f);if(e.exactRE)return e.exactRE.test(f);if(e.condition===c.filter.NOT_EQUAL)return!new RegExp("^"+h+"$").exec(f);if("number"==typeof f&&"string"==typeof h){var j=parseFloat(h.replace(/\\\./,".").replace(/\\\-/,"-"));isNaN(j)||(h=j)}return!0===e.flags.date&&(f=new Date(f),h=new Date(h.replace(/\\/g,""))),e.condition===c.filter.GREATER_THAN?f>h:e.condition===c.filter.GREATER_THAN_OR_EQUAL?f>=h:e.condition===c.filter.LESS_THAN?h>f:e.condition!==c.filter.LESS_THAN_OR_EQUAL||h>=f},e.searchColumn=function(a,c,d,f){if(a.options.useExternalFiltering)return!0;for(var g=f.length,h=0;g>h;h++){var i=f[h];if((!b.isNullOrUndefined(i.term)&&""!==i.term||i.noTerm)&&!e.runColumnFilter(a,c,d,i))return!1}return!0},e.search=function(a,c,d){if(c){if(!a.options.enableFiltering)return c;for(var f=[],g=d.length,i=0;g>i;i++){var j=d[i];void 0!==j.filters&&function(a){var c=!1;return a.forEach(function(a){(!b.isNullOrUndefined(a.term)&&""!==a.term||a.noTerm)&&(c=!0)}),c}(j.filters)&&f.push({col:j,filters:e.setupFilters(j.filters)})}if(f.length>0){for(var k=function(a,b,c,d){b.visible&&!e.searchColumn(a,b,c,d)&&(b.visible=!1)},m=f.length,n=0;m>n;n++)!function(a,b){for(var d=c.length,e=0;d>e;e++)k(a,c[e],b.col,b.filters)}(a,f[n]);a.api.core.raise.rowsVisibleChanged&&a.api.core.raise.rowsVisibleChanged()}return c}},e}])}(),function(){angular.module("ui.grid").service("rowSorter",["$parse","uiGridConstants",function(a,b){var c="("+b.CURRENCY_SYMBOLS.map(function(a){return"\\"+a}).join("|")+")?",d=(new RegExp("^[-+]?"+c+"[\\d,.]+"+c+"%?$"),{colSortFnCache:{}});return d.guessSortFn=function(a){switch(a){case"number":return d.sortNumber;case"numberStr":return d.sortNumberStr;case"boolean":return d.sortBool;case"string":return d.sortAlpha;case"date":return d.sortDate;case"object":return d.basicSort;default:throw new Error("No sorting function found for type:"+a)}},d.handleNulls=function(a,b){if(!a&&0!==a&&!1!==a||!b&&0!==b&&!1!==b){if(!a&&0!==a&&!1!==a&&!b&&0!==b&&!1!==b)return 0;if(!a&&0!==a&&!1!==a)return 1;if(!b&&0!==b&&!1!==b)return-1}return null},d.basicSort=function(a,b){var c=d.handleNulls(a,b);return null!==c?c:a===b?0:b>a?-1:1},d.sortNumber=function(a,b){var c=d.handleNulls(a,b);return null!==c?c:a-b},d.sortNumberStr=function(a,b){var c=d.handleNulls(a,b);if(null!==c)return c;var e,f,g=!1,h=!1;return e=parseFloat(a.replace(/[^0-9.-]/g,"")),isNaN(e)&&(g=!0),f=parseFloat(b.replace(/[^0-9.-]/g,"")),isNaN(f)&&(h=!0),g&&h?0:g?1:h?-1:e-f},d.sortAlpha=function(a,b){var c=d.handleNulls(a,b);if(null!==c)return c;var e=a.toString().toLowerCase(),f=b.toString().toLowerCase();return e===f?0:e.localeCompare(f)},d.sortDate=function(a,b){var c=d.handleNulls(a,b);if(null!==c)return c;a instanceof Date||(a=new Date(a)),b instanceof Date||(b=new Date(b));var e=a.getTime(),f=b.getTime();return e===f?0:f>e?-1:1},d.sortBool=function(a,b){var c=d.handleNulls(a,b);return null!==c?c:a&&b?0:a||b?a?1:-1:0},d.getSortFn=function(a,b,c){var e;return d.colSortFnCache[b.colDef.name]?e=d.colSortFnCache[b.colDef.name]:void 0!==b.sortingAlgorithm?(e=b.sortingAlgorithm,d.colSortFnCache[b.colDef.name]=b.sortingAlgorithm):b.sortCellFiltered&&b.cellFilter?(e=d.sortAlpha,d.colSortFnCache[b.colDef.name]=e):(e=d.guessSortFn(b.colDef.type),e?d.colSortFnCache[b.colDef.name]=e:e=d.sortAlpha),e},d.prioritySort=function(a,b){return void 0!==a.sort.priority&&void 0!==b.sort.priority?a.sort.priority<b.sort.priority?-1:a.sort.priority===b.sort.priority?0:1:a.sort.priority||void 0===a.sort.priority?-1:b.sort.priority||void 0===b.sort.priority?1:0},d.sort=function(a,c,e){if(c){if(a.options.useExternalSorting)return c;var f=[];if(e.forEach(function(a){!a.sort||a.sort.ignoreSort||!a.sort.direction||a.sort.direction!==b.ASC&&a.sort.direction!==b.DESC||f.push(a)}),f=f.sort(d.prioritySort),0===f.length)return c;var g,h,i=function(a,b){a.entity.$$uiGridIndex=b};c.forEach(i);var j=c.slice(0),k=function(c,e){for(var i,k=0,l=0;0===k&&l<f.length;){g=f[l],h=f[l].sort.direction,i=d.getSortFn(a,g,j);var m,n;g.sortCellFiltered?(m=a.getCellDisplayValue(c,g),n=a.getCellDisplayValue(e,g)):(m=a.getCellValue(c,g),n=a.getCellValue(e,g)),k=i(m,n,c,e,h),l++}return 0===k?c.entity.$$uiGridIndex-e.entity.$$uiGridIndex:h===b.ASC?k:0-k},l=c.sort(k),m=function(a,b){delete a.entity.$$uiGridIndex};return c.forEach(m),l}},d}])}(),function(){function a(a){var b=a;return void 0!==b.length&&b.length&&(b=a[0]),b.ownerDocument.defaultView.getComputedStyle(b,null)}function b(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0,h=["Top","Right","Bottom","Left"];4>f;f+=2){var i=h[f];if("margin"===c){var j=parseFloat(e[c+i]);isNaN(j)||(g+=j)}if(d){if("content"===c){var k=parseFloat(e["padding"+i]);isNaN(k)||(g-=k)}if("margin"!==c){var l=parseFloat(e["border"+i+"Width"]);isNaN(l)||(g-=l)}}else{var m=parseFloat(e["padding"+i]);if(isNaN(m)||(g+=m),"padding"!==c){var n=parseFloat(e["border"+i+"Width"]);isNaN(n)||(g+=n)}}}return g}function c(c,d,e){var f,h=!0,i=a(c),j="border-box"===i.boxSizing;if(0>=f||null==f){if(f=i[d],(0>f||null==f)&&(f=c.style[d]),g.test(f))return f;h=j&&!0,f=parseFloat(f)||0}return f+b(c,d,e||(j?"border":"content"),h,i)}function d(b){b=angular.element(b)[0];var c=b.parentElement;return c||(c=document.getElementsByTagName("body")[0]),parseInt(a(c).fontSize)||parseInt(a(b).fontSize)||16}var e,f=angular.module("ui.grid");"function"!=typeof Function.prototype.bind&&(e=function(){var a=Array.prototype.slice;return function(b){var c=this,d=a.call(arguments,1);return d.length?function(){return arguments.length?c.apply(b,d.concat(a.call(arguments))):c.apply(b,d)}:function(){return arguments.length?c.apply(b,arguments):c.call(b)}}});var g=new RegExp("^("+/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source+")(?!px)[a-z%]+$","i"),h=/^(block|none|table(?!-c[ea]).+)/,i={position:"absolute",visibility:"hidden",display:"block"},j=["0","0","0","0"],k="uiGrid-";f.service("gridUtil",["$log","$window","$document","$http","$templateCache","$timeout","$interval","$injector","$q","$interpolate","uiGridConstants",function(f,g,l,m,n,o,p,q,r,s,t){function u(a,b){var c=angular.element(this),d=0,e=0,f=0,g=0;if(b.originalEvent&&(b=b.originalEvent),"detail"in b&&(f=-1*b.detail),"wheelDelta"in b&&(f=b.wheelDelta),"wheelDeltaY"in b&&(f=b.wheelDeltaY),"wheelDeltaX"in b&&(e=-1*b.wheelDeltaX),"axis"in b&&b.axis===b.HORIZONTAL_AXIS&&(e=-1*f,f=0),d=0===f?e:f,"deltaY"in b&&(f=-1*b.deltaY,d=f),"deltaX"in b&&(e=b.deltaX,0===f&&(d=-1*e)),0!==f||0!==e){if(1===b.deltaMode){var h=c.data("mousewheel-line-height");d*=h,f*=h,e*=h}else if(2===b.deltaMode){var i=c.data("mousewheel-page-height");d*=i,f*=i,e*=i}g=Math.max(Math.abs(f),Math.abs(e)),(!z||z>g)&&(z=g,w(b,g)&&(z/=40)),d=Math[d>=1?"floor":"ceil"](d/z),e=Math[e>=1?"floor":"ceil"](e/z),f=Math[f>=1?"floor":"ceil"](f/z);var j={originalEvent:b,deltaX:e,deltaY:f,deltaFactor:z,preventDefault:function(){b.preventDefault()},stopPropagation:function(){b.stopPropagation()}};y&&clearTimeout(y),y=setTimeout(v,200),a.call(c[0],j)}}function v(){z=null}function w(a,b){return"mousewheel"===a.type&&b%120==0}var x={augmentWidthOrHeight:b,getStyles:a,createBoundedWrapper:function(a,b){return function(){return b.apply(a,arguments)}},readableColumnName:function(a){return void 0===a||void 0===a||null===a?a:("string"!=typeof a&&(a=String(a)),a.replace(/_+/g," ").replace(/^[A-Z]+$/,function(a){return angular.lowercase(angular.uppercase(a.charAt(0))+a.slice(1))}).replace(/([\w\u00C0-\u017F]+)/g,function(a){return angular.uppercase(a.charAt(0))+a.slice(1)}).replace(/(\w+?(?=[A-Z]))/g,"$1 "))},getColumnsFromData:function(a,b){var c=[];if(!a||void 0===a[0]||void 0===a[0])return[];angular.isUndefined(b)&&(b=[]);var d=a[0];return angular.forEach(d,function(a,d){-1===b.indexOf(d)&&c.push({name:d})}),c},newId:function(){var a=(new Date).getTime();return function(){return a+=1}}(),getTemplate:function(a){if(n.get(a))return x.postProcessTemplate(n.get(a));if(angular.isFunction(a.then))return a.then(x.postProcessTemplate);try{if(angular.element(a).length>0)return r.when(a).then(x.postProcessTemplate)}catch(b){}return x.logDebug("fetching url",a),m({method:"GET",url:a}).then(function(b){var c=b.data.trim();return n.put(a,c),c},function(b){throw new Error("Could not get template "+a+": "+b)}).then(x.postProcessTemplate)},postProcessTemplate:function(a){var b=s.startSymbol(),c=s.endSymbol();return("{{"!==b||"}}"!==c)&&(a=a.replace(/\{\{/g,b),a=a.replace(/\}\}/g,c)),r.when(a)},guessType:function(a){var b=typeof a;switch(b){case"number":case"boolean":case"string":return b;default:return angular.isDate(a)?"date":"object"}},elementWidth:function(a){},elementHeight:function(a){},getScrollbarWidth:function(){var a=document.createElement("div");a.style.visibility="hidden",a.style.width="100px",a.style.msOverflowStyle="scrollbar",document.body.appendChild(a);var b=a.offsetWidth;a.style.overflow="scroll";var c=document.createElement("div");c.style.width="100%",a.appendChild(c);var d=c.offsetWidth;return a.parentNode.removeChild(a),b-d},swap:function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e},fakeElement:function(a,b,c,d){var e,f,g=angular.element(a).clone()[0];for(f in b)g.style[f]=b[f];return angular.element(document.body).append(g),e=c.call(g,g),angular.element(g).remove(),e},normalizeWheelEvent:function(a){var b,c,d,e=a||window.event,f=([].slice.call(arguments,1),0),g=0,h=0,i=0,j=0;return e.originalEvent&&(e=e.originalEvent),e.wheelDelta&&(f=e.wheelDelta),e.detail&&(f=-1*e.detail),h=f,void 0!==e.axis&&e.axis===e.HORIZONTAL_AXIS&&(h=0,g=-1*f),e.deltaY&&(h=-1*e.deltaY,f=h),e.deltaX&&(g=e.deltaX,f=-1*g),void 0!==e.wheelDeltaY&&(h=e.wheelDeltaY),void 0!==e.wheelDeltaX&&(g=e.wheelDeltaX),i=Math.abs(f),(!b||b>i)&&(b=i),j=Math.max(Math.abs(h),Math.abs(g)),(!c||c>j)&&(c=j),d=f>0?"floor":"ceil",f=Math[d](f/b),g=Math[d](g/c),h=Math[d](h/c),{delta:f,deltaX:g,deltaY:h}},isTouchEnabled:function(){var a;return("ontouchstart"in g||g.DocumentTouch&&l instanceof DocumentTouch)&&(a=!0),a},isNullOrUndefined:function(a){return void 0===a||null===a},endsWith:function(a,b){return!(!a||!b||"string"!=typeof a)&&-1!==a.indexOf(b,a.length-b.length)},arrayContainsObjectWithProperty:function(a,b,c){var d=!1;return angular.forEach(a,function(a){a[b]===c&&(d=!0)}),d},numericAndNullSort:function(a,b){return null===a?1:null===b?-1:null===a&&null===b?0:a-b},disableAnimations:function(a){var b;try{b=q.get("$animate"),angular.version.major>1||1===angular.version.major&&angular.version.minor>=4?b.enabled(a,!1):b.enabled(!1,a)}catch(c){}},enableAnimations:function(a){var b;try{return b=q.get("$animate"),angular.version.major>1||1===angular.version.major&&angular.version.minor>=4?b.enabled(a,!0):b.enabled(!0,a),b}catch(c){}},nextUid:function(){for(var a,b=j.length;b;){if(b--,57===(a=j[b].charCodeAt(0)))return j[b]="A",k+j.join("");if(90!==a)return j[b]=String.fromCharCode(a+1),k+j.join("");j[b]="0"}return j.unshift("0"),k+j.join("")},hashKey:function(a){var b,c=typeof a;return"object"===c&&null!==a?"function"==typeof(b=a.$$hashKey)?b=a.$$hashKey():void 0!==a.$$hashKey&&a.$$hashKey?b=a.$$hashKey:void 0===b&&(b=a.$$hashKey=x.nextUid()):b=a,c+":"+b},resetUids:function(){j=["0","0","0"]},logError:function(a){t.LOG_ERROR_MESSAGES&&f.error(a)},logWarn:function(a){t.LOG_WARN_MESSAGES&&f.warn(a)},logDebug:function(){t.LOG_DEBUG_MESSAGES&&f.debug.apply(f,arguments)}};x.focus={queue:[],byId:function(a,b){this._purgeQueue();var c=o(function(){var c=(b&&b.id?b.id+"-":"")+a,d=g.document.getElementById(c);d?d.focus():x.logWarn("[focus.byId] Element id "+c+" was not found.")});return this.queue.push(c),c},byElement:function(a){if(!angular.isElement(a))return x.logWarn("Trying to focus on an element that isn't an element."),r.reject("not-element");a=angular.element(a),this._purgeQueue();var b=o(function(){a&&a[0].focus()});return this.queue.push(b),b},bySelector:function(a,b,c){var d=this;if(!angular.isElement(a))throw new Error("The parent element is not an element.");a=angular.element(a);var e=function(){var c=a[0].querySelector(b);return d.byElement(c)};if(this._purgeQueue(),c){var f=o(e);return this.queue.push(o(e)),f}return e()},_purgeQueue:function(){this.queue.forEach(function(a){o.cancel(a)}),this.queue=[]}},["width","height"].forEach(function(b){var d=angular.uppercase(b.charAt(0))+b.substr(1);x["element"+d]=function(d,e){var f=d;if(f&&void 0!==f.length&&f.length&&(f=d[0]),f){var g=a(f);return 0===f.offsetWidth&&h.test(g.display)?x.swap(f,i,function(){return c(f,b,e)}):c(f,b,e)}return null},x["outerElement"+d]=function(a,b){return a?x["element"+d].call(this,a,b?"margin":"border"):null}}),x.closestElm=function(a,b){void 0!==a.length&&a.length&&(a=a[0]);var c;["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].some(function(a){return"function"==typeof document.body[a]&&(c=a,!0)});for(var d;null!==a;){if(null!==(d=a.parentElement)&&d[c](b))return d;a=d}return null},x.type=function(a){return Function.prototype.toString.call(a.constructor).match(/function (.*?)\(/)[1]},x.getBorderSize=function(b,c){void 0!==b.length&&b.length&&(b=b[0]);var d=a(b);c=c?"border"+c.charAt(0).toUpperCase()+c.slice(1):"border",c+="Width";var e=parseInt(d[c],10);return isNaN(e)?0:e},x.detectBrowser=function(){var a=g.navigator.userAgent,b={chrome:/chrome/i,safari:/safari/i,firefox:/firefox/i,ie:/internet explorer|trident\//i};for(var c in b)if(b[c].test(a))return c;return"unknown"},x.rtlScrollType=function B(){if(B.type)return B.type
;var a=angular.element('<div dir="rtl" style="font-size: 14px; width: 1px; height: 1px; position: absolute; top: -1000px; overflow: scroll">A</div>')[0],b="reverse";return document.body.appendChild(a),a.scrollLeft>0?b="default":(a.scrollLeft=1,0===a.scrollLeft&&(b="negative")),angular.element(a).remove(),B.type=b,b},x.normalizeScrollLeft=function(a,b){void 0!==a.length&&a.length&&(a=a[0]);var c=a.scrollLeft;if(b.isRTL())switch(x.rtlScrollType()){case"default":return a.scrollWidth-c-a.clientWidth;case"negative":return Math.abs(c);case"reverse":return c}return c},x.denormalizeScrollLeft=function(a,b,c){if(void 0!==a.length&&a.length&&(a=a[0]),c.isRTL())switch(x.rtlScrollType()){case"default":return a.scrollWidth-a.clientWidth-b;case"negative":return-1*b;case"reverse":return b}return b},x.preEval=function(a){var b=t.BRACKET_REGEXP.exec(a);if(b)return(b[1]?x.preEval(b[1]):b[1])+b[2]+(b[3]?x.preEval(b[3]):b[3]);a=a.replace(t.APOS_REGEXP,"\\'");var c=a.split(t.DOT_REGEXP),d=[c.shift()];return angular.forEach(c,function(a){d.push(a.replace(t.FUNC_REGEXP,"']$1"))}),d.join("['")},x.debounce=function(a,b,c){function d(){g=this,f=arguments;var d=function(){e=null,c||(h=a.apply(g,f))},i=c&&!e;return e&&o.cancel(e),e=o(d,b,!1),i&&(h=a.apply(g,f)),h}var e,f,g,h;return d.cancel=function(){o.cancel(e),e=null},d},x.throttle=function(a,b,c){function d(b){g=+new Date,a.apply(e,f),p(function(){h=null},0,1,!1)}c=c||{};var e,f,g=0,h=null;return function(){if(e=this,f=arguments,null===h){var a=+new Date-g;a>b?d():c.trailing&&(h=p(d,b-a,1,!1))}}},x.on={},x.off={},x._events={},x.addOff=function(a){x.off[a]=function(b,c){var d=x._events[a].indexOf(c);d>0&&x._events[a].removeAt(d)}};var y,z,A="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"];return x.on.mousewheel=function(a,b){if(a&&b){var c=angular.element(a);c.data("mousewheel-line-height",d(c)),c.data("mousewheel-page-height",x.elementHeight(c)),c.data("mousewheel-callbacks")||c.data("mousewheel-callbacks",{});var f=c.data("mousewheel-callbacks");f[b]=(Function.prototype.bind||e).call(u,c[0],b);for(var g=A.length;g;)c.on(A[--g],f[b])}},x.off.mousewheel=function(a,b){var c=angular.element(a),d=c.data("mousewheel-callbacks"),e=d[b];if(e)for(var f=A.length;f;)c.off(A[--f],e);delete d[b],0===Object.keys(d).length&&(c.removeData("mousewheel-line-height"),c.removeData("mousewheel-page-height"),c.removeData("mousewheel-callbacks"))},x}]),f.filter("px",function(){return function(a){return a.match(/^[\d\.]+$/)?a+"px":a}})}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){var b={aggregate:{label:"položky"},groupPanel:{description:"Přesuňte záhlaví zde pro vytvoření skupiny dle sloupce."},search:{placeholder:"Hledat...",showingItems:"Zobrazuji položky:",selectedItems:"Vybrané položky:",totalItems:"Celkem položek:",size:"Velikost strany:",first:"První strana",next:"Další strana",previous:"Předchozí strana",last:"Poslední strana"},menu:{text:"Vyberte sloupec:"},sort:{ascending:"Seřadit od A-Z",descending:"Seřadit od Z-A",remove:"Odebrat seřazení"},column:{hide:"Schovat sloupec"},aggregation:{count:"celkem řádků: ",sum:"celkem: ",avg:"avg: ",min:"min.: ",max:"max.: "},pinning:{pinLeft:"Zamknout vlevo",pinRight:"Zamknout vpravo",unpin:"Odemknout"},gridMenu:{columns:"Sloupce:",importerTitle:"Importovat soubor",exporterAllAsCsv:"Exportovat všechna data do csv",exporterVisibleAsCsv:"Exportovat viditelná data do csv",exporterSelectedAsCsv:"Exportovat vybraná data do csv",exporterAllAsPdf:"Exportovat všechna data do pdf",exporterVisibleAsPdf:"Exportovat viditelná data do pdf",exporterSelectedAsPdf:"Exportovat vybraná data do pdf",clearAllFilters:"Odstranit všechny filtry"},importer:{noHeaders:"Názvy sloupců se nepodařilo získat, obsahuje soubor záhlaví?",noObjects:"Data se nepodařilo zpracovat, obsahuje soubor řádky mimo záhlaví?",invalidCsv:"Soubor nelze zpracovat, jedná se o CSV?",invalidJson:"Soubor nelze zpracovat, je to JSON?",jsonNotArray:"Soubor musí obsahovat json. Ukončuji.."},pagination:{sizes:"položek na stránku",totalItems:"položek"},grouping:{group:"Seskupit",ungroup:"Odebrat seskupení",aggregate_count:"Agregace: Count",aggregate_sum:"Agregace: Sum",aggregate_max:"Agregace: Max",aggregate_min:"Agregace: Min",aggregate_avg:"Agregace: Avg",aggregate_remove:"Agregace: Odebrat"}};return a.add("cs",b),a.add("cz",b),a.add("cs-cz",b),a.add("cs-CZ",b),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("da",{aggregate:{label:"artikler"},groupPanel:{description:"Grupér rækker udfra en kolonne ved at trække dens overskift hertil."},search:{placeholder:"Søg...",showingItems:"Viste rækker:",selectedItems:"Valgte rækker:",totalItems:"Rækker totalt:",size:"Side størrelse:",first:"Første side",next:"Næste side",previous:"Forrige side",last:"Sidste side"},menu:{text:"Vælg kolonner:"},sort:{ascending:"Sorter stigende",descending:"Sorter faldende",none:"Sorter ingen",remove:"Fjern sortering"},column:{hide:"Skjul kolonne"},aggregation:{count:"antal rækker: ",sum:"sum: ",avg:"gns: ",min:"min: ",max:"max: "},gridMenu:{columns:"Kolonner:",importerTitle:"Importer fil",exporterAllAsCsv:"Eksporter alle data som csv",exporterVisibleAsCsv:"Eksporter synlige data som csv",exporterSelectedAsCsv:"Eksporter markerede data som csv",exporterAllAsPdf:"Eksporter alle data som pdf",exporterVisibleAsPdf:"Eksporter synlige data som pdf",exporterSelectedAsPdf:"Eksporter markerede data som pdf",clearAllFilters:"Clear all filters"},importer:{noHeaders:"Column names were unable to be derived, does the file have a header?",noObjects:"Objects were not able to be derived, was there data in the file other than headers?",invalidCsv:"File was unable to be processed, is it valid CSV?",invalidJson:"File was unable to be processed, is it valid Json?",jsonNotArray:"Imported json file must contain an array, aborting."},pagination:{aria:{pageToFirst:"Gå til første",pageBack:"Gå tilbage",pageSelected:"Valgte side",pageForward:"Gå frem",pageToLast:"Gå til sidste"},sizes:"genstande per side",totalItems:"genstande",through:"gennem",of:"af"}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("de",{headerCell:{aria:{defaultFilterLabel:"Filter für Spalte",removeFilter:"Filter löschen",columnMenuButtonLabel:"Spaltenmenü"},priority:"Priorität:",filterLabel:"Filter für Spalte: "},aggregate:{label:"Eintrag"},groupPanel:{description:"Ziehen Sie eine Spaltenüberschrift hierhin, um nach dieser Spalte zu gruppieren."},search:{placeholder:"Suche...",showingItems:"Zeige Einträge:",selectedItems:"Ausgewählte Einträge:",totalItems:"Einträge gesamt:",size:"Einträge pro Seite:",first:"Erste Seite",next:"Nächste Seite",previous:"Vorherige Seite",last:"Letzte Seite"},menu:{text:"Spalten auswählen:"},sort:{ascending:"aufsteigend sortieren",descending:"absteigend sortieren",none:"keine Sortierung",remove:"Sortierung zurücksetzen"},column:{hide:"Spalte ausblenden"},aggregation:{count:"Zeilen insgesamt: ",sum:"gesamt: ",avg:"Durchschnitt: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Links anheften",pinRight:"Rechts anheften",unpin:"Lösen"},columnMenu:{close:"Schließen"},gridMenu:{aria:{buttonLabel:"Tabellenmenü"},columns:"Spalten:",importerTitle:"Datei importieren",exporterAllAsCsv:"Alle Daten als CSV exportieren",exporterVisibleAsCsv:"sichtbare Daten als CSV exportieren",exporterSelectedAsCsv:"markierte Daten als CSV exportieren",exporterAllAsPdf:"Alle Daten als PDF exportieren",exporterVisibleAsPdf:"sichtbare Daten als PDF exportieren",exporterSelectedAsPdf:"markierte Daten als PDF exportieren",clearAllFilters:"Alle Filter zurücksetzen"},importer:{noHeaders:"Es konnten keine Spaltennamen ermittelt werden. Sind in der Datei Spaltendefinitionen enthalten?",noObjects:"Es konnten keine Zeileninformationen gelesen werden, Sind in der Datei außer den Spaltendefinitionen auch Daten enthalten?",invalidCsv:"Die Datei konnte nicht eingelesen werden, ist es eine gültige CSV-Datei?",invalidJson:"Die Datei konnte nicht eingelesen werden. Enthält sie gültiges JSON?",jsonNotArray:"Die importierte JSON-Datei muß ein Array enthalten. Breche Import ab."},pagination:{aria:{pageToFirst:"Zum Anfang",pageBack:"Seite zurück",pageSelected:"Ausgwählte Seite",pageForward:"Seite vor",pageToLast:"Zum Ende"},sizes:"Einträge pro Seite",totalItems:"Einträge",through:"bis",of:"von"},grouping:{group:"Gruppieren",ungroup:"Gruppierung aufheben",aggregate_count:"Agg: Anzahl",aggregate_sum:"Agg: Summe",aggregate_max:"Agg: Maximum",aggregate_min:"Agg: Minimum",aggregate_avg:"Agg: Mittelwert",aggregate_remove:"Aggregation entfernen"}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("en",{headerCell:{aria:{defaultFilterLabel:"Filter for column",removeFilter:"Remove Filter",columnMenuButtonLabel:"Column Menu"},priority:"Priority:",filterLabel:"Filter for column: "},aggregate:{label:"items"},groupPanel:{description:"Drag a column header here and drop it to group by that column."},search:{placeholder:"Search...",showingItems:"Showing Items:",selectedItems:"Selected Items:",totalItems:"Total Items:",size:"Page Size:",first:"First Page",next:"Next Page",previous:"Previous Page",last:"Last Page"},menu:{text:"Choose Columns:"},sort:{ascending:"Sort Ascending",descending:"Sort Descending",none:"Sort None",remove:"Remove Sort"},column:{hide:"Hide Column"},aggregation:{count:"total rows: ",sum:"total: ",avg:"avg: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Pin Left",pinRight:"Pin Right",unpin:"Unpin"},columnMenu:{close:"Close"},gridMenu:{aria:{buttonLabel:"Grid Menu"},columns:"Columns:",importerTitle:"Import file",exporterAllAsCsv:"Export all data as csv",exporterVisibleAsCsv:"Export visible data as csv",exporterSelectedAsCsv:"Export selected data as csv",exporterAllAsPdf:"Export all data as pdf",exporterVisibleAsPdf:"Export visible data as pdf",exporterSelectedAsPdf:"Export selected data as pdf",clearAllFilters:"Clear all filters"},importer:{noHeaders:"Column names were unable to be derived, does the file have a header?",noObjects:"Objects were not able to be derived, was there data in the file other than headers?",invalidCsv:"File was unable to be processed, is it valid CSV?",invalidJson:"File was unable to be processed, is it valid Json?",jsonNotArray:"Imported json file must contain an array, aborting."},pagination:{aria:{pageToFirst:"Page to first",pageBack:"Page back",pageSelected:"Selected page",pageForward:"Page forward",pageToLast:"Page to last"},sizes:"items per page",totalItems:"items",through:"through",of:"of"},grouping:{group:"Group",ungroup:"Ungroup",aggregate_count:"Agg: Count",aggregate_sum:"Agg: Sum",aggregate_max:"Agg: Max",aggregate_min:"Agg: Min",aggregate_avg:"Agg: Avg",aggregate_remove:"Agg: Remove"},validate:{error:"Error:",minLength:"Value should be at least THRESHOLD characters long.",maxLength:"Value should be at most THRESHOLD characters long.",required:"A value is needed."}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("es",{aggregate:{label:"Artículos"},groupPanel:{description:"Arrastre un encabezado de columna aquí y suéltelo para agrupar por esa columna."},search:{placeholder:"Buscar...",showingItems:"Artículos Mostrados:",selectedItems:"Artículos Seleccionados:",totalItems:"Artículos Totales:",size:"Tamaño de Página:",first:"Primera Página",next:"Página Siguiente",previous:"Página Anterior",last:"Última Página"},menu:{text:"Elegir columnas:"},sort:{ascending:"Orden Ascendente",descending:"Orden Descendente",remove:"Sin Ordenar"},column:{hide:"Ocultar la columna"},aggregation:{count:"filas totales: ",sum:"total: ",avg:"media: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Fijar a la Izquierda",pinRight:"Fijar a la Derecha",unpin:"Quitar Fijación"},gridMenu:{columns:"Columnas:",importerTitle:"Importar archivo",exporterAllAsCsv:"Exportar todo como csv",exporterVisibleAsCsv:"Exportar vista como csv",exporterSelectedAsCsv:"Exportar selección como csv",exporterAllAsPdf:"Exportar todo como pdf",exporterVisibleAsPdf:"Exportar vista como pdf",exporterSelectedAsPdf:"Exportar selección como pdf",clearAllFilters:"Limpiar todos los filtros"},importer:{noHeaders:"No fue posible derivar los nombres de las columnas, ¿tiene encabezados el archivo?",noObjects:"No fue posible obtener registros, ¿contiene datos el archivo, aparte de los encabezados?",invalidCsv:"No fue posible procesar el archivo, ¿es un CSV válido?",invalidJson:"No fue posible procesar el archivo, ¿es un Json válido?",jsonNotArray:"El archivo json importado debe contener un array, abortando."},pagination:{sizes:"registros por página",totalItems:"registros",of:"de"},grouping:{group:"Agrupar",ungroup:"Desagrupar",aggregate_count:"Agr: Cont",aggregate_sum:"Agr: Sum",aggregate_max:"Agr: Máx",aggregate_min:"Agr: Min",aggregate_avg:"Agr: Prom",aggregate_remove:"Agr: Quitar"}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("fa",{aggregate:{label:"قلم"},groupPanel:{description:"عنوان یک ستون را بگیر و به گروهی از آن ستون رها کن."},search:{placeholder:"جستجو...",showingItems:"نمایش اقلام:",selectedItems:"قلم‌های انتخاب شده:",totalItems:"مجموع اقلام:",size:"اندازه‌ی صفحه:",first:"اولین صفحه",next:"صفحه‌ی‌بعدی",previous:"صفحه‌ی‌ قبلی",last:"آخرین صفحه"},menu:{text:"ستون‌های انتخابی:"},sort:{ascending:"ترتیب صعودی",descending:"ترتیب نزولی",remove:"حذف مرتب کردن"},column:{hide:"پنهان‌کردن ستون"},aggregation:{count:"تعداد: ",sum:"مجموع: ",avg:"میانگین: ",min:"کمترین: ",max:"بیشترین: "},pinning:{pinLeft:"پین کردن سمت چپ",pinRight:"پین کردن سمت راست",unpin:"حذف پین"},gridMenu:{columns:"ستون‌ها:",importerTitle:"وارد کردن فایل",exporterAllAsCsv:"خروجی تمام داده‌ها در فایل csv",exporterVisibleAsCsv:"خروجی داده‌های قابل مشاهده در فایل csv",exporterSelectedAsCsv:"خروجی داده‌های انتخاب‌شده در فایل csv",exporterAllAsPdf:"خروجی تمام داده‌ها در فایل pdf",exporterVisibleAsPdf:"خروجی داده‌های قابل مشاهده در فایل pdf",exporterSelectedAsPdf:"خروجی داده‌های انتخاب‌شده در فایل pdf",clearAllFilters:"پاک کردن تمام فیلتر"},importer:{noHeaders:"نام ستون قابل استخراج نیست. آیا فایل عنوان دارد؟",noObjects:"اشیا قابل استخراج نیستند. آیا به جز عنوان‌ها در فایل داده وجود دارد؟",invalidCsv:"فایل قابل پردازش نیست. آیا فرمت  csv  معتبر است؟",invalidJson:"فایل قابل پردازش نیست. آیا فرمت json   معتبر است؟",jsonNotArray:"فایل json وارد شده باید حاوی آرایه باشد. عملیات ساقط شد."},pagination:{sizes:"اقلام در هر صفحه",totalItems:"اقلام",of:"از"},grouping:{group:"گروه‌بندی",ungroup:"حذف گروه‌بندی",aggregate_count:"Agg: تعداد",aggregate_sum:"Agg: جمع",aggregate_max:"Agg: بیشینه",aggregate_min:"Agg: کمینه",aggregate_avg:"Agg: میانگین",aggregate_remove:"Agg: حذف"}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("fi",{aggregate:{label:"rivit"},groupPanel:{description:"Raahaa ja pudota otsikko tähän ryhmittääksesi sarakkeen mukaan."},search:{placeholder:"Hae...",showingItems:"Näytetään rivejä:",selectedItems:"Valitut rivit:",totalItems:"Rivejä yht.:",size:"Näytä:",first:"Ensimmäinen sivu",next:"Seuraava sivu",previous:"Edellinen sivu",last:"Viimeinen sivu"},menu:{text:"Valitse sarakkeet:"},sort:{ascending:"Järjestä nouseva",descending:"Järjestä laskeva",remove:"Poista järjestys"},column:{hide:"Piilota sarake"},aggregation:{count:"Rivejä yht.: ",sum:"Summa: ",avg:"K.a.: ",min:"Min: ",max:"Max: "},pinning:{pinLeft:"Lukitse vasemmalle",pinRight:"Lukitse oikealle",unpin:"Poista lukitus"},gridMenu:{columns:"Sarakkeet:",importerTitle:"Tuo tiedosto",exporterAllAsCsv:"Vie tiedot csv-muodossa",exporterVisibleAsCsv:"Vie näkyvä tieto csv-muodossa",exporterSelectedAsCsv:"Vie valittu tieto csv-muodossa",exporterAllAsPdf:"Vie tiedot pdf-muodossa",exporterVisibleAsPdf:"Vie näkyvä tieto pdf-muodossa",exporterSelectedAsPdf:"Vie valittu tieto pdf-muodossa",clearAllFilters:"Puhdista kaikki suodattimet"},importer:{noHeaders:"Sarakkeen nimiä ei voitu päätellä, onko tiedostossa otsikkoriviä?",noObjects:"Tietoja ei voitu lukea, onko tiedostossa muuta kuin otsikkot?",invalidCsv:"Tiedostoa ei voitu käsitellä, oliko se CSV-muodossa?",invalidJson:"Tiedostoa ei voitu käsitellä, oliko se JSON-muodossa?",jsonNotArray:"Tiedosto ei sisältänyt taulukkoa, lopetetaan."}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("fr",{headerCell:{aria:{defaultFilterLabel:"Filtre de la colonne",removeFilter:"Supprimer le filtre",columnMenuButtonLabel:"Menu de la colonne"},priority:"Priorité:",filterLabel:"Filtre de la colonne: "},aggregate:{label:"éléments"},groupPanel:{description:"Faites glisser une en-tête de colonne ici pour créer un groupe de colonnes."},search:{placeholder:"Recherche...",showingItems:"Affichage des éléments :",selectedItems:"Éléments sélectionnés :",totalItems:"Nombre total d'éléments:",size:"Taille de page:",first:"Première page",next:"Page Suivante",previous:"Page précédente",last:"Dernière page"},menu:{text:"Choisir des colonnes :"},sort:{ascending:"Trier par ordre croissant",descending:"Trier par ordre décroissant",none:"Aucun tri",remove:"Enlever le tri"},column:{hide:"Cacher la colonne"},aggregation:{count:"lignes totales: ",sum:"total: ",avg:"moy: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Épingler à gauche",pinRight:"Épingler à droite",unpin:"Détacher"},columnMenu:{close:"Fermer"},gridMenu:{aria:{buttonLabel:"Menu du tableau"},columns:"Colonnes:",importerTitle:"Importer un fichier",exporterAllAsCsv:"Exporter toutes les données en CSV",exporterVisibleAsCsv:"Exporter les données visibles en CSV",exporterSelectedAsCsv:"Exporter les données sélectionnées en CSV",exporterAllAsPdf:"Exporter toutes les données en PDF",exporterVisibleAsPdf:"Exporter les données visibles en PDF",exporterSelectedAsPdf:"Exporter les données sélectionnées en PDF",clearAllFilters:"Nettoyez tous les filtres"},importer:{noHeaders:"Impossible de déterminer le nom des colonnes, le fichier possède-t-il une en-tête ?",noObjects:"Aucun objet trouvé, le fichier possède-t-il des données autres que l'en-tête ?",invalidCsv:"Le fichier n'a pas pu être traité, le CSV est-il valide ?",invalidJson:"Le fichier n'a pas pu être traité, le JSON est-il valide ?",jsonNotArray:"Le fichier JSON importé doit contenir un tableau, abandon."},pagination:{aria:{pageToFirst:"Aller à la première page",pageBack:"Page précédente",pageSelected:"Page sélectionnée",pageForward:"Page suivante",pageToLast:"Aller à la dernière page"},sizes:"éléments par page",totalItems:"éléments",through:"à",of:"sur"},grouping:{group:"Grouper",ungroup:"Dégrouper",aggregate_count:"Agg: Compter",aggregate_sum:"Agg: Somme",aggregate_max:"Agg: Max",aggregate_min:"Agg: Min",aggregate_avg:"Agg: Moy",aggregate_remove:"Agg: Retirer"},validate:{error:"Erreur:",minLength:"La valeur doit être supérieure ou égale à THRESHOLD caractères.",maxLength:"La valeur doit être inférieure ou égale à THRESHOLD caractères.",required:"Une valeur est nécéssaire."}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("he",{aggregate:{label:"items"},groupPanel:{description:"גרור עמודה לכאן ושחרר בכדי לקבץ עמודה זו."},search:{placeholder:"חפש...",showingItems:"מציג:",selectedItems:'סה"כ נבחרו:',totalItems:'סה"כ רשומות:',size:"תוצאות בדף:",first:"דף ראשון",next:"דף הבא",previous:"דף קודם",last:"דף אחרון"},menu:{text:"בחר עמודות:"},sort:{ascending:"סדר עולה",descending:"סדר יורד",remove:"בטל"},column:{hide:"טור הסתר"},aggregation:{count:"total rows: ",sum:"total: ",avg:"avg: ",min:"min: ",max:"max: "},gridMenu:{columns:"Columns:",importerTitle:"Import file",exporterAllAsCsv:"Export all data as csv",exporterVisibleAsCsv:"Export visible data as csv",exporterSelectedAsCsv:"Export selected data as csv",exporterAllAsPdf:"Export all data as pdf",exporterVisibleAsPdf:"Export visible data as pdf",exporterSelectedAsPdf:"Export selected data as pdf",clearAllFilters:"Clean all filters"},importer:{noHeaders:"Column names were unable to be derived, does the file have a header?",noObjects:"Objects were not able to be derived, was there data in the file other than headers?",invalidCsv:"File was unable to be processed, is it valid CSV?",invalidJson:"File was unable to be processed, is it valid Json?",jsonNotArray:"Imported json file must contain an array, aborting."}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("hy",{aggregate:{label:"տվյալներ"},groupPanel:{description:"Ըստ սյան խմբավորելու համար քաշեք և գցեք վերնագիրն այստեղ։"},search:{placeholder:"Փնտրում...",showingItems:"Ցուցադրված տվյալներ՝",selectedItems:"Ընտրված:",totalItems:"Ընդամենը՝",size:"Տողերի քանակը էջում՝",first:"Առաջին էջ",next:"Հաջորդ էջ",previous:"Նախորդ էջ",last:"Վերջին էջ"},menu:{text:"Ընտրել սյուները:"},sort:{ascending:"Աճման կարգով",descending:"Նվազման կարգով",remove:"Հանել "},column:{hide:"Թաքցնել սյունը"},aggregation:{count:"ընդամենը տող՝ ",sum:"ընդամենը՝ ",avg:"միջին՝ ",min:"մին՝ ",max:"մաքս՝ "},pinning:{pinLeft:"Կպցնել ձախ կողմում",pinRight:"Կպցնել աջ կողմում",unpin:"Արձակել"},gridMenu:{columns:"Սյուներ:",importerTitle:"Ներմուծել ֆայլ",exporterAllAsCsv:"Արտահանել ամբողջը CSV",exporterVisibleAsCsv:"Արտահանել երևացող տվյալները CSV",exporterSelectedAsCsv:"Արտահանել ընտրված տվյալները CSV",exporterAllAsPdf:"Արտահանել PDF",exporterVisibleAsPdf:"Արտահանել երևացող տվյալները PDF",exporterSelectedAsPdf:"Արտահանել ընտրված տվյալները PDF",clearAllFilters:"Մաքրել բոլոր ֆիլտրերը"},importer:{noHeaders:"Հնարավոր չեղավ որոշել սյան վերնագրերը։ Արդյո՞ք ֆայլը ունի վերնագրեր։",noObjects:"Հնարավոր չեղավ կարդալ տվյալները։ Արդյո՞ք ֆայլում կան տվյալներ։",invalidCsv:"Հնարավոր չեղավ մշակել ֆայլը։ Արդյո՞ք այն վավեր CSV է։",invalidJson:"Հնարավոր չեղավ մշակել ֆայլը։ Արդյո՞ք այն վավեր Json է։",jsonNotArray:"Ներմուծված json ֆայլը պետք է պարունակի զանգված, կասեցվում է։"}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("it",{aggregate:{label:"elementi"},groupPanel:{description:"Trascina un'intestazione all'interno del gruppo della colonna."},search:{placeholder:"Ricerca...",showingItems:"Mostra:",selectedItems:"Selezionati:",totalItems:"Totali:",size:"Tot Pagine:",first:"Prima",next:"Prossima",previous:"Precedente",last:"Ultima"},menu:{text:"Scegli le colonne:"},sort:{ascending:"Asc.",descending:"Desc.",remove:"Annulla ordinamento"},column:{hide:"Nascondi"},aggregation:{count:"righe totali: ",sum:"tot: ",avg:"media: ",min:"minimo: ",max:"massimo: "},pinning:{pinLeft:"Blocca a sx",pinRight:"Blocca a dx",unpin:"Blocca in alto"},gridMenu:{columns:"Colonne:",importerTitle:"Importa",exporterAllAsCsv:"Esporta tutti i dati in CSV",exporterVisibleAsCsv:"Esporta i dati visibili in CSV",exporterSelectedAsCsv:"Esporta i dati selezionati in CSV",exporterAllAsPdf:"Esporta tutti i dati in PDF",exporterVisibleAsPdf:"Esporta i dati visibili in PDF",exporterSelectedAsPdf:"Esporta i dati selezionati in PDF",clearAllFilters:"Pulire tutti i filtri"},importer:{noHeaders:"Impossibile reperire i nomi delle colonne, sicuro che siano indicati all'interno del file?",noObjects:"Impossibile reperire gli oggetti, sicuro che siano indicati all'interno del file?",invalidCsv:"Impossibile elaborare il file, sicuro che sia un CSV?",invalidJson:"Impossibile elaborare il file, sicuro che sia un JSON valido?",jsonNotArray:"Errore! Il file JSON da importare deve contenere un array."},pagination:{aria:{pageToFirst:"Prima",pageBack:"Indietro",pageSelected:"Pagina selezionata",pageForward:"Avanti",pageToLast:"Ultima"},sizes:"elementi per pagina",totalItems:"elementi",through:"a",of:"di"},grouping:{group:"Raggruppa",ungroup:"Separa",aggregate_count:"Agg: N. Elem.",aggregate_sum:"Agg: Somma",aggregate_max:"Agg: Massimo",aggregate_min:"Agg: Minimo",aggregate_avg:"Agg: Media",aggregate_remove:"Agg: Rimuovi"},validate:{error:"Errore:",minLength:"Lunghezza minima pari a THRESHOLD caratteri.",maxLength:"Lunghezza massima pari a THRESHOLD caratteri.",required:"Necessario inserire un valore."}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("ja",{aggregate:{label:"項目"},groupPanel:{description:"ここに列ヘッダをドラッグアンドドロップして、その列でグループ化します。"},search:{placeholder:"検索...",showingItems:"表示中の項目:",selectedItems:"選択した項目:",totalItems:"項目の総数:",size:"ページサイズ:",first:"最初のページ",next:"次のページ",previous:"前のページ",last:"前のページ"},menu:{text:"列の選択:"},sort:{ascending:"昇順に並べ替え",descending:"降順に並べ替え",remove:"並べ替えの解除"},column:{hide:"列の非表示"},aggregation:{count:"合計行数: ",sum:"合計: ",avg:"平均: ",min:"最小: ",max:"最大: "},pinning:{pinLeft:"左に固定",pinRight:"右に固定",unpin:"固定解除"},gridMenu:{columns:"列:",importerTitle:"ファイルのインポート",exporterAllAsCsv:"すべてのデータをCSV形式でエクスポート",exporterVisibleAsCsv:"表示中のデータをCSV形式でエクスポート",exporterSelectedAsCsv:"選択したデータをCSV形式でエクスポート",exporterAllAsPdf:"すべてのデータをPDF形式でエクスポート",exporterVisibleAsPdf:"表示中のデータをPDF形式でエクスポート",exporterSelectedAsPdf:"選択したデータをPDF形式でエクスポート",clearAllFilters:"すべてのフィルタを清掃してください"},importer:{noHeaders:"列名を取得できません。ファイルにヘッダが含まれていることを確認してください。",noObjects:"オブジェクトを取得できません。ファイルにヘッダ以外のデータが含まれていることを確認してください。",invalidCsv:"ファイルを処理できません。ファイルが有効なCSV形式であることを確認してください。",invalidJson:"ファイルを処理できません。ファイルが有効なJSON形式であることを確認してください。",jsonNotArray:"インポートしたJSONファイルには配列が含まれている必要があります。処理を中止します。"},pagination:{aria:{pageToFirst:"最初のページ",pageBack:"前のページ",pageSelected:"現在のページ",pageForward:"次のページ",pageToLast:"最後のページ"},sizes:"項目/ページ",totalItems:"項目",through:"から",of:"項目/全"}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("ko",{aggregate:{label:"아이템"},groupPanel:{description:"컬럼으로 그룹핑하기 위해서는 컬럼 헤더를 끌어 떨어뜨려 주세요."},search:{placeholder:"검색...",showingItems:"항목 보여주기:",selectedItems:"선택 항목:",totalItems:"전체 항목:",size:"페이지 크기:",first:"첫번째 페이지",next:"다음 페이지",previous:"이전 페이지",last:"마지막 페이지"},menu:{text:"컬럼을 선택하세요:"},sort:{ascending:"오름차순 정렬",descending:"내림차순 정렬",remove:"소팅 제거"},column:{hide:"컬럼 제거"},aggregation:{count:"전체 갯수: ",sum:"전체: ",avg:"평균: ",min:"최소: ",max:"최대: "},pinning:{pinLeft:"왼쪽 핀",pinRight:"오른쪽 핀",unpin:"핀 제거"},gridMenu:{columns:"컬럼:",importerTitle:"파일 가져오기",exporterAllAsCsv:"csv로 모든 데이터 내보내기",exporterVisibleAsCsv:"csv로 보이는 데이터 내보내기",exporterSelectedAsCsv:"csv로 선택된 데이터 내보내기",exporterAllAsPdf:"pdf로 모든 데이터 내보내기",exporterVisibleAsPdf:"pdf로 보이는 데이터 내보내기",exporterSelectedAsPdf:"pdf로 선택 데이터 내보내기",clearAllFilters:"모든 필터를 청소"},importer:{noHeaders:"컬럼명이 지정되어 있지 않습니다. 파일에 헤더가 명시되어 있는지 확인해 주세요.",noObjects:"데이터가 지정되어 있지 않습니다. 데이터가 파일에 있는지 확인해 주세요.",invalidCsv:"파일을 처리할 수 없습니다. 올바른 csv인지 확인해 주세요.",invalidJson:"파일을 처리할 수 없습니다. 올바른 json인지 확인해 주세요.",jsonNotArray:"json 파일은 배열을 포함해야 합니다."},pagination:{sizes:"페이지당 항목",totalItems:"전체 항목"}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("nl",{aggregate:{label:"items"},groupPanel:{description:"Sleep hier een kolomnaam heen om op te groeperen."},search:{placeholder:"Zoeken...",showingItems:"Getoonde items:",selectedItems:"Geselecteerde items:",totalItems:"Totaal aantal items:",size:"Items per pagina:",first:"Eerste pagina",next:"Volgende pagina",previous:"Vorige pagina",last:"Laatste pagina"},menu:{text:"Kies kolommen:"},sort:{ascending:"Sorteer oplopend",descending:"Sorteer aflopend",remove:"Verwijder sortering"},column:{hide:"Verberg kolom"},aggregation:{count:"Aantal rijen: ",sum:"Som: ",avg:"Gemiddelde: ",min:"Min: ",max:"Max: "},pinning:{pinLeft:"Zet links vast",pinRight:"Zet rechts vast",unpin:"Maak los"},gridMenu:{columns:"Kolommen:",importerTitle:"Importeer bestand",exporterAllAsCsv:"Exporteer alle data als csv",exporterVisibleAsCsv:"Exporteer zichtbare data als csv",exporterSelectedAsCsv:"Exporteer geselecteerde data als csv",exporterAllAsPdf:"Exporteer alle data als pdf",exporterVisibleAsPdf:"Exporteer zichtbare data als pdf",exporterSelectedAsPdf:"Exporteer geselecteerde data als pdf",clearAllFilters:"Reinig alle filters"},importer:{noHeaders:"Kolomnamen kunnen niet worden afgeleid. Heeft het bestand een header?",noObjects:"Objecten kunnen niet worden afgeleid. Bevat het bestand data naast de headers?",invalidCsv:"Het bestand kan niet verwerkt worden. Is het een valide csv bestand?",invalidJson:"Het bestand kan niet verwerkt worden. Is het valide json?",jsonNotArray:"Het json bestand moet een array bevatten. De actie wordt geannuleerd."},pagination:{sizes:"items per pagina",totalItems:"items",of:"van de"},grouping:{group:"Groepeer",ungroup:"Groepering opheffen",aggregate_count:"Agg: Aantal",aggregate_sum:"Agg: Som",aggregate_max:"Agg: Max",aggregate_min:"Agg: Min",aggregate_avg:"Agg: Gem",aggregate_remove:"Agg: Verwijder"}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("no",{headerCell:{aria:{defaultFilterLabel:"Filter for column",removeFilter:"Remove Filter",columnMenuButtonLabel:"Column Menu"},priority:"Priority:",filterLabel:"Filter for column: "},aggregate:{label:"items"},groupPanel:{description:"Drag a column header here and drop it to group by that column."},search:{placeholder:"Search...",showingItems:"Showing Items:",selectedItems:"Selected Items:",totalItems:"Total Items:",size:"Page Size:",first:"First Page",next:"Next Page",previous:"Previous Page",last:"Last Page"},menu:{text:"Choose Columns:"},sort:{ascending:"Sort Ascending",descending:"Sort Descending",none:"Sort None",remove:"Remove Sort"},column:{hide:"Hide Column"},aggregation:{count:"total rows: ",sum:"total: ",avg:"avg: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Pin Left",pinRight:"Pin Right",unpin:"Unpin"},columnMenu:{close:"Close"},gridMenu:{aria:{buttonLabel:"Grid Menu"},columns:"Kolonner:",importerTitle:"Importer fil",exporterAllAsCsv:"Eksporter alle data som csv",exporterVisibleAsCsv:"Eksporter synlige data som csv",exporterSelectedAsCsv:"Eksporter utvalgte data som csv",exporterAllAsPdf:"Eksporter alle data som pdf",exporterVisibleAsPdf:"Eksporter synlige data som pdf",exporterSelectedAsPdf:"Eksporter utvalgte data som pdf",clearAllFilters:"Clear all filters"},importer:{noHeaders:"Column names were unable to be derived, does the file have a header?",noObjects:"Objects were not able to be derived, was there data in the file other than headers?",invalidCsv:"File was unable to be processed, is it valid CSV?",invalidJson:"File was unable to be processed, is it valid Json?",jsonNotArray:"Imported json file must contain an array, aborting."},pagination:{aria:{pageToFirst:"Page to first",pageBack:"Page back",pageSelected:"Selected page",pageForward:"Page forward",pageToLast:"Page to last"},sizes:"items per page",totalItems:"items",through:"through",of:"of"},grouping:{group:"Group",ungroup:"Ungroup",aggregate_count:"Agg: Count",aggregate_sum:"Agg: Sum",aggregate_max:"Agg: Max",aggregate_min:"Agg: Min",aggregate_avg:"Agg: Avg",aggregate_remove:"Agg: Remove"}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("pl",{headerCell:{aria:{defaultFilterLabel:"Filter dla kolumny",removeFilter:"Usuń filter",columnMenuButtonLabel:"Menu kolumny"},priority:"Prioritet:",filterLabel:"Filtr dla kolumny: "},aggregate:{label:"pozycji"},groupPanel:{
description:"Przeciągnij nagłówek kolumny tutaj, aby pogrupować według niej."},search:{placeholder:"Szukaj...",showingItems:"Widoczne pozycje:",selectedItems:"Zaznaczone pozycje:",totalItems:"Wszystkich pozycji:",size:"Rozmiar strony:",first:"Pierwsza strona",next:"Następna strona",previous:"Poprzednia strona",last:"Ostatnia strona"},menu:{text:"Wybierz kolumny:"},sort:{ascending:"Sortuj rosnąco",descending:"Sortuj malejąco",none:"Brak sortowania",remove:"Wyłącz sortowanie"},column:{hide:"Ukryj kolumne"},aggregation:{count:"Razem pozycji: ",sum:"Razem: ",avg:"Średnia: ",min:"Min: ",max:"Max: "},pinning:{pinLeft:"Przypnij do lewej",pinRight:"Przypnij do prawej",unpin:"Odepnij"},columnMenu:{close:"Zamknij"},gridMenu:{aria:{buttonLabel:"Menu Grida"},columns:"Kolumny:",importerTitle:"Importuj plik",exporterAllAsCsv:"Eksportuj wszystkie dane do csv",exporterVisibleAsCsv:"Eksportuj widoczne dane do csv",exporterSelectedAsCsv:"Eksportuj zaznaczone dane do csv",exporterAllAsPdf:"Eksportuj wszystkie dane do pdf",exporterVisibleAsPdf:"Eksportuj widoczne dane do pdf",exporterSelectedAsPdf:"Eksportuj zaznaczone dane do pdf",clearAllFilters:"Wyczyść filtry"},importer:{noHeaders:"Nie udało się wczytać nazw kolumn. Czy plik posiada nagłówek?",noObjects:"Nie udalo się wczytać pozycji. Czy plik zawiera dane??",invalidCsv:"Nie udało się przetworzyć pliku, jest to prawidlowy plik CSV??",invalidJson:"Nie udało się przetworzyć pliku, jest to prawidlowy plik Json?",jsonNotArray:"Importowany plik json musi zawierać tablicę, importowanie przerwane."},pagination:{aria:{pageToFirst:"Pierwsza strona",pageBack:"Poprzednia strona",pageSelected:"Wybrana strona",pageForward:"Następna strona",pageToLast:"Ostatnia strona"},sizes:"pozycji na stronę",totalItems:"pozycji",through:"do",of:"z"},grouping:{group:"Grupuj",ungroup:"Rozgrupuj",aggregate_count:"Zbiorczo: Razem",aggregate_sum:"Zbiorczo: Suma",aggregate_max:"Zbiorczo: Max",aggregate_min:"Zbiorczo: Min",aggregate_avg:"Zbiorczo: Średnia",aggregate_remove:"Zbiorczo: Usuń"}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("pt-br",{headerCell:{aria:{defaultFilterLabel:"Filtro por coluna",removeFilter:"Remover filtro",columnMenuButtonLabel:"Menu coluna"},priority:"Prioridade:",filterLabel:"Filtro por coluna: "},aggregate:{label:"itens"},groupPanel:{description:"Arraste e solte uma coluna aqui para agrupar por essa coluna"},search:{placeholder:"Procurar...",showingItems:"Mostrando os Itens:",selectedItems:"Items Selecionados:",totalItems:"Total de Itens:",size:"Tamanho da Página:",first:"Primeira Página",next:"Próxima Página",previous:"Página Anterior",last:"Última Página"},menu:{text:"Selecione as colunas:"},sort:{ascending:"Ordenar Ascendente",descending:"Ordenar Descendente",none:"Nenhuma Ordem",remove:"Remover Ordenação"},column:{hide:"Esconder coluna"},aggregation:{count:"total de linhas: ",sum:"total: ",avg:"med: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Fixar Esquerda",pinRight:"Fixar Direita",unpin:"Desprender"},columnMenu:{close:"Fechar"},gridMenu:{aria:{buttonLabel:"Menu Grid"},columns:"Colunas:",importerTitle:"Importar arquivo",exporterAllAsCsv:"Exportar todos os dados como csv",exporterVisibleAsCsv:"Exportar dados visíveis como csv",exporterSelectedAsCsv:"Exportar dados selecionados como csv",exporterAllAsPdf:"Exportar todos os dados como pdf",exporterVisibleAsPdf:"Exportar dados visíveis como pdf",exporterSelectedAsPdf:"Exportar dados selecionados como pdf",clearAllFilters:"Limpar todos os filtros"},importer:{noHeaders:"Nomes de colunas não puderam ser derivados. O arquivo tem um cabeçalho?",noObjects:"Objetos não puderam ser derivados. Havia dados no arquivo, além dos cabeçalhos?",invalidCsv:"Arquivo não pode ser processado. É um CSV válido?",invalidJson:"Arquivo não pode ser processado. É um Json válido?",jsonNotArray:"Arquivo json importado tem que conter um array. Abortando."},pagination:{aria:{pageToFirst:"Primeira página",pageBack:"Página anterior",pageSelected:"Página Selecionada",pageForward:"Proxima",pageToLast:"Anterior"},sizes:"itens por página",totalItems:"itens",through:"através dos",of:"de"},grouping:{group:"Agrupar",ungroup:"Desagrupar",aggregate_count:"Agr: Contar",aggregate_sum:"Agr: Soma",aggregate_max:"Agr: Max",aggregate_min:"Agr: Min",aggregate_avg:"Agr: Med",aggregate_remove:"Agr: Remover"}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("pt",{headerCell:{aria:{defaultFilterLabel:"Filtro por coluna",removeFilter:"Remover filtro",columnMenuButtonLabel:"Menu coluna"},priority:"Prioridade:",filterLabel:"Filtro por coluna: "},aggregate:{label:"itens"},groupPanel:{description:"Arraste e solte uma coluna aqui para agrupar por essa coluna"},search:{placeholder:"Procurar...",showingItems:"Mostrando os Itens:",selectedItems:"Itens Selecionados:",totalItems:"Total de Itens:",size:"Tamanho da Página:",first:"Primeira Página",next:"Próxima Página",previous:"Página Anterior",last:"Última Página"},menu:{text:"Selecione as colunas:"},sort:{ascending:"Ordenar Ascendente",descending:"Ordenar Descendente",none:"Nenhuma Ordem",remove:"Remover Ordenação"},column:{hide:"Esconder coluna"},aggregation:{count:"total de linhas: ",sum:"total: ",avg:"med: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Fixar Esquerda",pinRight:"Fixar Direita",unpin:"Desprender"},columnMenu:{close:"Fechar"},gridMenu:{aria:{buttonLabel:"Menu Grid"},columns:"Colunas:",importerTitle:"Importar ficheiro",exporterAllAsCsv:"Exportar todos os dados como csv",exporterVisibleAsCsv:"Exportar dados visíveis como csv",exporterSelectedAsCsv:"Exportar dados selecionados como csv",exporterAllAsPdf:"Exportar todos os dados como pdf",exporterVisibleAsPdf:"Exportar dados visíveis como pdf",exporterSelectedAsPdf:"Exportar dados selecionados como pdf",clearAllFilters:"Limpar todos os filtros"},importer:{noHeaders:"Nomes de colunas não puderam ser derivados. O ficheiro tem um cabeçalho?",noObjects:"Objetos não puderam ser derivados. Havia dados no ficheiro, além dos cabeçalhos?",invalidCsv:"Ficheiro não pode ser processado. É um CSV válido?",invalidJson:"Ficheiro não pode ser processado. É um Json válido?",jsonNotArray:"Ficheiro json importado tem que conter um array. Interrompendo."},pagination:{aria:{pageToFirst:"Primeira página",pageBack:"Página anterior",pageSelected:"Página Selecionada",pageForward:"Próxima",pageToLast:"Anterior"},sizes:"itens por página",totalItems:"itens",through:"através dos",of:"de"},grouping:{group:"Agrupar",ungroup:"Desagrupar",aggregate_count:"Agr: Contar",aggregate_sum:"Agr: Soma",aggregate_max:"Agr: Max",aggregate_min:"Agr: Min",aggregate_avg:"Agr: Med",aggregate_remove:"Agr: Remover"}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("ro",{headerCell:{aria:{defaultFilterLabel:"Filtru pentru coloana",removeFilter:"Sterge filtru",columnMenuButtonLabel:"Column Menu"},priority:"Prioritate:",filterLabel:"Filtru pentru coloana:"},aggregate:{label:"Elemente"},groupPanel:{description:"Trage un cap de coloana aici pentru a grupa elementele dupa coloana respectiva"},search:{placeholder:"Cauta...",showingItems:"Arata elementele:",selectedItems:"Elementele selectate:",totalItems:"Total elemente:",size:"Marime pagina:",first:"Prima pagina",next:"Pagina urmatoare",previous:"Pagina anterioara",last:"Ultima pagina"},menu:{text:"Alege coloane:"},sort:{ascending:"Ordoneaza crescator",descending:"Ordoneaza descrescator",none:"Fara ordonare",remove:"Sterge ordonarea"},column:{hide:"Ascunde coloana"},aggregation:{count:"total linii: ",sum:"total: ",avg:"medie: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Pin la stanga",pinRight:"Pin la dreapta",unpin:"Sterge pinul"},columnMenu:{close:"Inchide"},gridMenu:{aria:{buttonLabel:"Grid Menu"},columns:"Coloane:",importerTitle:"Incarca fisier",exporterAllAsCsv:"Exporta toate datele ca csv",exporterVisibleAsCsv:"Exporta datele vizibile ca csv",exporterSelectedAsCsv:"Exporta datele selectate ca csv",exporterAllAsPdf:"Exporta toate datele ca pdf",exporterVisibleAsPdf:"Exporta datele vizibile ca pdf",exporterSelectedAsPdf:"Exporta datele selectate ca csv pdf",clearAllFilters:"Sterge toate filtrele"},importer:{noHeaders:"Numele coloanelor nu a putut fi incarcat, acest fisier are un header?",noObjects:"Datele nu au putut fi incarcate, exista date in fisier in afara numelor de coloane?",invalidCsv:"Fisierul nu a putut fi procesat, ati incarcat un CSV valid ?",invalidJson:"Fisierul nu a putut fi procesat, ati incarcat un Json valid?",jsonNotArray:"Json-ul incarcat trebuie sa contina un array, inchidere."},pagination:{aria:{pageToFirst:"Prima pagina",pageBack:"O pagina inapoi",pageSelected:"Pagina selectata",pageForward:"O pagina inainte",pageToLast:"Ultima pagina"},sizes:"Elemente per pagina",totalItems:"elemente",through:"prin",of:"of"},grouping:{group:"Grupeaza",ungroup:"Opreste gruparea",aggregate_count:"Agg: Count",aggregate_sum:"Agg: Sum",aggregate_max:"Agg: Max",aggregate_min:"Agg: Min",aggregate_avg:"Agg: Avg",aggregate_remove:"Agg: Remove"}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("ru",{headerCell:{aria:{defaultFilterLabel:"Фильтр столбца",removeFilter:"Удалить фильтр",columnMenuButtonLabel:"Меню столбца"},priority:"Приоритет:",filterLabel:"Фильтр столбца: "},aggregate:{label:"элементы"},groupPanel:{description:"Для группировки по столбцу перетащите сюда его название."},search:{placeholder:"Поиск...",showingItems:"Показать элементы:",selectedItems:"Выбранные элементы:",totalItems:"Всего элементов:",size:"Размер страницы:",first:"Первая страница",next:"Следующая страница",previous:"Предыдущая страница",last:"Последняя страница"},menu:{text:"Выбрать столбцы:"},sort:{ascending:"По возрастанию",descending:"По убыванию",none:"Без сортировки",remove:"Убрать сортировку"},column:{hide:"Спрятать столбец"},aggregation:{count:"всего строк: ",sum:"итого: ",avg:"среднее: ",min:"мин: ",max:"макс: "},pinning:{pinLeft:"Закрепить слева",pinRight:"Закрепить справа",unpin:"Открепить"},columnMenu:{close:"Закрыть"},gridMenu:{aria:{buttonLabel:"Меню"},columns:"Столбцы:",importerTitle:"Импортировать файл",exporterAllAsCsv:"Экспортировать всё в CSV",exporterVisibleAsCsv:"Экспортировать видимые данные в CSV",exporterSelectedAsCsv:"Экспортировать выбранные данные в CSV",exporterAllAsPdf:"Экспортировать всё в PDF",exporterVisibleAsPdf:"Экспортировать видимые данные в PDF",exporterSelectedAsPdf:"Экспортировать выбранные данные в PDF",clearAllFilters:"Очистите все фильтры"},importer:{noHeaders:"Не удалось получить названия столбцов, есть ли в файле заголовок?",noObjects:"Не удалось получить данные, есть ли в файле строки кроме заголовка?",invalidCsv:"Не удалось обработать файл, это правильный CSV-файл?",invalidJson:"Не удалось обработать файл, это правильный JSON?",jsonNotArray:"Импортируемый JSON-файл должен содержать массив, операция отменена."},pagination:{aria:{pageToFirst:"Первая страница",pageBack:"Предыдущая страница",pageSelected:"Выбранная страница",pageForward:"Следующая страница",pageToLast:"Последняя страница"},sizes:"строк на страницу",totalItems:"строк",through:"по",of:"из"},grouping:{group:"Группировать",ungroup:"Разгруппировать",aggregate_count:"Группировать: Count",aggregate_sum:"Для группы: Сумма",aggregate_max:"Для группы: Максимум",aggregate_min:"Для группы: Минимум",aggregate_avg:"Для группы: Среднее",aggregate_remove:"Для группы: Пусто"}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("sk",{aggregate:{label:"items"},groupPanel:{description:"Pretiahni sem názov stĺpca pre zoskupenie podľa toho stĺpca."},search:{placeholder:"Hľadaj...",showingItems:"Zobrazujem položky:",selectedItems:"Vybraté položky:",totalItems:"Počet položiek:",size:"Počet:",first:"Prvá strana",next:"Ďalšia strana",previous:"Predchádzajúca strana",last:"Posledná strana"},menu:{text:"Vyberte stĺpce:"},sort:{ascending:"Zotriediť vzostupne",descending:"Zotriediť zostupne",remove:"Vymazať triedenie"},aggregation:{count:"total rows: ",sum:"total: ",avg:"avg: ",min:"min: ",max:"max: "},gridMenu:{columns:"Columns:",importerTitle:"Import file",exporterAllAsCsv:"Export all data as csv",exporterVisibleAsCsv:"Export visible data as csv",exporterSelectedAsCsv:"Export selected data as csv",exporterAllAsPdf:"Export all data as pdf",exporterVisibleAsPdf:"Export visible data as pdf",exporterSelectedAsPdf:"Export selected data as pdf",clearAllFilters:"Clear all filters"},importer:{noHeaders:"Column names were unable to be derived, does the file have a header?",noObjects:"Objects were not able to be derived, was there data in the file other than headers?",invalidCsv:"File was unable to be processed, is it valid CSV?",invalidJson:"File was unable to be processed, is it valid Json?",jsonNotArray:"Imported json file must contain an array, aborting."}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("sv",{aggregate:{label:"Artiklar"},groupPanel:{description:"Dra en kolumnrubrik hit och släpp den för att gruppera efter den kolumnen."},search:{placeholder:"Sök...",showingItems:"Visar artiklar:",selectedItems:"Valda artiklar:",totalItems:"Antal artiklar:",size:"Sidstorlek:",first:"Första sidan",next:"Nästa sida",previous:"Föregående sida",last:"Sista sidan"},menu:{text:"Välj kolumner:"},sort:{ascending:"Sortera stigande",descending:"Sortera fallande",remove:"Inaktivera sortering"},column:{hide:"Göm kolumn"},aggregation:{count:"Antal rader: ",sum:"Summa: ",avg:"Genomsnitt: ",min:"Min: ",max:"Max: "},pinning:{pinLeft:"Fäst vänster",pinRight:"Fäst höger",unpin:"Lösgör"},gridMenu:{columns:"Kolumner:",importerTitle:"Importera fil",exporterAllAsCsv:"Exportera all data som CSV",exporterVisibleAsCsv:"Exportera synlig data som CSV",exporterSelectedAsCsv:"Exportera markerad data som CSV",exporterAllAsPdf:"Exportera all data som PDF",exporterVisibleAsPdf:"Exportera synlig data som PDF",exporterSelectedAsPdf:"Exportera markerad data som PDF",clearAllFilters:"Rengör alla filter"},importer:{noHeaders:"Kolumnnamn kunde inte härledas. Har filen ett sidhuvud?",noObjects:"Objekt kunde inte härledas. Har filen data undantaget sidhuvud?",invalidCsv:"Filen kunde inte behandlas, är den en giltig CSV?",invalidJson:"Filen kunde inte behandlas, är den en giltig JSON?",jsonNotArray:"Importerad JSON-fil måste innehålla ett fält. Import avbruten."},pagination:{sizes:"Artiklar per sida",totalItems:"Artiklar"}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("ta",{aggregate:{label:"உருப்படிகள்"},groupPanel:{description:"ஒரு பத்தியை குழுவாக அமைக்க அப்பத்தியின் தலைப்பை இங்கே  இழுத்து வரவும் "},search:{placeholder:"தேடல் ...",showingItems:"உருப்படிகளை காண்பித்தல்:",selectedItems:"தேர்ந்தெடுக்கப்பட்ட  உருப்படிகள்:",totalItems:"மொத்த உருப்படிகள்:",size:"பக்க அளவு: ",first:"முதல் பக்கம்",next:"அடுத்த பக்கம்",previous:"முந்தைய பக்கம் ",last:"இறுதி பக்கம்"},menu:{text:"பத்திகளை தேர்ந்தெடு:"},sort:{ascending:"மேலிருந்து கீழாக",descending:"கீழிருந்து மேலாக",remove:"வரிசையை நீக்கு"},column:{hide:"பத்தியை மறைத்து வை "},aggregation:{count:"மொத்த வரிகள்:",sum:"மொத்தம்: ",avg:"சராசரி: ",min:"குறைந்தபட்ச: ",max:"அதிகபட்ச: "},pinning:{pinLeft:"இடதுபுறமாக தைக்க ",pinRight:"வலதுபுறமாக தைக்க",unpin:"பிரி"},gridMenu:{columns:"பத்திகள்:",importerTitle:"கோப்பு : படித்தல்",exporterAllAsCsv:"எல்லா தரவுகளையும் கோப்பாக்கு: csv",exporterVisibleAsCsv:"இருக்கும் தரவுகளை கோப்பாக்கு: csv",exporterSelectedAsCsv:"தேர்ந்தெடுத்த தரவுகளை கோப்பாக்கு: csv",exporterAllAsPdf:"எல்லா தரவுகளையும் கோப்பாக்கு: pdf",exporterVisibleAsPdf:"இருக்கும் தரவுகளை கோப்பாக்கு: pdf",exporterSelectedAsPdf:"தேர்ந்தெடுத்த தரவுகளை கோப்பாக்கு: pdf",clearAllFilters:"Clear all filters"},importer:{noHeaders:"பத்தியின் தலைப்புகளை பெற இயலவில்லை, கோப்பிற்கு தலைப்பு உள்ளதா?",noObjects:"இலக்குகளை உருவாக்க முடியவில்லை, கோப்பில் தலைப்புகளை தவிர தரவு ஏதேனும் உள்ளதா? ",invalidCsv:"சரிவர நடைமுறை படுத்த இயலவில்லை, கோப்பு சரிதானா? - csv",invalidJson:"சரிவர நடைமுறை படுத்த இயலவில்லை, கோப்பு சரிதானா? - json",jsonNotArray:"படித்த கோப்பில் வரிசைகள் உள்ளது, நடைமுறை ரத்து செய் : json"},pagination:{sizes:"உருப்படிகள் / பக்கம்",totalItems:"உருப்படிகள் "},grouping:{group:"குழு",ungroup:"பிரி",aggregate_count:"மதிப்பீட்டு : எண்ணு",aggregate_sum:"மதிப்பீட்டு : கூட்டல்",aggregate_max:"மதிப்பீட்டு : அதிகபட்சம்",aggregate_min:"மதிப்பீட்டு : குறைந்தபட்சம்",aggregate_avg:"மதிப்பீட்டு : சராசரி",aggregate_remove:"மதிப்பீட்டு : நீக்கு"}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("tr",{headerCell:{aria:{defaultFilterLabel:"Sütun için filtre",removeFilter:"Filtreyi Kaldır",columnMenuButtonLabel:"Sütun Menüsü"},priority:"Öncelik:",filterLabel:"Sütun için filtre: "},aggregate:{label:"kayıtlar"},groupPanel:{description:"Sütuna göre gruplamak için sütun başlığını buraya sürükleyin ve bırakın."},search:{placeholder:"Arama...",showingItems:"Gösterilen Kayıt:",selectedItems:"Seçili Kayıt:",totalItems:"Toplam Kayıt:",size:"Sayfa Boyutu:",first:"İlk Sayfa",next:"Sonraki Sayfa",previous:"Önceki Sayfa",last:"Son Sayfa"},menu:{text:"Sütunları Seç:"},sort:{ascending:"Artan Sırada Sırala",descending:"Azalan Sırada Sırala",none:"Sıralama Yapma",remove:"Sıralamayı Kaldır"},column:{hide:"Sütunu Gizle"},aggregation:{count:"toplam satır: ",sum:"toplam: ",avg:"ort: ",min:"min: ",max:"maks: "},pinning:{pinLeft:"Sola Sabitle",pinRight:"Sağa Sabitle",unpin:"Sabitlemeyi Kaldır"},columnMenu:{close:"Kapat"},gridMenu:{aria:{buttonLabel:"Tablo Menü"},columns:"Sütunlar:",importerTitle:"Dosya içeri aktar",exporterAllAsCsv:"Bütün veriyi CSV olarak dışarı aktar",exporterVisibleAsCsv:"Görünen veriyi CSV olarak dışarı aktar",exporterSelectedAsCsv:"Seçili veriyi CSV olarak dışarı aktar",exporterAllAsPdf:"Bütün veriyi PDF olarak dışarı aktar",exporterVisibleAsPdf:"Görünen veriyi PDF olarak dışarı aktar",exporterSelectedAsPdf:"Seçili veriyi PDF olarak dışarı aktar",clearAllFilters:"Bütün filtreleri kaldır"},importer:{noHeaders:"Sütun isimleri üretilemiyor, dosyanın bir başlığı var mı?",noObjects:"Nesneler üretilemiyor, dosyada başlıktan başka bir veri var mı?",invalidCsv:"Dosya işlenemedi, geçerli bir CSV dosyası mı?",invalidJson:"Dosya işlenemedi, geçerli bir Json dosyası mı?",jsonNotArray:"Alınan Json dosyasında bir dizi bulunmalıdır, işlem iptal ediliyor."},pagination:{aria:{pageToFirst:"İlk sayfaya",pageBack:"Geri git",pageSelected:"Seçili sayfa",pageForward:"İleri git",pageToLast:"Sona git"},sizes:"Sayfadaki nesne sayısı",totalItems:"kayıtlar",through:"",of:""},grouping:{group:"Grupla",ungroup:"Gruplama",aggregate_count:"Yekun: Sayı",aggregate_sum:"Yekun: Toplam",aggregate_max:"Yekun: Maks",aggregate_min:"Yekun: Min",aggregate_avg:"Yekun: Ort",aggregate_remove:"Yekun: Sil"}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("ua",{headerCell:{aria:{defaultFilterLabel:"Фільтр стовпчика",removeFilter:"Видалити фільтр",columnMenuButtonLabel:"Меню ствпчика"},priority:"Пріоритет:",filterLabel:"Фільтр стовпчика: "},aggregate:{label:"елементи"},groupPanel:{description:"Для групування за стовпчиком перетягніть сюди його назву."},search:{placeholder:"Пошук...",showingItems:"Показати елементи:",selectedItems:"Обрані елементи:",totalItems:"Усього елементів:",size:"Розмір сторінки:",first:"Перша сторінка",next:"Наступна сторінка",previous:"Попередня сторінка",last:"Остання сторінка"},menu:{text:"Обрати ствпчики:"},sort:{ascending:"За зростанням",descending:"За спаданням",none:"Без сортування",remove:"Прибрати сортування"},column:{hide:"Приховати стовпчик"},aggregation:{count:"усього рядків: ",sum:"ітого: ",avg:"середнє: ",min:"мін: ",max:"макс: "},pinning:{pinLeft:"Закріпити ліворуч",pinRight:"Закріпити праворуч",unpin:"Відкріпити"},columnMenu:{close:"Закрити"},gridMenu:{aria:{buttonLabel:"Меню"},columns:"Стовпчики:",importerTitle:"Імпортувати файл",exporterAllAsCsv:"Експортувати все в CSV",exporterVisibleAsCsv:"Експортувати видимі дані в CSV",exporterSelectedAsCsv:"Експортувати обрані дані в CSV",exporterAllAsPdf:"Експортувати все в PDF",exporterVisibleAsPdf:"Експортувати видимі дані в PDF",exporterSelectedAsPdf:"Експортувати обрані дані в PDF",clearAllFilters:"Очистити всі фільтри"},importer:{noHeaders:"Не вдалося отримати назви стовпчиків, чи є в файлі заголовок?",noObjects:"Не вдалося отримати дані, чи є в файлі рядки окрім заголовка?",invalidCsv:"Не вдалося обробити файл, чи це коректний CSV-файл?",invalidJson:"Не вдалося обробити файл, чи це коректний JSON?",jsonNotArray:"JSON-файл що імпортується повинен містити масив, операцію скасовано."},pagination:{aria:{pageToFirst:"Перша сторінка",pageBack:"Попередня сторінка",pageSelected:"Обрана сторінка",pageForward:"Наступна сторінка",pageToLast:"Остання сторінка"},sizes:"рядків на сторінку",totalItems:"рядків",through:"по",of:"з"},grouping:{group:"Групувати",ungroup:"Розгрупувати",aggregate_count:"Групувати: Кількість",aggregate_sum:"Для групи: Сума",aggregate_max:"Для групи: Максимум",aggregate_min:"Для групи: Мінімум",aggregate_avg:"Для групи: Серднє",aggregate_remove:"Для групи: Пусто"}}),a}])}])}(),function(){var a=["uiT","uiTranslate"],b=["t","uiTranslate"],c=angular.module("ui.grid.i18n");c.constant("i18nConstants",{MISSING:"[MISSING]",UPDATE_EVENT:"$uiI18n",LOCALE_DIRECTIVE_ALIAS:"uiI18n",DEFAULT_LANG:"en"}),c.service("i18nService",["$log","i18nConstants","$rootScope",function(a,b,c){var d={_langs:{},current:null,get:function(a){return this._langs[a.toLowerCase()]},add:function(a,b){var c=a.toLowerCase();this._langs[c]||(this._langs[c]={}),angular.extend(this._langs[c],b)},getAllLangs:function(){var a=[];if(!this._langs)return a;for(var b in this._langs)a.push(b);return a},setCurrent:function(a){this.current=a.toLowerCase()},getCurrentLang:function(){return this.current}},e={add:function(a,b){"object"==typeof a?angular.forEach(a,function(a){a&&d.add(a,b)}):d.add(a,b)},getAllLangs:function(){return d.getAllLangs()},get:function(a){var b=a||e.getCurrentLang();return d.get(b)},getSafeText:function(a,c){var f=c||e.getCurrentLang(),g=d.get(f);if(!g)return b.MISSING;for(var h=a.split("."),i=g,j=0;j<h.length;++j){if(void 0===i[h[j]]||null===i[h[j]])return b.MISSING;i=i[h[j]]}return i},setCurrentLang:function(a){a&&(d.setCurrent(a),c.$broadcast(b.UPDATE_EVENT))},getCurrentLang:function(){var a=d.getCurrentLang();return a||(a=b.DEFAULT_LANG,d.setCurrent(a)),a}};return e}]);var d=function(a,b){return{compile:function(){return{pre:function(c,d,e){var f=b.LOCALE_DIRECTIVE_ALIAS,g=c.$eval(e[f]);g?c.$watch(e[f],function(){a.setCurrentLang(g)}):e.$$observers&&e.$observe(f,function(){a.setCurrentLang(e[f]||b.DEFAULT_LANG)})}}}}};c.directive("uiI18n",["i18nService","i18nConstants",d]);var e=function(b,c,d){return{restrict:"EA",compile:function(){return{pre:function(e,f,g){var h,i=a[0],j=a[1],k=g[i]||g[j]||f.html(),l=d.MISSING+k;if(g.$$observers){var m=g[i]?i:j;h=g.$observe(m,function(a){a&&f.html(b(a)(c.getCurrentLang())||l)})}var n=b(k),o=e.$on(d.UPDATE_EVENT,function(a){h?h(g[i]||g[j]):f.html(n(c.get())||l)});e.$on("$destroy",o),f.html(n(c.get())||l)}}}}};angular.forEach(a,function(a){c.directive(a,["$parse","i18nService","i18nConstants",e])});var f=function(a,b,c){return function(d){return a(d)(b.get())||c.MISSING+d}};angular.forEach(b,function(a){c.filter(a,["$parse","i18nService","i18nConstants",f])})}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("zh-cn",{headerCell:{aria:{defaultFilterLabel:"列过滤器",removeFilter:"移除过滤器",columnMenuButtonLabel:"列菜单"},priority:"优先级:",filterLabel:"列过滤器: "},aggregate:{label:"行"},groupPanel:{description:"拖曳表头到此处进行分组"},search:{placeholder:"查找",showingItems:"已显示行数：",selectedItems:"已选择行数：",totalItems:"总行数：",size:"每页显示行数：",first:"首页",next:"下一页",previous:"上一页",last:"末页"},menu:{text:"选择列："},sort:{ascending:"升序",descending:"降序",none:"无序",remove:"取消排序"},column:{hide:"隐藏列"},aggregation:{count:"计数：",sum:"求和：",avg:"均值：",min:"最小值：",max:"最大值："},pinning:{pinLeft:"左侧固定",pinRight:"右侧固定",unpin:"取消固定"},columnMenu:{close:"关闭"},gridMenu:{aria:{buttonLabel:"表格菜单"},columns:"列：",importerTitle:"导入文件",exporterAllAsCsv:"导出全部数据到CSV",exporterVisibleAsCsv:"导出可见数据到CSV",exporterSelectedAsCsv:"导出已选数据到CSV",exporterAllAsPdf:"导出全部数据到PDF",exporterVisibleAsPdf:"导出可见数据到PDF",exporterSelectedAsPdf:"导出已选数据到PDF",clearAllFilters:"清除所有过滤器"},importer:{noHeaders:"无法获取列名，确定文件包含表头？",noObjects:"无法获取数据，确定文件包含数据？",invalidCsv:"无法处理文件，确定是合法的CSV文件？",invalidJson:"无法处理文件，确定是合法的JSON文件？",jsonNotArray:"导入的文件不是JSON数组！"},pagination:{aria:{pageToFirst:"第一页",pageBack:"上一页",pageSelected:"当前页",pageForward:"下一页",pageToLast:"最后一页"},sizes:"行每页",totalItems:"行",through:"至",of:"共"},grouping:{group:"分组",ungroup:"取消分组",aggregate_count:"合计: 计数",aggregate_sum:"合计: 求和",aggregate_max:"合计: 最大",aggregate_min:"合计: 最小",aggregate_avg:"合计: 平均",aggregate_remove:"合计: 移除"}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("zh-tw",{aggregate:{label:"行"},groupPanel:{description:"拖曳表頭到此處進行分組"},search:{placeholder:"查找",showingItems:"已顯示行數：",selectedItems:"已選擇行數：",totalItems:"總行數：",size:"每頁顯示行數：",first:"首頁",next:"下壹頁",previous:"上壹頁",last:"末頁"},menu:{text:"選擇列："},sort:{ascending:"升序",descending:"降序",remove:"取消排序"},column:{hide:"隱藏列"},aggregation:{count:"計數：",sum:"求和：",avg:"均值：",min:"最小值：",max:"最大值："},pinning:{pinLeft:"左側固定",pinRight:"右側固定",unpin:"取消固定"},gridMenu:{columns:"列：",importerTitle:"導入文件",exporterAllAsCsv:"導出全部數據到CSV",exporterVisibleAsCsv:"導出可見數據到CSV",exporterSelectedAsCsv:"導出已選數據到CSV",exporterAllAsPdf:"導出全部數據到PDF",exporterVisibleAsPdf:"導出可見數據到PDF",exporterSelectedAsPdf:"導出已選數據到PDF",clearAllFilters:"清除所有过滤器"},importer:{noHeaders:"無法獲取列名，確定文件包含表頭？",noObjects:"無法獲取數據，確定文件包含數據？",invalidCsv:"無法處理文件，確定是合法的CSV文件？",invalidJson:"無法處理文件，確定是合法的JSON文件？",jsonNotArray:"導入的文件不是JSON數組！"},pagination:{sizes:"行每頁",totalItems:"行"}}),a}])}])}(),function(){"use strict";angular.module("ui.grid.autoResize",["ui.grid"]).directive("uiGridAutoResize",["$timeout","gridUtil",function(a,b){return{require:"uiGrid",scope:!1,link:function(a,c,d,e){function f(){i=b.elementHeight(c),h=b.elementWidth(c)}function g(){clearTimeout(j),j=setTimeout(function(){var d=b.elementHeight(c),j=b.elementWidth(c);d!==i||j!==h?(e.grid.gridHeight=d,e.grid.gridWidth=j,e.grid.api.core.raise.gridDimensionChanged(i,h,d,j),a.$apply(function(){e.grid.refresh().then(function(){f(),g()})})):g()},250)}var h,i;f();var j;g(),a.$on("$destroy",function(){clearTimeout(j)})}}}])}(),function(){"use strict";var a=angular.module("ui.grid.cellNav",["ui.grid"]);a.constant("uiGridCellNavConstants",{FEATURE_NAME:"gridCellNav",CELL_NAV_EVENT:"cellNav",direction:{LEFT:0,RIGHT:1,UP:2,DOWN:3,PG_UP:4,PG_DOWN:5},EVENT_TYPE:{KEYDOWN:0,CLICK:1,CLEAR:2}}),a.factory("uiGridCellNavFactory",["gridUtil","uiGridConstants","uiGridCellNavConstants","GridRowColumn","$q",function(a,b,c,d,e){var f=function(a,b,c,d){this.rows=a.visibleRowCache,this.columns=b.visibleColumnCache,this.leftColumns=c?c.visibleColumnCache:[],this.rightColumns=d?d.visibleColumnCache:[],this.bodyContainer=a};return f.prototype.getFocusableCols=function(){return this.leftColumns.concat(this.columns,this.rightColumns).filter(function(a){return a.colDef.allowCellFocus})},f.prototype.getFocusableRows=function(){return this.rows.filter(function(a){return!1!==a.allowCellFocus})},f.prototype.getNextRowCol=function(a,b,d){switch(a){case c.direction.LEFT:return this.getRowColLeft(b,d);case c.direction.RIGHT:return this.getRowColRight(b,d);case c.direction.UP:return this.getRowColUp(b,d);case c.direction.DOWN:return this.getRowColDown(b,d);case c.direction.PG_UP:return this.getRowColPageUp(b,d);case c.direction.PG_DOWN:return this.getRowColPageDown(b,d)}},f.prototype.initializeSelection=function(){var a=this.getFocusableCols(),b=this.getFocusableRows();return 0===a.length||0===b.length?null:new d(b[0],a[0])},f.prototype.getRowColLeft=function(a,b){var c=this.getFocusableCols(),e=this.getFocusableRows(),f=c.indexOf(b),g=e.indexOf(a);-1===f&&(f=1);var h=0===f?c.length-1:f-1;return h>f?0===g?new d(a,c[h]):new d(e[g-1],c[h]):new d(a,c[h])},f.prototype.getRowColRight=function(a,b){var c=this.getFocusableCols(),e=this.getFocusableRows(),f=c.indexOf(b),g=e.indexOf(a);-1===f&&(f=0);var h=f===c.length-1?0:f+1;return f>h?g===e.length-1?new d(a,c[h]):new d(e[g+1],c[h]):new d(a,c[h])},f.prototype.getRowColDown=function(a,b){var c=this.getFocusableCols(),e=this.getFocusableRows(),f=c.indexOf(b),g=e.indexOf(a);return-1===f&&(f=0),g===e.length-1?new d(a,c[f]):new d(e[g+1],c[f])},f.prototype.getRowColPageDown=function(a,b){var c=this.getFocusableCols(),e=this.getFocusableRows(),f=c.indexOf(b),g=e.indexOf(a);-1===f&&(f=0);var h=this.bodyContainer.minRowsToRender();return g>=e.length-h?new d(e[e.length-1],c[f]):new d(e[g+h],c[f])},f.prototype.getRowColUp=function(a,b){var c=this.getFocusableCols(),e=this.getFocusableRows(),f=c.indexOf(b),g=e.indexOf(a);return-1===f&&(f=0),0===g?new d(a,c[f]):new d(e[g-1],c[f])},f.prototype.getRowColPageUp=function(a,b){var c=this.getFocusableCols(),e=this.getFocusableRows(),f=c.indexOf(b),g=e.indexOf(a);-1===f&&(f=0);var h=this.bodyContainer.minRowsToRender();return 0>g-h?new d(e[0],c[f]):new d(e[g-h],c[f])},f}]),a.service("uiGridCellNavService",["gridUtil","uiGridConstants","uiGridCellNavConstants","$q","uiGridCellNavFactory","GridRowColumn","ScrollEvent",function(a,b,c,d,e,f,g){var h={initializeGrid:function(a){a.registerColumnBuilder(h.cellNavColumnBuilder),a.cellNav={},a.cellNav.lastRowCol=null,a.cellNav.focusedCells=[],h.defaultGridOptions(a.options);var b={events:{cellNav:{navigate:function(a,b){},viewPortKeyDown:function(a,b){},viewPortKeyPress:function(a,b){}}},methods:{cellNav:{scrollToFocus:function(b,c){return h.scrollToFocus(a,b,c)},getFocusedCell:function(){return a.cellNav.lastRowCol},getCurrentSelection:function(){return a.cellNav.focusedCells},rowColSelectIndex:function(b){for(var c=-1,d=0;d<a.cellNav.focusedCells.length;d++)if(a.cellNav.focusedCells[d].col.uid===b.col.uid&&a.cellNav.focusedCells[d].row.uid===b.row.uid){c=d;break}return c}}}};a.api.registerEventsFromObject(b.events),a.api.registerMethodsFromObject(b.methods)},defaultGridOptions:function(a){a.modifierKeysToMultiSelectCells=!0===a.modifierKeysToMultiSelectCells},decorateRenderContainers:function(a){var b=a.hasRightContainer()?a.renderContainers.right:null,c=a.hasLeftContainer()?a.renderContainers.left:null;null!==c&&(a.renderContainers.left.cellNav=new e(a.renderContainers.body,c,b,a.renderContainers.body)),null!==b&&(a.renderContainers.right.cellNav=new e(a.renderContainers.body,b,a.renderContainers.body,c)),a.renderContainers.body.cellNav=new e(a.renderContainers.body,a.renderContainers.body,c,b)},getDirection:function(a){return a.keyCode===b.keymap.LEFT||a.keyCode===b.keymap.TAB&&a.shiftKey?c.direction.LEFT:a.keyCode===b.keymap.RIGHT||a.keyCode===b.keymap.TAB?c.direction.RIGHT:a.keyCode===b.keymap.UP||a.keyCode===b.keymap.ENTER&&a.shiftKey?c.direction.UP:a.keyCode===b.keymap.PG_UP?c.direction.PG_UP:a.keyCode===b.keymap.DOWN||a.keyCode===b.keymap.ENTER&&!a.ctrlKey&&!a.altKey?c.direction.DOWN:a.keyCode===b.keymap.PG_DOWN?c.direction.PG_DOWN:null},cellNavColumnBuilder:function(a,b,c){var e=[];return a.allowCellFocus=void 0===a.allowCellFocus||a.allowCellFocus,d.all(e)},scrollToFocus:function(a,b,c){var d=null,e=null;return void 0!==b&&null!==b&&(d=a.getRow(b)),
void 0!==c&&null!==c&&(e=a.getColumn(c.name?c.name:c.field)),a.api.core.scrollToIfNecessary(d,e).then(function(){var b={row:d,col:e};null!==d&&null!==e&&a.cellNav.broadcastCellNav(b)})},getLeftWidth:function(a,b){var c=0;if(!b)return c;var d=a.renderContainers.body.visibleColumnCache.indexOf(b);a.renderContainers.body.visibleColumnCache.forEach(function(a,b){d>b&&(c+=a.drawnWidth)});var e=0===d?0:(d+1)/a.renderContainers.body.visibleColumnCache.length;return c+=b.drawnWidth*e}};return h}]),a.directive("uiGridCellnav",["gridUtil","uiGridCellNavService","uiGridCellNavConstants","uiGridConstants","GridRowColumn","$timeout","$compile",function(a,b,c,d,e,f,g){return{replace:!0,priority:-150,require:"^uiGrid",scope:!1,controller:function(){},compile:function(){return{pre:function(a,f,g,h){var i=a,j=h.grid;b.initializeGrid(j),h.cellNav={},h.cellNav.makeRowCol=function(a){return a instanceof e||(a=new e(a.row,a.col)),a},h.cellNav.getActiveCell=function(){var a=f[0].getElementsByClassName("ui-grid-cell-focus");return a.length>0?a[0]:void 0},h.cellNav.broadcastCellNav=j.cellNav.broadcastCellNav=function(a,b,d){b=!(void 0===b||!b),a=h.cellNav.makeRowCol(a),h.cellNav.broadcastFocus(a,b,d),i.$broadcast(c.CELL_NAV_EVENT,a,b,d)},h.cellNav.clearFocus=j.cellNav.clearFocus=function(){j.cellNav.focusedCells=[],i.$broadcast(c.CELL_NAV_EVENT)},h.cellNav.broadcastFocus=function(a,b,c){b=!(void 0===b||!b),a=h.cellNav.makeRowCol(a);var d=a.row,f=a.col,g=h.grid.api.cellNav.rowColSelectIndex(a);if(null===j.cellNav.lastRowCol||-1===g){var i=new e(d,f);(null===j.cellNav.lastRowCol||j.cellNav.lastRowCol.row!==i.row||j.cellNav.lastRowCol.col!==i.col)&&(j.api.cellNav.raise.navigate(i,j.cellNav.lastRowCol),j.cellNav.lastRowCol=i),h.grid.options.modifierKeysToMultiSelectCells&&b?j.cellNav.focusedCells.push(a):j.cellNav.focusedCells=[a]}else j.options.modifierKeysToMultiSelectCells&&b&&g>=0&&j.cellNav.focusedCells.splice(g,1)},h.cellNav.handleKeyDown=function(a){var e=b.getDirection(a);if(null===e)return null;var f="body";a.uiGridTargetRenderContainerId&&(f=a.uiGridTargetRenderContainerId);var g=h.grid.api.cellNav.getFocusedCell();if(g){var i=h.grid.renderContainers[f].cellNav.getNextRowCol(e,g.row,g.col),k=h.grid.renderContainers[f].cellNav.getFocusableCols(),l=h.grid.api.cellNav.rowColSelectIndex(i);return e===c.direction.LEFT&&i.col===k[k.length-1]&&i.row===g.row&&a.keyCode===d.keymap.TAB&&a.shiftKey?(j.cellNav.focusedCells.splice(l,1),h.cellNav.clearFocus(),!0):e!==c.direction.RIGHT||i.col!==k[0]||i.row!==g.row||a.keyCode!==d.keymap.TAB||a.shiftKey?(j.scrollToIfNecessary(i.row,i.col).then(function(){h.cellNav.broadcastCellNav(i)}),a.stopPropagation(),a.preventDefault(),!1):(j.cellNav.focusedCells.splice(l,1),h.cellNav.clearFocus(),!0)}}},post:function(a,b,d,e){var h=e.grid;!function(){var d='<div id="'+h.id+'-aria-speakable" class="ui-grid-a11y-ariascreenreader-speakable ui-grid-offscreen" aria-live="assertive" role="region" aria-atomic="true" aria-hidden="false" aria-relevant="additions" >&nbsp;</div>',e=g(d)(a);b.prepend(e),a.$on(c.CELL_NAV_EVENT,function(a,b,c,d){if(!d||"focus"!==d.type){for(var g=[],i=h.api.cellNav.getCurrentSelection(),j=0;j<i.length;j++)g.push(h.getCellDisplayValue(i[j].row,i[j].col));var k=g.toString();!function(a){a!==e.text()&&(e[0].style.clip="rect(0px,0px,0px,0px)",e[0].innerHTML="",e[0].style.visibility="hidden",e[0].style.visibility="visible",""!==a&&(e[0].style.clip="auto",e[0].appendChild(document.createTextNode(a+" ")),e[0].style.visibility="hidden",e[0].style.visibility="visible"))}(k)}})}()}}}}}]),a.directive("uiGridRenderContainer",["$timeout","$document","gridUtil","uiGridConstants","uiGridCellNavService","$compile","uiGridCellNavConstants",function(a,b,c,d,e,f,g){return{replace:!0,priority:-99999,require:["^uiGrid","uiGridRenderContainer","?^uiGridCellnav"],scope:!1,compile:function(){return{post:function(b,d,h,i){var j=i[0],k=i[1],l=i[2];if(j.grid.api.cellNav){var m=k.containerId,n=j.grid;if(e.decorateRenderContainers(n),"body"===m){j.grid.options.modifierKeysToMultiSelectCells?d.attr("aria-multiselectable",!0):d.attr("aria-multiselectable",!1);var o=f('<div class="ui-grid-focuser" role="region" aria-live="assertive" aria-atomic="false" tabindex="0" aria-controls="'+n.id+"-aria-speakable "+n.id+'-grid-container" aria-owns="'+n.id+'-grid-container"></div>')(b);d.append(o),o.on("focus",function(a){a.uiGridTargetRenderContainerId=m;var b=j.grid.api.cellNav.getFocusedCell();null===b&&(b=j.grid.renderContainers[m].cellNav.getNextRowCol(g.direction.DOWN,null,null),b.row&&b.col&&j.cellNav.broadcastCellNav(b))}),l.setAriaActivedescendant=function(a){d.attr("aria-activedescendant",a)},l.removeAriaActivedescendant=function(a){d.attr("aria-activedescendant")===a&&d.attr("aria-activedescendant","")},j.focus=function(){c.focus.byElement(o[0])};var p=null;o.on("keydown",function(a){a.uiGridTargetRenderContainerId=m;var b=j.grid.api.cellNav.getFocusedCell();null===j.cellNav.handleKeyDown(a)&&(j.grid.api.cellNav.raise.viewPortKeyDown(a,b),p=b)}),o.on("keypress",function(b){p&&(a(function(){j.grid.api.cellNav.raise.viewPortKeyPress(b,p)},4),p=null)}),b.$on("$destroy",function(){o.off()})}}}}}}}]),a.directive("uiGridViewport",["$timeout","$document","gridUtil","uiGridConstants","uiGridCellNavService","uiGridCellNavConstants","$log","$compile",function(a,b,c,d,e,f,g,h){return{replace:!0,priority:-99999,require:["^uiGrid","^uiGridRenderContainer","?^uiGridCellnav"],scope:!1,compile:function(){return{pre:function(a,b,c,d){},post:function(a,b,c,d){var e=d[0],f=d[1];if(e.grid.api.cellNav){if("body"===f.containerId){var h=e.grid;h.api.core.on.scrollBegin(a,function(a){var b=e.grid.api.cellNav.getFocusedCell();null!==b&&f.colContainer.containsColumn(b.col)&&e.cellNav.clearFocus()}),h.api.core.on.scrollEnd(a,function(a){var b=e.grid.api.cellNav.getFocusedCell();null!==b&&f.colContainer.containsColumn(b.col)&&e.cellNav.broadcastCellNav(b)}),h.api.cellNav.on.navigate(a,function(){e.focus()})}}}}}}}]),a.directive("uiGridCell",["$timeout","$document","uiGridCellNavService","gridUtil","uiGridCellNavConstants","uiGridConstants","GridRowColumn",function(a,b,c,d,e,f,g){return{priority:-150,restrict:"A",require:["^uiGrid","?^uiGridCellnav"],scope:!1,link:function(a,b,c,d){function f(a){a.preventDefault()}function h(){if(!a.focused){b.find("div").addClass("ui-grid-cell-focus"),b.attr("aria-selected",!0),k.setAriaActivedescendant(b.attr("id")),a.focused=!0}}function i(){if(a.focused){b.find("div").removeClass("ui-grid-cell-focus"),b.attr("aria-selected",!1),k.removeAriaActivedescendant(b.attr("id")),a.focused=!1}}var j=d[0],k=d[1];if(j.grid.api.cellNav&&a.col.colDef.allowCellFocus){var l=j.grid;a.focused=!1,b.attr("tabindex",-1),b.find("div").on("click",function(b){j.cellNav.broadcastCellNav(new g(a.row,a.col),b.ctrlKey||b.metaKey,b),b.stopPropagation(),a.$apply()}),b.on("mousedown",f),j.grid.api.edit&&(j.grid.api.edit.on.beginCellEdit(a,function(){b.off("mousedown",f)}),j.grid.api.edit.on.afterCellEdit(a,function(){b.on("mousedown",f)}),j.grid.api.edit.on.cancelCellEdit(a,function(){b.on("mousedown",f)})),b.on("focus",function(b){j.cellNav.broadcastCellNav(new g(a.row,a.col),!1,b),b.stopPropagation(),a.$apply()}),a.$on(e.CELL_NAV_EVENT,function(b,c,d){l.cellNav.focusedCells.some(function(b,c){return b.row===a.row&&b.col===a.col})?h():i()}),a.$on("$destroy",function(){b.find("div").off(),b.off()})}}}}])}(),function(){"use strict";var a=angular.module("ui.grid.edit",["ui.grid"]);a.constant("uiGridEditConstants",{EDITABLE_CELL_TEMPLATE:/EDITABLE_CELL_TEMPLATE/g,EDITABLE_CELL_DIRECTIVE:/editable_cell_directive/g,events:{BEGIN_CELL_EDIT:"uiGridEventBeginCellEdit",END_CELL_EDIT:"uiGridEventEndCellEdit",CANCEL_CELL_EDIT:"uiGridEventCancelCellEdit"}}),a.service("uiGridEditService",["$q","uiGridConstants","gridUtil",function(a,b,c){var d={initializeGrid:function(a){d.defaultGridOptions(a.options),a.registerColumnBuilder(d.editColumnBuilder),a.edit={};var b={events:{edit:{afterCellEdit:function(a,b,c,d){},beginCellEdit:function(a,b,c){},cancelCellEdit:function(a,b){}}},methods:{edit:{}}};a.api.registerEventsFromObject(b.events)},defaultGridOptions:function(a){a.cellEditableCondition=void 0===a.cellEditableCondition||a.cellEditableCondition,a.enableCellEditOnFocus=void 0!==a.enableCellEditOnFocus&&a.enableCellEditOnFocus},editColumnBuilder:function(b,d,e){var f=[];return b.enableCellEdit=void 0===b.enableCellEdit?void 0===e.enableCellEdit?"object"!==b.type:e.enableCellEdit:b.enableCellEdit,b.cellEditableCondition=void 0===b.cellEditableCondition?e.cellEditableCondition:b.cellEditableCondition,b.enableCellEdit&&(b.editableCellTemplate=b.editableCellTemplate||e.editableCellTemplate||"ui-grid/cellEditor",f.push(c.getTemplate(b.editableCellTemplate).then(function(a){d.editableCellTemplate=a},function(a){throw new Error("Couldn't fetch/use colDef.editableCellTemplate '"+b.editableCellTemplate+"'")}))),b.enableCellEditOnFocus=void 0===b.enableCellEditOnFocus?e.enableCellEditOnFocus:b.enableCellEditOnFocus,a.all(f)},isStartEditKey:function(a){return!(a.metaKey||a.keyCode===b.keymap.ESC||a.keyCode===b.keymap.SHIFT||a.keyCode===b.keymap.CTRL||a.keyCode===b.keymap.ALT||a.keyCode===b.keymap.WIN||a.keyCode===b.keymap.CAPSLOCK||a.keyCode===b.keymap.LEFT||a.keyCode===b.keymap.TAB&&a.shiftKey||a.keyCode===b.keymap.RIGHT||a.keyCode===b.keymap.TAB||a.keyCode===b.keymap.UP||a.keyCode===b.keymap.ENTER&&a.shiftKey||a.keyCode===b.keymap.DOWN||a.keyCode===b.keymap.ENTER)}};return d}]),a.directive("uiGridEdit",["gridUtil","uiGridEditService",function(a,b){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(a,c,d,e){b.initializeGrid(e.grid)},post:function(a,b,c,d){}}}}}]),a.directive("uiGridViewport",["uiGridEditConstants",function(a){return{replace:!0,priority:-99998,require:["^uiGrid","^uiGridRenderContainer"],scope:!1,compile:function(){return{post:function(b,c,d,e){var f=e[0];if(f.grid.api.edit&&f.grid.api.cellNav){"body"===e[1].containerId&&(b.$on(a.events.CANCEL_CELL_EDIT,function(){f.focus()}),b.$on(a.events.END_CELL_EDIT,function(){f.focus()}))}}}}}}]),a.directive("uiGridCell",["$compile","$injector","$timeout","uiGridConstants","uiGridEditConstants","gridUtil","$parse","uiGridEditService","$rootScope","$q",function(a,b,c,d,e,f,g,h,i,j){return b.has("uiGridCellNavService")&&b.get("uiGridCellNavService"),{priority:-100,restrict:"A",scope:!1,require:"?^uiGrid",link:function(b,l,m,n){function o(){l.on("dblclick",u),l.on("touchstart",p),n&&n.grid.api.cellNav&&(G=n.grid.api.cellNav.on.viewPortKeyDown(b,function(a,c){null!==c&&(c.row!==b.row||c.col!==b.col||b.col.colDef.enableCellEditOnFocus||s(a))}),F=n.grid.api.cellNav.on.navigate(b,function(a,d){b.col.colDef.enableCellEditOnFocus&&(d&&a.row===d.row&&a.col===d.col||a.row!==b.row||a.col!==b.col||c(function(){u()}))})),b.beginEditEventsWired=!0}function p(a){void 0!==a.originalEvent&&void 0!==a.originalEvent&&(a=a.originalEvent),l.on("touchend",q),C=c(function(){},500),C.then(function(){setTimeout(u,0),l.off("touchend",q)})}function q(a){c.cancel(C),l.off("touchend",q)}function r(){l.off("dblclick",u),l.off("keydown",s),l.off("touchstart",p),F(),G(),b.beginEditEventsWired=!1}function s(a){h.isStartEditKey(a)&&u(a)}function t(a,c){return!c.isSaving&&(angular.isFunction(a.colDef.cellEditableCondition)?a.colDef.cellEditableCondition(b):a.colDef.cellEditableCondition)}function u(a){b.grid.api.core.scrollToIfNecessary(b.row,b.col).then(function(){v(a)})}function v(h){if(!E&&t(b.col,b.row)){var k=b.row.getQualifiedColField(b.col);b.col.colDef.editModelField&&(k=f.preEval("row.entity."+b.col.colDef.editModelField)),B=g(k),A=B(b),z=b.col.editableCellTemplate,z=z.replace(d.MODEL_COL_FIELD,k),z=z.replace(d.COL_FIELD,"grid.getCellValue(row, col)");var m=b.col.colDef.editDropdownFilter?"|"+b.col.colDef.editDropdownFilter:"";z=z.replace(d.CUSTOM_FILTERS,m);var n="text";switch(b.col.colDef.type){case"boolean":n="checkbox";break;case"number":n="number";break;case"date":n="date"}z=z.replace("INPUT_TYPE",n);var o=b.col.colDef.editDropdownOptionsFunction;if(o)j.when(o(b.row.entity,b.col.colDef)).then(function(a){b.editDropdownOptionsArray=a});else{var p=b.col.colDef.editDropdownRowEntityOptionsArrayPath;b.editDropdownOptionsArray=p?y(b.row.entity,p):b.col.colDef.editDropdownOptionsArray}b.editDropdownIdLabel=b.col.colDef.editDropdownIdLabel?b.col.colDef.editDropdownIdLabel:"id",b.editDropdownValueLabel=b.col.colDef.editDropdownValueLabel?b.col.colDef.editDropdownValueLabel:"value";var q=function(){E=!0,r();var c=angular.element(z);l.append(c),D=b.$new(),a(c)(D),angular.element(l.children()[0]).addClass("ui-grid-cell-contents-hidden")};i.$$phase?q():b.$apply(q);var s=b.col.grid.api.core.on.scrollBegin(b,function(){b.grid.disableScrolling||(w(),b.grid.api.edit.raise.afterCellEdit(b.row.entity,b.col.colDef,B(b),A),s(),u(),v())}),u=b.$on(e.events.END_CELL_EDIT,function(){w(),b.grid.api.edit.raise.afterCellEdit(b.row.entity,b.col.colDef,B(b),A),u(),s(),v()}),v=b.$on(e.events.CANCEL_CELL_EDIT,function(){x(),v(),s(),u()});b.$broadcast(e.events.BEGIN_CELL_EDIT,h),c(function(){b.grid.api.edit.raise.beginCellEdit(b.row.entity,b.col.colDef,h)})}}function w(){if(b.grid.disableScrolling=!1,E){n&&n.grid.api.cellNav&&n.focus();var a=angular.element(l.children()[0]);D.$destroy();for(var c=l.children(),e=1;e<c.length;e++)angular.element(c[e]).remove();a.removeClass("ui-grid-cell-contents-hidden"),E=!1,o(),b.grid.api.core.notifyDataChange(d.dataChange.EDIT)}}function x(){b.grid.disableScrolling=!1,E&&(B.assign(b,A),b.$apply(),b.grid.api.edit.raise.cancelCellEdit(b.row.entity,b.col.colDef),w())}function y(a,b){b=b.replace(/\[(\w+)\]/g,".$1"),b=b.replace(/^\./,"");for(var c=b.split(".");c.length;){var d=c.shift();if(!(d in a))return;a=a[d]}return a}var z,A,B,C,D,E=!1;if(b.col.colDef.enableCellEdit){var F=function(){},G=function(){},H=function(){b.col.colDef.enableCellEdit&&!1!==b.row.enableCellEdit?b.beginEditEventsWired||o():b.beginEditEventsWired&&r()};H();var I=b.$watch("row",function(a,b){a!==b&&H()});b.$on("$destroy",I)}}}}]),a.directive("uiGridEditor",["gridUtil","uiGridConstants","uiGridEditConstants","$timeout","uiGridEditService",function(a,b,c,d,e){return{scope:!0,require:["?^uiGrid","?^uiGridRenderContainer","ngModel"],compile:function(){return{pre:function(a,b,c){},post:function(a,f,g,h){var i,j,k;h[0]&&(i=h[0]),h[1]&&(j=h[1]),h[2]&&(k=h[2]),a.$on(c.events.BEGIN_CELL_EDIT,function(b,c){if(d(function(){if(f[0].focus(),!f[0].select||!a.col.colDef.enableCellEditOnFocus&&i&&i.grid.api.cellNav)try{f[0].setSelectionRange(f[0].value.length,f[0].value.length)}catch(b){}else f[0].select()}),i&&i.grid.api.cellNav)var g=i.grid.api.cellNav.on.viewPortKeyPress(a,function(a,b){e.isStartEditKey(a)&&(k.$setViewValue(String.fromCharCode("number"==typeof a.which?a.which:a.keyCode),a),k.$render()),g()});f.on("blur",function(b){a.stopEdit(b)})}),a.deepEdit=!1,a.stopEdit=function(b){a.inputForm&&!a.inputForm.$valid?(b.stopPropagation(),a.$emit(c.events.CANCEL_CELL_EDIT)):a.$emit(c.events.END_CELL_EDIT),a.deepEdit=!1},f.on("click",function(b){"checkbox"!==f[0].type&&(a.deepEdit=!0,d(function(){a.grid.disableScrolling=!0}))}),f.on("keydown",function(d){switch(d.keyCode){case b.keymap.ESC:d.stopPropagation(),a.$emit(c.events.CANCEL_CELL_EDIT)}if(!a.deepEdit||d.keyCode!==b.keymap.LEFT&&d.keyCode!==b.keymap.RIGHT&&d.keyCode!==b.keymap.UP&&d.keyCode!==b.keymap.DOWN)if(i&&i.grid.api.cellNav)d.uiGridTargetRenderContainerId=j.containerId,null!==i.cellNav.handleKeyDown(d)&&a.stopEdit(d);else switch(d.keyCode){case b.keymap.ENTER:case b.keymap.TAB:d.stopPropagation(),d.preventDefault(),a.stopEdit(d)}else d.stopPropagation();return!0})}}}}}]),a.directive("uiGridEditor",["$filter",function(a){function b(a){if(void 0===a||""===a)return null;var b=a.split("-");if(3!==b.length)return null;var c=parseInt(b[0],10),d=parseInt(b[1],10),e=parseInt(b[2],10);return 1>d||1>c||1>e?null:new Date(c,d-1,e)}return{priority:-100,require:"?ngModel",link:function(c,d,e,f){2===angular.version.minor&&e.type&&"date"===e.type&&f&&(f.$formatters.push(function(b){return f.$setValidity(null,!b||!isNaN(b.getTime())),a("date")(b,"yyyy-MM-dd")}),f.$parsers.push(function(a){if(a&&a.length>0){var c=b(a);return f.$setValidity(null,c&&!isNaN(c.getTime())),c}return f.$setValidity(null,!0),null}))}}}]),a.directive("uiGridEditDropdown",["uiGridConstants","uiGridEditConstants",function(a,b){return{require:["?^uiGrid","?^uiGridRenderContainer"],scope:!0,compile:function(){return{pre:function(a,b,c){},post:function(c,d,e,f){var g=f[0],h=f[1];c.$on(b.events.BEGIN_CELL_EDIT,function(){d[0].focus(),d[0].style.width=d[0].parentElement.offsetWidth-1+"px",d.on("blur",function(a){c.stopEdit(a)})}),c.stopEdit=function(a){c.$emit(b.events.END_CELL_EDIT)},d.on("keydown",function(d){switch(d.keyCode){case a.keymap.ESC:d.stopPropagation(),c.$emit(b.events.CANCEL_CELL_EDIT)}if(g&&g.grid.api.cellNav)d.uiGridTargetRenderContainerId=h.containerId,null!==g.cellNav.handleKeyDown(d)&&c.stopEdit(d);else switch(d.keyCode){case a.keymap.ENTER:case a.keymap.TAB:d.stopPropagation(),d.preventDefault(),c.stopEdit(d)}return!0})}}}}}]),a.directive("uiGridEditFileChooser",["gridUtil","uiGridConstants","uiGridEditConstants","$timeout",function(a,b,c,d){return{scope:!0,require:["?^uiGrid","?^uiGridRenderContainer"],compile:function(){return{pre:function(a,b,c){},post:function(b,d,e,f){var g;f[0]&&(g=f[0]),f[1]&&f[1];var i=(g.grid,function(d){var e=d.srcElement||d.target;e&&e.files&&e.files.length>0?("function"==typeof b.col.colDef.editFileChooserCallback?b.col.colDef.editFileChooserCallback(b.row,b.col,e.files):a.logError("You need to set colDef.editFileChooserCallback to use the file chooser"),e.form.reset(),b.$emit(c.events.END_CELL_EDIT)):b.$emit(c.events.CANCEL_CELL_EDIT)});d[0].addEventListener("change",i,!1),b.$on(c.events.BEGIN_CELL_EDIT,function(){d[0].focus(),d[0].select(),d.on("blur",function(a){b.$emit(c.events.END_CELL_EDIT)})})}}}}}])}(),function(){"use strict";var a=angular.module("ui.grid.expandable",["ui.grid"]);a.service("uiGridExpandableService",["gridUtil","$compile",function(a,b){var c={initializeGrid:function(b){b.expandable={},b.expandable.expandedAll=!1,b.options.enableExpandable=!1!==b.options.enableExpandable,b.options.expandableRowHeight=b.options.expandableRowHeight||150,b.options.expandableRowHeaderWidth=b.options.expandableRowHeaderWidth||40,b.options.enableExpandable&&!b.options.expandableRowTemplate&&(a.logError("You have not set the expandableRowTemplate, disabling expandable module"),b.options.enableExpandable=!1);var d={events:{expandable:{rowExpandedBeforeStateChanged:function(a,b){},rowExpandedStateChanged:function(a,b){}}},methods:{expandable:{toggleRowExpansion:function(a){var d=b.getRow(a);null!==d&&c.toggleRowExpansion(b,d)},expandAllRows:function(){c.expandAllRows(b)},collapseAllRows:function(){c.collapseAllRows(b)},toggleAllRows:function(){c.toggleAllRows(b)},expandRow:function(a){var d=b.getRow(a);null===d||d.isExpanded||c.toggleRowExpansion(b,d)},collapseRow:function(a){var d=b.getRow(a);null!==d&&d.isExpanded&&c.toggleRowExpansion(b,d)},getExpandedRows:function(){return c.getExpandedRows(b).map(function(a){return a.entity})}}}};b.api.registerEventsFromObject(d.events),b.api.registerMethodsFromObject(d.methods)},toggleRowExpansion:function(a,b){a.api.expandable.raise.rowExpandedBeforeStateChanged(b),b.isExpanded=!b.isExpanded,angular.isUndefined(b.expandedRowHeight)&&(b.expandedRowHeight=a.options.expandableRowHeight),b.isExpanded?b.height=b.grid.options.rowHeight+b.expandedRowHeight:(b.height=b.grid.options.rowHeight,a.expandable.expandedAll=!1),a.api.expandable.raise.rowExpandedStateChanged(b)},expandAllRows:function(a,b){a.renderContainers.body.visibleRowCache.forEach(function(b){b.isExpanded||c.toggleRowExpansion(a,b)}),a.expandable.expandedAll=!0,a.queueGridRefresh()},collapseAllRows:function(a){a.renderContainers.body.visibleRowCache.forEach(function(b){b.isExpanded&&c.toggleRowExpansion(a,b)}),a.expandable.expandedAll=!1,a.queueGridRefresh()},toggleAllRows:function(a){a.expandable.expandedAll?c.collapseAllRows(a):c.expandAllRows(a)},getExpandedRows:function(a){return a.rows.filter(function(a){return a.isExpanded})}};return c}]),a.directive("uiGridExpandable",["uiGridExpandableService","$templateCache",function(a,b){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(c,d,e,f){if(a.initializeGrid(f.grid),f.grid.options.enableExpandable&&!1!==f.grid.options.enableExpandableRowHeader){var g={name:"expandableButtons",displayName:"",exporterSuppressExport:!0,enableColumnResizing:!1,enableColumnMenu:!1,width:f.grid.options.expandableRowHeaderWidth||40};g.cellTemplate=b.get("ui-grid/expandableRowHeader"),g.headerCellTemplate=b.get("ui-grid/expandableTopRowHeader"),f.grid.addRowHeaderColumn(g,-90)}},post:function(a,b,c,d){}}}}}]),a.directive("uiGrid",["uiGridExpandableService","$templateCache",function(a,b){return{replace:!0,priority:599,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(a,b,c,d){d.grid.api.core.on.renderingComplete(a,function(){a.row&&a.row.grid&&a.row.grid.options&&a.row.grid.options.enableExpandable&&(d.grid.parentRow=a.row)})},post:function(a,b,c,d){}}}}}]),a.directive("uiGridExpandableRow",["uiGridExpandableService","$timeout","$compile","uiGridConstants","gridUtil","$interval","$log",function(a,b,c,d,e,f,g){return{replace:!1,priority:0,scope:!1,compile:function(){return{pre:function(a,b,d,f){e.getTemplate(a.grid.options.expandableRowTemplate).then(function(d){if(a.grid.options.expandableRowScope){var e=a.grid.options.expandableRowScope;for(var f in e)e.hasOwnProperty(f)&&(a[f]=e[f])}var g=angular.element(d);b.append(g),g=c(g)(a),a.row.expandedRendered=!0})},post:function(a,b,c,d){a.$on("$destroy",function(){a.row.expandedRendered=!1})}}}}}]),a.directive("uiGridRow",["$compile","gridUtil","$templateCache",function(a,b,c){return{priority:-200,scope:!1,compile:function(a,b){return{pre:function(a,b,c,d){a.grid.options.enableExpandable&&(a.expandableRow={},a.expandableRow.shouldRenderExpand=function(){return"body"===a.colContainer.name&&!1!==a.grid.options.enableExpandable&&a.row.isExpanded&&(!a.grid.isScrollingVertically||a.row.expandedRendered)},a.expandableRow.shouldRenderFiller=function(){return a.row.isExpanded&&("body"!==a.colContainer.name||a.grid.isScrollingVertically&&!a.row.expandedRendered)})},post:function(a,b,c,d){}}}}}]),a.directive("uiGridViewport",["$compile","gridUtil","$templateCache",function(a,b,c){return{priority:-200,scope:!1,compile:function(a,b){var d=angular.element(a.children().children()[0]),e=c.get("ui-grid/expandableScrollFiller"),f=c.get("ui-grid/expandableRow");return d.append(f),d.append(e),{pre:function(a,b,c,d){},post:function(a,b,c,d){}}}}}])}(),function(){"use strict";var a=angular.module("ui.grid.exporter",["ui.grid"]);a.constant("uiGridExporterConstants",{featureName:"exporter",ALL:"all",VISIBLE:"visible",SELECTED:"selected",CSV_CONTENT:"CSV_CONTENT",BUTTON_LABEL:"BUTTON_LABEL",FILE_NAME:"FILE_NAME"}),a.service("uiGridExporterService",["$q","uiGridExporterConstants","gridUtil","$compile","$interval","i18nService",function(a,b,c,d,e,f){var g={delay:100,initializeGrid:function(a){a.exporter={},this.defaultGridOptions(a.options);var b={events:{exporter:{}},methods:{exporter:{csvExport:function(b,c){g.csvExport(a,b,c)},pdfExport:function(b,c){g.pdfExport(a,b,c)}}}};a.api.registerEventsFromObject(b.events),a.api.registerMethodsFromObject(b.methods),a.api.core.addToGridMenu?g.addToMenu(a):e(function(){a.api.core.addToGridMenu&&g.addToMenu(a)},this.delay,1)},defaultGridOptions:function(a){a.exporterSuppressMenu=!0===a.exporterSuppressMenu,a.exporterMenuLabel=a.exporterMenuLabel?a.exporterMenuLabel:"Export",a.exporterSuppressColumns=a.exporterSuppressColumns?a.exporterSuppressColumns:[],a.exporterCsvColumnSeparator=a.exporterCsvColumnSeparator?a.exporterCsvColumnSeparator:",",a.exporterCsvFilename=a.exporterCsvFilename?a.exporterCsvFilename:"download.csv",a.exporterPdfFilename=a.exporterPdfFilename?a.exporterPdfFilename:"download.pdf",a.exporterOlderExcelCompatibility=!0===a.exporterOlderExcelCompatibility,a.exporterPdfDefaultStyle=a.exporterPdfDefaultStyle?a.exporterPdfDefaultStyle:{fontSize:11},a.exporterPdfTableStyle=a.exporterPdfTableStyle?a.exporterPdfTableStyle:{margin:[0,5,0,15]},a.exporterPdfTableHeaderStyle=a.exporterPdfTableHeaderStyle?a.exporterPdfTableHeaderStyle:{bold:!0,fontSize:12,color:"black"},a.exporterPdfHeader=a.exporterPdfHeader?a.exporterPdfHeader:null,a.exporterPdfFooter=a.exporterPdfFooter?a.exporterPdfFooter:null,a.exporterPdfOrientation=a.exporterPdfOrientation?a.exporterPdfOrientation:"landscape",a.exporterPdfPageSize=a.exporterPdfPageSize?a.exporterPdfPageSize:"A4",a.exporterPdfMaxGridWidth=a.exporterPdfMaxGridWidth?a.exporterPdfMaxGridWidth:720,a.exporterMenuAllData=void 0===a.exporterMenuAllData||a.exporterMenuAllData,a.exporterMenuVisibleData=void 0===a.exporterMenuVisibleData||a.exporterMenuVisibleData,a.exporterMenuSelectedData=void 0===a.exporterMenuSelectedData||a.exporterMenuSelectedData,a.exporterMenuCsv=void 0===a.exporterMenuCsv||a.exporterMenuCsv,a.exporterMenuPdf=void 0===a.exporterMenuPdf||a.exporterMenuPdf,a.exporterPdfCustomFormatter=a.exporterPdfCustomFormatter&&"function"==typeof a.exporterPdfCustomFormatter?a.exporterPdfCustomFormatter:function(a){return a},a.exporterHeaderFilterUseName=!0===a.exporterHeaderFilterUseName,a.exporterFieldCallback=a.exporterFieldCallback?a.exporterFieldCallback:function(a,b,c,d){return d},a.exporterAllDataFn=a.exporterAllDataFn?a.exporterAllDataFn:null,null==a.exporterAllDataFn&&a.exporterAllDataPromise&&(a.exporterAllDataFn=a.exporterAllDataPromise)},addToMenu:function(a){a.api.core.addToGridMenu(a,[{title:f.getSafeText("gridMenu.exporterAllAsCsv"),action:function(a){this.grid.api.exporter.csvExport(b.ALL,b.ALL)},shown:function(){return this.grid.options.exporterMenuCsv&&this.grid.options.exporterMenuAllData},order:200},{title:f.getSafeText("gridMenu.exporterVisibleAsCsv"),action:function(a){this.grid.api.exporter.csvExport(b.VISIBLE,b.VISIBLE)},shown:function(){return this.grid.options.exporterMenuCsv&&this.grid.options.exporterMenuVisibleData},order:201},{title:f.getSafeText("gridMenu.exporterSelectedAsCsv"),action:function(a){this.grid.api.exporter.csvExport(b.SELECTED,b.VISIBLE)},shown:function(){return this.grid.options.exporterMenuCsv&&this.grid.options.exporterMenuSelectedData&&this.grid.api.selection&&this.grid.api.selection.getSelectedRows().length>0},order:202},{title:f.getSafeText("gridMenu.exporterAllAsPdf"),action:function(a){this.grid.api.exporter.pdfExport(b.ALL,b.ALL)},shown:function(){return this.grid.options.exporterMenuPdf&&this.grid.options.exporterMenuAllData},order:203},{title:f.getSafeText("gridMenu.exporterVisibleAsPdf"),action:function(a){this.grid.api.exporter.pdfExport(b.VISIBLE,b.VISIBLE)},shown:function(){return this.grid.options.exporterMenuPdf&&this.grid.options.exporterMenuVisibleData},order:204},{title:f.getSafeText("gridMenu.exporterSelectedAsPdf"),action:function(a){this.grid.api.exporter.pdfExport(b.SELECTED,b.VISIBLE)},shown:function(){return this.grid.options.exporterMenuPdf&&this.grid.options.exporterMenuSelectedData&&this.grid.api.selection&&this.grid.api.selection.getSelectedRows().length>0},order:205}])},csvExport:function(a,b,c){var d=this;this.loadAllDataIfNeeded(a,b,c).then(function(){var e=a.options.showHeader?d.getColumnHeaders(a,c):[],f=d.getData(a,b,c),g=d.formatAsCsv(e,f,a.options.exporterCsvColumnSeparator);d.downloadFile(a.options.exporterCsvFilename,g,a.options.exporterCsvColumnSeparator,a.options.exporterOlderExcelCompatibility)})},loadAllDataIfNeeded:function(c,d,e){if(d===b.ALL&&c.rows.length!==c.options.totalItems&&c.options.exporterAllDataFn)return c.options.exporterAllDataFn().then(function(){c.modifyRows(c.options.data)});var f=a.defer();return f.resolve(),f.promise},getColumnHeaders:function(a,c){var d,e=[];if(c===b.ALL)d=a.columns;else{var f=a.renderContainers.left?a.renderContainers.left.visibleColumnCache.filter(function(a){return a.visible}):[],g=a.renderContainers.body?a.renderContainers.body.visibleColumnCache.filter(function(a){return a.visible}):[],h=a.renderContainers.right?a.renderContainers.right.visibleColumnCache.filter(function(a){return a.visible}):[];d=f.concat(g,h)}return d.forEach(function(b,c){!0!==b.colDef.exporterSuppressExport&&-1===a.options.exporterSuppressColumns.indexOf(b.name)&&e.push({name:b.field,displayName:a.options.exporterHeaderFilter?a.options.exporterHeaderFilterUseName?a.options.exporterHeaderFilter(b.name):a.options.exporterHeaderFilter(b.displayName):b.displayName,width:b.drawnWidth?b.drawnWidth:b.width,align:"number"===b.colDef.type?"right":"left"})}),e},getData:function(a,d,e,f){var g,h,i=[];switch(d){case b.ALL:g=a.rows;break;case b.VISIBLE:g=a.getVisibleRows();break;case b.SELECTED:a.api.selection?g=a.api.selection.getSelectedGridRows():c.logError("selection feature must be enabled to allow selected rows to be exported")}if(e===b.ALL)h=a.columns;else{var j=a.renderContainers.left?a.renderContainers.left.visibleColumnCache.filter(function(a){return a.visible}):[],k=a.renderContainers.body?a.renderContainers.body.visibleColumnCache.filter(function(a){return a.visible}):[],l=a.renderContainers.right?a.renderContainers.right.visibleColumnCache.filter(function(a){return a.visible}):[];h=j.concat(k,l)}return g.forEach(function(c,d){if(!1!==c.exporterEnableExporting){var g=[];h.forEach(function(d,h){if((d.visible||e===b.ALL)&&!0!==d.colDef.exporterSuppressExport&&-1===a.options.exporterSuppressColumns.indexOf(d.name)){var i=f?a.getCellDisplayValue(c,d):a.getCellValue(c,d),j={value:a.options.exporterFieldCallback(a,c,d,i)};d.colDef.exporterPdfAlign&&(j.alignment=d.colDef.exporterPdfAlign),g.push(j)}}),i.push(g)}}),i},formatAsCsv:function(a,b,c){var d=this,e=a.map(function(a){return{value:a.displayName}}),f=e.length>0?d.formatRowAsCsv(this,c)(e)+"\n":"";return f+=b.map(this.formatRowAsCsv(this,c)).join("\n")},formatRowAsCsv:function(a,b){return function(c){return c.map(a.formatFieldAsCsv).join(b)}},formatFieldAsCsv:function(a){return null==a.value?"":"number"==typeof a.value?a.value:"boolean"==typeof a.value?a.value?"TRUE":"FALSE":"string"==typeof a.value?'"'+a.value.replace(/"/g,'""')+'"':JSON.stringify(a.value)},isIE:function(){var a=navigator.userAgent.search(/(?:Edge|MSIE|Trident\/.*; rv:)/),b=!1;return-1!==a&&(b=!0),b},downloadFile:function(a,b,c,d){var e,f=document,g=f.createElement("a"),h="application/octet-stream;charset=utf-8",i=this.isIE();if(navigator.msSaveBlob)return navigator.msSaveOrOpenBlob(new Blob([d?"\ufeff":"",b],{type:h}),a);if(i){var j=f.createElement("iframe");return document.body.appendChild(j),j.contentWindow.document.open("text/html","replace"),j.contentWindow.document.write("sep="+c+"\r\n"+b),j.contentWindow.document.close(),j.contentWindow.focus(),j.contentWindow.document.execCommand("SaveAs",!0,a),document.body.removeChild(j),!0}if("download"in g){var k=new Blob([d?"\ufeff":"",b],{type:h});e=URL.createObjectURL(k),g.setAttribute("download",a)}else e="data:"+h+","+encodeURIComponent(b),g.setAttribute("target","_blank");g.href=e,g.setAttribute("style","display:none;"),f.body.appendChild(g),setTimeout(function(){if(g.click)g.click();else if(document.createEvent){var a=document.createEvent("MouseEvents");a.initEvent("click",!0,!0),g.dispatchEvent(a)}f.body.removeChild(g)},this.delay)},pdfExport:function(a,b,c){var d=this;this.loadAllDataIfNeeded(a,b,c).then(function(){var e=d.getColumnHeaders(a,c),f=d.getData(a,b,c),g=d.prepareAsPdf(a,e,f);d.isIE()||-1!==navigator.appVersion.indexOf("Edge")?d.downloadPDF(a.options.exporterPdfFilename,g):pdfMake.createPdf(g).open()})},downloadPDF:function(a,b){var c,d=document;d.createElement("a"),c=this.isIE();var e;pdfMake.createPdf(b).getBuffer(function(b){if(e=new Blob([b]),
navigator.msSaveBlob)return navigator.msSaveBlob(e,a);if(c){var f=d.createElement("iframe");return document.body.appendChild(f),f.contentWindow.document.open("text/html","replace"),f.contentWindow.document.write(e),f.contentWindow.document.close(),f.contentWindow.focus(),f.contentWindow.document.execCommand("SaveAs",!0,a),document.body.removeChild(f),!0}})},prepareAsPdf:function(a,b,c){var d=this.calculatePdfHeaderWidths(a,b),e=b.map(function(a){return{text:a.displayName,style:"tableHeader"}}),f=c.map(this.formatRowAsPdf(this)),g=[e].concat(f),h={pageOrientation:a.options.exporterPdfOrientation,pageSize:a.options.exporterPdfPageSize,content:[{style:"tableStyle",table:{headerRows:1,widths:d,body:g}}],styles:{tableStyle:a.options.exporterPdfTableStyle,tableHeader:a.options.exporterPdfTableHeaderStyle},defaultStyle:a.options.exporterPdfDefaultStyle};return a.options.exporterPdfLayout&&(h.layout=a.options.exporterPdfLayout),a.options.exporterPdfHeader&&(h.header=a.options.exporterPdfHeader),a.options.exporterPdfFooter&&(h.footer=a.options.exporterPdfFooter),a.options.exporterPdfCustomFormatter&&(h=a.options.exporterPdfCustomFormatter(h)),h},calculatePdfHeaderWidths:function(a,b){var c=0;b.forEach(function(a){"number"==typeof a.width&&(c+=a.width)});var d=0;b.forEach(function(a){if("*"===a.width&&(d+=100),"string"==typeof a.width&&a.width.match(/(\d)*%/)){var b=parseInt(a.width.match(/(\d)*%/)[0]);a.width=c*b/100,d+=a.width}});var e=c+d;return b.map(function(b){return"*"===b.width?b.width:b.width*a.options.exporterPdfMaxGridWidth/e})},formatRowAsPdf:function(a){return function(b){return b.map(a.formatFieldAsPdfString)}},formatFieldAsPdfString:function(a){var b;return b=null==a.value?"":"number"==typeof a.value?a.value.toString():"boolean"==typeof a.value?a.value?"TRUE":"FALSE":"string"==typeof a.value?a.value.replace(/"/g,'""'):JSON.stringify(a.value).replace(/^"/,"").replace(/"$/,""),a.alignment&&"string"==typeof a.alignment&&(b={text:b,alignment:a.alignment}),b}};return g}]),a.directive("uiGridExporter",["uiGridExporterConstants","uiGridExporterService","gridUtil","$compile",function(a,b,c,d){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,link:function(a,c,d,e){b.initializeGrid(e.grid),e.grid.exporter.$scope=a}}}])}(),function(){"use strict";var a=angular.module("ui.grid.grouping",["ui.grid","ui.grid.treeBase"]);a.constant("uiGridGroupingConstants",{featureName:"grouping",rowHeaderColName:"treeBaseRowHeaderCol",EXPANDED:"expanded",COLLAPSED:"collapsed",aggregation:{COUNT:"count",SUM:"sum",MAX:"max",MIN:"min",AVG:"avg"}}),a.service("uiGridGroupingService",["$q","uiGridGroupingConstants","gridUtil","rowSorter","GridRow","gridClassFactory","i18nService","uiGridConstants","uiGridTreeBaseService",function(a,b,c,d,e,f,g,h,i){var j={initializeGrid:function(a,b){i.initializeGrid(a,b),a.grouping={},a.grouping.groupHeaderCache={},j.defaultGridOptions(a.options),a.registerRowsProcessor(j.groupRows,400),a.registerColumnBuilder(j.groupingColumnBuilder),a.registerColumnsProcessor(j.groupingColumnProcessor,400);var c={events:{grouping:{aggregationChanged:{},groupingChanged:{}}},methods:{grouping:{getGrouping:function(b){var c=j.getGrouping(a);return c.grouping.forEach(function(a){a.colName=a.col.name,delete a.col}),c.aggregations.forEach(function(a){a.colName=a.col.name,delete a.col}),c.aggregations=c.aggregations.filter(function(a){return!a.aggregation.source||"grouping"!==a.aggregation.source}),b&&(c.rowExpandedStates=j.getRowExpandedStates(a.grouping.groupingHeaderCache)),c},setGrouping:function(b){j.setGrouping(a,b)},groupColumn:function(b){var c=a.getColumn(b);j.groupColumn(a,c)},ungroupColumn:function(b){var c=a.getColumn(b);j.ungroupColumn(a,c)},clearGrouping:function(){j.clearGrouping(a)},aggregateColumn:function(b,c,d){var e=a.getColumn(b);j.aggregateColumn(a,e,c,d)}}}};a.api.registerEventsFromObject(c.events),a.api.registerMethodsFromObject(c.methods),a.api.core.on.sortChanged(b,j.tidyPriorities)},defaultGridOptions:function(a){a.enableGrouping=!1!==a.enableGrouping,a.groupingShowCounts=!1!==a.groupingShowCounts,a.groupingNullLabel=void 0===a.groupingNullLabel?"Null":a.groupingNullLabel,a.enableGroupHeaderSelection=!0===a.enableGroupHeaderSelection},groupingColumnBuilder:function(a,d,e){if(!1!==a.enableGrouping){void 0===d.grouping&&void 0!==a.grouping?(d.grouping=angular.copy(a.grouping),void 0!==d.grouping.groupPriority&&d.grouping.groupPriority>-1&&(d.treeAggregationFn=i.nativeAggregations()[b.aggregation.COUNT].aggregationFn,d.treeAggregationFinalizerFn=j.groupedFinalizerFn)):void 0===d.grouping&&(d.grouping={}),void 0!==d.grouping&&void 0!==d.grouping.groupPriority&&d.grouping.groupPriority>=0&&(d.suppressRemoveSort=!0);var f={name:"ui.grid.grouping.group",title:g.get().grouping.group,icon:"ui-grid-icon-indent-right",shown:function(){return void 0===this.context.col.grouping||void 0===this.context.col.grouping.groupPriority||this.context.col.grouping.groupPriority<0},action:function(){j.groupColumn(this.context.col.grid,this.context.col)}},h={name:"ui.grid.grouping.ungroup",title:g.get().grouping.ungroup,icon:"ui-grid-icon-indent-left",shown:function(){return void 0!==this.context.col.grouping&&void 0!==this.context.col.grouping.groupPriority&&this.context.col.grouping.groupPriority>=0},action:function(){j.ungroupColumn(this.context.col.grid,this.context.col)}},k={name:"ui.grid.grouping.aggregateRemove",title:g.get().grouping.aggregate_remove,shown:function(){return void 0!==this.context.col.treeAggregationFn},action:function(){j.aggregateColumn(this.context.col.grid,this.context.col,null)}},l=function(a,b){b=b||g.get().grouping["aggregate_"+a]||a;var e={name:"ui.grid.grouping.aggregate"+a,title:b,shown:function(){return void 0===this.context.col.treeAggregation||void 0===this.context.col.treeAggregation.type||this.context.col.treeAggregation.type!==a},action:function(){j.aggregateColumn(this.context.col.grid,this.context.col,a)}};c.arrayContainsObjectWithProperty(d.menuItems,"name","ui.grid.grouping.aggregate"+a)||d.menuItems.push(e)};!1!==d.colDef.groupingShowGroupingMenu&&(c.arrayContainsObjectWithProperty(d.menuItems,"name","ui.grid.grouping.group")||d.menuItems.push(f),c.arrayContainsObjectWithProperty(d.menuItems,"name","ui.grid.grouping.ungroup")||d.menuItems.push(h)),!1!==d.colDef.groupingShowAggregationMenu&&(angular.forEach(i.nativeAggregations(),function(a,b){l(b)}),angular.forEach(e.treeCustomAggregations,function(a,b){l(b,a.menuTitle)}),c.arrayContainsObjectWithProperty(d.menuItems,"name","ui.grid.grouping.aggregateRemove")||d.menuItems.push(k))}},groupingColumnProcessor:function(a,b){return a=j.moveGroupColumns(this,a,b)},groupedFinalizerFn:function(a){var b=this;void 0!==a.groupVal?(a.rendered=a.groupVal,b.grid.options.groupingShowCounts&&"date"!==b.colDef.type&&(a.rendered+=" ("+a.value+")")):a.rendered=null},moveGroupColumns:function(a,b,c){return!1===a.options.moveGroupColumns?b:(b.forEach(function(a,b){a.groupingPosition=b}),b.sort(function(a,b){var c,d;return c=a.isRowHeader?a.headerPriority:void 0===a.grouping||void 0===a.grouping.groupPriority||a.grouping.groupPriority<0?null:a.grouping.groupPriority,d=b.isRowHeader?b.headerPriority:void 0===b.grouping||void 0===b.grouping.groupPriority||b.grouping.groupPriority<0?null:b.grouping.groupPriority,null!==c&&null===d?-1:null!==d&&null===c?1:null!==c&&null!==d?c-d:a.groupingPosition-b.groupingPosition}),b.forEach(function(a,b){delete a.groupingPosition}),b)},groupColumn:function(a,c){void 0===c.grouping&&(c.grouping={});var d=j.getGrouping(a);c.grouping.groupPriority=d.grouping.length,c.sort?(void 0===c.sort.direction||null===c.sort.direction)&&(c.sort.direction=h.ASC):c.sort={direction:h.ASC},c.treeAggregation={type:b.aggregation.COUNT,source:"grouping"},c.treeAggregationFn=i.nativeAggregations()[b.aggregation.COUNT].aggregationFn,c.treeAggregationFinalizerFn=j.groupedFinalizerFn,a.api.grouping.raise.groupingChanged(c),a.api.core.raise.sortChanged(a,a.getColumnSorting()),a.queueGridRefresh()},ungroupColumn:function(a,b){void 0!==b.grouping&&(delete b.grouping.groupPriority,delete b.treeAggregation,delete b.customTreeAggregationFinalizer,j.tidyPriorities(a),a.api.grouping.raise.groupingChanged(b),a.queueGridRefresh())},aggregateColumn:function(a,b,c){void 0!==b.grouping&&void 0!==b.grouping.groupPriority&&b.grouping.groupPriority>=0&&j.ungroupColumn(a,b);var d={};void 0!==a.options.treeCustomAggregations[c]?d=a.options.treeCustomAggregations[c]:void 0!==i.nativeAggregations()[c]&&(d=i.nativeAggregations()[c]),b.treeAggregation={type:c,label:g.get().aggregation[d.label]||d.label},b.treeAggregationFn=d.aggregationFn,b.treeAggregationFinalizerFn=d.finalizerFn,a.api.grouping.raise.aggregationChanged(b),a.queueGridRefresh()},setGrouping:function(a,b){void 0!==b&&(j.clearGrouping(a),b.grouping&&b.grouping.length&&b.grouping.length>0&&b.grouping.forEach(function(b){var c=a.getColumn(b.colName);c&&j.groupColumn(a,c)}),b.aggregations&&b.aggregations.length&&b.aggregations.forEach(function(b){var c=a.getColumn(b.colName);c&&j.aggregateColumn(a,c,b.aggregation.type)}),b.rowExpandedStates&&j.applyRowExpandedStates(a.grouping.groupingHeaderCache,b.rowExpandedStates))},clearGrouping:function(a){var b=j.getGrouping(a);b.grouping.length>0&&b.grouping.forEach(function(b){b.col||(b.col=a.getColumn(b.colName)),j.ungroupColumn(a,b.col)}),b.aggregations.length>0&&b.aggregations.forEach(function(b){b.col||(b.col=a.getColumn(b.colName)),j.aggregateColumn(a,b.col,null)})},tidyPriorities:function(a){void 0!==a&&void 0===a.grid||void 0===this.grid||(a=this.grid);var b=[],c=[];a.columns.forEach(function(a,d){void 0!==a.grouping&&void 0!==a.grouping.groupPriority&&a.grouping.groupPriority>=0?b.push(a):void 0!==a.sort&&void 0!==a.sort.priority&&a.sort.priority>=0&&c.push(a)}),b.sort(function(a,b){return a.grouping.groupPriority-b.grouping.groupPriority}),b.forEach(function(a,b){a.grouping.groupPriority=b,a.suppressRemoveSort=!0,void 0===a.sort&&(a.sort={}),a.sort.priority=b});var d=b.length;c.sort(function(a,b){return a.sort.priority-b.sort.priority}),c.forEach(function(a,b){a.sort.priority=d,a.suppressRemoveSort=a.colDef.suppressRemoveSort,d++})},groupRows:function(a){if(0===a.length)return a;var b=this;b.grouping.oldGroupingHeaderCache=b.grouping.groupingHeaderCache||{},b.grouping.groupingHeaderCache={};for(var c=j.initialiseProcessingState(b),e=function(e,h){var i=b.getCellValue(g,e.col);e.initialised&&0===d.getSortFn(b,e.col,a)(i,e.currentValue)||(j.insertGroupHeader(b,a,f,c,h),f++)},f=0;f<a.length;f++){var g=a[f];g.visible&&c.forEach(e)}return delete b.grouping.oldGroupingHeaderCache,a},initialiseProcessingState:function(a){var b=[];return j.getGrouping(a).grouping.forEach(function(a,c){b.push({fieldName:a.field,col:a.col,initialised:!1,currentValue:null,currentRow:null})}),b},getGrouping:function(a){var b=[],c=[];return a.columns.forEach(function(a,d){a.grouping&&void 0!==a.grouping.groupPriority&&a.grouping.groupPriority>=0&&b.push({field:a.field,col:a,groupPriority:a.grouping.groupPriority,grouping:a.grouping}),a.treeAggregation&&a.treeAggregation.type&&c.push({field:a.field,col:a,aggregation:a.treeAggregation})}),b.sort(function(a,b){return a.groupPriority-b.groupPriority}),b.forEach(function(a,b){a.grouping.groupPriority=b,a.groupPriority=b,delete a.grouping}),{grouping:b,aggregations:c}},insertGroupHeader:function(a,b,c,d,g){var h=(d[g].fieldName,d[g].col),i=a.getCellValue(b[c],h),k=i;(void 0===i||null===i)&&(k=a.options.groupingNullLabel);for(var l=function(a){return angular.isObject(a)?JSON.stringify(a):a},m=a.grouping.oldGroupingHeaderCache,n=0;g>n;n++)m&&m[l(d[n].currentValue)]&&(m=m[l(d[n].currentValue)].children);var o;for(m&&m[l(i)]?(o=m[l(i)].row,o.entity={}):(o=new e({},null,a),f.rowTemplateAssigner.call(a,o)),o.entity["$$"+d[g].col.uid]={groupVal:k},o.treeLevel=g,o.groupHeader=!0,o.internalRow=!0,o.enableCellEdit=!1,o.enableSelection=a.options.enableGroupHeaderSelection,d[g].initialised=!0,d[g].currentValue=i,d[g].currentRow=o,j.finaliseProcessingState(d,g+1),b.splice(c,0,o),m=a.grouping.groupingHeaderCache,n=0;g>n;n++)m=m[l(d[n].currentValue)].children;m[l(i)]={row:o,children:{}}},finaliseProcessingState:function(a,b){for(var c=b;c<a.length;c++)a[c].initialised=!1,a[c].currentRow=null,a[c].currentValue=null},getRowExpandedStates:function(a){if(void 0===a)return{};var b={};return angular.forEach(a,function(a,c){b[c]={state:a.row.treeNode.state},a.children?b[c].children=j.getRowExpandedStates(a.children):b[c].children={}}),b},applyRowExpandedStates:function(a,b){void 0!==b&&angular.forEach(b,function(b,c){a[c]&&(a[c].row.treeNode.state=b.state,b.children&&a[c].children&&j.applyRowExpandedStates(a[c].children,b.children))})}};return j}]),a.directive("uiGridGrouping",["uiGridGroupingConstants","uiGridGroupingService","$templateCache",function(a,b,c){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(a,c,d,e){!1!==e.grid.options.enableGrouping&&b.initializeGrid(e.grid,a)},post:function(a,b,c,d){}}}}}])}(),function(){"use strict";var a=angular.module("ui.grid.importer",["ui.grid"]);a.constant("uiGridImporterConstants",{featureName:"importer"}),a.service("uiGridImporterService",["$q","uiGridConstants","uiGridImporterConstants","gridUtil","$compile","$interval","i18nService","$window",function(a,b,c,d,e,f,g,h){var i={initializeGrid:function(a,b){b.importer={$scope:a},this.defaultGridOptions(b.options);var c={events:{importer:{}},methods:{importer:{importFile:function(a){i.importThisFile(b,a)}}}};b.api.registerEventsFromObject(c.events),b.api.registerMethodsFromObject(c.methods),b.options.enableImporter&&b.options.importerShowMenu&&(b.api.core.addToGridMenu?i.addToMenu(b):f(function(){b.api.core.addToGridMenu&&i.addToMenu(b)},100,1))},defaultGridOptions:function(a){a.enableImporter||void 0===a.enableImporter?h.hasOwnProperty("File")&&h.hasOwnProperty("FileReader")&&h.hasOwnProperty("FileList")&&h.hasOwnProperty("Blob")?a.enableImporter=!0:(d.logError("The File APIs are not fully supported in this browser, grid importer cannot be used."),a.enableImporter=!1):a.enableImporter=!1,a.importerProcessHeaders=a.importerProcessHeaders||i.processHeaders,a.importerHeaderFilter=a.importerHeaderFilter||function(a){return a},a.importerErrorCallback&&"function"==typeof a.importerErrorCallback||delete a.importerErrorCallback,!0!==a.enableImporter||a.importerDataAddCallback||(d.logError("You have not set an importerDataAddCallback, importer is disabled"),a.enableImporter=!1),a.importerShowMenu=!1!==a.importerShowMenu,a.importerObjectCallback=a.importerObjectCallback||function(a,b){return b}},addToMenu:function(a){a.api.core.addToGridMenu(a,[{title:g.getSafeText("gridMenu.importerTitle"),order:150},{templateUrl:"ui-grid/importerMenuItemContainer",action:function(b){this.grid.api.importer.importAFile(a)},order:151}])},importThisFile:function(a,b){if(!b)return void d.logError("No file object provided to importThisFile, should be impossible, aborting");var c=new FileReader;switch(b.type){case"application/json":c.onload=i.importJsonClosure(a);break;default:c.onload=i.importCsvClosure(a)}c.readAsText(b)},importJsonClosure:function(a){return function(b){var c,d=[],e=i.parseJson(a,b);null!==e&&(e.forEach(function(b,e){c=i.newObject(a),angular.extend(c,b),c=a.options.importerObjectCallback(a,c),d.push(c)}),i.addObjects(a,d))}},parseJson:function(a,b){var c;try{c=JSON.parse(b.target.result)}catch(d){return void i.alertError(a,"importer.invalidJson","File could not be processed, is it valid json? Content was: ",b.target.result)}return Array.isArray(c)?c:(i.alertError(a,"importer.jsonNotarray","Import failed, file is not an array, file was: ",b.target.result),[])},importCsvClosure:function(a){return function(b){var c=i.parseCsv(b);if(!c||c.length<1)return void i.alertError(a,"importer.invalidCsv","File could not be processed, is it valid csv? Content was: ",b.target.result);var d=i.createCsvObjects(a,c);return d&&0!==d.length?void i.addObjects(a,d):void i.alertError(a,"importer.noObjects","Objects were not able to be derived, content was: ",b.target.result)}},parseCsv:function(a){var b=a.target.result;return CSV.parse(b)},createCsvObjects:function(a,b){var c=a.options.importerProcessHeaders(a,b.shift());if(!c||0===c.length)return i.alertError(a,"importer.noHeaders","Column names could not be derived, content was: ",b),[];var d,e=[];return b.forEach(function(b,f){d=i.newObject(a),null!==b&&b.forEach(function(a,b){null!==c[b]&&(d[c[b]]=a)}),d=a.options.importerObjectCallback(a,d),e.push(d)}),e},processHeaders:function(a,b){var c=[];if(a.options.columnDefs&&0!==a.options.columnDefs.length){var d=i.flattenColumnDefs(a,a.options.columnDefs);return b.forEach(function(a,b){d[a]?c.push(d[a]):d[a.toLowerCase()]?c.push(d[a.toLowerCase()]):c.push(null)}),c}return b.forEach(function(a,b){c.push(a.replace(/[^0-9a-zA-Z\-_]/g,"_"))}),c},flattenColumnDefs:function(a,b){var c={};return b.forEach(function(b,d){b.name&&(c[b.name]=b.field||b.name,c[b.name.toLowerCase()]=b.field||b.name),b.field&&(c[b.field]=b.field||b.name,c[b.field.toLowerCase()]=b.field||b.name),b.displayName&&(c[b.displayName]=b.field||b.name,c[b.displayName.toLowerCase()]=b.field||b.name),b.displayName&&a.options.importerHeaderFilter&&(c[a.options.importerHeaderFilter(b.displayName)]=b.field||b.name,c[a.options.importerHeaderFilter(b.displayName).toLowerCase()]=b.field||b.name)}),c},addObjects:function(a,c,d){if(a.api.rowEdit){var e=a.registerDataChangeCallback(function(){a.api.rowEdit.setRowsDirty(c),e()},[b.dataChange.ROW]);a.importer.$scope.$on("$destroy",e)}a.importer.$scope.$apply(a.options.importerDataAddCallback(a,c))},newObject:function(a){return void 0!==a.options&&void 0!==a.options.importerNewObject?new a.options.importerNewObject:{}},alertError:function(a,b,c,e){a.options.importerErrorCallback?a.options.importerErrorCallback(a,b,c,e):(h.alert(g.getSafeText(b)),d.logError(c+e))}};return i}]),a.directive("uiGridImporter",["uiGridImporterConstants","uiGridImporterService","gridUtil","$compile",function(a,b,c,d){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,link:function(a,c,d,e){b.initializeGrid(a,e.grid)}}}]),a.directive("uiGridImporterMenuItem",["uiGridImporterConstants","uiGridImporterService","gridUtil","$compile",function(a,b,c,d){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,templateUrl:"ui-grid/importerMenuItem",link:function(a,d,e,f){var g=function(a){var c=a.srcElement||a.target;if(c&&c.files&&1===c.files.length){var d=c.files[0];b.importThisFile(i,d),c.form.reset()}},h=d[0].querySelectorAll(".ui-grid-importer-file-chooser"),i=f.grid;1!==h.length?c.logError("Found > 1 or < 1 file choosers within the menu item, error, cannot continue"):h[0].addEventListener("change",g,!1)}}}])}(),function(){"use strict";var a=angular.module("ui.grid.infiniteScroll",["ui.grid"]);a.service("uiGridInfiniteScrollService",["gridUtil","$compile","$timeout","uiGridConstants","ScrollEvent","$q",function(a,b,c,d,e,f){var g={initializeGrid:function(a,b){if(g.defaultGridOptions(a.options),a.options.enableInfiniteScroll){a.infiniteScroll={dataLoading:!1},g.setScrollDirections(a,a.options.infiniteScrollUp,a.options.infiniteScrollDown),a.api.core.on.scrollEnd(b,g.handleScroll);var c={events:{infiniteScroll:{needLoadMoreData:function(a,b){},needLoadMoreDataTop:function(a,b){}}},methods:{infiniteScroll:{dataLoaded:function(b,c){return g.setScrollDirections(a,b,c),g.adjustScroll(a).then(function(){a.infiniteScroll.dataLoading=!1})},resetScroll:function(b,c){return g.setScrollDirections(a,b,c),g.adjustInfiniteScrollPosition(a,0)},saveScrollPercentage:function(){a.infiniteScroll.prevScrollTop=a.renderContainers.body.prevScrollTop,a.infiniteScroll.previousVisibleRows=a.getVisibleRowCount()},dataRemovedTop:function(b,c){g.dataRemovedTop(a,b,c)},dataRemovedBottom:function(b,c){g.dataRemovedBottom(a,b,c)},setScrollDirections:function(b,c){g.setScrollDirections(a,b,c)}}}};a.api.registerEventsFromObject(c.events),a.api.registerMethodsFromObject(c.methods)}},defaultGridOptions:function(a){a.enableInfiniteScroll=!1!==a.enableInfiniteScroll,a.infiniteScrollRowsFromEnd=a.infiniteScrollRowsFromEnd||20,a.infiniteScrollUp=!0===a.infiniteScrollUp,a.infiniteScrollDown=!1!==a.infiniteScrollDown},setScrollDirections:function(a,b,c){a.infiniteScroll.scrollUp=!0===b,a.suppressParentScrollUp=!0===b,a.infiniteScroll.scrollDown=!1!==c,a.suppressParentScrollDown=!1!==c},handleScroll:function(a){if(!(a.grid.infiniteScroll&&a.grid.infiniteScroll.dataLoading||"ui.grid.adjustInfiniteScrollPosition"===a.source)&&a.y)if(0===a.y.percentage)a.grid.scrollDirection=d.scrollDirection.UP,g.loadData(a.grid);else if(1===a.y.percentage)a.grid.scrollDirection=d.scrollDirection.DOWN,g.loadData(a.grid);else{var b,c=a.grid.options.infiniteScrollRowsFromEnd/a.grid.renderContainers.body.visibleRowCache.length;a.grid.scrollDirection===d.scrollDirection.UP?(b=a.y.percentage,c>=b&&g.loadData(a.grid)):a.grid.scrollDirection===d.scrollDirection.DOWN&&(b=1-a.y.percentage,c>=b&&g.loadData(a.grid))}},loadData:function(a){a.infiniteScroll.previousVisibleRows=a.renderContainers.body.visibleRowCache.length,a.infiniteScroll.direction=a.scrollDirection,delete a.infiniteScroll.prevScrollTop,a.scrollDirection===d.scrollDirection.UP&&a.infiniteScroll.scrollUp?(a.infiniteScroll.dataLoading=!0,a.api.infiniteScroll.raise.needLoadMoreDataTop()):a.scrollDirection===d.scrollDirection.DOWN&&a.infiniteScroll.scrollDown&&(a.infiniteScroll.dataLoading=!0,a.api.infiniteScroll.raise.needLoadMoreData())},adjustScroll:function(a){var b=f.defer();return c(function(){var e,f,h,i,j;e=a.getViewportHeight()+a.headerHeight-a.renderContainers.body.headerHeight-a.scrollbarHeight,f=a.options.rowHeight,void 0===a.infiniteScroll.direction&&g.adjustInfiniteScrollPosition(a,0),h=a.getVisibleRowCount();var k=f*h;a.infiniteScroll.scrollDown&&e>k&&a.api.infiniteScroll.raise.needLoadMoreData(),a.infiniteScroll.direction===d.scrollDirection.UP&&(i=a.infiniteScroll.prevScrollTop||0,j=i+(h-a.infiniteScroll.previousVisibleRows)*f,g.adjustInfiniteScrollPosition(a,j),c(function(){b.resolve()})),a.infiniteScroll.direction===d.scrollDirection.DOWN&&(j=a.infiniteScroll.prevScrollTop||a.infiniteScroll.previousVisibleRows*f-e,g.adjustInfiniteScrollPosition(a,j),c(function(){b.resolve()}))},0),b.promise},adjustInfiniteScrollPosition:function(a,b){var c=new e(a,null,null,"ui.grid.adjustInfiniteScrollPosition"),d=a.getVisibleRowCount(),f=a.getViewportHeight()+a.headerHeight-a.renderContainers.body.headerHeight-a.scrollbarHeight,g=a.options.rowHeight,h=d*g-f;0===b&&a.infiniteScroll.scrollUp?c.y={percentage:1/h}:c.y={percentage:b/h},a.scrollContainers("",c)},dataRemovedTop:function(a,b,c){var d,e,f,h;return g.setScrollDirections(a,b,c),d=a.renderContainers.body.visibleRowCache.length,e=a.infiniteScroll.prevScrollTop,h=a.options.rowHeight,f=e-(a.infiniteScroll.previousVisibleRows-d)*h,g.adjustInfiniteScrollPosition(a,f)},dataRemovedBottom:function(a,b,c){var d;return g.setScrollDirections(a,b,c),d=a.infiniteScroll.prevScrollTop,g.adjustInfiniteScrollPosition(a,d)}};return g}]),a.directive("uiGridInfiniteScroll",["uiGridInfiniteScrollService",function(a){return{priority:-200,scope:!1,require:"^uiGrid",compile:function(b,c,d){return{pre:function(b,c,d,e){a.initializeGrid(e.grid,b)},post:function(a,b,c){}}}}}])}(),function(){"use strict";var a=angular.module("ui.grid.moveColumns",["ui.grid"]);a.service("uiGridMoveColumnService",["$q","$timeout","$log","ScrollEvent","uiGridConstants","gridUtil",function(a,b,c,d,e,f){var g={initializeGrid:function(a){var b=this;this.registerPublicApi(a),this.defaultGridOptions(a.options),a.moveColumns={orderCache:[]},a.registerColumnBuilder(b.movableColumnBuilder),a.registerDataChangeCallback(b.verifyColumnOrder,[e.dataChange.COLUMN])},registerPublicApi:function(a){var b=this,c={events:{colMovable:{columnPositionChanged:function(a,b,c){}}},methods:{colMovable:{moveColumn:function(c,d){var e=a.columns;if(!angular.isNumber(c)||!angular.isNumber(d))return void f.logError("MoveColumn: Please provide valid values for originalPosition and finalPosition");for(var g=0,h=0;h<e.length;h++)(angular.isDefined(e[h].colDef.visible)&&!1===e[h].colDef.visible||!0===e[h].isRowHeader)&&g++;if(c>=e.length-g||d>=e.length-g)return void f.logError("MoveColumn: Invalid values for originalPosition, finalPosition");var i=function(a){for(var b=a,c=0;b>=c;c++)angular.isDefined(e[c])&&(angular.isDefined(e[c].colDef.visible)&&!1===e[c].colDef.visible||!0===e[c].isRowHeader)&&b++;return b};b.redrawColumnAtPosition(a,i(c),i(d))}}}};a.api.registerEventsFromObject(c.events),a.api.registerMethodsFromObject(c.methods)},defaultGridOptions:function(a){a.enableColumnMoving=!1!==a.enableColumnMoving},movableColumnBuilder:function(b,c,d){var e=[];return b.enableColumnMoving=void 0===b.enableColumnMoving?d.enableColumnMoving:b.enableColumnMoving,a.all(e)},updateColumnCache:function(a){a.moveColumns.orderCache=a.getOnlyDataColumns()},verifyColumnOrder:function(a){var b,c=a.rowHeaderColumns.length;angular.forEach(a.moveColumns.orderCache,function(d,e){if(-1!==(b=a.columns.indexOf(d))&&b-c!==e){var f=a.columns.splice(b,1)[0];a.columns.splice(e+c,0,f)}})},redrawColumnAtPosition:function(a,c,d){var f=a.columns;if(c!==d){var h=d>c?c+1:c-1,i=Math.min(h,d);for(i;i<=Math.max(h,d)&&!f[i].visible;i++);if(!(i>Math.max(h,d))){var j=f[c];if(j.colDef.enableColumnMoving){if(c>d)for(var k=c;k>d;k--)f[k]=f[k-1];else if(d>c)for(var l=c;d>l;l++)f[l]=f[l+1];f[d]=j,g.updateColumnCache(a),a.queueGridRefresh(),b(function(){a.api.core.notifyDataChange(e.dataChange.COLUMN),a.api.colMovable.raise.columnPositionChanged(j.colDef,c,d)})}}}}};return g}]),a.directive("uiGridMoveColumns",["uiGridMoveColumnService",function(a){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(b,c,d,e){a.initializeGrid(e.grid)},post:function(a,b,c,d){}}}}}]),a.directive("uiGridHeaderCell",["$q","gridUtil","uiGridMoveColumnService","$document","$log","uiGridConstants","ScrollEvent",function(a,b,c,d,e,f,g){return{priority:-10,require:"^uiGrid",compile:function(){return{post:function(a,b,e,f){if(a.col.colDef.enableColumnMoving){var h,i,j,k,l,m,n=angular.element(b[0].querySelectorAll(".ui-grid-cell-contents")),o=!1,p=!1,q=function(b){h=a.grid.element[0].getBoundingClientRect().left,a.grid.hasLeftContainer()&&(h+=a.grid.renderContainers.left.header[0].getBoundingClientRect().width),i=b.pageX||(b.originalEvent?b.originalEvent.pageX:0),j=0,k=h+a.grid.getViewportWidth(),"mousedown"===b.type?(d.on("mousemove",r),d.on("mouseup",s)):"touchstart"===b.type&&(d.on("touchmove",r),d.on("touchend",s))},r=function(a){var b=a.pageX||(a.originalEvent?a.originalEvent.pageX:0),c=b-i;0!==c&&(document.onselectstart=function(){return!1},p=!0,o?o&&(w(c),i=b):v())},s=function(b){if(document.onselectstart=null,l&&(l.remove(),o=!1),u(),t(),p){for(var d=a.grid.columns,e=0,f=0;f<d.length&&d[f].colDef.name!==a.col.colDef.name;f++)e++;var g;if(0>j){var h,i=0;if(a.grid.isRTL()){for(h=e+1;h<d.length;h++)if((angular.isUndefined(d[h].colDef.visible)||!0===d[h].colDef.visible)&&(i+=d[h].drawnWidth||d[h].width||d[h].colDef.width)>Math.abs(j)){c.redrawColumnAtPosition(a.grid,e,h-1);break}}else for(h=e-1;h>=0;h--)if((angular.isUndefined(d[h].colDef.visible)||!0===d[h].colDef.visible)&&(i+=d[h].drawnWidth||d[h].width||d[h].colDef.width)>Math.abs(j)){c.redrawColumnAtPosition(a.grid,e,h+1);break}i<Math.abs(j)&&(g=0,a.grid.isRTL()&&(g=d.length-1),c.redrawColumnAtPosition(a.grid,e,g))}else if(j>0){var k,m=0;if(a.grid.isRTL()){for(k=e-1;k>0;k--)if((angular.isUndefined(d[k].colDef.visible)||!0===d[k].colDef.visible)&&(m+=d[k].drawnWidth||d[k].width||d[k].colDef.width)>j){c.redrawColumnAtPosition(a.grid,e,k);break}}else for(k=e+1;k<d.length;k++)if((angular.isUndefined(d[k].colDef.visible)||!0===d[k].colDef.visible)&&(m+=d[k].drawnWidth||d[k].width||d[k].colDef.width)>j){c.redrawColumnAtPosition(a.grid,e,k-1);break}j>m&&(g=d.length-1,a.grid.isRTL()&&(g=0),c.redrawColumnAtPosition(a.grid,e,g))}}},t=function(){n.on("touchstart",q),n.on("mousedown",q)},u=function(){n.off("touchstart",q),n.off("mousedown",q),d.off("mousemove",r),d.off("touchmove",r),d.off("mouseup",s),d.off("touchend",s)};t();var v=function(){o=!0,l=b.clone(),b.parent().append(l),l.addClass("movingColumn");var c={};c.left=b[0].offsetLeft+"px";var d=a.grid.element[0].getBoundingClientRect().right,e=b[0].getBoundingClientRect().right;e>d&&(m=a.col.drawnWidth+(d-e),c.width=m+"px"),l.css(c)},w=function(b){for(var c=a.grid.columns,d=0,e=0;e<c.length;e++)(angular.isUndefined(c[e].colDef.visible)||!0===c[e].colDef.visible)&&(d+=c[e].drawnWidth||c[e].width||c[e].colDef.width);var i,n=l[0].getBoundingClientRect().left-1,o=l[0].getBoundingClientRect().right;if(i=n-h+b,i=k>i?i:k,(n>=h||b>0)&&(k>=o||0>b))l.css({visibility:"visible",left:l[0].offsetLeft+(k>i?b:k-n)+"px"});else if(d>Math.ceil(f.grid.gridWidth)){b*=8;var p=new g(a.col.grid,null,null,"uiGridHeaderCell.moveElement");p.x={pixels:b},p.grid.scrollContainers("",p)}for(var q=0,r=0;r<c.length;r++)if(angular.isUndefined(c[r].colDef.visible)||!0===c[r].colDef.visible){if(c[r].colDef.name===a.col.colDef.name)break;q+=c[r].drawnWidth||c[r].width||c[r].colDef.width}void 0===a.newScrollLeft?j+=b:j=a.newScrollLeft+i-q,m<a.col.drawnWidth&&(m+=Math.abs(b),l.css({width:m+"px"}))}}}}}}}])}(),function(){"use strict";var a=angular.module("ui.grid.pagination",["ng","ui.grid"]);a.service("uiGridPaginationService",["gridUtil",function(a){var b={initializeGrid:function(a){b.defaultGridOptions(a.options);var c={events:{pagination:{paginationChanged:function(a,b){}}},methods:{pagination:{getPage:function(){return a.options.enablePagination?a.options.paginationCurrentPage:null},getTotalPages:function(){return a.options.enablePagination?0===a.options.totalItems?1:Math.ceil(a.options.totalItems/a.options.paginationPageSize):null},nextPage:function(){a.options.enablePagination&&(a.options.totalItems>0?a.options.paginationCurrentPage=Math.min(a.options.paginationCurrentPage+1,c.methods.pagination.getTotalPages()):a.options.paginationCurrentPage++)},previousPage:function(){a.options.enablePagination&&(a.options.paginationCurrentPage=Math.max(a.options.paginationCurrentPage-1,1))},seek:function(b){if(a.options.enablePagination){if(!angular.isNumber(b)||1>b)throw"Invalid page number: "+b;a.options.paginationCurrentPage=Math.min(b,c.methods.pagination.getTotalPages())}}}}};a.api.registerEventsFromObject(c.events),a.api.registerMethodsFromObject(c.methods);var d=function(b){if(a.options.useExternalPagination||!a.options.enablePagination)return b;var c=parseInt(a.options.paginationPageSize,10),d=parseInt(a.options.paginationCurrentPage,10),e=b.filter(function(a){return a.visible});a.options.totalItems=e.length;var f=(d-1)*c;return f>e.length&&(d=a.options.paginationCurrentPage=1,f=(d-1)*c),e.slice(f,f+c)};a.registerRowsProcessor(d,900)},defaultGridOptions:function(b){b.enablePagination=!1!==b.enablePagination,b.enablePaginationControls=!1!==b.enablePaginationControls,b.useExternalPagination=!0===b.useExternalPagination,a.isNullOrUndefined(b.totalItems)&&(b.totalItems=0),a.isNullOrUndefined(b.paginationPageSizes)&&(b.paginationPageSizes=[250,500,1e3]),a.isNullOrUndefined(b.paginationPageSize)&&(b.paginationPageSizes.length>0?b.paginationPageSize=b.paginationPageSizes[0]:b.paginationPageSize=0),a.isNullOrUndefined(b.paginationCurrentPage)&&(b.paginationCurrentPage=1),a.isNullOrUndefined(b.paginationTemplate)&&(b.paginationTemplate="ui-grid/pagination")},onPaginationChanged:function(a,b,c){a.api.pagination.raise.paginationChanged(b,c),a.options.useExternalPagination||a.queueGridRefresh()}};return b}]),a.directive("uiGridPagination",["gridUtil","uiGridPaginationService",function(a,b){return{priority:-200,scope:!1,require:"uiGrid",link:{pre:function(c,d,e,f){b.initializeGrid(f.grid),a.getTemplate(f.grid.options.paginationTemplate).then(function(a){
var b=angular.element(a);d.append(b),f.innerCompile(b)})}}}}]),a.directive("uiGridPager",["uiGridPaginationService","uiGridConstants","gridUtil","i18nService",function(a,b,c,d){return{priority:-200,scope:!0,require:"^uiGrid",link:function(e,f,g,h){e.aria=d.getSafeText("pagination.aria"),e.paginationApi=h.grid.api.pagination,e.sizesLabel=d.getSafeText("pagination.sizes"),e.totalItemsLabel=d.getSafeText("pagination.totalItems"),e.paginationOf=d.getSafeText("pagination.of"),e.paginationThrough=d.getSafeText("pagination.through");var j=h.grid.options;h.grid.renderContainers.body.registerViewportAdjuster(function(a){return a.height=a.height-c.elementHeight(f,"padding"),a});var k=h.grid.registerDataChangeCallback(function(a){a.options.useExternalPagination||(a.options.totalItems=a.rows.length)},[b.dataChange.ROW]);e.$on("$destroy",k);var l=function(){e.showingLow=(j.paginationCurrentPage-1)*j.paginationPageSize+1,e.showingHigh=Math.min(j.paginationCurrentPage*j.paginationPageSize,j.totalItems)},m=e.$watch("grid.options.totalItems + grid.options.paginationPageSize",l),n=e.$watch("grid.options.paginationCurrentPage + grid.options.paginationPageSize",function(b,c){if(b!==c&&void 0!==c){if(!angular.isNumber(j.paginationCurrentPage)||j.paginationCurrentPage<1)return void(j.paginationCurrentPage=1);if(j.totalItems>0&&j.paginationCurrentPage>e.paginationApi.getTotalPages())return void(j.paginationCurrentPage=e.paginationApi.getTotalPages());l(),a.onPaginationChanged(e.grid,j.paginationCurrentPage,j.paginationPageSize)}});e.$on("$destroy",function(){m(),n()}),e.cantPageForward=function(){return j.totalItems>0?j.paginationCurrentPage>=e.paginationApi.getTotalPages():j.data.length<1},e.cantPageToLast=function(){return!(j.totalItems>0)||e.cantPageForward()},e.cantPageBackward=function(){return j.paginationCurrentPage<=1};var o=function(a){a&&c.focus.bySelector(f,".ui-grid-pager-control-input")};e.pageFirstPageClick=function(){e.paginationApi.seek(1),o(e.cantPageBackward())},e.pagePreviousPageClick=function(){e.paginationApi.previousPage(),o(e.cantPageBackward())},e.pageNextPageClick=function(){e.paginationApi.nextPage(),o(e.cantPageForward())},e.pageLastPageClick=function(){e.paginationApi.seek(e.paginationApi.getTotalPages()),o(e.cantPageToLast())}}}}])}(),function(){"use strict";var a=angular.module("ui.grid.pinning",["ui.grid"]);a.constant("uiGridPinningConstants",{container:{LEFT:"left",RIGHT:"right",NONE:""}}),a.service("uiGridPinningService",["gridUtil","GridRenderContainer","i18nService","uiGridPinningConstants",function(a,b,c,d){var e={initializeGrid:function(a){e.defaultGridOptions(a.options),a.registerColumnBuilder(e.pinningColumnBuilder);var b={events:{pinning:{columnPinned:function(a,b){}}},methods:{pinning:{pinColumn:function(b,c){e.pinColumn(a,b,c)}}}};a.api.registerEventsFromObject(b.events),a.api.registerMethodsFromObject(b.methods)},defaultGridOptions:function(a){a.enablePinning=!1!==a.enablePinning},pinningColumnBuilder:function(b,f,g){if(b.enablePinning=void 0===b.enablePinning?g.enablePinning:b.enablePinning,b.pinnedLeft?(f.renderContainer="left",f.grid.createLeftContainer()):b.pinnedRight&&(f.renderContainer="right",f.grid.createRightContainer()),b.enablePinning){var h={name:"ui.grid.pinning.pinLeft",title:c.get().pinning.pinLeft,icon:"ui-grid-icon-left-open",shown:function(){return void 0===this.context.col.renderContainer||!this.context.col.renderContainer||"left"!==this.context.col.renderContainer},action:function(){e.pinColumn(this.context.col.grid,this.context.col,d.container.LEFT)}},i={name:"ui.grid.pinning.pinRight",title:c.get().pinning.pinRight,icon:"ui-grid-icon-right-open",shown:function(){return void 0===this.context.col.renderContainer||!this.context.col.renderContainer||"right"!==this.context.col.renderContainer},action:function(){e.pinColumn(this.context.col.grid,this.context.col,d.container.RIGHT)}},j={name:"ui.grid.pinning.unpin",title:c.get().pinning.unpin,icon:"ui-grid-icon-cancel",shown:function(){return void 0!==this.context.col.renderContainer&&null!==this.context.col.renderContainer&&"body"!==this.context.col.renderContainer},action:function(){e.pinColumn(this.context.col.grid,this.context.col,d.container.NONE)}};a.arrayContainsObjectWithProperty(f.menuItems,"name","ui.grid.pinning.pinLeft")||f.menuItems.push(h),a.arrayContainsObjectWithProperty(f.menuItems,"name","ui.grid.pinning.pinRight")||f.menuItems.push(i),a.arrayContainsObjectWithProperty(f.menuItems,"name","ui.grid.pinning.unpin")||f.menuItems.push(j)}},pinColumn:function(a,b,c){c===d.container.NONE?(b.renderContainer=null,b.colDef.pinnedLeft=b.colDef.pinnedRight=!1):(b.renderContainer=c,c===d.container.LEFT?a.createLeftContainer():c===d.container.RIGHT&&a.createRightContainer()),a.refresh().then(function(){a.api.pinning.raise.columnPinned(b.colDef,c)})}};return e}]),a.directive("uiGridPinning",["gridUtil","uiGridPinningService",function(a,b){return{require:"uiGrid",scope:!1,compile:function(){return{pre:function(a,c,d,e){b.initializeGrid(e.grid)},post:function(a,b,c,d){}}}}}])}(),function(){"use strict";var a=angular.module("ui.grid.resizeColumns",["ui.grid"]);a.service("uiGridResizeColumnsService",["gridUtil","$q","$timeout",function(a,b,c){return{defaultGridOptions:function(a){a.enableColumnResizing=!1!==a.enableColumnResizing,!1===a.enableColumnResize&&(a.enableColumnResizing=!1)},colResizerColumnBuilder:function(a,c,d){var e=[];return a.enableColumnResizing=void 0===a.enableColumnResizing?d.enableColumnResizing:a.enableColumnResizing,!1===a.enableColumnResize&&(a.enableColumnResizing=!1),b.all(e)},registerPublicApi:function(a){var b={events:{colResizable:{columnSizeChanged:function(a,b){}}}};a.api.registerEventsFromObject(b.events)},fireColumnSizeChanged:function(b,d,e){c(function(){b.api.colResizable?b.api.colResizable.raise.columnSizeChanged(d,e):a.logError("The resizeable api is not registered, this may indicate that you've included the module but not added the 'ui-grid-resize-columns' directive to your grid definition.  Cannot raise any events.")})},findTargetCol:function(a,b,c){var d=a.getRenderContainer();if("left"===b){var e=d.visibleColumnCache.indexOf(a);return d.visibleColumnCache[e-1*c]}return a}}}]),a.directive("uiGridResizeColumns",["gridUtil","uiGridResizeColumnsService",function(a,b){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(a,c,d,e){b.defaultGridOptions(e.grid.options),e.grid.registerColumnBuilder(b.colResizerColumnBuilder),b.registerPublicApi(e.grid)},post:function(a,b,c,d){}}}}}]),a.directive("uiGridHeaderCell",["gridUtil","$templateCache","$compile","$q","uiGridResizeColumnsService","uiGridConstants","$timeout",function(a,b,c,d,e,f,g){return{priority:-10,require:"^uiGrid",compile:function(){return{post:function(a,d,h,i){var j=i.grid;if(j.options.enableColumnResizing){var k=b.get("ui-grid/columnResizer"),l=1;j.isRTL()&&(a.position="left",l=-1);var m=function(){for(var b=d[0].getElementsByClassName("ui-grid-column-resizer"),f=0;f<b.length;f++)angular.element(b[f]).remove();var g=e.findTargetCol(a.col,"left",l),h=a.col.getRenderContainer();if(g&&0!==h.visibleColumnCache.indexOf(a.col)&&!1!==g.colDef.enableColumnResizing){var i=angular.element(k).clone();i.attr("position","left"),d.prepend(i),c(i)(a)}if(!1!==a.col.colDef.enableColumnResizing){var j=angular.element(k).clone();j.attr("position","right"),d.append(j),c(j)(a)}};m();var n=function(){g(m)},o=j.registerDataChangeCallback(n,[f.dataChange.COLUMN]);a.$on("$destroy",o)}}}}}}]),a.directive("uiGridColumnResizer",["$document","gridUtil","uiGridConstants","uiGridResizeColumnsService",function(a,b,c,d){var e=angular.element('<div class="ui-grid-resize-overlay"></div>');return{priority:0,scope:{col:"=",position:"@",renderIndex:"="},require:"?^uiGrid",link:function(f,g,h,i){function j(a){i.grid.refreshCanvas(!0).then(function(){i.grid.queueGridRefresh()})}function k(a,b){var c=b;return a.minWidth&&c<a.minWidth?c=a.minWidth:a.maxWidth&&c>a.maxWidth&&(c=a.maxWidth),c}function l(a,b){a.originalEvent&&(a=a.originalEvent),a.preventDefault(),o=(a.targetTouches?a.targetTouches[0]:a).clientX-p,0>o?o=0:o>i.grid.gridWidth&&(o=i.grid.gridWidth);var g=d.findTargetCol(f.col,f.position,q);if(!1!==g.colDef.enableColumnResizing){i.grid.element.hasClass("column-resizing")||i.grid.element.addClass("column-resizing");var h=o-n,j=parseInt(g.drawnWidth+h*q,10);o+=(k(g,j)-j)*q,e.css({left:o+"px"}),i.fireEvent(c.events.ITEM_DRAGGING)}}function m(a,b){a.originalEvent&&(a=a.originalEvent),a.preventDefault(),i.grid.element.removeClass("column-resizing"),e.remove(),o=(a.changedTouches?a.changedTouches[0]:a).clientX-p;var c=o-n;if(0===c)return t(),void s();var g=d.findTargetCol(f.col,f.position,q);if(!1!==g.colDef.enableColumnResizing){var h=parseInt(g.drawnWidth+c*q,10);g.width=k(g,h),g.hasCustomWidth=!0,j(c),d.fireColumnSizeChanged(i.grid,g.colDef,c),t(),s()}}var n=0,o=0,p=0,q=1;i.grid.isRTL()&&(f.position="left",q=-1),"left"===f.position?g.addClass("left"):"right"===f.position&&g.addClass("right");var r=function(b,c){b.originalEvent&&(b=b.originalEvent),b.stopPropagation(),p=i.grid.element[0].getBoundingClientRect().left,n=(b.targetTouches?b.targetTouches[0]:b).clientX-p,i.grid.element.append(e),e.css({left:n}),"touchstart"===b.type?(a.on("touchend",m),a.on("touchmove",l),g.off("mousedown",r)):(a.on("mouseup",m),a.on("mousemove",l),g.off("touchstart",r))},s=function(){g.on("mousedown",r),g.on("touchstart",r)},t=function(){a.off("mouseup",m),a.off("touchend",m),a.off("mousemove",l),a.off("touchmove",l),g.off("mousedown",r),g.off("touchstart",r)};s();var u=function(a,e){a.stopPropagation();var h=d.findTargetCol(f.col,f.position,q);if(!1!==h.colDef.enableColumnResizing){var l=0,m=0,n=b.closestElm(g,".ui-grid-render-container"),o=n.querySelectorAll("."+c.COL_CLASS_PREFIX+h.uid+" .ui-grid-cell-contents");Array.prototype.forEach.call(o,function(a){var c;angular.element(a).parent().hasClass("ui-grid-header-cell")&&(c=angular.element(a).parent()[0].querySelectorAll(".ui-grid-column-menu-button")),b.fakeElement(a,{},function(a){var d=angular.element(a);d.attr("style","float: left");var e=b.elementWidth(d);if(c){e+=b.elementWidth(c)}e>l&&(l=e,m=l-e)})}),h.width=k(h,l),h.hasCustomWidth=!0,j(m),d.fireColumnSizeChanged(i.grid,h.colDef,m)}};g.on("dblclick",u),g.on("$destroy",function(){g.off("dblclick",u),t()})}}}])}(),function(){"use strict";var a=angular.module("ui.grid.rowEdit",["ui.grid","ui.grid.edit","ui.grid.cellNav"]);a.constant("uiGridRowEditConstants",{}),a.service("uiGridRowEditService",["$interval","$q","uiGridConstants","uiGridRowEditConstants","gridUtil",function(a,b,c,d,e){var f={initializeGrid:function(a,b){b.rowEdit={};var c={events:{rowEdit:{saveRow:function(a){}}},methods:{rowEdit:{setSavePromise:function(a,c){f.setSavePromise(b,a,c)},getDirtyRows:function(){return b.rowEdit.dirtyRows?b.rowEdit.dirtyRows:[]},getErrorRows:function(){return b.rowEdit.errorRows?b.rowEdit.errorRows:[]},flushDirtyRows:function(){return f.flushDirtyRows(b)},setRowsDirty:function(a){f.setRowsDirty(b,a)},setRowsClean:function(a){f.setRowsClean(b,a)}}}};b.api.registerEventsFromObject(c.events),b.api.registerMethodsFromObject(c.methods),b.api.core.on.renderingComplete(a,function(c){b.api.edit.on.afterCellEdit(a,f.endEditCell),b.api.edit.on.beginCellEdit(a,f.beginEditCell),b.api.edit.on.cancelCellEdit(a,f.cancelEditCell),b.api.cellNav&&b.api.cellNav.on.navigate(a,f.navigate)})},defaultGridOptions:function(a){},saveRow:function(a,b){var c=this;return function(){if(b.isSaving=!0,b.rowEditSavePromise)return b.rowEditSavePromise;var d=a.api.rowEdit.raise.saveRow(b.entity);return b.rowEditSavePromise?b.rowEditSavePromise.then(c.processSuccessPromise(a,b),c.processErrorPromise(a,b)):e.logError("A promise was not returned when saveRow event was raised, either nobody is listening to event, or event handler did not return a promise"),d}},setSavePromise:function(a,b,c){a.getRow(b).rowEditSavePromise=c},processSuccessPromise:function(a,b){var c=this;return function(){delete b.isSaving,delete b.isDirty,delete b.isError,delete b.rowEditSaveTimer,delete b.rowEditSavePromise,c.removeRow(a.rowEdit.errorRows,b),c.removeRow(a.rowEdit.dirtyRows,b)}},processErrorPromise:function(a,b){return function(){delete b.isSaving,delete b.rowEditSaveTimer,delete b.rowEditSavePromise,b.isError=!0,a.rowEdit.errorRows||(a.rowEdit.errorRows=[]),f.isRowPresent(a.rowEdit.errorRows,b)||a.rowEdit.errorRows.push(b)}},removeRow:function(a,b){void 0!==a&&null!==a&&a.forEach(function(c,d){c.uid===b.uid&&a.splice(d,1)})},isRowPresent:function(a,b){var c=!1;return a.forEach(function(a,d){a.uid===b.uid&&(c=!0)}),c},flushDirtyRows:function(a){var c=[];return a.api.rowEdit.getDirtyRows().forEach(function(b){f.saveRow(a,b)(),c.push(b.rowEditSavePromise)}),b.all(c)},endEditCell:function(a,b,c,d){var g=this.grid,h=g.getRow(a);return h?void((c!==d||h.isDirty)&&(g.rowEdit.dirtyRows||(g.rowEdit.dirtyRows=[]),h.isDirty||(h.isDirty=!0,g.rowEdit.dirtyRows.push(h)),delete h.isError,f.considerSetTimer(g,h))):void e.logError("Unable to find rowEntity in grid data, dirty flag cannot be set")},beginEditCell:function(a,b){var c=this.grid,d=c.getRow(a);return d?void f.cancelTimer(c,d):void e.logError("Unable to find rowEntity in grid data, timer cannot be cancelled")},cancelEditCell:function(a,b){var c=this.grid,d=c.getRow(a);return d?void f.considerSetTimer(c,d):void e.logError("Unable to find rowEntity in grid data, timer cannot be set")},navigate:function(a,b){var c=this.grid;a.row.rowEditSaveTimer&&f.cancelTimer(c,a.row),b&&b.row&&b.row!==a.row&&f.considerSetTimer(c,b.row)},considerSetTimer:function(b,c){if(f.cancelTimer(b,c),c.isDirty&&!c.isSaving&&-1!==b.options.rowEditWaitInterval){var d=b.options.rowEditWaitInterval?b.options.rowEditWaitInterval:2e3;c.rowEditSaveTimer=a(f.saveRow(b,c),d,1)}},cancelTimer:function(b,c){c.rowEditSaveTimer&&!c.isSaving&&(a.cancel(c.rowEditSaveTimer),delete c.rowEditSaveTimer)},setRowsDirty:function(a,b){var c;b.forEach(function(b,d){c=a.getRow(b),c?(a.rowEdit.dirtyRows||(a.rowEdit.dirtyRows=[]),c.isDirty||(c.isDirty=!0,a.rowEdit.dirtyRows.push(c)),delete c.isError,f.considerSetTimer(a,c)):e.logError("requested row not found in rowEdit.setRowsDirty, row was: "+b)})},setRowsClean:function(a,b){var c;b.forEach(function(b,d){c=a.getRow(b),c?(delete c.isDirty,f.removeRow(a.rowEdit.dirtyRows,c),f.cancelTimer(a,c),delete c.isError,f.removeRow(a.rowEdit.errorRows,c)):e.logError("requested row not found in rowEdit.setRowsClean, row was: "+b)})}};return f}]),a.directive("uiGridRowEdit",["gridUtil","uiGridRowEditService","uiGridEditConstants",function(a,b,c){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(a,c,d,e){b.initializeGrid(a,e.grid)},post:function(a,b,c,d){}}}}}]),a.directive("uiGridViewport",["$compile","uiGridConstants","gridUtil","$parse",function(a,b,c,d){return{priority:-200,scope:!1,compile:function(a,b){var c=angular.element(a.children().children()[0]),d=c.attr("ng-class"),e="";return e=d?d.slice(0,-1)+", 'ui-grid-row-dirty': row.isDirty, 'ui-grid-row-saving': row.isSaving, 'ui-grid-row-error': row.isError}":"{'ui-grid-row-dirty': row.isDirty, 'ui-grid-row-saving': row.isSaving, 'ui-grid-row-error': row.isError}",c.attr("ng-class",e),{pre:function(a,b,c,d){},post:function(a,b,c,d){}}}}}])}(),function(){"use strict";var a=angular.module("ui.grid.saveState",["ui.grid","ui.grid.selection","ui.grid.cellNav","ui.grid.grouping","ui.grid.pinning","ui.grid.treeView"]);a.constant("uiGridSaveStateConstants",{featureName:"saveState"}),a.service("uiGridSaveStateService",["$q","uiGridSaveStateConstants","gridUtil","$compile","$interval","uiGridConstants",function(a,b,c,d,e,f){var g={initializeGrid:function(a){a.saveState={},this.defaultGridOptions(a.options);var b={events:{saveState:{}},methods:{saveState:{save:function(){return g.save(a)},restore:function(b,c){g.restore(a,b,c)}}}};a.api.registerEventsFromObject(b.events),a.api.registerMethodsFromObject(b.methods)},defaultGridOptions:function(a){a.saveWidths=!1!==a.saveWidths,a.saveOrder=!1!==a.saveOrder,a.saveScroll=!0===a.saveScroll,a.saveFocus=!0!==a.saveScroll&&!1!==a.saveFocus,a.saveVisible=!1!==a.saveVisible,a.saveSort=!1!==a.saveSort,a.saveFilter=!1!==a.saveFilter,a.saveSelection=!1!==a.saveSelection,a.saveGrouping=!1!==a.saveGrouping,a.saveGroupingExpandedStates=!0===a.saveGroupingExpandedStates,a.savePinning=!1!==a.savePinning,a.saveTreeView=!1!==a.saveTreeView},save:function(a){var b={};return b.columns=g.saveColumns(a),b.scrollFocus=g.saveScrollFocus(a),b.selection=g.saveSelection(a),b.grouping=g.saveGrouping(a),b.treeView=g.saveTreeView(a),b.pagination=g.savePagination(a),b},restore:function(a,b,c){c.columns&&g.restoreColumns(a,c.columns),c.scrollFocus&&g.restoreScrollFocus(a,b,c.scrollFocus),c.selection&&g.restoreSelection(a,c.selection),c.grouping&&g.restoreGrouping(a,c.grouping),c.treeView&&g.restoreTreeView(a,c.treeView),c.pagination&&g.restorePagination(a,c.pagination),a.refresh()},saveColumns:function(a){var b=[];return a.getOnlyDataColumns().forEach(function(c){var d={};d.name=c.name,a.options.saveVisible&&(d.visible=c.visible),a.options.saveWidths&&(d.width=c.width),a.options.saveSort&&(d.sort=angular.copy(c.sort)),a.options.saveFilter&&(d.filters=[],c.filters.forEach(function(a){var b={};angular.forEach(a,function(a,c){"condition"!==c&&"$$hashKey"!==c&&"placeholder"!==c&&(b[c]=a)}),d.filters.push(b)})),a.api.pinning&&a.options.savePinning&&(d.pinned=c.renderContainer?c.renderContainer:""),b.push(d)}),b},saveScrollFocus:function(a){if(!a.api.cellNav)return{};var b={};if(a.options.saveFocus){b.focus=!0;var c=a.api.cellNav.getFocusedCell();null!==c&&(null!==c.col&&(b.colName=c.col.colDef.name),null!==c.row&&(b.rowVal=g.getRowVal(a,c.row)))}return(a.options.saveScroll||a.options.saveFocus&&!b.colName&&!b.rowVal)&&(b.focus=!1,a.renderContainers.body.prevRowScrollIndex&&(b.rowVal=g.getRowVal(a,a.renderContainers.body.visibleRowCache[a.renderContainers.body.prevRowScrollIndex])),a.renderContainers.body.prevColScrollIndex&&(b.colName=a.renderContainers.body.visibleColumnCache[a.renderContainers.body.prevColScrollIndex].name)),b},saveSelection:function(a){return a.api.selection&&a.options.saveSelection?a.api.selection.getSelectedGridRows().map(function(b){return g.getRowVal(a,b)}):[]},saveGrouping:function(a){return a.api.grouping&&a.options.saveGrouping?a.api.grouping.getGrouping(a.options.saveGroupingExpandedStates):{}},savePagination:function(a){return a.api.pagination&&a.options.paginationPageSize?{paginationCurrentPage:a.options.paginationCurrentPage,paginationPageSize:a.options.paginationPageSize}:{}},saveTreeView:function(a){return a.api.treeView&&a.options.saveTreeView?a.api.treeView.getTreeView():{}},getRowVal:function(a,b){if(!b)return null;var c={};return a.options.saveRowIdentity?(c.identity=!0,c.row=a.options.saveRowIdentity(b.entity)):(c.identity=!1,c.row=a.renderContainers.body.visibleRowCache.indexOf(b)),c},restoreColumns:function(a,b){var c=!1;b.forEach(function(b,d){var e=a.getColumn(b.name);if(e&&!a.isRowHeaderColumn(e)){!a.options.saveVisible||e.visible===b.visible&&e.colDef.visible===b.visible||(e.visible=b.visible,e.colDef.visible=b.visible,a.api.core.raise.columnVisibilityChanged(e)),a.options.saveWidths&&e.width!==b.width&&(e.width=b.width,e.hasCustomWidth=!0),!a.options.saveSort||angular.equals(e.sort,b.sort)||void 0===e.sort&&angular.isEmpty(b.sort)||(e.sort=angular.copy(b.sort),c=!0),a.options.saveFilter&&!angular.equals(e.filters,b.filters)&&(b.filters.forEach(function(a,b){angular.extend(e.filters[b],a),(void 0===a.term||null===a.term)&&delete e.filters[b].term}),a.api.core.raise.filterChanged()),a.api.pinning&&a.options.savePinning&&e.renderContainer!==b.pinned&&a.api.pinning.pinColumn(e,b.pinned);var f=a.getOnlyDataColumns().indexOf(e);if(-1!==f&&a.options.saveOrder&&f!==d){var g=a.columns.splice(f+a.rowHeaderColumns.length,1)[0];a.columns.splice(d+a.rowHeaderColumns.length,0,g)}}}),c&&a.api.core.raise.sortChanged(a,a.getColumnSorting())},restoreScrollFocus:function(a,b,c){if(a.api.cellNav){var d,e;if(c.colName){var f=a.options.columnDefs.filter(function(a){return a.name===c.colName});f.length>0&&(d=f[0])}c.rowVal&&c.rowVal.row&&(e=c.rowVal.identity?g.findRowByIdentity(a,c.rowVal):a.renderContainers.body.visibleRowCache[c.rowVal.row]);var h=e&&e.entity?e.entity:null;(d||h)&&(c.focus?a.api.cellNav.scrollToFocus(h,d):a.scrollTo(h,d))}},restoreSelection:function(a,b){a.api.selection&&(a.api.selection.clearSelectedRows(),b.forEach(function(b){if(b.identity){var c=g.findRowByIdentity(a,b);c&&a.api.selection.selectRow(c.entity)}else a.api.selection.selectRowByVisibleIndex(b.row)}))},restoreGrouping:function(a,b){a.api.grouping&&void 0!==b&&null!==b&&!angular.equals(b,{})&&a.api.grouping.setGrouping(b)},restoreTreeView:function(a,b){a.api.treeView&&void 0!==b&&null!==b&&!angular.equals(b,{})&&a.api.treeView.setTreeView(b)},restorePagination:function(a,b){a.api.pagination&&a.options.paginationPageSize&&(a.options.paginationCurrentPage=b.paginationCurrentPage,a.options.paginationPageSize=b.paginationPageSize)},findRowByIdentity:function(a,b){if(!a.options.saveRowIdentity)return null;var c=a.rows.filter(function(c){return a.options.saveRowIdentity(c.entity)===b.row});return c.length>0?c[0]:null}};return g}]),a.directive("uiGridSaveState",["uiGridSaveStateConstants","uiGridSaveStateService","gridUtil","$compile",function(a,b,c,d){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,link:function(a,c,d,e){b.initializeGrid(e.grid)}}}])}(),function(){"use strict";var a=angular.module("ui.grid.selection",["ui.grid"]);a.constant("uiGridSelectionConstants",{featureName:"selection",selectionRowHeaderColName:"selectionRowHeaderCol"}),angular.module("ui.grid").config(["$provide",function(a){a.decorator("GridRow",["$delegate",function(a){return a.prototype.setSelected=function(a){a!==this.isSelected&&(this.isSelected=a,this.grid.selection.selectedCount+=a?1:-1)},a}])}]),a.service("uiGridSelectionService",["$q","$templateCache","uiGridSelectionConstants","gridUtil",function(a,b,c,d){var e={initializeGrid:function(a){a.selection={},a.selection.lastSelectedRow=null,a.selection.selectAll=!1,a.selection.selectedCount=0,e.defaultGridOptions(a.options);var b={events:{selection:{rowSelectionChanged:function(a,b,c){},rowSelectionChangedBatch:function(a,b,c){}}},methods:{selection:{toggleRowSelection:function(b,c){var d=a.getRow(b);null!==d&&e.toggleRowSelection(a,d,c,a.options.multiSelect,a.options.noUnselect)},selectRow:function(b,c){var d=a.getRow(b);null===d||d.isSelected||e.toggleRowSelection(a,d,c,a.options.multiSelect,a.options.noUnselect)},selectRowByVisibleIndex:function(b,c){var d=a.renderContainers.body.visibleRowCache[b];null===d||void 0===d||d.isSelected||e.toggleRowSelection(a,d,c,a.options.multiSelect,a.options.noUnselect)},unSelectRow:function(b,c){var d=a.getRow(b);null!==d&&d.isSelected&&e.toggleRowSelection(a,d,c,a.options.multiSelect,a.options.noUnselect)},selectAllRows:function(b){if(!1!==a.options.multiSelect){var c=[];a.rows.forEach(function(d){d.isSelected||!1===d.enableSelection||(d.setSelected(!0),e.decideRaiseSelectionEvent(a,d,c,b))}),e.decideRaiseSelectionBatchEvent(a,c,b),a.selection.selectAll=!0}},selectAllVisibleRows:function(b){if(!1!==a.options.multiSelect){var c=[];a.rows.forEach(function(d){d.visible?d.isSelected||!1===d.enableSelection||(d.setSelected(!0),e.decideRaiseSelectionEvent(a,d,c,b)):d.isSelected&&(d.setSelected(!1),e.decideRaiseSelectionEvent(a,d,c,b))}),e.decideRaiseSelectionBatchEvent(a,c,b),a.selection.selectAll=!0}},clearSelectedRows:function(b){e.clearSelectedRows(a,b)},getSelectedRows:function(){return e.getSelectedRows(a).map(function(a){return a.entity})},getSelectedGridRows:function(){return e.getSelectedRows(a)},getSelectedCount:function(){return a.selection.selectedCount},setMultiSelect:function(b){a.options.multiSelect=b},setModifierKeysToMultiSelect:function(b){a.options.modifierKeysToMultiSelect=b},getSelectAllState:function(){return a.selection.selectAll}}}};a.api.registerEventsFromObject(b.events),a.api.registerMethodsFromObject(b.methods)},defaultGridOptions:function(a){a.enableRowSelection=!1!==a.enableRowSelection,a.multiSelect=!1!==a.multiSelect,a.noUnselect=!0===a.noUnselect,a.modifierKeysToMultiSelect=!0===a.modifierKeysToMultiSelect,a.enableRowHeaderSelection=!1!==a.enableRowHeaderSelection,void 0===a.enableFullRowSelection&&(a.enableFullRowSelection=!a.enableRowHeaderSelection),a.enableSelectAll=!1!==a.enableSelectAll,a.enableSelectionBatchEvent=!1!==a.enableSelectionBatchEvent,a.selectionRowHeaderWidth=angular.isDefined(a.selectionRowHeaderWidth)?a.selectionRowHeaderWidth:30,a.enableFooterTotalSelected=!1!==a.enableFooterTotalSelected,a.isRowSelectable=angular.isDefined(a.isRowSelectable)?a.isRowSelectable:angular.noop},toggleRowSelection:function(a,b,c,d,f){var g=b.isSelected;if(!1!==b.enableSelection||g){var h;d||g?!d&&g&&(h=e.getSelectedRows(a),h.length>1&&(g=!1,e.clearSelectedRows(a,c))):e.clearSelectedRows(a,c),g&&f||(b.setSelected(!g),!0===b.isSelected&&(a.selection.lastSelectedRow=b),h=e.getSelectedRows(a),a.selection.selectAll=a.rows.length===h.length,a.api.selection.raise.rowSelectionChanged(b,c))}},shiftSelect:function(a,b,c,d){if(d){var f=e.getSelectedRows(a),g=f.length>0?a.renderContainers.body.visibleRowCache.indexOf(a.selection.lastSelectedRow):0,h=a.renderContainers.body.visibleRowCache.indexOf(b);if(g>h){var i=g;g=h,h=i}for(var j=[],k=g;h>=k;k++){var l=a.renderContainers.body.visibleRowCache[k];l&&(l.isSelected||!1===l.enableSelection||(l.setSelected(!0),a.selection.lastSelectedRow=l,e.decideRaiseSelectionEvent(a,l,j,c)))}e.decideRaiseSelectionBatchEvent(a,j,c)}},getSelectedRows:function(a){return a.rows.filter(function(a){return a.isSelected})},clearSelectedRows:function(a,b){var c=[];e.getSelectedRows(a).forEach(function(d){d.isSelected&&(d.setSelected(!1),e.decideRaiseSelectionEvent(a,d,c,b))}),e.decideRaiseSelectionBatchEvent(a,c,b),a.selection.selectAll=!1,a.selection.selectedCount=0},decideRaiseSelectionEvent:function(a,b,c,d){a.options.enableSelectionBatchEvent?c.push(b):a.api.selection.raise.rowSelectionChanged(b,d)},decideRaiseSelectionBatchEvent:function(a,b,c){b.length>0&&a.api.selection.raise.rowSelectionChangedBatch(b,c)}};return e}]),a.directive("uiGridSelection",["uiGridSelectionConstants","uiGridSelectionService","$templateCache","uiGridConstants",function(a,b,c,d){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(c,e,f,g){if(b.initializeGrid(g.grid),g.grid.options.enableRowHeaderSelection){var h={name:a.selectionRowHeaderColName,displayName:"",width:g.grid.options.selectionRowHeaderWidth,minWidth:10,cellTemplate:"ui-grid/selectionRowHeader",headerCellTemplate:"ui-grid/selectionHeaderCell",enableColumnResizing:!1,enableColumnMenu:!1,exporterSuppressExport:!0,allowCellFocus:!0};g.grid.addRowHeaderColumn(h,0)}var i=!1,j=function(a){return a.forEach(function(a){a.enableSelection=g.grid.options.isRowSelectable(a)}),a},k=function(){g.grid.options.isRowSelectable!==angular.noop&&!0!==i&&(g.grid.registerRowsProcessor(j,500),i=!0)};k();var l=g.grid.registerDataChangeCallback(k,[d.dataChange.OPTIONS]);c.$on("$destroy",l)},post:function(a,b,c,d){}}}}}]),a.directive("uiGridSelectionRowHeaderButtons",["$templateCache","uiGridSelectionService","gridUtil",function(a,b,c){return{replace:!0,restrict:"E",template:a.get("ui-grid/selectionRowHeaderButtons"),scope:!0,require:"^uiGrid",link:function(a,d,e,f){function g(a,c){c.stopPropagation(),c.shiftKey?b.shiftSelect(i,a,c,i.options.multiSelect):c.ctrlKey||c.metaKey?b.toggleRowSelection(i,a,c,i.options.multiSelect,i.options.noUnselect):b.toggleRowSelection(i,a,c,i.options.multiSelect&&!i.options.modifierKeysToMultiSelect,i.options.noUnselect)}function h(a){(a.ctrlKey||a.shiftKey)&&(a.target.onselectstart=function(){return!1},window.setTimeout(function(){a.target.onselectstart=null},0))}var i=f.grid;a.selectButtonClick=g,"ie"===c.detectBrowser()&&d.on("mousedown",h)}}}]),a.directive("uiGridSelectionSelectAllButtons",["$templateCache","uiGridSelectionService",function(a,b){return{replace:!0,restrict:"E",template:a.get("ui-grid/selectionSelectAllButtons"),scope:!1,link:function(a,c,d,e){var f=a.col.grid;a.headerButtonClick=function(a,c){f.selection.selectAll?(b.clearSelectedRows(f,c),f.options.noUnselect&&f.api.selection.selectRowByVisibleIndex(0,c),f.selection.selectAll=!1):f.options.multiSelect&&(f.api.selection.selectAllVisibleRows(c),f.selection.selectAll=!0)}}}}]),a.directive("uiGridViewport",["$compile","uiGridConstants","uiGridSelectionConstants","gridUtil","$parse","uiGridSelectionService",function(a,b,c,d,e,f){return{priority:-200,scope:!1,compile:function(a,b){var c=angular.element(a.children().children()[0]),d=c.attr("ng-class"),e="";return e=d?d.slice(0,-1)+",'ui-grid-row-selected': row.isSelected}":"{'ui-grid-row-selected': row.isSelected}",c.attr("ng-class",e),{pre:function(a,b,c,d){},post:function(a,b,c,d){}}}}}]),a.directive("uiGridCell",["$compile","uiGridConstants","uiGridSelectionConstants","gridUtil","$parse","uiGridSelectionService","$timeout",function(a,b,c,d,e,f,g){return{priority:-200,restrict:"A",require:"?^uiGrid",scope:!1,link:function(a,c,d,e){function h(){a.grid.options.enableRowSelection&&a.grid.options.enableFullRowSelection&&(c.addClass("ui-grid-disable-selection"),c.on("touchstart",m),c.on("touchend",n),c.on("click",l),a.registered=!0)}function i(){a.registered&&(c.removeClass("ui-grid-disable-selection"),c.off("touchstart",m),c.off("touchend",n),c.off("click",l),a.registered=!1)}var j=0;e.grid.api.cellNav&&e.grid.api.cellNav.on.viewPortKeyDown(a,function(b,c){null!==c&&c.row===a.row&&c.col===a.col&&32===b.keyCode&&"selectionRowHeaderCol"===a.col.colDef.name&&(f.toggleRowSelection(a.grid,a.row,b,a.grid.options.multiSelect&&!a.grid.options.modifierKeysToMultiSelect,a.grid.options.noUnselect),a.$apply())});var l=function(b){c.off("touchend",n),b.shiftKey?f.shiftSelect(a.grid,a.row,b,a.grid.options.multiSelect):b.ctrlKey||b.metaKey?f.toggleRowSelection(a.grid,a.row,b,a.grid.options.multiSelect,a.grid.options.noUnselect):f.toggleRowSelection(a.grid,a.row,b,a.grid.options.multiSelect&&!a.grid.options.modifierKeysToMultiSelect,a.grid.options.noUnselect),a.$apply(),g(function(){c.on("touchend",n)},300)},m=function(a){j=(new Date).getTime(),c.off("click",l)},n=function(a){300>(new Date).getTime()-j&&l(a),g(function(){c.on("click",l)},300)};h();var o=a.grid.registerDataChangeCallback(function(){a.grid.options.enableRowSelection&&a.grid.options.enableFullRowSelection&&!a.registered?h():a.grid.options.enableRowSelection&&a.grid.options.enableFullRowSelection||!a.registered||i()},[b.dataChange.OPTIONS]);c.on("$destroy",o)}}}]),a.directive("uiGridGridFooter",["$compile","uiGridConstants","gridUtil",function(a,b,c){return{restrict:"EA",replace:!0,priority:-1e3,require:"^uiGrid",scope:!0,compile:function(b,d){return{pre:function(b,d,e,f){f.grid.options.showGridFooter&&c.getTemplate("ui-grid/gridFooterSelectedItems").then(function(c){var e=angular.element(c),f=a(e)(b);angular.element(d[0].getElementsByClassName("ui-grid-grid-footer")[0]).append(f)})},post:function(a,b,c,d){}}}}}])}(),function(){"use strict";var a=angular.module("ui.grid.treeBase",["ui.grid"]);a.constant("uiGridTreeBaseConstants",{featureName:"treeBase",rowHeaderColName:"treeBaseRowHeaderCol",EXPANDED:"expanded",COLLAPSED:"collapsed",aggregation:{COUNT:"count",SUM:"sum",MAX:"max",MIN:"min",AVG:"avg"}}),a.service("uiGridTreeBaseService",["$q","uiGridTreeBaseConstants","gridUtil","GridRow","gridClassFactory","i18nService","uiGridConstants","rowSorter",function(a,b,c,d,e,f,g,h){var i={initializeGrid:function(a,b){a.treeBase={},a.treeBase.numberLevels=0,a.treeBase.expandAll=!1,a.treeBase.tree=[],i.defaultGridOptions(a.options),a.registerRowsProcessor(i.treeRows,410),
a.registerColumnBuilder(i.treeBaseColumnBuilder),i.createRowHeader(a);var c={events:{treeBase:{rowExpanded:{},rowCollapsed:{}}},methods:{treeBase:{expandAllRows:function(){i.expandAllRows(a)},collapseAllRows:function(){i.collapseAllRows(a)},toggleRowTreeState:function(b){i.toggleRowTreeState(a,b)},expandRow:function(b){i.expandRow(a,b)},expandRowChildren:function(b){i.expandRowChildren(a,b)},collapseRow:function(b){i.collapseRow(a,b)},collapseRowChildren:function(b){i.collapseRowChildren(a,b)},getTreeExpandedState:function(){return{expandedState:i.getTreeState(a)}},setTreeState:function(b){i.setTreeState(a,b)},getRowChildren:function(a){return a.treeNode.children.map(function(a){return a.row})}}}};a.api.registerEventsFromObject(c.events),a.api.registerMethodsFromObject(c.methods)},defaultGridOptions:function(a){a.treeRowHeaderBaseWidth=a.treeRowHeaderBaseWidth||30,a.treeIndent=a.treeIndent||10,a.showTreeRowHeader=!1!==a.showTreeRowHeader,a.showTreeExpandNoChildren=!1!==a.showTreeExpandNoChildren,a.treeRowHeaderAlwaysVisible=!1!==a.treeRowHeaderAlwaysVisible,a.treeCustomAggregations=a.treeCustomAggregations||{},a.enableExpandAll=!1!==a.enableExpandAll},treeBaseColumnBuilder:function(a,b,c){void 0!==a.customTreeAggregationFn&&(b.treeAggregationFn=a.customTreeAggregationFn),void 0!==a.treeAggregationType&&(b.treeAggregation={type:a.treeAggregationType},void 0!==c.treeCustomAggregations[a.treeAggregationType]?(b.treeAggregationFn=c.treeCustomAggregations[a.treeAggregationType].aggregationFn,b.treeAggregationFinalizerFn=c.treeCustomAggregations[a.treeAggregationType].finalizerFn,b.treeAggregation.label=c.treeCustomAggregations[a.treeAggregationType].label):void 0!==i.nativeAggregations()[a.treeAggregationType]&&(b.treeAggregationFn=i.nativeAggregations()[a.treeAggregationType].aggregationFn,b.treeAggregation.label=i.nativeAggregations()[a.treeAggregationType].label)),void 0!==a.treeAggregationLabel&&(void 0===b.treeAggregation&&(b.treeAggregation={}),b.treeAggregation.label=a.treeAggregationLabel),b.treeAggregationUpdateEntity=!1!==a.treeAggregationUpdateEntity,void 0===b.customTreeAggregationFinalizerFn&&(b.customTreeAggregationFinalizerFn=a.customTreeAggregationFinalizerFn)},createRowHeader:function(a){var c={name:b.rowHeaderColName,displayName:"",width:a.options.treeRowHeaderBaseWidth,minWidth:10,cellTemplate:"ui-grid/treeBaseRowHeader",headerCellTemplate:"ui-grid/treeBaseHeaderCell",enableColumnResizing:!1,enableColumnMenu:!1,exporterSuppressExport:!0,allowCellFocus:!0};c.visible=a.options.treeRowHeaderAlwaysVisible,a.addRowHeaderColumn(c,-100)},expandAllRows:function(a){a.treeBase.tree.forEach(function(c){i.setAllNodes(a,c,b.EXPANDED)}),a.treeBase.expandAll=!0,a.queueGridRefresh()},collapseAllRows:function(a){a.treeBase.tree.forEach(function(c){i.setAllNodes(a,c,b.COLLAPSED)}),a.treeBase.expandAll=!1,a.queueGridRefresh()},setAllNodes:function(a,c,d){void 0!==c.state&&c.state!==d&&(c.state=d,d===b.EXPANDED?a.api.treeBase.raise.rowExpanded(c.row):a.api.treeBase.raise.rowCollapsed(c.row)),c.children&&c.children.forEach(function(b){i.setAllNodes(a,b,d)})},toggleRowTreeState:function(a,c){void 0===c.treeLevel||null===c.treeLevel||c.treeLevel<0||(c.treeNode.state===b.EXPANDED?i.collapseRow(a,c):i.expandRow(a,c),a.queueGridRefresh())},expandRow:function(a,c){void 0===c.treeLevel||null===c.treeLevel||c.treeLevel<0||c.treeNode.state!==b.EXPANDED&&(c.treeNode.state=b.EXPANDED,a.api.treeBase.raise.rowExpanded(c),a.treeBase.expandAll=i.allExpanded(a.treeBase.tree),a.queueGridRefresh())},expandRowChildren:function(a,c){void 0===c.treeLevel||null===c.treeLevel||c.treeLevel<0||(i.setAllNodes(a,c.treeNode,b.EXPANDED),a.treeBase.expandAll=i.allExpanded(a.treeBase.tree),a.queueGridRefresh())},collapseRow:function(a,c){void 0===c.treeLevel||null===c.treeLevel||c.treeLevel<0||c.treeNode.state!==b.COLLAPSED&&(c.treeNode.state=b.COLLAPSED,a.treeBase.expandAll=!1,a.api.treeBase.raise.rowCollapsed(c),a.queueGridRefresh())},collapseRowChildren:function(a,c){void 0===c.treeLevel||null===c.treeLevel||c.treeLevel<0||(i.setAllNodes(a,c.treeNode,b.COLLAPSED),a.treeBase.expandAll=!1,a.queueGridRefresh())},allExpanded:function(a){var b=!0;return a.forEach(function(a){i.allExpandedInternal(a)||(b=!1)}),b},allExpandedInternal:function(a){if(a.children&&a.children.length>0){if(a.state===b.COLLAPSED)return!1;var c=!0;return a.children.forEach(function(a){i.allExpandedInternal(a)||(c=!1)}),c}return!0},treeRows:function(a){if(0===a.length)return a;var c=this;return b.EXPANDED,c.treeBase.tree=i.createTree(c,a),i.updateRowHeaderWidth(c),i.sortTree(c),i.fixFilter(c),i.renderTree(c.treeBase.tree)},updateRowHeaderWidth:function(a){var c=a.getColumn(b.rowHeaderColName),d=a.options.treeRowHeaderBaseWidth+a.options.treeIndent*Math.max(a.treeBase.numberLevels-1,0);c&&d!==c.width&&(c.width=d,a.queueRefresh());var e=!0;!1===a.options.showTreeRowHeader&&(e=!1),!1===a.options.treeRowHeaderAlwaysVisible&&a.treeBase.numberLevels<=0&&(e=!1),c.visible!==e&&(c.visible=e,c.colDef.visible=e,a.queueGridRefresh())},renderTree:function(a){var c=[];return a.forEach(function(a){a.row.visible&&c.push(a.row),a.state===b.EXPANDED&&a.children&&a.children.length>0&&(c=c.concat(i.renderTree(a.children)))}),c},createTree:function(a,c){var d,e=-1,f=[];a.treeBase.tree=[],a.treeBase.numberLevels=0;var g=i.getAggregations(a),h=function(c){if(void 0!==c.entity.$$treeLevel&&c.treeLevel!==c.entity.$$treeLevel&&(c.treeLevel=c.entity.$$treeLevel),c.treeLevel<=e){for(;c.treeLevel<=e;){var h=f.pop();i.finaliseAggregations(h),e--}d=f.length>0?i.setCurrentState(f):b.EXPANDED}(void 0===c.treeLevel||null===c.treeLevel||c.treeLevel<0)&&c.visible&&i.aggregate(a,c,f),i.addOrUseNode(a,c,f,g),void 0!==c.treeLevel&&null!==c.treeLevel&&c.treeLevel>=0&&(f.push(c),e++,d=i.setCurrentState(f)),a.treeBase.numberLevels<c.treeLevel+1&&(a.treeBase.numberLevels=c.treeLevel+1)};for(c.forEach(h);f.length>0;){var j=f.pop();i.finaliseAggregations(j)}return a.treeBase.tree},addOrUseNode:function(a,c,d,e){var f=[];e.forEach(function(a){f.push(i.buildAggregationObject(a.col))});var g={state:b.COLLAPSED,row:c,parentRow:null,aggregations:f,children:[]};c.treeNode&&(g.state=c.treeNode.state),d.length>0&&(g.parentRow=d[d.length-1]),c.treeNode=g,0===d.length?a.treeBase.tree.push(g):d[d.length-1].treeNode.children.push(g)},setCurrentState:function(a){var c=b.EXPANDED;return a.forEach(function(a){a.treeNode.state===b.COLLAPSED&&(c=b.COLLAPSED)}),c},sortTree:function(a){a.columns.forEach(function(a){a.sort&&a.sort.ignoreSort&&delete a.sort.ignoreSort}),a.treeBase.tree=i.sortInternal(a,a.treeBase.tree)},sortInternal:function(a,c){var d=c.map(function(a){return a.row});d=h.sort(a,d,a.columns);var e=d.map(function(a){return a.treeNode});return e.forEach(function(c){c.state===b.EXPANDED&&c.children&&c.children.length>0&&(c.children=i.sortInternal(a,c.children))}),e},fixFilter:function(a){var b;a.treeBase.tree.forEach(function(a){a.children&&a.children.length>0&&(b=a.row.visible,i.fixFilterInternal(a.children,b))})},fixFilterInternal:function(a,b){return a.forEach(function(a){a.row.visible&&!b&&(i.setParentsVisible(a),b=!0),a.children&&a.children.length>0&&i.fixFilterInternal(a.children,b&&a.row.visible)&&(b=!0)}),b},setParentsVisible:function(a){for(;a.parentRow;)a.parentRow.visible=!0,a=a.parentRow.treeNode},buildAggregationObject:function(a){var b={col:a};return a.treeAggregation&&a.treeAggregation.type&&(b.type=a.treeAggregation.type),a.treeAggregation&&a.treeAggregation.label&&(b.label=a.treeAggregation.label),b},getAggregations:function(a){var b=[];return a.columns.forEach(function(c){void 0!==c.treeAggregationFn&&(b.push(i.buildAggregationObject(c)),a.options.showColumnFooter&&void 0===c.colDef.aggregationType&&c.treeAggregation&&(c.treeFooterAggregation=i.buildAggregationObject(c),c.aggregationType=i.treeFooterAggregationType))}),b},aggregate:function(a,b,c){0===c.length&&b.treeNode&&b.treeNode.aggregations&&b.treeNode.aggregations.forEach(function(c){if(void 0!==c.col.treeFooterAggregation){var d=a.getCellValue(b,c.col),e=Number(d);c.col.treeAggregationFn(c.col.treeFooterAggregation,d,e,b)}}),c.forEach(function(c,d){c.treeNode.aggregations&&c.treeNode.aggregations.forEach(function(c){var e=a.getCellValue(b,c.col),f=Number(e);c.col.treeAggregationFn(c,e,f,b),0===d&&void 0!==c.col.treeFooterAggregation&&c.col.treeAggregationFn(c.col.treeFooterAggregation,e,f,b)})})},nativeAggregations:function(){return{count:{label:f.get().aggregation.count,menuTitle:f.get().grouping.aggregate_count,aggregationFn:function(a,b,c){void 0===a.value?a.value=1:a.value++}},sum:{label:f.get().aggregation.sum,menuTitle:f.get().grouping.aggregate_sum,aggregationFn:function(a,b,c){isNaN(c)||(void 0===a.value?a.value=c:a.value+=c)}},min:{label:f.get().aggregation.min,menuTitle:f.get().grouping.aggregate_min,aggregationFn:function(a,b,c){void 0===a.value?a.value=b:void 0!==b&&null!==b&&(b<a.value||null===a.value)&&(a.value=b)}},max:{label:f.get().aggregation.max,menuTitle:f.get().grouping.aggregate_max,aggregationFn:function(a,b,c){void 0===a.value?a.value=b:void 0!==b&&null!==b&&(b>a.value||null===a.value)&&(a.value=b)}},avg:{label:f.get().aggregation.avg,menuTitle:f.get().grouping.aggregate_avg,aggregationFn:function(a,b,c){void 0===a.count?a.count=1:a.count++,isNaN(c)||(void 0===a.value||void 0===a.sum?(a.value=c,a.sum=c):(a.sum+=c,a.value=a.sum/a.count))}}}},finaliseAggregation:function(a,b){b.col.treeAggregationUpdateEntity&&void 0!==a&&void 0!==a.entity["$$"+b.col.uid]&&angular.extend(b,a.entity["$$"+b.col.uid]),"function"==typeof b.col.treeAggregationFinalizerFn&&b.col.treeAggregationFinalizerFn(b),"function"==typeof b.col.customTreeAggregationFinalizerFn&&b.col.customTreeAggregationFinalizerFn(b),void 0===b.rendered&&(b.rendered=b.label?b.label+b.value:b.value)},finaliseAggregations:function(a){null!=a&&void 0!==a.treeNode.aggregations&&a.treeNode.aggregations.forEach(function(b){if(i.finaliseAggregation(a,b),b.col.treeAggregationUpdateEntity){var c={};angular.forEach(b,function(a,d){b.hasOwnProperty(d)&&"col"!==d&&(c[d]=a)}),a.entity["$$"+b.col.uid]=c}})},treeFooterAggregationType:function(a,b){return i.finaliseAggregation(void 0,b.treeFooterAggregation),void 0===b.treeFooterAggregation.value||null===b.treeFooterAggregation.rendered?"":b.treeFooterAggregation.rendered}};return i}]),a.directive("uiGridTreeBaseRowHeaderButtons",["$templateCache","uiGridTreeBaseService",function(a,b){return{replace:!0,restrict:"E",template:a.get("ui-grid/treeBaseRowHeaderButtons"),scope:!0,require:"^uiGrid",link:function(a,c,d,e){var f=e.grid;a.treeButtonClick=function(a,c){b.toggleRowTreeState(f,a,c)}}}}]),a.directive("uiGridTreeBaseExpandAllButtons",["$templateCache","uiGridTreeBaseService",function(a,b){return{replace:!0,restrict:"E",template:a.get("ui-grid/treeBaseExpandAllButtons"),scope:!1,link:function(a,c,d,e){var f=a.col.grid;a.headerButtonClick=function(a,c){f.treeBase.expandAll?b.collapseAllRows(f,c):b.expandAllRows(f,c)}}}}]),a.directive("uiGridViewport",["$compile","uiGridConstants","gridUtil","$parse",function(a,b,c,d){return{priority:-200,scope:!1,compile:function(a,b){var c=angular.element(a.children().children()[0]),d=c.attr("ng-class"),e="";return e=d?d.slice(0,-1)+",'ui-grid-tree-header-row': row.treeLevel > -1}":"{'ui-grid-tree-header-row': row.treeLevel > -1}",c.attr("ng-class",e),{pre:function(a,b,c,d){},post:function(a,b,c,d){}}}}}])}(),function(){"use strict";var a=angular.module("ui.grid.treeView",["ui.grid","ui.grid.treeBase"]);a.constant("uiGridTreeViewConstants",{featureName:"treeView",rowHeaderColName:"treeBaseRowHeaderCol",EXPANDED:"expanded",COLLAPSED:"collapsed",aggregation:{COUNT:"count",SUM:"sum",MAX:"max",MIN:"min",AVG:"avg"}}),a.service("uiGridTreeViewService",["$q","uiGridTreeViewConstants","uiGridTreeBaseConstants","uiGridTreeBaseService","gridUtil","GridRow","gridClassFactory","i18nService","uiGridConstants",function(a,b,c,d,e,f,g,h,i){var j={initializeGrid:function(a,b){d.initializeGrid(a,b),a.treeView={},a.registerRowsProcessor(j.adjustSorting,60);var c={events:{treeView:{}},methods:{treeView:{}}};a.api.registerEventsFromObject(c.events),a.api.registerMethodsFromObject(c.methods)},defaultGridOptions:function(a){a.enableTreeView=!1!==a.enableTreeView},adjustSorting:function(a){return this.columns.forEach(function(a){a.sort&&(a.sort.ignoreSort=!0)}),a}};return j}]),a.directive("uiGridTreeView",["uiGridTreeViewConstants","uiGridTreeViewService","$templateCache",function(a,b,c){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(a,c,d,e){!1!==e.grid.options.enableTreeView&&b.initializeGrid(e.grid,a)},post:function(a,b,c,d){}}}}}])}(),function(){"use strict";var a=angular.module("ui.grid.validate",["ui.grid"]);a.service("uiGridValidateService",["$sce","$q","$http","i18nService","uiGridConstants",function(a,b,c,d,e){var f={validatorFactories:{},setExternalFactoryFunction:function(a){f.externalFactoryFunction=a},clearExternalFactory:function(){delete f.externalFactoryFunction},getValidatorFromExternalFactory:function(a,b){return f.externalFactoryFunction(a,b).validatorFactory(b)},getMessageFromExternalFactory:function(a,b){return f.externalFactoryFunction(a,b).messageFunction(b)},setValidator:function(a,b,c){f.validatorFactories[a]={validatorFactory:b,messageFunction:c}},getValidator:function(a,b){if(f.externalFactoryFunction){var c=f.getValidatorFromExternalFactory(a,b);if(c)return c}if(!f.validatorFactories[a])throw"Invalid validator name: "+a;return f.validatorFactories[a].validatorFactory(b)},getMessage:function(a,b){if(f.externalFactoryFunction){var c=f.getMessageFromExternalFactory(a,b);if(c)return c}return f.validatorFactories[a].messageFunction(b)},isInvalid:function(a,b){return a["$$invalid"+b.name]},setInvalid:function(a,b){a["$$invalid"+b.name]=!0},setValid:function(a,b){delete a["$$invalid"+b.name]},setError:function(a,b,c){a["$$errors"+b.name]||(a["$$errors"+b.name]={}),a["$$errors"+b.name][c]=!0},clearError:function(a,b,c){a["$$errors"+b.name]&&c in a["$$errors"+b.name]&&delete a["$$errors"+b.name][c]},getErrorMessages:function(a,b){var c=[];return a["$$errors"+b.name]&&0!==Object.keys(a["$$errors"+b.name]).length?(Object.keys(a["$$errors"+b.name]).sort().forEach(function(a){c.push(f.getMessage(a,b.validators[a]))}),c):c},getFormattedErrors:function(b,c){var e="",g=f.getErrorMessages(b,c);return g.length?(g.forEach(function(a){e+=a+"<br/>"}),a.trustAsHtml("<p><b>"+d.getSafeText("validate.error")+"</b></p>"+e)):void 0},getTitleFormattedErrors:function(b,c){var g="",h=f.getErrorMessages(b,c);return h.length?(h.forEach(function(a){g+=a+"\n"}),a.trustAsHtml(d.getSafeText("validate.error")+"\n"+g)):void 0},runValidators:function(a,c,d,e,g){if(d!==e){if(void 0===c.name||!c.name)throw new Error("colDef.name is required to perform validation");f.setValid(a,c);var i=[];for(var j in c.validators){f.clearError(a,c,j);var k=f.getValidator(j,c.validators[j]),l=b.when(k(e,d,a,c)).then(function(a,b,c){return function(h){h||(f.setInvalid(a,b),f.setError(a,b,c),g&&g.api.validate.raise.validationFailed(a,b,d,e))}}(a,c,j));i.push(l)}return b.all(i)}},createDefaultValidators:function(){f.setValidator("minLength",function(a){return function(b,c,d,e){return void 0===c||null===c||""===c||c.length>=a}},function(a){return d.getSafeText("validate.minLength").replace("THRESHOLD",a)}),f.setValidator("maxLength",function(a){return function(b,c,d,e){return void 0===c||null===c||""===c||c.length<=a}},function(a){return d.getSafeText("validate.maxLength").replace("THRESHOLD",a)}),f.setValidator("required",function(a){return function(b,c,d,e){return!a||!(void 0===c||null===c||""===c)}},function(a){return d.getSafeText("validate.required")})},initializeGrid:function(a,b){b.validate={isInvalid:f.isInvalid,getFormattedErrors:f.getFormattedErrors,getTitleFormattedErrors:f.getTitleFormattedErrors,runValidators:f.runValidators};var c={events:{validate:{validationFailed:function(a,b,c,d){}}},methods:{validate:{isInvalid:function(a,c){return b.validate.isInvalid(a,c)},getErrorMessages:function(a,c){return b.validate.getErrorMessages(a,c)},getFormattedErrors:function(a,c){return b.validate.getFormattedErrors(a,c)},getTitleFormattedErrors:function(a,c){return b.validate.getTitleFormattedErrors(a,c)}}}};b.api.registerEventsFromObject(c.events),b.api.registerMethodsFromObject(c.methods),b.edit&&b.api.edit.on.afterCellEdit(a,function(a,c,d,e){b.validate.runValidators(a,c,d,e,b)}),f.createDefaultValidators()}};return f}]),a.directive("uiGridValidate",["gridUtil","uiGridValidateService",function(a,b){return{priority:0,replace:!0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(a,c,d,e){b.initializeGrid(a,e.grid)},post:function(a,b,c,d){}}}}}])}(),angular.module("ui.grid").run(["$templateCache",function(a){"use strict";a.put("ui-grid/ui-grid-filter",'<div class="ui-grid-filter-container" ng-repeat="colFilter in col.filters" ng-class="{\'ui-grid-filter-cancel-button-hidden\' : colFilter.disableCancelFilterButton === true }"><div ng-if="colFilter.type !== \'select\'"><input type="text" class="ui-grid-filter-input ui-grid-filter-input-{{$index}}" ng-model="colFilter.term" ng-attr-placeholder="{{colFilter.placeholder || \'\'}}" aria-label="{{colFilter.ariaLabel || aria.defaultFilterLabel}}"><div role="button" class="ui-grid-filter-button" ng-click="removeFilter(colFilter, $index)" ng-if="!colFilter.disableCancelFilterButton" ng-disabled="colFilter.term === undefined || colFilter.term === null || colFilter.term === \'\'" ng-show="colFilter.term !== undefined && colFilter.term !== null && colFilter.term !== \'\'"><i class="ui-grid-icon-cancel" ui-grid-one-bind-aria-label="aria.removeFilter">&nbsp;</i></div></div><div ng-if="colFilter.type === \'select\'"><select class="ui-grid-filter-select ui-grid-filter-input-{{$index}}" ng-model="colFilter.term" ng-attr-placeholder="{{colFilter.placeholder || aria.defaultFilterLabel}}" aria-label="{{colFilter.ariaLabel || \'\'}}" ng-options="option.value as option.label for option in colFilter.selectOptions"><option value=""></option></select><div role="button" class="ui-grid-filter-button-select" ng-click="removeFilter(colFilter, $index)" ng-if="!colFilter.disableCancelFilterButton" ng-disabled="colFilter.term === undefined || colFilter.term === null || colFilter.term === \'\'" ng-show="colFilter.term !== undefined && colFilter.term != null"><i class="ui-grid-icon-cancel" ui-grid-one-bind-aria-label="aria.removeFilter">&nbsp;</i></div></div></div>'),a.put("ui-grid/ui-grid-footer",'<div class="ui-grid-footer-panel ui-grid-footer-aggregates-row">\x3c!-- tfooter --\x3e<div class="ui-grid-footer ui-grid-footer-viewport"><div class="ui-grid-footer-canvas"><div class="ui-grid-footer-cell-wrapper" ng-style="colContainer.headerCellWrapperStyle()"><div role="row" class="ui-grid-footer-cell-row"><div ui-grid-footer-cell role="gridcell" ng-repeat="col in colContainer.renderedColumns track by col.uid" col="col" render-index="$index" class="ui-grid-footer-cell ui-grid-clearfix"></div></div></div></div></div></div>'),a.put("ui-grid/ui-grid-grid-footer",'<div class="ui-grid-footer-info ui-grid-grid-footer"><span>{{\'search.totalItems\' | t}} {{grid.rows.length}}</span> <span ng-if="grid.renderContainers.body.visibleRowCache.length !== grid.rows.length" class="ngLabel">({{"search.showingItems" | t}} {{grid.renderContainers.body.visibleRowCache.length}})</span></div>'),a.put("ui-grid/ui-grid-group-panel",'<div class="ui-grid-group-panel"><div ui-t="groupPanel.description" class="description" ng-show="groupings.length == 0"></div><ul ng-show="groupings.length > 0" class="ngGroupList"><li class="ngGroupItem" ng-repeat="group in configGroups"><span class="ngGroupElement"><span class="ngGroupName">{{group.displayName}} <span ng-click="removeGroup($index)" class="ngRemoveGroup">x</span></span> <span ng-hide="$last" class="ngGroupArrow"></span></span></li></ul></div>'),a.put("ui-grid/ui-grid-header",'<div role="rowgroup" class="ui-grid-header">\x3c!-- theader --\x3e<div class="ui-grid-top-panel"><div class="ui-grid-header-viewport"><div class="ui-grid-header-canvas"><div class="ui-grid-header-cell-wrapper" ng-style="colContainer.headerCellWrapperStyle()"><div role="row" class="ui-grid-header-cell-row"><div class="ui-grid-header-cell ui-grid-clearfix" ng-repeat="col in colContainer.renderedColumns track by col.uid" ui-grid-header-cell col="col" render-index="$index"></div></div></div></div></div></div></div>'),a.put("ui-grid/ui-grid-menu-button",'<div class="ui-grid-menu-button"><div role="button" ui-grid-one-bind-id-grid="\'grid-menu\'" class="ui-grid-icon-container" ng-click="toggleMenu()" aria-haspopup="true"><i class="ui-grid-icon-menu" ui-grid-one-bind-aria-label="i18n.aria.buttonLabel">&nbsp;</i></div><div ui-grid-menu menu-items="menuItems"></div></div>'),a.put("ui-grid/ui-grid-no-header",'<div class="ui-grid-top-panel"></div>'),a.put("ui-grid/ui-grid-row","<div ng-repeat=\"(colRenderIndex, col) in colContainer.renderedColumns track by col.uid\" ui-grid-one-bind-id-grid=\"rowRenderIndex + '-' + col.uid + '-cell'\" class=\"ui-grid-cell\" ng-class=\"{ 'ui-grid-row-header-cell': col.isRowHeader }\" role=\"{{col.isRowHeader ? 'rowheader' : 'gridcell'}}\" ui-grid-cell></div>"),a.put("ui-grid/ui-grid",'<div ui-i18n="en" class="ui-grid">\x3c!-- TODO (c0bra): add "scoped" attr here, eventually? --\x3e<style ui-grid-style>.grid{{ grid.id }} {\n      /* Styles for the grid */\n    }\n\n    .grid{{ grid.id }} .ui-grid-row, .grid{{ grid.id }} .ui-grid-cell, .grid{{ grid.id }} .ui-grid-cell .ui-grid-vertical-bar {\n      height: {{ grid.options.rowHeight }}px;\n    }\n\n    .grid{{ grid.id }} .ui-grid-row:last-child .ui-grid-cell {\n      border-bottom-width: {{ ((grid.getTotalRowHeight() < grid.getViewportHeight()) && \'1\') || \'0\' }}px;\n    }\n\n    {{ grid.verticalScrollbarStyles }}\n    {{ grid.horizontalScrollbarStyles }}\n\n    /*\n    .ui-grid[dir=rtl] .ui-grid-viewport {\n      padding-left: {{ grid.verticalScrollbarWidth }}px;\n    }\n    */\n\n    {{ grid.customStyles }}</style><div class="ui-grid-contents-wrapper"><div ui-grid-menu-button ng-if="grid.options.enableGridMenu"></div><div ng-if="grid.hasLeftContainer()" style="width: 0" ui-grid-pinned-container="\'left\'"></div><div ui-grid-render-container container-id="\'body\'" col-container-name="\'body\'" row-container-name="\'body\'" bind-scroll-horizontal="true" bind-scroll-vertical="true" enable-horizontal-scrollbar="grid.options.enableHorizontalScrollbar" enable-vertical-scrollbar="grid.options.enableVerticalScrollbar"></div><div ng-if="grid.hasRightContainer()" style="width: 0" ui-grid-pinned-container="\'right\'"></div><div ui-grid-grid-footer ng-if="grid.options.showGridFooter"></div><div ui-grid-column-menu ng-if="grid.options.enableColumnMenus"></div><div ng-transclude></div></div></div>'),a.put("ui-grid/uiGridCell",'<div class="ui-grid-cell-contents" title="TOOLTIP">{{COL_FIELD CUSTOM_FILTERS}}</div>'),a.put("ui-grid/uiGridColumnMenu",'<div class="ui-grid-column-menu"><div ui-grid-menu menu-items="menuItems">\x3c!-- <div class="ui-grid-column-menu">\n    <div class="inner" ng-show="menuShown">\n      <ul>\n        <div ng-show="grid.options.enableSorting">\n          <li ng-click="sortColumn($event, asc)" ng-class="{ \'selected\' : col.sort.direction == asc }"><i class="ui-grid-icon-sort-alt-up"></i> Sort Ascending</li>\n          <li ng-click="sortColumn($event, desc)" ng-class="{ \'selected\' : col.sort.direction == desc }"><i class="ui-grid-icon-sort-alt-down"></i> Sort Descending</li>\n          <li ng-show="col.sort.direction" ng-click="unsortColumn()"><i class="ui-grid-icon-cancel"></i> Remove Sort</li>\n        </div>\n      </ul>\n    </div>\n  </div> --\x3e</div></div>'),a.put("ui-grid/uiGridFooterCell",'<div class="ui-grid-cell-contents" col-index="renderIndex"><div>{{ col.getAggregationText() + ( col.getAggregationValue() CUSTOM_FILTERS ) }}</div></div>'),a.put("ui-grid/uiGridHeaderCell",'<div role="columnheader" ng-class="{ \'sortable\': sortable }" ui-grid-one-bind-aria-labelledby-grid="col.uid + \'-header-text \' + col.uid + \'-sortdir-text\'" aria-sort="{{col.sort.direction == asc ? \'ascending\' : ( col.sort.direction == desc ? \'descending\' : (!col.sort.direction ? \'none\' : \'other\'))}}"><div role="button" tabindex="0" class="ui-grid-cell-contents ui-grid-header-cell-primary-focus" col-index="renderIndex" title="TOOLTIP"><span class="ui-grid-header-cell-label" ui-grid-one-bind-id-grid="col.uid + \'-header-text\'">{{ col.displayName CUSTOM_FILTERS }}</span> <span ui-grid-one-bind-id-grid="col.uid + \'-sortdir-text\'" ui-grid-visible="col.sort.direction" aria-label="{{getSortDirectionAriaLabel()}}"><i ng-class="{ \'ui-grid-icon-up-dir\': col.sort.direction == asc, \'ui-grid-icon-down-dir\': col.sort.direction == desc, \'ui-grid-icon-blank\': !col.sort.direction }" title="{{isSortPriorityVisible() ? i18n.headerCell.priority + \' \' + ( col.sort.priority + 1 )  : null}}" aria-hidden="true"></i> <sub ui-grid-visible="isSortPriorityVisible()" class="ui-grid-sort-priority-number">{{col.sort.priority + 1}}</sub></span></div><div role="button" tabindex="0" ui-grid-one-bind-id-grid="col.uid + \'-menu-button\'" class="ui-grid-column-menu-button" ng-if="grid.options.enableColumnMenus && !col.isRowHeader  && col.colDef.enableColumnMenu !== false" ng-click="toggleMenu($event)" ng-class="{\'ui-grid-column-menu-button-last-col\': isLastCol}" ui-grid-one-bind-aria-label="i18n.headerCell.aria.columnMenuButtonLabel" aria-haspopup="true"><i class="ui-grid-icon-angle-down" aria-hidden="true">&nbsp;</i></div><div ui-grid-filter></div></div>'),a.put("ui-grid/uiGridMenu",'<div class="ui-grid-menu" ng-if="shown"><style ui-grid-style>{{dynamicStyles}}</style><div class="ui-grid-menu-mid" ng-show="shownMid"><div class="ui-grid-menu-inner"><ul role="menu" class="ui-grid-menu-items"><li ng-repeat="item in menuItems" role="menuitem" ui-grid-menu-item ui-grid-one-bind-id="\'menuitem-\'+$index" action="item.action" name="item.title" active="item.active" icon="item.icon" shown="item.shown" context="item.context" template-url="item.templateUrl" leave-open="item.leaveOpen" screen-reader-only="item.screenReaderOnly"></li></ul></div></div></div>'),a.put("ui-grid/uiGridMenuItem",'<button type="button" class="ui-grid-menu-item" ng-click="itemAction($event, title)" ng-show="itemShown()" ng-class="{ \'ui-grid-menu-item-active\': active(), \'ui-grid-sr-only\': (!focus && screenReaderOnly) }" aria-pressed="{{active()}}" tabindex="0" ng-focus="focus=true" ng-blur="focus=false"><i ng-class="icon" aria-hidden="true">&nbsp;</i> {{ name }}</button>'),a.put("ui-grid/uiGridRenderContainer","<div role=\"grid\" ui-grid-one-bind-id-grid=\"'grid-container'\" class=\"ui-grid-render-container\" ng-style=\"{ 'margin-left': colContainer.getMargin('left') + 'px', 'margin-right': colContainer.getMargin('right') + 'px' }\">\x3c!-- All of these dom elements are replaced in place --\x3e<div ui-grid-header></div><div ui-grid-viewport></div><div ng-if=\"colContainer.needsHScrollbarPlaceholder()\" class=\"ui-grid-scrollbar-placeholder\" ng-style=\"{height:colContainer.grid.scrollbarHeight + 'px'}\"></div><ui-grid-footer ng-if=\"grid.options.showColumnFooter\"></ui-grid-footer></div>"),a.put("ui-grid/uiGridViewport",'<div role="rowgroup" class="ui-grid-viewport" ng-style="colContainer.getViewportStyle()">\x3c!-- tbody --\x3e<div class="ui-grid-canvas"><div ng-repeat="(rowRenderIndex, row) in rowContainer.renderedRows track by $index" class="ui-grid-row" ng-style="Viewport.rowStyle(rowRenderIndex)"><div role="row" ui-grid-row="row" row-render-index="rowRenderIndex"></div></div></div></div>'),a.put("ui-grid/cellEditor",'<div><form name="inputForm"><input type="INPUT_TYPE" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD"></form></div>'),a.put("ui-grid/dropdownEditor",'<div><form name="inputForm"><select ng-class="\'colt\' + col.uid" ui-grid-edit-dropdown ng-model="MODEL_COL_FIELD" ng-options="field[editDropdownIdLabel] as field[editDropdownValueLabel] CUSTOM_FILTERS for field in editDropdownOptionsArray"></select></form></div>'),a.put("ui-grid/fileChooserEditor",'<div><form name="inputForm"><input ng-class="\'colt\' + col.uid" ui-grid-edit-file-chooser type="file" id="files" name="files[]" ng-model="MODEL_COL_FIELD"></form></div>'),a.put("ui-grid/expandableRow",'<div ui-grid-expandable-row ng-if="expandableRow.shouldRenderExpand()" class="expandableRow" style="float:left; margin-top: 1px; margin-bottom: 1px" ng-style="{width: (grid.renderContainers.body.getCanvasWidth()) + \'px\', height: row.expandedRowHeight + \'px\'}"></div>'),a.put("ui-grid/expandableRowHeader",'<div class="ui-grid-row-header-cell ui-grid-expandable-buttons-cell"><div class="ui-grid-cell-contents"><i ng-if="!row.groupHeader==true" ng-class="{ \'ui-grid-icon-plus-squared\' : !row.isExpanded, \'ui-grid-icon-minus-squared\' : row.isExpanded }" ng-click="grid.api.expandable.toggleRowExpansion(row.entity)"></i></div></div>'),a.put("ui-grid/expandableScrollFiller","<div ng-if=\"expandableRow.shouldRenderFiller()\" ng-class=\"{scrollFiller:true, scrollFillerClass:(colContainer.name === 'body')}\" ng-style=\"{ width: (grid.getViewportWidth()) + 'px', height: row.expandedRowHeight + 2 + 'px', 'margin-left': grid.options.rowHeader.rowHeaderWidth + 'px' }\"><i class=\"ui-grid-icon-spin5 ui-grid-animate-spin\" ng-style=\"{'margin-top': ( row.expandedRowHeight/2 - 5) + 'px', 'margin-left' : ((grid.getViewportWidth() - grid.options.rowHeader.rowHeaderWidth)/2 - 5) + 'px'}\"></i></div>"),a.put("ui-grid/expandableTopRowHeader",'<div class="ui-grid-row-header-cell ui-grid-expandable-buttons-cell"><div class="ui-grid-cell-contents"><i ng-class="{ \'ui-grid-icon-plus-squared\' : !grid.expandable.expandedAll, \'ui-grid-icon-minus-squared\' : grid.expandable.expandedAll }" ng-click="grid.api.expandable.toggleAllRows()"></i></div></div>'),a.put("ui-grid/csvLink",'<span class="ui-grid-exporter-csv-link-span"><a href="data:text/csv;charset=UTF-8,CSV_CONTENT" download="FILE_NAME">LINK_LABEL</a></span>'),a.put("ui-grid/importerMenuItem",'<li class="ui-grid-menu-item"><form><input class="ui-grid-importer-file-chooser" type="file" id="files" name="files[]"></form></li>'),a.put("ui-grid/importerMenuItemContainer","<div ui-grid-importer-menu-item></div>"),
a.put("ui-grid/pagination",'<div role="contentinfo" class="ui-grid-pager-panel" ui-grid-pager ng-show="grid.options.enablePaginationControls"><div role="navigation" class="ui-grid-pager-container"><div role="menubar" class="ui-grid-pager-control"><button type="button" role="menuitem" class="ui-grid-pager-first" ui-grid-one-bind-title="aria.pageToFirst" ui-grid-one-bind-aria-label="aria.pageToFirst" ng-click="pageFirstPageClick()" ng-disabled="cantPageBackward()"><div ng-class="grid.isRTL() ? \'last-triangle\' : \'first-triangle\'"><div ng-class="grid.isRTL() ? \'last-bar-rtl\' : \'first-bar\'"></div></div></button> <button type="button" role="menuitem" class="ui-grid-pager-previous" ui-grid-one-bind-title="aria.pageBack" ui-grid-one-bind-aria-label="aria.pageBack" ng-click="pagePreviousPageClick()" ng-disabled="cantPageBackward()"><div ng-class="grid.isRTL() ? \'last-triangle prev-triangle\' : \'first-triangle prev-triangle\'"></div></button> <input type="number" ui-grid-one-bind-title="aria.pageSelected" ui-grid-one-bind-aria-label="aria.pageSelected" class="ui-grid-pager-control-input" ng-model="grid.options.paginationCurrentPage" min="1" max="{{ paginationApi.getTotalPages() }}" required> <span class="ui-grid-pager-max-pages-number" ng-show="paginationApi.getTotalPages() > 0"><abbr ui-grid-one-bind-title="paginationOf">/</abbr> {{ paginationApi.getTotalPages() }}</span> <button type="button" role="menuitem" class="ui-grid-pager-next" ui-grid-one-bind-title="aria.pageForward" ui-grid-one-bind-aria-label="aria.pageForward" ng-click="pageNextPageClick()" ng-disabled="cantPageForward()"><div ng-class="grid.isRTL() ? \'first-triangle next-triangle\' : \'last-triangle next-triangle\'"></div></button> <button type="button" role="menuitem" class="ui-grid-pager-last" ui-grid-one-bind-title="aria.pageToLast" ui-grid-one-bind-aria-label="aria.pageToLast" ng-click="pageLastPageClick()" ng-disabled="cantPageToLast()"><div ng-class="grid.isRTL() ? \'first-triangle\' : \'last-triangle\'"><div ng-class="grid.isRTL() ? \'first-bar-rtl\' : \'last-bar\'"></div></div></button></div><div class="ui-grid-pager-row-count-picker" ng-if="grid.options.paginationPageSizes.length > 1"><select ui-grid-one-bind-aria-labelledby-grid="\'items-per-page-label\'" ng-model="grid.options.paginationPageSize" ng-options="o as o for o in grid.options.paginationPageSizes"></select><span ui-grid-one-bind-id-grid="\'items-per-page-label\'" class="ui-grid-pager-row-count-label">&nbsp;{{sizesLabel}}</span></div><span ng-if="grid.options.paginationPageSizes.length <= 1" class="ui-grid-pager-row-count-label">{{grid.options.paginationPageSize}}&nbsp;{{sizesLabel}}</span></div><div class="ui-grid-pager-count-container"><div class="ui-grid-pager-count"><span ng-show="grid.options.totalItems > 0">{{showingLow}} <abbr ui-grid-one-bind-title="paginationThrough">-</abbr> {{showingHigh}} {{paginationOf}} {{grid.options.totalItems}} {{totalItemsLabel}}</span></div></div></div>'),a.put("ui-grid/columnResizer",'<div ui-grid-column-resizer ng-if="grid.options.enableColumnResizing" class="ui-grid-column-resizer" col="col" position="right" render-index="renderIndex" unselectable="on"></div>'),a.put("ui-grid/gridFooterSelectedItems",'<span ng-if="grid.selection.selectedCount !== 0 && grid.options.enableFooterTotalSelected">({{"search.selectedItems" | t}} {{grid.selection.selectedCount}})</span>'),a.put("ui-grid/selectionHeaderCell",'<div>\x3c!-- <div class="ui-grid-vertical-bar">&nbsp;</div> --\x3e<div class="ui-grid-cell-contents" col-index="renderIndex"><ui-grid-selection-select-all-buttons ng-if="grid.options.enableSelectAll"></ui-grid-selection-select-all-buttons></div></div>'),a.put("ui-grid/selectionRowHeader",'<div class="ui-grid-disable-selection"><div class="ui-grid-cell-contents"><ui-grid-selection-row-header-buttons></ui-grid-selection-row-header-buttons></div></div>'),a.put("ui-grid/selectionRowHeaderButtons",'<div class="ui-grid-selection-row-header-buttons ui-grid-icon-ok" ng-class="{\'ui-grid-row-selected\': row.isSelected}" ng-click="selectButtonClick(row, $event)">&nbsp;</div>'),a.put("ui-grid/selectionSelectAllButtons",'<div class="ui-grid-selection-row-header-buttons ui-grid-icon-ok" ng-class="{\'ui-grid-all-selected\': grid.selection.selectAll}" ng-click="headerButtonClick($event)"></div>'),a.put("ui-grid/treeBaseExpandAllButtons",'<div class="ui-grid-tree-base-row-header-buttons" ng-class="{\'ui-grid-icon-minus-squared\': grid.treeBase.numberLevels > 0 && grid.treeBase.expandAll, \'ui-grid-icon-plus-squared\': grid.treeBase.numberLevels > 0 && !grid.treeBase.expandAll}" ng-click="headerButtonClick($event)"></div>'),a.put("ui-grid/treeBaseHeaderCell",'<div><div class="ui-grid-cell-contents" col-index="renderIndex"><ui-grid-tree-base-expand-all-buttons ng-if="grid.options.enableExpandAll"></ui-grid-tree-base-expand-all-buttons></div></div>'),a.put("ui-grid/treeBaseRowHeader",'<div class="ui-grid-cell-contents"><ui-grid-tree-base-row-header-buttons></ui-grid-tree-base-row-header-buttons></div>'),a.put("ui-grid/treeBaseRowHeaderButtons","<div class=\"ui-grid-tree-base-row-header-buttons\" ng-class=\"{'ui-grid-tree-base-header': row.treeLevel > -1 }\" ng-click=\"treeButtonClick(row, $event)\"><i ng-class=\"{'ui-grid-icon-minus-squared': ( ( grid.options.showTreeExpandNoChildren && row.treeLevel > -1 ) || ( row.treeNode.children && row.treeNode.children.length > 0 ) ) && row.treeNode.state === 'expanded', 'ui-grid-icon-plus-squared': ( ( grid.options.showTreeExpandNoChildren && row.treeLevel > -1 ) || ( row.treeNode.children && row.treeNode.children.length > 0 ) ) && row.treeNode.state === 'collapsed'}\" ng-style=\"{'padding-left': grid.options.treeIndent * row.treeLevel + 'px'}\"></i> &nbsp;</div>"),a.put("ui-grid/cellTitleValidator",'<div class="ui-grid-cell-contents" ng-class="{invalid:grid.validate.isInvalid(row.entity,col.colDef)}" title="{{grid.validate.getTitleFormattedErrors(row.entity,col.colDef)}}">{{COL_FIELD CUSTOM_FILTERS}}</div>'),a.put("ui-grid/cellTooltipValidator",'<div class="ui-grid-cell-contents" ng-class="{invalid:grid.validate.isInvalid(row.entity,col.colDef)}" tooltip-html-unsafe="{{grid.validate.getFormattedErrors(row.entity,col.colDef)}}" tooltip-enable="grid.validate.isInvalid(row.entity,col.colDef)" tooltip-append-to-body="true" tooltip-placement="top" title="TOOLTIP">{{COL_FIELD CUSTOM_FILTERS}}</div>')}]),!function(){angular.module("uiCropper",[]),angular.module("uiCropper").factory("cropAreaCircle",["cropArea",function(e){var t=function(){e.apply(this,arguments),this._boxResizeBaseSize=25,this._boxResizeNormalRatio=1,this._boxResizeHoverRatio=1.2,this._iconMoveNormalRatio=.9,this._iconMoveHoverRatio=1.2,this._boxResizeNormalSize=this._boxResizeBaseSize*this._boxResizeNormalRatio,this._boxResizeHoverSize=this._boxResizeBaseSize*this._boxResizeHoverRatio,this._posDragStartX=0,this._posDragStartY=0,this._posResizeStartX=0,this._posResizeStartY=0,this._posResizeStartSize=0,this._boxResizeIsHover=!1,this._areaIsHover=!1,this._boxResizeIsDragging=!1,this._areaIsDragging=!1};return t.prototype=new e,t.prototype.getType=function(){return"circle"},t.prototype._calcCirclePerimeterCoords=function(e){var t=this._size.w/2,i=e*(Math.PI/180);return[this.getCenterPoint().x+t*Math.cos(i),this.getCenterPoint().y+t*Math.sin(i)]},t.prototype._calcResizeIconCenterCoords=function(){return this._calcCirclePerimeterCoords(-45)},t.prototype._isCoordWithinArea=function(e){return Math.sqrt((e[0]-this.getCenterPoint().x)*(e[0]-this.getCenterPoint().x)+(e[1]-this.getCenterPoint().y)*(e[1]-this.getCenterPoint().y))<this._size.w/2},t.prototype._isCoordWithinBoxResize=function(e){var t=this._calcResizeIconCenterCoords(),i=this._boxResizeHoverSize/2;return e[0]>t[0]-i&&e[0]<t[0]+i&&e[1]>t[1]-i&&e[1]<t[1]+i},t.prototype._drawArea=function(e,t,i){e.arc(t.x,t.y,i.w/2,0,2*Math.PI)},t.prototype.draw=function(){e.prototype.draw.apply(this,arguments);var t=this.getCenterPoint();this._cropCanvas.drawIconMove([t.x,t.y],this._areaIsHover?this._iconMoveHoverRatio:this._iconMoveNormalRatio),this._cropCanvas.drawIconResizeBoxNESW(this._calcResizeIconCenterCoords(),this._boxResizeBaseSize,this._boxResizeIsHover?this._boxResizeHoverRatio:this._boxResizeNormalRatio)},t.prototype.processMouseMove=function(e,t){var i="default",r=!1;if(this._boxResizeIsHover=!1,this._areaIsHover=!1,this._areaIsDragging)this.setCenterPointOnMove({x:e-this._posDragStartX,y:t-this._posDragStartY}),this._areaIsHover=!0,i="move",r=!0,this._events.trigger("area-move");else if(this._boxResizeIsDragging){i="nesw-resize";var a,s,n;s=e-this._posResizeStartX,n=this._posResizeStartY-t,a=s>n?this._posResizeStartSize.w+2*n:this._posResizeStartSize.w+2*s;var o={},h={};o.x=this.getCenterPoint().x-.5*a,h.x=this.getCenterPoint().x+.5*a,o.y=this.getCenterPoint().y-.5*a,h.y=this.getCenterPoint().y+.5*a,this.circleOnMove(o,h),this._boxResizeIsHover=!0,r=!0,this._events.trigger("area-resize")}else this._isCoordWithinBoxResize([e,t])?(i="nesw-resize",this._areaIsHover=!1,this._boxResizeIsHover=!0,r=!0):this._isCoordWithinArea([e,t])&&(i="move",this._areaIsHover=!0,r=!0);return angular.element(this._ctx.canvas).css({cursor:i}),r},t.prototype.processMouseDown=function(e,t){if(this._isCoordWithinBoxResize([e,t]))this._areaIsDragging=!1,this._areaIsHover=!1,this._boxResizeIsDragging=!0,this._boxResizeIsHover=!0,this._posResizeStartX=e,this._posResizeStartY=t,this._posResizeStartSize=this._size,this._events.trigger("area-resize-start");else if(this._isCoordWithinArea([e,t])){this._areaIsDragging=!0,this._areaIsHover=!0,this._boxResizeIsDragging=!1,this._boxResizeIsHover=!1;var i=this.getCenterPoint();this._posDragStartX=e-i.x,this._posDragStartY=t-i.y,this._events.trigger("area-move-start")}},t.prototype.processMouseUp=function(){this._areaIsDragging&&(this._areaIsDragging=!1,this._events.trigger("area-move-end")),this._boxResizeIsDragging&&(this._boxResizeIsDragging=!1,this._events.trigger("area-resize-end")),this._areaIsHover=!1,this._boxResizeIsHover=!1,this._posDragStartX=0,this._posDragStartY=0},t}]),angular.module("uiCropper").factory("cropAreaRectangle",["cropArea",function(e){var t=function(){e.apply(this,arguments),this._resizeCtrlBaseRadius=15,this._resizeCtrlNormalRatio=.6,this._resizeCtrlHoverRatio=.7,this._iconMoveNormalRatio=.9,this._iconMoveHoverRatio=1.2,this._resizeCtrlNormalRadius=this._resizeCtrlBaseRadius*this._resizeCtrlNormalRatio,this._resizeCtrlHoverRadius=this._resizeCtrlBaseRadius*this._resizeCtrlHoverRatio,this._posDragStartX=0,this._posDragStartY=0,this._posResizeStartX=0,this._posResizeStartY=0,this._posResizeStartSize={w:0,h:0},this._resizeCtrlIsHover=-1,this._areaIsHover=!1,this._resizeCtrlIsDragging=-1,this._areaIsDragging=!1};return t.prototype=new e,t.prototype.getType=function(){return"rectangle"},t.prototype._calcRectangleCorners=function(){var e=this.getSize(),t=this.getSouthEastBound();return[[e.x,e.y],[t.x,e.y],[e.x,t.y],[t.x,t.y]]},t.prototype._calcRectangleDimensions=function(){var e=this.getSize(),t=this.getSouthEastBound();return{left:e.x,top:e.y,right:t.x,bottom:t.y}},t.prototype._isCoordWithinArea=function(e){var t=this._calcRectangleDimensions();return e[0]>=t.left&&e[0]<=t.right&&e[1]>=t.top&&e[1]<=t.bottom},t.prototype._isCoordWithinResizeCtrl=function(e){for(var t=this._calcRectangleCorners(),i=-1,r=0,a=t.length;a>r;r++){var s=t[r];if(e[0]>s[0]-this._resizeCtrlHoverRadius&&e[0]<s[0]+this._resizeCtrlHoverRadius&&e[1]>s[1]-this._resizeCtrlHoverRadius&&e[1]<s[1]+this._resizeCtrlHoverRadius){i=r;break}}return i},t.prototype._drawArea=function(e,t,i){e.rect(i.x,i.y,i.w,i.h)},t.prototype.draw=function(){e.prototype.draw.apply(this,arguments);var t=this.getCenterPoint();this._cropCanvas.drawIconMove([t.x,t.y],this._areaIsHover?this._iconMoveHoverRatio:this._iconMoveNormalRatio);for(var i=this._calcRectangleCorners(),r=0,a=i.length;a>r;r++){var s=i[r];this._cropCanvas.drawIconResizeBoxBase(s,this._resizeCtrlBaseRadius,this._resizeCtrlIsHover===r?this._resizeCtrlHoverRatio:this._resizeCtrlNormalRatio)}},t.prototype.processMouseMove=function(e,t){var i="default",r=!1;if(this._resizeCtrlIsHover=-1,this._areaIsHover=!1,this._areaIsDragging)this.setCenterPointOnMove({x:e-this._posDragStartX,y:t-this._posDragStartY}),this._areaIsHover=!0,i="move",r=!0,this._events.trigger("area-move");else if(this._resizeCtrlIsDragging>-1){var a=this.getSize(),s=this.getSouthEastBound(),n=e;switch(this._resizeCtrlIsDragging){case 0:this._aspect&&(n=s.x-(s.y-t)*this._aspect),this.setSizeByCorners({x:n,y:t},{x:s.x,y:s.y}),i="nwse-resize";break;case 1:this._aspect&&(n=a.x+(s.y-t)*this._aspect),this.setSizeByCorners({x:a.x,y:t},{x:n,y:s.y}),i="nesw-resize";break;case 2:this._aspect&&(n=s.x-(t-a.y)*this._aspect),this.setSizeByCorners({x:n,y:a.y},{x:s.x,y:t}),i="nesw-resize";break;case 3:this._aspect&&(n=a.x+(t-a.y)*this._aspect),this.setSizeByCorners({x:a.x,y:a.y},{x:n,y:t}),i="nwse-resize"}this._resizeCtrlIsHover=this._resizeCtrlIsDragging,r=!0,this._events.trigger("area-resize")}else{var o=this._isCoordWithinResizeCtrl([e,t]);if(o>-1){switch(o){case 0:i="nwse-resize";break;case 1:case 2:i="nesw-resize";break;case 3:i="nwse-resize"}this._areaIsHover=!1,this._resizeCtrlIsHover=o,r=!0}else this._isCoordWithinArea([e,t])&&(i="move",this._areaIsHover=!0,r=!0)}return angular.element(this._ctx.canvas).css({cursor:i}),r},t.prototype.processMouseDown=function(e,t){var i=this._isCoordWithinResizeCtrl([e,t]);if(i>-1)this._areaIsDragging=!1,this._areaIsHover=!1,this._resizeCtrlIsDragging=i,this._resizeCtrlIsHover=i,this._posResizeStartX=e,this._posResizeStartY=t,this._posResizeStartSize=this._size,this._events.trigger("area-resize-start");else if(this._isCoordWithinArea([e,t])){this._areaIsDragging=!0,this._areaIsHover=!0,this._resizeCtrlIsDragging=-1,this._resizeCtrlIsHover=-1;var r=this.getCenterPoint();this._posDragStartX=e-r.x,this._posDragStartY=t-r.y,this._events.trigger("area-move-start")}},t.prototype.processMouseUp=function(){this._areaIsDragging&&(this._areaIsDragging=!1,this._events.trigger("area-move-end")),this._resizeCtrlIsDragging>-1&&(this._resizeCtrlIsDragging=-1,this._events.trigger("area-resize-end")),this._areaIsHover=!1,this._resizeCtrlIsHover=-1,this._posDragStartX=0,this._posDragStartY=0},t}]),angular.module("uiCropper").factory("cropAreaSquare",["cropArea",function(e){var t=function(){e.apply(this,arguments),this._resizeCtrlBaseRadius=15,this._resizeCtrlNormalRatio=.6,this._resizeCtrlHoverRatio=.7,this._iconMoveNormalRatio=.9,this._iconMoveHoverRatio=1.2,this._resizeCtrlNormalRadius=this._resizeCtrlBaseRadius*this._resizeCtrlNormalRatio,this._resizeCtrlHoverRadius=this._resizeCtrlBaseRadius*this._resizeCtrlHoverRatio,this._posDragStartX=0,this._posDragStartY=0,this._posResizeStartX=0,this._posResizeStartY=0,this._posResizeStartSize=0,this._resizeCtrlIsHover=-1,this._areaIsHover=!1,this._resizeCtrlIsDragging=-1,this._areaIsDragging=!1};return t.prototype=new e,t.prototype.getType=function(){return"square"},t.prototype._calcSquareCorners=function(){var e=this.getSize(),t=this.getSouthEastBound();return[[e.x,e.y],[t.x,e.y],[e.x,t.y],[t.x,t.y]]},t.prototype._calcSquareDimensions=function(){var e=this.getSize(),t=this.getSouthEastBound();return{left:e.x,top:e.y,right:t.x,bottom:t.y}},t.prototype._isCoordWithinArea=function(e){var t=this._calcSquareDimensions();return e[0]>=t.left&&e[0]<=t.right&&e[1]>=t.top&&e[1]<=t.bottom},t.prototype._isCoordWithinResizeCtrl=function(e){for(var t=this._calcSquareCorners(),i=-1,r=0,a=t.length;a>r;r++){var s=t[r];if(e[0]>s[0]-this._resizeCtrlHoverRadius&&e[0]<s[0]+this._resizeCtrlHoverRadius&&e[1]>s[1]-this._resizeCtrlHoverRadius&&e[1]<s[1]+this._resizeCtrlHoverRadius){i=r;break}}return i},t.prototype._drawArea=function(e,t,i){e.rect(i.x,i.y,i.w,i.h)},t.prototype.draw=function(){e.prototype.draw.apply(this,arguments);var t=this.getCenterPoint();this._cropCanvas.drawIconMove([t.x,t.y],this._areaIsHover?this._iconMoveHoverRatio:this._iconMoveNormalRatio);for(var i=this._calcSquareCorners(),r=0,a=i.length;a>r;r++){var s=i[r];this._cropCanvas.drawIconResizeBoxBase(s,this._resizeCtrlBaseRadius,this._resizeCtrlIsHover===r?this._resizeCtrlHoverRatio:this._resizeCtrlNormalRatio)}},t.prototype._clampPoint=function(e,t){var i=this._ctx.canvas.width;return 0>e&&(t-=Math.abs(e),e=0),0>t&&(e-=Math.abs(t),t=0),e>i&&(t-=i-e,e=i),t>i&&(e-=i-t,t=i),{x:e,y:t}},t.prototype.processMouseMove=function(e,t){var i="default",r=!1;if(this._resizeCtrlIsHover=-1,this._areaIsHover=!1,this._areaIsDragging)this.setCenterPointOnMove({x:e-this._posDragStartX,y:t-this._posDragStartY}),this._areaIsHover=!0,i="move",r=!0,this._events.trigger("area-move");else if(this._resizeCtrlIsDragging>-1){var a,s;switch(this._resizeCtrlIsDragging){case 0:a=-1,s=-1,i="nwse-resize";break;case 1:a=1,s=-1,i="nesw-resize";break;case 2:a=-1,s=1,i="nesw-resize";break;case 3:a=1,s=1,i="nwse-resize"}var n,o=(e-this._posResizeStartX)*a,h=(t-this._posResizeStartY)*s;n=o>h?this._posResizeStartSize.w+h:this._posResizeStartSize.w+o;var c=Math.max(this._minSize.w,n),u={},l={},g={},p={},f=this.getSize(),d=this.getSouthEastBound();switch(this._resizeCtrlIsDragging){case 0:u.x=d.x-c,u.y=d.y-c,u=this._clampPoint(u.x,u.y),this.setSizeByCorners(u,{x:d.x,y:d.y}),i="nwse-resize";break;case 1:p.x=f.x+c,p.y=d.y-c,p=this._clampPoint(p.x,p.y),this.setSizeByCorners({x:f.x,y:p.y},{x:p.x,y:d.y}),i="nesw-resize";break;case 2:g.x=d.x-c,g.y=f.y+c,g=this._clampPoint(g.x,g.y),this.setSizeByCorners({x:g.x,y:f.y},{x:d.x,y:g.y}),i="nesw-resize";break;case 3:l.x=f.x+c,l.y=f.y+c,l=this._clampPoint(l.x,l.y),this.setSizeByCorners({x:f.x,y:f.y},l),i="nwse-resize"}this._resizeCtrlIsHover=this._resizeCtrlIsDragging,r=!0,this._events.trigger("area-resize")}else{var v=this._isCoordWithinResizeCtrl([e,t]);if(v>-1){switch(v){case 0:i="nwse-resize";break;case 1:case 2:i="nesw-resize";break;case 3:i="nwse-resize"}this._areaIsHover=!1,this._resizeCtrlIsHover=v,r=!0}else this._isCoordWithinArea([e,t])&&(i="move",this._areaIsHover=!0,r=!0)}return angular.element(this._ctx.canvas).css({cursor:i}),r},t.prototype.processMouseDown=function(e,t){var i=this._isCoordWithinResizeCtrl([e,t]);if(i>-1)this._areaIsDragging=!1,this._areaIsHover=!1,this._resizeCtrlIsDragging=i,this._resizeCtrlIsHover=i,this._posResizeStartX=e,this._posResizeStartY=t,this._posResizeStartSize=this._size,this._events.trigger("area-resize-start");else if(this._isCoordWithinArea([e,t])){this._areaIsDragging=!0,this._areaIsHover=!0,this._resizeCtrlIsDragging=-1,this._resizeCtrlIsHover=-1;var r=this.getCenterPoint();this._posDragStartX=e-r.x,this._posDragStartY=t-r.y,this._events.trigger("area-move-start")}},t.prototype.processMouseUp=function(){this._areaIsDragging&&(this._areaIsDragging=!1,this._events.trigger("area-move-end")),this._resizeCtrlIsDragging>-1&&(this._resizeCtrlIsDragging=-1,this._events.trigger("area-resize-end")),this._areaIsHover=!1,this._resizeCtrlIsHover=-1,this._posDragStartX=0,this._posDragStartY=0},t}]),angular.module("uiCropper").factory("cropArea",["cropCanvas",function(e){var t=function(t,i){this._ctx=t,this._events=i,this._minSize={x:0,y:0,w:80,h:80},this._initSize=void 0,this._initCoords=void 0,this._allowCropResizeOnCorners=!1,this._forceAspectRatio=!1,this._aspect=null,this._cropCanvas=new e(t),this._image=new Image,this._size={x:0,y:0,w:150,h:150}};return t.prototype.setAllowCropResizeOnCorners=function(e){this._allowCropResizeOnCorners=e},t.prototype.getImage=function(){return this._image},t.prototype.setImage=function(e){this._image=e},t.prototype.setForceAspectRatio=function(e){this._forceAspectRatio=e},t.prototype.setAspect=function(e){this._aspect=e},t.prototype.getAspect=function(){return this._aspect},t.prototype.getCanvasSize=function(){return{w:this._ctx.canvas.width,h:this._ctx.canvas.height}},t.prototype.getSize=function(){return this._size},t.prototype.setSize=function(e){e=this._processSize(e),this._size=this._preventBoundaryCollision(e)},t.prototype.setSizeOnMove=function(e){e=this._processSize(e),this._size=this._allowCropResizeOnCorners?this._preventBoundaryCollision(e):this._allowMouseOutsideCanvas(e)},t.prototype.circleOnMove=function(e,t){var i={x:e.x,y:e.y,w:t.x-e.x,h:t.y-e.y},r=this._ctx.canvas.height,a=this._ctx.canvas.width;(i.w>a||i.h>r)&&(r>a?(i.w=a,i.h=a):(i.w=r,i.h=r)),i.x+i.w>a&&(i.x=a-i.w),i.y+i.h>r&&(i.y=r-i.h),i.x<0&&(i.x=0),i.y<0&&(i.y=0),this._minSize.w>i.w&&(i.w=this._minSize.w,i.x=this._size.x),this._minSize.h>i.h&&(i.h=this._minSize.h,i.y=this._size.y),this._size=i},t.prototype.setSizeByCorners=function(e,t){var i={x:e.x,y:e.y,w:t.x-e.x,h:t.y-e.y};this.setSize(i)},t.prototype.getSouthEastBound=function(){return this._southEastBound(this.getSize())},t.prototype.setMinSize=function(e){this._minSize=this._processSize(e),this.setSize(this._minSize)},t.prototype.getMinSize=function(){return this._minSize},t.prototype.getCenterPoint=function(){var e=this.getSize();return{x:e.x+e.w/2,y:e.y+e.h/2}},t.prototype.setCenterPoint=function(e){var t=this.getSize();this.setSize({x:e.x-t.w/2,y:e.y-t.h/2,w:t.w,h:t.h})},t.prototype.setCenterPointOnMove=function(e){var t=this.getSize();this.setSizeOnMove({x:e.x-t.w/2,y:e.y-t.h/2,w:t.w,h:t.h})},t.prototype.setInitSize=function(e){this._initSize=this._processSize(e),this.setSize(this._initSize)},t.prototype.getInitSize=function(){return this._initSize},t.prototype.setInitCoords=function(e){e.h=this.getSize().h,e.w=this.getSize().w,this._initCoords=this._processSize(e),this.setSize(this._initCoords)},t.prototype.getInitCoords=function(){return this._initCoords},t.prototype.getType=function(){return"circle"},t.prototype._allowMouseOutsideCanvas=function(e){var t=this._ctx.canvas.height,i=this._ctx.canvas.width,r={w:e.w,h:e.h};return r.x=e.x<0?0:e.x+e.w>i?i-e.w:e.x,r.y=e.y<0?0:e.y+e.h>t?t-e.h:e.y,r},t.prototype._preventBoundaryCollision=function(e){var t=this._ctx.canvas.height,i=this._ctx.canvas.width,r={x:e.x,y:e.y},a=this._southEastBound(e);r.x<0&&(r.x=0),r.y<0&&(r.y=0),a.x>i&&(a.x=i),a.y>t&&(a.y=t);var s=this._forceAspectRatio?e.w:a.x-r.x,n=this._forceAspectRatio?e.h:a.y-r.y;n>t&&(n=t),this._aspect&&(s=n*this._aspect,r.x+s>i&&(s=i-r.x,n=s/this._aspect,this._minSize.w>s&&(s=this._minSize.w),this._minSize.h>n&&(n=this._minSize.h),r.x=i-s),r.y+n>t&&(r.y=t-n)),this._forceAspectRatio&&(s=n,r.x+s>i&&(s=i-r.x,s<this._minSize.w&&(s=this._minSize.w),n=s));var o={x:r.x,y:r.y,w:s,h:n};return o.w<this._minSize.w&&!this._forceAspectRatio&&(o.w=this._minSize.w,a=this._southEastBound(o),a.x>i&&(a.x=i,r.x=Math.max(a.x-i,a.x-this._minSize.w),o={x:r.x,y:r.y,w:a.x-r.x,h:a.y-r.y})),o.h<this._minSize.h&&!this._forceAspectRatio&&(o.h=this._minSize.h,a=this._southEastBound(o),a.y>t&&(a.y=t,r.y=Math.max(a.y-t,a.y-this._minSize.h),o={x:r.x,y:r.y,w:a.x-r.x,h:a.y-r.y})),this._forceAspectRatio&&(a=this._southEastBound(o),a.y>t&&(o.y=t-o.h),a.x>i&&(o.x=i-o.w)),o},t.prototype._dontDragOutside=function(){var e=this._ctx.canvas.height,t=this._ctx.canvas.width;this._width>t&&(this._width=t),this._height>e&&(this._height=e),this._x<this._width/2&&(this._x=this._width/2),this._x>t-this._width/2&&(this._x=t-this._width/2),this._y<this._height/2&&(this._y=this._height/2),this._y>e-this._height/2&&(this._y=e-this._height/2)},t.prototype._drawArea=function(){},t.prototype._processSize=function(e){"number"==typeof e&&(e={w:e,h:e});var t=e.w;return this._aspect&&(t=e.h*this._aspect),{x:void 0===e.x?this.getSize().x:e.x,y:void 0===e.y?this.getSize().y:e.y,w:t||this._minSize.w,h:e.h||this._minSize.h}},t.prototype._southEastBound=function(e){return{x:e.x+e.w,y:e.y+e.h}},t.prototype.draw=function(){this._cropCanvas.drawCropArea(this._image,this.getCenterPoint(),this._size,this._drawArea)},t.prototype.processMouseMove=function(){},t.prototype.processMouseDown=function(){},t.prototype.processMouseUp=function(){},t}]),angular.module("uiCropper").factory("cropCanvas",[function(){var e=[[-.5,-2],[-3,-4.5],[-.5,-7],[-7,-7],[-7,-.5],[-4.5,-3],[-2,-.5]],t=[[.5,-2],[3,-4.5],[.5,-7],[7,-7],[7,-.5],[4.5,-3],[2,-.5]],i=[[-.5,2],[-3,4.5],[-.5,7],[-7,7],[-7,.5],[-4.5,3],[-2,.5]],r=[[.5,2],[3,4.5],[.5,7],[7,7],[7,.5],[4.5,3],[2,.5]],a=[[-1.5,-2.5],[-1.5,-6],[-5,-6],[0,-11],[5,-6],[1.5,-6],[1.5,-2.5]],s=[[-2.5,-1.5],[-6,-1.5],[-6,-5],[-11,0],[-6,5],[-6,1.5],[-2.5,1.5]],n=[[-1.5,2.5],[-1.5,6],[-5,6],[0,11],[5,6],[1.5,6],[1.5,2.5]],o=[[2.5,-1.5],[6,-1.5],[6,-5],[11,0],[6,5],[6,1.5],[2.5,1.5]],h={areaOutline:"#fff",resizeBoxStroke:"#bababa",resizeBoxFill:"#444",resizeBoxArrowFill:"#fff",resizeCircleStroke:"#bababa",resizeCircleFill:"#444",moveIconFill:"#fff"},c={strokeWidth:1};return function(u){var l=function(e,t,i){return[i*e[0]+t[0],i*e[1]+t[1]]},g=function(e,t,i,r){u.save(),u.fillStyle=t,u.beginPath();var a,s=l(e[0],i,r);u.moveTo(s[0],s[1]);for(var n in e)n>0&&(a=l(e[n],i,r),u.lineTo(a[0],a[1]));u.lineTo(s[0],s[1]),u.fill(),u.closePath(),u.restore()};this.drawIconMove=function(e,t){g(a,h.moveIconFill,e,t),g(s,h.moveIconFill,e,t),g(n,h.moveIconFill,e,t),g(o,h.moveIconFill,e,t)},this.drawIconResizeCircle=function(e,t,i){var r=t*i;u.save(),u.strokeStyle=h.resizeCircleStroke,u.lineWidth=c.strokeWidth,u.fillStyle=h.resizeCircleFill,u.beginPath(),u.arc(e[0],e[1],r,0,2*Math.PI),u.fill(),u.stroke(),u.closePath(),u.restore()},this.drawIconResizeBoxBase=function(e,t,i){var r=t*i;u.save(),u.strokeStyle=h.resizeBoxStroke,u.lineWidth=c.strokeWidth,u.fillStyle=h.resizeBoxFill,u.fillRect(e[0]-r/2,e[1]-r/2,r,r),u.strokeRect(e[0]-r/2,e[1]-r/2,r,r),u.restore()},this.drawIconResizeBoxNESW=function(e,r,a){this.drawIconResizeBoxBase(e,r,a),g(t,h.resizeBoxArrowFill,e,a),g(i,h.resizeBoxArrowFill,e,a)},this.drawIconResizeBoxNWSE=function(t,i,a){this.drawIconResizeBoxBase(t,i,a),g(e,h.resizeBoxArrowFill,t,a),g(r,h.resizeBoxArrowFill,t,a)},this.drawCropArea=function(e,t,i,r){var a=Math.abs(e.width/u.canvas.width),s=Math.abs(e.height/u.canvas.height),n=Math.abs(t.x-i.w/2),o=Math.abs(t.y-i.h/2);u.save(),u.strokeStyle=h.areaOutline,u.lineWidth=c.strokeWidth,u.setLineDash([5,5]),u.beginPath(),r(u,t,i),u.stroke(),u.clip(),i.w>0&&u.drawImage(e,n*a,o*s,Math.abs(i.w*a),Math.abs(i.h*s),n,o,Math.abs(i.w),Math.abs(i.h)),u.beginPath(),r(u,t,i),u.stroke(),u.clip(),u.restore()}}}]),angular.module("uiCropper").service("cropEXIF",[function(){function e(e){return!!e.exifdata}function t(e,t){t=t||e.match(/^data\:([^\;]+)\;base64,/im)[1]||"",e=e.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var i=atob(e),r=i.length,a=new ArrayBuffer(r),s=new Uint8Array(a),n=0;r>n;n++)s[n]=i.charCodeAt(n);return a}function i(e,t){var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="blob",i.onload=function(){(200===this.status||0===this.status)&&t(this.response)},i.send()}function r(e,r){function n(t){var i=a(t),n=s(t);e.exifdata=i||{},e.iptcdata=n||{},r&&r.call(e)}var o=new FileReader;if(e.src){if(/^data\:/i.test(e.src)){n(t(e.src))}else/^blob\:/i.test(e.src)&&(o.onload=function(e){n(e.target.result)},i(e.src,function(e){o.readAsArrayBuffer(e)}));var c=new XMLHttpRequest;c.onload=function(){if(200!==this.status&&0!==this.status)throw"Could not load image";n(c.response),c=null},c.open("GET",e.src,!0),c.responseType="arraybuffer";try{c.send(null)}catch(u){}}else window.FileReader&&(e instanceof window.Blob||e instanceof window.File)&&(o.onload=function(e){l&&console.log("Got file of length "+e.target.result.byteLength),n(e.target.result)},o.readAsArrayBuffer(e))}function a(e){var t=new DataView(e);if(l&&console.log("Got file of length "+e.byteLength),255!==t.getUint8(0)||216!==t.getUint8(1))return l&&console.log("Not a valid JPEG"),!1;for(var i,r=2,a=e.byteLength;a>r;){if(255!==t.getUint8(r))return l&&console.log("Not a valid marker at offset "+r+", found: "+t.getUint8(r)),!1;if(i=t.getUint8(r+1),l&&console.log(i),225===i)return l&&console.log("Found 0xFFE1 marker"),u(t,r+4,t.getUint16(r+2));r+=2+t.getUint16(r+2)}}function s(e){var t=new DataView(e);if(l&&console.log("Got file of length "+e.byteLength),255!==t.getUint8(0)||216!==t.getUint8(1))return l&&console.log("Not a valid JPEG"),!1;for(var i=2,r=e.byteLength;r>i;){if(function(e,t){return 56===e.getUint8(t)&&66===e.getUint8(t+1)&&73===e.getUint8(t+2)&&77===e.getUint8(t+3)&&4===e.getUint8(t+4)&&4===e.getUint8(t+5)}(t,i)){var s=t.getUint8(i+7);s%2!=0&&(s+=1),0===s&&(s=4);return n(e,i+8+s,t.getUint16(i+6+s))}i++}}function n(e,t,i){for(var r,a,s,n,h=new DataView(e),u={},l=t;t+i>l;)28===h.getUint8(l)&&2===h.getUint8(l+1)&&(n=h.getUint8(l+2))in v&&(s=h.getInt16(l+3),s+5,a=v[n],r=c(h,l+5,s),u.hasOwnProperty(a)?u[a]instanceof Array?u[a].push(r):u[a]=[u[a],r]:u[a]=r),l++;return u}function o(e,t,i,r,a){var s,n,o,c=e.getUint16(i,!a),u={};for(o=0;c>o;o++)s=i+12*o+2,n=r[e.getUint16(s,!a)],!n&&l&&console.log("Unknown tag: "+e.getUint16(s,!a)),u[n]=h(e,s,t,i,a);return u}function h(e,t,i,r,a){var s,n,o,h,u,l,g=e.getUint16(t+2,!a),p=e.getUint32(t+4,!a),f=e.getUint32(t+8,!a)+i;switch(g){case 1:case 7:if(1===p)return e.getUint8(t+8,!a);for(s=p>4?f:t+8,n=[],h=0;p>h;h++)n[h]=e.getUint8(s+h);return n;case 2:return s=p>4?f:t+8,c(e,s,p-1);case 3:if(1===p)return e.getUint16(t+8,!a);for(s=p>2?f:t+8,n=[],h=0;p>h;h++)n[h]=e.getUint16(s+2*h,!a);return n;case 4:if(1===p)return e.getUint32(t+8,!a);for(n=[],h=0;p>h;h++)n[h]=e.getUint32(f+4*h,!a);return n;case 5:if(1===p)return u=e.getUint32(f,!a),l=e.getUint32(f+4,!a),o={},o.numerator=u,o.denominator=l,o;for(n=[],h=0;p>h;h++)u=e.getUint32(f+8*h,!a),l=e.getUint32(f+4+8*h,!a),n[h]={},n[h].numerator=u,n[h].denominator=l;return n;case 9:if(1===p)return e.getInt32(t+8,!a);for(n=[],h=0;p>h;h++)n[h]=e.getInt32(f+4*h,!a);return n;case 10:if(1===p)return e.getInt32(f,!a)/e.getInt32(f+4,!a);for(n=[],h=0;p>h;h++)n[h]=e.getInt32(f+8*h,!a)/e.getInt32(f+4+8*h,!a);return n}}function c(e,t,i){for(var r="",a=t;t+i>a;a++)r+=String.fromCharCode(e.getUint8(a));return r}function u(e,t){if("Exif"!==c(e,t,4))return l&&console.log("Not valid EXIF data! "+c(e,t,4)),!1;var i,r,a,s,n,h=t+6;if(18761===e.getUint16(h))i=!1;else{if(19789!==e.getUint16(h))return l&&console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)"),!1;i=!0}if(42!==e.getUint16(h+2,!i))return l&&console.log("Not valid TIFF data! (no 0x002A)"),!1;var u=e.getUint32(h+4,!i);if(8>u)return l&&console.log("Not valid TIFF data! (First offset less than 8)",e.getUint32(h+4,!i)),!1;if(r=o(e,h,h+u,p,i),r.ExifIFDPointer){s=o(e,h,h+r.ExifIFDPointer,g,i);for(a in s){switch(a){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":s[a]=d[a][s[a]];break;case"ExifVersion":case"FlashpixVersion":s[a]=String.fromCharCode(s[a][0],s[a][1],s[a][2],s[a][3]);break;case"ComponentsConfiguration":s[a]=d.Components[s[a][0]]+d.Components[s[a][1]]+d.Components[s[a][2]]+d.Components[s[a][3]]}r[a]=s[a]}}if(r.GPSInfoIFDPointer){n=o(e,h,h+r.GPSInfoIFDPointer,f,i);for(a in n){switch(a){case"GPSVersionID":n[a]=n[a][0]+"."+n[a][1]+"."+n[a][2]+"."+n[a][3]}r[a]=n[a]}}return r}var l=!1,g=this.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",
41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},p=this.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},f=this.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},d=this.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}},v={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};this.getData=function(t,i){return!((t instanceof Image||t instanceof HTMLImageElement)&&!t.complete)&&(e(t)?i&&i.call(t):r(t,i),!0)},this.getTag=function(t,i){return e(t)?t.exifdata[i]:void 0},this.getAllTags=function(t){if(!e(t))return{};var i,r=t.exifdata,a={};for(i in r)r.hasOwnProperty(i)&&(a[i]=r[i]);return a},this.pretty=function(t){if(!e(t))return"";var i,r=t.exifdata,a="";for(i in r)r.hasOwnProperty(i)&&(a+="object"==typeof r[i]?r[i]instanceof Number?i+" : "+r[i]+" ["+r[i].numerator+"/"+r[i].denominator+"]\r\n":i+" : ["+r[i].length+" values]\r\n":i+" : "+r[i]+"\r\n");return a},this.readFromBinaryFile=function(e){return a(e)}}]),angular.module("uiCropper").factory("cropHost",["$document","$q","cropAreaCircle","cropAreaSquare","cropAreaRectangle","cropEXIF",function(e,t,i,r,a,s){var n=8,o=function(e){var t=e.getBoundingClientRect(),i=document.body,r=document.documentElement,a=window.pageYOffset||r.scrollTop||i.scrollTop,s=window.pageXOffset||r.scrollLeft||i.scrollLeft,n=r.clientTop||i.clientTop||0,o=r.clientLeft||i.clientLeft||0,h=t.top+a-n,c=t.left+s-o;return{top:Math.round(h),left:Math.round(c)}};return function(h,c,u){function l(){g.clearRect(0,0,g.canvas.width,g.canvas.height),null!==p&&(g.drawImage(p,0,0,g.canvas.width,g.canvas.height),g.save(),g.fillStyle="rgba(0, 0, 0, 0.65)",g.fillRect(0,0,g.canvas.width,g.canvas.height),g.restore(),f.draw())}var g=null,p=null,f=null,d=null,v=null,m=this,w=[100,100],_=[300,300],y=null,z=[],S={w:200,h:200},C=null,I="image/png",x=null,R=!1;this.setInitMax=function(e){d=e},this.setAllowCropResizeOnCorners=function(e){f.setAllowCropResizeOnCorners(e)};var b=function(){if(null!==p){f.setImage(p);var e=[p.width,p.height],t=p.width/p.height,i=e;i[0]>_[0]?(i[0]=_[0],i[1]=i[0]/t):i[0]<w[0]&&(i[0]=w[0],i[1]=i[0]/t),"fixed-height"===y&&i[1]>_[1]?(i[1]=_[1],i[0]=i[1]*t):i[1]<w[1]&&(i[1]=w[1],i[0]=i[1]*t),h.prop("width",i[0]).prop("height",i[1]),"fixed-height"===y&&h.css({"margin-left":-i[0]/2+"px","margin-top":-i[1]/2+"px"});var r=g.canvas.width,a=g.canvas.height,s=m.getAreaType();if("circle"===s||"square"===s)r>a&&(r=a),a=r;else if("rectangle"===s&&v){var n=f.getAspect();r/a>n?r=n*a:a=n*r}if(d?f.setSize({w:r,h:a}):void 0!==f.getInitSize()?f.setSize({w:Math.min(f.getInitSize().w,r/2),h:Math.min(f.getInitSize().h,a/2)}):f.setSize({w:Math.min(200,r/2),h:Math.min(200,a/2)}),f.getInitCoords())if(m.areaInitIsRelativeToImage){var o=p.width/i[0];f.setSize({w:f.getInitSize().w/o,h:f.getInitSize().h/o,x:f.getInitCoords().x/o,y:f.getInitCoords().y/o})}else f.setSize({w:f.getSize().w,h:f.getSize().h,x:f.getInitCoords().x,y:f.getInitCoords().y});else f.setCenterPoint({x:g.canvas.width/2,y:g.canvas.height/2})}else h.prop("width",0).prop("height",0).css({"margin-top":0});l()},D=function(e){return angular.isDefined(e.changedTouches)?e.changedTouches:e.originalEvent.changedTouches},M=function(e){if(null!==p){var t,i,r=o(g.canvas);"touchmove"===e.type?(t=D(e)[0].pageX,i=D(e)[0].pageY):(t=e.pageX,i=e.pageY),f.processMouseMove(t-r.left,i-r.top),l()}},P=function(e){if(e.preventDefault(),e.stopPropagation(),null!==p){var t,i,r=o(g.canvas);"touchstart"===e.type?(t=D(e)[0].pageX,i=D(e)[0].pageY):(t=e.pageX,i=e.pageY),f.processMouseDown(t-r.left,i-r.top),l()}},A=function(e){if(null!==p){var t,i,r=o(g.canvas);"touchend"===e.type?(t=D(e)[0].pageX,i=D(e)[0].pageY):(t=e.pageX,i=e.pageY),f.processMouseUp(t-r.left,i-r.top),l()}},B=function(e){var t,i,r=e,a=f.getCenterPoint(),s={dataURI:null,imageData:null};if(i=angular.element("<canvas></canvas>")[0],t=i.getContext("2d"),i.width=r.w,i.height=r.h,null!==p){var n=(a.x-f.getSize().w/2)*(p.width/g.canvas.width),o=(a.y-f.getSize().h/2)*(p.height/g.canvas.height),h=f.getSize().w*(p.width/g.canvas.width),c=f.getSize().h*(p.height/g.canvas.height);if(R)t.drawImage(p,n,o,h,c,0,0,r.w,r.h);else{var u,l,d=h/c;d>1?(l=r.w,u=l/d):(u=r.h,l=u*d),t.drawImage(p,n,o,h,c,0,0,Math.round(l),Math.round(u))}s.dataURI=null!==x?i.toDataURL(I,x):i.toDataURL(I)}return s};this.getResultImage=function(){if(0===z.length)return B(this.getResultImageSize());for(var e=[],t=0;t<z.length;t++)e.push({dataURI:B(z[t]).dataURI,w:z[t].w,h:z[t].h});return e},this.getResultImageDataBlob=function(){var e,i,r=f.getCenterPoint(),a=this.getResultImageSize(),s=t.defer();if(i=angular.element("<canvas></canvas>")[0],e=i.getContext("2d"),i.width=a.w,i.height=a.h,null!==p){var n=(r.x-f.getSize().w/2)*(p.width/g.canvas.width),o=(r.y-f.getSize().h/2)*(p.height/g.canvas.height),h=f.getSize().w*(p.width/g.canvas.width),c=f.getSize().h*(p.height/g.canvas.height);if(R)e.drawImage(p,n,o,h,c,0,0,a.w,a.h);else{var u,l,d=h/c;d>1?(l=a.w,u=l/d):(u=a.h,l=u*d),e.drawImage(p,n,o,h,c,0,0,Math.round(l),Math.round(u))}}return null!==x?i.toBlob(function(e){s.resolve(e)},I,x):i.toBlob(function(e){s.resolve(e)},I),s.promise},this.getAreaCoords=function(){return f.getSize()},this.getArea=function(){return f},this.setNewImageSource=function(e){if(p=null,b(),e){var t=new Image;t.onload=function(){u.trigger("load-done"),s.getData(t,function(){var e=s.getTag(t,"Orientation");if([3,6,8].indexOf(e)>-1){var i=document.createElement("canvas"),r=i.getContext("2d"),a=t.width,n=t.height,o=0,h=0,c=0,l=0,g=0;switch(l=a,g=n,e){case 3:o=-t.width,h=-t.height,c=180;break;case 6:a=t.height,n=t.width,h=-t.height,l=n,g=a,c=90;break;case 8:a=t.height,n=t.width,o=-t.width,l=n,g=a,c=270}var f=1e3;if(a>f||n>f){var d=0;a>f?(d=f/a,a=f,n*=d):n>f&&(d=f/n,n=f,a*=d),h*=d,o*=d,l*=d,g*=d}i.width=a,i.height=n,r.rotate(c*Math.PI/180),r.drawImage(t,o,h,l,g),p=new Image,p.onload=function(){b(),u.trigger("image-updated")},p.src=i.toDataURL(I)}else p=t,u.trigger("image-updated");b()})},t.onerror=function(){u.trigger("load-error")},u.trigger("load-start"),e instanceof window.Blob?t.src=URL.createObjectURL(e):(("http"===e.substring(0,4).toLowerCase()||"//"===e.substring(0,2))&&(t.crossOrigin="anonymous"),t.src=e)}},this.setMaxDimensions=function(e,t){if(_=[e,t],null!==p){var i=g.canvas.width,r=g.canvas.height,a=[p.width,p.height],s=p.width/p.height,n=a;n[0]>_[0]?(n[0]=_[0],n[1]=n[0]/s):n[0]<w[0]&&(n[0]=w[0],n[1]=n[0]/s),"fixed-height"===y&&n[1]>_[1]?(n[1]=_[1],n[0]=n[1]*s):n[1]<w[1]&&(n[1]=w[1],n[0]=n[1]*s),h.prop("width",n[0]).prop("height",n[1]),"fixed-height"===y&&h.css({"margin-left":-n[0]/2+"px","margin-top":-n[1]/2+"px"});var o=g.canvas.width/i,c=g.canvas.height/r,u=Math.min(o,c),d=f.getCenterPoint();f.setSize({w:f.getSize().w*u,h:f.getSize().h*u}),f.setCenterPoint({x:d.x*o,y:d.y*c})}else h.prop("width",0).prop("height",0).css({"margin-top":0});l()},this.setAreaMinSize=function(e){angular.isUndefined(e)||(e="number"==typeof e||"string"==typeof e?{w:parseInt(parseInt(e),10),h:parseInt(parseInt(e),10)}:{w:parseInt(e.w,10),h:parseInt(e.h,10)},isNaN(e.w)||isNaN(e.h)||(f.setMinSize(e),l()))},this.setAreaMinRelativeSize=function(e){if(null!==p&&!angular.isUndefined(e)){var t=f.getCanvasSize();"number"==typeof e||"string"==typeof e?(C={w:e,h:e},e={w:t.w/(p.width/parseInt(parseInt(e),10)),h:t.h/(p.height/parseInt(parseInt(e),10))}):(C=e,e={w:t.w/(p.width/parseInt(parseInt(e.w),10)),h:t.h/(p.height/parseInt(parseInt(e.h),10))}),isNaN(e.w)||isNaN(e.h)||(f.setMinSize(e),l())}},this.setAreaInitSize=function(e){angular.isUndefined(e)||(e="number"==typeof e||"string"==typeof e?{w:parseInt(parseInt(e),10),h:parseInt(parseInt(e),10)}:{w:parseInt(e.w,10),h:parseInt(e.h,10)},isNaN(e.w)||isNaN(e.h)||(f.setInitSize(e),l()))},this.setAreaInitCoords=function(e){angular.isUndefined(e)||(e={x:parseInt(e.x,10),y:parseInt(e.y,10)},isNaN(e.x)||isNaN(e.y)||(f.setInitCoords(e),l()))},this.setMaxCanvasDimensions=function(e){if(!angular.isUndefined(e)){var t=[];t="number"==typeof e||"string"==typeof e?[parseInt(parseInt(e),10),parseInt(parseInt(e),10)]:[parseInt(e.w,10),parseInt(e.h,10)],!isNaN(t[0])&&t[0]>0&&t[0]>w[0]&&!isNaN(t[1])&&t[1]>0&&t[1]>w[1]&&(_=t)}},this.setMinCanvasDimensions=function(e){if(!angular.isUndefined(e)){var t=[];t="number"==typeof e||"string"==typeof e?[parseInt(parseInt(e),10),parseInt(parseInt(e),10)]:[parseInt(e.w,10),parseInt(e.h,10)],!isNaN(t[0])&&t[0]>=0&&!isNaN(t[1])&&t[1]>=0&&(w=t)}},this.setScalemode=function(e){y=e},this.getScalemode=function(){return y},this.getResultImageSize=function(){if("selection"===S)return f.getSize();if("max"===S){var e=1;p&&g&&g.canvas&&(e=p.width/g.canvas.width);var t={w:e*f.getSize().w,h:e*f.getSize().h};return C&&(t.w<C.w&&(t.w=C.w),t.h<C.h&&(t.h=C.h)),t}return S},this.setResultImageSize=function(e){if(angular.isArray(e))return z=e.slice(),void(e={w:parseInt(e[0].w,10),h:parseInt(e[0].h,10)});if(!angular.isUndefined(e)){if(angular.isString(e))return void(S=e);angular.isNumber(e)&&(e=parseInt(e,10),e={w:e,h:e}),e={w:parseInt(e.w,10),h:parseInt(e.h,10)},isNaN(e.w)||isNaN(e.h)||(S=e,l())}},this.setResultImageFormat=function(e){I=e},this.setResultImageQuality=function(e){e=parseFloat(e),!isNaN(e)&&e>=0&&1>=e&&(x=e)},this.getAreaType=function(){return f.getType()},this.setAreaType=function(e){var t=f.getCenterPoint(),s=f.getSize(),n=f.getMinSize(),o=t.x,h=t.y,c=i;"square"===e?c=r:"rectangle"===e&&(c=a),f=new c(g,u),f.setMinSize(n),f.setSize(s),"square"===e||"circle"===e?(R=!0,f.setForceAspectRatio(!0)):(R=!1,f.setForceAspectRatio(!1)),f.setCenterPoint({x:o,y:h}),null!==p&&f.setImage(p),l()},this.getDominantColor=function(e){var i=new Image,r=new ColorThief,a=null,s=t.defer();return i.src=e,i.onload=function(){a=r.getColor(i),s.resolve(a)},s.promise},this.getPalette=function(e){var i=new Image,r=new ColorThief,a=null,s=t.defer();return i.src=e,i.onload=function(){a=r.getPalette(i,n),s.resolve(a)},s.promise},this.setPaletteColorLength=function(e){n=e},this.setAspect=function(e){v=!0,f.setAspect(e);var t=f.getMinSize();t.w=t.h*e,f.setMinSize(t);var i=f.getSize();i.w=i.h*e,f.setSize(i)},g=h[0].getContext("2d"),f=new i(g,u),e.on("mousemove",M),h.on("mousedown",P),e.on("mouseup",A),e.on("touchmove",M),h.on("touchstart",P),e.on("touchend",A),this.destroy=function(){e.off("mousemove",M),h.off("mousedown",P),e.off("mouseup",A),e.off("touchmove",M),h.off("touchstart",P),e.off("touchend",A),h.remove()}}}]),angular.module("uiCropper").factory("cropPubSub",[function(){return function(){var e={};this.on=function(t,i){return t.split(" ").forEach(function(t){e[t]||(e[t]=[]),e[t].push(i)}),this},this.trigger=function(t,i){return angular.forEach(e[t],function(e){e.call(null,i)}),this}}}]),angular.module("uiCropper").directive("uiCropper",["$timeout","cropHost","cropPubSub",function(e,t,i){return{restrict:"E",scope:{image:"=",resultImage:"=",resultArrayImage:"=?",resultBlob:"=?",urlBlob:"=?",chargement:"=?",cropject:"=?",maxCanvasDimensions:"=?",minCanvasDimensions:"=?",canvasScalemode:"@?",changeOnFly:"=?",liveView:"=?",initMaxArea:"=?",areaCoords:"=?",areaType:"@",areaMinSize:"=?",areaInitSize:"=?",areaInitCoords:"=?",areaInitIsRelativeToImage:"=?",areaMinRelativeSize:"=?",resultImageSize:"=?",resultImageFormat:"=?",resultImageQuality:"=?",aspectRatio:"=?",allowCropResizeOnCorners:"=?",dominantColor:"=?",paletteColor:"=?",paletteColorLength:"=?",onChange:"&",onLoadBegin:"&",onLoadDone:"&",onLoadError:"&"},template:"<canvas></canvas>",controller:["$scope",function(e){e.events=new i}],link:function(i,r){var a=i.events,s=new t(r.find("canvas"),{},a);i.canvasScalemode?s.setScalemode(i.canvasScalemode):s.setScalemode("fixed-height"),r.addClass(s.getScalemode());var n,o=function(e){e.areaCoords=s.getAreaCoords()},h=function(e,t,i){if(""!==e.image&&(!e.liveView.block||t)){var r,a=s.getResultImage();angular.isArray(a)?(r=a[0].dataURI,e.resultArrayImage=a):r=a.dataURI;var h=window.URL||window.webkitURL;n!==r&&(n=r,e.resultImage=r,e.liveView.callback&&e.liveView.callback(r),i&&i(r),s.getResultImageDataBlob().then(function(t){e.resultBlob=t,e.urlBlob=h.createObjectURL(t)}),e.resultImage&&(s.getDominantColor(e.resultImage).then(function(t){e.dominantColor=t}),s.getPalette(e.resultImage).then(function(t){e.paletteColor=t})),o(e),e.onChange({$dataURI:e.resultImage}))}};i.liveView&&"boolean"==typeof i.liveView.block?i.liveView.render=function(e){h(i,!0,e)}:i.liveView={block:!1};var c=function(e){var t=s.getAreaCoords(),i={x:s.getArea().getImage().width/s.getArea().getCanvasSize().w,y:s.getArea().getImage().height/s.getArea().getCanvasSize().h};e.cropject={canvasSize:s.getArea().getCanvasSize(),areaCoords:t,cropWidth:t.w,cropHeight:t.h,cropTop:t.y,cropLeft:t.x,cropImageWidth:Math.round(t.w*i.x),cropImageHeight:Math.round(t.h*i.y),cropImageTop:Math.round(t.y*i.y),cropImageLeft:Math.round(t.x*i.x)}},u=function(t){return function(){e(function(){i.$apply(function(e){t(e)})})}};i.chargement||(i.chargement=function(){switch(window.navigator.userLanguage||window.navigator.language){case"nl":case"nl_NL":return"Aan het laden";case"fr":case"fr-FR":return"Chargement";case"es":case"es-ES":return"Cargando";case"ca":case"ca-ES":return"Càrrega";case"de":case"de-DE":return"Laden";default:return"Loading"}}());var g=function(){r.append('<div class="loading"><span>'+i.chargement+"...</span></div>")};a.on("load-start",u(function(e){e.onLoadBegin({})})).on("load-done",u(function(e){var t=r.children();angular.forEach(t,function(e){angular.element(e).hasClass("loading")&&angular.element(e).remove()}),c(e),e.onLoadDone({})})).on("load-error",u(function(e){e.onLoadError({})})).on("area-move area-resize",u(function(e){"true"===e.changeOnFly&&h(e),c(e)})).on("image-updated",u(function(e){s.setAreaMinRelativeSize(e.areaMinRelativeSize)})).on("area-move-end area-resize-end image-updated",u(function(e){h(e),c(e)})),i.$watch("image",function(t){t&&g(),null!==i.timeout&&e.cancel(i.timeout),i.timeout=e(function(){i.timeout=null,s.setInitMax(i.initMaxArea),s.setNewImageSource(i.image)},100)}),i.$watch("areaType",function(){s.setAreaType(i.areaType),h(i)}),i.$watch("areaMinSize",function(){s.setAreaMinSize(i.areaMinSize),h(i)}),i.$watch("areaMinRelativeSize",function(){""!==i.image&&(s.setAreaMinRelativeSize(i.areaMinRelativeSize),h(i))}),i.$watch("areaInitSize",function(){s.setAreaInitSize(i.areaInitSize),h(i)}),i.$watch("areaInitCoords",function(){s.setAreaInitCoords(i.areaInitCoords),s.areaInitIsRelativeToImage=i.areaInitIsRelativeToImage,h(i)}),i.$watch("maxCanvasDimensions",function(){s.setMaxCanvasDimensions(i.maxCanvasDimensions)}),i.$watch("minCanvasDimensions",function(){s.setMinCanvasDimensions(i.minCanvasDimensions)}),i.$watch("resultImageFormat",function(){s.setResultImageFormat(i.resultImageFormat),h(i)}),i.$watch("resultImageQuality",function(){s.setResultImageQuality(i.resultImageQuality),h(i)}),i.$watch("resultImageSize",function(){s.setResultImageSize(i.resultImageSize),h(i)}),i.$watch("paletteColorLength",function(){s.setPaletteColorLength(i.paletteColorLength)}),i.$watch("aspectRatio",function(){"string"==typeof i.aspectRatio&&""!==i.aspectRatio&&(i.aspectRatio=parseInt(i.aspectRatio)),i.aspectRatio&&s.setAspect(i.aspectRatio)}),i.$watch("allowCropResizeOnCorners",function(){i.allowCropResizeOnCorners&&s.setAllowCropResizeOnCorners(i.allowCropResizeOnCorners)}),i.$watch(function(){return"fixed-height"===s.getScalemode()?[r[0].clientWidth,r[0].clientHeight]:"full-width"===s.getScalemode()?r[0].clientWidth:void 0},function(e){"fixed-height"===s.getScalemode()&&e[0]>0&&e[1]>0&&(s.setMaxDimensions(e[0],e[1]),h(i)),"full-width"===s.getScalemode()&&e>0&&s.setMaxDimensions(e)},!0),i.$on("$destroy",function(){s.destroy()})}}}])}(),function(e){"use strict";var t,i=e.Uint8Array,r=e.HTMLCanvasElement,a=r&&r.prototype,s=/\s*;\s*base64\s*(?:;|$)/i,n="toDataURL",o=function(e){for(var r,a,n=e.length,o=new i(n/4*3|0),h=0,c=0,u=[0,0],l=0,g=0;n--;)a=e.charCodeAt(h++),255!==(r=t[a-43])&&void 0!==r&&(u[1]=u[0],u[0]=a,g=g<<6|r,4===++l&&(o[c++]=g>>>16,61!==u[1]&&(o[c++]=g>>>8),61!==u[0]&&(o[c++]=g),l=0));return o};i&&(t=new i([62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,0,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51])),r&&!a.toBlob&&(a.toBlob=function(e,t){if(t||(t="image/png"),this.mozGetAsFile)return void e(this.mozGetAsFile("canvas",t));if(this.msToBlob&&/^\s*image\/png\s*(?:$|;)/i.test(t))return void e(this.msToBlob());var r,a=Array.prototype.slice.call(arguments,1),h=this[n].apply(this,a),c=h.indexOf(","),u=h.substring(c+1),l=s.test(h.substring(0,c));Blob.fake?(r=new Blob,r.encoding=l?"base64":"URI",r.data=u,r.size=u.length):i&&(r=l?new Blob([o(u)],{type:t}):new Blob([decodeURIComponent(u)],{type:t})),void 0!==e&&e(r)},a.toBlobHD=a.toDataURLHD?function(){n="toDataURLHD";var e=this.toBlob();return n="toDataURL",e}:a.toBlob)}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content||this),function(){var e=function(e){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),document.body.appendChild(this.canvas),this.width=this.canvas.width=e.width,this.height=this.canvas.height=e.height,this.context.drawImage(e,0,0,this.width,this.height)};e.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},e.prototype.update=function(e){this.context.putImageData(e,0,0)},e.prototype.getPixelCount=function(){return this.width*this.height},e.prototype.getImageData=function(){return this.context.getImageData(0,0,this.width,this.height)},e.prototype.removeCanvas=function(){this.canvas.parentNode.removeChild(this.canvas)};var t=function(){};if(t.prototype.getColor=function(e,t){return this.getPalette(e,5,t)[0]},t.prototype.getPalette=function(t,i,a){void 0===i&&(i=10),(void 0===a||1>a)&&(a=10);for(var s,n,o,h,u=new e(t),l=u.getImageData(),g=l.data,p=u.getPixelCount(),f=[],d=0;p>d;d+=a)s=4*d,n=g[s+0],o=g[s+1],h=g[s+2],g[s+3]>=125&&(n>250&&o>250&&h>250||f.push([n,o,h]));var v=r.quantize(f,i),m=v?v.palette():null;return u.removeCanvas(),m},!i)var i={map:function(e,t){var i={};return t?e.map(function(e,r){return i.index=r,t.call(i,e)}):e.slice()},naturalOrder:function(e,t){return t>e?-1:e>t?1:0},sum:function(e,t){var i={};return e.reduce(t?function(e,r,a){return i.index=a,e+t.call(i,r)}:function(e,t){return e+t},0)},max:function(e,t){return Math.max.apply(null,t?i.map(e,t):e)}};var r=function(){function e(e,t,i){return(e<<2*c)+(t<<c)+i}function t(e){function t(){i.sort(e),r=!0}var i=[],r=!1;return{push:function(e){i.push(e),r=!1},peek:function(e){return r||t(),void 0===e&&(e=i.length-1),i[e]},pop:function(){return r||t(),i.pop()},size:function(){return i.length},map:function(e){return i.map(e)},debug:function(){return r||t(),i}}}function r(e,t,i,r,a,s,n){var o=this;o.r1=e,o.r2=t,o.g1=i,o.g2=r,o.b1=a,o.b2=s,o.histo=n}function a(){this.vboxes=new t(function(e,t){return i.naturalOrder(e.vbox.count()*e.vbox.volume(),t.vbox.count()*t.vbox.volume())})}function s(t){var i,r,a,s,n=1<<3*c,o=new Array(n);return t.forEach(function(t){r=t[0]>>u,a=t[1]>>u,s=t[2]>>u,i=e(r,a,s),o[i]=(o[i]||0)+1}),o}function n(e,t){var i,a,s,n=1e6,o=0,h=1e6,c=0,l=1e6,g=0;return e.forEach(function(e){i=e[0]>>u,a=e[1]>>u,s=e[2]>>u,n>i?n=i:i>o&&(o=i),h>a?h=a:a>c&&(c=a),l>s?l=s:s>g&&(g=s)}),new r(n,o,h,c,l,g,t)}function o(t,r){function a(e){var t,i,a,s,n,o=e+"1",h=e+"2",u=0;for(c=r[o];c<=r[h];c++)if(d[c]>f/2){for(a=r.copy(),s=r.copy(),t=c-r[o],i=r[h]-c,n=i>=t?Math.min(r[h]-1,~~(c+i/2)):Math.max(r[o],~~(c-1-t/2));!d[n];)n++;for(u=v[n];!u&&d[n-1];)u=v[--n];return a[h]=n,s[o]=a[h]+1,[a,s]}}if(r.count()){var s=r.r2-r.r1+1,n=r.g2-r.g1+1,o=r.b2-r.b1+1,h=i.max([s,n,o]);if(1==r.count())return[r.copy()];var c,u,l,g,p,f=0,d=[],v=[];if(h==s)for(c=r.r1;c<=r.r2;c++){for(g=0,u=r.g1;u<=r.g2;u++)for(l=r.b1;l<=r.b2;l++)p=e(c,u,l),g+=t[p]||0;f+=g,d[c]=f}else if(h==n)for(c=r.g1;c<=r.g2;c++){for(g=0,u=r.r1;u<=r.r2;u++)for(l=r.b1;l<=r.b2;l++)p=e(u,c,l),g+=t[p]||0;f+=g,d[c]=f}else for(c=r.b1;c<=r.b2;c++){for(g=0,u=r.r1;u<=r.r2;u++)for(l=r.g1;l<=r.g2;l++)p=e(u,l,c),g+=t[p]||0;f+=g,d[c]=f}return d.forEach(function(e,t){v[t]=f-e}),a(h==s?"r":h==n?"g":"b")}}function h(e,r){function h(e,t){for(var i,r=1,a=0;l>a;)if(i=e.pop(),i.count()){var s=o(c,i),n=s[0],h=s[1];if(!n)return;if(e.push(n),h&&(e.push(h),r++),r>=t)return;if(a++>l)return}else e.push(i),a++}if(!e.length||2>r||r>256)return!1;var c=s(e),u=0;c.forEach(function(){u++});var p=n(e,c),f=new t(function(e,t){return i.naturalOrder(e.count(),t.count())});f.push(p),h(f,g*r);for(var d=new t(function(e,t){return i.naturalOrder(e.count()*e.volume(),t.count()*t.volume())});f.size();)d.push(f.pop());h(d,r-d.size());for(var v=new a;d.size();)v.push(d.pop());return v}var c=5,u=8-c,l=1e3,g=.75;return r.prototype={volume:function(e){var t=this;return(!t._volume||e)&&(t._volume=(t.r2-t.r1+1)*(t.g2-t.g1+1)*(t.b2-t.b1+1)),t._volume},count:function(t){var i=this,r=i.histo;if(!i._count_set||t){var a,s,n,o=0;for(a=i.r1;a<=i.r2;a++)for(s=i.g1;s<=i.g2;s++)for(n=i.b1;n<=i.b2;n++){var h=e(a,s,n);o+=r[h]||0}i._count=o,i._count_set=!0}return i._count},copy:function(){var e=this;return new r(e.r1,e.r2,e.g1,e.g2,e.b1,e.b2,e.histo)},avg:function(t){var i=this,r=i.histo;if(!i._avg||t){var a,s,n,o,h,u=0,l=1<<8-c,g=0,p=0,f=0;for(s=i.r1;s<=i.r2;s++)for(n=i.g1;n<=i.g2;n++)for(o=i.b1;o<=i.b2;o++)h=e(s,n,o),a=r[h]||0,u+=a,g+=a*(s+.5)*l,p+=a*(n+.5)*l,f+=a*(o+.5)*l;i._avg=u?[~~(g/u),~~(p/u),~~(f/u)]:[~~(l*(i.r1+i.r2+1)/2),~~(l*(i.g1+i.g2+1)/2),~~(l*(i.b1+i.b2+1)/2)]}return i._avg},contains:function(e){var t=this,i=e[0]>>u;return gval=e[1]>>u,bval=e[2]>>u,i>=t.r1&&i<=t.r2&&gval>=t.g1&&gval<=t.g2&&bval>=t.b1&&bval<=t.b2}},a.prototype={push:function(e){this.vboxes.push({vbox:e,color:e.avg()})},palette:function(){return this.vboxes.map(function(e){return e.color})},size:function(){return this.vboxes.size()},map:function(e){for(var t=this.vboxes,i=0;i<t.size();i++)if(t.peek(i).vbox.contains(e))return t.peek(i).color;return this.nearest(e)},nearest:function(e){for(var t,i,r,a=this.vboxes,s=0;s<a.size();s++)i=Math.sqrt(Math.pow(e[0]-a.peek(s).color[0],2)+Math.pow(e[1]-a.peek(s).color[1],2)+Math.pow(e[2]-a.peek(s).color[2],2)),(t>i||void 0===t)&&(t=i,r=a.peek(s).color);return r},forcebw:function(){var e=this.vboxes;e.sort(function(e,t){return i.naturalOrder(i.sum(e.color),i.sum(t.color))});var t=e[0].color;t[0]<5&&t[1]<5&&t[2]<5&&(e[0].color=[0,0,0]);var r=e.length-1,a=e[r].color;a[0]>251&&a[1]>251&&a[2]>251&&(e[r].color=[255,255,255])}},{quantize:h}}();"function"==typeof define&&define.amd?define([],function(){return t}):"object"==typeof exports?module.exports=t:this.ColorThief=t}.call(this),function(){function e(e){var t=e.naturalWidth;if(t*e.naturalHeight>1048576){var r=document.createElement("canvas");r.width=r.height=1;var a=r.getContext("2d");return a.drawImage(e,1-t,0),0===a.getImageData(0,0,1,1).data[3]}return!1}function t(e,t,i){var r=document.createElement("canvas");r.width=1,r.height=i;var a=r.getContext("2d");a.drawImage(e,0,0);for(var s=a.getImageData(0,0,1,i).data,n=0,o=i,h=i;h>n;){0===s[4*(h-1)+3]?o=h:n=h,h=o+n>>1}var u=h/i;return 0===u?1:u}function i(e,t,i){var a=document.createElement("canvas");return r(e,a,t,i),a.toDataURL("image/jpeg",t.quality||.8)}function r(i,r,s,n){var o=i.naturalWidth,h=i.naturalHeight;if(o+h!==!1){var c=s.width,u=s.height,l=r.getContext("2d");l.save(),a(r,l,c,u,s.orientation);e(i)&&(o/=2,h/=2);var p=1024,f=document.createElement("canvas");f.width=f.height=p;for(var d=f.getContext("2d"),v=n?t(i,o,h):1,m=Math.ceil(p*c/o),w=Math.ceil(p*u/h/v),_=0,y=0;h>_;){for(var z=0,S=0;o>z;)d.clearRect(0,0,p,p),d.drawImage(i,-z,-_),l.drawImage(f,0,0,p,p,S,y,m,w),z+=p,S+=m;_+=p,y+=w}l.restore(),f=d=null}}function a(e,t,i,r,a){switch(a){case 5:case 6:case 7:case 8:e.width=r,e.height=i;break;default:e.width=i,e.height=r}switch(a){case 2:t.translate(i,0),t.scale(-1,1);break;case 3:t.translate(i,r),t.rotate(Math.PI);break;case 4:t.translate(0,r),t.scale(1,-1);break;case 5:t.rotate(.5*Math.PI),t.scale(1,-1);break;case 6:t.rotate(.5*Math.PI),t.translate(0,-r);break;case 7:t.rotate(.5*Math.PI),t.translate(i,-r),t.scale(-1,1);break;case 8:t.rotate(-.5*Math.PI),t.translate(-i,0)}}function s(e){if(window.Blob&&e instanceof Blob){if(!n)throw Error("No createObjectURL function found to create blob url");var t=new Image;t.src=n.createObjectURL(e),this.blob=e,e=t}if(!e.naturalWidth&&!e.naturalHeight){var i=this;e.onload=e.onerror=function(){var e=i.imageLoadListeners;if(e){i.imageLoadListeners=null;for(var t=0,r=e.length;r>t;t++)e[t]()}},this.imageLoadListeners=[]}this.srcImage=e}var n=window.URL&&window.URL.createObjectURL?window.URL:window.webkitURL&&window.webkitURL.createObjectURL?window.webkitURL:null;s.prototype.render=function(e,t,a){if(this.imageLoadListeners){var s=this;return void this.imageLoadListeners.push(function(){s.render(e,t,a)})}t=t||{};var o=this.srcImage.naturalWidth,h=this.srcImage.naturalHeight,c=t.width,u=t.height,l=t.maxWidth,g=t.maxHeight,p=!this.blob||"image/jpeg"===this.blob.type;c&&!u?u=h*c/o<<0:u&&!c?c=o*u/h<<0:(c=o,u=h),l&&c>l&&(c=l,u=h*c/o<<0),g&&u>g&&(u=g,c=o*u/h<<0);var f={width:c,height:u};for(var d in t)f[d]=t[d];var v=e.tagName.toLowerCase();"img"===v?e.src=i(this.srcImage,f,p):"canvas"===v&&r(this.srcImage,e,f,p),"function"==typeof this.onrender&&this.onrender(e),a&&a(),this.blob&&(this.blob=null,n.revokeObjectURL(this.srcImage.src))},"function"==typeof define&&define.amd?define([],function(){return s}):"object"==typeof exports?module.exports=s:this.MegaPixImage=s}.call(this),function(angular){function throttle(func,wait){var timeout,context,args,result,previous=0,later=function(){previous=+new Date,timeout=null,result=func.apply(context,args),timeout||(context=args=null)},throttled=function(){var now=+new Date,remaining=wait-(now-previous);return context=this,args=arguments,remaining<=0||remaining>wait?(timeout&&(clearTimeout(timeout),timeout=null),previous=now,result=func.apply(context,args),timeout||(context=args=null)):timeout||(timeout=setTimeout(later,remaining)),result};return throttled.cancel=function(){clearTimeout(timeout),previous=0,timeout=context=args=null},throttled}var undefined;angular.module("ui.materialize",["ui.materialize.ngModel","ui.materialize.collapsible","ui.materialize.toast","ui.materialize.sidenav","ui.materialize.material_select","ui.materialize.dropdown","ui.materialize.inputfield","ui.materialize.input_date","ui.materialize.tabs","ui.materialize.pagination","ui.materialize.pushpin","ui.materialize.scrollspy","ui.materialize.parallax","ui.materialize.modal","ui.materialize.tooltipped","ui.materialize.slider","ui.materialize.materialboxed","ui.materialize.scrollFire","ui.materialize.nouislider","ui.materialize.input_clock","ui.materialize.carousel"]),angular.module("ui.materialize.scrollFire",[]).directive("scrollFire",["$compile","$timeout",function($compile,$timeout){return{restrict:"A",scope:{offset:"@",scrollFire:"&"},link:function(scope,element,attrs){function stop(){$(window).off("scroll resize blur focus",handler)}var offset=scope.offset;angular.isDefined(scope.offset)||(offset=0),offset=Number(offset)||0;var fired=!1,handler=throttle(function(){if(!fired){window.pageYOffset+window.innerHeight>element[0].getBoundingClientRect().top+window.pageYOffset+offset&&(fired=!0,scope.scrollFire({}),stop())}},100);$(window).on("scroll resize blur focus",handler),handler(),scope.$on("$destroy",stop)}}}]),angular.module("ui.materialize.ngModel",[]).directive("ngModel",["$timeout",function($timeout){return{restrict:"A",priority:-1,
link:function(scope,element,attr){scope.$watch(attr.ngModel,function(value,oldValue){$timeout(function(){value instanceof Array&&oldValue instanceof Array&&value.length==oldValue.length||element.is("select")||(value?element.trigger("change"):element.attr("placeholder")===undefined&&(element.is(":focus")||element.trigger("blur")))})})}}}]),angular.module("ui.materialize.slider",[]).directive("slider",["$timeout",function($timeout){return{restrict:"A",scope:{height:"=",transition:"=",interval:"=",indicators:"="},link:function(scope,element,attrs){element.addClass("slider"),$timeout(function(){element.slider({height:angular.isDefined(scope.height)?scope.height:400,transition:angular.isDefined(scope.transition)?scope.transition:500,interval:angular.isDefined(scope.interval)?scope.interval:6e3,indicators:!angular.isDefined(scope.indicators)||scope.indicators})})}}}]),angular.module("ui.materialize.carousel",[]).directive("carousel",["$timeout",function($timeout){return{restrict:"A",scope:{timeConstant:"@",dist:"@",shift:"@",padding:"@",fullWidth:"@",indicators:"@",noWrap:"@"},link:function(scope,element,attrs){element.addClass("carousel"),$timeout(function(){element.carousel({time_constant:angular.isDefined(scope.timeConstant)?scope.timeConstant:200,dist:angular.isDefined(scope.dist)?scope.dist:-100,shift:angular.isDefined(scope.shift)?scope.shift:0,padding:angular.isDefined(scope.padding)?scope.padding:0,full_width:!!angular.isDefined(scope.fullWidth)&&scope.fullWidth,indicators:!!angular.isDefined(scope.indicators)&&scope.indicators,no_wrap:!!angular.isDefined(scope.noWrap)&&scope.noWrap})})}}}]),angular.module("ui.materialize.collapsible",[]).directive("collapsible",["$timeout",function($timeout){return{link:function(scope,element,attrs){$timeout(function(){element.collapsible()}),"watch"in attrs&&scope.$watch(function(){return element[0].innerHTML},function(oldVal,newVal){oldVal!==newVal&&$timeout(function(){element.collapsible()})})}}}]),angular.module("ui.materialize.parallax",[]).directive("parallax",["$timeout",function($timeout){return{link:function(scope,element,attrs){$timeout(function(){element.parallax()})}}}]),angular.module("ui.materialize.toast",[]).constant("toastConfig",{duration:3e3}).directive("toast",["toastConfig",function(toastConfig){return{scope:{message:"@",duration:"@",callback:"&"},link:function(scope,element,attrs){element.bind(attrs.toast,function(){var message=angular.isDefined(scope.message)?scope.message:"",toastclass=angular.isDefined(attrs.toastclass)?attrs.toastclass:"";Materialize.toast(message,scope.duration?scope.duration:toastConfig.duration,toastclass,scope.callback)})}}}]),angular.module("ui.materialize.pushpin",[]).directive("pushpin",[function(){return{restrict:"AE",require:["?pushpinTop","?pushpinOffset","?pushpinBottom"],link:function(scope,element,attrs){var top=attrs.pushpinTop||0,offset=attrs.pushpinOffset||0,bottom=attrs.pushpinBottom||1/0;setTimeout(function(){element.pushpin({top:top,offset:offset,bottom:bottom})},0)}}}]),angular.module("ui.materialize.scrollspy",[]).directive("scrollspy",["$timeout",function($timeout){return{restrict:"A",link:function(scope,element,attrs){element.addClass("scrollspy"),$timeout(function(){element.scrollSpy()})}}}]),angular.module("ui.materialize.tabs",[]).directive("tabs",["$timeout",function($timeout){return{scope:{reload:"="},link:function(scope,element,attrs){element.addClass("tabs"),$timeout(function(){element.tabs()}),scope.$watch("reload",function(newValue){!0===newValue&&(element.tabs(),scope.reload=!1)})}}}]),angular.module("ui.materialize.sidenav",[]).directive("sidenav",[function(){return{scope:{menuwidth:"@",closeonclick:"@"},link:function(scope,element,attrs){element.sideNav({menuWidth:angular.isDefined(scope.menuwidth)?parseInt(scope.menuwidth,10):undefined,edge:attrs.sidenav?attrs.sidenav:"left",closeOnClick:angular.isDefined(scope.closeonclick)?"true"==scope.closeonclick:undefined})}}}]),angular.module("ui.materialize.material_select",[]).directive("materialSelect",["$compile","$timeout",function($compile,$timeout){return{link:function(scope,element,attrs){function initSelect(newVal,oldVal){function fixActive(){if(!attrs.multiple){var value=element.val();element.siblings("ul").find("li").each(function(){var that=$(this);that.text()===value&&that.addClass("active")})}}if(attrs.multiple){if(oldVal!==undefined&&newVal!==undefined&&oldVal.length===newVal.length)return;var activeUl=element.siblings("ul.active");if(newVal!==undefined&&activeUl.length){if(activeUl.children("li.active").length==newVal.length)return}}element.siblings(".caret").remove(),scope.$evalAsync(function(){element.material_select(function(){attrs.multiple||element.siblings("input.select-dropdown").trigger("close"),fixActive()});var onMouseDown=function(e){(e.clientX>=e.target.clientWidth||e.clientY>=e.target.clientHeight)&&e.preventDefault()};element.siblings("input.select-dropdown").off("mousedown.material_select_fix").on("mousedown.material_select_fix",onMouseDown),fixActive(),element.siblings("input.select-dropdown").off("click.material_select_fix").on("click.material_select_fix",function(){$("input.select-dropdown").not(element.siblings("input.select-dropdown")).trigger("close")})})}if(element.is("select")){if($timeout(initSelect),attrs.ngModel)if(attrs.ngModel&&!angular.isDefined(scope.$eval(attrs.ngModel))){var hasChangedFromUndefined=!1;scope.$watch(attrs.ngModel,function(newVal,oldVal){!hasChangedFromUndefined&&angular.isDefined(scope.$eval(attrs.ngModel))?(hasChangedFromUndefined=!0,initSelect()):initSelect(newVal,oldVal)})}else scope.$watch(attrs.ngModel,initSelect);"watch"in attrs&&scope.$watch(function(){return element[0].innerHTML},function(newValue,oldValue){newValue!==oldValue&&$timeout(initSelect)}),attrs.ngDisabled&&scope.$watch(attrs.ngDisabled,initSelect)}}}}]),angular.module("ui.materialize.dropdown",[]).directive("dropdown",["$timeout",function($timeout){return{scope:{inDuration:"@",outDuration:"@",constrainWidth:"@",hover:"@",alignment:"@",gutter:"@",belowOrigin:"@"},link:function(scope,element,attrs){$timeout(function(){element.dropdown({inDuration:angular.isDefined(scope.inDuration)?scope.inDuration:undefined,outDuration:angular.isDefined(scope.outDuration)?scope.outDuration:undefined,constrain_width:angular.isDefined(scope.constrainWidth)?scope.constrainWidth:undefined,hover:angular.isDefined(scope.hover)?scope.hover:undefined,alignment:angular.isDefined(scope.alignment)?scope.alignment:undefined,gutter:angular.isDefined(scope.gutter)?scope.gutter:undefined,belowOrigin:angular.isDefined(scope.belowOrigin)?scope.belowOrigin:undefined})})}}}]),angular.module("ui.materialize.inputfield",[]).directive("inputField",["$timeout",function($timeout){var inputLabelIdCounter=0;return{transclude:!0,scope:{},link:function(scope,element){$timeout(function(){var input=element.find("> > input, > > textarea"),label=element.find("> > label");if(1==input.length&&1==label.length&&!input.attr("id")&&!label.attr("for")){var id="angularMaterializeID"+inputLabelIdCounter++;input.attr("id",id),label.attr("for",id)}Materialize.updateTextFields(),element.find("> > .materialize-textarea").each(function(){var that=$(this);that.addClass("materialize-textarea"),that.trigger("autoresize");var model=that.attr("ng-model");model&&scope.$parent.$watch(model,function(a,b){a!==b&&$timeout(function(){that.trigger("autoresize")})})}),element.find("> > .materialize-textarea, > > input").each(function(index,countable){countable=angular.element(countable),countable.siblings('span[class="character-counter"]').length||countable.characterCounter()})})},template:'<div ng-transclude class="input-field"></div>'}}]),angular.module("ui.materialize.input_date",[]).directive("inputDate",["$compile","$timeout",function($compile,$timeout){var style=$("<style>#inputCreated_root {outline: none;}</style>");$("html > head").append(style);var dateFormat=function(){var pad=function(val,len){for(val=String(val),len=len||2;val.length<len;)val="0"+val;return val};return function(date,mask,utc){var dF=dateFormat;if(1!==arguments.length||"[object String]"!=Object.prototype.toString.call(date)||/\d/.test(date)||(mask=date,date=undefined),date=date?new Date(date):new Date,isNaN(date))throw SyntaxError("invalid date");mask=String(dF.masks[mask]||mask||dF.masks.default),"UTC:"==mask.slice(0,4)&&(mask=mask.slice(4),utc=!0);var _=utc?"getUTC":"get",d=date[_+"Date"](),D=date[_+"Day"](),m=date[_+"Month"](),y=date[_+"FullYear"](),H=date[_+"Hours"](),M=date[_+"Minutes"](),s=date[_+"Seconds"](),L=date[_+"Milliseconds"](),o=utc?0:date.getTimezoneOffset(),flags={d:d,dd:pad(d),ddd:dF.i18n.dayNames[D],dddd:dF.i18n.dayNames[D+7],m:m+1,mm:pad(m+1),mmm:dF.i18n.monthNames[m],mmmm:dF.i18n.monthNames[m+12],yy:String(y).slice(2),yyyy:y,h:H%12||12,hh:pad(H%12||12),H:H,HH:pad(H),M:M,MM:pad(M),s:s,ss:pad(s),l:pad(L,3),L:pad(L>99?Math.round(L/10):L),t:H<12?"a":"p",tt:H<12?"am":"pm",T:H<12?"A":"P",TT:H<12?"AM":"PM",Z:utc?"UTC":(String(date).match(/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g)||[""]).pop().replace(/[^-+\dA-Z]/g,""),o:(o>0?"-":"+")+pad(100*Math.floor(Math.abs(o)/60)+Math.abs(o)%60,4),S:["th","st","nd","rd"][d%10>3?0:(d%100-d%10!=10)*d%10]};return mask.replace(/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,function($0){return $0 in flags?flags[$0]:$0.slice(1,$0.length-1)})}}();dateFormat.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"},dateFormat.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},Date.prototype.format=function(mask,utc){return dateFormat(this,mask,utc)};var isValidDate=function(date){return"[object Date]"===Object.prototype.toString.call(date)&&!isNaN(date.getTime())};return{require:"ngModel",scope:{container:"@",format:"@",formatSubmit:"@",monthsFull:"@",monthsShort:"@",weekdaysFull:"@",weekdaysShort:"@",weekdaysLetter:"@",firstDay:"=",disable:"=",today:"=",clear:"=",close:"=",selectYears:"=",selectMonths:"=",onStart:"&",onRender:"&",onOpen:"&",onClose:"&",onSet:"&",onStop:"&",ngReadonly:"=?",max:"@",min:"@"},link:function(scope,element,attrs,ngModelCtrl){ngModelCtrl.$formatters.unshift(function(modelValue){if(modelValue){var date=new Date(modelValue);return angular.isDefined(scope.format)?date.format(scope.format):date.format("d mmmm, yyyy")}return null});var monthsFull=angular.isDefined(scope.monthsFull)?scope.$eval(scope.monthsFull):undefined,monthsShort=angular.isDefined(scope.monthsShort)?scope.$eval(scope.monthsShort):undefined,weekdaysFull=angular.isDefined(scope.weekdaysFull)?scope.$eval(scope.weekdaysFull):undefined,weekdaysShort=angular.isDefined(scope.weekdaysShort)?scope.$eval(scope.weekdaysShort):undefined,weekdaysLetter=angular.isDefined(scope.weekdaysLetter)?scope.$eval(scope.weekdaysLetter):undefined;$compile(element.contents())(scope),scope.ngReadonly||$timeout(function(){var options={container:scope.container,format:angular.isDefined(scope.format)?scope.format:undefined,formatSubmit:angular.isDefined(scope.formatSubmit)?scope.formatSubmit:undefined,monthsFull:angular.isDefined(monthsFull)?monthsFull:undefined,monthsShort:angular.isDefined(monthsShort)?monthsShort:undefined,weekdaysFull:angular.isDefined(weekdaysFull)?weekdaysFull:undefined,weekdaysShort:angular.isDefined(weekdaysShort)?weekdaysShort:undefined,weekdaysLetter:angular.isDefined(weekdaysLetter)?weekdaysLetter:undefined,firstDay:angular.isDefined(scope.firstDay)?scope.firstDay:0,disable:angular.isDefined(scope.disable)?scope.disable:undefined,today:angular.isDefined(scope.today)?scope.today:undefined,clear:angular.isDefined(scope.clear)?scope.clear:undefined,close:angular.isDefined(scope.close)?scope.close:undefined,selectYears:angular.isDefined(scope.selectYears)?scope.selectYears:undefined,selectMonths:angular.isDefined(scope.selectMonths)?scope.selectMonths:undefined,onStart:angular.isDefined(scope.onStart)?function(){scope.onStart()}:undefined,onRender:angular.isDefined(scope.onRender)?function(){scope.onRender()}:undefined,onOpen:angular.isDefined(scope.onOpen)?function(){scope.onOpen()}:undefined,onClose:angular.isDefined(scope.onClose)?function(){scope.onClose()}:undefined,onSet:angular.isDefined(scope.onSet)?function(){scope.onSet()}:undefined,onStop:angular.isDefined(scope.onStop)?function(){scope.onStop()}:undefined};scope.container||delete options.container;var pickadateInput=element.pickadate(options),picker=pickadateInput.pickadate("picker");scope.$watch("max",function(newMax){if(picker){var maxDate=new Date(newMax);picker.set({max:!!isValidDate(maxDate)&&maxDate})}}),scope.$watch("min",function(newMin){if(picker){var minDate=new Date(newMin);picker.set({min:!!isValidDate(minDate)&&minDate})}}),scope.$watch("disable",function(newDisabled){if(picker){var disabledDates=!(!angular.isDefined(newDisabled)||!angular.isArray(newDisabled))&&newDisabled;picker.set({disable:disabledDates})}})})}}}]),angular.module("ui.materialize.input_clock",[]).directive("inputClock",[function(){return{restrict:"A",scope:{default:"@",fromnow:"=?",donetext:"@",autoclose:"=?",ampmclickable:"=?",darktheme:"=?",twelvehour:"=?",vibrate:"=?"},link:function(scope,element){$(element).addClass("timepicker"),scope.ngReadonly||element.pickatime({default:angular.isDefined(scope.default)?scope.default:"",fromnow:angular.isDefined(scope.fromnow)?scope.fromnow:0,donetext:angular.isDefined(scope.donetext)?scope.donetext:"Done",autoclose:!!angular.isDefined(scope.autoclose)&&scope.autoclose,ampmclickable:!!angular.isDefined(scope.ampmclickable)&&scope.ampmclickable,darktheme:!!angular.isDefined(scope.darktheme)&&scope.darktheme,twelvehour:!angular.isDefined(scope.twelvehour)||scope.twelvehour,vibrate:!angular.isDefined(scope.vibrate)||scope.vibrate})}}}]),angular.module("ui.materialize.pagination",[]).directive("pagination",["$sce",function($sce){function setScopeValues(scope,attrs){scope.List=[],scope.Hide=!1,scope.page=parseInt(scope.page)||1,scope.total=parseInt(scope.total)||0,scope.dots=scope.dots||"...",scope.ulClass=scope.ulClass||attrs.ulClass||"pagination",scope.adjacent=parseInt(scope.adjacent)||2,scope.activeClass="active",scope.disabledClass="disabled",scope.scrollTop=scope.$eval(attrs.scrollTop),scope.hideIfEmpty=scope.$eval(attrs.hideIfEmpty),scope.showPrevNext=scope.$eval(attrs.showPrevNext),scope.useSimplePrevNext=scope.$eval(attrs.useSimplePrevNext)}function validateScopeValues(scope,pageCount){scope.page>pageCount&&(scope.page=pageCount),scope.page<=0&&(scope.page=1),scope.adjacent<=0&&(scope.adjacent=2),pageCount<=1&&(scope.Hide=scope.hideIfEmpty)}function internalAction(scope,page){page=page.valueOf(),scope.page!=page&&(scope.page=page,scope.paginationAction({page:page}),scope.scrollTop&&scrollTo(0,0))}function addRange(start,finish,scope){var i=0;for(i=start;i<=finish;i++){var item={value:$sce.trustAsHtml(i.toString()),liClass:scope.page==i?scope.activeClass:"waves-effect",action:function(){internalAction(scope,this.value)}};scope.List.push(item)}}function addDots(scope){scope.List.push({value:$sce.trustAsHtml(scope.dots)})}function addFirst(scope,next){addRange(1,2,scope),3!=next&&addDots(scope)}function addPrevNext(scope,pageCount,mode){if(scope.showPrevNext&&!(pageCount<1)){var disabled,alpha,beta;if("prev"===mode){disabled=scope.page-1<=0;var prevPage=scope.page-1<=0?1:scope.page-1;scope.useSimplePrevNext?(alpha={value:"<<",title:"First Page",page:1},beta={value:"<",title:"Previous Page",page:prevPage}):(alpha={value:'<i class="material-icons">first_page</i>',title:"First Page",page:1},beta={value:'<i class="material-icons">chevron_left</i>',title:"Previous Page",page:prevPage})}else{disabled=scope.page+1>pageCount;var nextPage=scope.page+1>=pageCount?pageCount:scope.page+1;scope.useSimplePrevNext?(alpha={value:">",title:"Next Page",page:nextPage},beta={value:">>",title:"Last Page",page:pageCount}):(alpha={value:'<i class="material-icons">chevron_right</i>',title:"Next Page",page:nextPage},beta={value:'<i class="material-icons">last_page</i>',title:"Last Page",page:pageCount})}var addItem=function(item,disabled){scope.List.push({value:$sce.trustAsHtml(item.value),title:item.title,liClass:disabled?scope.disabledClass:"",action:function(){disabled||internalAction(scope,item.page)}})};addItem(alpha,disabled),addItem(beta,disabled)}}function addLast(pageCount,scope,prev){prev!=pageCount-2&&addDots(scope),addRange(pageCount-1,pageCount,scope)}function build(scope,attrs){if(scope.pageSize&&!(scope.pageSize<0)){setScopeValues(scope,attrs);var start,size=2*scope.adjacent,pageCount=Math.ceil(scope.total/scope.pageSize);if(validateScopeValues(scope,pageCount),addPrevNext(scope,pageCount,"prev"),pageCount<5+size)start=1,addRange(start,pageCount,scope);else{var finish;scope.page<=1+size?(start=1,finish=2+size+(scope.adjacent-1),addRange(start,finish,scope),addLast(pageCount,scope,finish)):pageCount-size>scope.page&&scope.page>size?(start=scope.page-scope.adjacent,finish=scope.page+scope.adjacent,addFirst(scope,start),addRange(start,finish,scope),addLast(pageCount,scope,finish)):(start=pageCount-(1+size+(scope.adjacent-1)),finish=pageCount,addFirst(scope,start),addRange(start,finish,scope))}addPrevNext(scope,pageCount,"next")}}return{restrict:"EA",scope:{page:"=",pageSize:"=",total:"=",dots:"@",hideIfEmpty:"@",adjacent:"@",scrollTop:"@",showPrevNext:"@",useSimplePrevNext:"@",paginationAction:"&",ulClass:"=?"},template:'<ul ng-hide="Hide" ng-class="ulClass"> <li ng-class="Item.liClass" ng-click="Item.action()" ng-repeat="Item in List"> <a href> <span ng-bind-html="Item.value"></span> </a></ul>',link:function(scope,element,attrs){scope.$watchCollection("[page, total, pageSize]",function(){build(scope,attrs)})}}}]),angular.module("ui.materialize.modal",[]).directive("modal",["$compile","$timeout",function($compile,$timeout){return{scope:{dismissible:"=",opacity:"@",inDuration:"@",outDuration:"@",ready:"&?",complete:"&?",open:"=?",enableTabs:"@?"},link:function(scope,element,attrs){$timeout(function(){var modalEl=$(attrs.href?attrs.href:"#"+attrs.target);$compile(element.contents())(scope);var complete=function(){angular.isFunction(scope.complete)&&scope.$apply(scope.complete),scope.open=!1,scope.$apply()},ready=function(){angular.isFunction(scope.ready)&&scope.$apply(scope.ready),scope.open=!0,scope.$apply(),scope.enableTabs&&modalEl.find("ul.tabs").tabs()},options={dismissible:angular.isDefined(scope.dismissible)?scope.dismissible:undefined,opacity:angular.isDefined(scope.opacity)?scope.opacity:undefined,in_duration:angular.isDefined(scope.inDuration)?scope.inDuration:undefined,out_duration:angular.isDefined(scope.outDuration)?scope.outDuration:undefined,ready:ready,complete:complete};modalEl.modal(options),element.modal(options),angular.isDefined(attrs.open)&&modalEl.length>0&&scope.$watch("open",function(value,lastValue){angular.isDefined(value)&&(!0===value?modalEl.modal("open"):modalEl.modal("close"))})})}}}]),angular.module("ui.materialize.tooltipped",[]).directive("tooltipped",["$compile","$timeout",function($compile,$timeout){return{restrict:"A",link:function(scope,element,attrs){function init(){element.addClass("tooltipped"),$compile(element.contents())(scope),$timeout(function(){element.attr("data-tooltip-id")&&element.tooltip("remove"),element.tooltip()}),rmDestroyListener=scope.$on("$destroy",function(){element.tooltip("remove")})}var rmDestroyListener=Function.prototype;attrs.$observe("tooltipped",function(value){"false"===value&&rmDestroyListener!==Function.prototype?(element.tooltip("remove"),rmDestroyListener(),rmDestroyListener=Function.prototype):"false"!==value&&rmDestroyListener===Function.prototype&&init()}),"false"!==attrs.tooltipped&&init(),element.on("$destroy",function(){element.tooltip("remove")})}}}]),angular.module("ui.materialize.materialboxed",[]).directive("materialboxed",["$timeout",function($timeout){return{restrict:"A",link:function(scope,element,attrs){$timeout(function(){element.materialbox()})}}}]),angular.module("ui.materialize.nouislider",[]).directive("nouislider",["$timeout",function($timeout){return{restrict:"A",scope:{ngModel:"=",min:"@",max:"@",step:"@?",connect:"@?",tooltips:"@?",behaviour:"@?"},link:function(scope,element,attrs){function createNoUiSlider(){angular.isArray(scope.ngModel)&&(modelIsArray=!0),noUiSlider.create(element[0],{start:scope.ngModel||0,step:parseFloat(scope.step||1),tooltips:angular.isDefined(scope.tooltips)?scope.tooltips:undefined,connect:angular.isDefined(scope.connect)?scope.connect:[!1,!1],behaviour:angular.isDefined(scope.behaviour)?scope.behaviour:undefined,range:{min:parseFloat(scope.min||0),max:parseFloat(scope.max||100)},format:{to:function(number){return Math.round(100*number)/100},from:function(number){return Number(number)}}})}var modelIsArray=!1,watchNgModel=scope.$watch("ngModel",function(newValue){newValue!==undefined&&(createNoUiSlider(),watchNgModel())});element[0].noUiSlider.on("update",function(values,input){$timeout(function(){scope.ngModel=modelIsArray?values:values[0]})})}}}])}(angular),angular.module("barcode",[]).directive("barcode",["BarcodeService","Code39Service","Code128BService","Code128CService","EanService","Itf14NumberService","ItfNumberService","UpcService",function(a,b,c,d,e,f,g,h){function i(i,j,k){var l={width:2,height:100,quite:10,displayValue:!1,font:"monospace",textAlign:"center",fontSize:12,backgroundColor:"",lineColor:"#000"},m=[];m=a.merge(l,i.options);var n=j.find("canvas")[0];if("img"==k.render&&(n=document.createElement("canvas")),!n.getContext)return null;var o="";switch(k.type){case"upc":o=h;break;case"ean":o=e;break;case"code39":o=b;break;case"code128b":o=c;break;case"code128c":o=d;break;case"itf":o=g;break;case"itf14":o=f}if(""!==o){var p=o.encoded(k.string);if(!angular.isUndefined(p)){var r=n.getContext("2d");n.width=p.length*m.width+2*m.quite,n.height=m.height+(m.displayValue?1.3*m.fontSize:0),r.clearRect(0,0,n.width,n.height),m.backgroundColor&&(r.fillStyle=m.backgroundColor,r.fillRect(0,0,n.width,n.height)),r.fillStyle=m.lineColor;for(var s=0;s<p.length;s++){var t=s*m.width+m.quite;"1"==p[s]&&r.fillRect(t,0,m.width,m.height)}if(m.displayValue&&function(a){var b,c;c=m.height,r.font=m.fontSize+"px "+m.font,r.textBaseline="bottom",r.textBaseline="top","left"==m.textAlign?(b=m.quite,r.textAlign="left"):"right"==m.textAlign?(b=n.width-m.quite,r.textAlign="right"):(b=n.width/2,r.textAlign="center"),r.fillText(a,b,c)}(k.string),"img"==k.render){var u=n.toDataURL("image/png");j.find("img")[0].setAttribute("src",u)}}}}function j(a,b,c){c.$observe("string",function(){i(a,b,c)})}function k(a,b){var c="<canvas>";return"img"==b.render&&(c="<img>"),a.append(c),{post:j}}return{restrict:"E",scope:{options:"=options"},compile:k}}]),angular.module("barcode").factory("BarcodeService",[function(){"use strict";var a={};return a.merge=function(a,b){var c={};for(var d in a)c[d]=a[d];for(var e in b)c[e]=b[e];return c},a}]),angular.module("barcode").factory("Code128Service",[function(){"use strict";var a={},b=[[" ","11011001100",0],["!","11001101100",1],['"',"11001100110",2],["#","10010011000",3],["$","10010001100",4],["%","10001001100",5],["&","10011001000",6],["'","10011000100",7],["(","10001100100",8],[")","11001001000",9],["*","11001000100",10],["+","11000100100",11],[",","10110011100",12],["-","10011011100",13],[".","10011001110",14],["/","10111001100",15],["0","10011101100",16],["1","10011100110",17],["2","11001110010",18],["3","11001011100",19],["4","11001001110",20],["5","11011100100",21],["6","11001110100",22],["7","11101101110",23],["8","11101001100",24],["9","11100101100",25],[":","11100100110",26],[";","11101100100",27],["<","11100110100",28],["=","11100110010",29],[">","11011011000",30],["?","11011000110",31],["@","11000110110",32],["A","10100011000",33],["B","10001011000",34],["C","10001000110",35],["D","10110001000",36],["E","10001101000",37],["F","10001100010",38],["G","11010001000",39],["H","11000101000",40],["I","11000100010",41],["J","10110111000",42],["K","10110001110",43],["L","10001101110",44],["M","10111011000",45],["N","10111000110",46],["O","10001110110",47],["P","11101110110",48],["Q","11010001110",49],["R","11000101110",50],["S","11011101000",51],["T","11011100010",52],["U","11011101110",53],["V","11101011000",54],["W","11101000110",55],["X","11100010110",56],["Y","11101101000",57],["Z","11101100010",58],["[","11100011010",59],["\\","11101111010",60],["]","11001000010",61],["^","11110001010",62],["_","10100110000",63],["`","10100001100",64],["a","10010110000",65],["b","10010000110",66],["c","10000101100",67],["d","10000100110",68],["e","10110010000",69],["f","10110000100",70],["g","10011010000",71],["h","10011000010",72],["i","10000110100",73],["j","10000110010",74],["k","11000010010",75],["l","11001010000",76],["m","11110111010",77],["n","11000010100",78],["o","10001111010",79],["p","10100111100",80],["q","10010111100",81],["r","10010011110",82],["s","10111100100",83],["t","10011110100",84],["u","10011110010",85],["v","11110100100",86],["w","11110010100",87],["x","11110010010",88],["y","11011011110",89],["z","11011110110",90],["{","11110110110",91],["|","10101111000",92],["}","10100011110",93],["~","10001011110",94],[String.fromCharCode(127),"10111101000",95],[String.fromCharCode(128),"10111100010",96],[String.fromCharCode(129),"11110101000",97],[String.fromCharCode(130),"11110100010",98],[String.fromCharCode(131),"10111011110",99],[String.fromCharCode(132),"10111101110",100],[String.fromCharCode(133),"11101011110",101],[String.fromCharCode(134),"11110101110",102],[String.fromCharCode(135),"11010000100",103],[String.fromCharCode(136),"11010010000",104],[String.fromCharCode(137),"11010011100",105]];return a.valid=function(a){return-1!=a.search(/^[!-~ ]+$/)},a.calculateCode128=function(b,d,e,f){var g="";return g+=a.encodingById(e),g+=d(b),g+=a.encodingById(f(b,e)),g+="1100011101011"},a.encodingById=function(a){for(var c=0;c<b.length;c++)if(b[c][2]==a)return b[c][1];return""},a.weightByCharacter=function(a){for(var c=0;c<b.length;c++)if(b[c][0]==a)return b[c][2];return 0},a.encodingByChar=function(a){for(var c=0;c<b.length;c++)if(b[c][0]==a)return b[c][1];return""},a}]),angular.module("barcode").factory("Code128BService",["Code128Service",function(a){"use strict";function b(b){for(var c="",d=0;d<b.length;d++)c+=a.encodingByChar(b[d]);return c}function c(b,c){for(var d=0,e=0;e<b.length;e++)d+=a.weightByCharacter(b[e])*(e+1);return(d+c)%103}var d={};return d.valid=function(b){return a.valid(b)},d.encoded=function(e){return d.valid(e)?a.calculateCode128(e,b,104,c):""},d}]),angular.module("barcode").factory("Code128CService",["Code128Service",function(a){"use strict";function b(b){for(var c="",d=0;d<b.length;d+=2)c+=a.encodingById(parseInt(b.substr(d,2)));return c}function c(a,b){for(var c=0,d=1,e=0;e<a.length;e+=2)c+=parseInt(a.substr(e,2))*d,d++;return(c+b)%103}var d={};return d.valid=function(b){return a.valid(b)},d.encoded=function(e){return d.valid(e)?(e=e.replace(/ /g,""),a.calculateCode128(e,b,105,c)):""},d}]),angular.module("barcode").factory("Code39Service",[function(){"use strict";function a(a){return-1!=a.search(f)}function b(a){a=a.toUpperCase();var b="";b+="1000101110111010";for(var d=0;d<a.length;d++)b+=c(a[d])+"0";return b+="1000101110111010"}function c(a){for(var b=0;b<e.length;b++)if(e[b][1]==a)return e[b][2];return""}var d={},e=[[0,"0","101000111011101"],[1,"1","111010001010111"],[2,"2","101110001010111"],[3,"3","111011100010101"],[4,"4","101000111010111"],[5,"5","111010001110101"],[6,"6","101110001110101"],[7,"7","101000101110111"],[8,"8","111010001011101"],[9,"9","101110001011101"],[10,"A","111010100010111"],[11,"B","101110100010111"],[12,"C","111011101000101"],[13,"D","101011100010111"],[14,"E","111010111000101"],[15,"F","101110111000101"],[16,"G","101010001110111"],[17,"H","111010100011101"],[18,"I","101110100011101"],[19,"J","101011100011101"],[20,"K","111010101000111"],[21,"L","101110101000111"],[22,"M","111011101010001"],[23,"N","101011101000111"],[24,"O","111010111010001"],[25,"P","101110111010001"],[26,"Q","101010111000111"],[27,"R","111010101110001"],[28,"S","101110101110001"],[29,"T","101011101110001"],[30,"U","111000101010111"],[31,"V","100011101010111"],[32,"W","111000111010101"],[33,"X","100010111010111"],[34,"Y","111000101110101"],[35,"Z","100011101110101"],[36,"-","100010101110111"],[37,".","111000101011101"],[38," ","100011101011101"],[39,"$","100010001000101"],[40,"/","100010001010001"],[41,"+","100010100010001"],[42,"%","101000100010001"]];d.valid=function(b){return a(b)},d.encoded=function(c){return a(c)?b(c):""};var f=/^[0-9a-zA-Z\-\.\ \$\/\+\%]+$/;return d}]),angular.module("barcode").factory("EanService",[function(){"use strict";function a(a){var c="",d=a[0],e=a.substr(1,7),f=a.substr(7,6);return c+=j,c+=b(e,i[d]),c+=l,c+=b(f,"RRRRRR"),c+=k}function b(a,b){for(var c="",d=0;d<a.length;d++)"L"==b[d]?c+=f[a[d]]:"G"==b[d]?c+=g[a[d]]:"R"==b[d]&&(c+=h[a[d]]);return c}function c(a){for(var b=0,c=0;12>c;c+=2)b+=parseInt(a[c]);for(var d=1;12>d;d+=2)b+=3*parseInt(a[d]);return(10-b%10)%10}function d(a){return-1!=a.search(m)&&a[12]==c(a)}var e={};e.valid=function(a){return d(a)},e.encoded=function(b){return d(b)?a(b):""};var f={0:"0001101",1:"0011001",2:"0010011",3:"0111101",4:"0100011",5:"0110001",6:"0101111",7:"0111011",8:"0110111",9:"0001011"},g={0:"0100111",1:"0110011",2:"0011011",3:"0100001",4:"0011101",5:"0111001",6:"0000101",7:"0010001",8:"0001001",9:"0010111"},h={0:"1110010",1:"1100110",2:"1101100",3:"1000010",4:"1011100",5:"1001110",6:"1010000",7:"1000100",8:"1001000",9:"1110100"},i={0:"LLLLLL",1:"LLGLGG",2:"LLGGLG",3:"LLGGGL",4:"LGLLGG",5:"LGGLLG",6:"LGGGLL",7:"LGLGLG",8:"LGLGGL",9:"LGGLGL"},j="101",k="101",l="01010",m=/^[0-9]{13}$/;return e}]),angular.module("barcode").factory("Itf14NumberService",[function(){"use strict";function a(a){var d="";13==a.length&&(a+=c(a)),d+=g;for(var e=0;14>e;e+=2)d+=b(a.substr(e,2));return d+=h}function b(a){for(var b="",c=f[a[0]],d=f[a[1]],e=0;5>e;e++)b+="1"==c[e]?"111":"1",b+="1"==d[e]?"000":"0";return b}function c(a){for(var b=0,c=0;13>c;c++)b+=parseInt(a[c])*(3-c%2*2);return 10-b%10}function d(a){return-1!=a.search(i)&&(14!=a.length||a[13]==c(a))}var e={};e.valid=function(a){return d(a)},e.encoded=function(b){return d(b)?a(b):""};var f={0:"00110",1:"10001",2:"01001",3:"11000",4:"00101",5:"10100",6:"01100",7:"00011",8:"10010",9:"01010"},g="1010",h="11101",i=/^[0-9]{13,14}$/;return e}]),angular.module("barcode").factory("ItfNumberService",[function(){"use strict";function a(a){var c="";c+=f;for(var d=0;d<a.length;d+=2)c+=b(a.substr(d,2));return c+=g}function b(a){for(var b="",c=e[a[0]],d=e[a[1]],f=0;5>f;f++)b+="1"==c[f]?"111":"1",b+="1"==d[f]?"000":"0";return b}function c(a){return-1!==a.search(h)}var d={};d.valid=function(a){return c(a)},d.encoded=function(b){return c(b)?a(b):""};var e={0:"00110",1:"10001",2:"01001",3:"11000",4:"00101",5:"10100",6:"01100",7:"00011",8:"10010",9:"01010"},f="1010",g="11101",h=/^([0-9][0-9])+$/;return d}]),angular.module("barcode").factory("UpcService",[function(){"use strict";function a(a){var c="",d=a[0],e=a.substr(1,7),f=a.substr(7,6);return c+=j,c+=b(e,i[d]),c+=l,c+=b(f,"RRRRRR"),c+=k}function b(a,b){for(var c="",d=0;d<a.length;d++)"L"==b[d]?c+=f[a[d]]:"G"==b[d]?c+=g[a[d]]:"R"==b[d]&&(c+=h[a[d]]);return c}function c(a){for(var b=0,c=0;12>c;c+=2)b+=parseInt(a[c]);for(var d=1;12>d;d+=2)b+=3*parseInt(a[d])
;return(10-b%10)%10}function d(a){return-1!=a.search(m)&&a[12]==c(a)}var e={};e.valid=function(a){return d("0"+a)},e.encoded=function(b){return d("0"+b)?a("0"+b):""};var f={0:"0001101",1:"0011001",2:"0010011",3:"0111101",4:"0100011",5:"0110001",6:"0101111",7:"0111011",8:"0110111",9:"0001011"},g={0:"0100111",1:"0110011",2:"0011011",3:"0100001",4:"0011101",5:"0111001",6:"0000101",7:"0010001",8:"0001001",9:"0010111"},h={0:"1110010",1:"1100110",2:"1101100",3:"1000010",4:"1011100",5:"1001110",6:"1010000",7:"1000100",8:"1001000",9:"1110100"},i={0:"LLLLLL",1:"LLGLGG",2:"LLGGLG",3:"LLGGGL",4:"LGLLGG",5:"LGGLLG",6:"LGGGLL",7:"LGLGLG",8:"LGLGGL",9:"LGGLGL"},j="101",k="101",l="01010",m=/^[0-9]{13}$/;return e}]),function(root,factory){"object"==typeof exports&&"object"==typeof module?module.exports=factory(require("angular")):"function"==typeof define&&define.amd?define(["angular"],factory):"object"==typeof exports?exports.angularIoBarcode=factory(require("angular")):root.angularIoBarcode=factory(root.angular)}(this,function(__WEBPACK_EXTERNAL_MODULE_1__){return function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.p="",__webpack_require__(0)}([function(module,exports,__webpack_require__){"use strict";var angular=__webpack_require__(1),ioBarcode=__webpack_require__(2);module.exports=angular.module("io-barcode",[]).constant("$ioBarcode",ioBarcode).constant("IO_BARCODE_TYPES",["EAN","UPC","ITF","ITF14","CODE39","CODE128B","CODE128C","Pharmacode"]).directive("ioBarcode",["$ioBarcode",function($ioBarcode){return{restrict:"E",template:"<img />",replace:!0,scope:{code:"@",type:"@",options:"="},link:function(scope,element,attrs){function render(){if(!ioBarcode[scope.type])return void console.warn("Invalid barcode type: "+scope.type);if(!scope.code)return void console.warn("No code provided");var canvas=$ioBarcode[scope.type](scope.code,scope.options);element.attr("src",canvas.toDataURL("image/png"))}scope.$watchGroup(["code","type","options"],render),scope.$watch("options",render,!0)}}}])},function(module,exports,__webpack_require__){module.exports=__WEBPACK_EXTERNAL_MODULE_1__},function(module,exports,__webpack_require__){"use strict";function _drawBarcodeText(text,canvas,opts){var ctx=canvas.getContext("2d"),x=void 0,y=void 0;y=opts.height,ctx.font=opts.fontSize+"px "+opts.font,ctx.textBaseline="bottom",ctx.textBaseline="top","left"===opts.textAlign?(x=opts.quite,ctx.textAlign="left"):"right"===opts.textAlign?(x=canvas.width-opts.quite,ctx.textAlign="right"):(x=canvas.width/2,ctx.textAlign="center"),ctx.fillText(text,x,y)}function generateBarcodeDataUri(Encoding,code,opts){opts=_assign2.default({},defaults,opts);var canvas=new _Canvas2.default,encoder=new Encoding(code);if(!encoder.isValid())throw new Error("Content is not supported by the encoding");var binaryString=encoder.encode(),ctx=canvas.getContext("2d");canvas.width=binaryString.length*opts.width+2*opts.quite,canvas.height=opts.height+(opts.displayValue?1.3*opts.fontSize:0),ctx.clearRect(0,0,canvas.width,canvas.height),opts.backgroundColor&&(ctx.fillStyle=opts.backgroundColor,ctx.fillRect(0,0,canvas.width,canvas.height)),ctx.fillStyle=opts.lineColor;for(var i=0;i<binaryString.length;i++){var x=i*opts.width+opts.quite;"1"===binaryString[i]&&ctx.fillRect(x,0,opts.width,opts.height)}return opts.displayValue&&_drawBarcodeText(code,canvas,opts),canvas}var _interopRequireWildcard=function(obj){return obj&&obj.__esModule?obj:{default:obj}};Object.defineProperty(exports,"__esModule",{value:!0});var _assign=__webpack_require__(3),_assign2=_interopRequireWildcard(_assign),_encodings=__webpack_require__(10),_encodings2=_interopRequireWildcard(_encodings),_Canvas=__webpack_require__(23),_Canvas2=_interopRequireWildcard(_Canvas),api={};for(var _name in _encodings2.default)!function(_name){api[_name]=function(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return generateBarcodeDataUri.apply(void 0,[_encodings2.default[_name]].concat(args))}}(_name);exports.default=api;var defaults={width:2,height:100,quite:10,displayValue:!1,font:"monospace",textAlign:"center",fontSize:12,backgroundColor:"",lineColor:"#000"};module.exports=exports.default},function(module,exports,__webpack_require__){__webpack_require__(4),module.exports=__webpack_require__(6).core.Object.assign},function(module,exports,__webpack_require__){var $def=__webpack_require__(5);$def($def.S,"Object",{assign:__webpack_require__(8)})},function(module,exports,__webpack_require__){function ctx(fn,that){return function(){return fn.apply(that,arguments)}}function $def(type,name,source){var key,own,out,exp,isGlobal=type&$def.G,isProto=type&$def.P,target=isGlobal?global:type&$def.S?global[name]:(global[name]||{}).prototype,exports=isGlobal?core:core[name]||(core[name]={});isGlobal&&(source=name);for(key in source)(own=!(type&$def.F)&&target&&key in target)&&key in exports||(out=own?target[key]:source[key],isGlobal&&!isFunction(target[key])?exp=source[key]:type&$def.B&&own?exp=ctx(out,global):type&$def.W&&target[key]==out?function(C){exp=function(param){return this instanceof C?new C(param):C(param)},exp.prototype=C.prototype}(out):exp=isProto&&isFunction(out)?ctx(Function.call,out):out,exports[key]=exp,isProto&&((exports.prototype||(exports.prototype={}))[key]=out))}var $=__webpack_require__(6),global=$.g,core=$.core,isFunction=$.isFunction;$def.F=1,$def.G=2,$def.S=4,$def.P=8,$def.B=16,$def.W=32,module.exports=$def},function(module,exports,__webpack_require__){"use strict";function toInteger(it){return isNaN(it=+it)?0:(it>0?floor:ceil)(it)}function desc(bitmap,value){return{enumerable:!(1&bitmap),configurable:!(2&bitmap),writable:!(4&bitmap),value:value}}function simpleSet(object,key,value){return object[key]=value,object}function createDefiner(bitmap){return DESC?function(object,key,value){return $.setDesc(object,key,desc(bitmap,value))}:simpleSet}function isObject(it){return null!==it&&("object"==typeof it||"function"==typeof it)}function isFunction(it){return"function"==typeof it}function assertDefined(it){if(void 0==it)throw TypeError("Can't call method on  "+it);return it}var global="undefined"!=typeof self?self:Function("return this")(),core={},defineProperty=Object.defineProperty,hasOwnProperty={}.hasOwnProperty,ceil=Math.ceil,floor=Math.floor,max=Math.max,min=Math.min,DESC=!!function(){try{return 2==defineProperty({},"a",{get:function(){return 2}}).a}catch(e){}}(),hide=createDefiner(1),$=module.exports=__webpack_require__(7)({g:global,core:core,html:global.document&&document.documentElement,isObject:isObject,isFunction:isFunction,that:function(){return this},toInteger:toInteger,toLength:function(it){return it>0?min(toInteger(it),9007199254740991):0},toIndex:function(index,length){return index=toInteger(index),index<0?max(index+length,0):min(index,length)},has:function(it,key){return hasOwnProperty.call(it,key)},create:Object.create,getProto:Object.getPrototypeOf,DESC:DESC,desc:desc,getDesc:Object.getOwnPropertyDescriptor,setDesc:defineProperty,setDescs:Object.defineProperties,getKeys:Object.keys,getNames:Object.getOwnPropertyNames,getSymbols:Object.getOwnPropertySymbols,assertDefined:assertDefined,ES5Object:Object,toObject:function(it){return $.ES5Object(assertDefined(it))},hide:hide,def:createDefiner(0),set:global.Symbol?simpleSet:hide,each:[].forEach});"undefined"!=typeof __e&&(__e=core),"undefined"!=typeof __g&&(__g=global)},function(module,exports,__webpack_require__){module.exports=function($){return $.FW=!1,$.path=$.core,$}},function(module,exports,__webpack_require__){var $=__webpack_require__(6),enumKeys=__webpack_require__(9);module.exports=Object.assign||function(target,source){for(var T=Object($.assertDefined(target)),l=arguments.length,i=1;l>i;)for(var key,S=$.ES5Object(arguments[i++]),keys=enumKeys(S),length=keys.length,j=0;length>j;)T[key=keys[j++]]=S[key];return T}},function(module,exports,__webpack_require__){var $=__webpack_require__(6);module.exports=function(it){var keys=$.getKeys(it),getDesc=$.getDesc,getSymbols=$.getSymbols;return getSymbols&&$.each.call(getSymbols(it),function(key){getDesc(it,key).enumerable&&keys.push(key)}),keys}},function(module,exports,__webpack_require__){"use strict";var _interopRequireWildcard=function(obj){return obj&&obj.__esModule?obj:{default:obj}};Object.defineProperty(exports,"__esModule",{value:!0});var _EAN=__webpack_require__(12),_EAN2=_interopRequireWildcard(_EAN),_UPC=__webpack_require__(13),_UPC2=_interopRequireWildcard(_UPC),_ITF=__webpack_require__(14),_ITF2=_interopRequireWildcard(_ITF),_ITF14=__webpack_require__(15),_ITF142=_interopRequireWildcard(_ITF14),_CODE39=__webpack_require__(11),_CODE392=_interopRequireWildcard(_CODE39),_CODE128B=__webpack_require__(16),_CODE128B2=_interopRequireWildcard(_CODE128B),_CODE128C=__webpack_require__(18),_CODE128C2=_interopRequireWildcard(_CODE128C),_Pharmacode=__webpack_require__(19),_Pharmacode2=_interopRequireWildcard(_Pharmacode);exports.default={EAN:_EAN2.default,UPC:_UPC2.default,ITF:_ITF2.default,ITF14:_ITF142.default,CODE39:_CODE392.default,CODE128B:_CODE128B2.default,CODE128C:_CODE128C2.default,Pharmacode:_Pharmacode2.default},module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";var _classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();Object.defineProperty(exports,"__esModule",{value:!0});var code39=[[0,"0","101000111011101"],[1,"1","111010001010111"],[2,"2","101110001010111"],[3,"3","111011100010101"],[4,"4","101000111010111"],[5,"5","111010001110101"],[6,"6","101110001110101"],[7,"7","101000101110111"],[8,"8","111010001011101"],[9,"9","101110001011101"],[10,"A","111010100010111"],[11,"B","101110100010111"],[12,"C","111011101000101"],[13,"D","101011100010111"],[14,"E","111010111000101"],[15,"F","101110111000101"],[16,"G","101010001110111"],[17,"H","111010100011101"],[18,"I","101110100011101"],[19,"J","101011100011101"],[20,"K","111010101000111"],[21,"L","101110101000111"],[22,"M","111011101010001"],[23,"N","101011101000111"],[24,"O","111010111010001"],[25,"P","101110111010001"],[26,"Q","101010111000111"],[27,"R","111010101110001"],[28,"S","101110101110001"],[29,"T","101011101110001"],[30,"U","111000101010111"],[31,"V","100011101010111"],[32,"W","111000111010101"],[33,"X","100010111010111"],[34,"Y","111000101110101"],[35,"Z","100011101110101"],[36,"-","100010101110111"],[37,".","111000101011101"],[38," ","100011101011101"],[39,"$","100010001000101"],[40,"/","100010001010001"],[41,"+","100010100010001"],[42,"%","101000100010001"]],validRe=/^[0-9a-zA-Z\-\.\ \$\/\+\%]+$/,CODE39=function(){function CODE39(code){_classCallCheck(this,CODE39),this.code=String(code)}return _createClass(CODE39,[{key:"isValid",value:function(){return validRe.test(this.code)}},{key:"encode",value:function(){var string=this.code.toUpperCase(),result="";result+="1000101110111010";for(var i=0;i<string.length;i++)result+=this.encodingByChar(string[i])+"0";return result+="1000101110111010"}},{key:"encodingByChar",value:function(char){for(var i=0;i<code39.length;i++)if(code39[i][1]===char)return code39[i][2];return""}}]),CODE39}();exports.default=CODE39,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";var _classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();Object.defineProperty(exports,"__esModule",{value:!0});var Lbinary={0:"0001101",1:"0011001",2:"0010011",3:"0111101",4:"0100011",5:"0110001",6:"0101111",7:"0111011",8:"0110111",9:"0001011"},Gbinary={0:"0100111",1:"0110011",2:"0011011",3:"0100001",4:"0011101",5:"0111001",6:"0000101",7:"0010001",8:"0001001",9:"0010111"},Rbinary={0:"1110010",1:"1100110",2:"1101100",3:"1000010",4:"1011100",5:"1001110",6:"1010000",7:"1000100",8:"1001000",9:"1110100"},EANstruct={0:"LLLLLL",1:"LLGLGG",2:"LLGGLG",3:"LLGGGL",4:"LGLLGG",5:"LGGLLG",6:"LGGGLL",7:"LGLGLG",8:"LGLGGL",9:"LGGLGL"},validRe=/^[0-9]{13}$/,EAN=function(){function EAN(code){_classCallCheck(this,EAN),this.code=String(code)}return _createClass(EAN,[{key:"isValid",value:function(){return validRe.test(this.code)&&Number(this.code[12])===this.checksum()}},{key:"checksum",value:function(){for(var result=0,i=0;i<12;i+=2)result+=Number(this.code[i]);for(var i=1;i<12;i+=2)result+=3*Number(this.code[i]);return(10-result%10)%10}},{key:"encode",value:function(){var result="",firstDigit=this.code[0],leftSide=this.code.substr(1,7),rightSide=this.code.substr(7,6);return result+="101",result+=this.encodeStruct(leftSide,EANstruct[firstDigit]),result+="01010",result+=this.encodeStruct(rightSide,"RRRRRR"),result+="101"}},{key:"encodeStruct",value:function(codePart,struct){for(var result="",i=0;i<codePart.length;i++)"L"===struct[i]?result+=Lbinary[codePart[i]]:"G"===struct[i]?result+=Gbinary[codePart[i]]:"R"===struct[i]&&(result+=Rbinary[codePart[i]]);return result}}]),EAN}();exports.default=EAN,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";var _classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")},_get=function get(object,property,receiver){var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;if(void 0!==getter)return getter.call(receiver)},_inherits=function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(subClass.__proto__=superClass)};Object.defineProperty(exports,"__esModule",{value:!0});var _EAN2=__webpack_require__(12),_EAN3=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_EAN2),UPC=function(_EAN){function UPC(code){_classCallCheck(this,UPC),_get(Object.getPrototypeOf(UPC.prototype),"constructor",this).call(this,"0"+code)}return _inherits(UPC,_EAN),UPC}(_EAN3.default);exports.default=UPC,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";var _classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();Object.defineProperty(exports,"__esModule",{value:!0});var digitStructure={0:"00110",1:"10001",2:"01001",3:"11000",4:"00101",5:"10100",6:"01100",7:"00011",8:"10010",9:"01010"},validRe=/^([0-9][0-9])+$/,ITF=function(){function ITF(code){_classCallCheck(this,ITF),this.code=String(code)}return _createClass(ITF,[{key:"isValid",value:function(){return validRe.test(this.code)}},{key:"encode",value:function(){var result="";result+="1010";for(var i=0;i<this.code.length;i+=2)result+=this.calculatePair(this.code.substr(i,2));return result+="11101"}},{key:"calculatePair",value:function(twoNumbers){for(var result="",number1Struct=digitStructure[twoNumbers[0]],number2Struct=digitStructure[twoNumbers[1]],i=0;i<5;i++)result+="1"===number1Struct[i]?"111":"1",result+="1"===number2Struct[i]?"000":"0";return result}}]),ITF}();exports.default=ITF,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";var _classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function get(object,property,receiver){var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;if(void 0!==getter)return getter.call(receiver)},_inherits=function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(subClass.__proto__=superClass)};Object.defineProperty(exports,"__esModule",{value:!0});var _ITF2=__webpack_require__(14),_ITF3=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_ITF2),validRe=/^[0-9]{13,14}$/,ITF14=function(_ITF){function ITF14(code){_classCallCheck(this,ITF14),_get(Object.getPrototypeOf(ITF14.prototype),"constructor",this).call(this,code),13===code.length&&(this.code+=this.checksum())}return _inherits(ITF14,_ITF),_createClass(ITF14,[{key:"isValid",value:function(){return _get(Object.getPrototypeOf(ITF14.prototype),"isValid",this).call(this)&&validRe.test(this.code)&&Number(this.code[13])===this.checksum()}},{key:"checksum",value:function(){for(var result=0,i=0;i<13;i++)result+=Number(this.code[i])*(3-i%2*2);return 10-result%10}}]),ITF14}(_ITF3.default);exports.default=ITF14,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";var _classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function get(object,property,receiver){var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;if(void 0!==getter)return getter.call(receiver)},_inherits=function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(subClass.__proto__=superClass)};Object.defineProperty(exports,"__esModule",{value:!0});var _CODE1282=__webpack_require__(17),_CODE1283=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_CODE1282),CODE128B=function(_CODE128){function CODE128B(code){_classCallCheck(this,CODE128B),_get(Object.getPrototypeOf(CODE128B.prototype),"constructor",this).call(this,code),this.startCode=104}return _inherits(CODE128B,_CODE128),_createClass(CODE128B,[{key:"encodeClass",value:function(){for(var result="",i=0;i<this.code.length;i++)result+=_get(Object.getPrototypeOf(CODE128B.prototype),"encodingByChar",this).call(this,this.code[i]);return result}},{key:"checksum",value:function(){for(var sum=0,i=0;i<this.code.length;i++)sum+=_get(Object.getPrototypeOf(CODE128B.prototype),"weightByCharacter",this).call(this,this.code[i])*(i+1);return(sum+this.startCode)%103}}]),CODE128B}(_CODE1283.default);exports.default=CODE128B,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";var _classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();Object.defineProperty(exports,"__esModule",{value:!0});var code128b=[[" ","11011001100",0],["!","11001101100",1],['"',"11001100110",2],["#","10010011000",3],["$","10010001100",4],["%","10001001100",5],["&","10011001000",6],["'","10011000100",7],["(","10001100100",8],[")","11001001000",9],["*","11001000100",10],["+","11000100100",11],[",","10110011100",12],["-","10011011100",13],[".","10011001110",14],["/","10111001100",15],["0","10011101100",16],["1","10011100110",17],["2","11001110010",18],["3","11001011100",19],["4","11001001110",20],["5","11011100100",21],["6","11001110100",22],["7","11101101110",23],["8","11101001100",24],["9","11100101100",25],[":","11100100110",26],[";","11101100100",27],["<","11100110100",28],["=","11100110010",29],[">","11011011000",30],["?","11011000110",31],["@","11000110110",32],["A","10100011000",33],["B","10001011000",34],["C","10001000110",35],["D","10110001000",36],["E","10001101000",37],["F","10001100010",38],["G","11010001000",39],["H","11000101000",40],["I","11000100010",41],["J","10110111000",42],["K","10110001110",43],["L","10001101110",44],["M","10111011000",45],["N","10111000110",46],["O","10001110110",47],["P","11101110110",48],["Q","11010001110",49],["R","11000101110",50],["S","11011101000",51],["T","11011100010",52],["U","11011101110",53],["V","11101011000",54],["W","11101000110",55],["X","11100010110",56],["Y","11101101000",57],["Z","11101100010",58],["[","11100011010",59],["\\","11101111010",60],["]","11001000010",61],["^","11110001010",62],["_","10100110000",63],["`","10100001100",64],["a","10010110000",65],["b","10010000110",66],["c","10000101100",67],["d","10000100110",68],["e","10110010000",69],["f","10110000100",70],["g","10011010000",71],["h","10011000010",72],["i","10000110100",73],["j","10000110010",74],["k","11000010010",75],["l","11001010000",76],["m","11110111010",77],["n","11000010100",78],["o","10001111010",79],["p","10100111100",80],["q","10010111100",81],["r","10010011110",82],["s","10111100100",83],["t","10011110100",84],["u","10011110010",85],["v","11110100100",86],["w","11110010100",87],["x","11110010010",88],["y","11011011110",89],["z","11011110110",90],["{","11110110110",91],["|","10101111000",92],["}","10100011110",93],["~","10001011110",94],[String.fromCharCode(127),"10111101000",95],[String.fromCharCode(128),"10111100010",96],[String.fromCharCode(129),"11110101000",97],[String.fromCharCode(130),"11110100010",98],[String.fromCharCode(131),"10111011110",99],[String.fromCharCode(132),"10111101110",100],[String.fromCharCode(133),"11101011110",101],[String.fromCharCode(134),"11110101110",102],[String.fromCharCode(135),"11010000100",103],[String.fromCharCode(136),"11010010000",104],[String.fromCharCode(137),"11010011100",105]],validRe=/^[!-~ ]+$/,CODE128=function(){function CODE128(code){_classCallCheck(this,CODE128),this.code=String(code)}return _createClass(CODE128,[{key:"isValid",value:function(){return validRe.test(this.code)}},{key:"encode",value:function(encodeFn,startCode,checksumFn){var result="";return result+=this.encodingById(this.startCode),result+=this.encodeClass(),result+=this.encodingById(this.checksum()),result+="1100011101011"}},{key:"encodingById",value:function(id){for(var i=0;i<code128b.length;i++)if(code128b[i][2]===id)return code128b[i][1];return""}},{key:"weightByCharacter",value:function(char){for(var i=0;i<code128b.length;i++)if(code128b[i][0]===char)return code128b[i][2];return 0}},{key:"encodingByChar",value:function(char){for(var i=0;i<code128b.length;i++)if(code128b[i][0]===char)return code128b[i][1];return""}}]),CODE128}();exports.default=CODE128,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";var _classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function get(object,property,receiver){var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;if(void 0!==getter)return getter.call(receiver)},_inherits=function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(subClass.__proto__=superClass)};Object.defineProperty(exports,"__esModule",{value:!0});var _CODE1282=__webpack_require__(17),_CODE1283=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_CODE1282),CODE128C=function(_CODE128){function CODE128C(code){_classCallCheck(this,CODE128C),_get(Object.getPrototypeOf(CODE128C.prototype),"constructor",this).call(this,code),this.code=this.code.replace(/ /g,""),this.startCode=105}return _inherits(CODE128C,_CODE128),_createClass(CODE128C,[{key:"encodeClass",value:function(){for(var result="",i=0;i<this.code.length;i+=2)result+=_get(Object.getPrototypeOf(CODE128C.prototype),"encodingById",this).call(this,Number(this.code.substr(i,2)));return result}},{key:"checksum",value:function(){for(var sum=0,w=1,i=0;i<this.code.length;i+=2)sum+=Number(this.code.substr(i,2))*w,w++;return(sum+this.startCode)%103}}]),CODE128C}(_CODE1283.default);exports.default=CODE128C,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";var _classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();Object.defineProperty(exports,"__esModule",{value:!0});var _repeat=__webpack_require__(20),_repeat2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_repeat),Pharmacode=function(){function Pharmacode(code){_classCallCheck(this,Pharmacode),this.code=Number(code)}return _createClass(Pharmacode,[{key:"isValid",value:function(){return this.code>=3&&this.code<=131070}},{key:"_calcZeros",value:function(code){for(var i=code.length-1,zeros=0;"0"===code[i]||i<0;)zeros++,i--;return zeros}},{key:"encodeBinary",value:function(code,state){if(0===code.length)return"";var generated=void 0,nextState=!1,nZeros=this._calcZeros(code);return 0===nZeros?(generated=state?"001":"00111",nextState=state):(generated=_repeat2.default("001",nZeros-(state?1:0)),generated+="00111"),this.encodeBinary(code.substr(0,code.length-nZeros-1),nextState)+generated}},{key:"encode",value:function(){return this.encodeBinary(this.code.toString(2),!0).substr(2)}}]),Pharmacode}();exports.default=Pharmacode,module.exports=exports.default},function(module,exports,__webpack_require__){__webpack_require__(21),module.exports=__webpack_require__(6).core.String.repeat},function(module,exports,__webpack_require__){var $def=__webpack_require__(5);$def($def.P,"String",{repeat:__webpack_require__(22)})},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(6);module.exports=function(count){var str=String($.assertDefined(this)),res="",n=$.toInteger(count);if(n<0||n==1/0)throw RangeError("Count can't be negative");for(;n>0;(n>>>=1)&&(str+=str))1&n&&(res+=str);return res}},function(module,exports,__webpack_require__){(module.exports=function(w,h){var canvas=document.createElement("canvas");return canvas.width=w||300,canvas.height=h||150,canvas}).Image=function(){return document.createElement("img")}}])}),function(e,t,n){"use strict";!function o(e,t,n){function a(s,l){if(!t[s]){if(!e[s]){var i="function"==typeof require&&require;if(!l&&i)return i(s,!0);if(r)return r(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=t[s]={exports:{}};e[s][0].call(c.exports,function(t){var n=e[s][1][t];return a(n||t)},c,c.exports,o,e,t,n)}return t[s].exports}for(var r="function"==typeof require&&require,s=0;s<n.length;s++)a(n[s]);return a}({1:[function(o,a,r){var s=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});var l,i,u,c,d=o("./modules/handle-dom"),f=o("./modules/utils"),p=o("./modules/handle-swal-dom"),m=o("./modules/handle-click"),v=o("./modules/handle-key"),y=s(v),h=o("./modules/default-params"),b=s(h),g=o("./modules/set-params"),w=s(g);r.default=u=c=function(){function o(e){var t=a;return t[e]===n?b.default[e]:t[e]}var a=arguments[0];if(d.addClass(t.body,"stop-scrolling"),p.resetInput(),a===n)return f.logStr("SweetAlert expects at least 1 attribute!"),!1
;var r=f.extend({},b.default);switch(typeof a){case"string":r.title=a,r.text=arguments[1]||"",r.type=arguments[2]||"";break;case"object":if(a.title===n)return f.logStr('Missing "title" argument!'),!1;r.title=a.title;for(var s in b.default)r[s]=o(s);r.confirmButtonText=r.showCancelButton?"Confirm":b.default.confirmButtonText,r.confirmButtonText=o("confirmButtonText"),r.doneFunction=arguments[1]||null;break;default:return f.logStr('Unexpected type of argument! Expected "string" or "object", got '+typeof a),!1}w.default(r),p.fixVerticalPosition(),p.openModal(arguments[1]);for(var u=p.getModal(),v=u.querySelectorAll("button"),h=["onclick","onmouseover","onmouseout","onmousedown","onmouseup","onfocus"],g=function(e){return m.handleButton(e,r,u)},C=0;C<v.length;C++)for(var S=0;S<h.length;S++){var x=h[S];v[C][x]=g}p.getOverlay().onclick=g,l=e.onkeydown;var k=function(e){return y.default(e,r,u)};e.onkeydown=k,e.onfocus=function(){setTimeout(function(){i!==n&&(i.focus(),i=n)},0)},c.enableButtons()},u.setDefaults=c.setDefaults=function(e){if(!e)throw new Error("userParams is required");if("object"!=typeof e)throw new Error("userParams has to be a object");f.extend(b.default,e)},u.close=c.close=function(){var o=p.getModal();d.fadeOut(p.getOverlay(),5),d.fadeOut(o,5),d.removeClass(o,"showSweetAlert"),d.addClass(o,"hideSweetAlert"),d.removeClass(o,"visible");var a=o.querySelector(".sa-icon.sa-success");d.removeClass(a,"animate"),d.removeClass(a.querySelector(".sa-tip"),"animateSuccessTip"),d.removeClass(a.querySelector(".sa-long"),"animateSuccessLong");var r=o.querySelector(".sa-icon.sa-error");d.removeClass(r,"animateErrorIcon"),d.removeClass(r.querySelector(".sa-x-mark"),"animateXMark");var s=o.querySelector(".sa-icon.sa-warning");return d.removeClass(s,"pulseWarning"),d.removeClass(s.querySelector(".sa-body"),"pulseWarningIns"),d.removeClass(s.querySelector(".sa-dot"),"pulseWarningIns"),setTimeout(function(){var e=o.getAttribute("data-custom-class");d.removeClass(o,e)},300),d.removeClass(t.body,"stop-scrolling"),e.onkeydown=l,e.previousActiveElement&&e.previousActiveElement.focus(),i=n,clearTimeout(o.timeout),!0},u.showInputError=c.showInputError=function(e){var t=p.getModal(),n=t.querySelector(".sa-input-error");d.addClass(n,"show");var o=t.querySelector(".sa-error-container");d.addClass(o,"show"),o.querySelector("p").innerHTML=e,setTimeout(function(){u.enableButtons()},1),t.querySelector("input").focus()},u.resetInputError=c.resetInputError=function(e){if(e&&13===e.keyCode)return!1;var t=p.getModal(),n=t.querySelector(".sa-input-error");d.removeClass(n,"show");var o=t.querySelector(".sa-error-container");d.removeClass(o,"show")},u.disableButtons=c.disableButtons=function(){var e=p.getModal(),t=e.querySelector("button.confirm"),n=e.querySelector("button.cancel");t.disabled=!0,n.disabled=!0},u.enableButtons=c.enableButtons=function(){var e=p.getModal(),t=e.querySelector("button.confirm"),n=e.querySelector("button.cancel");t.disabled=!1,n.disabled=!1},void 0!==e?e.sweetAlert=e.swal=u:f.logStr("SweetAlert is a frontend module!"),a.exports=r.default},{"./modules/default-params":2,"./modules/handle-click":3,"./modules/handle-dom":4,"./modules/handle-key":5,"./modules/handle-swal-dom":6,"./modules/set-params":8,"./modules/utils":9}],2:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var o={title:"",text:"",type:null,allowOutsideClick:!1,showConfirmButton:!0,showCancelButton:!1,closeOnConfirm:!0,closeOnCancel:!0,confirmButtonText:"OK",confirmButtonColor:"#8CD4F5",cancelButtonText:"Cancel",imageUrl:null,imageSize:null,timer:null,customClass:"",html:!1,animation:!0,allowEscapeKey:!0,inputType:"text",inputPlaceholder:"",inputValue:"",showLoaderOnConfirm:!1};n.default=o,t.exports=n.default},{}],3:[function(t,n,o){Object.defineProperty(o,"__esModule",{value:!0});var a=t("./utils"),r=(t("./handle-swal-dom"),t("./handle-dom")),s=function(t,n,o){function s(e){m&&n.confirmButtonColor&&(p.style.backgroundColor=e)}var u,c,d,f=t||e.event,p=f.target||f.srcElement,m=-1!==p.className.indexOf("confirm"),v=-1!==p.className.indexOf("sweet-overlay"),y=r.hasClass(o,"visible"),h=n.doneFunction&&"true"===o.getAttribute("data-has-done-function");switch(m&&n.confirmButtonColor&&(u=n.confirmButtonColor,c=a.colorLuminance(u,-.04),d=a.colorLuminance(u,-.14)),f.type){case"mouseover":s(c);break;case"mouseout":s(u);break;case"mousedown":s(d);break;case"mouseup":s(c);break;case"focus":var b=o.querySelector("button.confirm"),g=o.querySelector("button.cancel");m?g.style.boxShadow="none":b.style.boxShadow="none";break;case"click":var w=o===p,C=r.isDescendant(o,p);if(!w&&!C&&y&&!n.allowOutsideClick)break;m&&h&&y?l(o,n):h&&y||v?i(o,n):r.isDescendant(o,p)&&"BUTTON"===p.tagName&&sweetAlert.close()}},l=function(e,t){var n=!0;r.hasClass(e,"show-input")&&((n=e.querySelector("input").value)||(n="")),t.doneFunction(n),t.closeOnConfirm&&sweetAlert.close(),t.showLoaderOnConfirm&&sweetAlert.disableButtons()},i=function(e,t){var n=String(t.doneFunction).replace(/\s/g,"");"function("===n.substring(0,9)&&")"!==n.substring(9,10)&&t.doneFunction(!1),t.closeOnCancel&&sweetAlert.close()};o.default={handleButton:s,handleConfirm:l,handleCancel:i},n.exports=o.default},{"./handle-dom":4,"./handle-swal-dom":6,"./utils":9}],4:[function(n,o,a){Object.defineProperty(a,"__esModule",{value:!0});var r=function(e,t){return new RegExp(" "+t+" ").test(" "+e.className+" ")},s=function(e,t){r(e,t)||(e.className+=" "+t)},l=function(e,t){var n=" "+e.className.replace(/[\t\r\n]/g," ")+" ";if(r(e,t)){for(;n.indexOf(" "+t+" ")>=0;)n=n.replace(" "+t+" "," ");e.className=n.replace(/^\s+|\s+$/g,"")}},i=function(e){var n=t.createElement("div");return n.appendChild(t.createTextNode(e)),n.innerHTML},u=function(e){e.style.opacity="",e.style.display="block"},c=function(e){if(e&&!e.length)return u(e);for(var t=0;t<e.length;++t)u(e[t])},d=function(e){e.style.opacity="",e.style.display="none"},f=function(e){if(e&&!e.length)return d(e);for(var t=0;t<e.length;++t)d(e[t])},p=function(e,t){for(var n=t.parentNode;null!==n;){if(n===e)return!0;n=n.parentNode}return!1},m=function(e){e.style.left="-9999px",e.style.display="block";var t,n=e.clientHeight;return t="undefined"!=typeof getComputedStyle?parseInt(getComputedStyle(e).getPropertyValue("padding-top"),10):parseInt(e.currentStyle.padding),e.style.left="",e.style.display="none","-"+parseInt((n+t)/2)+"px"},v=function(e,t){if(+e.style.opacity<1){t=t||16,e.style.opacity=0,e.style.display="block";var n=+new Date,o=function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){e.style.opacity=+e.style.opacity+(new Date-n)/100,n=+new Date,+e.style.opacity<1&&setTimeout(o,t)});o()}e.style.display="block"},y=function(e,t){t=t||16,e.style.opacity=1;var n=+new Date,o=function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){e.style.opacity=+e.style.opacity-(new Date-n)/100,n=+new Date,+e.style.opacity>0?setTimeout(o,t):e.style.display="none"});o()},h=function(n){if("function"==typeof MouseEvent){var o=new MouseEvent("click",{view:e,bubbles:!1,cancelable:!0});n.dispatchEvent(o)}else if(t.createEvent){var a=t.createEvent("MouseEvents");a.initEvent("click",!1,!1),n.dispatchEvent(a)}else t.createEventObject?n.fireEvent("onclick"):"function"==typeof n.onclick&&n.onclick()},b=function(t){"function"==typeof t.stopPropagation?(t.stopPropagation(),t.preventDefault()):e.event&&e.event.hasOwnProperty("cancelBubble")&&(e.event.cancelBubble=!0)};a.hasClass=r,a.addClass=s,a.removeClass=l,a.escapeHtml=i,a._show=u,a.show=c,a._hide=d,a.hide=f,a.isDescendant=p,a.getTopMargin=m,a.fadeIn=v,a.fadeOut=y,a.fireClick=h,a.stopEventPropagation=b},{}],5:[function(t,o,a){Object.defineProperty(a,"__esModule",{value:!0});var r=t("./handle-dom"),s=t("./handle-swal-dom"),l=function(t,o,a){var l=t||e.event,i=l.keyCode||l.which,u=a.querySelector("button.confirm"),c=a.querySelector("button.cancel"),d=a.querySelectorAll("button[tabindex]");if(-1!==[9,13,32,27].indexOf(i)){for(var f=l.target||l.srcElement,p=-1,m=0;m<d.length;m++)if(f===d[m]){p=m;break}9===i?(f=-1===p?u:p===d.length-1?d[0]:d[p+1],r.stopEventPropagation(l),f.focus(),o.confirmButtonColor&&s.setFocusStyle(f,o.confirmButtonColor)):13===i?("INPUT"===f.tagName&&(f=u,u.focus()),f=-1===p?u:n):27===i&&!0===o.allowEscapeKey?(f=c,r.fireClick(f,l)):f=n}};a.default=l,o.exports=a.default},{"./handle-dom":4,"./handle-swal-dom":6}],6:[function(n,o,a){var r=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(a,"__esModule",{value:!0});var s=n("./utils"),l=n("./handle-dom"),i=n("./default-params"),u=r(i),c=n("./injected-html"),d=r(c),m=function(){var e=t.createElement("div");for(e.innerHTML=d.default;e.firstChild;)t.body.appendChild(e.firstChild)},v=function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=t.querySelector(".sweet-alert");return e||(m(),e=v()),e}),y=function(){var e=v();return e?e.querySelector("input"):void 0},h=function(){return t.querySelector(".sweet-overlay")},b=function(e,t){var n=s.hexToRgb(t);e.style.boxShadow="0 0 2px rgba("+n+", 0.8), inset 0 0 0 1px rgba(0, 0, 0, 0.05)"},g=function(n){var o=v();l.fadeIn(h(),10),l.show(o),l.addClass(o,"showSweetAlert"),l.removeClass(o,"hideSweetAlert"),e.previousActiveElement=t.activeElement,o.querySelector("button.confirm").focus(),setTimeout(function(){l.addClass(o,"visible")},500);var r=o.getAttribute("data-timer");if("null"!==r&&""!==r){var s=n;o.timeout=setTimeout(function(){(s||null)&&"true"===o.getAttribute("data-has-done-function")?s(null):sweetAlert.close()},r)}},w=function(){var e=v(),t=y();l.removeClass(e,"show-input"),t.value=u.default.inputValue,t.setAttribute("type",u.default.inputType),t.setAttribute("placeholder",u.default.inputPlaceholder),C()},C=function(e){if(e&&13===e.keyCode)return!1;var t=v(),n=t.querySelector(".sa-input-error");l.removeClass(n,"show");var o=t.querySelector(".sa-error-container");l.removeClass(o,"show")},S=function(){v().style.marginTop=l.getTopMargin(v())};a.sweetAlertInitialize=m,a.getModal=v,a.getOverlay=h,a.getInput=y,a.setFocusStyle=b,a.openModal=g,a.resetInput=w,a.resetInputError=C,a.fixVerticalPosition=S},{"./default-params":2,"./handle-dom":4,"./injected-html":7,"./utils":9}],7:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default='<div class="sweet-overlay" tabIndex="-1"></div><div class="sweet-alert"><div class="sa-icon sa-error">\n      <span class="sa-x-mark">\n        <span class="sa-line sa-left"></span>\n        <span class="sa-line sa-right"></span>\n      </span>\n    </div><div class="sa-icon sa-warning">\n      <span class="sa-body"></span>\n      <span class="sa-dot"></span>\n    </div><div class="sa-icon sa-info"></div><div class="sa-icon sa-success">\n      <span class="sa-line sa-tip"></span>\n      <span class="sa-line sa-long"></span>\n\n      <div class="sa-placeholder"></div>\n      <div class="sa-fix"></div>\n    </div><div class="sa-icon sa-custom"></div><h2>Title</h2>\n    <p>Text</p>\n    <fieldset>\n      <input type="text" tabIndex="3" />\n      <div class="sa-input-error"></div>\n    </fieldset><div class="sa-error-container">\n      <div class="icon">!</div>\n      <p>Not valid!</p>\n    </div><div class="sa-button-container">\n      <button class="cancel" tabIndex="2">Cancel</button>\n      <div class="sa-confirm-button-container">\n        <button class="confirm" tabIndex="1">OK</button><div class="la-ball-fall">\n          <div></div>\n          <div></div>\n          <div></div>\n        </div>\n      </div>\n    </div></div>',t.exports=n.default},{}],8:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var a=e("./utils"),r=e("./handle-swal-dom"),s=e("./handle-dom"),l=["error","warning","info","success","input","prompt"],i=function(e){var t=r.getModal(),o=t.querySelector("h2"),i=t.querySelector("p"),u=t.querySelector("button.cancel"),c=t.querySelector("button.confirm");if(o.innerHTML=e.html?e.title:s.escapeHtml(e.title).split("\n").join("<br>"),i.innerHTML=e.html?e.text:s.escapeHtml(e.text||"").split("\n").join("<br>"),e.text&&s.show(i),e.customClass)s.addClass(t,e.customClass),t.setAttribute("data-custom-class",e.customClass);else{var d=t.getAttribute("data-custom-class");s.removeClass(t,d),t.setAttribute("data-custom-class","")}if(s.hide(t.querySelectorAll(".sa-icon")),e.type&&!a.isIE8()){var f=function(){for(var o=!1,a=0;a<l.length;a++)if(e.type===l[a]){o=!0;break}if(!o)return logStr("Unknown alert type: "+e.type),{v:!1};var i=["success","error","warning","info"],u=n;-1!==i.indexOf(e.type)&&(u=t.querySelector(".sa-icon.sa-"+e.type),s.show(u));var c=r.getInput();switch(e.type){case"success":s.addClass(u,"animate"),s.addClass(u.querySelector(".sa-tip"),"animateSuccessTip"),s.addClass(u.querySelector(".sa-long"),"animateSuccessLong");break;case"error":s.addClass(u,"animateErrorIcon"),s.addClass(u.querySelector(".sa-x-mark"),"animateXMark");break;case"warning":s.addClass(u,"pulseWarning"),s.addClass(u.querySelector(".sa-body"),"pulseWarningIns"),s.addClass(u.querySelector(".sa-dot"),"pulseWarningIns");break;case"input":case"prompt":c.setAttribute("type",e.inputType),c.value=e.inputValue,c.setAttribute("placeholder",e.inputPlaceholder),s.addClass(t,"show-input"),setTimeout(function(){c.focus(),c.addEventListener("keyup",swal.resetInputError)},400)}}();if("object"==typeof f)return f.v}if(e.imageUrl){var p=t.querySelector(".sa-icon.sa-custom");p.style.backgroundImage="url("+e.imageUrl+")",s.show(p);var m=80,v=80;if(e.imageSize){var y=e.imageSize.toString().split("x"),h=y[0],b=y[1];h&&b?(m=h,v=b):logStr("Parameter imageSize expects value with format WIDTHxHEIGHT, got "+e.imageSize)}p.setAttribute("style",p.getAttribute("style")+"width:"+m+"px; height:"+v+"px")}t.setAttribute("data-has-cancel-button",e.showCancelButton),e.showCancelButton?u.style.display="inline-block":s.hide(u),t.setAttribute("data-has-confirm-button",e.showConfirmButton),e.showConfirmButton?c.style.display="inline-block":s.hide(c),e.cancelButtonText&&(u.innerHTML=s.escapeHtml(e.cancelButtonText)),e.confirmButtonText&&(c.innerHTML=s.escapeHtml(e.confirmButtonText)),e.confirmButtonColor&&(c.style.backgroundColor=e.confirmButtonColor,c.style.borderLeftColor=e.confirmLoadingButtonColor,c.style.borderRightColor=e.confirmLoadingButtonColor,r.setFocusStyle(c,e.confirmButtonColor)),t.setAttribute("data-allow-outside-click",e.allowOutsideClick);var g=!!e.doneFunction;t.setAttribute("data-has-done-function",g),e.animation?"string"==typeof e.animation?t.setAttribute("data-animation",e.animation):t.setAttribute("data-animation","pop"):t.setAttribute("data-animation","none"),t.setAttribute("data-timer",e.timer)};o.default=i,t.exports=o.default},{"./handle-dom":4,"./handle-swal-dom":6,"./utils":9}],9:[function(t,n,o){Object.defineProperty(o,"__esModule",{value:!0});var a=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},r=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?parseInt(t[1],16)+", "+parseInt(t[2],16)+", "+parseInt(t[3],16):null},s=function(){return e.attachEvent&&!e.addEventListener},l=function(t){e.console&&e.console.log("SweetAlert: "+t)},i=function(e,t){e=String(e).replace(/[^0-9a-f]/gi,""),e.length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),t=t||0;var n,o,a="#";for(o=0;3>o;o++)n=parseInt(e.substr(2*o,2),16),n=Math.round(Math.min(Math.max(0,n+n*t),255)).toString(16),a+=("00"+n).substr(n.length);return a};o.extend=a,o.hexToRgb=r,o.isIE8=s,o.logStr=l,o.colorLuminance=i},{}]},{},[1]),"function"==typeof define&&define.amd?define(function(){return sweetAlert}):"undefined"!=typeof module&&module.exports&&(module.exports=sweetAlert)}(window,document),angular.module("mdo-angular-cryptography",[]).provider("$crypto",function(){this.setCryptographyKey=function(value){this.cryptoKey=value},this.$get=[function(){return{cryptoKey:this.cryptoKey,encrypt:function(message,key){return void 0===key&&(key=this.cryptoKey),CryptoJS.AES.encrypt(message,key).toString()},decrypt:function(message,key){return void 0===key&&(key=this.cryptoKey),CryptoJS.AES.decrypt(message,key).toString(CryptoJS.enc.Utf8)}}}]});